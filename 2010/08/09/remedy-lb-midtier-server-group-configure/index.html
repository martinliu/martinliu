<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="上图为大型用户环境下 Remedy ITSM 的部署架构，作为本安装步骤参考模型。所不同的是，如下配置步骤只应用了一个最上面的负载均衡器，每个 Web 对应连接一个 ARS 服务"><title>Remedy Server Group及负载均衡配置参考步骤</title><link rel=canonical href=https://martinliu.cn/2010/08/09/remedy-lb-midtier-server-group-configure/><link rel=stylesheet href=/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css><meta property="og:title" content="Remedy Server Group及负载均衡配置参考步骤"><meta property="og:description" content="上图为大型用户环境下 Remedy ITSM 的部署架构，作为本安装步骤参考模型。所不同的是，如下配置步骤只应用了一个最上面的负载均衡器，每个 Web 对应连接一个 ARS 服务"><meta property="og:url" content="https://martinliu.cn/2010/08/09/remedy-lb-midtier-server-group-configure/"><meta property="og:site_name" content="Martin Liu's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="ARS"><meta property="article:tag" content="remedy"><meta property="article:published_time" content="2010-08-09T01:08:31+00:00"><meta property="article:modified_time" content="2010-08-09T01:08:31+00:00"><meta name=twitter:title content="Remedy Server Group及负载均衡配置参考步骤"><meta name=twitter:description content="上图为大型用户环境下 Remedy ITSM 的部署架构，作为本安装步骤参考模型。所不同的是，如下配置步骤只应用了一个最上面的负载均衡器，每个 Web 对应连接一个 ARS 服务"><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-749876-6","auto"),ga("send","pageview"))</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1c7d893ce8aa46fc819d9e2ee56dab62_7023_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>☁️</span></figure><div class=site-meta><h1 class=site-name><a href=/>Martin Liu's Blog</a></h1><h2 class=site-description>Seniro Developer Advocate@Elastic, Founder of DevOps China</h2></div></header><ol class=social-menu><li><a href=https://github.com/martinliu/ target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/martinliu target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>首页</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M21 14l-3-3h-7a1 1 0 01-1-1V4a1 1 0 011-1h9a1 1 0 011 1v10"/><path d="M14 15v2a1 1 0 01-1 1H6l-3 3V11a1 1 0 011-1h2"/></svg><span>关于</span></a></li><li><a href=/course/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>教程</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜索</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>归档</span></a></li><li><a href=/%E9%93%BE%E6%8E%A5/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>链接</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://martinliu.cn/ selected>中文</option><option value=https://martinliu.cn/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/itsm/ style=background-color:#2a9d8f;color:#fff>IT服务管理</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/2010/08/09/remedy-lb-midtier-server-group-configure/>Remedy Server Group及负载均衡配置参考步骤</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2010-08-09, Monday</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 3 分钟</time></div></footer></div></header><section class=article-content><p><a class=link href=http://martinliu.cn/2010/08/remedy-lb-midtier-server-group-configure.html/remedyitsmarch target=_blank rel=noopener><img src=http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/08/RemedyITSMArch-253x300.jpg loading=lazy></a>上图为大型用户环境下 Remedy ITSM 的部署架构，作为本安装步骤参考模型。所不同的是，如下配置步骤只应用了一个最上面的负载均衡器，每个 Web 对应连接一个 ARS 服务器，简化掉了中间放在 ARS 前的负载均衡器。</p><p><strong>第一步</strong> 安装前的准备工作。
确定 Remedy ARS 的服务别名，例如“AtriumCMDB”。在所有的 Web 服务器（Mid-tier 所安装的服务器）的 host 文件中加入一条 Ip 地址解析，例如：</p><p>此 ARS 服务别名指向的是该 Web 服务器所对应的 ARS 服务器，例如：Web1 中 AtriumCMDB 对应的 ip 为 ARS1，Web2 对应 ARS2，Web3 对应 ARS3，以此类推。</p><p><strong>第二步</strong>安装第一台 ARS 服务器
默认所有的 ARS 都安装了数据库客户端程序，如果是 Oracle 数据库，ARS 上的客户端程序的大小版本号必须和远程数据库的大小版本号完全一致。Windows 平台的 Oracle 客户端只支持 32 位的程序。在所有 ARS 服务器的 host 文件中加入一条 Ip 地址解析，例如：</p><p>此 IP 地址为每台 ARS 自己的对外提供 ARS 服务的 IP。ARS 上安装完 JDK 之后，开始安装 ARS，安装过程中服务器别名输入 AtriumCMDB，其他的选项都按需要配置，所有有关服务器端组件、服务端口、密码、安装路径的信息都要做详细记录，用来安装 Server Group 中其他成员使用。安装完第一台服务器的 ARS 之后，申请 Remedy License，打 License，包括其他所有 CMDB、ITSM 相关应用模块的 License，打完 License 后导出成文件备用。ARS 安装成功之后，顺序安装其他应用，顺序时 CMDB 》ITSM  其他。安装完毕后，通过 Remedy User 来确认所有应用功能是否正常。</p><p>**第三步 **配置第一台 ARS 服务器为 Server Group 中的管理服务器
配置方法参照，ARS Configuration Guide 中的 Server Group 的相关章节。配置完毕之后打开 Server Group 的 Log，从启动 ARS 服务之后，查看该 Log 看 Server Group 工作是否正常。</p><p><strong>第四步</strong> 安装 Server Group 中的成员 ARS 服务器
准备工作参考第一台 ARS 服务器。运行 ARS 安装程序，选择 Server Group，选择输入 AtriumCMDB 别名，选择共享的数据库，其他参数与第一台保持一致。安装完毕之后。使用 ARS 自带的 Sample 应用新增一个 city，在 ARS1 上查询 ARS2 上新增的记录。同样参考的 Server Group 的相关章节，对 ARS2 进行配置。在 ARS2 上查看 Server Group 的日志，确认该 ARS 已经加入了以第一台 ARS 为管理服务器的群集中。为第二台 ARS 服务器打 License。在确认第二台 ARS 服务器成功加入之后，安装 CMDB 应用。安装完毕之后，在第二台 ARS 服务器上，使用 Remedy User 客户端，打开 CMDB 的相关表单进行新增和查询操作；然后在 ARS1 上检查操作结果，保证两边一致。安装 ITSM：直接把第一台 ARS 服务器的 ar.cfg 文件覆盖到第二台 ARS 的 ar.cfg 上，一定要修改第一台 ARS 服务器主机名的哪一行，把它修改为第二台 ARS 的主机名。复制第一台 ARS 的 ITSM 安装目录到第二台 ARS 的相同路径中，重启 ARS 服务。查看 arerror.log 文件看看 ARS 启动的是否正常。在第二台 ARS 上使用 Remedy User 确认 ITSM 应用是否工作正常，如果一切工作正常，则第二台 ARS 服务器安装完毕。按照相同的方式安装其他的 ARS 服务器。</p><p><strong>第五步</strong> 配置每台 ARS 的 ranking
按照 ARS Configuration Guide 中的 Server Group 的相关章节配置每台 ARS 服务器处理不同后台工作流的 ranking。</p><p><strong>第六步</strong> 安装配置所有 Web 服务器的 Remedy Mid-tier
安装 Remedy Mid-tier 软件，都指向相同的 ARS 服务别名 AtriumCMDB，当然该别名被解析为它所对应的 ARS 服务器的 IP 地址。使用浏览器测试每台 Web 服务器，保证 Remedy Mid-tier 都能正常工作。</p><p><strong>第七步</strong> 配置 F5 负载均衡
配置 F5 的分发策略，按不同 ARS 服务器的用途，来分别不同的用户请求。考虑管理和接口功能的 ARS 负担少量的用户交互。开发一个 jsp 的程序部署在 Mid-tier 的 shared 目录中，用它来判断 Web 所对应的 ARS 的可用性，以此作为唯一判断条件来分发用户请求给可用的 web 服务器。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/ars/>ARS</a>
<a href=/tags/remedy/>remedy</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>署名-非商业性使用-禁止演绎 3.0 未本地化版本 (CC BY-NC-ND 3.0)</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/2011/05/04/remedy-itsm-7-6-04-quick-install-guide/><div class=article-details><h2 class=article-title>Remedy ITSM 7.6.04 套件快速安装</h2></div></a></article><article><a href=/2011/04/02/ars-start-issue-on-oracle/><div class=article-details><h2 class=article-title>ARS启动故障修复案例</h2></div></a></article><article><a href=/2011/03/01/remedy-ars-open-source-tool/><div class=article-details><h2 class=article-title>Remedy ARS 开源工具知多少</h2></div></a></article><article><a href=/2011/02/14/backup-restore-remedy-ars-oracle-db/><div class=article-details><h2 class=article-title>在Oracle上备份和恢复 Remedy ARS数据库</h2></div></a></article><article><a href=/2011/02/10/64-windows-ars-75-install-tips/><div class=article-details><h2 class=article-title>在64位Windows上安装ARS7.5</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//martinliu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2007 -
2023 Martin Liu's Blog</section><section class=powerby>本博客始于 2007 年<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>
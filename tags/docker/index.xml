<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>docker on Martin Liu's Blog</title><link>https://martinliu.cn/tags/docker/</link><description>Recent content in docker on Martin Liu's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 04 Jan 2023 10:19:53 +0800</lastBuildDate><atom:link href="https://martinliu.cn/tags/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>DevOps 在 2023 年的趋势和预测</title><link>https://martinliu.cn/blog/deveops-trands-in-2023/</link><pubDate>Wed, 04 Jan 2023 10:19:53 +0800</pubDate><guid>https://martinliu.cn/blog/deveops-trands-in-2023/</guid><description>&lt;img src="https://martinliu.cn/blog/deveops-trands-in-2023/pexels-samar-mourya-13378403.jpg" alt="Featured image of post DevOps 在 2023 年的趋势和预测" />&lt;p>随着技术的发展，与之相关的趋势也在不断变化。DevOps也不例外。现在，企业比以往任何时候，都更加认识到DevOps的价值，及其优化开发和运营的能力。随着我们走过2022年，进入2023年，重要的是要保持领先，了解未来几年推动DevOps的趋势。&lt;/p>
&lt;p>2022年对于DevOps技术来说是令人兴奋的一年，因为企业越来越认识到自动化和协作对于实现业务成功的重要性。采取敏捷的DevOps方法的公司在效率和生产力方面有了相当大的改善。这是由云计算的持续采用和容器化的崛起所做出的支撑。此外，随着 DevOps-as-a-Service（DaaS）解决方案的日益普及，意味着所有规模的组织都能够从DevOps实践中受益，而不需要专门的DevOps团队。&lt;/p>
&lt;p>云原生架构、无服务器计算和容器被广泛的采用，更多的组织将它们作为未来的方向。这使团队能够以敏捷和高效的方式快速部署、扩展和管理应用程序。人工智能/ML工具成为DevOps工具箱中的一部分，使团队能够更快速、高效地提供软件更新和功能，并检测代码中的异常情况，从而更容易在潜在问题变成严重问题之前发现它们。安全性仍然是一个重要的优先事项，企业在最新的技术和最佳实践方面进行了大量投资，以确保他们的系统是安全可靠的。&lt;/p>
&lt;p>同时，DevOps团队也开始专注于改善他们的协作和沟通，使团队能够更快地行动，并对客户的需求和反馈做出更多响应。&lt;/p>
&lt;p>在过去的一年里，我们在DevOps领域看到了很多令人兴奋的发展，但2023年的趋势是什么？让我们来看看今年我们在DevOps领域可以看到的主要趋势。&lt;/p>
&lt;h2 id="kubernetes-的采用和部署的增加">Kubernetes 的采用和部署的增加&lt;/h2>
&lt;p>2022年，Kubernetes的采用显著增加，使其成为事实上的容器编排平台。这是由于它的灵活性和可扩展性，使企业能够在云中快速旋转和拆解应用程序。此外，DevOps的兴起使该平台成为云基础设施的一个关键组成部分。&lt;/p>
&lt;p>Kubernetes的流行因其与云原生堆栈的整合而得到进一步支持。它支持各种应用，包括微服务、无服务器和数据库，使其成为希望利用云的组织的首选。因此，Kubernetes的部署数量在2022年急剧增加。这一趋势预计将持续到2023年，更多的公司将采用Kubernetes作为其云原生解决方案。&lt;/p>
&lt;p>预计Kubernetes将很快主导市场，每个组织都会转向这个平台进行部署。社区的支持水平和该平台令人印象深刻的增长速度没有放缓的迹象，使Kubernetes仍然是满足部署需求的首选。&lt;/p>
&lt;h2 id="无服务器计算将得到广泛的应用">无服务器计算将得到广泛的应用&lt;/h2>
&lt;p>无服务器计算已经成为科技行业的一个主要趋势，预计在2023年将变得更加流行。这种计算方法允许企业在不需要管理服务器的情况下，开发和运行服务和应用程序，使其成为一种高度创新和高效的软件部署方法。据Gartner称，到2025年，超过85%的组织将使用云计算策略，95%的新数字工作负载将在云平台上进行。这意味着，任何不采用无服务器计算的组织都可能难以跟上竞争的脚步。&lt;/p>
&lt;p>预计到2030年，无服务器市场将达到300亿美元。目前，已经有超过50%的基于云计算进程的企业将无服务器计算整合到他们的系统中。DevOps流程尤其受益于这一趋势，因为它有助于缩小开发和运营之间的隔阂，简化DevOps流水线的代码。成功实施无服务器计算的一个例子是 Autodesk，一家专门为建筑、工程、施工和制造设计软件的公司。通过扩大其在AWS的业务范围并实施AWS Dynamodb和AWS Lambda，Autodesk能够将创建账户所需的时间从两周大幅减少到十分钟。&lt;/p>
&lt;p>无服务器计算为工程师提供了许多好处，包括通过消除服务器管理来减少工作量，通过只在需要时支付服务器空间来降低成本，以及在减少延迟的同时轻松扩展和部署。因此，这是一个值得在2023年关注的趋势。&lt;/p>
&lt;h2 id="微服务架构的采用将继续增长">微服务架构的采用将继续增长&lt;/h2>
&lt;p>微服务架构是一种越来越流行的设计、构建和管理应用程序的结构。这种方法有助于DevOps专业人员开发出更加模块化、与其他组件解耦、更易于维护和扩展的应用程序。通过将一个复杂的应用程序分离成更小、更容易管理的服务，DevOps专业人士对应用程序的各个部分有更多的控制。这使得更新和排除错误更加容易。此外，微服务允许DevOps专业人员通过创建新的服务或更新现有服务来快速响应客户需求。&lt;/p>
&lt;p>以提供可扩展性、灵活性和敏捷性的方式开发和部署服务的能力是DevOps专业人士开始接受微服务的主要原因。在一个不断发展的IT环境中，公司需要能够快速、轻松地适应行业的变化。微服务是实现这一目标的好方法，因为它们允许在小的、易于管理的部分中开发和部署服务。因此，DevOps专业人员应该关注微服务在未来几年的持续发展。&lt;/p>
&lt;h2 id="安全自动化将获得发展势头">安全自动化将获得发展势头&lt;/h2>
&lt;p>安全自动化涉及自动化安全流程和任务，以确保应用程序和系统的安全和保护，使其免受潜在威胁。在2023年，DevOps专业人士应密切关注安全自动化的增长和安全即代码方法的采用。&lt;/p>
&lt;p>企业实施安全自动化的一种方式是使用Harness安全测试自动化（STO）等工具，该工具允许在CI/CD管道内进行单元、集成和负载测试的自动化。这可以节省宝贵的工程时间，并降低整体云计算成本。集成到CI/CD流水线中的安全自动化保证了代码在部署到生产之前接受严格的安全测试。这确保了只有被验证为安全的代码才被允许进行。此外，在软件开发生命周期（SDLC）中使用人工智能和机器学习正变得越来越普遍，因为这些技术可以被训练来识别代码中的违规行为并提供改进建议。&lt;/p>
&lt;p>另一方面，安全即代码解决方案将安全测试整合到CI/CD流水线中，使企业能够在整个开发过程中执行安全策略。这有助于确保安全在开发过程的每个阶段都得到考虑，而不是事后才想到。安全自动化和安全即代码解决方案都可以节省宝贵的工程时间，降低整体云计算成本，同时保持高水平的安全性。&lt;/p>
&lt;p>2023年，随着企业寻求简化和自动化其安全流程，安全自动化将获得更大的发展势头。安全自动化工具将变得越来越复杂，具有自动安全测试、漏洞扫描和持续安全监控等功能。这将使企业能够在安全风险成为重大问题之前快速有效地识别和解决这些风险。&lt;/p>
&lt;h2 id="混沌工程实验的增加">混沌工程实验的增加&lt;/h2>
&lt;p>混沌工程是一个相对较新的领域，近年来得到了普及，预计在未来几年将继续增长。&lt;/p>
&lt;p>混沌工程是一种战略方法，涉及到通过将产品、服务和系统置于极端条件下测试其复原力和可靠性。这有助于组织了解其系统和应用在这种条件下的行为，并确保它们能够承受这些条件。混沌工程的目标是识别部署过程中的 &amp;ldquo;不完美&amp;rdquo;，如漫长的周期时间，并防止故障发生。混沌工程师的目标不是要消除故障，而是要减轻故障，具体方法是找出不完善的地方并自动修复。&lt;/p>
&lt;p>我们相信，随着企业认识到确保其产品和服务的高可用性和弹性的重要性，混沌工程和混沌原则的使用将在2023年变得更加广泛。随着混沌工程的采用越来越多，也可能会开发出新的工具和最佳实践，以帮助组织更好地理解和管理其系统的复杂性。&lt;/p>
&lt;h2 id="docker将继续提升开发者的体验">Docker将继续提升开发者的体验&lt;/h2>
&lt;p>Docker是一个深受开发者欢迎的工具，它通过允许开发者在云中快速构建、打包和部署应用程序，简化了开发生命周期。Docker的吸引力在于它的简单性，以及它将容器化应用快速带入生产环境的方式。&lt;/p>
&lt;p>Docker是一个深受开发者欢迎的工具，它通过允许开发者在云中快速构建、打包和部署应用程序，简化了开发生命周期。Docker的吸引力在于它的简单性，以及它将容器化应用快速带入生产环境的方式。&lt;/p>
&lt;p>尽管最初的假设是，当Kubernetes取消支持时，Docker将被淘汰，但事实并非如此。值得注意的是，Docker的设计从一开始就没有考虑到Kubernetes。Docker之所以能够保持其受欢迎程度，是因为有大量的开发者社区在使用它，而且它提供了易用性。&lt;/p>
&lt;p>围绕Docker的社区令人印象深刻，无与伦比，它的广泛采用和强大的社区支持使它成为寻求简化工作流程和提高生产力的开发者的可靠选择。因此，Docker预计在未来几年仍将是DevOps领域的一个关键角色，为更多协作开发工作流程的趋势推波助澜。&lt;/p>
&lt;p>2023年值得关注的一个DevOps趋势是Docker继续增强开发者的体验。该公司已经在开发新的工具和功能，使部署过程更简单、更快、更有效。它的重点是简化操作，同时也提供直观的用户体验。因此，采用Docker的公司可望体验到更大程度的灵活性和可扩展性。&lt;/p>
&lt;h2 id="gitops将获得更多的信任">GitOps将获得更多的信任&lt;/h2>
&lt;p>在GitOps中，开发人员将他们的代码存储在Git仓库中，然后将其部署到Kubernetes集群中。这种方法的好处是，开发人员可以将他们的代码保存在源码控制中，而不必担心管理Kubernetes集群的问题。&lt;/p>
&lt;p>在过去的几年里，GitOps作为一种提高软件交付速度、可靠性和安全性的方法，在DevOps专业人士中获得了巨大的吸引力。在2023年，我们希望看到GitOps在希望改善其软件交付流程的组织中获得更多的信任和采用。&lt;/p>
&lt;p>我们相信GitOps在2023年将继续流行，有几个原因。首先，GitOps使企业能够采用更加声明性的方法来管理其应用程序和基础设施。这意味着，开发人员不必手动配置和部署资源，只需将他们想要的状态提交给Git，剩下的就交给自动化工具处理。这可以帮助减少错误的风险，提高软件交付的速度和可靠性。&lt;/p>
&lt;p>GitOps促进了开发团队内部的协作和透明度。通过使用Git作为真理的中心来源，团队中的每个人都可以看到正在进行的更改和系统的当前状态。这可以帮助减少冲突，改善团队成员之间的沟通。&lt;/p>
&lt;p>GitOps可以帮助企业提高其软件交付过程的安全性。通过使用Git作为唯一的真理源，并使部署过程自动化，企业可以减少未经授权的更改的风险，并确保只有经过批准的更改被部署到生产中。&lt;/p>
&lt;p>随着GitOps继续在DevOps领域获得关注，预计它在未来几年只会继续增长。这是因为它能够简化DevOps流程，使开发者更容易部署他们的代码。因此，GitOps肯定会成为2023年值得关注的领先DevOps趋势之一。具体来说，随着开发者越来越了解GitOps的好处，对GitOps的信任将继续增加。随着越来越多的组织采用GitOps，并成为DevOps流程的标准部分，GitOps将获得更多信任。&lt;/p>
&lt;h2 id="aiops将变得突出">AIOps将变得突出&lt;/h2>
&lt;p>MLOps和AIOps是两个最突出的DevOps工具，预计将成为该行业的主要参与者，到2026年预计价值为409.1亿美元。这些工具对于优化DevOps操作和实现高质量的快速发布至关重要。MLOps有助于加强机器学习的开发系统，而AIOps则使IT流程和操作自动化。&lt;/p>
&lt;p>AIOps是一个强大的工具，可以使复杂的DevOps流程自动化，使团队能够快速检测和解决任何潜在的问题。它还可以提供对DevOps流程性能的洞察力，并在造成任何破坏之前确定任何潜在的问题。AIOps通常被用作DevOps工具链的一部分，实时监控和管理这些系统，为集成工具和DevOps工程师提供自动反馈。AIOps也可用于自动化某些任务，如应用测试和部署，这可以大大减少完成DevOps任务所需的时间和精力。&lt;/p>
&lt;p>2023年，随着企业寻求提高IT效能，减少管理复杂数字系统的人工劳动，预计AIOps将继续流行。&lt;/p>
&lt;h2 id="内部开发者平台将变得更加重要">内部开发者平台将变得更加重要&lt;/h2>
&lt;p>到2022年，颠覆公司构建软件方式的DevOps趋势已经发展成为一种软件交付方式，通过打破孤岛将开发和运营联系起来。&lt;/p>
&lt;p>内部开发者平台是一套专门为企业的开发者设计的工具和服务，通常托管在企业自己的基础设施内。&lt;/p>
&lt;p>内部开发者平台为工程团队提供了一个集中的中心，以进行合作和共享资源。这可以帮助内部开发人员的学习和发展，使他们能够增加技术知识，并使他们能够轻松地与其他工程团队一起进行项目工作。这种平台还可以帮助减少错误，提高代码质量，因为资源共享和审查更容易。在2023年，我们预计会看到企业内部越来越多地采用内部开发者平台的趋势。&lt;/p>
&lt;h2 id="devops协作将成为主流">DevOps协作将成为主流&lt;/h2>
&lt;p>DevOps的理念包括打破软件开发人员和开发运营团队之间的围墙，允许他们在构建、测试和部署软件方面进行协作。随着越来越多的组织追求敏捷开发，他们也在提高开发人员和系统之间的障碍。亚马逊、谷歌和Stripe等组织都依靠DevOps协作来促进速度和创新。&lt;/p>
&lt;p>协作工作正在改变，高管们正在使用新的软件工具来帮助他们监控工作流程。使用Slack、Microsoft Teams、GitHub和Atlassian的工具的DevOps团队对他们的工作流程有更大的可见性。在未来两年，DevOps领导层将继续看到DevOps协作成为主流，新的管理方式将出现。&lt;/p>
&lt;h2 id="低代码平台">低代码平台&lt;/h2>
&lt;p>低代码平台的确是扩展敏捷和DevOps优势的有用工具。它们允许开发人员快速、轻松地构建和部署应用程序，而不需要编写大量的代码。这对于需要快速开发和部署应用程序的组织来说特别有利，因为这可以让他们更有效地应对不断变化的业务需求和市场条件。&lt;/p>
&lt;p>低代码平台也可以很好地适用于想要采用DevOps方法的组织，因为它们可以促进开发人员和IT运营团队之间的合作。通过使用低代码平台，开发人员可以专注于构建和测试应用程序，而IT运营团队可以专注于部署和监控。这些平台通常与所有主要的DevOps工具集成，从而有助于成为管理CI/CD的单一界面。&lt;/p>
&lt;p>总的来说，对于希望采用敏捷和DevOps实践的组织来说，低代码平台可以成为一个有价值的工具，因为它们可以帮助加速开发过程，提高应用程序的质量和可靠性。&lt;/p>
&lt;h2 id="向标准化部署和真正的自动化转变">向标准化部署和真正的自动化转变&lt;/h2>
&lt;p>现在出现了许多端到端的DevOps平台，它们都是以低代码的方式构建的。此外，他们专注于为部署引入标准化；这一直是阻碍团队扩展和控制其部署的主要障碍。使用标准化的CI/CD管道使团队能够重新使用特定的管道来部署性质相似的微服务，只需在需要时调整一些参数。这有助于解决管道臃肿的问题，简化管道管理。&lt;/p>
&lt;p>这些低代码平台还有助于实现真正意义上的自动化，这一直是DevOps的一个关键原则，但由于各团队的工具和工作流程分散，其实施一直是孤立和不统一的。这种趋势在未来可能会继续，重点是通过DevOps平台实现真正的端到端自动化。自动化可以帮助减少构建、测试和部署软件所需的时间和精力，这可以提高效率并加快开发过程。部署后的自动化在帮助检测故障和启动即时回滚以确保更高的应用可用性方面也有很大的作用。&lt;/p>
&lt;h2 id="混合云环境的兴起">混合云环境的兴起&lt;/h2>
&lt;p>许多组织正朝着混合云模式发展，其中一些工作负载在企业内部运行，另一些在云中运行。要求也决定了需要让应用程序在多个云区域运行，并有许多共享资源。这种趋势在未来几年可能会继续下去，DevOps实践将需要适应，不仅要支持混合云的部署，还要支持简化的跨集群监控、备份等。&lt;/p>
&lt;h2 id="基础设施即代码">基础设施即代码&lt;/h2>
&lt;p>基础设施即代码（IAC）将成为DevOps的领先趋势之一。这一趋势有利于通过自动化而不是人工的方式来管理和配置基础设施。这是一个基本的DevOps最佳实践，将持续监控、虚拟化测试和版本控制应用于指导基础设施开发和管理的基础代码。&lt;/p>
&lt;p>基础设施即代码使采用DevOps技术以及基础设施团队和软件开发团队之间更紧密的合作成为可能。当基础设施是代码并被纳入你公司的软件生命周期时，有一个共同的词汇和一套共同的标准，利益相关者已经理解。团队之间的沟通因这种共享的知识而得到促进，这对DevOps至关重要。&lt;/p>
&lt;h2 id="devsecops">DevSecOps&lt;/h2>
&lt;p>DevSecOps是指开发、安全和运营。它是一种软件开发实践，在每个阶段都集成了安全元素，直到开发的解决方案不能成功交付。DevSecOps是从DevOps演变而来的，因此，实施DevSecOps而不是DevOps将在未来获得更大的发展。DevSecOps将安全整合到CI/CD管道中，使开发团队能够以DevOps的速度解决目前最紧迫的一些安全问题。&lt;/p>
&lt;h2 id="sre-网站可靠性工程">SRE (网站可靠性工程)&lt;/h2>
&lt;p>DevOps部署的下一个层次是站点可靠性工程。在DevOps的未来趋势中，似乎采用SRE作为战略，以实现高可用性、可靠性和增强的数字消费者体验。SRE技术对于完成内部服务水平目标和服务水平协议（SLA）（SLO）也是必要的。&lt;/p>
&lt;h2 id="可观测性">可观测性&lt;/h2>
&lt;p>可观察性将是DevOps的关键趋势之一。它提到了协助开发和运营团队记录、收集、关联和分析来自分布式应用的大量性能数据的方法和软件工具，以获得当下的洞察力。&lt;/p>
&lt;h2 id="多云环境">多云环境&lt;/h2>
&lt;p>DevOps和多云环境相辅相成，具有同义关系。他们的结合提供了好处，在提高生产力的同时，也为彼此增加了价值数。尽管如此，DevOps和多云在一起仍然是不寻常的。大多数拥有完善的DevOps管道的企业离将多云安排到位还有一段距离。&lt;/p>
&lt;h2 id="结论">结论&lt;/h2>
&lt;p>随着IT组织实施DevOps计划，他们无疑将面临一些挑战，这些挑战将考验他们在不断的压力下管理变化、跨团队协作和有效工作的能力。大多数IT组织将意识到，有必要让所有利益相关者参与到DevOps中来，包括业务部门，这样他们都能理解正在实施的方法背后的原因。&lt;/p>
&lt;p>2023年，DevOps团队将继续推进他们的采用率，因为他们从企业高管那里得到的支持越来越多。DevOps团队将继续关注自动化，将应用程序迁移到云平台，推出Docker容器，建立容器协调工具，以及将他们的关注点扩展到安全方面。更多的公司将把DevOps嵌入到他们的运营结构中。这一发展将使企业开发、部署和运行应用程序的方式以及支持其团队的方式发生重大变化。除了采用DevOps实践外，企业还将调整数字化实践，从他们开发和部署的软件中获得更大的价值和质量，并管理企业的数字化转型。&lt;/p>
&lt;h2 id="参考">参考&lt;/h2>
&lt;p>本文参考的文章资料如下：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://alltechmagazine.com/devops-trends-to-watch-for-in-2023/" target="_blank" rel="noopener"
>https://alltechmagazine.com/devops-trends-to-watch-for-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ozone.one/top-6-devops-trends-to-look-for-in-2023/" target="_blank" rel="noopener"
>https://ozone.one/top-6-devops-trends-to-look-for-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.solutionanalysts.com/blog/top-10-trends-of-devops-in-2023/" target="_blank" rel="noopener"
>https://www.solutionanalysts.com/blog/top-10-trends-of-devops-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.analyticsinsight.net/top-10-devops-trends-and-predictions-to-follow-up-in-2023/" target="_blank" rel="noopener"
>https://www.analyticsinsight.net/top-10-devops-trends-and-predictions-to-follow-up-in-2023/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>在 macOS 上配置 Drupal 开发环境</title><link>https://martinliu.cn/blog/%E5%9C%A8-macos-%E4%B8%8A%E9%85%8D%E7%BD%AE-drupal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link><pubDate>Sat, 05 Feb 2022 11:11:55 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%9C%A8-macos-%E4%B8%8A%E9%85%8D%E7%BD%AE-drupal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid><description>&lt;img src="https://149351115.v2.pressablecdn.com/wp-content/uploads/2020/06/bg-hero-persona.png" alt="Featured image of post 在 macOS 上配置 Drupal 开发环境" />&lt;p>过年前给自己挖了一个 Drupal 的坑，经过一些时间的研究之后，感觉这个系统和 Remedy 非常神似。说到底它们其实都是表单系统。每个表单表达一种分类的信息而已。Drupal 注重的是表单上的信息点的记录、管理和展示，Remedy 注重的则是每种表单（工作类型）上“工单流程状态”字段变化的记录和管理。&lt;/p>
&lt;p>&lt;a class="link" href="https://DevOpsChina.org" target="_blank" rel="noopener"
>DevOps China&lt;/a> 网站的选型之旅，最初使用的是 hugo，但是由于内容更新人员们对 github 系统掌握程度参差不齐，导致对于参与者不友好的问题，这为所有社区内容创建的朋友们设置了一个不必要的门槛。最初设计的是：以官网的内容为最源头参考点，然后同步到其它平台，包括：微信和互动吧等社区对外到入口。最后，微信公众号后台文案编辑的易用性超越了 GitHub 上 Hugo 站点的更新。社区网站维护志愿者也很难投入足够的精力，手工的从微信上同步回社区官网。就这样社区官网的及时更新问题居然持续了两年。&lt;/p>
&lt;p>2022年是解决这个问题的时候了。在对 Drupal 经过一定的研究之后，希望这次选型的 Drupal 能不负众望，完美的实现这个艰巨的使命。&lt;a class="link" href="https://stackoverflow.blog/2020/06/23/is-it-time-to-give-drupal-another-look/" target="_blank" rel="noopener"
>【 why drupal ？ 参考文章】&lt;/a>&lt;/p>
&lt;h2 id="drupal-是个内容管理系统">Drupal 是个内容管理系统&lt;/h2>
&lt;p>在 macOS 上搭建 PHP + MySQL 的开发环境的工具有很多。我选择使用的是已经绝版的 Acquia Dev Desktop 2 ，它包括了：php 7.3.15 的 php 语言运行环境， MySQL 5.7.29 数据库， Apache/2.4.29 的网页运行服务器， phpMyAdmin 4.9.0.1 数据库管理工具。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-2022-02-05_11-08-30.png"
loading="lazy"
alt="Acquia Dev Desktop 2"
>&lt;/p>
&lt;p>这种集成的 PHP 运行/开发/管理环境，还有很多其它选择，这里不展开。我的目标是：保持最简化和易用，与其它社区伙伴的协作，紧跟 Drupal 版本发布和补丁更新，用容器化实现云上的按需扩展。&lt;/p>
&lt;p>首先，我使用 Acquia Dev Desktop 2 创建了一个本地的测试站点，用于学习 Drupal 的使用、定制和开发。它不仅是一个友好的 GUI 工具，其实还附带了 php 开发环境的命令行工具：composer 和 drush 。 使用这两个命令行工具可以完成 Drupal 系统的一键式搭建。在开发一个真实的内容管理系统网站以前，最基础的铺垫工作可能差不多了。&lt;/p>
&lt;h2 id="一键安装-drupal-系统">一键安装 Drupal 系统&lt;/h2>
&lt;p>首先，打开 Acquia Dev Desktop 2 ，在界面上点击进入命令行按钮（more -&amp;gt; Open Console）。macOS 系统默认的 termenal 就会被打开，它会在默认环境中增加如下环境变量参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Last login: Sat Feb &lt;span class="m">5&lt;/span> 10:25:58 on ttys005
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PHP_ID&lt;/span>&lt;span class="o">=&lt;/span>php7_3&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Applications/DevDesktop/php7_3_x64/bin:/Applications/DevDesktop/mysql/bin:/Applications/DevDesktop/tools:&lt;/span>&lt;span class="nv">$PATH&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> &lt;span class="s2">&amp;#34;/Users/martin/learning-drupal&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样就可以在你的目标目录中，执行下面的一键安装脚本了：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 下载Drupal特定版本的代码库&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer create-project drupal/recommended-project:9.3.5 drupal-dev --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> drupal-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 配置以下可以让我们静默安装 drush 的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.composer/installers &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.drupal/core-composer-scaffold &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.drupal/core-project-message &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 Drupal 站点维护工具 drush&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer require drush/drush --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s vendor/drush/drush/drush ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer require drush/config-extra --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 创建目标 MySQL 数据库和用户名/密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysqladmin -u root drop local_devopschina -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -e &lt;span class="s1">&amp;#39;create database local_devopschina&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -e &lt;span class="s2">&amp;#34;grant all privileges on local_devopschina.* to ddoc@localhost identified by &amp;#39;ddoc123&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 上面的一切都是为了这个命令可以静默安装，它替代了很多 php 开发的系统在网页上用安装程序进行的初始化工作，下面的数据库 root 密码为空&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush si standard --locale&lt;span class="o">=&lt;/span>zh-hans --db-url&lt;span class="o">=&lt;/span>mysql://ddoc:ddoc123@127.0.0.1:33067/local_devopschina --db-su&lt;span class="o">=&lt;/span>root --site-name&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;DevOps China&amp;#34;&lt;/span> --account-name&lt;span class="o">=&lt;/span>admin --account-pass&lt;span class="o">=&lt;/span>admin -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装和启用 Drupal 系统必要的模块和皮肤 【ToDo】&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 生产环境数据迁移，数据库备份的导入，相关文件下载 【ToDo】&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启动 Drupal 系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush runserver localhost:8090
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上是一个写死了的 shell 脚本，还可以对其中的关键参数进行变量替换，使之最终成为一个可以传入参数的可用脚本。&lt;/p>
&lt;h2 id="进入-drupal-开发流程">进入 Drupal 开发流程&lt;/h2>
&lt;p>下图展示了 Drupal 网站开发的工作流程。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-Drupal-Site-Building-Workflow.png"
loading="lazy"
alt="Drupal Site Building workflow"
>&lt;/p>
&lt;p>用下面的表格梳理一下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>序号&lt;/th>
&lt;th>工作内容&lt;/th>
&lt;th>概述&lt;/th>
&lt;th>所需要技能&lt;/th>
&lt;th>备注&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.0&lt;/td>
&lt;td>Content Type&lt;/td>
&lt;td>既是任何一条内容对象的完整定义，也是任何一个可管理实体。系统默认自带了‘文章’和‘基本页面’两个内容类型，隐含的具备了简单的 ‘用户’ 管理系统。在此基础上还需扩展出‘社区合作伙伴’、‘社区活动’等实地。&lt;/td>
&lt;td>数据库ER设计、数据结构&lt;/td>
&lt;td>并不需要在 MySQL 中建表，都是在 Drupal 界面完成&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.0&lt;/td>
&lt;td>Fields&lt;/td>
&lt;td>是组成任何内容和实体数据结构的信息点，包含PHP编程语言的数据类型和Drupal 社区里的各种模块，例如‘电话号码’这样的数据结构的引用就是先启用对应的模块&lt;/td>
&lt;td>php开发&lt;/td>
&lt;td>Drupal 社区已有模块不满足才做开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.1&lt;/td>
&lt;td>Taxonomy&lt;/td>
&lt;td>就像是一个二位数组，在每一个分类里有一堆确切的词汇表。例如社区网站的文章、活动和论坛里的帖子都可以引用“话题”这样一个字段，用于单选或者多选，“话题”这个字段里包含了很多DevOps术语“ci”、“敏捷”、“SRE”等。&lt;/td>
&lt;td>领域知识、数据机构&lt;/td>
&lt;td>随着网站内容建设的过程而演进&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.2&lt;/td>
&lt;td>Media&lt;/td>
&lt;td>文档、音频、图片和视频的统一管理，这样方便任意媒体文件的使用；Drupal 9 自带的 Media Libary 模块能够满足需求&lt;/td>
&lt;td>数字媒体管理、CDN加速&lt;/td>
&lt;td>所有用户生成媒体都在这个范畴，会严重影响网站速度，依赖与网站 CDN 加速的实施&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.3&lt;/td>
&lt;td>Modules&lt;/td>
&lt;td>Drupal 模块非常丰富，从电话号码这样的数据结构，到文本地址到百度地图的转化，到整个知识库结构的定义；社区参与者积分和排名这样的功能将会使用自开发的模块实现&lt;/td>
&lt;td>php开发、数据库&lt;/td>
&lt;td>需要懂 php 开发语言，可独立开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3.0&lt;/td>
&lt;td>Path&lt;/td>
&lt;td>每一个内容实体在 Drupal 中被称之为 node，它们都有默认的访问路径，例如：/node/12/；需要整体规划网站的访问路径，不但让网站变得更加有条理，而且还会提高人和搜索引擎的友好程度，Drupal 的相关模块可以实现&lt;/td>
&lt;td>内容系统梳理&lt;/td>
&lt;td>尽量保持简单、清晰和持久&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4.0&lt;/td>
&lt;td>Permessions&lt;/td>
&lt;td>用户权限需要提前设计，Drupal 除了具有内置的权限机制外，它对任何一个功能模块（内容分类）都可以实施给予角色的矩阵式权限设置，需要提前设计好用户角色类型，权限体系&lt;/td>
&lt;td>权限设计、信息安全&lt;/td>
&lt;td>这是实施文章内容上传、论坛和社区活动管理的基础。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4.1&lt;/td>
&lt;td>Workflows&lt;/td>
&lt;td>工作流是 Drupal 系统中默认的功能模块，经过定制以后可以实现社区贡献文章的审核功能。例如开放所有注册用户的投稿权限，投稿文章必须经过审核人员确认后才能发不出来。还可以用于知识库或者编辑的多重审核功能&lt;/td>
&lt;td>流程定制&lt;/td>
&lt;td>需要掌握 Drupal 相关模块的使用，确保流程简单易用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.0&lt;/td>
&lt;td>Layout&lt;/td>
&lt;td>网页布局结构设计，manage display of nodes 这是基础工作 -&amp;gt; blocks -&amp;gt; layout builder -&amp;gt; views -&amp;gt; image styles ，不同的 theme 自带一套 block 的布局&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.1&lt;/td>
&lt;td>Blocks&lt;/td>
&lt;td>实施页面中的每个模块，模块是一个实体可以容纳视频、文字、图片和其他更多，搜索栏，菜单等；他不是内容，是一个 placeholder&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.2&lt;/td>
&lt;td>Layout Builder&lt;/td>
&lt;td>一个核心模块，拖拽式可视化页面设计实施工具，可以为不同的内容类型、实体和其它创建定制的布局。&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.3&lt;/td>
&lt;td>Views&lt;/td>
&lt;td>创建数据库查询，过滤和筛选内容，静态的操作或者根据上下文的 。Display【page、block】，format，lields,filter,sort,&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.0&lt;/td>
&lt;td>Add Content&lt;/td>
&lt;td>在以上工作基本完成之后，就可以进入网站内容的填充阶段&lt;/td>
&lt;td>SQL查询&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.1&lt;/td>
&lt;td>Menus&lt;/td>
&lt;td>菜单包括网站的主导航菜单，页脚导航和各个页面上可能使用到的分类选项&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.2&lt;/td>
&lt;td>Site Management&lt;/td>
&lt;td>开发、测试和生产环境之间的迁移和更新流程&lt;/td>
&lt;td>CI、CD、Cloud、DNS、CDN&lt;/td>
&lt;td>用 GitHub 、Docker 和 Azure 等技术实施必要的工作流程&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7.0&lt;/td>
&lt;td>Theme&lt;/td>
&lt;td>网站展示风格的开发贯穿于以上所有工作内容的过程中。需要基于某种Drupal网站皮肤作为底板，开发自己的定制皮肤，在需要改进的时候随时调整和更新&lt;/td>
&lt;td>前端开发、CSS&lt;/td>
&lt;td>图片等美工设计需要交付给社区的设计同学&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>为了多人、开放式、实现社区网站开发和内容建设的工作，我们还需要一个项目管理工具。这里可以选用 GitHub ：&lt;a class="link" href="https://github.com/orgs/DevopsChina/projects/1/" target="_blank" rel="noopener"
>https://github.com/orgs/DevopsChina/projects/1/&lt;/a> 用它可以实现以下功能。&lt;/p>
&lt;ul>
&lt;li>任务记录、跟踪和分配&lt;/li>
&lt;li>统一管理多个代码仓库的任务&lt;/li>
&lt;li>任务可以和代码库工作相关，也可以无关&lt;/li>
&lt;li>通过内置的工作流，可以实现代码库 issue &amp;amp; pr 任务的自动关联，状态同步&lt;/li>
&lt;li>可以创建自定义字段的视图，用于不同目的的跟踪，支持任务清单，ToDoList 等视图。&lt;/li>
&lt;/ul>
&lt;p>下一步邀请社区网站工作组召开项目启动会。&lt;/p>
&lt;h2 id="版本化开发环境">版本化开发环境&lt;/h2>
&lt;p>初始化上面所创建的项目文件夹。将其推送到 &lt;a class="link" href="https://github.com/DevopsChina/drupal-dev.git" target="_blank" rel="noopener"
>https://github.com/DevopsChina/drupal-dev.git&lt;/a>&lt;/p>
&lt;p>先参考 Drupal 代码库 web 目录下的样例文件，在项目目录中创建 .gitignore 文件。应该在这两个文件中排出以下文件，处于演示目的，本项目并没有将其排除在外。&lt;/p>
&lt;ul>
&lt;li>.env&lt;/li>
&lt;li>sites/&lt;em>/settings&lt;/em>.php&lt;/li>
&lt;li>sites/&lt;em>/services&lt;/em>.yml&lt;/li>
&lt;/ul>
&lt;p>执行下面的代码推送动作。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;first commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git branch -M main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git remote add origin https://github.com/DevopsChina/drupal-dev.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push -u origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在完成了代码库初始化工作后，会设置一下 main 主干保护策略。防止直接对 main 的变更。&lt;/p>
&lt;h2 id="容器化-drupal-系统">容器化 Drupal 系统&lt;/h2>
&lt;p>容器化当前的项目需要经过这些操作步骤：&lt;/p>
&lt;ol>
&lt;li>确认当前 Drupal 系统中的配置和内容，这个状态会打包到容器环境中。用 sqldump 导出数据库。&lt;/li>
&lt;li>参数化 &lt;code>web/sites/settings.php&lt;/code> 文件，将变量和密码变成参数。&lt;/li>
&lt;li>创建 Drupal 主应用镜像的 &lt;code>Dockerfile&lt;/code> 。&lt;/li>
&lt;li>创建包含数据库服务和开发工具服务的 &lt;code>docker-compose.yml&lt;/code> 服务定义文件。&lt;/li>
&lt;li>在本机测试和确认容器服务中 Drupal 网站的可用性和内容。&lt;/li>
&lt;/ol>
&lt;h3 id="1---确认当前系统状态">1 - 确认当前系统状态&lt;/h3>
&lt;p>在经过初始化的配置后，几乎所有系统级别配置信息都保存在了 MySQL 数据库中，用 sqldump 导出 MySQL 数据库，dump 文件会用于 MySQL 容器服务的初始化文件。字段定义、文章编辑、初始化内容的填充也会产生一些数据文件（图片、文件、视频、音频），这些文件就位于 &lt;code>web/sites/default/files/&lt;/code> 目录中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mkdir sql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysqldump -u root local_devopschina &amp;gt; sql/dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在项目文件夹中，执行以上命令，就可以得到的到一个大约十几兆的 MySQL 数据库备份文件。&lt;/p>
&lt;h3 id="2---参数化-drupal-主配置文件">2 - 参数化 Drupal 主配置文件&lt;/h3>
&lt;p>Drupal 的数据库链接字符串和账号信息都位于 &lt;code>web/sites/settings.php&lt;/code> 文件中。为了确保 Drupal 镜像启动后可以链接到正确的 MySQL 数据库服务。需要改此文件。&lt;/p>
&lt;p>原始配置参数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$databases&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;database&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;local_devopschina&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;ddoc&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;ddoc123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;host&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;127.0.0.1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;port&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;33067&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;namespace&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Drupal\\Core\\Database\\Driver\\mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;driver&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>备份原始配置文件。由于修改以后在本机用 drush 运行的本地测试 Drupal 应用就中断了。后续可以优化一下：保持原始配置文件不变，参数化一个配置文件的副本，在 Drupal 打包过程中加一个参数化配置文件的覆盖替换动作。&lt;/p>
&lt;p>修改为如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$databases&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;database&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;DBASE&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;USER&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;PASS&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;host&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;HOST&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;port&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;DPORT&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;namespace&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Drupal\\Core\\Database\\Driver\\mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;driver&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上参数化非必要的最佳操作，本文目标在与记录，后续会优化这个步骤。&lt;/p>
&lt;h3 id="3---创建-drupal-主应用镜像">3 - 创建 Drupal 主应用镜像&lt;/h3>
&lt;p>基于 Drupal 官方的镜像文件创建适合自己项目的 &lt;code>Dockerfile&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>&lt;span class="s"> drupal:9-php7.4-apache&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> &lt;span class="nb">set&lt;/span> -eux&lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt-get update&lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt-get install -y --no-install-recommends git&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后运行 docker build 命令，确认本地可以成功构建这个自定义镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker build -t devopschina/drupal-dev .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker image
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本测试镜像创建成功后，没有镜像上传的动作，镜像上传到特定的镜像仓库后，就可以实现在云容器服务中的部署。这里省略此 push 步骤。&lt;/p>
&lt;h3 id="4---创建服务定义文件">4 - 创建服务定义文件&lt;/h3>
&lt;p>为了简化本地测试，这里使用 docker-compose 工具。创建包含数据库服务和开发工具服务的 &lt;code>docker-compose.yml&lt;/code> 服务定义文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.1&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 使用 mysql 作为后端数据库&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mysql:5.7&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用本地当前路径 sql 目录中的 sql dump文件初始化 MySQL 数据库&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./sql:/docker-entrypoint-initdb.d/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用这些环境变量初始化 mysql 数据库，创建目标数据库，创建用户和密码，为 root 用户初始化随机密码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_DATABASE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DB}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_RANDOM_ROOT_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># PHPMyAdmin 数据库管理工具，只用于开发或者测试环境&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">phpmyadmin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">phpmyadmin/phpmyadmin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_myphpadmin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_HOST&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBH}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_ARBITRARY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9999&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 使用 drupal 官方镜像 v9 ，指定 php 版本为 7.4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">drupal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#image: drupal:9-php7.4-apache 这里以后需要优化为私有镜像名称，而不需要在服务启动的时候做任何构建&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_drupal&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9998&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/opt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># 将当前项目目录加载到容器中，这里产生了一个和本机的依赖，后续优化：通过 Dockerfile 的复制当前开发目录中的成功到容器中&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># The &amp;#39;z&amp;#39; option tells Docker that the volume content will be shared between containers. Docker will label the content with a shared content label. Shared volumes labels allow all containers to read/write content. The &amp;#39;Z&amp;#39; option tells Docker to label the content with a private unshared label.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">.:/opt:z&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">HOST&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBH}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">DBASE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DB}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PASS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># composer update 操作确保容器中的 Drupal 服务运行与当前的最新状态，这个操作也应该后续移植到Dockerfile 文件中&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bash -c &amp;#34;composer update &amp;amp;&amp;amp; rm /var/www/html &amp;amp;&amp;amp; ln -s /opt/web /var/www/html &amp;amp;&amp;amp; /usr/local/bin/apache2-foreground&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>相关测试命令：&lt;/p>
&lt;ul>
&lt;li>&lt;code>docker-compose config&lt;/code> 测试所有参数是否被完整且正确的填充，有错误的话，需要修改 .env 文件。&lt;/li>
&lt;li>&lt;code>docker-compose build&lt;/code> 构建必要的镜像。&lt;/li>
&lt;/ul>
&lt;h3 id="5---本地集成测试">5 - 本地集成测试&lt;/h3>
&lt;p>在本机测试和确认容器服务中 Drupal 网站的可用性和内容。&lt;/p>
&lt;p>在项目目录中，执行 &lt;code>docker-compose up&lt;/code> 命令观察整个启动过程，待启动停止后，在浏览器中访问：http://localhost:9998 ，应该能够看到如下的网页。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-2022-02-05_23-04-12.png"
loading="lazy"
alt="Test Env home page"
>&lt;/p>
&lt;h2 id="在云平台部署社区官网">在云平台部署社区官网&lt;/h2>
&lt;p>下面是关于后续工作的一些规划：&lt;/p>
&lt;ul>
&lt;li>组件新的网站开发团队，召开项目启动会&lt;/li>
&lt;li>优化以上代码库&lt;/li>
&lt;li>用一台云主机搭建一个公共的测试环境&lt;/li>
&lt;li>确认和实施相关基础设施：镜像仓库、用于Drupal迁移的对象存储桶、优化容器化过程、启用一个用于开发评审的容器测试环境、确定生产环境的运行状态【LAMP单机 vs. 容器环境+其它云服务】&lt;/li>
&lt;/ul></description></item><item><title>为Docker Swarm群集配置Nutanix持久存储</title><link>https://martinliu.cn/blog/%E4%B8%BAdocker-swarm%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AEnutanix%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/</link><pubDate>Thu, 02 Nov 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E4%B8%BAdocker-swarm%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AEnutanix%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-4.jpg" alt="Featured image of post 为Docker Swarm群集配置Nutanix持久存储" />&lt;p>本文介绍如何用Docker卷插件的方式，给Docker Swarm的群集挂载Nutanix存储。&lt;a class="link" href="https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in" target="_blank" rel="noopener"
>Nutanix Container Volume Plug-in &lt;/a>简称DVP，可以给容器提供数据持久化的功能。&lt;/p>
&lt;p>本文使用ownCloud网盘应用做功能测试。测试的过程如下，安装部署Docker Datacenter，配置好群集，在UCP的界面里调用DVP插件建持久的数据卷，建立ownCloud服务，部署和测试该服务。&lt;/p>
&lt;h2 id="nutanix-dvp-docker-volume-plug-in安装和配置">Nutanix DVP (Docker Volume Plug-in)安装和配置&lt;/h2>
&lt;p>这一部分描述DVP的安装部署过程，需要连接互联网；安装调试完毕之后，作虚拟机的镜像模板使用。这样Docker Swarm的其它节点也都不需要重复这个步骤了。&lt;/p>
&lt;p>本文使用的是Docker社区文档稳定版 17.03.1-ce ；本文使用的OS是CentOS 7.3。所Docker安装的版本如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 17.03.1-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.27
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.7.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: c6d412e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Mon Mar 27 17:05:44 2017
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 17.03.1-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.27 (minimum version 1.12)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.7.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: c6d412e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Mon Mar 27 17:05:44 2017
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# rpm -qa|grep docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-17.03.1.ce-1.el7.centos.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-selinux-17.03.1.ce-1.el7.centos.noarch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本文使用的Docker 安装yum源如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# cat /etc/yum.repos.d/docker-ce.repo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本机所使用的所有安装源如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# yum repolist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded plugins: fastestmirror
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loading mirror speeds from cached hostfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * base: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * epel: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * extras: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * updates: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repo id repo name status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">base/7/x86_64 CentOS-7 - Base - mirrors.aliyun.com 9,363
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-stable/x86_64 Docker CE Stable - x86_64 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">epel/x86_64 Extra Packages for Enterprise Linux 7 - x86_64 11,808
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extras/7/x86_64 CentOS-7 - Extras - mirrors.aliyun.com 381
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">updates/7/x86_64 CentOS-7 - Updates - mirrors.aliyun.com 1,859
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repolist: 23,415
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装docker引擎，并启动服务，并校验服务状态。安装过程参考如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# yum install -y docker-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl enable docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl start docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl status docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● docker.service - Docker Application Container Engine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active (running) since Tue 2017-06-20 20:30:49 CST; 19min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: https://docs.docker.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: 875 (dockerd)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/docker.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─ 875 /usr/bin/dockerd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─ 942 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-in...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─2008 docker-containerd-shim 0ca2346b6126de702fb4dda5f807c0a69a402eb643f15c142730277d0eb7bbcb /var/...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─0ca2346b6126de702fb4dda5f807c0a69a402eb643f15c142730277d0eb7bbcb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─2038 /usr/bin/python /code/main.py --prism-ip 10.68.69.22 --dataservices-ip 10.68.69.23 --prism-...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>到目前为止，Docker安装配置完成。&lt;/p>
&lt;p>下面开始安装DVP，安装和配置过程参考页面。&lt;/p>
&lt;p>&lt;a class="link" href="https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in" target="_blank" rel="noopener"
>https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in&lt;/a>&lt;/p>
&lt;p>下面是给操作系统安装iscsi initiator服务的参考步骤：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yum install -y iscsi-initiator-utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemd-tmpfiles --create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl status iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● iscsid.service - Open-iSCSI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded (/usr/lib/systemd/system/iscsid.service; enabled; vendor preset: disabled)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active (running) since Tue 2017-06-20 20:30:46 CST; 24min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: man:iscsid(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> man:iscsiadm(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: 888 (iscsid)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/iscsid.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─882 /usr/sbin/iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─888 /usr/sbin/iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Starting Open-iSCSI...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local iscsid[878]: iSCSI logger with pid=882 started!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Failed to read PID from file /var/run/iscsid.pid: Inva...ent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Started Open-iSCSI.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:47 centos7-temp.zenlab.local iscsid[882]: iSCSI daemon with pid=888 started!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hint: Some lines were ellipsized, use -l to show in full.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>解释一下DVP的工作原理是，它是让Docker主机通过iSCSI协议连接Nutanix的存储服务。DVP插件的配置里包含了连接存储服务和存储容器（这个容器是Nutanix的存储术语，非Docker说的容器）的相关信息。这样Docker主机上用该卷插件建立的数据卷都会指向Nutanix后台的存储容器中；数据通过iSCSI协议连接Nutanix存储服务的时候，就可以利用到Nutanix群集提供的负载均衡能力；当数据块写入Nutanix存储池的过程中和之后，就可以利用到到Nutanix存储容器所具备的其它重要特性：数据块2~3副本的高可靠性、冷热数据分成、压缩、去重、纠删码等；而且存储空间对于容器或者Docker Swarm里的服务都是透明和无限容量的。&lt;/p>
&lt;/blockquote>
&lt;p>现在做一些安装DVP的准备工作，询问Nutanix系统管理员下面信息：&lt;/p>
&lt;ul>
&lt;li>获得Prism 的IP&lt;/li>
&lt;li>获得Nutanix群集数据服务的IP，这个IP是群集上的虚拟服务IP&lt;/li>
&lt;li>获得群集的用户名和密码&lt;/li>
&lt;li>新建一个测试存储容器，获得容器名&lt;/li>
&lt;/ul>
&lt;p>参考下面的DVP安装命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker plugin install ntnx/nutanix_volume_plugin PRISM_IP=&amp;#34;10.68.69.22&amp;#34; DATASERVICES_IP=&amp;#34;10.68.69.23&amp;#34; PRISM_PASSWORD=&amp;#34;nutanix/4u&amp;#34; PRISM_USERNAME=&amp;#34;admin&amp;#34; DEFAULT_CONTAINER=&amp;#34;ddc-sc1&amp;#34; --alias nutanix
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上的命令执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker plugin install ntnx/nutanix_volume_plugin PRISM_IP=&amp;#34;10.68.69.22&amp;#34; DATASERVICES_IP=&amp;#34;10.68.69.23&amp;#34; PRISM_PASSWORD=&amp;#34;nutanix/4u&amp;#34; PRISM_USERNAME=&amp;#34;admin&amp;#34; DEFAULT_CONTAINER=&amp;#34;ddc-sc1&amp;#34; --alias nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plugin &amp;#34;ntnx/nutanix_volume_plugin&amp;#34; is requesting the following privileges:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - network: [host]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/dev]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/lib/modules]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/etc/iscsi]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/var/lock/iscsi]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/proc]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - allow-all-devices: [true]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - capabilities: [CAP_SYS_ADMIN CAP_SYS_PTRACE CAP_IPC_LOCK CAP_IPC_OWNER CAP_NET_ADMIN CAP_MKNOD CAP_SYS_MODULE]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Do you grant the above permissions? [y/N] y （输入y，按回车）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">latest: Pulling from ntnx/nutanix_volume_plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">be892c8cb64d: Download complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Digest: sha256:5a3730ffae077eb6ddc0c125620283d56852528b686cbe42f2f58696eab82c0d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: Downloaded newer image for ntnx/nutanix_volume_plugin:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed plugin ntnx/nutanix_volume_plugin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确认VDP安装结果，这个插件应该是最新版、启动的状态，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker plugin ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ID NAME DESCRIPTION ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">f0e38fbc11b3 nutanix:latest Nutanix volume plugin for docker true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行下面的测试，确认DVP工作正常。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume create testvol -d nutanix:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DRIVER VOLUME NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix:latest testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>回到Nutanix的Prisum界面（主要的群集管理图形化界面）中查看Storage &amp;ndash;&amp;gt; table &amp;ndash;&amp;gt; Volume Group，应该能看到这个命令所创建的名为testvol的数据卷。如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%209.07.13%20PM.png"
loading="lazy"
>&lt;/p>
&lt;p>在命令行删除这个测试的卷。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume rm testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DRIVER VOLUME NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在回到Prisum界面中查看刚才看到的那个卷应该就消失了。到此为止所有节点的DVP部署配置工作就完毕了，并且确认docker服务和DVP功能都很正常。用 sys-unconfig 命令关机，把这个虚拟机在Prisum里面做一个快照备用，也可以在Nutanix的acli命令行里面把它做成一个基础镜像。&lt;/p>
&lt;p>我们已经理解和熟悉了DVP的基本操作，配置和部署，下面开始安装Docker Datacenter；Docker Datacenter的架构图如下所示：
&lt;img src="https://martinliu.cn/images/14979754711332.jpg"
loading="lazy"
>&lt;/p>
&lt;p>本文安装的架构是：&lt;/p>
&lt;ol>
&lt;li>一个 UCP manager 节点&lt;/li>
&lt;li>一个 DTR 节点&lt;/li>
&lt;li>两个 worker node 节点&lt;/li>
&lt;/ol>
&lt;p>在Nutanix的Prisum中用刚才制作的那个快照或者镜像模板，克隆/新建4个虚拟机。虚拟机的参考配置如下：&lt;/p>
&lt;ul>
&lt;li>2 vCPU&lt;/li>
&lt;li>4GB RAM&lt;/li>
&lt;li>50GB Disk&lt;/li>
&lt;/ul>
&lt;h2 id="安装ucpdocker-universal-control-plane节点">安装UCP（Docker Universal Control Plane）节点&lt;/h2>
&lt;p>在Nutanix的Prisum中从刚才新建的四个虚拟机中选择一个，Power on开机；ssh登录到操作系统内之后，设定主机名和IP地址。&lt;/p>
&lt;p>安装配置参考文档：https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/install-offline/#download-the-offline-package&lt;/p>
&lt;p>注意事项，提前下载好安装包，这个tar包里面包含了UCP需要的所有镜像，可以一次性导入到UCP的节点上。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://packages.docker.com/caas/ucp_images_2.1.4.tar.gz -O docker-datacenter.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; docker-datacenter.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>载入完毕后，可以看到如下镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@ucp-master ~]# docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-metrics 2.1.4 e3e24ef156bd 3 weeks ago 92.2 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-swarm 2.1.4 d8b51d6801e5 3 weeks ago 21 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-hrm 2.1.4 38a19323327d 3 weeks ago 14.8 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-etcd 2.1.4 9aa382502e19 3 weeks ago 38.5 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-controller 2.1.4 5a852aa3039e 3 weeks ago 28 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-dsinfo 2.1.4 66ee9368796a 3 weeks ago 159 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp 2.1.4 7a28dbfc44e4 3 weeks ago 19.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp latest 7a28dbfc44e4 3 weeks ago 19.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-cfssl 2.1.4 acdc1f147711 3 weeks ago 15.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-compose 2.1.4 25775e989077 3 weeks ago 32.9 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-auth-store 2.1.4 f27ad13dee6c 3 weeks ago 58.7 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-agent 2.1.4 d716a096c331 3 weeks ago 22.5 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-auth 2.1.4 1f4739cd3c08 3 weeks ago 25.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@ucp-master ~]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装UCP的命令参考如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run --rm -it --name ucp \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /var/run/docker.sock:/var/run/docker.sock \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker/ucp:2.1.4 install \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --host-address 10.68.69.12 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --interactive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上命令中10.68.69.12是UCP主机的ip地址，建议UCP使用固定IP。以上命令完毕后用浏览器访问这个IP。&lt;/p>
&lt;p>参考以下文档，完成UCP的安装步骤，其中需要到Docker网站获得30天的试用版许可证文件。&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/" target="_blank" rel="noopener"
>https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/&lt;/a>&lt;/p>
&lt;p>能够正常登陆访问UCP之后，在首页下方点击 【Add Node】按钮，获得加其它节点到群集里的命令，参考命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker swarm join \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --token SWMTKN-1-1310ah7gzj9e7bk6a5yobo2qyiwf93ybrd29flkved1zqydd6i-7pir0884sag5pjofwzjq5o1um \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10.68.69.12:2377
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把以上命令记录在写字板中备用。&lt;/p>
&lt;h2 id="加3个节点到群集里">加3个节点到群集里&lt;/h2>
&lt;p>把剩下的三个虚拟机开机，进入操作系统后设定主机名和IP。其中的一个安装DTR（Docker镜像仓库）的节点建议使用固定IP。&lt;/p>
&lt;p>在每个操作系统里面用docker命令确认DVP是否正常。&lt;/p>
&lt;ul>
&lt;li>docker plugin ls&lt;/li>
&lt;li>docker volume ls&lt;/li>
&lt;li>systemctl status iscsid&lt;/li>
&lt;/ul>
&lt;p>下面就可以把上一步所记录命令在命令行里面执行以下，完毕之后回到UCP的界面中查看是否它们已经添加成功。如下图所示：
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%209.49.32%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 9.49.32 P"
>&lt;/p>
&lt;h2 id="安装dtr-docker镜像仓库">安装DTR-Docker镜像仓库&lt;/h2>
&lt;p>在UCP首页的下方，找到并点击 【Install DTR】的按钮，取得安装命令（记得从清单中选择固定IP地址的DTR主机）；在登录DTR主机的控制台里面输入这个命令，命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -it --rm \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker/dtr:2.2.5 install \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ucp-node 10.68.69.12 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ucp-insecure-tls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>DTR节点没有离线安装的整合包，它需要联网下载很多相关镜像，如果网络速度不是很快的话，下载和安装的过程需要至少半个小时，过程中还需要输入UCP的管理员，用户名和密码。&lt;/p>
&lt;p>参考文档如：
&lt;a class="link" href="https://docs.docker.com/datacenter/dtr/2.2/guides/admin/install/#step-3-install-dtr" target="_blank" rel="noopener"
>https://docs.docker.com/datacenter/dtr/2.2/guides/admin/install/#step-3-install-dtr&lt;/a>&lt;/p>
&lt;p>DTR正常工作了以后，登录建立一个名为owncloud的镜像库，点击【New Rrepository】输入owncloud。
在一个节点上下载owncloud镜像，添加新的tag，上传到这个镜像到镜像库里备用。参考命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker login dtr.zenlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull owncloud
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker tag owncloud:latest dtr.zenlab.local/admin/owncloud:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker push dtr.zenlab.local/admin/owncloud:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.10.13%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.10.13 P"
>&lt;/p>
&lt;p>注意：如果你的环境中没有DNS，就把dtr.zenlab.local换成DTR的IP地址。&lt;/p>
&lt;p>以上这个步骤主要是方便以后，反复使用和测试这个镜像的可能性，如果所有的节点都有高速的互联网链接，可以忽略以上步骤。&lt;/p>
&lt;h2 id="docker-swarm群集中使用dvp">Docker Swarm群集中使用DVP&lt;/h2>
&lt;p>这里使用UCP的图形化界面，在一个所有节点都配置和部署了VDP的群集上，给群集挂载外部Nutanix的数据卷。&lt;/p>
&lt;p>登录UCP主页，点击Resource，点击Volumes，点击 【Create Volume】，输入相关参数，如下图所示。图中的sizeMb=500000这个参数是制定VolumeGroup的大小，不设定这个参数的话，默认是10GB。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.22.24%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.22.24 A"
>&lt;/p>
&lt;p>在到Nutanix的Prism里面查看这个Volume Group是否存在。应该如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.23.32%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.23.32 A"
>&lt;/p>
&lt;h2 id="部署owncloud网盘服务">部署OwnCloud网盘服务&lt;/h2>
&lt;p>登录UCP主页，点击 Service ， 点击 【Create a Service】按钮；开始建立这个服务。输入服务名，镜像名；点击 【Next】按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.10%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.10 P"
>&lt;/p>
&lt;p>点击 【Next】按钮。进入 Resource页面，这里需要配置端口和数据卷。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.35%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.35 P"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.58%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.58 P"
>&lt;/p>
&lt;p>最后点击【Deploy Now】按钮。 部署完毕之后，显示这个服务的状态为正常。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.25.51%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.25.51 A"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.52.28%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.52.28 P"
>&lt;/p>
&lt;p>点击这个服务，到这个页面的最下方，找到右下角的发布端口的链接，点击后，就可以看到ownCloud的初始化配置页面了。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.53.24%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.53.24 P"
>&lt;/p>
&lt;p>输入管理员的用户名和密码，进入之后，上传一些图片，测试一下功能是否正常。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.54.06%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.54.06 P"
>&lt;/p>
&lt;p>尝试一些Docker Datacenter的高级功能，如服务的高可用性；同时Nutanix的DVP在底层保障了数据的持久性和完全性。测试步骤如下：&lt;/p>
&lt;ol>
&lt;li>找到运行owncloud的容器，删除这个容器&lt;/li>
&lt;li>在服务页面查看owncloud服务的状态变化&lt;/li>
&lt;li>等ownCloud的状态恢复正常之后&lt;/li>
&lt;li>再次登录ownCloud页面&lt;/li>
&lt;li>查看和确认刚才上传的文件是否还在&lt;/li>
&lt;/ol>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Nutanix是一种融合和了计算、存储和虚拟化（内置KVM）的超融合平台。Nutanix DVP (Docker Volume Plug-in)可以让平台里的容器用上持久化存储服务。DVP不仅可以给单独虚拟机里的容器提供持久卷服务，还能给类似于Docker Swarm的其它容器编排平台提供持久化数据服务功能。我后续的文章还会分享路测试Kubernetes等其它平台。&lt;/p></description></item><item><title>Tips for Docker on Mac</title><link>https://martinliu.cn/blog/tips-for-docker-on-mac/</link><pubDate>Tue, 26 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/tips-for-docker-on-mac/</guid><description>&lt;img src="https://martinliu.cn/images/sandrali-3.JPG" alt="Featured image of post Tips for Docker on Mac" />&lt;h1 id="tips-for-docker-on-mac">Tips for Docker on Mac&lt;/h1>
&lt;p>在macOS上使用Docker很长时间了，本文总结一些我不想忘记的tips，方便自己反复使用的同时，也顺便总结分享一下，留下本文作为长期更新的备忘录。&lt;/p>
&lt;h2 id="搭建私有镜像库">搭建私有镜像库&lt;/h2>
&lt;p>运行一个本地镜像库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker run -d -p 5000:5000 --restart=always --name registry registry:2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这条命令会从docker hub 下载 registry:2 镜像，在本机运行一个镜像库服务。&lt;/p>
&lt;p>下载一个测试用的镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker pull ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>给这个镜像打上私有镜像库的标签&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker tag ubuntu:16.04 localhost:5000/ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>push这个测试镜像到本地的镜像库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker push localhost:5000/ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这时候你会发现我的本地这样岂不是有了两份相同的镜像了，有这个必要么？是不是多余了？下面几个场景中会用到：&lt;/p>
&lt;p>当你用docker-machine在本机启动1个vm的时候，你运行任何docker run或者docker-compose up的时候你可能需要一个之前在本地就有的image，这是一种分享本机image给docker-machine vm的一种方式。&lt;/p>
&lt;p>当你用docker-machine在本机启动多个个vm的时候，你可能会把它们作出docker Swarm群集，当你在这个群集上启动一个服务的时候，docker compose文件中的镜像地址可以引用这个本地地址，引用地址类似这样 image: 192.168.99.1:5000/influxdb&lt;/p>
&lt;p>当你用 minikube start启动了一个minikube的vm的时候，你可能也需要本机的docker镜像，尤其是在你做demo的时候，这是最快的下载途径。
需要注意的是，以上三种情况都需要指定一下&amp;ndash;engine-insecure-registry 192.168.99.1:5000 这个参数。&lt;/p>
&lt;h2 id="自动化创建docker-swarm群集">自动化创建Docker Swarm群集&lt;/h2>
&lt;p>在我的文件目录中存放着这个脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cat create-swarm.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create manager --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent1 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent2 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent3 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eval `docker-machine env manager`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker swarm init --advertise-addr `docker-machine ip manager`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent1 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent2 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent3 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker node ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解释一下上面的代码：创建四个docker-machine vm，初始化swarm群集，把三个worker节点加入群集。这样四节点的群集就up and running了。&lt;/p>
&lt;p>清除以上群集虚拟机的命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine rm -y manager agent1 agent2 agent3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>用Minikube体验单节点K8S</title><link>https://martinliu.cn/blog/%E7%94%A8minikube%E4%BD%93%E9%AA%8C%E5%8D%95%E8%8A%82%E7%82%B9k8s/</link><pubDate>Thu, 21 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E7%94%A8minikube%E4%BD%93%E9%AA%8C%E5%8D%95%E8%8A%82%E7%82%B9k8s/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 用Minikube体验单节点K8S" />&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/minikube-logo.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Usage:
minikube [command]&lt;/p>
&lt;p>Available Commands:
addons Modify minikube&amp;rsquo;s kubernetes addons
completion Outputs minikube shell completion for the given shell (bash)
config Modify minikube config
dashboard Opens/displays the kubernetes dashboard URL for your local cluster
delete Deletes a local kubernetes cluster
docker-env Sets up docker env variables; similar to &amp;lsquo;$(docker-machine env)&amp;rsquo;
get-k8s-versions Gets the list of available kubernetes versions available for minikube
ip Retrieves the IP address of the running cluster
logs Gets the logs of the running localkube instance, used for debugging minikube, not user code
mount Mounts the specified directory into minikube
profile Profile sets the current minikube profile
service Gets the kubernetes URL(s) for the specified service in your local cluster
ssh Log into or run a command on a machine with SSH; similar to &amp;lsquo;docker-machine ssh&amp;rsquo;
ssh-key Retrieve the ssh identity key path of the specified cluster
start Starts a local kubernetes cluster
status Gets the status of a local kubernetes cluster
stop Stops a running local kubernetes cluster
update-context Verify the IP address of the running cluster in kubeconfig.
version Print the version of minikube&lt;/p>
&lt;p>Flags:
&amp;ndash;alsologtostderr log to standard error as well as files
-b, &amp;ndash;bootstrapper string The name of the cluster bootstrapper that will set up the kubernetes cluster. (default &amp;ldquo;localkube&amp;rdquo;)
-h, &amp;ndash;help help for minikube
&amp;ndash;log_backtrace_at traceLocation when logging hits line file:N, emit a stack trace (default :0)
&amp;ndash;log_dir string If non-empty, write log files in this directory
&amp;ndash;loglevel int Log level (0 = DEBUG, 5 = FATAL) (default 1)
&amp;ndash;logtostderr log to standard error instead of files
-p, &amp;ndash;profile string The name of the minikube VM being used.
This can be modified to allow for multiple minikube instances to be run independently (default &amp;ldquo;minikube&amp;rdquo;)
&amp;ndash;stderrthreshold severity logs at or above this threshold go to stderr (default 2)
-v, &amp;ndash;v Level log level for V logs
&amp;ndash;vmodule moduleSpec comma-separated list of pattern=N settings for file-filtered logging&lt;/p>
&lt;p>Use &amp;ldquo;minikube [command] &amp;ndash;help&amp;rdquo; for more information about a command.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Starting local Kubernetes v1.7.5 cluster&amp;hellip;
Starting VM&amp;hellip;
Getting VM IP address&amp;hellip;
Moving files into cluster&amp;hellip;
Setting up certs&amp;hellip;
Connecting to cluster&amp;hellip;
Setting up kubeconfig&amp;hellip;
Starting cluster components&amp;hellip;
Kubectl is now configured to use the cluster.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h1 id="we-have-now-launched-an-echoserver-pod-but-we-have-to-wait-until-the-pod-is-up-before-curlingaccessing-it">We have now launched an echoserver pod but we have to wait until the pod is up before curling/accessing it&lt;/h1>
&lt;h1 id="via-the-exposed-service">via the exposed service.&lt;/h1>
&lt;h1 id="to-check-whether-the-pod-is-up-and-running-we-can-use-the-following">To check whether the pod is up and running we can use the following:&lt;/h1>
&lt;p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 ContainerCreating 0 3s&lt;/p>
&lt;h1 id="we-can-see-that-the-pod-is-still-being-created-from-the-containercreating-status">We can see that the pod is still being created from the ContainerCreating status&lt;/h1>
&lt;p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 Running 0 13s&lt;/p>
&lt;h1 id="we-can-see-that-the-pod-is-now-running-and-we-will-now-be-able-to-curl-it">We can see that the pod is now Running and we will now be able to curl it:&lt;/h1>
&lt;p>$ curl $(minikube service hello-minikube &amp;ndash;url)
CLIENT VALUES:
client_address=172.17.0.2
command=GET
real path=/
query=nil
request_version=1.1
request_uri=http://192.168.99.100:8080/&lt;/p>
&lt;p>SERVER VALUES:
server_version=nginx: 1.10.0 - lua: 10001&lt;/p>
&lt;p>HEADERS RECEIVED:
accept=&lt;em>/&lt;/em>
host=192.168.99.100:31721
user-agent=curl/7.54.0
BODY:
-no body in request-%
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>$ APISERVER=$(kubectl config view | grep https | cut -f 2- -d &amp;ldquo;:&amp;rdquo; | tr -d &amp;quot; &amp;ldquo;)&lt;/p>
&lt;p>$ curl $APISERVER &amp;ndash;header &amp;ldquo;Authorization: Bearer $TOKEN&amp;rdquo; &amp;ndash;insecure
{
&amp;ldquo;paths&amp;rdquo;: [
&amp;ldquo;/api&amp;rdquo;,
&amp;ldquo;/api/v1&amp;rdquo;,
&amp;ldquo;/apis&amp;rdquo;,
&amp;ldquo;/apis/&amp;rdquo;,
&amp;ldquo;/apis/admissionregistration.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/admissionregistration.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/apiextensions.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/apiextensions.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/apiregistration.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/apiregistration.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/apps&amp;rdquo;,
&amp;ldquo;/apis/apps/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/autoscaling&amp;rdquo;,
&amp;ldquo;/apis/autoscaling/v1&amp;rdquo;,
&amp;ldquo;/apis/autoscaling/v2alpha1&amp;rdquo;,
&amp;ldquo;/apis/batch&amp;rdquo;,
&amp;ldquo;/apis/batch/v1&amp;rdquo;,
&amp;ldquo;/apis/batch/v2alpha1&amp;rdquo;,
&amp;ldquo;/apis/certificates.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/certificates.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/extensions&amp;rdquo;,
&amp;ldquo;/apis/extensions/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/networking.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/networking.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/policy&amp;rdquo;,
&amp;ldquo;/apis/policy/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/settings.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/settings.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/healthz&amp;rdquo;,
&amp;ldquo;/healthz/autoregister-completion&amp;rdquo;,
&amp;ldquo;/healthz/ping&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/apiservice-registration-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/apiservice-status-available-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/bootstrap-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/ca-registration&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/extensions/third-party-resources&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/generic-apiserver-start-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/kube-apiserver-autoregistration&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-apiextensions-controllers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-apiextensions-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-kube-aggregator-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-kube-apiserver-informers&amp;rdquo;,
&amp;ldquo;/logs&amp;rdquo;,
&amp;ldquo;/metrics&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.json&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.pb-v1&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.pb-v1.gz&amp;rdquo;,
&amp;ldquo;/swagger.json&amp;rdquo;,
&amp;ldquo;/swaggerapi&amp;rdquo;,
&amp;ldquo;/ui&amp;rdquo;,
&amp;ldquo;/ui/&amp;rdquo;,
&amp;ldquo;/version&amp;rdquo;
]
}%&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/Overview---Kubernetes-Dashboard.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>DevOps 的起点-入手微型数据中心</title><link>https://martinliu.cn/2016/07/01/devops-in-a-box/</link><pubDate>Fri, 01 Jul 2016 03:11:10 +0000</pubDate><guid>https://martinliu.cn/2016/07/01/devops-in-a-box/</guid><description>&lt;h2 id="测试环境说明">测试环境说明&lt;/h2>
&lt;p>我的笔记本电脑的环境描述如下。&lt;/p>
&lt;h3 id="os">OS&lt;/h3>
&lt;p>MacBook Pro 2011 版， 2.3 GHz Intel Core i5， 8GB DDR3， 256 GB SSD。 OS X EI Capitan version 10.11.5&lt;/p>
&lt;h3 id="docker">Docker&lt;/h3>
&lt;p>Docker for Mac Version 1.12.0-rc2-beta17 (build: 9779)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: 906eacd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Fri Jun 17 20:35:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: darwin/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: a7119de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Wed Jun 29 10:03:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-machine version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine version 0.8.0-rc1, build fffa6c9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents [9:38:31]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-compose version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose version 1.8.0-rc1, build 9bf6bc6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-py version: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPython version: 2.7.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OpenSSL version: OpenSSL 1.0.2h 3 May 2016
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>VirtualBox version 5.0.22r108108&lt;/p>
&lt;h3 id="本机下载的-docker-镜像">本机下载的 Docker 镜像&lt;/h3>
&lt;p>/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-v1.0.1.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-instance-v0.8.1.tar&lt;/p>
&lt;p>~/Downloads/habitat-docker-registry.bintray.io-studio.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-server-stable.tar&lt;/p>
&lt;p>我本机还有一个 Docker Registry 的 vm，这里面提供了我需要积累以后用的镜像存储，想象一下你在飞机上的时候去哪里拉取镜像 ：）&lt;/p>
&lt;h3 id="本机下载的代码">本机下载的代码&lt;/h3>
&lt;p>&lt;a class="link" href="https://github.com/habitat-sh/habitat-example-plans" target="_blank" rel="noopener"
>https://github.com/habitat-sh/habitat-example-plans&lt;/a> &lt;a class="link" href="https://github.com/janeczku/habitat-plans" target="_blank" rel="noopener"
>https://github.com/janeczku/habitat-plans&lt;/a> &lt;a class="link" href="https://github.com/chrisurwin/may2016-demo" target="_blank" rel="noopener"
>https://github.com/chrisurwin/may2016-demo&lt;/a> &lt;a class="link" href="https://github.com/docker/example-voting-app" target="_blank" rel="noopener"
>https://github.com/docker/example-voting-app&lt;/a>&lt;/p>
&lt;p>注意以上代码可能需要修改才能在本机调试成功。&lt;/p>
&lt;h2 id="创建-rancher-服务器">创建 Rancher 服务器&lt;/h2>
&lt;h3 id="生成虚拟机">生成虚拟机&lt;/h3>
&lt;p>用 docker-machine 创建 rancher 服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine create rancher --driver virtualbox --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;8000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso &amp;amp;&amp;amp; eval $(docker-machine env rancher)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="导入-rancher-服务器镜像">导入 Rancher 服务器镜像&lt;/h3>
&lt;p>用 docker-machine ls 应该看到 rancher 这个节点打了星号。否则 docker 命令会执行失败或者错误。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-server-stable.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --restart=always --name rancher-srv -p 8080:8080 rancher/server:stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs -f rancher-srv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 rancher 服务器的 ip 地址。 docker-machine ip rancher&lt;/p>
&lt;p>用浏览器打开 Rancher 服务器的登录页面。 open http://Rancher_Server_IP:8080&lt;/p>
&lt;p>下面是一些如何让虚拟机保持固定 IP 和 rancher 容器存储的数据持久存在的代码，我没有测试成功，留下大家一起搞，成功了，给我一个回复。另外还有关于稿 jekins 和 mirror 的代码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo &amp;#34;ifconfig eth1 192.168.99.60 netmask 255.255.255.0 broadcast 192.168.99.255 up&amp;#34; | docker-machine ssh node1 sudo tee /var/lib/boot2docker/bootsync.sh &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine regenerate-certs node1 -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh ndoe1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mkdir /mnt/sda1/var/lib/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker@node1:/mnt/sda1/var/lib/boot2docker$ cat bootsync.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ifconfig eth1 192.168.99.60 netmask 255.255.255.0 broadcast 192.168.99.255 up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mkdir /mnt/sda1/var/lib/rancher/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ln -s /mnt/sda1/var/lib/rancher/ /var/lib/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/jenkins.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --name jekins --privileged -p 9001:8080 -v /var/lib/docker/:/var/lib/docker/ -v /var/run/docker.sock:/var/run/docker.sock -v /usr/bin/docker:/usr/bin/docker -v /lib64/libdevmapper.so.1.02:/usr/lib/libdevmapper.so.1.02 --label io.rancher.container.network=true jenkins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create mirror --driver virtualbox --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;8000&amp;#34; --virtualbox-memory &amp;#34;512&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/boot2docker.iso
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/registry.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d -p 80:5000 --restart=always --name registry registry:2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="容器运行节点-rancher-agent-节点">容器运行节点 Rancher Agent 节点&lt;/h2>
&lt;h3 id="创建-node1-虚拟机">创建 node1 虚拟机&lt;/h3>
&lt;p>使用 docker-machine 命令创建容器运行节点。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine create node1 --driver virtualbox --engine-insecure-registry 192.168.99.20:5000 --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;80000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create node2 --driver virtualbox --engine-insecure-registry 192.168.99.20:5000 --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;80000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 node1 或者 node2 测试运行一个容器，使用 mirror 中的 busybox 镜像。如果你的笔记本内存小于 8GB 的话，node2 就别搞了。一个 node 也够用了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull 192.168.99.20:5000/busybox:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker run 一下这个镜像，验证 node1 工作正常。&lt;/p>
&lt;h3 id="加载-rancher-agent-的镜像">加载 Rancher Agent 的镜像&lt;/h3>
&lt;p>确保 node1 是 docker-machine ls 中打星号的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-agent-v1.0.1.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-agent-instance-v0.8.1.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/habitat-docker-registry.bintray.io-studio.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你翻墙下载回来的 habitat-docker-registry.bintray.io/studio 镜像可能需要打标签，否则回头 hab 命令执行失败。 先用 docer images 看下是否所有 image 的标签信息正确。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker tag fc27342e5e0e habitat-docker-registry.bintray.io/studio:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加-node1-节点到-rancher-server">添加 node1 节点到 Rancher Server。&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.0.1 http://192.168.99.100:8080/v1/scripts/33B68ED65CEF18F6D7BD:1466694000000:lug2KswoXOOQV4d09ZNMGTphVs0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>现在在 Hosts 页面上应该能看到该刚创建的节点。在页面上创建一个最小化的容器（如 busybox），来拉起 Network Agent 容器。&lt;/p>
&lt;h2 id="调试-habitat-的测试程序">调试 habitat 的测试程序&lt;/h2>
&lt;p>参考的文档 &lt;a class="link" href="https://www.habitat.sh/tutorials/" target="_blank" rel="noopener"
>https://www.habitat.sh/tutorials/&lt;/a> 记得一定要把这一组文章先看完，在去调试它的代码，不懂这些基本概念的话，后面对了错了都不知道该怎么搞。&lt;/p>
&lt;p>前置条件，翻墙下载 habitat studio 的 docker image 镜像，load 到 node1 上，下面的所有测试都是在 node1 上完成的。&lt;/p>
&lt;h3 id="安装-hab">安装 hab&lt;/h3>
&lt;p>habitat 的程序只有一个可执行程序， 目前支持 mac 和 linux 版本。下载地址： &lt;a class="link" href="https://www.habitat.sh/docs/get-habitat" target="_blank" rel="noopener"
>https://www.habitat.sh/docs/get-habitat&lt;/a> 就是一个 tag 包，解压缩后放到 shell 的 PATH 里面就安装完了。&lt;/p>
&lt;h3 id="配置-hab-cli">配置 hab cli&lt;/h3>
&lt;p>运行 hab setup&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">martin&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">=================&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Welcome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Let&lt;/span>&lt;span class="s1">&amp;#39;s get started.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Every package in Habitat belongs to an origin, which indicates the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> person or organization responsible for maintaining that package. Each
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin also has a key used to cryptographically sign packages in that
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Selecting a default origin tells package building operations such as
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="s1">&amp;#39; what key should be used to sign the packages produced.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> If you do not set a default origin now, you will have to tell package
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> building commands each time what origin to use.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> For more information on origins and how they are used in building
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> packages, please consult the docs at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> https://www.habitat.sh/docs/build-packages-overview/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin? [Yes/no/quit] yes 这里输入 yes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Enter the name of your origin. If you plan to publish your packages
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> publicly, we recommend that you select one that is not already in use on
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> the Habitat build service found at https://app.habitat.sh/.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> You already have a default origin set up as `martin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这是用来做&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">包签名和加密用的标识，在代码里面会用到。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">installed&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Great&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">work&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">While&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">them&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">doing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">allows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">collaborate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">community&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">In&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">addition&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">perform&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">continuous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">uses&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">authentication&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">help&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">articles&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">creating&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Otherwise&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">information&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">documentation&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overview&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">Set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这个&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">需要自己去&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">里面生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tool&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">will&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">optionally&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">usage&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="s1">&amp;#39;s Google Analytics account. This is a strictly opt-in activity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> and no tracking will occur unless you respond affirmatively to the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> question below.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> We collect this data to help improve Habitat&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">experience&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">know&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tasks&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">performing&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">which&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ones&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">having&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">trouble&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mistyping&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">arguments&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">To&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">see&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">what&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kinds&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymized&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">our&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">here&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">»&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Opting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">☑&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Creating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OPTED_OUT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">★&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">opted&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">salute&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">same&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Complete&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">That&lt;/span>&lt;span class="s1">&amp;#39;s all for now. Thanks for using Habitat!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">martin@localhost ~/Documents $
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该注意的都写到上面的代码里面了。这个配置的结果在这里&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cat ~/.hab/etc/cli.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth_token = &amp;#34;martin-github-token&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">origin = &amp;#34;martin&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="调试-habitat-demo-应用">调试 Habitat demo 应用&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/habitat-sh/habitat-example-plans
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入到 mytutorialapp 目录，修改 plan.sh 的 第二行代码，我改后的代码是&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pkg_origin=martin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>martin 是我在 hab cli 里面配置的 origin。&lt;/p>
&lt;p>其实下面的测试就执行了两个 hab 的命令，都是在 hab studi 的 shell 里面执行的，这个 shell 其实就是一个 studio 容器的 shell。&lt;/p>
&lt;p>在运行下面的命令，确保你是和 node1 正常通讯的，下面我用 default 节点做演示。做完的演示环境我已经删除了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker-machine ls NAME ACTIVE DRIVER STATE URL SWARM DOCKER ERRORS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default - virtualbox Running tcp://192.168.99.100:2376 v1.11.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常的意思是执行所有 docker 命令不报错。&lt;/p>
&lt;h3 id="build-habitat-demo-代码">build habitat demo 代码&lt;/h3>
&lt;p>进入到代码的 plan.sh 的目录 执行 hab studio enter 命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">martin&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">localhost&lt;/span> &lt;span class="err">~&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">habitat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plans&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">$&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">studio&lt;/span> &lt;span class="nx">enter&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="err">±&lt;/span>&lt;span class="nx">master&lt;/span> &lt;span class="err">●●&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Importing&lt;/span> &lt;span class="nx">martin&lt;/span> &lt;span class="nx">secret&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Importing&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">standard&lt;/span> &lt;span class="nx">input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Imported&lt;/span> &lt;span class="nx">secret&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20160630040241.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Entering&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Exported&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">HAB_ORIGIN&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">martin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">:&lt;/span> &lt;span class="nx">Loading&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Plan&lt;/span> &lt;span class="nx">loaded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span> &lt;span class="nx">setup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">HAB_BIN&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">installs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">signing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">hashing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Resolving&lt;/span> &lt;span class="nx">dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.44&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">6.44&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">457.82&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">============================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">575.13&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="nx">Cached&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Resolved&lt;/span> &lt;span class="nx">dependency&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232259&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3.42&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075613&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">binutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.25.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064534&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">coreutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075329&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064523&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">findutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.4.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080341&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gawk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.1.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075739&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">grep&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075540&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080637&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sed&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075228&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">unzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081414&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wget&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.16.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081342&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">acl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.2.52&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075215&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">attr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.4.47&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075207&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">less&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">481&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libcap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075226&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libidn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.32&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ncurses&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075116&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pcre&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.38&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075520&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mkdir&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">created&lt;/span> &lt;span class="nx">directory&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//s3-us-west-2.amazonaws.com/mytutorialapp/mytutorialapp-0.1.0.tar.gz&amp;#39; to &amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span> &lt;span class="mo">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//s3-us-west-2.amazonaws.com/mytutorialapp/mytutorialapp-0.1.0.tar.gz
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Resolving&lt;/span> &lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mf">54.231.184.216&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Connecting&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="p">)|&lt;/span>&lt;span class="mf">54.231.184.216&lt;/span>&lt;span class="p">|:&lt;/span>&lt;span class="mf">443.&lt;/span>&lt;span class="p">..&lt;/span> &lt;span class="nx">connected&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">HTTP&lt;/span> &lt;span class="nx">request&lt;/span> &lt;span class="nx">sent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">awaiting&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="nx">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1041&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="nx">K&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">gzip&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Saving&lt;/span> &lt;span class="nx">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">==================================================&lt;/span>&lt;span class="p">=&amp;gt;]&lt;/span> &lt;span class="mf">1.02&lt;/span>&lt;span class="nx">K&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span> &lt;span class="mo">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">32.1&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">saved&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Downloaded&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Verifying&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Checksum&lt;/span> &lt;span class="nx">verified&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Clean&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Unpacking&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">environment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">PREFIX&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">LD_RUN_PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">CFLAGS&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">I&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">include&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">LDFLAGS&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">L&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Preparing&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Building&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">npm&lt;/span> &lt;span class="nx">WARN&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.0&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">repository&lt;/span> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">npm&lt;/span> &lt;span class="nx">WARN&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.0&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">README&lt;/span> &lt;span class="nx">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nconf&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.8.4&lt;/span> &lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.3.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">async&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.5.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">└──&lt;/span> &lt;span class="nx">yargs&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.32.0&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">decamelize&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">camelcase&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">window&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">size&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y18n&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">locale&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cliui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">width&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0.1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Installing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">忽略了好几百行输出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">simple&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">simple&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span>&lt;span class="sc">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sc">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="sc">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sc">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Writing&lt;/span> &lt;span class="nx">configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Writing&lt;/span> &lt;span class="nx">service&lt;/span> &lt;span class="nx">management&lt;/span> &lt;span class="nx">scripts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Stripping&lt;/span> &lt;span class="nx">unneeded&lt;/span> &lt;span class="nx">symbols&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">binaries&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">libraries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">manifest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Building&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="nx">blake2b&lt;/span> &lt;span class="nx">hashes&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">all&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="kn">package&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="nx">signed&lt;/span> &lt;span class="nx">metadata&lt;/span> &lt;span class="nx">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="nx">mytutorialapp_blake2bsums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="nx">mytutorialapp_blake2bsums&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Signed&lt;/span> &lt;span class="nx">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">FILES&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">artifact&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Removing&lt;/span> &lt;span class="nx">leading&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">member&lt;/span> &lt;span class="nx">names&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">tar&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">100&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">121.4&lt;/span> &lt;span class="nx">KiB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">900.0&lt;/span> &lt;span class="nx">KiB&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mf">0.135&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">xz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">xz&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Signed&lt;/span> &lt;span class="nx">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span> &lt;span class="nx">cleanup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="nx">Cache&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">Path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Artifact&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">Report&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">last_build&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">env&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">SHA256&lt;/span> &lt;span class="nx">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Blake2b&lt;/span> &lt;span class="nx">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">I&lt;/span> &lt;span class="nx">love&lt;/span> &lt;span class="nx">it&lt;/span> &lt;span class="nx">when&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">plan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span> &lt;span class="nx">comes&lt;/span> &lt;span class="nx">together&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nx">m3s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>检查结果，在代码的目录中可以看的 result 目录，关注一下这个目录，关键看 build 命令的最后一段。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mytutorialapp: hab-plan-build cleanup mytutorialapp: mytutorialapp: Source Cache: /hab/cache/src/mytutorialapp-0.1.0 mytutorialapp: Installed Path: /hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725 mytutorialapp: Artifact: /src/results/martin-mytutorialapp-0.1.0-20160701022725-x86_64-linux.hart mytutorialapp: Build Report: /src/results/last_build.env mytutorialapp: SHA256 Checksum: d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d mytutorialapp: Blake2b Checksum: fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706 mytutorialapp: mytutorialapp: I love it when a plan.sh comes together. mytutorialapp: mytutorialapp: Build time: 1m3s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="昨晚分享的高潮部分-habitat-导出-docker-image">昨晚分享的高潮部分, habitat 导出 docker image&lt;/h3>
&lt;p>其实就是一条命令，在 habitat Studio 中执行 导出命令 hab pkg export docker martin/mytutorialapp&lt;/p>
&lt;p>导出 docker 镜像的过程和 build 的过程一样，都可能会失败；由于它需要到网上下载所需要的代码，下载所需要的 habitat 模块，core/ 开头的都是 habitat 出品的核心的模块，他们的想法基本也是说把所有的可能用到的模块都做封装，成为自己的 pkg 格式的内容。然后在用他们的 Habitat 服务来解析、部署和运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">pkg&lt;/span> &lt;span class="nx">export&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">rootfs&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">baseimage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.23&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.23&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">500.60&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">============================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">378.76&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="nx">Cached&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">510.89&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">510.89&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">89.61&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">141.05&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">141.05&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">349.94&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04.20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">132.32&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">132.32&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">370.21&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04.20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">584.98&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">584.98&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">340.75&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">187.96&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">187.96&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">200.27&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.10&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.10&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">518.78&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">247.38&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">247.38&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">468.42&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">73.06&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">73.06&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">315.44&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.54&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">1.54&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">563.90&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">bash&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">bash&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">sh&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">sh&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Sending&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">context&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">Docker&lt;/span> &lt;span class="nx">daemon&lt;/span> &lt;span class="mf">194.3&lt;/span> &lt;span class="nx">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">FROM&lt;/span> &lt;span class="nx">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ENV&lt;/span> &lt;span class="nx">export&lt;/span> &lt;span class="nx">PATH&lt;/span>&lt;span class="p">=:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="nx">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="nx">f33585a25ae&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="nx">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="nx">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">c0cf3715cbcf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="nx">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ADD&lt;/span> &lt;span class="nx">rootfs&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">d2691da93ccf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="nx">aa80e97ea57&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">VOLUME&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">bd8888453939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="nx">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">EXPOSE&lt;/span> &lt;span class="mi">9631&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="nx">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">256&lt;/span>&lt;span class="nx">a04cd0fe2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="nx">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ENTRYPOINT&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="nx">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">d7bdec08530e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="nx">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">CMD&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nx">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="nx">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Successfully&lt;/span> &lt;span class="nx">built&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nx">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 docker 镜像是否存在。推出 studio 容器，运行 docker images&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[5][default:/src:0]# exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents/GitHub/habitat-example-plans/mytutorialapp $ docker images [±master ●●]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp 0.1.0-20160701024401 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp latest 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="运行这个-demo">运行这个 demo&lt;/h3>
&lt;p>在命令行运行&lt;/p>
&lt;p>$ docker run -it -p 8080:8080 martin/mytutorialapp&lt;/p>
&lt;p>用浏览器打开 node1 的 ip 8080 端口，应该可以看到 hello world 页面。&lt;/p>
&lt;p>在 rancher web 页面添加测试&lt;/p>
&lt;h3 id="在-rancher-中上架这个-demo">在 rancher 中上架这个 demo&lt;/h3>
&lt;p>&lt;a class="link" href="https://github.com/martinliu/hab-catalog" target="_blank" rel="noopener"
>https://github.com/martinliu/hab-catalog&lt;/a> 以上代码是半成品，欢迎协助完成。&lt;/p>
&lt;h3 id="测试-rancher-官方的-redis-demo">测试 Rancher 官方的 redis demo&lt;/h3>
&lt;p>参考文章 &lt;a class="link" href="http://rancher.com/using-habitat-to-create-rancher-catalog-templates/" target="_blank" rel="noopener"
>http://rancher.com/using-habitat-to-create-rancher-catalog-templates/&lt;/a> 它的 demo 和上架的目录都可以正常测试通过，但是服务运行不起来，报主机名错误，redis 节点的群集建立不起来。&lt;/p>
&lt;p>如果您修复了，请回复贴出代码位置。&lt;/p>
&lt;h2 id="福利调试-docker-官方投票应用">福利：调试 docker 官方投票应用&lt;/h2>
&lt;p>下载投票实例程序。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/martinliu/example-voting-app.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入该程序的目录，修改所有 image 的来源镜像库，修改为指向本地的 mirror 服务器。 1. result/tests/Dcokerfile -&amp;gt; FROM 192.168.99.20:5000/node 2. result/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/node:5.11.0-slim 3. vote/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/python:2.7-alpine 4. worker/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/microsoft/dotnet:1.0.0-preview1 5. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/redis:alpine 6. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/postgres:9.4&lt;/p>
&lt;p>由于以上应用在构建的过程中需要在线安装各种软件包，最好先翻墙，确认你有足够稳定的国外的互联网访问，建议翻墙到美国，然后在执行项目的构建命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ping facebook.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=0 ttl=79 time=4187.066 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=1 ttl=79 time=3186.904 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=2 ttl=79 time=2515.415 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=6 ttl=79 time=296.457 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=7 ttl=79 time=410.215 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- facebook.com ping statistics ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">8 packets transmitted, 5 packets received, 37.5% packet loss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">round-trip min/avg/max/stddev = 296.457/2119.211/4187.066/1537.275 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上结果表明，翻墙成功，以上结果显示翻墙的效果比较差，延迟和丢包都比较严重，可能到只构建的时候下载软件包失败。&lt;/p>
&lt;p>构建完毕之后，可以检查一下是否生产了目标镜像文件，如果输出如下所示，则表明本次本地的项目集成构建成功。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_result latest 9bb4126b0905 5 minutes ago 225.8 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_worker latest 292396a5aba4 6 minutes ago 644.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_vote latest 28052191beea 10 minutes ago 68.31 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在当前 node1 节点上做本地的集成结果的功能测试，用 docker-compose 启动这个项目。先检查 compose 文件，然后运行 up。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;6379&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">py&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2.0&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Attaching&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00000000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">bit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-```&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">```&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.,&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">was&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">shut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">down&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39; , .-` | `, ) Running in standalone mode
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | |`-._`-...-` __...-.``-._|&amp;#39;&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;| Port: 6379
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._ `._ / _.-&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; | http://redis.io
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">db_1 | LOG: MultiXact member wraparound protections are now enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; |
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-.__.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># Server started, Redis version 3.2.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &amp;#39;vm.overcommit_memory = 1&amp;#39; to /etc/sysctl.conf and then reboot or run the command &amp;#39;sysctl vm.overcommit_memory=1&amp;#39; for this to take effect.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">autovacuum&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">launcher&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &amp;#39;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&amp;#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">6379&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Press&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CTRL&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Restarting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">stat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">any&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">time&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">rs&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">watching&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">listening&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">139&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">254&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">286&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">worker_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Found&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bodyParser&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">individual&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urlencoded&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">middlewares&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">67&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">undefined&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">provide&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">option&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">105&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Connected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器测试 vote 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/voting-1.jpg"
loading="lazy"
alt="voting"
>&lt;/p>
&lt;p>打开浏览器测试 result 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5001
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/result-1.jpg"
loading="lazy"
alt="result"
>&lt;/p>
&lt;p>在 Rancher 的 hosts 界面中应该看到这些运行的容器。 &lt;img src="http://yzd.io/images/voting-in-rancher-1.jpg"
loading="lazy"
alt="voting-in-ranche"
>&lt;/p>
&lt;p>至此所有关于应用构建和功能测试的过程完成，按 ctl + c 结束 docker-compose up 的运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">^CGracefully stopping... (press Ctrl+C again to force)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_worker_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_result_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_vote_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_db_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_redis_1 ... done
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>DockerCon 2016 D2 超萌码头酷黑客 大会圆满闭幕</title><link>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</link><pubDate>Wed, 22 Jun 2016 02:35:39 +0000</pubDate><guid>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</guid><description>&lt;p>Closing General Session 的主题是 Moby Dock‘s Cool Hacks ； 从字面意思上看，这个主题的意思是“超萌码头酷黑客”的意思。我已经看到了关于最后一天开幕主题演讲的评论，说是“剑指商业”什么的；而我认为 Docker 从开始的第一天，无论它是否开源，它都是为了商业利益而已。话在说回到开源，Docker 只是完美的应用了开源软件这种实践而已；而且 docker 把开源这种模式应用的如此成功，并在商业上也如此让人眼红和侧目，这也算是开源软件商业化登峰造极的一种极端性个案。个人认为开源无疑是在软件行业中做出爆款技术当之无愧的首选的实践方式。我在红帽碰到很多参与开源十几二十年的老黑客，他们不乏会表达关于开源纯洁性沦丧的抱怨；我对此也非常理解和认同。而我更认同开源可以对软件技术带来无比活力的这个积极的方面。&lt;/p>
&lt;p>言归正传，小编我还是“模拟现场”播报一下大会闭幕主题演讲的盛况。这是大会的结束的 session，现场的人数明显的少于第一天开幕式的人。在十几分钟内，人们稀稀拉拉的进入了会场。会场中的座位大约还有一部分空位。美女 Mano 和 黑客 Kristie 作为主要演讲人上台。美女上台后先用手机自拍了几下。两个人开始宣布，Docker 大会之后举行为期一个月的黑客大赛，这是我们的传统，Docker 大会虽然今天会结束，而 docer 黑客大赛将从今天开始。我们来请大家欣赏三个非常酷的黑客项目演示。&lt;/p>
&lt;p>本次大会的录音点这里  &lt;a class="link" href="http://www.ximalaya.com/32280565/sound/17388272" target="_blank" rel="noopener"
>http://www.ximalaya.com/32280565/sound/17388272&lt;/a>&lt;/p>
&lt;h2 id="黑客演示-1微服务自毁平台">黑客演示 1：微服务自毁平台&lt;/h2>
&lt;p>Jeff 登场。Jeff 开始讲述微服务的故事，我们都在试图让基础架构做到冗余，容所有的服务都冗余，让群集能够自愈；但是故障，断网，宕机还是会发生。我们所做的这些真的能够保证业务不宕机么，服务不终端么？你怎么能确认这一点？因此回归到故障的发生上吧？如果服务要出故障，请让它有规律的发生。请程序猿和 ops 都投入到故障处理的战斗中，以此为契机来优化和改造应用，让应用变的更加强壮。我们都听说过混乱猴子，而 Jeff 团队正式帮人们构建一堆这样的工具的人。&lt;/p>
&lt;p>有一个思路是：如何让我的系统的服务出故障，如何主动的在系统中注入故障。我们需要一种特殊的编排工具来在系统中模拟和触发故障的发生。我用容器做工具平台来触发故障注入的动作。当然这个故障是在容器架构的微服务系统中触发这个动作。&lt;/p>
&lt;p>Jeff 开始做这个  Demo。说：如果你的”网络没有故障，天下太平。“其实这很无聊的说，有木有？有木有？我现在开始用工具来注入 网络延迟的网络故障吧！ 。用一个基于策略的工具。配置一个网络故障模拟的策略，故障什么时间发生，发生多久。这里设计一个每 10 秒钟注入一次网络延迟故障提高到 600ms 的故障。然后配置故障影响的范围，这里使用 Docker 的 lable 来做故障发生节点的选择的条件。符合标签的系统将受到这次故障影响。我们的这个故障模拟编排系统，帮您提前体验故障的发生。现在你看故障发生了，从这些容器里面 ping google 的网络延迟比之前大多了， 目前延迟到了 600ms。希望你们能开始体验和使用这个而工具。&lt;/p>
&lt;h2 id="黑客演示-2serverless-架构的应用不是梦">黑客演示 2：Serverless 架构的应用不是梦&lt;/h2>
&lt;p>Ben 是大家在 Docker 大会喜闻乐见的一个黑客，他经常给做 demo 和 session。他绝对符合超萌的标准。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/40906-1.jpeg"
loading="lazy"
alt="40906 (1)"
>&lt;/p>
&lt;p>Ben 开讲，Serverless 是如何做的？ben 认为 Serverless 是一种全新的应用编程的思路，而 docer 可以很好的支持这种思路，并实现和执行这种思路。docer 群集可以让 Serverless 引用按需执行，并让该应用的底层变得资源冗余并路由可达。ben 开始演示   他的几张 slides， 说 Sererless == docker 这个概念。本开始讲解：如何用 Serverless 架构来实现投票应用的改造。如何把这个 5 个服务模块的纯粹容器微服务系统转换为 serverless 架构的应用。开始修改源代码，把发入队列的票，变成一个处理投票的容，把 http 服务器变成一个 CGIHander（）服务；但是  nodejs  不支持 CGIhander，肿么办？我用 perl 重写了这部分，为毛用 perl，被忘了它乃是古董级的黑客神器的好不好，呵呵！改造完之后的系统架构如下。架构是把处理 postgresql 意外的模块都重写了。数据库保留在最下层。这种 Serverless 重构实践遵从的原则如下。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/2-1.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>三个原则翻译一下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>把每个模块的核心功能打包，并作为容器来运行。解读：这意味着把所有服务模块组重构，把每个服务模块中的核心功能代码作为一个在容器里面跑的对象。这里其实牵扯到很深的业务重构和应用重构，程序猿或将抛弃以前的代码，甚至以前所习惯使用的程序开发堆栈。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>把这些容器用 Docker 的 Swarm 跑起来。解读：docker 原生的 Swarm 编排能力将为您的应用提供，功能的运行，workload 的分布，服务的冗余，服务的路由等等支持；这样的架构能支持到 Serverless 的应用的模型。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>从容器中去运行其它容器。解读：容器编排平台或将不是容器生命起源的唯一起点，容器里面的应用可能可以决定系统中需要滋生出什么样的容器，当然说的是需要实现和运行什么功能的容器。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>好了，目前为止，ben 的心的应用重构完成，还是用 docker-compose up 启动了改造之后的应用。现在看到了这个 serverless 的应用工作正常。&lt;/p>
&lt;p>Ben 说：我们在这 demo 了 serverless  应用的改造的过程，可以看到 docker 是如何支持这种应用架构的。你可以打包 web front 为服务，它自动的在 Swarm 群集上无限延展这个服务。成为分布式计算的架构。还可以打包微服务的其它应用模块为 Serverless 应用架构。欢迎大家 参与到我的 Serverless github 项目中，和我一起互动，把 Serverless 在 docker 上的应用搞起来。&lt;a class="link" href="https://github.com/bfirsh/serverless-docker" target="_blank" rel="noopener"
>https://github.com/bfirsh/serverless-docker&lt;/a>  这里包括了以上演示的应用。&lt;/p>
&lt;h2 id="黑客演示-3在线更新的无人机">黑客演示 3：在线更新的无人机&lt;/h2>
&lt;p>这个团队做 in the air update 无人机实时演示。无人机其实是树莓派加他们的 docker 软件系统。这是一个嵌入式系统的设计。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/3-1.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/4.jpg"
loading="lazy"
alt="4"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/5.jpg"
loading="lazy"
alt="5"
>&lt;/p>
&lt;p>实时新旧系统的切换秘密在这里。新版的容器会先运行起来，新系统用一个队列来接收旧系统的数据，这些数据是新旧系统交接的必要的数据，系统会判断需要多长时间，需要收集那些数据来完成这个交接的过程。直到旧系统到新系统的割接完毕。&lt;/p>
&lt;p>程序猿开始更新 v1 的代码，加入了摄像头实时视频功能。更新提交了 v2 的镜像文件。在下图可以实时的监视到无人机的状态。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.jpg"
loading="lazy"
alt="6"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/1-1.jpg"
loading="lazy"
alt="1"
>&lt;/p>
&lt;p>无人机在在线更新软件中。并没有掉地上哈哈哈！&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.1.jpg"
loading="lazy"
alt="6.1"
>&lt;/p>
&lt;p>右下角是新版本软件的摄像头把大会现场的视频拍摄，并实时传递到控制台的效果。此图上面的那个图，中间凸起震荡的那个块是无人机软件升级实时更新的过程。&lt;/p>
&lt;p>本黑科技演示完毕。&lt;/p>
&lt;h2 id="hackathon-黑客大赛启动">hackathon 黑客大赛启动&lt;/h2>
&lt;p>主此人再次上台启动了黑客大赛。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/7.jpg"
loading="lazy"
alt="7"
>&lt;/p>
&lt;p>为期一个月的 hackathon 正式开始。&lt;/p>
&lt;h2 id="最后看点">最后看点&lt;/h2>
&lt;p>CEO CTO 上台感谢赞助商。所罗门开始讲黑客骚扰现象。号召大家通过&lt;a class="link" href="http://hackharassment.com" target="_blank" rel="noopener"
> http://hackharassment.com&lt;/a> 网站来抵制中现象。&lt;/p>
&lt;p>Bump UP 是通过手环实现的，人们的手环彼此碰撞会在系统中增加一个点数。宣布了碰撞点数最多的前 5 名，感谢他们在本次大会中，积极的和其它人互动和沟通，请他们去领奖。所罗门号召所有现场的人再次相互碰撞手环，系统系统的点数增加到两百万。来解锁 Docker 奖学金基金。很快大家碰撞起来。奖学金解锁。&lt;/p>
&lt;p>感谢进三千名的社区 贡献者，感谢 docker 的员工。所有人发来的自拍形成了一个西雅图拼图。最后大会圆满结束。&lt;/p>
&lt;p>看到最后的才能做最后的评论。这更感觉是一个黑客大会，引入了 docker 对社会的责任感的概念。商业财富越大的人社会责任感应该更多。更像是黑客公司商业成功之后，继续创新，并开始践行自己的社会责任的大会。大会并没有结束，黑客大赛在接下来的一个月里将在全球各地延续。&lt;/p></description></item><item><title>DockerCon 2016 D1 Keynote</title><link>https://martinliu.cn/2016/06/20/dockercon-2016-d1-keynote/</link><pubDate>Mon, 20 Jun 2016 19:30:33 +0000</pubDate><guid>https://martinliu.cn/2016/06/20/dockercon-2016-d1-keynote/</guid><description>&lt;p>看点：开场乌龟引起了喵星人大战，首次有吉祥物开启的科技盛会。 和往常一样 CEO 和 CTO 挑大梁将首日 keynote。 所罗门提出了 Docker 技术发展的三个核心方向和着眼点，并在每个方向上做了新技术发布。 1. 开发者体验提升， 正式发布 Docker for Mac/Windws 2. 编排能力的提升，正式发布 Docker 1.12 ，其中有四项能力提升；这是要废掉所有其他编排器的节奏啊~ 3. 运维体验提升，正式发布 beta.docker.com ；这是和公有云深度结合的产品，分为 AWS 和 Azure 两个模块。 一共有三个实景演示，都没有出现问题，演示很成功。&lt;/p>
&lt;h2 id="现场录音">现场录音&lt;/h2>
&lt;p>点上面的播放键，播放整场录音。请注意中间的数秒钟乃至数十秒的中断是正常，请快进收听。&lt;/p>
&lt;h2 id="开场">开场&lt;/h2>
&lt;p>屏幕上出现了乌龟开始做 demo，运行了一个容器。 猫咪大战，混乱了，猫星人入侵了。猫叫~~乱作一团··· 发生了什么？ dockercon16 吹起了号角。 乌龟再次出现在电脑上，运行了另外一个容器惊喜，这次是美妙的音乐。 调皮的乌龟折腾完了之后，主题曲想起来。4000 多人的场子，大家很期待。&lt;/p>
&lt;h2 id="ceo-ben-golub-演讲">CEO Ben Golub 演讲&lt;/h2>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/2.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>Ben Golub CEO 出场。 Today we are all docker blue. 欢迎所有人。 我们和前两年的不同，我们发布了 1.0 等等。 谈了很多 Docker 取得的成就。 感谢和表扬了社区。 感谢 2900+贡献者。 社区的状态动态，每周超过 300 PR，三分之二来自 Docker 公司之外。 docker meetup 的状况， 250+城市举行，125K 人参加聚会。 内容构建方面，docker hub 上有 460K 个应用，到目前为止有 4.1B 此镜像下载。 感谢 docker 的生态社区。 讲述了这两年的使用场景的变化。Docker 逐渐成为了企业级的应用。 所有穿着红色衣服的起立，他们是 Dockr 公司的员工，感谢他们，请鼓掌。 感谢今年的赞助商。 向 Demo Gods 致敬，给神献上祭品，保证后续的演示顺利。 we pray to the old codes and the new.&lt;/p>
&lt;h2 id="cto-所罗门演讲">CTO 所罗门演讲&lt;/h2>
&lt;p>所罗门出场。 我去，4000 多人在场，我老爸也在家看我视频直播。 很荣欣大家来参加，感谢大家来参会。 谁参加过 DockerCon14？ 我们要开始做很多的 demo 在会议过程中。 最精彩的部分是，我们来自全球各个行业的不同层面，多样性简直是不可思议。原因是：Programming is changing the world. 我们在一起的原因是：Docker 是编程创新的助力工具。 We’re building Docker incrementally, in the open. 最好的工具目前看不是那些软件工具巨人的公司提供的，而是来自社区和群众的创新，是你们指引着我们构建了愈来愈多的工具。 社区告诉我们几个方面需要努力。&lt;/p>
&lt;h3 id="1-开发者体验">1 开发者体验&lt;/h3>
&lt;p>构建最好的工具，这个工具需要有这些特质：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>get out of the way;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>adopt to you；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>make the powerful simple&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>我们努力地践行着这些理念。 Docker for Mac/Windows 将是最无缝的开发者体验。 Making things easy is really hard. 我们在寻找最佳的系统工程师，我们收购了 Unikernel 公司。 在移动游戏行业里面找到最佳的设计者。&lt;/p>
&lt;h3 id="第一个演示--docker-for-mac">第一个演示 – Docker for Mac&lt;/h3>
&lt;p>演示者登台。 我是个开发者，今天第一天上班。 安装了 Docker for Mac 打开这个应用，启动它。 克隆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone viting-app
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-compose up
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开投票应用的两个 web 界面。 我不知道这个应用是什么，但是一个命令就启动了所有 5 个服务。 我发现了程序的 bug。 是否我第一天上班就能修复它？ 分析了一下程序架构图。 查看 docker-compose.yml 文件。 找到了一个 debug 显示的的那一行。 在代码中加入了 live debug 的断点。 开始 review 代码，发现了奇怪的地方。 找到了 git 上的代码，增加了评论，提出源码结果计算方法有问题。 现在删除了有问题的哪一行代码。 删除了断点。 用 live debug 的方式修复代码。 回到程序界面，发现 bug 没了。 做 git commit 提交修正后的代码。 查看了该应用在 staging 环境的情况，发现也有相同的结果计算的问题。 进入该环境的 Docker Cloud 界面，看到了这个运行环境。 查看 result 服务的构建策略是自动构建。 Docker Cloud 自动接收了新的代码，Staging 环境的构建完成并通过了测试脚本，程序正常了。 查看云里的 Staging 环境的 bug 也被除掉了。demo 结束。&lt;/p>
&lt;h3 id="splice-的-cto-matt-案例分享">Splice 的 CTO Matt 案例分享&lt;/h3>
&lt;p>Splice 的 CTO Matt；我们做的是个音乐服务的技术，我们构建的服务像是给音乐人用的 github。 每天都有人上传上很多 TB 的音乐数据。 我们在 Mac 上开发，在 Linux 上部署。 我们使用多种数据存储。 Docker 让我们保持多种环境的一致，降低了 debug 的时间。 所有的程序运行在容器中。 我们一天更新线上的业务 20 多次。 Developer 的第一天工作就能为业务提供价值。 我们使用 Docker for Mac。&lt;/p>
&lt;h3 id="2-orchestration-编排能力">2 Orchestration 编排能力&lt;/h3>
&lt;p>我们听到很多 happy user 的故事。 感谢所有 7 万多 Docker for Mac beta 的反馈参与者。 我宣布 Docker for Mac/Widnwos beta 完全开放下载。 很多人告诉我们需要在 Orchestration 上更加努力。 它在 ship 方面提供支持，能发布你整个的应用，让你不再关心单个的容器。 Orchestration 是个技术活，只有专家才能干。很少人能做这个工作。 可是用户怎么能即不出现手头人才短缺，又不被某些厂商在这方面给技术锁定呢？ 更好的方法是什么？ Docker 1.12 将内置编排功能。 最佳的编排技术将是 Docker 自己。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/3.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>我们先提前介绍一些它的新功能。&lt;/p>
&lt;ul>
&lt;li>Swarm mode&lt;/li>
&lt;li>Cryptographic node identity&lt;/li>
&lt;li>Docker Service API&lt;/li>
&lt;li>Build-in Routing Mesh&lt;/li>
&lt;/ul>
&lt;p>非常简单的演示，你就明白了。 欢迎第三个 编排的演示 Docker 1.12 技术。&lt;/p>
&lt;h3 id="第二个演示--docker-swarm-功能演示">第二个演示 – docker swarm 功能演示&lt;/h3>
&lt;p>两个人上场。 用一个新的机器，上面只安装了 docker。 有三个节点。 第一个节点上初始化群集 docker swarm init 第二个节点上加入群集 docker swarm join 在第三个节点上加入群集 docker swarm join 三节点的群集建立完成。&lt;/p>
&lt;p>为毛它没有让输入任何安全的信息和选项，这就对了，我们有内置的 PKI 安全通讯机制。 所有节点都有自己的身份标识。密钥定期自动变化。所有通讯都可以追述到发起者的身份。&lt;/p>
&lt;p>你们都懂 docker run 子命令。 docker service 命令是新来的子命令。 service 的定义是将要维持服务的状态。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service create --name voting-app -p 5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>所有的服务只启动了一个容器，分布在三个节点上。&lt;/p>
&lt;p>看到投票应用页面显示了。&lt;/p>
&lt;p>浏览器访问了第一个节点的 ip:5000 ，然后第二个节点的 ip:5000 端口，发现实际上访问到了第一个节点上的的容器。这就是新的容器路由的功能。所有的节点访问这个服务的端口，都可以路由到该服务的容器里。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service scale 6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在扩容服务的容器。 每次刷新页面，页面上容器的 ID 都在变，这是群集内置的 round robin 负载均衡策略，把访问分发到所有容器。这就是内置的负载均衡功能。&lt;/p>
&lt;p>我们升级这个 app 吧。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>演示容器镜像文件的更新 选择另外一个 tag 的镜像来升级 现在我们可以对电影投票了&lt;/p>
&lt;p>滚动升级可以支持 加上一次升级 2 个容器的升级选项，因此它现在是做两个一次的服务容器升级，直到所有容器都升级结束。&lt;/p>
&lt;p>我们说的自愈功能是说，能让应用可以在机器宕机的时候，业务也不中断。 请把有两个容器的 node3 关机。 调度器现在自动在 node2 上长出刚才运行在 node3 上的那两个容器。保持 6 个容器的服务配置。&lt;/p>
&lt;p>演示成功，并没有出问题。&lt;/p>
&lt;h3 id="zenly-的创始人案例分享">Zenly 的创始人案例分享&lt;/h3>
&lt;p>所罗门高兴的再次上台。 这说明我们的祭品生效了，演示没有出毛问题。 docker 1.12 在几周后就发布，Docker for Mac beta 版本上现在就有这些功能。你们这些已经安装的现在就可以尝试这些功能。 我们自由的扩容业务应用，而服务速度不受到影响。 在大规模的关键业务中的部署才是目标。我们请 Zenly 的兄弟们上台。&lt;/p>
&lt;p>Zenly 的人喝了两杯祭品的冰咖啡上台了。 我们有 1M 用户，是最近的三个月内获得的。 500M events/day 一共才 6 engineers 我们运行业务在云上。 我们现在把部分业务迁移回自己的物理机。 我们在 10 台物理机上运行部分业务。 部分运行在 GCE 上。 我们感觉按需扩容很爽。&lt;/p>
&lt;h3 id="3-运维体验">3 运维体验&lt;/h3>
&lt;p>我们谈到开发者体验，业务编排。 群众还告诉我们“Ops experience” 运维体验是需要关注第三个侧面。 Docker 应该深度和云基础架构集成。&lt;/p>
&lt;h4 id="betadockercom-发布">beta.docker.com 发布&lt;/h4>
&lt;p>我宣布 beta.docker.com 发布。包括 docker for aws 和 docker for Azure 是最原生的 AWS 和 Azure 体验。是和云基础架构最深的集成。 现在可以用 AWS CloudFormation 来部署 Swarm 群集。 可以自动配置所有的负载均衡端口等配置。&lt;/p>
&lt;h4 id="wwwdockercomdab-发布">&lt;a class="link" href="https://www.docker.com/dab" target="_blank" rel="noopener"
>www.docker.com/dab&lt;/a> 发布&lt;/h4>
&lt;p>&lt;a class="link" href="https://www.docker.com/dab" target="_blank" rel="noopener"
>www.docker.com/dab&lt;/a> 是新的可移植多容器应用打包格式。 这是新的 ops 体验。是让 developer 和 Ops 更容易工作在一起的方案。&lt;/p>
&lt;h3 id="第三个演示--云运维体验">第三个演示 – 云运维体验&lt;/h3>
&lt;p>Developer：我想赶紧回家。我还需要赶紧交货。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker compose bundle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>产生了一个.dab 文件，齐活了。 把应用的 .dab 文件给 Ops 即可。 Ops：你的应用是 docker 的么？ 额的个神啊！ 我喜欢在 AWS 上用 Docker。 看我新建 Stack 的 AWS 向导，这里可以配置了一个新的 docker swarm 群集。 看我这有一个已经部署了 100 节点的群集。 所有网络、存储、负载均衡都不用手动配置。 复制 这个网址。 在 Mac 电脑的 shell 粘贴 ，后点击回车。 我们进入了命令行 docker for aws 的特殊的 shell 我能看的所有群集和主机的状态 把你的 .dab 文件给我，就欧了~ 用 USB copy 给你。 把文件 copy 给了 Ops scp .dab 文件到 swarm 群集中。 在进入 shell ls 能看的这个文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker deploy voting-app xxx.dab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>看这些所有服务都运行了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service update -p 80:80 voting-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service update -p 8080:8080 result-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service scale
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>扩容这些服务的容器数量 打开浏览器确认应用部署结果，找到 ELB 的配置，配置已经自动生成了。 浏览器中访问 ELB 的 80 端口上看的投票页面 在 ELB 的 8080 端口看的结果页面 这下应用部署完毕。 原来你的 Ops 工作怎么这么简单啊！！ I got go home ~~~&lt;/p>
&lt;h2 id="结束">结束&lt;/h2>
&lt;p>所罗门感谢大家，所请访问 docker.com/getdocker 有需要的尽管说。 请在这几天内，尽量多的告诉我们，你们的需求和使用场景。 请告诉我们 what we build next ! thank you very much ！！&lt;/p>
&lt;h2 id="注意">注意&lt;/h2>
&lt;p>我是 Maritn Liu 为您播报本次大会的各种信息，对以上内容有任何问题和疑问请加我微信咨询，我的微信号是 martinliu_cn ，这篇文章也会在我的微信公众号（aws-faq）和 ”刀客微播报“上发布。以上会议记录中所有命令的操作并不是准确的演示者输入，尽量参考这些命令来想想其可能的参数和语法，如果你安装了最新版本的 Docker for Mac 可以自己试一下。&lt;/p></description></item><item><title>Atomic Host 原子主机最简测试</title><link>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</link><pubDate>Sat, 18 Jul 2015 13:29:45 +0000</pubDate><guid>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</guid><description>&lt;h2 id="环境准备">环境准备&lt;/h2>
&lt;p>本文使用笔记本电脑+KVM 虚拟化进行以下的测试过程，当然也可以用其它的操作系统加虚拟化软件的组合，测试机需要满足以下的条件：
测试虚拟机的建议配置 1C/2GB/10GB
虚拟机使用的网络需要能连接到互联网
虚拟机需要能加载光盘 iso 文件
可以执行起停虚拟机操作，能通过控制它登陆来做初始化配置&lt;/p>
&lt;p>本文测试机是 Lenovo T440s 笔记本电脑，安装的操作系统是 Fedora 22，使用 KVM 虚拟化，用 Virt-Manager 做 GUI 图形管理工具。建立了一个 NAT 的静态虚拟网络，虚拟机可以使用该网络来从互联网下载需要的文件包。&lt;/p>
&lt;p>下载 Fedora Atomic Host 虚拟机文件；下载页面： &lt;a class="link" href="http://www.projectatomic.io/download/" target="_blank" rel="noopener"
>http://www.projectatomic.io/download/&lt;/a> 点击绿色的下载按钮。下载 qcow2 格式的 Atomic Host 虚拟机文件。复制下载的文件到虚拟机运行的存储目录中，文件名可以是 master.qcow2，新测试虚拟机会基于它创建。&lt;/p>
&lt;p>在通过这个虚拟机模版文件生成测试机前，需要准备一个 init.iso 的文件，用来初始化测试机的主机名和初始用户密码。&lt;/p>
&lt;p>[bash]
[root@martin-fedora vm]# cat meta-data
instance-id: master
local-hostname: master.xenlab.com
[root@martin-fedora vm]# cat user-data
#cloud-config
password: smartvm
ssh_pwauth: True
chpasswd: { expire: False }
[root@martin-fedora vm]# genisoimage -output init.iso -volid cidata -joliet -rock user-data meta-data
I: -input-charset not specified, using utf-8 (detected in locale settings)
Total translation table size: 0
Total rockridge attributes bytes: 331
Total directory bytes: 0
Path table size(bytes): 10
Max brk space used 0
183 extents written (0 MB)
[/bash]&lt;/p>
&lt;p>以上的两个配置文件 meta-data 和 user-data，最后使用 genisoimage 命令生成出文件 init.iso。至此，Atomic Host 测试机的运行镜像文件和初始化配置文件都准备好了。&lt;/p>
&lt;h2 id="创建-atomic-host-测试虚拟机">创建 Atomic host 测试虚拟机&lt;/h2>
&lt;p>使用虚拟化的管理工具基于准备好的镜像文件（master.qcow2）创建测新的试虚拟机。在首次启动前，还需要添加光驱设备，指定光驱设备在启动时加载上文中创建的 init.iso 配置参数文件。
首次在虚拟管理工具上启动新创建的 Atomic Host 测试虚拟机，查看整个的启动过程。由于本文的测试网络不是 DHCP 的，因此测试机在启动后，还需要登陆虚拟机控制台，使用默认账户，用户名：fedora 用户，fedora 的密码在前面的配置文件中已经指定。静态 IP 地址参考的配置文件如下：&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=&amp;ldquo;eth0&amp;rdquo;
BOOTPROTO=&amp;ldquo;static&amp;rdquo;
ONBOOT=&amp;ldquo;yes&amp;rdquo;
TYPE=&amp;ldquo;Ethernet&amp;rdquo;
PERSISTENT_DHCLIENT=&amp;ldquo;yes&amp;rdquo;
IPADDR=192.168.10.42
NETMASK=255.255.255.0
BROADCAST=192.168.10.255
NETWORK=192.168.10.0
GATEWAY=192.168.10.1&lt;/p>
&lt;p>[fedora@master ~]$ cat /etc/resolv.conf&lt;/p>
&lt;h1 id="generated-by-networkmanager">Generated by NetworkManager&lt;/h1>
&lt;p>search xenlab.com
nameserver 192.168.10.1
nameserver 8.8.8.8
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>至此，Atomic Host 测试虚拟机初始化安装完毕。&lt;/p>
&lt;h2 id="atomic-host-基本操作">Atomic Host 基本操作&lt;/h2>
&lt;p>登陆 Atomic Host 测试虚拟机 master 之后首先需要测试是否能和互联网连接，ping 外部的网址，看是否能够正常解析。由于后面很多相关测试都需要从联网下载内容。
用 ssh 工具登陆之后，看下它：
[bash]
[fedora@master ~]$ cat /etc/redhat-release
Fedora release 22 (Twenty Two)
[fedora@master ~]$ uname -a
Linux master.xenlab.com 4.0.4-301.fc22.x86_64 #1 SMP Thu May 21 13:10:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[fedora@master ~]$ dnf
bash: dnf: command not found
[fedora@master ~]$ yum
bash: yum: command not found
[/bash]&lt;/p>
&lt;p>根据以上显示发现它貌似就是一个 Fedora 22 的服务器，不过默认没有 dnf, yum 包管理工具，不过有 rpm。查询一下这个系统上有什么默认安装的软件包：根据 rpm -qa 结果显示，Atomic Host 虚拟机默认安装了 324 个软件包。下面初步尝试一下 Atomic Host 操作系统更新和管理的主要命令 atomic / rpm-ostree&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic
usage: atomic [-h] {host,info,install,run,uninstall,update} &amp;hellip;&lt;/p>
&lt;p>Atomic Management Tool&lt;/p>
&lt;p>positional arguments:
{host,info,install,run,uninstall,update}
commands
host execute Atomic host commands
info display label information about an image
install execute container image install method
run execute container image run method
uninstall execute container image uninstall method
update pull latest container image from repository&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$ sudo rpm-ostree
Usage:
rpm-ostree [OPTION&amp;hellip;] COMMAND&lt;/p>
&lt;p>Builtin Commands:
compose
upgrade
rebase
rollback
status
db&lt;/p>
&lt;p>Help Options:
-h, &amp;ndash;help Show help options&lt;/p>
&lt;p>Application Options:
&amp;ndash;version Print version information and exit&lt;/p>
&lt;p>error: No command specified&lt;/p>
&lt;p>[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[fedora@master ~]$ sudo rpm-ostree status
[fedora@master ~]$ sudo atomic host
usage: atomic host [-h] {rollback,status,upgrade} &amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>positional arguments:
{rollback,status,upgrade}
host commands
rollback switch to alternate tree at boot
status list information about all deployments
upgrade upgrade to the latest Atomic tree if one is available&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>下面使用 atomic host upgrade 来升级这个系统，使它运行在最新的补丁和版本下。这个过程需要下载 180+MB 的升级包，这个过程无法断点续传，但是可以任意中断。再次运行该命令后，可以重新从头下载，直到下载成功。下载成功并升级成功以后，重起操作系统。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host upgrade
Updating from: fedora-atomic:fedora-atomic/f22/x86_64/docker-host&lt;/p>
&lt;p>0 metadata, 5051 content objects fetched; 183267 KiB transferred in 330 seconds
Copying /etc changes: 25 modified, 0 removed, 41 added
Transaction complete; bootconfig swap: yes deployment count change: 1
Changed:
avahi-autoipd-0.6.31-31.fc22.x86_64
avahi-libs-0.6.31-31.fc22.x86_64
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
tcpdump-14:4.7.4-2.fc22.x86_64
tzdata-2015e-1.fc22.noarch
udisks2-2.1.6-1.fc22.x86_64
Removed:
docker-storage-setup-0.0.4-2.fc22.noarch
pciutils-libs-3.3.0-1.fc22.x86_64
Added:
docker-selinux-1.7.0-6.git74e7a7a.fc22.x86_64
iptables-services-1.4.21-14.fc22.x86_64
kubernetes-master-0.20.0-0.3.git835eded.fc22.x86_64
kubernetes-node-0.20.0-0.3.git835eded.fc22.x86_64
python-pip-6.0.8-1.fc22.noarch
python-setuptools-17.1.1-3.fc22.noarch
Upgrade prepared for next boot; run &amp;ldquo;systemctl reboot&amp;rdquo; to start a reboot
[/bash]&lt;/p>
&lt;p>在 reboot 之后，这个系统就可以投入使用了。在启动的 GRUB 菜单上可以看到出现两个条目，默认进入最新的这个系统版本。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-07-15 23:33:20 22.61 db540a53ba fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[/bash]&lt;/li>
&lt;/ul>
&lt;p>进入系统之后，我们看到上面这个命令输出，目前 Atomic Host 的操作系统有了两个版本，该系统可以从最新的系统回退或者回滚到旧的版本。可以认为它同时具有多个可以前后切换的操作系统版本。&lt;/p>
&lt;p>在一个 Atomic Host 上有两种软件交付方式：
rpm-ostree 管理部署和升级 host 系统自身的软件
Linux 容器（目前 Docker）提供很多容器来跑各种软件应用服务&lt;/p>
&lt;h2 id="运行第一个-docker-镜像">运行第一个 Docker 镜像&lt;/h2>
&lt;p>现在测试的是 Atomic Host 自身的管理工具，传统的 Linux 系统中，这个软件是用 rpm 包和系统服务的方式，被安装到被管理节点的，可是我们下面使用容器的技术来部署，也达到相同的管理功能。Cockpit 是之前介绍过的一款系统管理工具，兼具对 docker 的管理功能，它可以 Docker image 的形式被下载，并且运行在本机的一个专有权限（提权）的容器中。它可以作为 Atomic Host 的主机管理工具，对 Linix 系统管理不熟练的人可以使用这个图形工具，查看和监控系统的状态，并且可以管理容器中 Image。下面是安装和运行这个特殊功能容器的命令。&lt;/p>
&lt;p>[bash]
[fedora@a1 etc]$ sudo atomic run cockpit/ws
/usr/bin/docker run -d &amp;ndash;privileged &amp;ndash;pid=host -v /:/host cockpit/ws /container/atomic-run &amp;ndash;local-ssh
efd3cbbad8452ff394e1d1a0c309870634207538597ba0cead26d790510e7a5e
[/bash]&lt;/p>
&lt;p>上面这条命令执行完后，就可以在笔记本电脑的浏览器，输入网址，来访问这个工具，如： https://192.168.10.41:9090 登陆的用户名和密码是 Atomic Host 的 fedora 和它的密码。&lt;/p>
&lt;h2 id="hw-实战篇">HW 实战篇&lt;/h2>
&lt;p>不错 HW 就是 Hello World！它太有名了，掠过对它的介绍。现在可以让 docker 命令出场了。在命令行中不加任何参数，看下它的默认输出。输出一下它的版本信息。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker version
Client version: 1.7.0.fc22
Client API version: 1.19
Package Version (client): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (client): go1.4.2
Git commit (client): 74e7a7a/1.7.0
OS/Arch (client): linux/amd64
Server version: 1.7.0.fc22
Server API version: 1.19
Package Version (server): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (server): go1.4.2
Git commit (server): 74e7a7a/1.7.0
OS/Arch (server): linux/amd64
[/bash]&lt;/p>
&lt;p>下面的实战内容是和过程如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>下载 fedora image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 httpd image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 HW 主页&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建并测试 HW 网站&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>具体的命令执行过程如下：&lt;/p>
&lt;h1 id="dependencies-resolved">[bash]
[fedora@master ~]$ sudo docker run -i -t fedora bash
Unable to find image &amp;lsquo;fedora:latest&amp;rsquo; locally
latest: Pulling from docker.io/fedora
ded7cd95e059: Already exists
48ecf305d2cf: Already exists
docker.io/fedora:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.
Digest: sha256:10ba981a70632d7764c21deae25c6521db6d39730e1dd8caff90719013858a7b
Status: Downloaded newer image for docker.io/fedora:latest
[root@f1c79aa4c931 /]# dnf update -y
Fedora 22 - x86_64 608 kB/s | 41 MB 01:09
Fedora 22 - x86_64 - Updates 439 kB/s | 12 MB 00:27
Last metadata expiration check performed 0:00:19 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.&lt;/h1>
&lt;h1 id="package-arch-version-repository-size">Package Arch Version Repository Size&lt;/h1>
&lt;p>Installing:
python-pip noarch 6.0.8-1.fc22 fedora 1.7 M
python-setuptools noarch 17.1.1-3.fc22 updates 425 k
Upgrading:
bash x86_64 4.3.39-4.fc22 updates 1.6 M&lt;/p>
&lt;p>&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.&lt;/p>
&lt;h1 id="transaction-summary">Transaction Summary&lt;/h1>
&lt;p>Install 2 Packages
Upgrade 59 Packages
Total download size: 48 M
Downloading Packages:
(1/61): python-pip-6.0.8-1.fc22.noarch.rpm 434 kB/s | 1.7 MB 00:03
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
Installed:
python-pip.noarch 6.0.8-1.fc22 python-setuptools.noarch 17.1.1-3.fc22&lt;/p>
&lt;p>Upgraded:
bash.x86_64 4.3.39-4.fc22 bash-completion.noarch 1:2.1-7.20150513git1950590.fc22
coreutils.x86_64 8.23-10.fc22 curl.x86_64 7.40.0-5.fc22
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..
systemd.x86_64 219-19.fc22 systemd-libs.x86_64 219-19.fc22
tzdata.noarch 2015e-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]#
[/bash]
上面的过程下载和启动了一个 fedora，然后更新系统到最新的包，为安装 Web 服务器打好了基础。&lt;/p>
&lt;h1 id="dependencies-resolved-1">[bash]
[root@f1c79aa4c931 /]# dnf install -y &lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
Last metadata expiration check performed 0:06:11 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.&lt;/h1>
&lt;h1 id="package-arch-version-repository-size-1">Package Arch Version Repository Size&lt;/h1>
&lt;p>Installing:
apr x86_64 1.5.1-3.fc22 fedora 111 k
apr-util x86_64 1.5.4-1.fc22 fedora 96 k
fedora-logos-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> noarch 22.0.0-1.fc22 fedora 33 k
&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> x86_64 2.4.12-1.fc22 fedora 1.2 M
&lt;a class="link" href="httpd-filesystem" target="_blank" rel="noopener"
>httpd-filesystem&lt;/a> noarch 2.4.12-1.fc22 fedora 24 k
&lt;a class="link" href="httpd-tools" target="_blank" rel="noopener"
>httpd-tools&lt;/a> x86_64 2.4.12-1.fc22 fedora 87 k
mailcap noarch 2.1.44-1.fc22 fedora 36 k&lt;/p>
&lt;h1 id="transaction-summary-1">Transaction Summary&lt;/h1>
&lt;p>Install 7 Packages&lt;/p>
&lt;p>Total download size: 1.6 M
Installed size: 4.4 M
Downloading Packages:
(1/7): apr-1.5.1-3.fc22.x86_64.rpm 128 kB/s | 111 kB 00:00
(2/7): apr-util-1.5.4-1.fc22.x86_64.rpm 100 kB/s | 96 kB 00:00
(3/7): &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch.rpm&lt;/a> 123 kB/s | 24 kB 00:00
(4/7): mailcap-2.1.44-1.fc22.noarch.rpm 123 kB/s | 36 kB 00:00
(5/7): &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64.rpm&lt;/a> 185 kB/s | 87 kB 00:00
(6/7): fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch.rpm&lt;/a> 151 kB/s | 33 kB 00:00
(7/7): &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64.rpm&lt;/a> 363 kB/s | 1.2 MB 00:03&lt;/p>
&lt;hr>
&lt;p>Total 264 kB/s | 1.6 MB 00:06
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
Installing : apr-1.5.1-3.fc22.x86_64 1/7
warning: Unable to get systemd shutdown inhibition lock
Installing : apr-util-1.5.4-1.fc22.x86_64 2/7
Installing : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 3/7
Installing : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 4/7
Installing : mailcap-2.1.44-1.fc22.noarch 5/7
Installing : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 6/7
Installing : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 7/7
Verifying : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 1/7
Verifying : apr-1.5.1-3.fc22.x86_64 2/7
Verifying : apr-util-1.5.4-1.fc22.x86_64 3/7
Verifying : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 4/7
Verifying : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 5/7
Verifying : mailcap-2.1.44-1.fc22.noarch 6/7
Verifying : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 7/7&lt;/p>
&lt;p>Installed:
apr.x86_64 1.5.1-3.fc22 apr-util.x86_64 1.5.4-1.fc22 fedora-logos-&lt;a class="link" href="httpd.noarch" target="_blank" rel="noopener"
>httpd.noarch&lt;/a> 22.0.0-1.fc22 &lt;a class="link" href="httpd.x86_64" target="_blank" rel="noopener"
>httpd.x86_64&lt;/a> 2.4.12-1.fc22
&lt;a class="link" href="httpd-filesystem.noarch" target="_blank" rel="noopener"
>httpd-filesystem.noarch&lt;/a> 2.4.12-1.fc22 &lt;a class="link" href="httpd-tools.x86_64" target="_blank" rel="noopener"
>httpd-tools.x86_64&lt;/a> 2.4.12-1.fc22 mailcap.noarch 2.1.44-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]# exit
exit
[fedora@master ~]$
[/bash]
上面在一个互动的 Bash 里面完成了 httpd 的安装，exit 命令之后，容器会停止运行，可以把这个停下来的镜像文件用下面的命令提交到本地的 image 库中。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker ps -a
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
f1c79aa4c931 fedora &amp;ldquo;bash&amp;rdquo; 17 minutes ago Exited (130) 3 minutes ago desperate_franklin
[fedora@master ~]$ sudo docker commit f1c79aa4c931 fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
c77c91fd4af681e736afc2ec76fc316732e25f52f6f3dd8aa97c973f28c55eb2
[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 25 seconds ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB
[/bash]&lt;/p>
&lt;p>第一个名为 “fedora-httpd” 的就是刚才安装完毕之后，停止的 docker image，用 commit 提交到本第的库中待用。下面开始准备网站的内容，其实只有一个主页，上只有一句话“HW”&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ pwd
/home/fedora
[fedora@master ~]$ vi index.html
[fedora@master ~]$ cat index.html
Hello World!
[fedora@master ~]$ tar -cf mysite.tar index.html
[fedora@a1 ~]$ ls
Dockerfile index.html mysite mysite.tar
[fedora@master ~]$ vi Dockerfile
[fedora@master ~]$ cat Dockerfile
FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
MAINTAINER MartinLiu&lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>&lt;/p>
&lt;h1 id="add-the-tar-file-of-the-web-site">Add the tar file of the web site&lt;/h1>
&lt;p>ADD mysite.tar /tmp/&lt;/p>
&lt;h1 id="docker-automatically-extracted-so-move-files-to-web-directory">Docker automatically extracted. So move files to web directory&lt;/h1>
&lt;p>RUN cp /tmp/index.html /var/www/html&lt;/p>
&lt;p>EXPOSE 80&lt;/p>
&lt;p>ENTRYPOINT [ &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&amp;rdquo;&lt;/a> ]
CMD [ &amp;ldquo;-D&amp;rdquo;, &amp;ldquo;FOREGROUND&amp;rdquo; ]
[/bash]&lt;/p>
&lt;p>上面这段命令中最重要的是 Dockerfiler 文件，这个文件的语法还有很多，以上是一个最简化的例子。使用它可构建一个具有静态页面内容的网站。下面开始构建这个网站的 Docker image。&lt;/p>
&lt;p>[bash]
[fedora@a1 ~]$ sudo docker build -rm -t mysite .
Warning: &amp;lsquo;-rm&amp;rsquo; is deprecated, it will be replaced by &amp;lsquo;&amp;ndash;rm&amp;rsquo; soon. See usage.
Sending build context to Docker daemon 31.74 kB
Sending build context to Docker daemon
Step 0 : FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; 05ce6f68d3f2
Step 1 : MAINTAINER A D Ministator email: &lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>
&amp;mdash;&amp;gt; Running in 7ee99e26ab76
&amp;mdash;&amp;gt; 03cc8c0deff1
Removing intermediate container 7ee99e26ab76
Step 2 : ADD mysite.tar /tmp/
&amp;mdash;&amp;gt; 52abfb1966ad
Removing intermediate container e6c20f7ca5ed
Step 3 : RUN mv /tmp/* /var/www/html
&amp;mdash;&amp;gt; Running in ef455353caff
&amp;mdash;&amp;gt; 6e24f9a9ea6f
Removing intermediate container ef455353caff
Step 4 : EXPOSE 80
&amp;mdash;&amp;gt; Running in 252b59576b54
&amp;mdash;&amp;gt; 7dd7c049c9d2
Removing intermediate container 252b59576b54
Step 5 : ENTRYPOINT /usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; Running in 572c3dafa53a
&amp;mdash;&amp;gt; fa01c160e081
Removing intermediate container 572c3dafa53a
Step 6 : CMD -D FOREGROUND
&amp;mdash;&amp;gt; Running in b133650a6e18
&amp;mdash;&amp;gt; f828e1847160
Removing intermediate container b133650a6e18
Successfully built f828e1847160&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
mysite latest 1bd6d7c1970f 45 seconds ago 605.7 MB
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 18 minutes ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker run -d -P mysite
6122ac7d4dff6cc73c4abc1523ac5dd02606c90d4e42da64823942d787694c1f
[fedora@master ~]$ sudo docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
6122ac7d4dff mysite &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> -D 37 seconds ago Up 35 seconds 0.0.0.0:32768-&amp;gt;80/tcp evil_bardeen
e5032443ab69 cockpit/ws &amp;ldquo;/container/atomic-r 16 minutes ago Up 16 minutes stoic_sammet
[fedora@master ~]$ curl localhost:32768
Hello World!
[/bash]&lt;/p>
&lt;p>在最后的命令行输出中，成功的看到了 Hello World!的出现。用的是 curl 的命令行 web 浏览器。&lt;/p></description></item><item><title>红帽媒体日</title><link>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</link><pubDate>Tue, 14 Jul 2015 14:20:24 +0000</pubDate><guid>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</guid><description>&lt;p>本次演讲用了大约 25 分钟，超时了大约 5 分钟多，但是其中有些观点还是没有叙述的很倒位。只能算是我的一种理解和解读，希望对道场的媒体朋友们对认识红帽公司有帮助。&lt;/p>
&lt;p>演讲源版 slide 和录音在这个网页上： &lt;a class="link" href="http://investors.redhat.com/events.cfm" target="_blank" rel="noopener"
>http://investors.redhat.com/events.cfm&lt;/a> 的这部分：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Jun 24, 2015&lt;/p>
&lt;p>10:30 AM - 1:00 PM ET&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Red Hat Analyst Day&lt;/p>
&lt;p>&lt;a class="link" href="http://edge.media-server.com/m/p/mhayc7rh" target="_blank" rel="noopener"
> Listen to webcast &lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/common/download/download.cfm?companyid=RHAT&amp;amp;fileid=838366&amp;amp;filekey=633328A1-EAD6-471D-9934-C43F4CDC5666&amp;amp;filename=RH_Summit_Analyst_Day_FINAL.pdf" target="_blank" rel="noopener"
>View Presentation&lt;/a>&lt;/p>
&lt;p>12.2 MB&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/events.cfm#" target="_blank" rel="noopener"
>Add to Briefcase&lt;/a>&lt;/p>
&lt;p>View Additional Information&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>如何参与 Project Atomic</title><link>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</link><pubDate>Thu, 19 Mar 2015 03:23:37 +0000</pubDate><guid>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</guid><description>&lt;h2 id="关于-project-atomic-项目">关于 Project Atomic 项目&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/secure-containers.png"
loading="lazy"
alt="secure-containers"
>&lt;/a>&lt;/p>
&lt;p>Project Atomic 项目相关的开源技术组件如下：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://kernel.org/" target="_blank" rel="noopener"
>linux kernel&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/" target="_blank" rel="noopener"
>systemd&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://wiki.gnome.org/Projects/OSTree" target="_blank" rel="noopener"
>OSTree&lt;/a> and &lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>rpm-ostree&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.docker.io/" target="_blank" rel="noopener"
>Docker&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/GoogleCloudPlatform/kubernetes" target="_blank" rel="noopener"
>kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>Fedora&lt;/a> and &lt;a class="link" href="http://wiki.centos.org/Cloud" target="_blank" rel="noopener"
>CentOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;p>该项目的网站在： &lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>http://www.projectatomic.io/&lt;/a>&lt;/p>
&lt;h2 id="加入-project-atomic-邮件列表">加入 Project Atomic   邮件列表&lt;/h2>
&lt;p>项目一般性讨论： &lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic&lt;/a>&lt;/p>
&lt;p>项目开发者：&lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic-devel" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic-devel&lt;/a>&lt;/p>
&lt;p>项目版本发布更新：https://lists.projectatomic.io/mailman/listinfo/atomic-announce&lt;/p>
&lt;p>填写自己的邮箱后，别忘了在邮箱里收信，并且确认。如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg"
loading="lazy"
alt="atomic-dev-mail-list"
>&lt;/a>&lt;/p>
&lt;h2 id="问-project-atomic-问题和讨论">问   Project Atomic 问题和讨论&lt;/h2>
&lt;p>&lt;a class="link" href="http://ask.projectatomic.io/en/questions/" target="_blank" rel="noopener"
>http://ask.projectatomic.io/en/questions/  这里是&lt;/a>项目的论坛可以在这里提问和帮助其他人。&lt;/p>
&lt;h2 id="了解-project-atomic-代码">了解  Project Atomic 代码&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/projectatomic/" target="_blank" rel="noopener"
>https://github.com/projectatomic/&lt;/a> 项目的代码在 Github 网站上可以看到，如果你 watch 这个项目的话，可以收到所有开发者对该项目的所有代码更新等活动。&lt;/p></description></item><item><title>Workshop: Creating a Docker management environment</title><link>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</link><pubDate>Thu, 04 Dec 2014 02:46:04 +0000</pubDate><guid>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</guid><description>&lt;p>Red Hat APAC Tech Exchange, Macau&lt;/p>
&lt;p>Day 3 - 4 December 2014   &amp;ndash;  Track C&lt;/p>
&lt;h2 id="command-to-run">Command to Run&lt;/h2>
&lt;p>bash &amp;lt;(curl -sSL &lt;a class="link" href="https://bit.ly/get-fabric8" target="_blank" rel="noopener"
>https://bit.ly/get-fabric8&lt;/a>) -k&lt;/p>
&lt;h2 id="document-to-read">Document to read&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.docker.com/installation/" target="_blank" rel="noopener"
>https://docs.docker.com/installation/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://fabric8.io/v2/index.html" target="_blank" rel="noopener"
>http://fabric8.io/v2/index.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/fabric8io/quickstarts" target="_blank" rel="noopener"
>https://github.com/fabric8io/quickstarts&lt;/a>&lt;/p>
&lt;p>My document: &lt;a class="link" href="https://access.redhat.com/articles/881893" target="_blank" rel="noopener"
>https://access.redhat.com/articles/881893&lt;/a>&lt;/p>
&lt;h2 id="blogs">Blogs&lt;/h2>
&lt;p>&lt;a class="link" href="http://rawlingsj.blogspot.com/" target="_blank" rel="noopener"
>http://rawlingsj.blogspot.com/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://macstrac.blogspot.co.uk/" target="_blank" rel="noopener"
>http://macstrac.blogspot.co.uk/&lt;/a>&lt;/p></description></item></channel></rss>
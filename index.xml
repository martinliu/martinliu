<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Martin Liu's Blog</title><link>https://martinliu.cn/</link><description>Recent content on Martin Liu's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 21 May 2023 10:21:15 +0800</lastBuildDate><atom:link href="https://martinliu.cn/index.xml" rel="self" type="application/rss+xml"/><item><title>如何在 Azure 中使用 Red Hat 的开发者订阅</title><link>https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/</link><pubDate>Sun, 21 May 2023 10:21:15 +0800</pubDate><guid>https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/</guid><description>&lt;img src="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/virtual-machine.png" alt="Featured image of post 如何在 Azure 中使用 Red Hat 的开发者订阅" />&lt;p>如果你是红帽开源软件的个人开发者（用户），你可以通过“红帽开发者计划”实现访问、下载和使用红帽全系列产品的福利。&lt;/p>
&lt;p>红帽开发者会员的好处是可以免费获得广泛的资料库，包括：&lt;/p>
&lt;ul>
&lt;li>所有红帽软件 （含所有产品及时的更新）&lt;/li>
&lt;li>开发者资源 (technical articles, e-books, cheat sheets, and more)&lt;/li>
&lt;li>Interactive tutorials on the latest technology and Red Hat products&lt;/li>
&lt;li>Free in-person and virtual events with Developer experts&lt;/li>
&lt;li>Free Developer Sandbox to build your apps&lt;/li>
&lt;/ul>
&lt;p>会员资格包括访问：&lt;/p>
&lt;ul>
&lt;li>Red Hat 所有和刹那品，包括 Red Hat Enterprise Linux, OpenShift 和 Ansible 等等&lt;/li>
&lt;li>Red Hat Customer Portal 客户门户的访问权限&lt;/li>
&lt;/ul>
&lt;p>重要资源：&lt;/p>
&lt;ul>
&lt;li>开发者计划介绍：&lt;a class="link" href="https://developers.redhat.com/about" target="_blank" rel="noopener"
>https://developers.redhat.com/about&lt;/a>&lt;/li>
&lt;li>无费用的 Red Hat Enterprise Linux 个人开发者订阅的常见问题：&lt;a class="link" href="https://developers.redhat.com/articles/faqs-no-cost-red-hat-enterprise-linux#" target="_blank" rel="noopener"
>https://developers.redhat.com/articles/faqs-no-cost-red-hat-enterprise-linux#&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="red-hat-提供开发者订阅">Red Hat 提供开发者订阅&lt;/h2>
&lt;ul>
&lt;li>Red Hat Enterprise Linux 个人开发者订阅的数量为16个RHEL操作系统实例。&lt;/li>
&lt;li>需要在使用开发者订阅的操作系统上联网激活订阅&lt;/li>
&lt;li>激活的账号和密码与开发者门户的账号相同。&lt;/li>
&lt;li>在 Red Hat 客户门户网站上，你可以管理和续订开发者订阅。&lt;/li>
&lt;/ul>
&lt;p>下图是在客户门户网站上查看当前订阅使用状况的界面。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub.jpg"
width="1133"
height="829"
srcset="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub_hu22f1d1f853b0ccef01f631da13cd884f_104668_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub_hu22f1d1f853b0ccef01f631da13cd884f_104668_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt=" Red Hat 客户门户网站"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="328px"
>&lt;/p>
&lt;p>如果你所使用的公有云里有Red Hat官方支持的 RHEL 镜像，你可以将你的开发者订阅使用在公有云的虚拟机上。在Cloud Access这个页面上，可以看到我将微软的Azure账户和红帽开发者订阅做了关联。&lt;/p>
&lt;p>这样就可以实现：有限数量的 Azure 虚拟机可以运行最新版的 RHEL 操作系统，这些操作系统的 License 计费到了 Red Hat 开发者订阅上；而开发者订阅又是有限免费的，因此实现了这些虚拟机的免费使用 RHEL 订阅。由于我在 Azure 中的长运行虚拟机并不多，因此这些虚拟机目前都是使用的 Red Hat Enterprise Linux。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub-cloud-access.jpg"
width="1123"
height="847"
srcset="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub-cloud-access_hu6cd32d2f701013b0c0c0b19f37b602ed_117864_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/red-hat-dev-sub-cloud-access_hu6cd32d2f701013b0c0c0b19f37b602ed_117864_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Red Hat 客户门户中的 Cloud Access 管理"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="318px"
>&lt;/p>
&lt;h2 id="azure-支持-ahb-的混合权益">Azure 支持 AHB 的混合权益&lt;/h2>
&lt;p>参考这篇 Azure 的官方文档&lt;a class="link" href="https://learn.microsoft.com/zh-cn/azure/virtual-machines/linux/azure-hybrid-benefit-linux?tabs=rhelpayg%2Crhelbyos%2CrhelEnablebyos%2Crhelcompliance" target="_blank" rel="noopener"
>《Red Hat Enterprise Linux (RHEL) 和 SUSE Linux Enterprise Server (SLES) 虚拟机的Azure 混合权益》&lt;/a>&lt;/p>
&lt;p>Azure 提供的 AHB（Azure Hybrid Benefit）使用中携带你自己的订阅到公有云里使用的方式。如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-hybrid-benefit-compare.png"
width="1228"
height="761"
srcset="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-hybrid-benefit-compare_huffbb9cddff8d3a6c27d9db5cdfdff72e_49263_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-hybrid-benefit-compare_huffbb9cddff8d3a6c27d9db5cdfdff72e_49263_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="即用即付”(PAYG) 和“自带订阅”(BYOS)"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>右侧的这个框的说明了 Azure 虚拟机的成本结构。除了计算资源这部分需要计费意外。如果你在 Azure 中开启了 RHEL 虚拟机实例，默认情况下 RHEL 的许可证费用是有 Azure 代收的，Azure 的账单里包含了这部分。&lt;/p>
&lt;p>对于我在 Azrue 中的长运行虚拟机来说，经过我的配置之后，Azure 的账号和 RedHat 开发者订阅关联在了一起。所以这些 RHEL 虚拟机实例上的 RHEL 许可证费用就是在 RedHat 客户门户账号（来自于红帽开发者计划福利）中计费，最多支持 16 个虚拟机的免费使用。&lt;/p>
&lt;h2 id="如何在-azure-中配置个人公司的-rhel-订阅">如何在 Azure 中配置个人（公司）的 RHEL 订阅&lt;/h2>
&lt;p>如下图所示，在创建 Azure 的虚拟机的时候，选择 Red Hat Enterprise Linux 模板。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-rhel-sub.jpg"
width="926"
height="1326"
srcset="https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-rhel-sub_hu3db0849532df8bc50a0e5fb478dcbedf_183313_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/use-rhel-dev-sub-in-azure/azure-rhel-sub_hu3db0849532df8bc50a0e5fb478dcbedf_183313_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="配置 RHEL 订阅授权"
class="gallery-image"
data-flex-grow="69"
data-flex-basis="167px"
>&lt;/p>
&lt;p>在授权这个部分，点击第二个“了解更多信息”链接。这时候，浏览器会跳转到红帽客户门户中，在输入了用户名和密码登录了以后，你就完成了红帽开发者订阅和当前 Azure 账户的关联。&lt;/p>
&lt;p>在虚拟机创建完成以后，你可以用 RHEL 的订阅管理命令将当前的 RHEL Linux 操作系统注册到红帽客户门户的订阅上。参考命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">subscription-manager register --org=1234567 --activationkey=DevOps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&amp;mdash;org ：是你在红帽门户中的组织 ID。&lt;/li>
&lt;li>&amp;ndash;activationkey ： 是自己定义的激活秘钥；一个组织可以定义多个激活秘钥，用户部门和用途的区分。&lt;/li>
&lt;/ul>
&lt;p>这条命令中虽然 ID 是不适合明文暴露的；但是，这样避免了将红帽客户门户账户的用户名和密码都以明文的形式写入配置文件，或者在命令中出现：&lt;code>subscription-manager register --username &amp;lt;username&amp;gt; --password &amp;lt;password&amp;gt; --auto-attach&lt;/code>&lt;/p>
&lt;p>在当前操作系统注册成功以后，你可以在&lt;code>/etc/yum.repos.d&lt;/code>下能找到一个&lt;code>redhat.repo&lt;/code>文件。这个文件里包含了当前操作系统所有能使用的红帽产品的订阅。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@mysql yum.repos.d]# dnf repolist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating Subscription Management repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repo id repo name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">packages-microsoft-com-prod packages-microsoft-com-prod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rhel-8-for-x86_64-appstream-rpms Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rhel-8-for-x86_64-baseos-rpms Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考这篇文章《&lt;a class="link" href="https://access.redhat.com/solutions/253273%e3%80%8b" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/253273》&lt;/a>》；就可以启用或者禁用所需要的产品。&lt;/p>
&lt;h2 id="在其他环境中的使用">在其他环境中的使用&lt;/h2>
&lt;p>红帽开发者订阅可以让你在客户门户中下载 RHEL 安装 DVD。可以用 DVD 在私有云或者个人电脑（Home Lab）中安装 RHEL 操作系统。&lt;/p>
&lt;p>使用上面相同的方法，既可以实现 RHEL Linux 操作系统的注册，然后完全合理合法的使用全套红帽产品线。&lt;/p>
&lt;p>红帽开发者订阅的有效期是一年；在到期之后，在还需要在客户门户中免费续签。如果当前的开发者订阅过期了，所有 RHEL 操作系统实例就都不能正常更新和安装新的软件包了。在网站上完成了开发者订阅的免费续签之后，所有系统就可以恢复正常使用，无需做其他任何操作。&lt;/p>
&lt;p>开发者订阅的数量是 16 个，更具我最近一年的使用体验看来，这个数量是足够用的。假如你的虚拟机模板激活了订阅，根据这个虚拟机克隆出来的虚拟机是不需要使用注册命令就可以正常更新和安装软件包的。如果订阅数量真的被用完了，可以暂时从红帽客户门户中暂时删除几个不常用的系统，这样就释放出来几个可用的 RHEL 订阅。&lt;/p>
&lt;h2 id="排错">排错&lt;/h2>
&lt;p>新创建的 RHEL 8 的虚拟机，在激活红帽 RHEL 订阅之后，在更新系统软件安装包的时候，报 SSL 证书过期错误，可以参考下面的命令进行解决。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yum --disablerepo=&amp;#39;*&amp;#39; remove &amp;#39;rhui-azure-rhel8&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://rhelimage.blob.core.windows.net/repositories/rhui-microsoft-azure-rhel8.config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum --config=rhui-microsoft-azure-rhel8.config install rhui-azure-rhel8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum update ca-certificates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum clean all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>DevOps 在 2023 年的趋势和预测</title><link>https://martinliu.cn/blog/deveops-trands-in-2023/</link><pubDate>Wed, 04 Jan 2023 10:19:53 +0800</pubDate><guid>https://martinliu.cn/blog/deveops-trands-in-2023/</guid><description>&lt;img src="https://martinliu.cn/blog/deveops-trands-in-2023/pexels-samar-mourya-13378403.jpg" alt="Featured image of post DevOps 在 2023 年的趋势和预测" />&lt;p>随着技术的发展，与之相关的趋势也在不断变化。DevOps也不例外。现在，企业比以往任何时候，都更加认识到DevOps的价值，及其优化开发和运营的能力。随着我们走过2022年，进入2023年，重要的是要保持领先，了解未来几年推动DevOps的趋势。&lt;/p>
&lt;p>2022年对于DevOps技术来说是令人兴奋的一年，因为企业越来越认识到自动化和协作对于实现业务成功的重要性。采取敏捷的DevOps方法的公司在效率和生产力方面有了相当大的改善。这是由云计算的持续采用和容器化的崛起所做出的支撑。此外，随着 DevOps-as-a-Service（DaaS）解决方案的日益普及，意味着所有规模的组织都能够从DevOps实践中受益，而不需要专门的DevOps团队。&lt;/p>
&lt;p>云原生架构、无服务器计算和容器被广泛的采用，更多的组织将它们作为未来的方向。这使团队能够以敏捷和高效的方式快速部署、扩展和管理应用程序。人工智能/ML工具成为DevOps工具箱中的一部分，使团队能够更快速、高效地提供软件更新和功能，并检测代码中的异常情况，从而更容易在潜在问题变成严重问题之前发现它们。安全性仍然是一个重要的优先事项，企业在最新的技术和最佳实践方面进行了大量投资，以确保他们的系统是安全可靠的。&lt;/p>
&lt;p>同时，DevOps团队也开始专注于改善他们的协作和沟通，使团队能够更快地行动，并对客户的需求和反馈做出更多响应。&lt;/p>
&lt;p>在过去的一年里，我们在DevOps领域看到了很多令人兴奋的发展，但2023年的趋势是什么？让我们来看看今年我们在DevOps领域可以看到的主要趋势。&lt;/p>
&lt;h2 id="kubernetes-的采用和部署的增加">Kubernetes 的采用和部署的增加&lt;/h2>
&lt;p>2022年，Kubernetes的采用显著增加，使其成为事实上的容器编排平台。这是由于它的灵活性和可扩展性，使企业能够在云中快速旋转和拆解应用程序。此外，DevOps的兴起使该平台成为云基础设施的一个关键组成部分。&lt;/p>
&lt;p>Kubernetes的流行因其与云原生堆栈的整合而得到进一步支持。它支持各种应用，包括微服务、无服务器和数据库，使其成为希望利用云的组织的首选。因此，Kubernetes的部署数量在2022年急剧增加。这一趋势预计将持续到2023年，更多的公司将采用Kubernetes作为其云原生解决方案。&lt;/p>
&lt;p>预计Kubernetes将很快主导市场，每个组织都会转向这个平台进行部署。社区的支持水平和该平台令人印象深刻的增长速度没有放缓的迹象，使Kubernetes仍然是满足部署需求的首选。&lt;/p>
&lt;h2 id="无服务器计算将得到广泛的应用">无服务器计算将得到广泛的应用&lt;/h2>
&lt;p>无服务器计算已经成为科技行业的一个主要趋势，预计在2023年将变得更加流行。这种计算方法允许企业在不需要管理服务器的情况下，开发和运行服务和应用程序，使其成为一种高度创新和高效的软件部署方法。据Gartner称，到2025年，超过85%的组织将使用云计算策略，95%的新数字工作负载将在云平台上进行。这意味着，任何不采用无服务器计算的组织都可能难以跟上竞争的脚步。&lt;/p>
&lt;p>预计到2030年，无服务器市场将达到300亿美元。目前，已经有超过50%的基于云计算进程的企业将无服务器计算整合到他们的系统中。DevOps流程尤其受益于这一趋势，因为它有助于缩小开发和运营之间的隔阂，简化DevOps流水线的代码。成功实施无服务器计算的一个例子是 Autodesk，一家专门为建筑、工程、施工和制造设计软件的公司。通过扩大其在AWS的业务范围并实施AWS Dynamodb和AWS Lambda，Autodesk能够将创建账户所需的时间从两周大幅减少到十分钟。&lt;/p>
&lt;p>无服务器计算为工程师提供了许多好处，包括通过消除服务器管理来减少工作量，通过只在需要时支付服务器空间来降低成本，以及在减少延迟的同时轻松扩展和部署。因此，这是一个值得在2023年关注的趋势。&lt;/p>
&lt;h2 id="微服务架构的采用将继续增长">微服务架构的采用将继续增长&lt;/h2>
&lt;p>微服务架构是一种越来越流行的设计、构建和管理应用程序的结构。这种方法有助于DevOps专业人员开发出更加模块化、与其他组件解耦、更易于维护和扩展的应用程序。通过将一个复杂的应用程序分离成更小、更容易管理的服务，DevOps专业人士对应用程序的各个部分有更多的控制。这使得更新和排除错误更加容易。此外，微服务允许DevOps专业人员通过创建新的服务或更新现有服务来快速响应客户需求。&lt;/p>
&lt;p>以提供可扩展性、灵活性和敏捷性的方式开发和部署服务的能力是DevOps专业人士开始接受微服务的主要原因。在一个不断发展的IT环境中，公司需要能够快速、轻松地适应行业的变化。微服务是实现这一目标的好方法，因为它们允许在小的、易于管理的部分中开发和部署服务。因此，DevOps专业人员应该关注微服务在未来几年的持续发展。&lt;/p>
&lt;h2 id="安全自动化将获得发展势头">安全自动化将获得发展势头&lt;/h2>
&lt;p>安全自动化涉及自动化安全流程和任务，以确保应用程序和系统的安全和保护，使其免受潜在威胁。在2023年，DevOps专业人士应密切关注安全自动化的增长和安全即代码方法的采用。&lt;/p>
&lt;p>企业实施安全自动化的一种方式是使用Harness安全测试自动化（STO）等工具，该工具允许在CI/CD管道内进行单元、集成和负载测试的自动化。这可以节省宝贵的工程时间，并降低整体云计算成本。集成到CI/CD流水线中的安全自动化保证了代码在部署到生产之前接受严格的安全测试。这确保了只有被验证为安全的代码才被允许进行。此外，在软件开发生命周期（SDLC）中使用人工智能和机器学习正变得越来越普遍，因为这些技术可以被训练来识别代码中的违规行为并提供改进建议。&lt;/p>
&lt;p>另一方面，安全即代码解决方案将安全测试整合到CI/CD流水线中，使企业能够在整个开发过程中执行安全策略。这有助于确保安全在开发过程的每个阶段都得到考虑，而不是事后才想到。安全自动化和安全即代码解决方案都可以节省宝贵的工程时间，降低整体云计算成本，同时保持高水平的安全性。&lt;/p>
&lt;p>2023年，随着企业寻求简化和自动化其安全流程，安全自动化将获得更大的发展势头。安全自动化工具将变得越来越复杂，具有自动安全测试、漏洞扫描和持续安全监控等功能。这将使企业能够在安全风险成为重大问题之前快速有效地识别和解决这些风险。&lt;/p>
&lt;h2 id="混沌工程实验的增加">混沌工程实验的增加&lt;/h2>
&lt;p>混沌工程是一个相对较新的领域，近年来得到了普及，预计在未来几年将继续增长。&lt;/p>
&lt;p>混沌工程是一种战略方法，涉及到通过将产品、服务和系统置于极端条件下测试其复原力和可靠性。这有助于组织了解其系统和应用在这种条件下的行为，并确保它们能够承受这些条件。混沌工程的目标是识别部署过程中的 &amp;ldquo;不完美&amp;rdquo;，如漫长的周期时间，并防止故障发生。混沌工程师的目标不是要消除故障，而是要减轻故障，具体方法是找出不完善的地方并自动修复。&lt;/p>
&lt;p>我们相信，随着企业认识到确保其产品和服务的高可用性和弹性的重要性，混沌工程和混沌原则的使用将在2023年变得更加广泛。随着混沌工程的采用越来越多，也可能会开发出新的工具和最佳实践，以帮助组织更好地理解和管理其系统的复杂性。&lt;/p>
&lt;h2 id="docker将继续提升开发者的体验">Docker将继续提升开发者的体验&lt;/h2>
&lt;p>Docker是一个深受开发者欢迎的工具，它通过允许开发者在云中快速构建、打包和部署应用程序，简化了开发生命周期。Docker的吸引力在于它的简单性，以及它将容器化应用快速带入生产环境的方式。&lt;/p>
&lt;p>Docker是一个深受开发者欢迎的工具，它通过允许开发者在云中快速构建、打包和部署应用程序，简化了开发生命周期。Docker的吸引力在于它的简单性，以及它将容器化应用快速带入生产环境的方式。&lt;/p>
&lt;p>尽管最初的假设是，当Kubernetes取消支持时，Docker将被淘汰，但事实并非如此。值得注意的是，Docker的设计从一开始就没有考虑到Kubernetes。Docker之所以能够保持其受欢迎程度，是因为有大量的开发者社区在使用它，而且它提供了易用性。&lt;/p>
&lt;p>围绕Docker的社区令人印象深刻，无与伦比，它的广泛采用和强大的社区支持使它成为寻求简化工作流程和提高生产力的开发者的可靠选择。因此，Docker预计在未来几年仍将是DevOps领域的一个关键角色，为更多协作开发工作流程的趋势推波助澜。&lt;/p>
&lt;p>2023年值得关注的一个DevOps趋势是Docker继续增强开发者的体验。该公司已经在开发新的工具和功能，使部署过程更简单、更快、更有效。它的重点是简化操作，同时也提供直观的用户体验。因此，采用Docker的公司可望体验到更大程度的灵活性和可扩展性。&lt;/p>
&lt;h2 id="gitops将获得更多的信任">GitOps将获得更多的信任&lt;/h2>
&lt;p>在GitOps中，开发人员将他们的代码存储在Git仓库中，然后将其部署到Kubernetes集群中。这种方法的好处是，开发人员可以将他们的代码保存在源码控制中，而不必担心管理Kubernetes集群的问题。&lt;/p>
&lt;p>在过去的几年里，GitOps作为一种提高软件交付速度、可靠性和安全性的方法，在DevOps专业人士中获得了巨大的吸引力。在2023年，我们希望看到GitOps在希望改善其软件交付流程的组织中获得更多的信任和采用。&lt;/p>
&lt;p>我们相信GitOps在2023年将继续流行，有几个原因。首先，GitOps使企业能够采用更加声明性的方法来管理其应用程序和基础设施。这意味着，开发人员不必手动配置和部署资源，只需将他们想要的状态提交给Git，剩下的就交给自动化工具处理。这可以帮助减少错误的风险，提高软件交付的速度和可靠性。&lt;/p>
&lt;p>GitOps促进了开发团队内部的协作和透明度。通过使用Git作为真理的中心来源，团队中的每个人都可以看到正在进行的更改和系统的当前状态。这可以帮助减少冲突，改善团队成员之间的沟通。&lt;/p>
&lt;p>GitOps可以帮助企业提高其软件交付过程的安全性。通过使用Git作为唯一的真理源，并使部署过程自动化，企业可以减少未经授权的更改的风险，并确保只有经过批准的更改被部署到生产中。&lt;/p>
&lt;p>随着GitOps继续在DevOps领域获得关注，预计它在未来几年只会继续增长。这是因为它能够简化DevOps流程，使开发者更容易部署他们的代码。因此，GitOps肯定会成为2023年值得关注的领先DevOps趋势之一。具体来说，随着开发者越来越了解GitOps的好处，对GitOps的信任将继续增加。随着越来越多的组织采用GitOps，并成为DevOps流程的标准部分，GitOps将获得更多信任。&lt;/p>
&lt;h2 id="aiops将变得突出">AIOps将变得突出&lt;/h2>
&lt;p>MLOps和AIOps是两个最突出的DevOps工具，预计将成为该行业的主要参与者，到2026年预计价值为409.1亿美元。这些工具对于优化DevOps操作和实现高质量的快速发布至关重要。MLOps有助于加强机器学习的开发系统，而AIOps则使IT流程和操作自动化。&lt;/p>
&lt;p>AIOps是一个强大的工具，可以使复杂的DevOps流程自动化，使团队能够快速检测和解决任何潜在的问题。它还可以提供对DevOps流程性能的洞察力，并在造成任何破坏之前确定任何潜在的问题。AIOps通常被用作DevOps工具链的一部分，实时监控和管理这些系统，为集成工具和DevOps工程师提供自动反馈。AIOps也可用于自动化某些任务，如应用测试和部署，这可以大大减少完成DevOps任务所需的时间和精力。&lt;/p>
&lt;p>2023年，随着企业寻求提高IT效能，减少管理复杂数字系统的人工劳动，预计AIOps将继续流行。&lt;/p>
&lt;h2 id="内部开发者平台将变得更加重要">内部开发者平台将变得更加重要&lt;/h2>
&lt;p>到2022年，颠覆公司构建软件方式的DevOps趋势已经发展成为一种软件交付方式，通过打破孤岛将开发和运营联系起来。&lt;/p>
&lt;p>内部开发者平台是一套专门为企业的开发者设计的工具和服务，通常托管在企业自己的基础设施内。&lt;/p>
&lt;p>内部开发者平台为工程团队提供了一个集中的中心，以进行合作和共享资源。这可以帮助内部开发人员的学习和发展，使他们能够增加技术知识，并使他们能够轻松地与其他工程团队一起进行项目工作。这种平台还可以帮助减少错误，提高代码质量，因为资源共享和审查更容易。在2023年，我们预计会看到企业内部越来越多地采用内部开发者平台的趋势。&lt;/p>
&lt;h2 id="devops协作将成为主流">DevOps协作将成为主流&lt;/h2>
&lt;p>DevOps的理念包括打破软件开发人员和开发运营团队之间的围墙，允许他们在构建、测试和部署软件方面进行协作。随着越来越多的组织追求敏捷开发，他们也在提高开发人员和系统之间的障碍。亚马逊、谷歌和Stripe等组织都依靠DevOps协作来促进速度和创新。&lt;/p>
&lt;p>协作工作正在改变，高管们正在使用新的软件工具来帮助他们监控工作流程。使用Slack、Microsoft Teams、GitHub和Atlassian的工具的DevOps团队对他们的工作流程有更大的可见性。在未来两年，DevOps领导层将继续看到DevOps协作成为主流，新的管理方式将出现。&lt;/p>
&lt;h2 id="低代码平台">低代码平台&lt;/h2>
&lt;p>低代码平台的确是扩展敏捷和DevOps优势的有用工具。它们允许开发人员快速、轻松地构建和部署应用程序，而不需要编写大量的代码。这对于需要快速开发和部署应用程序的组织来说特别有利，因为这可以让他们更有效地应对不断变化的业务需求和市场条件。&lt;/p>
&lt;p>低代码平台也可以很好地适用于想要采用DevOps方法的组织，因为它们可以促进开发人员和IT运营团队之间的合作。通过使用低代码平台，开发人员可以专注于构建和测试应用程序，而IT运营团队可以专注于部署和监控。这些平台通常与所有主要的DevOps工具集成，从而有助于成为管理CI/CD的单一界面。&lt;/p>
&lt;p>总的来说，对于希望采用敏捷和DevOps实践的组织来说，低代码平台可以成为一个有价值的工具，因为它们可以帮助加速开发过程，提高应用程序的质量和可靠性。&lt;/p>
&lt;h2 id="向标准化部署和真正的自动化转变">向标准化部署和真正的自动化转变&lt;/h2>
&lt;p>现在出现了许多端到端的DevOps平台，它们都是以低代码的方式构建的。此外，他们专注于为部署引入标准化；这一直是阻碍团队扩展和控制其部署的主要障碍。使用标准化的CI/CD管道使团队能够重新使用特定的管道来部署性质相似的微服务，只需在需要时调整一些参数。这有助于解决管道臃肿的问题，简化管道管理。&lt;/p>
&lt;p>这些低代码平台还有助于实现真正意义上的自动化，这一直是DevOps的一个关键原则，但由于各团队的工具和工作流程分散，其实施一直是孤立和不统一的。这种趋势在未来可能会继续，重点是通过DevOps平台实现真正的端到端自动化。自动化可以帮助减少构建、测试和部署软件所需的时间和精力，这可以提高效率并加快开发过程。部署后的自动化在帮助检测故障和启动即时回滚以确保更高的应用可用性方面也有很大的作用。&lt;/p>
&lt;h2 id="混合云环境的兴起">混合云环境的兴起&lt;/h2>
&lt;p>许多组织正朝着混合云模式发展，其中一些工作负载在企业内部运行，另一些在云中运行。要求也决定了需要让应用程序在多个云区域运行，并有许多共享资源。这种趋势在未来几年可能会继续下去，DevOps实践将需要适应，不仅要支持混合云的部署，还要支持简化的跨集群监控、备份等。&lt;/p>
&lt;h2 id="基础设施即代码">基础设施即代码&lt;/h2>
&lt;p>基础设施即代码（IAC）将成为DevOps的领先趋势之一。这一趋势有利于通过自动化而不是人工的方式来管理和配置基础设施。这是一个基本的DevOps最佳实践，将持续监控、虚拟化测试和版本控制应用于指导基础设施开发和管理的基础代码。&lt;/p>
&lt;p>基础设施即代码使采用DevOps技术以及基础设施团队和软件开发团队之间更紧密的合作成为可能。当基础设施是代码并被纳入你公司的软件生命周期时，有一个共同的词汇和一套共同的标准，利益相关者已经理解。团队之间的沟通因这种共享的知识而得到促进，这对DevOps至关重要。&lt;/p>
&lt;h2 id="devsecops">DevSecOps&lt;/h2>
&lt;p>DevSecOps是指开发、安全和运营。它是一种软件开发实践，在每个阶段都集成了安全元素，直到开发的解决方案不能成功交付。DevSecOps是从DevOps演变而来的，因此，实施DevSecOps而不是DevOps将在未来获得更大的发展。DevSecOps将安全整合到CI/CD管道中，使开发团队能够以DevOps的速度解决目前最紧迫的一些安全问题。&lt;/p>
&lt;h2 id="sre-网站可靠性工程">SRE (网站可靠性工程)&lt;/h2>
&lt;p>DevOps部署的下一个层次是站点可靠性工程。在DevOps的未来趋势中，似乎采用SRE作为战略，以实现高可用性、可靠性和增强的数字消费者体验。SRE技术对于完成内部服务水平目标和服务水平协议（SLA）（SLO）也是必要的。&lt;/p>
&lt;h2 id="可观测性">可观测性&lt;/h2>
&lt;p>可观察性将是DevOps的关键趋势之一。它提到了协助开发和运营团队记录、收集、关联和分析来自分布式应用的大量性能数据的方法和软件工具，以获得当下的洞察力。&lt;/p>
&lt;h2 id="多云环境">多云环境&lt;/h2>
&lt;p>DevOps和多云环境相辅相成，具有同义关系。他们的结合提供了好处，在提高生产力的同时，也为彼此增加了价值数。尽管如此，DevOps和多云在一起仍然是不寻常的。大多数拥有完善的DevOps管道的企业离将多云安排到位还有一段距离。&lt;/p>
&lt;h2 id="结论">结论&lt;/h2>
&lt;p>随着IT组织实施DevOps计划，他们无疑将面临一些挑战，这些挑战将考验他们在不断的压力下管理变化、跨团队协作和有效工作的能力。大多数IT组织将意识到，有必要让所有利益相关者参与到DevOps中来，包括业务部门，这样他们都能理解正在实施的方法背后的原因。&lt;/p>
&lt;p>2023年，DevOps团队将继续推进他们的采用率，因为他们从企业高管那里得到的支持越来越多。DevOps团队将继续关注自动化，将应用程序迁移到云平台，推出Docker容器，建立容器协调工具，以及将他们的关注点扩展到安全方面。更多的公司将把DevOps嵌入到他们的运营结构中。这一发展将使企业开发、部署和运行应用程序的方式以及支持其团队的方式发生重大变化。除了采用DevOps实践外，企业还将调整数字化实践，从他们开发和部署的软件中获得更大的价值和质量，并管理企业的数字化转型。&lt;/p>
&lt;h2 id="参考">参考&lt;/h2>
&lt;p>本文参考的文章资料如下：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://alltechmagazine.com/devops-trends-to-watch-for-in-2023/" target="_blank" rel="noopener"
>https://alltechmagazine.com/devops-trends-to-watch-for-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ozone.one/top-6-devops-trends-to-look-for-in-2023/" target="_blank" rel="noopener"
>https://ozone.one/top-6-devops-trends-to-look-for-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.solutionanalysts.com/blog/top-10-trends-of-devops-in-2023/" target="_blank" rel="noopener"
>https://www.solutionanalysts.com/blog/top-10-trends-of-devops-in-2023/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.analyticsinsight.net/top-10-devops-trends-and-predictions-to-follow-up-in-2023/" target="_blank" rel="noopener"
>https://www.analyticsinsight.net/top-10-devops-trends-and-predictions-to-follow-up-in-2023/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>CloudBees 全球企业高管安全管理调查报告-2022年</title><link>https://martinliu.cn/blog/cloudbees-global-c-suite-security-survey-report-2022/</link><pubDate>Sun, 18 Dec 2022 12:17:39 +0800</pubDate><guid>https://martinliu.cn/blog/cloudbees-global-c-suite-security-survey-report-2022/</guid><description>&lt;img src="https://martinliu.cn/blog/cloudbees-global-c-suite-security-survey-report-2022/cover.png" alt="Featured image of post CloudBees 全球企业高管安全管理调查报告-2022年" />&lt;p>《CloudBees全球CxO安全调查》对美国、英国、法国、德国、西班牙和澳大利亚的600名CxO高管进行了调查，发现安全和合规性挑战是大多数组织的创新战略的一个重要障碍。四分之三的企业高管表示，合规性挑战（76%）和安全挑战（75%）限制了他们公司的创新能力。这部分是由于在合规性审计、风险和缺陷上花费了大量时间。调查还显示，高管们绝大多数赞成左移的方法，即把软件测试和评估转移到开发生命周期的早期，把安全和合规的负担放在开发团队身上。尽管如此，58%的人也同意左移的安全策略对开发团队来说是一种负担。总的来说，调查结果显示，全球的公司将从改善和精简安全和合规性流程中大大受益，以确保他们的软件供应链，改善开发人员的经验，并增加创新的时间。&lt;/p>
&lt;blockquote>
&lt;p>本报告解读的视频如下：&lt;/p>
&lt;/blockquote>
&lt;div class="video-wrapper">
&lt;iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;amp;high_quality=1&amp;amp;page=1&amp;bvid=BV1Lv4y1X7dY"
scrolling="no"
frameborder="no"
framespacing="0"
allowfullscreen="true"
>
&lt;/iframe>
&lt;/div>
&lt;p>感谢和我一起晚上直播的三位朋友：[大鲲、南方、悟空]&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-02.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q1 你对软件供应链的攻击有多担心（如果有的话）？&lt;/p>
&lt;/blockquote>
&lt;p>十分之九的企业高管表示，他们对软件供应链攻击感到担忧，其中一半表示非常担忧。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-03.jpg"
loading="lazy"
>&lt;/p>
&lt;p>来自澳大利亚、法国、西班牙、英国和美国的C-suite高管比德国的C-suite高管更有可能说他们担心软件供应链的攻击。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-04.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q2 与两年前相比，您认为您对软件供应链攻击的担忧是多还是少？&lt;/p>
&lt;/blockquote>
&lt;p>超过五分之四的C-suite高管表示，与两年前相比，他们对软件供应链攻击更加担忧。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-05.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在所有六个国家中，至少有四分之三的C-Suite高管表示，与两年前相比，他们更担心软件供应链的攻击。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-06.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q3 你认为你的软件供应链的安全性如何？&lt;/p>
&lt;/blockquote>
&lt;p>去年，超过九成（95%）的C-suite高管表示他们的软件供应链是安全的，超过一半表示非常安全。在2022年，这一比例下降到88%，认为它是安全的，只有三分之一（32%）的人认为它是非
常安全的。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-07.jpg"
loading="lazy"
>&lt;/p>
&lt;p>德国的首席执行官比其他国家的执行官更有可能说他们的软件供应链不安全。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-08.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q4 您认为您的软件供应链的合规性如何？&lt;/p>
&lt;/blockquote>
&lt;p>超过四分之三的C-Suite高管（78%）表示他们的软件供应链完全或几乎完全合规，低于去年十分之九（90%）的说法。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-09.jpg"
loading="lazy"
>&lt;/p>
&lt;p>澳大利亚、法国、英国和美国的首席执行官比德国和西班牙的首席执行官更有可能说他们的软件供应链完全或几乎完全合规。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-10.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q5 虽然两者都很重要，但哪个对你的组织最重要？&lt;/p>
&lt;/blockquote>
&lt;p>四分之三的C-suite高管表示，安全和合规是最重要的，而四分之一的人表示快速和合规是最重要的。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-11.jpg"
loading="lazy"
>
每个国家至少有三分之二的C-Suite高管表示安全和合规比快速和合规更重要。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-12.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q6 您认为，贵公司的团队每年平均花多少时间在合规性审核上？如果您不确定，请使用您最好的估计。如果您真的不知道，请选择不确定。&lt;/p>
&lt;/blockquote>
&lt;p>虽然超过五分之一的C-suite高管表示他们完全不确定，但平均而言，C-suite高管表示他们的团队每年花在合规性审计上的时间超过37天。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-13.jpg"
loading="lazy"
>
来自西班牙、英国和美国的C-Suite比其他三个国家的C-Suite更有可能说他们的团队每年平均花更多时间在合规性审计上，而德国的C-Suite更有可能说他们完全不确定。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-14.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q7 在平均一周内，您认为您的团队在以下各项上花费的时间是多少？如果您不确定，请使用您最好的估计。&lt;/p>
&lt;/blockquote>
&lt;p>尽管首席执行官们说他们的团队在创新上花费了更多的时间，但他们在风险和缺陷上花费的时间也相差不远。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-15.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>innovation 创新&lt;/li>
&lt;li>risks 风险管理&lt;/li>
&lt;li>Defacts 缺陷管理&lt;/li>
&lt;li>Technical Debt 技术债务&lt;/li>
&lt;/ul>
&lt;p>虽然所有国家的比例都差不多，但在澳大利亚和西班牙，花在风险上的时间比花在创新上的时间多。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-16.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q8 在平均一周内，您认为您的团队应该在以下各项上花费多少时间？如果您不确定，请使用您的最佳估计。&lt;/p>
&lt;/blockquote>
&lt;p>毫不奇怪，C-suites说他们的团队应该把最大的时间花在创新上。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-17.jpg"
loading="lazy"
>&lt;/p>
&lt;p>德国和英国的C-suites高管比其他国家的高管更有可能说更多的时间应该花在创新上，而美国和西班牙的C-suites更有可能说更多的时间应该花在风险上。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-18.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q8-A 是什么阻碍了你的开发团队将更多的时间花在你认为他们应该花时间的活动上？请选择所有适用的。&lt;/p>
&lt;/blockquote>
&lt;p>超过一半的C-suite高管表示，合规性和/或流程占用时间是阻止他们的开发团队花更多时间在他们认为应该花时间的活动上的原因。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-19.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>合规和/或流程所需要的时间&lt;/li>
&lt;li>合规和/或安全方面的知识&lt;/li>
&lt;li>过多的技术债务&lt;/li>
&lt;li>糟糕的产品测试&lt;/li>
&lt;li>其他的东西&lt;/li>
&lt;li>没有什么能阻止他们&lt;/li>
&lt;/ul>
&lt;p>澳大利亚和美国的C-suite高管比其他国家的C-suite高管更有可能说合规和/或安全知识是阻止他们的开发团队花更多时间在他们希望他们花时间的活动上。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-20.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q9 你有多大程度上同意或不同意以下说法？&lt;/p>
&lt;/blockquote>
&lt;p>几乎十分之九的C-suite高管表示，与两年前相比，他们现在更多地考虑保障软件供应链的安全和合规问题。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-21.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>我现在比两年前更多地考虑保障供应链的安全。&lt;/li>
&lt;li>我现在比两年前更多地考虑合规问题&lt;/li>
&lt;li>合规挑战限制了我们的创新能力&lt;/li>
&lt;li>安全挑战限制了我们的创新能力&lt;/li>
&lt;li>我宁愿处理自然灾害，也不愿处理我们软件供应链中的安全问题&lt;/li>
&lt;li>在我们公司，安全问题可能是一个缓慢的部门。&lt;/li>
&lt;li>如果我们的软件供应链受到攻击，我不确定我们会首先向谁求助&lt;/li>
&lt;/ul>
&lt;p>几乎三分之二的C-suite高管表示，在他们的公司中，安全可能是最慢的部门。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-20.jpg"
loading="lazy"
>&lt;/p>
&lt;p>人口统计学上的差异。按C-suite高管的类型 :CEO比CTO/CIO/CISO和其他C-suites更有可能说。&lt;/p>
&lt;ul>
&lt;li>他们现在比两年前更多地考虑合规问题（93% vs. 85%和79%）。&lt;/li>
&lt;li>合规挑战限制了他们的创新能力（82%对73%和73%）。&lt;/li>
&lt;li>安全挑战限制了他们的创新能力（84% vs. 72% &amp;amp; 64%）。&lt;/li>
&lt;li>他们宁愿处理自然灾害，也不愿处理软件供应链中的安全问题（80% vs. 62% &amp;amp; 52%）。&lt;/li>
&lt;li>在他们的公司里，安全可能是最慢的部门（79% vs. 58% &amp;amp; 50%）。&lt;/li>
&lt;li>如果我们的软件供应链受到攻击，我不确定我们会首先向谁求助（70%对45%和51%）。&lt;/li>
&lt;/ul>
&lt;p>人口统计学上的差异。按年龄划分 :40岁以下和40至54岁之间的人比55岁以上的人更有可能说。&lt;/p>
&lt;ul>
&lt;li>安全挑战限制了他们的创新能力（82% &amp;amp; 74% vs. 55%）。&lt;/li>
&lt;li>他们宁愿处理自然灾害也不愿处理软件供应链中的安全问题。
供应链的安全问题（69% &amp;amp; 69% 对 48%）。&lt;/li>
&lt;li>在他们的公司里，安全可能是最慢的部门（71% &amp;amp; 65% vs. 39%）。&lt;/li>
&lt;li>他们不确定如果他们的软件供应链受到攻击，他们会首先求助于谁（62% &amp;amp; 55% vs. 34%）。&lt;/li>
&lt;/ul>
&lt;p>人口统计学上的差异。按公司规模划分：员工人数少于1000人的公司比员工人数在1000人以上的公司更可能说。&lt;/p>
&lt;ul>
&lt;li>他们更愿意处理自然灾害而不是软件供应链中的安全问题（70%对62%）。&lt;/li>
&lt;/ul>
&lt;p>人口统计学上的差异。按在C-suite的时间划分 ：在C-Suite工作10年以下的人比10年以上的人更有可能说。&lt;/p>
&lt;ul>
&lt;li>在他们的公司里，安全可以成为缓慢的部门（67%对52%）。&lt;/li>
&lt;/ul>
&lt;p>澳大利亚的C-Suite高管比其他国家的高管更有可能说，如果他们的软件供应链受到攻击，他们不确定会首先求助于谁。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-27.jpg"
loading="lazy"
>&lt;/p>
&lt;p>所有这些与去年相比都有所下降，但这可能与西班牙和澳大利亚的加入有更大关系，而不是条件的变化。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-28.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q10 每项的自动化程度如何？&lt;/p>
&lt;/blockquote>
&lt;p>五分之三的C-suites（59%）说他们的软件供应链几乎或完全自动化；比去年的四分之三（75%）有所下降。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-29.jpg"
loading="lazy"
>&lt;/p>
&lt;p>澳大利亚、英国和美国的首席执行官比法国、德国和西班牙的首席执行官更可能说他们的软件供应链是自动化的。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-30.jpg"
loading="lazy"
>&lt;/p>
&lt;p>近五分之三的企业高管表示他们的合规流程完全或几乎全部自动化，而四分之一的企业高管表示他们的合规流程大约有一半自动化。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-31.jpg"
loading="lazy"
>&lt;/p>
&lt;p>澳大利亚和美国的C-suites比其他国家的C-suites更可能说他们的合规流程是自动化的。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-32.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q11 当谈到你拥有的安全和/或合规性问题的工具时，哪种工具与你正在使用的工具最接近？&lt;/p>
&lt;/blockquote>
&lt;p>五分之三的C-suite高管（59%）表示，他们拥有的安全和/或合规性工具全部或大部分都来自外部，而十分之三的人拥有混合的工具，十分之一的人（11%）拥有大部分或全部自己创建的工具。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-33.jpg"
loading="lazy"
>&lt;/p>
&lt;p>与法国、德国和西班牙相比，澳大利亚、英国和美国的首席执行官们表示，他们在安全和/或合规问题上使用了所有或大部分的外部工具。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-34.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q12 你目前是否在你的组织中实施了向左转的安全和合规方法？&lt;/p>
&lt;/blockquote>
&lt;p>超过四分之三的C-suite高管表示，他们正在其组织中实施 &amp;ldquo;左移 &amp;ldquo;的安全和合规方法，其中三分之一表示他们肯定在实施。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-35.jpg"
loading="lazy"
>&lt;/p>
&lt;p>澳大利亚、西班牙、英国和美国的首席执行官比法国和德国的首席执行官更有可能说他们正在其组织中实施 &amp;ldquo;左移 &amp;ldquo;的安全和合规方法，而德国人更有可能说他们没有实施这种方法。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-36.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q13 哪一个最接近左移方法对你的开发者的影响？&lt;/p>
&lt;/blockquote>
&lt;p>近五分之三的C-suite高管说 &amp;ldquo;左移 &amp;ldquo;方法对他们的开发人员是一种负担，而超过三分之一的人说它是一种帮助。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-37.jpg"
loading="lazy"
>&lt;/p>
&lt;p>澳大利亚的C-suites比其他国家的C-suites更有可能说 &amp;ldquo;左移 &amp;ldquo;方法对他们的开发人员是一种负担，而德国和西班牙的C-suites更有可能说这是对他们的帮助。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-38.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q14 你有多同意或不同意以下说法？&lt;/p>
&lt;/blockquote>
&lt;p>十分之九的C-suite高管表示他们的风险管理团队拥有建立和/或确保安全的软件供应链的知识和专长，而几乎十分之九的人表示他们的架构师和/或开发人员拥有。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-39.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>我们的风险管理团队拥有建立和/或确保安全的软件供应链的知识和专长。&lt;/li>
&lt;li>我对我们的软件在生产中的安全性非常有信心&lt;/li>
&lt;li>我们的架构师和/或开发人员拥有构建和/或确保软件供应链安全的知识和专业技能&lt;/li>
&lt;li>我们的风险管理团队拥有他们需要的所有工具&lt;/li>
&lt;li>我们的开发人员拥有他们需要的所有工具&lt;/li>
&lt;li>左移对我们的组织来说是很重要的&lt;/li>
&lt;/ul>
&lt;p>超过五分之四的C-suite高管表示 &amp;ldquo;左移 &amp;ldquo;对他们的组织很重要。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-40.jpg"
loading="lazy"
>&lt;/p>
&lt;p>西班牙、英国和美国的C-suite高管比澳大利亚、法国和德国的C-suite高管更有可能说他们对自己的软件在生产中的安全性非常有信心。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-41.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>S4 目前有多少开发人员在贵公司工作？如果您不确定，请使用您最好的估计。&lt;/p>
&lt;/blockquote>
&lt;p>五分之二的C-suite高管（41%）说他们公司目前有100个或更少的开发人员，而超过三分之一（35%）的人超过200个。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-42.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>Q2 与两年前相比，您认为您对软件供应链攻击的担忧是多还是少？&lt;/p>
&lt;/blockquote>
&lt;p>法国、德国、西班牙和英国的C-suite高管比澳大利亚和美国的C-suite高管更有可能说他们的公司目前有1-50名开发人员，而澳大利亚的高管则更有可能说他们有201-300名。
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-43.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-44.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>方法论&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>CloudBees与Regina Corso Consulting合作，对澳大利亚、法国、德国、西班牙、英国和美国的C-suite高管进行了调查，以收集关于软件供应链和围绕它的安全问题的见解。&lt;/li>
&lt;li>本次调查的对象是来自至少有250名员工的公司的600名C-suite高管，澳大利亚、法国、德国、西班牙、英国和美国各有100名受访者。&lt;/li>
&lt;li>本次调查于2022年6月27日至7月8日在网上进行。&lt;/li>
&lt;li>阅读图表时注意。由于四舍五入，或由于问题允许多次回答，百分比的总和可能不是100%。此外，&amp;rdquo;*&amp;ldquo;表示回答少于0.5%。除非另有说明，所有幻灯片的基数代表600名C-suite管理人员的总数。如果问题与前一年的调查重复，则显示趋势数据。&lt;/li>
&lt;li>关于逐年数据的说明。2021年只有四个国家（法国、德国、美国和英国），而2022年增加了两个国家。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>人口统计学&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>年龄：18-39岁=45%，40-54岁=40%；和55岁以上=16%。&lt;/li>
&lt;li>性别特征。男性=70%；女性=29%；非二进制=*。&lt;/li>
&lt;li>公司规模。250-999名员工=53%，1000名或以上员工=48%。&lt;/li>
&lt;li>C-suite高管的类型。CEO=34%；CIO=21%；CTO=19%；首席审计官=6%；CISO=6%；首席风险官=2%；以及其他C-suite=12%。&lt;/li>
&lt;li>担任C-suite高管的时间：5年或以下=29%；6-10年=48%；11-20年=16%，20年以上=7%。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/sec-survey-2022/CloudBees_2022_Global_C_Suite_Security_Survey_Report-47.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;a class="link" href="CloudBees_2022_Global_C_Suite_Security_Survey_Report.pdf" >点此处，下载本报告的 PDF 文件 📃&lt;/a>&lt;/p></description></item><item><title>鱼缸里的生态系统</title><link>https://martinliu.cn/blog/aquarium-eco-systems/</link><pubDate>Mon, 07 Nov 2022 14:27:37 +0800</pubDate><guid>https://martinliu.cn/blog/aquarium-eco-systems/</guid><description>&lt;img src="https://martinliu.cn/blog/aquarium-eco-systems/small-tank.jpg" alt="Featured image of post 鱼缸里的生态系统" />&lt;p>从欣赏和磨练耐心性的角度看，养护鱼缸里的生态系统也值得推敲的，是一件很有意思，而且可以是非常技术流的事情。&lt;/p>
&lt;p>大概是去年的冬天，在鱼缸里生长了 10+年的那一条金鱼寿终正寝了。它是一条从租住屋里搬进家的普通红白金鱼，它是其它几个同伴中唯一的幸存者；到最后，我也没有想到它能独自生长这么多年。它的生存环境应该说是极其简陋的，每两周会给它换掉鱼缸里的一半的水，偶尔用增氧泵给它开几个小时，它快死的那几个月，增氧泵用的多一些。想想这条鱼的一生也是挺艰难的，偶尔还会遇到我们全家出游一个多月的时候。然而，它却和我们不离不弃的，坚强的活到了最后。最后应该是得了什么病了，肚子肿大，身体无法保持平衡，最后静静的离去。&lt;/p>
&lt;p>最近由于弹窗 3 的缘故，从十一前开始，就没有好好在北京呆过几天，应该有一个多月的时间都在燕郊，好处是可以安心的陪着妈妈天天做饭吃饭；然而，这有家不能回的烦恼也是显而易见的。&lt;/p>
&lt;p>说回到下面这个鱼缸的故事。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/aquarium-eco-systems/big-tank.jpg"
width="1920"
height="1256"
srcset="https://martinliu.cn/blog/aquarium-eco-systems/big-tank_hu93494c98fa3683446b0292e3fc9fa2dd_536782_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/aquarium-eco-systems/big-tank_hu93494c98fa3683446b0292e3fc9fa2dd_536782_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt=" 实验鱼缸 "
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p>
&lt;p>这是一个 35 cm 宽的白玻璃鱼缸。由于疫情的缘故，在家里呆着的时间会比较多。几乎所有社交也都减免了，天天过着几乎是隐居一般的生活。养几条鱼，让屋子里多一些生机，能看着小鱼儿们在水草间游弋，也是一种非常减压的举动。&lt;/p>
&lt;p>养鱼先养水，我用很多 5 升的矿泉水桶装满自来水晒在阳台，一周后这些水就都困好了，水里的有害物质也几乎挥发殆尽。为了更加贴近大自然，我去河里采集了两桶河水，然后混入了困好的自来水。去河边还采集了一些免费的水草和石头，这样在继续养水的过程中，还能让缸里的景观不至于单调。河里的石头上还有，免费附赠的一些田螺，它们是鱼缸里最初的原住民。&lt;/p>
&lt;p>混合河水的鱼缸在稳定了一周以后，我去买了一些小鱼，鱼缸里一下子充满了生机。随后又添加了一个小型的瀑布式过滤器。还加入了一个方形的水培绿萝的小盒子，固定在鱼缸的一个角落，里面放了几颗滤材。&lt;/p>
&lt;p>鱼缸生态系统浅谈：&lt;/p>
&lt;ol>
&lt;li>水质是根本。鱼会在水中排出粪便等污染水质的物质，污染物的来源是鱼食，显然喂鱼是整个这件事情最有意思的部分。净化水质的手段不仅依靠水泵的循环，还依靠看不见的硝化细菌。&lt;/li>
&lt;li>硝化细菌的培养依赖于，水利的底纱、过滤器里的滤材和水中的石头等因素，这些环境物质给硝化细菌提供了条件。&lt;/li>
&lt;li>鱼的生存还依赖于氧气，氧气的获取来自水泵和水草。在中午日光最强的时候，冬天的低角度日光可以直接照射水草三四十分钟，日光的光合作用是最明显的，可以看到水草上成串的放出光合作用的产物氧气。&lt;/li>
&lt;li>水草的生长依赖阳光和二氧化碳，鱼能产生少量的二氧化碳，但是缸里能自己产生的二氧化碳的量也不至于让水草疯长，但足够水草维持生命。&lt;/li>
&lt;/ol>
&lt;p>在鱼缸里的生态系统非常健康的情况下，水会非常干净，鱼的排泄物会被很快的分解的无影无踪。甚至于鱼缸的内壁上的沉积物也没有，鱼缸从外部看起来清澈透明。&lt;/p>
&lt;p>为了保持这个生态系统的持续性，我从不给鱼缸大换水；只加水不换水。鱼缸自然蒸发导致水位下降了两厘米左右的时候，我就会加相应容量的困好的氺。喂鱼也尽量忍住不频繁投喂，目前这是最大的水质污染来源。目前的硝化细菌还比较弱势，缸内壁的附着物两周不管，就会比较影响缸壁的透明度，这是最亟待改善的部分。所有的鱼都是小型鱼，它们的耗氧量本来就比较少，因此都非常活跃。河里的田螺不知道为什么，死亡了几只。买过一些黑壳虾，它们能躲在水草上，吃水藻，观赏性也不错，但是由于一次新水泵的测试，一夜之间都几乎被水泵吸入后阵亡了。&lt;/p>
&lt;p>总之，维持鱼缸里合理的生态系统并不难。从观赏性和嗜好的角度都算是高投入产出比的事情。养鱼这件事还是很好玩，后期会注重与水草和造景，尝试更多种类的小型鱼。&lt;/p></description></item><item><title>Homelab 里剪不断理还乱的莫过于网线</title><link>https://martinliu.cn/blog/home-lab-network-cable/</link><pubDate>Wed, 26 Oct 2022 20:08:21 +0800</pubDate><guid>https://martinliu.cn/blog/home-lab-network-cable/</guid><description>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/cover.jpg" alt="Featured image of post Homelab 里剪不断理还乱的莫过于网线" />&lt;p>从 homelab 的规模上来说，我的这个并不算什么，可是从设备的种类和目标上来说，就稍微有点复杂了，和我多年积累电子设备有关，和我的好奇心有关。&lt;/p>
&lt;ul>
&lt;li>cisco ccna lab: router = 2x2800 + 1x2600, sw = 2 x 3560; firewall = 1x pix 515; 希望有机会用他们恢复一下我生锈的网络知识。&lt;/li>
&lt;li>4 x raspberry pi ，没有玩多久就放一边吃灰了。&lt;/li>
&lt;li>2 x MacBook Pro，之中一台 2011 年的老款，外壳上亮灯型号。1 x MacBook&lt;/li>
&lt;li>1 x Hp Z420 当时想用来做 TrueNAS 的，后来运行 esxi 了。&lt;/li>
&lt;li>1 x Dell R220，身材精干，莫却虽小五脏俱全的企业级服务器。&lt;/li>
&lt;li>1 x Lenovo P710 是 Homelab 从 Intel NUC 升级上来的败笔，从买了这个机器以后，后续各种想法和需求就决堤了。&lt;/li>
&lt;li>2 x 华南金牌组装服务器，搭配 P710 成功搭建了 Nutanix CE 集群。&lt;/li>
&lt;li>1 x SuperMicro 服务器，配合外置的硬盘支架，用 6 个 4TB 西数红盘组成了 TrueNAS 服务器，说真话，对于 homeLab 而言，其实这一个服务器就够了。真的不需要上面所有设备&lt;/li>
&lt;/ul>
&lt;h2 id="交换机---core-switch">交换机 - core switch&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG157.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG157_hufdeb040318df62dfe6c7a5878e222a02_251075_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG157_hufdeb040318df62dfe6c7a5878e222a02_251075_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="Cisco 3560-x"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>我用了一台 48 口的 Cisco 3560-x 作为核心交换机，对于我这个 32U 高的机架而言，它提供了足够的网口空间，再用了将近一年后，觉得选择稍微高于当前想法的交换机是非常正确的选择。建议采购 1.3 ~ 1.5 计划需求的交换机。&lt;/p>
&lt;ul>
&lt;li>VLAN ：必用功能，特别是在虚拟化场景和多个子网隔离的需求下。&lt;/li>
&lt;li>Trunk / Access mode 端口：VLAN+Access port 的模式是最多用的；在 esxi 虚拟化服务器上会用到 VLAN+Trunk port 的需求。&lt;/li>
&lt;li>Routing / DHCP ： 可以开启 VLAN 之间的路由功能，由于我用 pfSense 服务器做的防火墙，因此 DHCP 和各个子网的网关都用 pfSense 服务器做了；因此这个功能在我这里就测试了一下，据说这个功能开启了以后也会比较消耗资源。&lt;/li>
&lt;li>我还配备了一台 Cisco 3560 PoE-24，最初是为了试一下我的两个 PoE 供电的设备，它们是 piHat 和 海康威视监控头。不过这个设备以后主要会用于 NetDevOps 的研究，Ansible 的 Cisco 模块一直没有研究过。&lt;/li>
&lt;/ul>
&lt;h2 id="配线架---patch-panel">配线架 - patch panel&lt;/h2>
&lt;p>如果你准备入手机架，或者正在规划中，都一定不要忘了这个重要的组件。它最终帮我实现了一次性网线布线，轻松在机架前调整网络配置的便利性。特别是在后续经常调整设备网络配置的时候，越用越能感受到这个神器的价值。&lt;/p>
&lt;p>我在配线架跳线（patch cable）上所走的弯路：&lt;/p>
&lt;ol>
&lt;li>我买了一卷网线用于配线架后所有设备的连接，配合网线钳和水晶头，我将24 口配线架的后面都布满了长度和是的网线；这个用法和做法是没有问题的。&lt;/li>
&lt;li>然后，我用相同的方法开始做长短不一的短跳线，等我做完了十几根跳线以后，意识到：网线的线径太粗，中间的芯太硬，他们横七竖八的排列着非常难看。&lt;/li>
&lt;li>让误以为是鸡肋的理线器上岗，在交换机和理线架中间挪动出 1U 的空间后，理线架将张牙舞爪的跳线都收纳起来后，视觉上感觉好多了。可是跳线太粗，与从 pfSense 上走下来的 6 根网线混居到一起后，居然就已经把配线架的狭小空间塞满了，这意味着，我发在塞入以后新增的跳线需求了，还有七八个口没有跳线。&lt;/li>
&lt;li>买了 24 根超细的 0.5m 的跳线，不忍彻底更换下来辛辛苦苦做的我十指发麻的 n 多根跳线。&lt;/li>
&lt;/ol>
&lt;p>下面是更换细跳线的过程。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG154.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG154_hu0313eca7ed8b4734c16110c5a02ae2ea_380599_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG154_hu0313eca7ed8b4734c16110c5a02ae2ea_380599_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="换跳线前"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG155.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG155_huf2655be9d776366120f53c457366494a_417209_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG155_huf2655be9d776366120f53c457366494a_417209_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="换下一半手工打造的粗跳线"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG153.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG153_hu573ef48824216cc1dedcfaee3082339d_379862_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG153_hu573ef48824216cc1dedcfaee3082339d_379862_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="完全替换为细跳线，未关闭理线器盖子的状态"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/cover.jpg"
width="1280"
height="853"
srcset="https://martinliu.cn/blog/home-lab-network-cable/cover_hu48bb3047a5184e99b034cc0dec1dbcb0_181106_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/home-lab-network-cable/cover_hu48bb3047a5184e99b034cc0dec1dbcb0_181106_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="盖上了理线架的盖子后的效果"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>这个视觉效果应该是可以了，而且从功能上来说，理线器中宽松的空间，让我以后给不同的配线架端口变更网络配置的时候，就轻松自如多了。&lt;/p>
&lt;h2 id="网线---cables">网线 - cables&lt;/h2>
&lt;p>除了专门买的那一卷 25m 的网线，我手头还是有不少长短各异的网线。&lt;/p>
&lt;ul>
&lt;li>超五类：外皮较柔软&lt;/li>
&lt;li>六类/超六类：都是长短不同的成品网线，有些被我掐掉一端的水晶头后，利旧部署在配线架上了，虽然都是8 芯的双绞线，不同的中间塑料芯和双绞线的粗细和硬度都是不同的。&lt;/li>
&lt;li>扁网线：收纳方便，柔软，用于临时飞一根网线出来。&lt;/li>
&lt;li>纤细的跳线：适合在高密度配线的地方使用。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG151.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG151_hud3a1762d24172bcad0a95836a0d30a21_272121_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG151_hud3a1762d24172bcad0a95836a0d30a21_272121_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="网络工程师的基本工具"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>通过使用这套工具，可以让你充分理解什么是物理层。在制作水晶头的过程中，也会屡屡失手。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG156.jpeg"
width="1276"
height="1702"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG156_hud36722dd78d387ced5df36430875d31a_271582_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG156_hud36722dd78d387ced5df36430875d31a_271582_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="做失败的水晶头，和从成品网线上剃头下来的"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="179px"
>&lt;/p>
&lt;p>最后值得一提的是这个细跳线，并不是为了美观，主要是为后期更改跳线操作。留下更多的操作空间。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG150.jpeg"
width="1702"
height="1276"
srcset="https://martinliu.cn/blog/home-lab-network-cable/WechatIMG150_hua87aee5fddeb832426651eedaa698334_235734_480x0_resize_q75_box.jpeg 480w, https://martinliu.cn/blog/home-lab-network-cable/WechatIMG150_hua87aee5fddeb832426651eedaa698334_235734_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="主要是省空间"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>在过几天，我当前的网络配置就会固定下来，起码所有网口都就位，后续网线布线方面的待办事项：&lt;/p>
&lt;ul>
&lt;li>打印 1 ~ 24 的网线标签纸，贴到配线架后面的网线上。&lt;/li>
&lt;li>更新配线架上网口上面的标签纸，标明后面接的是什么设备的那块网卡。&lt;/li>
&lt;li>用尼龙绷带，将位置基本上固定不变的设备的网线固定在机架的立柱上。&lt;/li>
&lt;li>优化核心交换机的 VLAN 配置，调整VLAN 中的端口数量。调整 esxi 服务器管理网和虚拟机网的端口配置（Trunk 配置）&lt;/li>
&lt;li>优化 10GB 光纤交换机上 1GB 以太网口的配置，将其作为 Trunk 模式，接入存储网 VLAN 意外的其他 VLAN。让后续 Nutanix CE 重构后，虚拟机和存储网可以都在这个万兆交换机上，但是流量是隔离开的。&lt;/li>
&lt;/ul></description></item><item><title>Elastic Agent 和 Fleet 服务器 安装手册 v8.4</title><link>https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/</link><pubDate>Tue, 18 Oct 2022 21:32:14 +0800</pubDate><guid>https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/</guid><description>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/observability.png" alt="Featured image of post Elastic Agent 和 Fleet 服务器 安装手册 v8.4" />&lt;p>测试过程和环境概述：&lt;/p>
&lt;ul>
&lt;li>用一个 RHEL 9 虚拟机安装 Elasticsearch 和 Kibana；然后部署 Fleet 服务器。&lt;/li>
&lt;li>在另外一个虚拟机安装 Elastic Agent，初始化注册到 Fleet 服务器，然后更新对它的管理策略。&lt;/li>
&lt;li>在 Kibana 的可观测性和安全解决方案中观察采集到的数据。&lt;/li>
&lt;/ul>
&lt;h2 id="安装-elasticsearch">安装 Elasticsearch&lt;/h2>
&lt;p>下载 Elasticsearch 的 rpm 安装包，用 rpm 的方式安装 Elasticssearch 服务器。 &lt;code>dnf install elasticsearch-8.4.3-x86_64.rpm &lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># dnf install elasticsearch-8.4.3-x86_64.rpm &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating Subscription Management repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Red Hat Enterprise Linux &lt;span class="m">9&lt;/span> &lt;span class="k">for&lt;/span> x86_64 - BaseOS &lt;span class="o">(&lt;/span>RPMs&lt;span class="o">)&lt;/span> 3.9 kB/s &lt;span class="p">|&lt;/span> 4.1 kB 00:01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Red Hat Enterprise Linux &lt;span class="m">9&lt;/span> &lt;span class="k">for&lt;/span> x86_64 - AppStream &lt;span class="o">(&lt;/span>RPMs&lt;span class="o">)&lt;/span> 3.9 kB/s &lt;span class="p">|&lt;/span> 4.1 kB 00:01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dependencies resolved.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=============================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Package Architecture Version Repository &lt;span class="nv">Size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=============================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elasticsearch x86_64 8.4.3-1 @commandline &lt;span class="m">540&lt;/span> M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction &lt;span class="nv">Summary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=============================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Install &lt;span class="m">1&lt;/span> Package
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total size: &lt;span class="m">540&lt;/span> M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed size: 1.1 G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Is this ok &lt;span class="o">[&lt;/span>y/N&lt;span class="o">]&lt;/span>: y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Downloading Packages:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction check succeeded.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction &lt;span class="nb">test&lt;/span> succeeded.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Preparing : 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Running scriptlet: elasticsearch-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating elasticsearch group... OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating elasticsearch user... OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Installing : elasticsearch-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Running scriptlet: elasticsearch-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------- Security autoconfiguration information ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Authentication and authorization are enabled.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLS &lt;span class="k">for&lt;/span> the transport and HTTP layers is enabled and configured.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The generated password &lt;span class="k">for&lt;/span> the elastic built-in superuser is : guJrLagKN5bsmUh72bha
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this node should join an existing cluster, you can reconfigure this with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;/usr/share/elasticsearch/bin/elasticsearch-reconfigure-node --enrollment-token &amp;lt;token-here&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">after creating an enrollment token on your existing cluster.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can &lt;span class="nb">complete&lt;/span> the following actions at any time:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reset the password of the elastic built-in superuser with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;/usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generate an enrollment token &lt;span class="k">for&lt;/span> Kibana instances with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generate an enrollment token &lt;span class="k">for&lt;/span> Elasticsearch nodes with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s node&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo systemctl &lt;span class="nb">enable&lt;/span> elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### You can start elasticsearch service by executing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo systemctl start elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/lib/tmpfiles.d/elasticsearch.conf:1: Line references path below legacy directory /var/run/, updating /var/run/elasticsearch → /run/elasticsearch&lt;span class="p">;&lt;/span> please update the tmpfiles.d/ drop-in file accordingly.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Verifying : elasticsearch-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed products updated.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elasticsearch-8.4.3-1.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Complete!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完毕之后，用 vi 编辑器打开 &lt;code>/etc/elasticsearch/elasticsearch.yml&lt;/code> 配置文件 ； 在这个默认配置文件中寻找类似这样的一行 &lt;code>cluster.initial_master_nodes: [&amp;quot;elk8&amp;quot;]&lt;/code> ；将这一行注释掉。&lt;/p>
&lt;p>然后在此配置文件的最下面增加下面这几行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">cluster.name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">homelab-elk8&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">discovery.type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">single-node&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network.host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.0.0.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.authc.api_key.enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动 Elasticsearch 服务，并查看服务的状态。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在使用 ES 前，可以先修改ES服务初始化的内建用户密码，改成自己好记的安全可控密码。否则需要到 ES 的启动日志里寻找系统自动生产的管理员密码。&lt;/p>
&lt;p>运行 &lt;code>/usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic -i&lt;/code> 命令修改 ES 的管理员账号 elastic 的密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic -i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This tool will reset the password of the &lt;span class="o">[&lt;/span>elastic&lt;span class="o">]&lt;/span> user.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You will be prompted to enter the password.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please confirm that you would like to &lt;span class="k">continue&lt;/span> &lt;span class="o">[&lt;/span>y/N&lt;span class="o">]&lt;/span>y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter password &lt;span class="k">for&lt;/span> &lt;span class="o">[&lt;/span>elastic&lt;span class="o">]&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Re-enter password &lt;span class="k">for&lt;/span> &lt;span class="o">[&lt;/span>elastic&lt;span class="o">]&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password &lt;span class="k">for&lt;/span> the &lt;span class="o">[&lt;/span>elastic&lt;span class="o">]&lt;/span> user successfully reset.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在启动 ES 服务前，打开后续测试所需要的防火墙端口。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-port&lt;span class="o">=&lt;/span>9200/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-port&lt;span class="o">=&lt;/span>5601/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-port&lt;span class="o">=&lt;/span>8220/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在浏览器里访问 es 的访问网址 https://10.0.30.105:9200/ ，忽略关于证书的安全提示，输入上面所修改的 elastic 账户信息，测试是否可以正常登录。&lt;/p>
&lt;h2 id="安装-kibana">安装 Kibana&lt;/h2>
&lt;p>下载 Kibana 的 rpm 安装包到服务器，然后执行下面的安装命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># dnf install kibana-8.4.3-x86_64.rpm &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating Subscription Management repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Last metadata expiration check: 0:22:56 ago on Sun &lt;span class="m">16&lt;/span> Oct &lt;span class="m">2022&lt;/span> 02:20:20 PM CST.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dependencies resolved.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=======================================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Package Architecture Version Repository &lt;span class="nv">Size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=======================================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kibana x86_64 8.4.3-1 @commandline &lt;span class="m">274&lt;/span> M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction &lt;span class="nv">Summary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=======================================================================================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Install &lt;span class="m">1&lt;/span> Package
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total size: &lt;span class="m">274&lt;/span> M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed size: &lt;span class="m">649&lt;/span> M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Is this ok &lt;span class="o">[&lt;/span>y/N&lt;span class="o">]&lt;/span>: y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Downloading Packages:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction check succeeded.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transaction &lt;span class="nb">test&lt;/span> succeeded.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running transaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Preparing : 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Running scriptlet: kibana-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Installing : kibana-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Running scriptlet: kibana-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating kibana group... OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating kibana user... OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created Kibana keystore in /etc/kibana/kibana.keystore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/lib/tmpfiles.d/elasticsearch.conf:1: Line references path below legacy directory /var/run/, updating /var/run/elasticsearch → /run/elasticsearch&lt;span class="p">;&lt;/span> please update the tmpfiles.d/ drop-in file accordingly.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Verifying : kibana-8.4.3-1.x86_64 1/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed products updated.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kibana-8.4.3-1.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Complete!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在启动 Kiban 服务器之前，先需要创建 Kibana 需要的各种加密 key ，执行下面的命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/kibana/bin/kibana-encryption-keys generate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.encryptedSavedObjects.encryptionKey: 2e71f1b16031c2b111b76276268dbf9e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.reporting.encryptionKey: 84cb58b5e944fa9f65f73382384612a5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.encryptionKey: c5ac5b306ee011838a67e2eaf4154dd0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>记录以上三行配置参数，并增加2行新参数，将它们全部添加到 Kibana 默认的配置文件中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">server.host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.0.0.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server.publicBaseUrl&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;http://10.0.30.105:5601&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.encryptedSavedObjects.encryptionKey&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">2e71f1b16031c2b111b76276268dbf9e&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.reporting.encryptionKey&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">84cb58b5e944fa9f65f73382384612a5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.encryptionKey&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">c5ac5b306ee011838a67e2eaf4154dd0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用 vi 打开 Kibana 的默认配置文件 &lt;code>/etc/kibana/kibana.yml&lt;/code> ，将上面的 5 行配置参数添加到文件中。&lt;/p>
&lt;p>在命令行执行 &lt;code>systemctl enable --now kibana&lt;/code> 命令启动 Kibana 服务器.&lt;/p>
&lt;p>然后执行命令 &lt;code>tail -f /var/log/messages&lt;/code> ， 在日志中寻找 Kibana 服务启动的信息，等待出现 Kibana 配置的访问 URL。在日志中寻找类似这样的信息：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="err">Oct&lt;/span> &lt;span class="mi">18&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="mi">48&lt;/span> &lt;span class="err">elk&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="err">kibana&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2163&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="err">i&lt;/span> &lt;span class="err">Kibana&lt;/span> &lt;span class="err">has&lt;/span> &lt;span class="err">not&lt;/span> &lt;span class="err">been&lt;/span> &lt;span class="err">configured.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Oct&lt;/span> &lt;span class="mi">18&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="mi">48&lt;/span> &lt;span class="err">elk&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="err">kibana&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2163&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="err">Go&lt;/span> &lt;span class="err">to&lt;/span> &lt;span class="err">http:&lt;/span>&lt;span class="c1">//0.0.0.0:5601/?code=732948 to get started.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将 0.0.0.0 替换为这台虚拟机的 IP 地址，然后在浏览器中打开这个类似这个 &lt;code>http://10.0.30.105:5601/?code=732948&lt;/code> 网址。网页中会出现一个大输入框，等待输入Kibana 注册秘钥。&lt;/p>
&lt;p>在命令行执行 &lt;code>/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana&lt;/code> 命令，从而获取 Kibana 的注册令牌。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">eyJ2ZXIiOiI4LjQuMyIsImFkciI6WyIxOTIuMTY4LjEwLjEwOjkyMDAiXSwiZmdyIjoiZTdlOTdlZWU2YWVlYjVmYTczZWM1YTVkNzBiNDJkZGUzZjlkZmNjMDJhNTVmZDcwZjAxOTQwZmExNzE5YWM2MSIsImtleSI6IjNHLVEzNE1CYnA4c3p4TEZEZXpCOk0wUDMzRC1VVFAyT0ZxQVFBekNKSWcifQ&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将这个 Token 复制到网页里，完成Kibana 的初始化配置，最后用 es 的管理员账号登录 Kibana。&lt;/p>
&lt;p>从 kiban 目录中找到 es 的根 ca 证书，将其安装在系统的默认根证书目录中。查看 Kibana 的配置文件找到类似这样的一行配置信息。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">elasticsearch.ssl.certificateAuthorities: &lt;span class="o">[&lt;/span>/var/lib/kibana/ca_1666060779947.crt&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行下面的命令安装这个根证书。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">update-ca-trust &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /var/lib/kibana/ca_1666060779947.crt /etc/pki/ca-trust/source/anchors/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">update-ca-trust extract
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建议将这个根证书也用这个方法复制到其他需要用 Elastic Agent 采集监控数据的操作系统中，并安装备用。也可以在 Elastic Agent 安装的时候指定忽略 ES 证书校验的参数。&lt;/p>
&lt;h2 id="安装-fleet-服务器">安装 Fleet 服务器&lt;/h2>
&lt;p>在 Kibana 的菜单中找到， Fleet 选项，点击 Settings，然后点击 Edit Hosts ，选择增加 Fleet server 配置信息，输入 &lt;code>https://10.0.30.105:8220&lt;/code> ，注意这里必须是 https协议。&lt;/p>
&lt;p>回到 Fleet 主页，找到 agent 管理的地方，按照流程做，点击创建 Fleet Server 配置。然后就会在页面上生成 Fleet 服务器的安装配置命令。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_10-46-39.png"
width="1280"
height="1090"
srcset="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_10-46-39_hued2119289807af56ea4ec3652112b265_408386_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_10-46-39_hued2119289807af56ea4ec3652112b265_408386_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Fleet server"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="281px"
>&lt;/p>
&lt;p>按着提示的命令参数安装 Fleet 服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> elastic-agent-8.4.3-linux-x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ./elastic-agent install &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --fleet-server-es&lt;span class="o">=&lt;/span>https://192.168.10.10:9200 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --fleet-server-service-token&lt;span class="o">=&lt;/span>AAEAAWVsYXN0aWMvZmxlZXQtc2VydmVyL3Rva2VuLTE2NjU5MTM3ODg1NTA6aWdrR1pvNk9SWmk5N09tV3pUQktTUQ &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --fleet-server-policy&lt;span class="o">=&lt;/span>fleet-server-policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --insecure
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面是连续四条安装命令，需要在最后一条命中，增加一个参数 &lt;code>--insecure&lt;/code> ；这样可以确保 Fleet 服务器的正常配置。&lt;/p>
&lt;p>在 Fleet 服务器正常启动以后，上面创建 Fleet 服务器配置的网页上的最后一步就会显示：Fleet 服务器已经连接正常，等待注册 Elastic Agent 。这样表明 Fleet 服务器已经安装正常，并且运行在默认的代理配置采集策略下。&lt;/p>
&lt;p>可以在 Kibana 的界面里查看 Fleet 服务器的监控信息。点击 Kibana 左上角的菜单：Observability -&amp;gt; Infrastructure -&amp;gt; Inventory ，即可看到 Fleet 服务器的监控数据。&lt;/p>
&lt;h2 id="安装-elastic-agent-监控代理">安装 Elastic Agent 监控代理&lt;/h2>
&lt;p>在 Fleet 的管理界面中新增一个名为 my-policy1 的管理策略，避免和 Fleet 服务器使用相同的策略。点击 Add agent 连接，获取如下代理注册命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> elastic-agent-8.4.3-linux-x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ./elastic-agent install --url&lt;span class="o">=&lt;/span>https://10.0.30.105:8220 --enrollment-token&lt;span class="o">=&lt;/span>&lt;span class="nv">NW9ZTjZZTUJtUENhc0ZFTDI5SV86MkZQT1hlc2dUOEdWZnRrWWhNbXVjdw&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将上面的命令复制到一个写字板中，修改最后一条命令，在最后增加&lt;code>--insecure&lt;/code> 参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./elastic-agent install --url&lt;span class="o">=&lt;/span>https://10.0.30.105:8220 --enrollment-token&lt;span class="o">=&lt;/span>&lt;span class="nv">NW9ZTjZZTUJtUENhc0ZFTDI5SV86MkZQT1hlc2dUOEdWZnRrWWhNbXVjdw&lt;/span>&lt;span class="o">==&lt;/span> --insecure
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>通过执行上面的命令，我们就在被管理服务器上，一键式的安装了用于数据采集功能的 Elastic Agent ，并将其注册到 Fleet 服务器上。你也可以手工下载好 &lt;code>elastic-agent-8.4.3-linux-x86_64.tar.gz &lt;/code> 文件，但是反复在多个被管理服务器上复制也很麻烦。&lt;/p>
&lt;h2 id="搭建本地安装包下载服务器">搭建本地安装包下载服务器&lt;/h2>
&lt;p>为了让局域网中的操作系统能就近下载 Elastic Stack 技术栈中，所有可以通过 Fleet 服务器管理（安装、配置、升级、删除等）的组件，我们可以参考文档的方法：https://www.elastic.co/guide/en/fleet/8.4/air-gapped.html#host-artifact-registry 在本地部署一个安装包下载服务器。&lt;/p>
&lt;p>首先，安装一个 Nginx 服务器，在根目录下创建目录 downloads ，并且运行下面的下载脚本。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/apm-server/apm-server-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/apm-server/apm-server-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/apm-server/apm-server-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/auditbeat/auditbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/osquerybeat/osquerybeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/osquerybeat/osquerybeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/osquerybeat/osquerybeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/cloudbeat/cloudbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/cloudbeat/cloudbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/cloudbeat/cloudbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/endpoint-dev/endpoint-security-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/endpoint-dev/endpoint-security-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/endpoint-dev/endpoint-security-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/fleet-server/fleet-server-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/fleet-server/fleet-server-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://artifacts.elastic.co/downloads/fleet-server/fleet-server-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将下载后的目录结构整理的和下载路径一致，目录结构如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 html&lt;span class="o">]&lt;/span>&lt;span class="c1"># tree downloads/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">downloads/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── apm-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── apm-server-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── apm-server-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── apm-server-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── beats
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── auditbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── auditbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── auditbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── auditbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── elastic-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── elastic-agent-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── elastic-agent-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── filebeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── filebeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── filebeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── filebeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── heartbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── heartbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── heartbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── heartbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── metricbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── metricbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── metricbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── metricbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── osquerybeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── osquerybeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── osquerybeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── osquerybeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── packetbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── packetbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── packetbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── packetbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── cloudbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── cloudbeat-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── cloudbeat-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── cloudbeat-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── endpoint-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── endpoint-security-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── endpoint-security-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── endpoint-security-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── fleet-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── fleet-server-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── fleet-server-8.4.3-linux-x86_64.tar.gz.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── fleet-server-8.4.3-linux-x86_64.tar.gz.sha512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── pull-bin.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">12&lt;/span> directories, &lt;span class="m">34&lt;/span> files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@elk8 html&lt;span class="o">]&lt;/span>&lt;span class="c1"># &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了方便查看这个目录的内容，修改 nginx 的默认配置文件，在 http 这个部分增加下面三个参数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">autoindex on; &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">autoindex_exact_size off;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">autoindex_localtime on; &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启 Nginix 服务器后，在浏览器中可以访问： http://192.168.10.10/downloads/ ，确保可以看到正确的目录结构和文件。&lt;/p>
&lt;p>进入 Fleet 的配置页面，在 &lt;code>Agent Binary Download&lt;/code> 下面点击 “Add agent binary source” ，新建一个新的代理安装包下载来源网站。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-21-44.png"
width="1920"
height="1436"
srcset="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-21-44_hu6d3808d576643b687df324b71c01ffb6_486337_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-21-44_hu6d3808d576643b687df324b71c01ffb6_486337_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Agent Binary Download"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>在 Agent Policies 页面新建一个新的测试用 Agent 管理策略，名为 “my-policy2”；进入这个策略的配置界面，修改 &lt;em>Agent Binary Download&lt;/em> 为刚才创建的下载源。保存并测试这个策略。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-25-35.png"
width="1920"
height="1860"
srcset="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-25-35_hue7fe63b2af72a8ef5e3f4cbdb50f3e9f_711852_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_14-25-35_hue7fe63b2af72a8ef5e3f4cbdb50f3e9f_711852_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="103"
data-flex-basis="247px"
>&lt;/p>
&lt;p>点击 “Add agent” 连接，获取下面的新注册代理注册命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz tar xzvf elastic-agent-8.4.3-linux-x86_64.tar.gz &lt;span class="nb">cd&lt;/span> elastic-agent-8.4.3-linux-x86_64 sudo ./elastic-agent install --url&lt;span class="o">=&lt;/span>https://10.0.30.105:8220 --enrollment-token&lt;span class="o">=&lt;/span>&lt;span class="nv">R29qRDZZTUJtUENhc0ZFTFNDSW06bVFOeW5vcUpTQmFmZDBwLUgyTDBYZw&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改这些命令参数，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -L -O http://192.168.10.10/downloads/beats/elastic-agent/elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf elastic-agent-8.4.3-linux-x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> elastic-agent-8.4.3-linux-x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ./elastic-agent install --url&lt;span class="o">=&lt;/span>https://10.0.30.105:8220 --enrollment-token&lt;span class="o">=&lt;/span>&lt;span class="nv">R29qRDZZTUJtUENhc0ZFTFNDSW06bVFOeW5vcUpTQmFmZDBwLUgyTDBYZw&lt;/span>&lt;span class="o">==&lt;/span> --insecure
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>SSH 登录到另外一个虚拟机，用新创建的 Agent 管理策略，一键式安装 Elastic Agent 并注册到 Fleet 服务器。由于这个策略使用了本地的安装包（默认会使用到 Filebeat 和 Metricbeat），所以它的部署速度应该会比较快。&lt;/p>
&lt;p>在 Elastic Agent 的日志文件中应该可以看到类似这样的信息。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">cat /opt/Elastic/Agent/elastic-agent-20221018.ndjson
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">```&lt;/span>json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;log.level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;@timestamp&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2022-10-18T14:37:26.697+0800&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;log.origin&amp;#34;&lt;/span>:&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;file.name&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;artifact/config.go&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;file.line&amp;#34;&lt;/span>:138&lt;span class="o">}&lt;/span>,&lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;Source URI changed from \&amp;#34;https://artifacts.elastic.co/downloads/\&amp;#34; to \&amp;#34;http://192.168.10.10/downloads/\&amp;#34;&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ecs.version&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;1.6.0&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个信息表示：当前的 Agent 会使用上面自建的安装包下载源服务器。&lt;/p>
&lt;p>用这个命令 &lt;code>elastic-agent inspect&lt;/code> 也可以确认这个配置。&lt;/p>
&lt;h2 id="万用采集端的好处">万用采集端的好处&lt;/h2>
&lt;p>在上一篇文章中已经说过了这个问题，这里不赘述。&lt;/p>
&lt;p>为了验证这个功能，可以尝试更新当前的一个 policy，增加 Packetbeat 数据采集能力。操作步骤如下：&lt;/p>
&lt;ol>
&lt;li>打开当前的一个正在使用中 policy&lt;/li>
&lt;li>点击 Add intergation 按钮，在众多选项中选择 Network Packet Capture 模块。&lt;/li>
&lt;li>增加新的采集模块后，保存这个策略。&lt;/li>
&lt;li>它更新了版本，观察 Fleet 界面上所有使用这个策略的节点的状态变化。&lt;/li>
&lt;li>这些节点会自动的，很快的更新到新的管理策略中，Elastic Agent 会自动化安装 Packetbeat 采集模块。&lt;/li>
&lt;li>返回 Kiban ，进入安全管理解决方案，我们可以看到 Filebeat 和 Packetbeat 的采集结果。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-49-08.png"
width="1920"
height="817"
srcset="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-49-08_hu4c26ea6ad551054cfce4b51aae79f71b_336303_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-49-08_hu4c26ea6ad551054cfce4b51aae79f71b_336303_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="添加 Packetbeat 模块"
class="gallery-image"
data-flex-grow="235"
data-flex-basis="564px"
>&lt;/p>
&lt;p>在策略更新了以后，我们没有在 Elastic Agent 端做任何操作，它就已经自动化的下载新的策略，并更新了自身。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-53-55.png"
width="1920"
height="1675"
srcset="https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-53-55_hu9ee2089e681a1336236405d549bc43b1_785466_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/elastic-agent-fleet-update-8-4/2022-10-18_22-53-55_hu9ee2089e681a1336236405d549bc43b1_785466_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="查看 安全管理解决方案"
class="gallery-image"
data-flex-grow="114"
data-flex-basis="275px"
>&lt;/p>
&lt;h2 id="常见问题">常见问题&lt;/h2>
&lt;p>Elastic Agent 在采集数据的服务上安装正常，在 Fleet 服务器的管理界面中也可以看到其状态正常。但是在可观测性的页面中看不到它的任何数据。&lt;/p>
&lt;p>可能的原因：Elastic Agent 采集端程序和 ES 后台服务器的通讯不正常，检查 9200 端口，用 curl + ES 服务器端的数字证书，用户名和密码，尝试访问 ES 的服务地址 &lt;code>https://192.168.10.10:9200&lt;/code>。&lt;/p>
&lt;p>也可以尝试在 Fleet 的管理页面上删除这个 Agent；然后在被管理服务器上，用命令 &lt;code>elastic-agent uninstall&lt;/code> 删除服务，然后重新安装注册这个被管理服务器，注意在注册命令的最后面可以尝试增加这两个参数：&lt;code> --insecure --fleet-server-es-insecure&lt;/code> 第一个参数是忽略 Fleet 服务器的 ssl 证书校验，第二个参数是忽略 es 服务器的 ssl 证书校验。或者尝试重新手工安装一遍 es 服务器上的 ca 根证书。&lt;/p>
&lt;p>Feature picture ❤️ Brett Sayles图片: &lt;a class="link" href="https://www.pexels.com/zh-cn/photo/2881224/" target="_blank" rel="noopener"
>https://www.pexels.com/zh-cn/photo/2881224/&lt;/a>&lt;/p></description></item><item><title>面向未来的 Elastic Stack 数据摄入架构</title><link>https://martinliu.cn/blog/fleet-and-elastic-agent/</link><pubDate>Mon, 17 Oct 2022 21:09:52 +0800</pubDate><guid>https://martinliu.cn/blog/fleet-and-elastic-agent/</guid><description>&lt;img src="https://martinliu.cn/blog/fleet-and-elastic-agent/pexels-analogicus-5516029.jpg" alt="Featured image of post 面向未来的 Elastic Stack 数据摄入架构" />&lt;h2 id="数据摄入的痛点">数据摄入的痛点&lt;/h2>
&lt;p>安装、升级和维护各种数据采集工具，包括 Filebeat、Metricbeat、APM 埋点、Logstash数据重整转发、端点安全控制，还有很多很多其它功能选项，貌似每增加一丁点功能，以前的数据采集项目又要重新再来一遍。&lt;/p>
&lt;p>采集管理的配置文件不光只是 YAML 文件，越写越长的 YAML 文件渐渐将你带入了十八层地狱。&lt;/p>
&lt;p>在每个端点上启用和配置不同采集模块行为参数，很多情况下，你不得不在大量采集点的命令行里执行配置命令。&lt;/p>
&lt;p>不同采集模块在采集节点上都需要创建新的用户，不仅复杂化了操作系统用户的管理，还可能引入更多的风险。&lt;/p>
&lt;p>自动化配置管理工具可以批量分发和部署这些数据摄入配置文件，但是你又不得不为此学习另外一种新的武功。&lt;/p>
&lt;h2 id="优化的方向">优化的方向&lt;/h2>
&lt;h3 id="简化采集端部署">简化采集端部署&lt;/h3>
&lt;p>下面是 Elastic Agent 所实现的效果。减少采集不同类型数据的采集代理程序的种类，最好能只使用一个全功能的采集代理程序；有可能的话用一种万能的采集代理程序替代所有单点采集程序，诸如：Filebeat， Metricbeat， APM Agent， Heartbeat， Winlogbeat 等等各种 Elastic Stack 的采集程序。其他的这种类型的各个厂商和各种开源工具你可以自己联想。&lt;/p>
&lt;p>尽量发挥万能型采集代理程序的特性，最好它能够一键式的安装，能支持上百种流行的开源软件、商业软件和云服务。&lt;/p>
&lt;p>在采集代理程序开始正常工作以后，避免在端点的命令做任何配置工作。&lt;/p>
&lt;p>以上的数据采集端点程序部署在大多数情况下，都是覆盖可观测性解决方案的需求；如果可能的话，能够兼顾信息安全管理需求是一种更高效的做法；如果能一石二鸟，那又何乐而不为呢。&lt;/p>
&lt;h3 id="直观的集中统一管理">直观的集中统一管理&lt;/h3>
&lt;p>使用一个统一的采集代理管理中间层 Fleet 掌控全局。在这里一站式的实现采集代理的配置分发、更新等变更；实现采集代理程序的持续版本升级；随着采集端点数量的蔓延，横向扩展 Fleet 层，用一个 Fleet 服务器对接分布在各地的数千个 Elastic Agent。&lt;/p>
&lt;h2 id="elk-数据摄入架构变迁">ELK 数据摄入架构变迁&lt;/h2>
&lt;p>7.13 的 ELK 架构是持续了很久的传统模式，是社区里存在着大量描述文章，本文忽略对其的解释。&lt;/p>
&lt;p>渐进式的架构变化是从 7.13 开始初具雏形的，Fleet 功能组件作为 Kibana 的内置功能，正式登场。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-34-49.png"
width="1986"
height="872"
srcset="https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-34-49_hubd0468a4f6d3cbbff5ba33ed0197468d_188767_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-34-49_hubd0468a4f6d3cbbff5ba33ed0197468d_188767_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="7.13 前的架构图"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="546px"
>&lt;/p>
&lt;p>Kiban 的定位是作为 Elastic Stack 的数据探索窗口，和管理控制平面。统一管理 Elastic Agent 需要增加两个功能：策略管理器和配置包管理器。需要引入新的 Fleet 服务器实现下面的需求：&lt;/p>
&lt;ul>
&lt;li>对 n 多采集点的更小暴露平面。&lt;/li>
&lt;li>降低了 Kibana 服务器本身资源消耗和部署工作量。&lt;/li>
&lt;li>更容易管理并发模式。&lt;/li>
&lt;/ul>
&lt;p>从 7.14 以后的架构图如下。这是以后的发展方向。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-36-03.png"
width="2062"
height="880"
srcset="https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-36-03_hu864f31ad5498d8c494b4f2833cfe0df1_208313_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/fleet-and-elastic-agent/2022-10-17_23-36-03_hu864f31ad5498d8c494b4f2833cfe0df1_208313_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="7.14 后的架构图"
class="gallery-image"
data-flex-grow="234"
data-flex-basis="562px"
>&lt;/p>
&lt;p>Fleet 服务器的代码和 Elastic Agent 是一套程序。它就像是一个万能工具一样。&lt;/p>
&lt;p>它在对底层的采集端点上，实现的是全能型代理程序的管理。他在 Fleet 这个模式的主要功能是：从 Elasticsearch 后端或许最新版的 Agent 管理策略；相应采集端点上采集代理的管理策略拉取请求。管理策略的单向下发，采集数据的单向上传可以有几个选项，或者集中目标：&lt;/p>
&lt;ol>
&lt;li>自己部署管理的 Elasticsearch 集群&lt;/li>
&lt;li>自己部署管理的 Logstash 服务器&lt;/li>
&lt;li>Elastic Cloud SaaS 服务里的 Elasticsearch 服务端点&lt;/li>
&lt;li>Elastic Cloud SaaS 服务里的 Logstash 服务端点&lt;/li>
&lt;/ol>
&lt;p>Elastic Agent 采集端进程管理所有其他 Beats 进程，使用 GRPC 通讯协议发送数据，和下拉管理策略更新。&lt;/p>
&lt;p>Elastic Agent 可以工作在被 Fleet 服务器统一管理的模式；也还可以运行在独立自管理状态，从而满足极端少量的特殊需求。&lt;/p>
&lt;p>其他周边的重要组件：&lt;/p>
&lt;ol>
&lt;li>Elastic Package Registry - 包含了 Elastic Stack 技术栈中所有组件的配置细节，包括安装、升级、更新和删除等等。用 zip 压缩包文件的方式分发。&lt;/li>
&lt;li>Policy Builder - 在 Kibana 的界面里展现所有可以让用户掌控/修改定制的配置细节，用简单的开关按钮和输入框完成不容易出错的采集配置细节的定制，这样就消除了对 YAML 配置文件的管理。&lt;/li>
&lt;/ol>
&lt;p>参考信息：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.elastic.co/guide/en/fleet/current/index.html" target="_blank" rel="noopener"
>Fleet and Elastic Agent Guide&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.elastic.co/blog/review-testing-methods-for-elastic-integrations-using-the-elastic-package-tool" target="_blank" rel="noopener"
>Review testing methods for Elastic integrations using the elastic-package tool&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Feature picture ❤️ analogicus图片: &lt;a class="link" href="https://www.pexels.com/zh-cn/photo/5516029/" target="_blank" rel="noopener"
>https://www.pexels.com/zh-cn/photo/5516029/&lt;/a>&lt;/p></description></item><item><title>SRE 实践的知识体系梳理</title><link>https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/</link><pubDate>Mon, 10 Oct 2022 23:13:43 +0800</pubDate><guid>https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/</guid><description>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/1_er5uoPoOmLkfuxjTAy2zwQ.jpeg" alt="Featured image of post SRE 实践的知识体系梳理" />&lt;blockquote>
&lt;p>直播预告。在 10 月 19 日晚上，我会在社区里再次为大家梳理一下 SRE 的知识体系模型，还是用脑图的方式，向大家讲解 SRE 都有相关部分组成。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/poster.jpg"
width="1080"
height="1920"
srcset="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/poster_hu6517075e5dc9b0c2ab0e11bc34fac1ed_466978_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/poster_hu6517075e5dc9b0c2ab0e11bc34fac1ed_466978_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="活动报名海报"
class="gallery-image"
data-flex-grow="56"
data-flex-basis="135px"
>&lt;/p>
&lt;p>本次直播活动的录播视频。&lt;/p>
&lt;div class="video-wrapper">
&lt;iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;amp;high_quality=1&amp;amp;page=1&amp;bvid=BV1XD4y1r7dS"
scrolling="no"
frameborder="no"
framespacing="0"
allowfullscreen="true"
>
&lt;/iframe>
&lt;/div>
&lt;p>下面这幅脑图是在我翻译完了《SRE Workbook》之后编写的，用了我好几天的时间，并且前后改了好几版。&lt;/p>
&lt;p>编制这个脑图的出发点在于：SRE 从来源到 5 大基础模块，到推广实施的方法论都看似比较完整，比较成体系。这种脉络明晰的知识体系（knowledge body）本来就有画出脑图的可能性；而且脑图应该是一种比较便于吸收和学习的形式。&lt;/p>
&lt;p>脑图的第一个版本是从 《SRE Workbook》的目录开始的，我尝试用最精简的方式，梳理每一章节中的知识点。可是在编制了前两章以后，就发现这个工作量其实非常的大。然后，我果断的放弃了“完美”的目标，然后将目标定位为：先完成一版。下图就是这样一个版本。后续我们讨论还有那些改进和与社区协作的想法。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/SRE-Workbookv1.5.jpg"
width="1921"
height="15987"
srcset="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/SRE-Workbookv1.5_huf0f9a85bb1809319b815bf2ddc711170_1940634_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/SRE-Workbookv1.5_huf0f9a85bb1809319b815bf2ddc711170_1940634_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="SRE 知识体系脑图"
class="gallery-image"
data-flex-grow="12"
data-flex-basis="28px"
>&lt;/p>
&lt;p>后续的未尽事项：&lt;/p>
&lt;ul>
&lt;li>细化现有版本，将《SRE Workbook》中的知识点尽量都涵盖尽量。&lt;/li>
&lt;li>将 SRE 的第一本出版物《Google SRE 运维解密》也梳理进来，由于它已经被 Workbook 彻底包含，并且多次引用。&lt;/li>
&lt;li>将 SRE 安全那本书也梳理进来，由于安全的特殊性，独立做一个节点梳理比较现实；如果能融入的更好，则更加。&lt;/li>
&lt;li>需要找到一种方便人们协作的线上脑图协作软件，应该至少具备一下功能：
&lt;ul>
&lt;li>多人协作&lt;/li>
&lt;li>评论知识点&lt;/li>
&lt;li>支持导入导出标准格式的脑图文件&lt;/li>
&lt;li>支持导入导出 pdf，png，jpg ，html 等方便人们引用的文档&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>欢迎范围和参考 Google 官方 SRE 独立站点。https://sre.google/&lt;/p>
&lt;p>网站中的相关出版书籍如下。&lt;/p>
&lt;h2 id="site-reliability-engineering">Site Reliability Engineering&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre1.jpg"
width="400"
height="512"
srcset="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre1_hu53835effa6f9d1306cd24ea0f0435d4a_134656_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre1_hu53835effa6f9d1306cd24ea0f0435d4a_134656_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="sre book 1"
class="gallery-image"
data-flex-grow="78"
data-flex-basis="187px"
>&lt;/p>
&lt;ul>
&lt;li>中文版书名：&lt;a class="link" href="https://book.douban.com/subject/26875239//" target="_blank" rel="noopener"
>SRE：Google运维解密&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://sre.google/sre-book/table-of-contents/" target="_blank" rel="noopener"
>英文版线上阅读&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="the-site-reliability-workbook">The Site Reliability Workbook&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre2.jpg"
width="399"
height="512"
srcset="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre2_hu86e42e7f2523b776da22047c5be51759_67632_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre2_hu86e42e7f2523b776da22047c5be51759_67632_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="sre book 2"
class="gallery-image"
data-flex-grow="77"
data-flex-basis="187px"
>&lt;/p>
&lt;ul>
&lt;li>中文版书名：&lt;a class="link" href="https://book.douban.com/subject/35224058/" target="_blank" rel="noopener"
>Google SRE 工作手册&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://sre.google/sre-book/table-of-contents/" target="_blank" rel="noopener"
>英文版线上阅读&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="building-secure--reliable-systems">Building Secure &amp;amp; Reliable Systems&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre3.jpg"
width="399"
height="512"
srcset="https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre3_hud32f4122fb66ecf5dafbe90e60b5874f_53729_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/sre-knowedge-body-mind-map-live-show/sre3_hud32f4122fb66ecf5dafbe90e60b5874f_53729_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="sre book 3"
class="gallery-image"
data-flex-grow="77"
data-flex-basis="187px"
>&lt;/p>
&lt;ul>
&lt;li>中文书名：&lt;a class="link" href="https://book.douban.com/subject/35585206/" target="_blank" rel="noopener"
>《Google系统架构解密》&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://sre.google/static/pdf/building_secure_and_reliable_systems.pdf" target="_blank" rel="noopener"
>英文版 PDF 版 官方免费下载&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>亲手为自己打造一个完美的机架</title><link>https://martinliu.cn/blog/build-your-best-rack/</link><pubDate>Mon, 10 Oct 2022 00:00:39 +0800</pubDate><guid>https://martinliu.cn/blog/build-your-best-rack/</guid><description>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/R-C.jpg" alt="Featured image of post 亲手为自己打造一个完美的机架" />&lt;p>下面是标准的 IDC 机架结构示意图，结构比较复杂，发挥其所有功能还需要依赖于专业机房所提供的风火水电环境的各种配套支持。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/HTB1GD4ePFXXXXXCXVXXq6xXFXXXr.jpg"
width="1000"
height="772"
srcset="https://martinliu.cn/blog/build-your-best-rack/HTB1GD4ePFXXXXXCXVXXq6xXFXXXr_hu76b3a01f68a09f37a60f4310d03a523d_159801_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/HTB1GD4ePFXXXXXCXVXXq6xXFXXXr_hu76b3a01f68a09f37a60f4310d03a523d_159801_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="标准服务器网络机架机构图"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="310px"
>&lt;/p>
&lt;p>下面这个标准规格【42u x 19 英寸】机架架结构图，这是最常见的服务器机柜，在普通的办公室里，或者公司专门的 server room 服务器机房中很常见。高低、深浅、能否墙挂都可以选择。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/R-C.png"
width="862"
height="768"
srcset="https://martinliu.cn/blog/build-your-best-rack/R-C_hu220e1828cc881f315c9913a4d705ca4c_184187_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/build-your-best-rack/R-C_hu220e1828cc881f315c9913a4d705ca4c_184187_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="机架结构简图"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="269px"
>&lt;/p>
&lt;p>对我来说，显然以上两种的功能过于复杂，并不适合我在家庭使用；我个人比较偏爱 StarTech 公司的开放式机架。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/1013689771.jpg"
width="1500"
height="1500"
srcset="https://martinliu.cn/blog/build-your-best-rack/1013689771_hu84f97fcc9e4e6d77cd23b30cdb028387_185096_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/1013689771_hu84f97fcc9e4e6d77cd23b30cdb028387_185096_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="12U 前后深度可调开放式"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>但是，我发现 StarTech 公司的机架产品在国内没有代理商，在淘宝里也没有卖家。就算是有，价格也比较贵。不过它确实是国外 HomeLab 玩家评测的最多的。&lt;/p>
&lt;p>总结一下我们置办家庭机架的几个所谓合理的动机：&lt;/p>
&lt;ul>
&lt;li>整理收纳一定数量的电脑和网络产品，包括家用 NAS，wifi 和其他可能存在的新旧电脑（包括家用 PC、笔记本、服务器、网络设备等）。&lt;/li>
&lt;li>给这些电子产品更好的运行环境，确保供电、散热、网络连接和安全性等需求。&lt;/li>
&lt;li>让使用更加方便，需要开机的开机，用不到的关机省电。&lt;/li>
&lt;li>目前真在，或者已经走向 HomeLab 的人，请自觉跳这个坑。&lt;/li>
&lt;li>希望在本地组网，并自给自足一定数量本地虚拟机的需求，同时降低或者避免使用云主机的成本。&lt;/li>
&lt;li>其他特殊需求：一个炫酷的机架也是不错的网络软件演示环境和直播的装饰背景。&lt;/li>
&lt;/ul>
&lt;p>下图是我的 HomeLab 机架的第一个版本。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/bamboo-rack.jpg"
width="896"
height="1626"
srcset="https://martinliu.cn/blog/build-your-best-rack/bamboo-rack_hudbaf079301ca7c3d2c25870ff272d3ae_231893_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/bamboo-rack_hudbaf079301ca7c3d2c25870ff272d3ae_231893_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="竹木置物架"
class="gallery-image"
data-flex-grow="55"
data-flex-basis="132px"
>&lt;/p>
&lt;p>设备包括：&lt;/p>
&lt;ul>
&lt;li>CCNA lab 测试设备一套。&lt;/li>
&lt;li>TrueNAS 服务器一台&lt;/li>
&lt;li>四个旧树莓派&lt;/li>
&lt;li>几个旧 MacBook Pro 电脑&lt;/li>
&lt;/ul>
&lt;p>这些版本基本上能满足以上列举的所有需求，成本可以忽略。缺点就是：它的承重能力有限，无法在堆放更多设备。由于疫情的原因，我需要把放在公司的四台PC服务器拿回家，方便使用。&lt;/p>
&lt;p>由于比较了很久国内的品牌服务器机柜，他们的规格很齐全，很多人也都是买的这些成品机柜，到货开箱就可以使用，很方便。但是，成品并没有 DIY 的乐趣可言，我真的是不喜欢有全封闭式机柜，不想虑散机柜内的散热&amp;amp;热制冷问题（以及次生噪音），而且不方便触达设备的各个侧面。&lt;/p>
&lt;p>因此我只能求助与万能的淘宝，在研究了一段时间自行搭建开放式机柜产品的可能性之后，我出手了。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/rack-parts.jpg"
width="1146"
height="1575"
srcset="https://martinliu.cn/blog/build-your-best-rack/rack-parts_huc7be608d0c8e1c27d743af2ef1ab0fc7_245278_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/rack-parts_huc7be608d0c8e1c27d743af2ef1ab0fc7_245278_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="配件开箱后合影"
class="gallery-image"
data-flex-grow="72"
data-flex-basis="174px"
>&lt;/p>
&lt;p>这是第一次下单的产品，包括：&lt;/p>
&lt;ul>
&lt;li>四根 32U 高的立柱：机架高度的选择是 DIY 搭建机架的最重要决策，考虑到一定的扩展性，应该至少规划 130% 的高度。 其次考虑深度，我铁定不想买全尺寸深度（600+mm）的设备，因此实际上就想搭建了一个：32U x 19 寸 x 19 寸的立方体，这就是成品机柜的瓤子，就是柜体里装的金属框架的部分。&lt;/li>
&lt;li>四个服务器托盘 ：如果设备可以上下堆叠的话，其实也不用这么多，但是考虑到分层分区，设备取出和放入的方便性，需要计算好使用的个数。&lt;/li>
&lt;li>四块盲板：是前后上下，将四根立柱连接起来的主要部件。&lt;/li>
&lt;li>两幅服务器导轨：安装在了顶部和底部框架的侧面，将机架的前后链接起来，安装好这四根导轨，机架就可以站立起来了。居然前后左右都不怎么摇晃，整体框架还比较的支棱的 😄&lt;/li>
&lt;li>一个理线架：其实不需要，由于你不可能有大量线需要整理，买多了。&lt;/li>
&lt;/ul>
&lt;p>销售以上产品的淘宝商家是：军臣机柜 1 店；前后从他们家下了两个单（320+38），第二个单补了四根导轨，起稳定机架，更优化的分层分区，更方便的叠放设备的作用，释放了两个托盘，托盘将主要用于在实现开放平层，起到设备物品的放置功能。安装起来后的效果如下。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/rack-bate-version.jpg"
width="953"
height="1706"
srcset="https://martinliu.cn/blog/build-your-best-rack/rack-bate-version_hu1f32a9f23de31fb3b63d3abe4100ebd5_353576_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/rack-bate-version_hu1f32a9f23de31fb3b63d3abe4100ebd5_353576_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="刚刚站起来的机架"
class="gallery-image"
data-flex-grow="55"
data-flex-basis="134px"
>&lt;/p>
&lt;p>在将设备放进去的过程中，发现了几个问题：&lt;/p>
&lt;ul>
&lt;li>洗衣机用移动滑轨无法胜任如此重量机架前后左右的快速移动，而且只能前后移动；还需要一个更加稳定，且更方便四向移动的底座。&lt;/li>
&lt;li>机柜还需封顶，只有封顶后，上面才能便于放置物品。&lt;/li>
&lt;/ul>
&lt;p>解决方法：&lt;/p>
&lt;ol>
&lt;li>在淘宝里买了一块底座板，规格 2cm 厚 x 53cm x 53cm 的压缩板，到货后发现：其实坚固程度不输于实木板。够用且耐用，全面黑漆，多种颜色可选。&lt;/li>
&lt;li>淘宝店家送了我四个万向轮和更多的机架螺丝，轮子安装在了底座板的四个角上，底座比机架大了一圈，既不占地方，也实现了稳定承载机架的目的，还可以四个方向顺滑的移动，其实用不到带锁死功能的万向轮。&lt;/li>
&lt;li>用一块大约19 寸 x 22 寸的房间隔音装修剩下的隔音板封顶，大小相当合适。用木螺丝和机架固定在了一起。&lt;/li>
&lt;/ol>
&lt;p>下面是将所有设备上架，网络连通后，晚上的效果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/build-your-best-rack/rack-night-view.jpg"
width="1113"
height="1392"
srcset="https://martinliu.cn/blog/build-your-best-rack/rack-night-view_hu6dd22f5f2f88c5a36406233f3cdf4212_268798_480x0_resize_q75_box.jpg 480w, https://martinliu.cn/blog/build-your-best-rack/rack-night-view_hu6dd22f5f2f88c5a36406233f3cdf4212_268798_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="夜晚效果图"
class="gallery-image"
data-flex-grow="79"
data-flex-basis="191px"
>&lt;/p>
&lt;p>这么多年来积累下来的所有 HumeLab 设备就都在这里了，堆叠在一起之后意识到，给自己挖的这个坑，是越挖越深了。&lt;/p>
&lt;p>最后从几个方面讲讲当前这个阶段的经验总结。&lt;/p>
&lt;p>&lt;strong>电源供给&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>机架专用 PDU 的好处多多，能用尽量用。&lt;/li>
&lt;li>前置 PDU A ：是一款 1U 高度，前面板 10 位独立开关，后身走电源线的，好处是省空间，后身走电源线更隐蔽、美观。但是需要重新买 10 根美标垂直三叉的电源线（5 根 1 米 + 5 根 1.5 米，这款 PDU 只能插这种电源线），目前还富裕了 2 到 3 根供电源线。&lt;/li>
&lt;li>后置 PDU B ：是一款 2U 高度，8 位独立开关。目前有一个空位；电源插头供电位的需求远远比你想的多得多，除非设备不会在增加了，千万别想一个插排就搞定。&lt;/li>
&lt;li>需要首选可以安装在机架上的 PDU 优于家用的插排。整合性极佳。&lt;/li>
&lt;li>USB 供电，安装一个 10 位的 USB 插排，有了它给树莓派、风扇、灯光设备的供电就方便且统一了，一个电源插头位置就替代了 n 个 usb 变压器插头的需求。&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>网络拓扑&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>入户光纤+光猫+WiFi 给所有无线设备使用，暂时没有无线访问机架内设备的需求，有的话，会首选在 pfSense 上做 NAT 的方式接入，从而最小化 WiFi 部署数量。&lt;/li>
&lt;li>通过房间内的走线管，从入户弱电箱的光猫上拉了一根网线到机架的房间，并且接到机架上。实现了机架的外网链接。在手里云主机资源充足的情况下，我完全忽略远程访问机架中设备的鸡肋需求。&lt;/li>
&lt;li>核心以太网交换机：一台 Cisco 48 口千兆交换机，可划分 VLAN，属于 CCNA Lab 设备的一部分。&lt;/li>
&lt;li>万兆存储网交换机：一台 MikroTik 8 口 SPF+ 交换机，功能很强大，学习曲线陡。用于 TrueNAS 存储服务，和 Nutanix 超融合集群的组网。&lt;/li>
&lt;li>山泽 24 口配线架：用了以后才能理解配线架的底层逻辑，将所有设备都统一终结在同一级，然后就可以在机架前面，按标签快捷的给设备分配不同的网络。&lt;/li>
&lt;li>买了一卷网线制作跳线：配合打线钳和测线器，一盒 50 个的水晶头，做完了一些跳线后，568B 线序就成了肌肉记忆了。推荐使用，虽然费事，但是可以让网线布线&amp;amp;走线更加简洁。&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>风冷散热和用电方式&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>我坚守不使用大功耗&amp;amp;全尺寸服务器设备的原则。感觉只有这样才能实现通过房间环境的自然散热，注意房间的正常通风即可。&lt;/li>
&lt;li>给设备按需增加和升级必要的风冷风扇。&lt;/li>
&lt;li>最耗电的是联想 P720 两路工作站，它是 Nutnaix 集群的一部分，升级了 CPU 的散热器，加装了机箱前置风扇，解决旧风扇导致的无法正常开机和运行中过热机器卡死的问题。&lt;/li>
&lt;li>最牛的是给 8 口 pfSense 防火墙工控机扇热的 USB 桌面小风扇，它顺便还给树莓派集群风冷了；这是从家里小朋友哪里征用的。风量大，几乎静音，基本上能秒掉各种尺寸和价格的 DIY 机箱用风扇，已经买过几个了，它们的噪音大到不能忍。&lt;/li>
&lt;li>常开的设备包括：TrueNAS 服务器和 48 口核心交换机和 MikroTik 万兆交换机。其他的设备按需开机，保持最小的功耗和发热量。&lt;/li>
&lt;li>由于家庭 WiFi 和这个机架无关，因此在需要用的时候，或者人不在家的时候整个机架关机断电。&lt;/li>
&lt;/ol>
&lt;p>以上就是目前的经验总结分享，欢迎交流讨论。以后可能会以本文为大纲录制一期视频，在讲的细一些。&lt;/p></description></item><item><title>更新到 Jimmy Cai 的 Stack Hugo Theme</title><link>https://martinliu.cn/blog/change-to-jimmy-stack-theme/</link><pubDate>Sun, 09 Oct 2022 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/change-to-jimmy-stack-theme/</guid><description>&lt;img src="https://martinliu.cn/blog/change-to-jimmy-stack-theme/2022-10-1-beijing-guomao.jpg" alt="Featured image of post 更新到 Jimmy Cai 的 Stack Hugo Theme" />&lt;p>趁着更新 Blog 皮肤的机会，也把我拖延很久的一些优化补一补。&lt;/p>
&lt;p>最新版本的 Hugo 可以使用 Hugo modules 功能加载一个新的 Theme，我是第一次通过这种方式添加新皮肤，犯了几个错误：&lt;/p>
&lt;ol>
&lt;li>首先不应该用 &lt;code>git clone theme-url theme/&lt;/code> 或者其他手工下载的方式了，应该使用文档中说的 &lt;code>hugo mod get -u github.com/CaiJimmy/hugo-theme-stack/v3&lt;/code> 方法。&lt;/li>
&lt;li>在本地测试的话，需要确保本地的 Hugo 安装的是 extended 的扩展版本，否则有些短代码用不了。用这条命令检查 &lt;code>hugo version&lt;/code> ，应该返回类似这样的信息：&lt;code>hugo v0.104.2+extended darwin/arm64 BuildDate=unknown&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>更新了 GitHub Action 的工作流，实现了如下的想法：&lt;/p>
&lt;ul>
&lt;li>deploy-2-page.yml : 在所有分支的 push 操作上触发构建动作，并且把更新的网站内容发布到 GitHub Pages 的部署分支中，用这个方式实现线上的网站内容预览；当新的分支在本地预览正常后，就可以 push 到远程了，push 之后就可以先在 martinliu.github.io 的域名下实现分支合并前的线上预览，如果线上预览正常的话，在进行合并分支 pr 的操作；如果线上预览有问题，则继续在本地更新，直到线上预览正常之后在合并。&lt;/li>
&lt;li>page-deploy.yml : 当 master 分支上收到 pr 时触发这个发布操作，我将 GitHub Pages 的免费空间当做了发布前的预览的空间；而网站的内容是通过 CloudFlare 的 Pages 功能 host 的。通过这种方式，将 GitHub 的所有功能和空间作为开发服务；而 CloudFlare 定位为 DNS 和静态内的生产环境。&lt;/li>
&lt;/ul>
&lt;p>目前我的 blog 的工作流程是这样的：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 第一步：在本地创建新的分支，并 push 同步到远程&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> git branch build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> git checkout build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M themes/hugo-theme-stack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switched to branch &lt;span class="s1">&amp;#39;build-your-best-rack&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>build-your-best-rack&lt;span class="o">)&lt;/span> git push origin build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>, reused &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>, pack-reused &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Create a pull request &lt;span class="k">for&lt;/span> &lt;span class="s1">&amp;#39;build-your-best-rack&amp;#39;&lt;/span> on GitHub by visiting:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: https://github.com/martinliu/martinliu.github.io/pull/new/build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To github.com:martinliu/martinliu.github.io.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">[&lt;/span>new branch&lt;span class="o">]&lt;/span> build-your-best-rack -&amp;gt; build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 第二步：用 hugo 命令创建新文章的文件，然后开始编写更新新文章&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>build-your-best-rack&lt;span class="o">)&lt;/span> hugo new content/post/build-your-best-rack/index.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Content &lt;span class="s2">&amp;#34;/Users/martinliu/code/martinliu.github.io/content/post/build-your-best-rack/index.md&amp;#34;&lt;/span> created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 第三步：本地预览正常后，push 到 GitHub Pages 空间在远程预览 https://martinliu.github.io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>build-your-best-rack&lt;span class="o">)&lt;/span> ✗ git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>build-your-best-rack&lt;span class="o">)&lt;/span> ✗ git commit -m &lt;span class="s2">&amp;#34;review new post online&amp;#34;&lt;/span>&lt;span class="o">[&lt;/span>build-your-best-rack e21fffe8f&lt;span class="o">]&lt;/span> review new post online
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> file changed, &lt;span class="m">6&lt;/span> insertions&lt;span class="o">(&lt;/span>+&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create mode &lt;span class="m">100644&lt;/span> content/post/build-your-best-rack/index.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>build-your-best-rack&lt;span class="o">)&lt;/span> git push --set-upstream origin build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enumerating objects: 9, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Counting objects: 100% &lt;span class="o">(&lt;/span>9/9&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Delta compression using up to &lt;span class="m">10&lt;/span> threads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Compressing objects: 100% &lt;span class="o">(&lt;/span>5/5&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing objects: 100% &lt;span class="o">(&lt;/span>6/6&lt;span class="o">)&lt;/span>, &lt;span class="m">540&lt;/span> bytes &lt;span class="p">|&lt;/span> 540.00 KiB/s, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total &lt;span class="m">6&lt;/span> &lt;span class="o">(&lt;/span>delta 3&lt;span class="o">)&lt;/span>, reused &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>, pack-reused &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Resolving deltas: 100% &lt;span class="o">(&lt;/span>3/3&lt;span class="o">)&lt;/span>, completed with &lt;span class="m">3&lt;/span> &lt;span class="nb">local&lt;/span> objects.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To github.com:martinliu/martinliu.github.io.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 49d889b6e..e21fffe8f build-your-best-rack -&amp;gt; build-your-best-rack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">branch &lt;span class="s1">&amp;#39;build-your-best-rack&amp;#39;&lt;/span> &lt;span class="nb">set&lt;/span> up to track &lt;span class="s1">&amp;#39;origin/build-your-best-rack&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 第四步：在 GitHub 上发起并合并 pr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 第五步：删除本地特性分支，删除远程特性分支，更新本地 master 分支。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>change-to-new-theme&lt;span class="o">)&lt;/span> git checkout master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning: unable to rmdir &lt;span class="s1">&amp;#39;themes/hugo-theme-stack&amp;#39;&lt;/span>: Directory not empty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switched to branch &lt;span class="s1">&amp;#39;master&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your branch is behind &lt;span class="s1">&amp;#39;origin/master&amp;#39;&lt;/span> by &lt;span class="m">5&lt;/span> commits, and can be fast-forwarded.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>use &lt;span class="s2">&amp;#34;git pull&amp;#34;&lt;/span> to update your &lt;span class="nb">local&lt;/span> branch&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git push origin --delete origin/change-to-new-theme
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: unable to delete &lt;span class="s1">&amp;#39;origin/change-to-new-theme&amp;#39;&lt;/span>: remote ref does not exist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: failed to push some refs to &lt;span class="s1">&amp;#39;github.com:martinliu/martinliu.github.io.git&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git push origin --delete change-to-new-theme
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To github.com:martinliu/martinliu.github.io.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &lt;span class="o">[&lt;/span>deleted&lt;span class="o">]&lt;/span> change-to-new-theme
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ martinliu.github.io git:&lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span> ✗ git pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据这款新皮肤的提示，我查看了最新的 Hugo 的文档，为了发挥这个皮肤的图像 resize 功能，并且遵从新的编写 post 的规范。以后的所有新文章的 md 文件和图片文件都需要放到一个独立的新目录中。&lt;/p>
&lt;p>新创建一篇 post 的时候使用这个命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">hugo new content/post/new-blog-test/index.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在站点的根目录下执行这条命令后，会帮你创建新的目录和 &lt;code>index.md&lt;/code> 文件；由于我的站点默认使用了中文语言，因此，如果我想写一篇英文的文章的话，我就需要将 md 文件的名字写成 &lt;code>index.en.md&lt;/code> ；这个皮肤支持双语的，如果这篇文章也有中英两个版本的话，md 文件就应该有两个：&lt;/p>
&lt;ul>
&lt;li>index.zh-cn.md&lt;/li>
&lt;li>index.en.md&lt;/li>
&lt;/ul>
&lt;p>这样就有了中英文的两个独立的页面，而且两种语言各自的页面上，都会有一个语言切换的按钮，所以这个皮肤对于双语，或者多语言写作的人来说，应该是非常顺手的一个选择。我将主导航的那些页面都做出了双语的版本。&lt;/p>
&lt;p>由于，我最后的所有静态文件和图片都发布到了 CloudFlare 的 Pages 服务里，而且它们还提供 CDN 服务，而这个功能在 GitHub Pages 空间中是不提供的。因此，以前我用 GitHub Pages host 这个 blog 的时候，每次编写和发布新文章的时候，还需要手工的将图片上传到其它第三方的图床空间中，然后在更新 md 文章中图片的网址，其实还是比较繁琐和麻烦的。&lt;/p>
&lt;p>这个国庆节期间，我基本上也完成了 home lab 的 Rack 搭建项目，初步效果如下：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/change-to-jimmy-stack-theme/new-rack.png"
width="1500"
height="2000"
srcset="https://martinliu.cn/blog/change-to-jimmy-stack-theme/new-rack_huf64d265787f23399131e9545ff153024_4954162_480x0_resize_box_3.png 480w, https://martinliu.cn/blog/change-to-jimmy-stack-theme/new-rack_huf64d265787f23399131e9545ff153024_4954162_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>以上这张图片放置在了和 md 文件相同的目录中，插入这张图片的代码就变得异常简单了 &lt;code>![](new-rack.png)&lt;/code> ；而且图片也被拉伸到了和文章页面宽度等宽，大小合适的情况下会充满页面宽度，而且能够自适应浏览器显示器的宽度。&lt;/p>
&lt;p>后续会出一些关于这个 home lab 的文章。&lt;/p>
&lt;p>关于这个皮肤的使用文档，请访问： &lt;a class="link" href="https://docs.stack.jimmycai.com/" target="_blank" rel="noopener"
>https://docs.stack.jimmycai.com/&lt;/a>&lt;/p>
&lt;p>如果你也喜欢这个风格的皮肤，请查看： &lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack-starter" target="_blank" rel="noopener"
>hugo-theme-stack-stater&lt;/a>&lt;/p>
&lt;p>遗留问题：&lt;/p>
&lt;ul>
&lt;li>左上角的头像图片无法正常显示&lt;/li>
&lt;li>添加一种免费好用的评论互动插件&lt;/li>
&lt;li>增加搜索功能&lt;/li>
&lt;/ul></description></item><item><title>归档</title><link>https://martinliu.cn/archives/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://martinliu.cn/archives/</guid><description/></item><item><title>HCI | 超融合平台线上训练营第二期</title><link>https://martinliu.cn/blog/hci-%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0%E7%BA%BF%E4%B8%8A%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E6%9C%9F/</link><pubDate>Sun, 20 Feb 2022 23:05:40 +0800</pubDate><guid>https://martinliu.cn/blog/hci-%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0%E7%BA%BF%E4%B8%8A%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%BA%8C%E6%9C%9F/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-hci-nutanix.jpeg" alt="Featured image of post HCI | 超融合平台线上训练营第二期" />&lt;p>本文总结了我从单机的 Home Lab 环境，发展到三节点 Nutanix 超融合混合盘集群的经验和教训。&lt;/p>
&lt;h2 id="为什么需要超融合集群">为什么需要超融合集群&lt;/h2>
&lt;p>我的 Home lab 的进化史&lt;/p>
&lt;ul>
&lt;li>长期保持一些特定功能的虚拟机&lt;/li>
&lt;li>在本地保持丰富的虚拟机模版和快照&lt;/li>
&lt;li>将照片和视频家庭资料放到媒体服务器中【Plex】&lt;/li>
&lt;li>探索IoT智能家居，家庭安防等项目&lt;/li>
&lt;li>充分利用虚拟话带来的福利，计算和存储资源超量分配&lt;/li>
&lt;li>利用高级分布式软件定义存储都高级功能，空间的节省：压缩，去重，纠删码等；性能提升：虚拟机享受全闪存本地磁盘+精简制备；同时享用性能和空间：通过 SSD+HDD的混合容量存储池实现鱼和熊掌兼得。&lt;/li>
&lt;li>本地实验室网速提升到万兆以太网，尝试最新的数据中心DPU（智能网卡）、边缘计算和IoT趣味设备。&lt;/li>
&lt;li>排除家用 NAS主机（群晖）、ALL in One 主机、云和容器等选项&lt;/li>
&lt;/ul>
&lt;p>其他可能选项&lt;/p>
&lt;ul>
&lt;li>VMware 的 ESXi 平台 + VSAN ；熟悉 VMware 技术栈； 或被人带着追捧者多用。&lt;/li>
&lt;li>Citrix 的 XenServer + 家用集中存储；少见家用的人。&lt;/li>
&lt;li>其他的开源虚拟化选项 Proxmox ，单机版家用服务区比较常见。&lt;/li>
&lt;/ul>
&lt;h2 id="各种系统使用体验">各种系统使用体验&lt;/h2>
&lt;p>不论是单机的服务器/NAS，总之使用场景的需求是越用越多的，HomeLab 用的时间越久，想要做的事情就会越多。&lt;/p>
&lt;h3 id="intel-nuc">Intel NUC&lt;/h3>
&lt;p>这是一台 Nutanix 售前工程师标配的测试机。我用了好几年，非常皮实耐用。&lt;/p>
&lt;p>&lt;strong>硬件平台&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>集成主板，i7 8 Core + 集成 Intel 显卡&lt;/li>
&lt;li>32GB 内存，DDR4 - 2133 MHz&lt;/li>
&lt;li>SSD 500GB x 2 ， M.2 nvme 接口&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>使用体验&lt;/strong>：&lt;/p>
&lt;ol>
&lt;li>CPU和内存资源都比较有限&lt;/li>
&lt;li>散热不理想，风扇噪音越用越大&lt;/li>
&lt;li>无法扩展&lt;/li>
&lt;li>不适合长期开机&lt;/li>
&lt;li>安装 Nutanix CE （AHV） 超级轻松，从不会遇到失败，hypervisor 安装在U盘上。安装后，调低 cvm 的资源，剩余可用资源，所剩无几。&lt;/li>
&lt;/ol>
&lt;h3 id="lenovo-p720">Lenovo P720&lt;/h3>
&lt;p>公有云虽然是完全可用的，但是无法满足我企业数据中心相关技术的本地体验。还是需要搞一台配置高的，资源更多的机器，因此入手了第二台测试机，为了放置空间和电费都更容易接受，折中选择了二手的品牌机工作站。&lt;/p>
&lt;p>硬件平台：&lt;/p>
&lt;ul>
&lt;li>Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz 14 core x 2&lt;/li>
&lt;li>64 GB ，还有很多空余插槽&lt;/li>
&lt;li>SSD ：120 GB + 256GB ，一共有四个 3.5 寸的标准磁盘位。&lt;/li>
&lt;li>安装 VMWare ESXi + vCenter
&lt;ul>
&lt;li>超分资源+精简存储制备&lt;/li>
&lt;li>广泛的开源虚拟机模版下载&lt;/li>
&lt;li>大量开源和私有企业技术支持&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>经过一年多的扩容，截止到现在的配置如下：&lt;/p>
&lt;ul>
&lt;li>56 logical core： 2 x Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz -14 core 【保持】&lt;/li>
&lt;li>128 GB DDR4 2011Mhz 【感谢上海网友】&lt;/li>
&lt;li>HDD：西部数据WD 4Tb 5400rpm x 2 【增加了两块 HDD】&lt;/li>
&lt;li>SSD：三星750 Evo 120GB，三星870 Evo 250 GB，三星870 Evo 1TB 【新增一块 SSD】&lt;/li>
&lt;li>NIC：Boardcom BCM57412 NetXtreme-E 10Gb SPF+双口 【感谢panpan】&lt;/li>
&lt;/ul>
&lt;p>使用体验：&lt;/p>
&lt;ol>
&lt;li>存储空间不足，虚拟机越来越多，需要不断买新磁盘扩容&lt;/li>
&lt;li>CPU&amp;amp;内存有限，无法做一些性能基准测试&lt;/li>
&lt;li>想扩展为单机版 VSAN ，或者 VSAN 群集，但是它无法支持SSD+HDD的混合容量磁盘组&lt;/li>
&lt;li>只有两张千兆网卡（主板集成），无法实现集群情况下高速的网络数据I/O&lt;/li>
&lt;li>虚拟机开多了，导致CPU过热，机器会自动关机后，机器暂时无法启动，不得不替换了更好的散热器&lt;/li>
&lt;/ol>
&lt;p>单机工作站的 HomeLab 模式无法实现，我对更多集群型软件的部署使用场景，包括：&lt;/p>
&lt;ul>
&lt;li>Elasticsearch 冷热温多层架构 + ELK 全家桶的长期数据本地保留&lt;/li>
&lt;li>高可用 K8S 集群搭建和长期持有
*更多 DevOps 开源工具链的搭建，新版本更新，长期随时可用&lt;/li>
&lt;li>还有其它，不赘述。&lt;/li>
&lt;/ul>
&lt;h2 id="建议平台选型">建议平台选型&lt;/h2>
&lt;p>为了实现三节点的超融合群集，双十一出手购买了一些产品。&lt;/p>
&lt;h3 id="国产主板套装-x-2">国产主板套装 x 2&lt;/h3>
&lt;p>国产套版的性价比和评价其实都还是ok的，满心怀疑的开始测试起来。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>华南金牌 x99-AD4 - 单路&lt;/p>
&lt;ul>
&lt;li>12 CPUs x Intel(R) Xeon(R) CPU E5-2690 v3 @ 2.60GHz&lt;/li>
&lt;li>64 GB - DDR4 - 2400Mhz&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>磁盘接口：&lt;/p>
&lt;ul>
&lt;li>nvme接口：1 x M.2 - AHV 可用，ESXi不可用&lt;/li>
&lt;li>NGFF接口: 1 x M.2 - 同上&lt;/li>
&lt;li>sSATA x 2：空闲&lt;/li>
&lt;li>SATA x 6:
&lt;ul>
&lt;li>SSD1: KINGSTON 60GB x 2&lt;/li>
&lt;li>SSD2: Samsung SSD 860 500GB + Samsung MZ7TE 256GB&lt;/li>
&lt;li>HDD3/4: 西部数据WD 4Tb 5400rpm x 4&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>主板集成RTL8111/8168/8411 千兆网卡，ESXi 7/6 都不能直接兼容&lt;/p>
&lt;/li>
&lt;li>
&lt;p>显卡：无集成显卡，ATI Radeon HD 2GB x 2 - 买错了，最好是集成显卡。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>万兆网卡： Boardcom BCM57412 NetXtreme-E 10Gb SPF+双口 【感谢panpan】 x 2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>千兆网卡：&lt;/p>
&lt;ul>
&lt;li>Intel 82576 千兆双口 x 1 （ESX i 6/7 兼容）&lt;/li>
&lt;li>Intel I340-T2 千兆双口 x 1 （ESX i 7 不兼容）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>机箱：开放式亚克力透明双层机箱 x 2&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>使用经验：&lt;/p>
&lt;ol>
&lt;li>BIOS 中的Boot模式一定要设置为Legacy模式&lt;/li>
&lt;li>忽略主板集成网卡，除非你非常擅长将驱动注入ESXi 的iso文件，安装前兆或者万兆网卡&lt;/li>
&lt;li>Nutanix CE安装的时候需要网卡驱动正常，ESXi 虚拟化必须能从本地web服务器下载iso安装文件&lt;/li>
&lt;li>AHV虚拟化安装很正常，连nvme接口的M.2磁盘都可以正常使用&lt;/li>
&lt;li>ESXi虚拟化安装的结果是失败的，但是手工可以拯救CVM，步骤可以忍受。&lt;/li>
&lt;/ol>
&lt;h3 id="超微豪华高仿nutanix">超微豪华高仿Nutanix&lt;/h3>
&lt;p>新购了一块超微主板，做下对比测试，缓解一下华南主板坑多的低落心情。&lt;/p>
&lt;ul>
&lt;li>单路：SuperMicro X10SRL-F&lt;/li>
&lt;li>CPU：E5-2690 v3 @2.60 GHz，12 core&lt;/li>
&lt;li>SATA3: x 10
&lt;ul>
&lt;li>SSD 1/2&lt;/li>
&lt;li>HDD x2&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>主板集成双千兆网卡 （ESXi 6/7 兼容）&lt;/li>
&lt;/ul>
&lt;p>用这块主板 + 以上华南金牌的全套磁盘+CPU+内存+万兆网卡，安装Nutanix CE，ESXi 6/7都可以顺利安装，连CVM都能够自动创建成功，不需要手工拯救失败的CVM，这个平台安装部署Nutanix CE 应该是毫无压力感。&lt;/p>
&lt;p>超微主板是Nutanix原厂超融合硬件平台的供应商，这任选了一块测试版的兼容性就确实没话说。不用再测，不用在多了，关键是把上面的国产廉价平台能用起来。&lt;/p>
&lt;h3 id="方案汇总">方案汇总&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>主板&lt;/th>
&lt;th>内存&lt;/th>
&lt;th>SSD&lt;/th>
&lt;th>HDD&lt;/th>
&lt;th>网络&lt;/th>
&lt;th>节点&lt;/th>
&lt;th>价格&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>最小可平台&lt;/td>
&lt;td>Intel NUC&lt;/td>
&lt;td>32GB&lt;/td>
&lt;td>500GB x 2&lt;/td>
&lt;td>USB/hypervisor&lt;/td>
&lt;td>1G1/2&lt;/td>
&lt;td>1&lt;/td>
&lt;td>7+千左右&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>工作站平台&lt;/td>
&lt;td>Lenovo P710&lt;/td>
&lt;td>128GB&lt;/td>
&lt;td>1/2/3+&lt;/td>
&lt;td>1/2/3/4/5+&lt;/td>
&lt;td>1Gx2/10Gx2&lt;/td>
&lt;td>1&lt;/td>
&lt;td>8+千左右&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>国产套版&lt;/td>
&lt;td>华南x99-AD4&lt;/td>
&lt;td>64GB&lt;/td>
&lt;td>2&lt;/td>
&lt;td>1/2/3/4&lt;/td>
&lt;td>1Gx2+10Gx2&lt;/td>
&lt;td>1/3/4&lt;/td>
&lt;td>7+千左右/2套&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>超微平台&lt;/td>
&lt;td>SuperMicro X10SRL-F&lt;/td>
&lt;td>/&lt;/td>
&lt;td>/&lt;/td>
&lt;td>/&lt;/td>
&lt;td>/&lt;/td>
&lt;td>1/3/4&lt;/td>
&lt;td>随意搭配，参考市价&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>旧服务器&lt;/td>
&lt;td>Dell/Lenvov/HP/浪潮&lt;/td>
&lt;td>/&lt;/td>
&lt;td>2+直通&lt;/td>
&lt;td>2+直通&lt;/td>
&lt;td>1Gx2+10Gx2&lt;/td>
&lt;td>1/3/4&lt;/td>
&lt;td>参考市价&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="其他组件的选择">其他组件的选择：&lt;/h3>
&lt;p>下面是对于自选平台的DYI的建议：&lt;/p>
&lt;ul>
&lt;li>机箱：根据主板的选择，开放式主板方便使用水冷系统，热量容易散发，可以借助环境的空气散热，选择封闭机箱则需要注意CPU散热器的选择，确保CPU工作温度正常。&lt;/li>
&lt;li>电源：CPU和显卡电耗需要提前计算，确保电源供电攻略足够。&lt;/li>
&lt;li>显卡：主板尽量带集成显卡，保持系统最简化可用，后续如果需要GPU了，可以在加显卡，确保主板有两个PCIx16的插槽。&lt;/li>
&lt;li>网卡：尽量选择ESXi7可以识别免驱动的，7这个版本兼容的网卡类型比6少很多，安装过程中需要IP地址，免得给自己找麻烦，我的一块千兆网卡不能被7正常驱动，因此ESXi的版本无奈降到6.7u3。&lt;/li>
&lt;li>PCI插槽：建议16x至少2个，用于显卡和万兆网卡，其它速率的若干，用于兼容其它可能的网卡或者设备。&lt;/li>
&lt;/ul>
&lt;h2 id="集群搭建流程">集群搭建流程&lt;/h2>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1773.jpeg"
loading="lazy"
alt="test machine"
>&lt;/p>
&lt;h3 id="准备工作">准备工作&lt;/h3>
&lt;p>注册Nutanix社区帐号，https://next.nutanix.com/，必须用公司邮箱注册，才能下载最新的Nutanix CE安装镜像，和其它相关组件。在首次登陆Nutanix CE群集的时候，也需要输入这个帐号和密码验证。&lt;/p>
&lt;p>准备安装镜像：&lt;/p>
&lt;ol>
&lt;li>Windows 10 + Ruft&lt;/li>
&lt;li>下载 Nutanix-2020-9016.tar&lt;/li>
&lt;li>Fedora 35 Live CD&lt;/li>
&lt;li>16 GB U 盘 x2&lt;/li>
&lt;/ol>
&lt;p>准备网络环境&lt;/p>
&lt;ol>
&lt;li>千兆 + 万兆 （DAC 铜缆）&lt;/li>
&lt;li>DHCP + DNS + Internet 网络&lt;/li>
&lt;li>Web 服务器 + esxi702a.iso 「不安装 vsphere 虚拟化的不需要 web 服务器」&lt;/li>
&lt;/ol>
&lt;h3 id="安装流程">安装流程&lt;/h3>
&lt;ol>
&lt;li>Fedora Live CD 启动，磁盘工具删除分区&lt;/li>
&lt;li>插好网线&lt;/li>
&lt;li>Nutanix 安装盘启动，观察网卡 IP 地址获取&lt;/li>
&lt;li>设置 Hypervisor 类型、磁盘布局、集群信息等，建议不要勾选创建点节点集群的选项，后期手工创建更可控。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1774.jpeg"
loading="lazy"
alt="setup"
>
5. 同意软件许可
6. 等待 Hypervisor （ahv一般较快，或者vsphere）成功安装&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1775.jpeg"
loading="lazy"
alt="hypervisor 安装过程中"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1776.jpeg"
loading="lazy"
alt="hypervisor 安装完毕"
>&lt;/p>
&lt;ol start="5">
&lt;li>安装后重启服务器，首次 host 启动，观察 cvm 启动过程和结果，等待 CVM 就绪，确认 CVM 上硬盘的挂载情况&lt;/li>
&lt;li>登录后确保集群处于未配置状态&lt;/li>
&lt;li>重复以上步骤，安装其他 2 ～ 3 个节点 【CE 最多支持4个节点】&lt;/li>
&lt;li>检查和确认集群的状态，每个节点都输出，集群未配置，准备工作就绪。&lt;/li>
&lt;li>在其中一个 cvm 上，运行创建 Nutanix 集群的命令， cluster create&lt;/li>
&lt;li>首次登陆集群，完成初始化配置&lt;/li>
&lt;li>配置并确认网络配置，在存储迟管理的地方，创建过载到所有vsphere 主机的共享 NFS 统一存储空间。存储资源就绪。&lt;/li>
&lt;li>安装部署 vcenter，在 Prism 中注册 vcenter&lt;/li>
&lt;li>安装虚拟机模版&lt;/li>
&lt;li>创建虚拟机测试&lt;/li>
&lt;li>运行基本的性能验收测试&lt;/li>
&lt;li>正式投产&lt;/li>
&lt;li>可选：安装 PC、Fileserver、CALM、K8s&lt;/li>
&lt;/ol>
&lt;h3 id="问题解决">问题解决&lt;/h3>
&lt;ul>
&lt;li>【Hypervisor】安装过程中 screen is terminating&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1777.jpeg"
loading="lazy"
alt="terminal screen"
>&lt;/p>
&lt;ul>
&lt;li>【vSphere虚拟化】虚拟化安装成功，但是重启后 cvm 创建失败&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-WechatIMG1778.jpeg"
loading="lazy"
alt="failed-install"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-2021-11-27_22-00-44.png"
loading="lazy"
alt="CVM failed"
>&lt;/p>
&lt;ul>
&lt;li>【vSphere虚拟化】cvm 创建成功且运行正常，但是不能正常挂载 HDD&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-2022-02-21_19-17-50.png"
loading="lazy"
alt="CVM lost one hdd"
>
&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-21-2022-02-21_19-16-35.png"
loading="lazy"
alt="CVM lost one HDD"
>&lt;/p>
&lt;h3 id="esxi-安装后-cvm-创建失败hdd挂载问题">ESXi 安装后 CVM 创建失败/HDD挂载问题&lt;/h3>
&lt;p>由于安装程序无法正常初始化所有磁盘，直通的HDD没有正常加载，初始化脚本有小bug导致。手工挂在直通HDD，修复有bug的python代码，重新初始化创建 cvm，确保 CVM 虚拟机最后能正常运行。&lt;/p>
&lt;p>处理方法：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>网页访问 ESXi 的 ip 地址 ，使用默认的用户名【root】和密码【nutanix/4u】登录，查看确认如下：&lt;/p>
&lt;ol>
&lt;li>存储-设备下面是否所有磁盘都可见&lt;/li>
&lt;li>网络：所有uplink，网卡，两个虚拟交换机，五个port group&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>SSH 登陆 ESXi host ，查看错误日志的内容：&lt;code>/bootbank/Nutanix/firstboot/esx_first_boot_launcher.log&lt;/code>；查看是否是如下的常见错误：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">FATAL Fatal exception encountered:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Traceback &lt;span class="o">(&lt;/span>most recent call last&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;/bootbank/Nutanix/firstboot/esx_first_boot.py&amp;#34;&lt;/span>, line 2516, in &amp;lt;module&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> main&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;/bootbank/Nutanix/firstboot/esx_first_boot.py&amp;#34;&lt;/span>, line 2361, in main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create_svm_vmx_and_attach_rdm_disks_ce&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;/bootbank/Nutanix/firstboot/esx_first_boot.py&amp;#34;&lt;/span>, line 1478, in create_svm_vmx_and_attach_rdm_disks_ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">dev_paths&lt;/span> &lt;span class="o">=&lt;/span> get_disk_locations_ce&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;/bootbank/Nutanix/firstboot/esx_first_boot.py&amp;#34;&lt;/span>, line 1019, in get_disk_locations_ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> device_identifiers.remove&lt;span class="o">(&lt;/span>disk&lt;span class="o">[&lt;/span>:-3&lt;span class="o">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ValueError: list.remove&lt;span class="o">(&lt;/span>x&lt;span class="o">)&lt;/span>: x not in list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>使用这篇文章&lt;a class="link" href="https://next.nutanix.com/discussion-forum-14/esxi-failed-install-on-hpe-dl380-gen9-ce-2020-09-16-38898" target="_blank" rel="noopener"
>https://next.nutanix.com/discussion-forum-14/esxi-failed-install-on-hpe-dl380-gen9-ce-2020-09-16-38898&lt;/a>中的解决方案，查看这个论坛帖子需要注册论坛的账号。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用上文的方案，运行修改后的 esx_first_boot.py 程序。等待程序执行完毕，在ESXi web client中观察CVM的创建过程。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CVM 创建成功运行起来之后，你会发现它可能只挂载了SSD，下面需要手工加载加载系统中的HDD。&lt;/p>
&lt;ol>
&lt;li>ssh 登陆 ESXi host&lt;/li>
&lt;li>用命令 &lt;code>ls /vmfs/devices/disks/&lt;/code> 查看系统上的所有磁盘设备，记录未挂载上的HDD的设备路径，例如：&lt;code>/vmfs/devices/disks/t10.ATA_____WDC_WD40EFRX2D68N32N0_________________________WD2DWCC7K0ZN6E93&lt;/code>&lt;/li>
&lt;li>进入 CVM 虚拟机的配置文件目录 【如：&lt;code>/vmfs/volumes/NTNX-local-ds-4abcf92c-A/&lt;/code>】，创建所有HDD的直通磁盘，参考命令：&lt;code>vmkfstools -z /vmfs/devices/disks/t10.ATA_____WDC_WD40EFRX2D68N32N0_________________________WD&lt;/code>
&lt;code>2DWCC7K0ZN6E93 ./wd4t-1.vmdk&lt;/code>&lt;/li>
&lt;li>在ESXi web client中，关机（PowerOff） CVM，修改配置&lt;/li>
&lt;li>将上一步创建的直通HDD添加进来&lt;/li>
&lt;li>修改虚拟机选项的操作系统，改为CentOS7&lt;/li>
&lt;li>查看CVM虚拟机所有磁盘，确保所有SSD和HDD都已经加载，先不要修改其它任何配置，开机，观察虚拟机是否可以正常启动。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>ssh登陆CVM虚拟机的操作系统，使用默认用户名【nutanix】和密码【nutanix/4u】。用ping其它集群节点的（host和cvm）ip地址，确保网关和DNS服务器都可达。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>CVM 正常运行后，才可以作为空白节点加入群集，或者用于创建新群集。&lt;/p>
&lt;h2 id="经验教训">经验教训&lt;/h2>
&lt;ol>
&lt;li>在 Nutanix 官方用户论坛的CE板块搜索问题或提问，你不是孤独的。&lt;/li>
&lt;li>散热器买专用的，通用的套具安装费劲，适配的并会很好&lt;/li>
&lt;li>磁盘至少使用 Fedora live cd 的磁盘工具查看状态，避免坏盘。&lt;/li>
&lt;li>cvm 创建失败应该是可以修复的&lt;/li>
&lt;li>安装过程需要联网&lt;/li>
&lt;li>集成显卡更好，&lt;/li>
&lt;li>相同的错误复发时要记得赶紧收工，明天再搞&lt;/li>
&lt;/ol>
&lt;h2 id="其他可用资源">其他可用资源&lt;/h2>
&lt;p>HCI超融合技术对于了解它的人来说很火热，但是还有很多不太了解HCI的人；HCI的用户对它也有不同的使用场景和期望。请大家参与这个《中国超融合状态调查》，我们每月为参与本调查的朋友进行抽奖，抽奖结果在下次直播的时候公布。扫码参与调查。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-dc.png"
loading="lazy"
alt="CVM HDD"
>&lt;/p>
&lt;p>我们为希望学习HCI技术的朋友们创建了一个qq群，希望可以给大家带来一定帮助。扫码加入我们的QQ群。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-qq.png"
loading="lazy"
alt="CVM HDD"
>&lt;/p>
&lt;h2 id="下期预告">下期预告&lt;/h2>
&lt;p>HCI系统的搭建还有很多问题值得一起探讨和学习，HCI超融合系统软件还有很多功能可以学习了解。我们为DevOps社区的朋友们新开辟了这个HCI板块，希望以后会每个月为大家输出一期新的内容。下期直播的简介如下：&lt;/p>
&lt;ul>
&lt;li>日期：2022 年 3 月 22 日， 下午 1点开始&lt;/li>
&lt;li>内容：Nutanix CE 的多集群管理&lt;/li>
&lt;li>主持人：刘征，吴孔辉&lt;/li>
&lt;li>直播平台：B站搜/关注：中国DevOps社区&lt;/li>
&lt;li>直播抽奖：未知神秘礼物 🎁&lt;/li>
&lt;li>报名：互动吧搜/关注：中国DevOps社区&lt;/li>
&lt;/ul></description></item><item><title>在 macOS 上配置 Drupal 开发环境</title><link>https://martinliu.cn/blog/%E5%9C%A8-macos-%E4%B8%8A%E9%85%8D%E7%BD%AE-drupal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link><pubDate>Sat, 05 Feb 2022 11:11:55 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%9C%A8-macos-%E4%B8%8A%E9%85%8D%E7%BD%AE-drupal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid><description>&lt;img src="https://149351115.v2.pressablecdn.com/wp-content/uploads/2020/06/bg-hero-persona.png" alt="Featured image of post 在 macOS 上配置 Drupal 开发环境" />&lt;p>过年前给自己挖了一个 Drupal 的坑，经过一些时间的研究之后，感觉这个系统和 Remedy 非常神似。说到底它们其实都是表单系统。每个表单表达一种分类的信息而已。Drupal 注重的是表单上的信息点的记录、管理和展示，Remedy 注重的则是每种表单（工作类型）上“工单流程状态”字段变化的记录和管理。&lt;/p>
&lt;p>&lt;a class="link" href="https://DevOpsChina.org" target="_blank" rel="noopener"
>DevOps China&lt;/a> 网站的选型之旅，最初使用的是 hugo，但是由于内容更新人员们对 github 系统掌握程度参差不齐，导致对于参与者不友好的问题，这为所有社区内容创建的朋友们设置了一个不必要的门槛。最初设计的是：以官网的内容为最源头参考点，然后同步到其它平台，包括：微信和互动吧等社区对外到入口。最后，微信公众号后台文案编辑的易用性超越了 GitHub 上 Hugo 站点的更新。社区网站维护志愿者也很难投入足够的精力，手工的从微信上同步回社区官网。就这样社区官网的及时更新问题居然持续了两年。&lt;/p>
&lt;p>2022年是解决这个问题的时候了。在对 Drupal 经过一定的研究之后，希望这次选型的 Drupal 能不负众望，完美的实现这个艰巨的使命。&lt;a class="link" href="https://stackoverflow.blog/2020/06/23/is-it-time-to-give-drupal-another-look/" target="_blank" rel="noopener"
>【 why drupal ？ 参考文章】&lt;/a>&lt;/p>
&lt;h2 id="drupal-是个内容管理系统">Drupal 是个内容管理系统&lt;/h2>
&lt;p>在 macOS 上搭建 PHP + MySQL 的开发环境的工具有很多。我选择使用的是已经绝版的 Acquia Dev Desktop 2 ，它包括了：php 7.3.15 的 php 语言运行环境， MySQL 5.7.29 数据库， Apache/2.4.29 的网页运行服务器， phpMyAdmin 4.9.0.1 数据库管理工具。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-2022-02-05_11-08-30.png"
loading="lazy"
alt="Acquia Dev Desktop 2"
>&lt;/p>
&lt;p>这种集成的 PHP 运行/开发/管理环境，还有很多其它选择，这里不展开。我的目标是：保持最简化和易用，与其它社区伙伴的协作，紧跟 Drupal 版本发布和补丁更新，用容器化实现云上的按需扩展。&lt;/p>
&lt;p>首先，我使用 Acquia Dev Desktop 2 创建了一个本地的测试站点，用于学习 Drupal 的使用、定制和开发。它不仅是一个友好的 GUI 工具，其实还附带了 php 开发环境的命令行工具：composer 和 drush 。 使用这两个命令行工具可以完成 Drupal 系统的一键式搭建。在开发一个真实的内容管理系统网站以前，最基础的铺垫工作可能差不多了。&lt;/p>
&lt;h2 id="一键安装-drupal-系统">一键安装 Drupal 系统&lt;/h2>
&lt;p>首先，打开 Acquia Dev Desktop 2 ，在界面上点击进入命令行按钮（more -&amp;gt; Open Console）。macOS 系统默认的 termenal 就会被打开，它会在默认环境中增加如下环境变量参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Last login: Sat Feb &lt;span class="m">5&lt;/span> 10:25:58 on ttys005
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PHP_ID&lt;/span>&lt;span class="o">=&lt;/span>php7_3&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Applications/DevDesktop/php7_3_x64/bin:/Applications/DevDesktop/mysql/bin:/Applications/DevDesktop/tools:&lt;/span>&lt;span class="nv">$PATH&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> &lt;span class="s2">&amp;#34;/Users/martin/learning-drupal&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样就可以在你的目标目录中，执行下面的一键安装脚本了：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 下载Drupal特定版本的代码库&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer create-project drupal/recommended-project:9.3.5 drupal-dev --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> drupal-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 配置以下可以让我们静默安装 drush 的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.composer/installers &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.drupal/core-composer-scaffold &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer config --no-plugins allow-plugins.drupal/core-project-message &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 Drupal 站点维护工具 drush&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer require drush/drush --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s vendor/drush/drush/drush ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer require drush/config-extra --no-interaction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 创建目标 MySQL 数据库和用户名/密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysqladmin -u root drop local_devopschina -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -e &lt;span class="s1">&amp;#39;create database local_devopschina&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -e &lt;span class="s2">&amp;#34;grant all privileges on local_devopschina.* to ddoc@localhost identified by &amp;#39;ddoc123&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 上面的一切都是为了这个命令可以静默安装，它替代了很多 php 开发的系统在网页上用安装程序进行的初始化工作，下面的数据库 root 密码为空&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush si standard --locale&lt;span class="o">=&lt;/span>zh-hans --db-url&lt;span class="o">=&lt;/span>mysql://ddoc:ddoc123@127.0.0.1:33067/local_devopschina --db-su&lt;span class="o">=&lt;/span>root --site-name&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;DevOps China&amp;#34;&lt;/span> --account-name&lt;span class="o">=&lt;/span>admin --account-pass&lt;span class="o">=&lt;/span>admin -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装和启用 Drupal 系统必要的模块和皮肤 【ToDo】&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 生产环境数据迁移，数据库备份的导入，相关文件下载 【ToDo】&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启动 Drupal 系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./drush runserver localhost:8090
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上是一个写死了的 shell 脚本，还可以对其中的关键参数进行变量替换，使之最终成为一个可以传入参数的可用脚本。&lt;/p>
&lt;h2 id="进入-drupal-开发流程">进入 Drupal 开发流程&lt;/h2>
&lt;p>下图展示了 Drupal 网站开发的工作流程。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-Drupal-Site-Building-Workflow.png"
loading="lazy"
alt="Drupal Site Building workflow"
>&lt;/p>
&lt;p>用下面的表格梳理一下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>序号&lt;/th>
&lt;th>工作内容&lt;/th>
&lt;th>概述&lt;/th>
&lt;th>所需要技能&lt;/th>
&lt;th>备注&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.0&lt;/td>
&lt;td>Content Type&lt;/td>
&lt;td>既是任何一条内容对象的完整定义，也是任何一个可管理实体。系统默认自带了‘文章’和‘基本页面’两个内容类型，隐含的具备了简单的 ‘用户’ 管理系统。在此基础上还需扩展出‘社区合作伙伴’、‘社区活动’等实地。&lt;/td>
&lt;td>数据库ER设计、数据结构&lt;/td>
&lt;td>并不需要在 MySQL 中建表，都是在 Drupal 界面完成&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.0&lt;/td>
&lt;td>Fields&lt;/td>
&lt;td>是组成任何内容和实体数据结构的信息点，包含PHP编程语言的数据类型和Drupal 社区里的各种模块，例如‘电话号码’这样的数据结构的引用就是先启用对应的模块&lt;/td>
&lt;td>php开发&lt;/td>
&lt;td>Drupal 社区已有模块不满足才做开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.1&lt;/td>
&lt;td>Taxonomy&lt;/td>
&lt;td>就像是一个二位数组，在每一个分类里有一堆确切的词汇表。例如社区网站的文章、活动和论坛里的帖子都可以引用“话题”这样一个字段，用于单选或者多选，“话题”这个字段里包含了很多DevOps术语“ci”、“敏捷”、“SRE”等。&lt;/td>
&lt;td>领域知识、数据机构&lt;/td>
&lt;td>随着网站内容建设的过程而演进&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.2&lt;/td>
&lt;td>Media&lt;/td>
&lt;td>文档、音频、图片和视频的统一管理，这样方便任意媒体文件的使用；Drupal 9 自带的 Media Libary 模块能够满足需求&lt;/td>
&lt;td>数字媒体管理、CDN加速&lt;/td>
&lt;td>所有用户生成媒体都在这个范畴，会严重影响网站速度，依赖与网站 CDN 加速的实施&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2.3&lt;/td>
&lt;td>Modules&lt;/td>
&lt;td>Drupal 模块非常丰富，从电话号码这样的数据结构，到文本地址到百度地图的转化，到整个知识库结构的定义；社区参与者积分和排名这样的功能将会使用自开发的模块实现&lt;/td>
&lt;td>php开发、数据库&lt;/td>
&lt;td>需要懂 php 开发语言，可独立开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3.0&lt;/td>
&lt;td>Path&lt;/td>
&lt;td>每一个内容实体在 Drupal 中被称之为 node，它们都有默认的访问路径，例如：/node/12/；需要整体规划网站的访问路径，不但让网站变得更加有条理，而且还会提高人和搜索引擎的友好程度，Drupal 的相关模块可以实现&lt;/td>
&lt;td>内容系统梳理&lt;/td>
&lt;td>尽量保持简单、清晰和持久&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4.0&lt;/td>
&lt;td>Permessions&lt;/td>
&lt;td>用户权限需要提前设计，Drupal 除了具有内置的权限机制外，它对任何一个功能模块（内容分类）都可以实施给予角色的矩阵式权限设置，需要提前设计好用户角色类型，权限体系&lt;/td>
&lt;td>权限设计、信息安全&lt;/td>
&lt;td>这是实施文章内容上传、论坛和社区活动管理的基础。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4.1&lt;/td>
&lt;td>Workflows&lt;/td>
&lt;td>工作流是 Drupal 系统中默认的功能模块，经过定制以后可以实现社区贡献文章的审核功能。例如开放所有注册用户的投稿权限，投稿文章必须经过审核人员确认后才能发不出来。还可以用于知识库或者编辑的多重审核功能&lt;/td>
&lt;td>流程定制&lt;/td>
&lt;td>需要掌握 Drupal 相关模块的使用，确保流程简单易用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.0&lt;/td>
&lt;td>Layout&lt;/td>
&lt;td>网页布局结构设计，manage display of nodes 这是基础工作 -&amp;gt; blocks -&amp;gt; layout builder -&amp;gt; views -&amp;gt; image styles ，不同的 theme 自带一套 block 的布局&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.1&lt;/td>
&lt;td>Blocks&lt;/td>
&lt;td>实施页面中的每个模块，模块是一个实体可以容纳视频、文字、图片和其他更多，搜索栏，菜单等；他不是内容，是一个 placeholder&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.2&lt;/td>
&lt;td>Layout Builder&lt;/td>
&lt;td>一个核心模块，拖拽式可视化页面设计实施工具，可以为不同的内容类型、实体和其它创建定制的布局。&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5.3&lt;/td>
&lt;td>Views&lt;/td>
&lt;td>创建数据库查询，过滤和筛选内容，静态的操作或者根据上下文的 。Display【page、block】，format，lields,filter,sort,&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.0&lt;/td>
&lt;td>Add Content&lt;/td>
&lt;td>在以上工作基本完成之后，就可以进入网站内容的填充阶段&lt;/td>
&lt;td>SQL查询&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.1&lt;/td>
&lt;td>Menus&lt;/td>
&lt;td>菜单包括网站的主导航菜单，页脚导航和各个页面上可能使用到的分类选项&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6.2&lt;/td>
&lt;td>Site Management&lt;/td>
&lt;td>开发、测试和生产环境之间的迁移和更新流程&lt;/td>
&lt;td>CI、CD、Cloud、DNS、CDN&lt;/td>
&lt;td>用 GitHub 、Docker 和 Azure 等技术实施必要的工作流程&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7.0&lt;/td>
&lt;td>Theme&lt;/td>
&lt;td>网站展示风格的开发贯穿于以上所有工作内容的过程中。需要基于某种Drupal网站皮肤作为底板，开发自己的定制皮肤，在需要改进的时候随时调整和更新&lt;/td>
&lt;td>前端开发、CSS&lt;/td>
&lt;td>图片等美工设计需要交付给社区的设计同学&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>为了多人、开放式、实现社区网站开发和内容建设的工作，我们还需要一个项目管理工具。这里可以选用 GitHub ：&lt;a class="link" href="https://github.com/orgs/DevopsChina/projects/1/" target="_blank" rel="noopener"
>https://github.com/orgs/DevopsChina/projects/1/&lt;/a> 用它可以实现以下功能。&lt;/p>
&lt;ul>
&lt;li>任务记录、跟踪和分配&lt;/li>
&lt;li>统一管理多个代码仓库的任务&lt;/li>
&lt;li>任务可以和代码库工作相关，也可以无关&lt;/li>
&lt;li>通过内置的工作流，可以实现代码库 issue &amp;amp; pr 任务的自动关联，状态同步&lt;/li>
&lt;li>可以创建自定义字段的视图，用于不同目的的跟踪，支持任务清单，ToDoList 等视图。&lt;/li>
&lt;/ul>
&lt;p>下一步邀请社区网站工作组召开项目启动会。&lt;/p>
&lt;h2 id="版本化开发环境">版本化开发环境&lt;/h2>
&lt;p>初始化上面所创建的项目文件夹。将其推送到 &lt;a class="link" href="https://github.com/DevopsChina/drupal-dev.git" target="_blank" rel="noopener"
>https://github.com/DevopsChina/drupal-dev.git&lt;/a>&lt;/p>
&lt;p>先参考 Drupal 代码库 web 目录下的样例文件，在项目目录中创建 .gitignore 文件。应该在这两个文件中排出以下文件，处于演示目的，本项目并没有将其排除在外。&lt;/p>
&lt;ul>
&lt;li>.env&lt;/li>
&lt;li>sites/&lt;em>/settings&lt;/em>.php&lt;/li>
&lt;li>sites/&lt;em>/services&lt;/em>.yml&lt;/li>
&lt;/ul>
&lt;p>执行下面的代码推送动作。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;first commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git branch -M main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git remote add origin https://github.com/DevopsChina/drupal-dev.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push -u origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在完成了代码库初始化工作后，会设置一下 main 主干保护策略。防止直接对 main 的变更。&lt;/p>
&lt;h2 id="容器化-drupal-系统">容器化 Drupal 系统&lt;/h2>
&lt;p>容器化当前的项目需要经过这些操作步骤：&lt;/p>
&lt;ol>
&lt;li>确认当前 Drupal 系统中的配置和内容，这个状态会打包到容器环境中。用 sqldump 导出数据库。&lt;/li>
&lt;li>参数化 &lt;code>web/sites/settings.php&lt;/code> 文件，将变量和密码变成参数。&lt;/li>
&lt;li>创建 Drupal 主应用镜像的 &lt;code>Dockerfile&lt;/code> 。&lt;/li>
&lt;li>创建包含数据库服务和开发工具服务的 &lt;code>docker-compose.yml&lt;/code> 服务定义文件。&lt;/li>
&lt;li>在本机测试和确认容器服务中 Drupal 网站的可用性和内容。&lt;/li>
&lt;/ol>
&lt;h3 id="1---确认当前系统状态">1 - 确认当前系统状态&lt;/h3>
&lt;p>在经过初始化的配置后，几乎所有系统级别配置信息都保存在了 MySQL 数据库中，用 sqldump 导出 MySQL 数据库，dump 文件会用于 MySQL 容器服务的初始化文件。字段定义、文章编辑、初始化内容的填充也会产生一些数据文件（图片、文件、视频、音频），这些文件就位于 &lt;code>web/sites/default/files/&lt;/code> 目录中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mkdir sql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysqldump -u root local_devopschina &amp;gt; sql/dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在项目文件夹中，执行以上命令，就可以得到的到一个大约十几兆的 MySQL 数据库备份文件。&lt;/p>
&lt;h3 id="2---参数化-drupal-主配置文件">2 - 参数化 Drupal 主配置文件&lt;/h3>
&lt;p>Drupal 的数据库链接字符串和账号信息都位于 &lt;code>web/sites/settings.php&lt;/code> 文件中。为了确保 Drupal 镜像启动后可以链接到正确的 MySQL 数据库服务。需要改此文件。&lt;/p>
&lt;p>原始配置参数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$databases&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;database&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;local_devopschina&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;ddoc&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;ddoc123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;host&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;127.0.0.1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;port&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;33067&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;namespace&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Drupal\\Core\\Database\\Driver\\mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;driver&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>备份原始配置文件。由于修改以后在本机用 drush 运行的本地测试 Drupal 应用就中断了。后续可以优化一下：保持原始配置文件不变，参数化一个配置文件的副本，在 Drupal 打包过程中加一个参数化配置文件的覆盖替换动作。&lt;/p>
&lt;p>修改为如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$databases&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;default&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;database&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;DBASE&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;USER&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;PASS&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;host&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;HOST&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;port&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_ENV&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;DPORT&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;namespace&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Drupal\\Core\\Database\\Driver\\mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;driver&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;mysql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上参数化非必要的最佳操作，本文目标在与记录，后续会优化这个步骤。&lt;/p>
&lt;h3 id="3---创建-drupal-主应用镜像">3 - 创建 Drupal 主应用镜像&lt;/h3>
&lt;p>基于 Drupal 官方的镜像文件创建适合自己项目的 &lt;code>Dockerfile&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>&lt;span class="s"> drupal:9-php7.4-apache&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> &lt;span class="nb">set&lt;/span> -eux&lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt-get update&lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt-get install -y --no-install-recommends git&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后运行 docker build 命令，确认本地可以成功构建这个自定义镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker build -t devopschina/drupal-dev .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker image
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本测试镜像创建成功后，没有镜像上传的动作，镜像上传到特定的镜像仓库后，就可以实现在云容器服务中的部署。这里省略此 push 步骤。&lt;/p>
&lt;h3 id="4---创建服务定义文件">4 - 创建服务定义文件&lt;/h3>
&lt;p>为了简化本地测试，这里使用 docker-compose 工具。创建包含数据库服务和开发工具服务的 &lt;code>docker-compose.yml&lt;/code> 服务定义文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.1&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 使用 mysql 作为后端数据库&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mysql:5.7&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用本地当前路径 sql 目录中的 sql dump文件初始化 MySQL 数据库&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./sql:/docker-entrypoint-initdb.d/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用这些环境变量初始化 mysql 数据库，创建目标数据库，创建用户和密码，为 root 用户初始化随机密码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_DATABASE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DB}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MYSQL_RANDOM_ROOT_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># PHPMyAdmin 数据库管理工具，只用于开发或者测试环境&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">phpmyadmin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">phpmyadmin/phpmyadmin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_myphpadmin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_HOST&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBH}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PMA_ARBITRARY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9999&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 使用 drupal 官方镜像 v9 ，指定 php 版本为 7.4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">drupal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#image: drupal:9-php7.4-apache 这里以后需要优化为私有镜像名称，而不需要在服务启动的时候做任何构建&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">devopschina_drupal&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9998&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/opt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># 将当前项目目录加载到容器中，这里产生了一个和本机的依赖，后续优化：通过 Dockerfile 的复制当前开发目录中的成功到容器中&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># The &amp;#39;z&amp;#39; option tells Docker that the volume content will be shared between containers. Docker will label the content with a shared content label. Shared volumes labels allow all containers to read/write content. The &amp;#39;Z&amp;#39; option tells Docker to label the content with a private unshared label.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">.:/opt:z&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">HOST&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBH}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">DBASE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DB}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBU}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PASS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;${DBP}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># composer update 操作确保容器中的 Drupal 服务运行与当前的最新状态，这个操作也应该后续移植到Dockerfile 文件中&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bash -c &amp;#34;composer update &amp;amp;&amp;amp; rm /var/www/html &amp;amp;&amp;amp; ln -s /opt/web /var/www/html &amp;amp;&amp;amp; /usr/local/bin/apache2-foreground&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>相关测试命令：&lt;/p>
&lt;ul>
&lt;li>&lt;code>docker-compose config&lt;/code> 测试所有参数是否被完整且正确的填充，有错误的话，需要修改 .env 文件。&lt;/li>
&lt;li>&lt;code>docker-compose build&lt;/code> 构建必要的镜像。&lt;/li>
&lt;/ul>
&lt;h3 id="5---本地集成测试">5 - 本地集成测试&lt;/h3>
&lt;p>在本机测试和确认容器服务中 Drupal 网站的可用性和内容。&lt;/p>
&lt;p>在项目目录中，执行 &lt;code>docker-compose up&lt;/code> 命令观察整个启动过程，待启动停止后，在浏览器中访问：http://localhost:9998 ，应该能够看到如下的网页。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-02-05-2022-02-05_23-04-12.png"
loading="lazy"
alt="Test Env home page"
>&lt;/p>
&lt;h2 id="在云平台部署社区官网">在云平台部署社区官网&lt;/h2>
&lt;p>下面是关于后续工作的一些规划：&lt;/p>
&lt;ul>
&lt;li>组件新的网站开发团队，召开项目启动会&lt;/li>
&lt;li>优化以上代码库&lt;/li>
&lt;li>用一台云主机搭建一个公共的测试环境&lt;/li>
&lt;li>确认和实施相关基础设施：镜像仓库、用于Drupal迁移的对象存储桶、优化容器化过程、启用一个用于开发评审的容器测试环境、确定生产环境的运行状态【LAMP单机 vs. 容器环境+其它云服务】&lt;/li>
&lt;/ul></description></item><item><title>HCI | 超融合平台线上训练营第一期</title><link>https://martinliu.cn/blog/hci-%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0%E7%BA%BF%E4%B8%8A%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E6%9C%9F/</link><pubDate>Mon, 03 Jan 2022 18:19:20 +0800</pubDate><guid>https://martinliu.cn/blog/hci-%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0%E7%BA%BF%E4%B8%8A%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%AC%E4%B8%80%E6%9C%9F/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-th1.jpg" alt="Featured image of post HCI | 超融合平台线上训练营第一期" />&lt;p>本期分享的内容是超融合的基础知识，Nutanix CE社区版AHV/KVM单节点集群的搭建。&lt;/p>
&lt;p>在本期线上直播中，我们给大家科普了超融合的基础概念，介绍了Nutanix CE社区版【AHV/Kvm虚拟化】的单机安装和基础配置。本文为大家回顾一下其中的技术要点。&lt;/p>
&lt;p>观看本次直播并且中奖的朋友们是：我是ZCQQQ、盔甲小子、繁硕星辰、壮星豆、flyinghourse110、YS8297和阿尔萨狮123，请联系微信 Jane-happylife 索取你的奖品。本次奖品是Nutanix提供的空气加湿器或者运动背包。备注 12月超融合直播活动 领取礼品。两种礼品（根据库存来决定随机寄出）。&lt;/p>
&lt;p>本期的视频回放链接在这里：https://www.bilibili.com/video/BV1YY411a7w2/&lt;/p>
&lt;h2 id="认识-hci-超融合">认识 HCI 超融合&lt;/h2>
&lt;p>来自网络的定义：超融合基础架构（Hyper Converged Infrastructure，或简称“HCI”）是指在同一套单元设备中不仅仅具备计算、 网络 、存储和服务器虚拟化等资源和技术，而且还包括备份软件、 快照技术 、重复数据删除、在线数据压缩等元素，而多套单元设备可以通过网络聚合起来，实现模块化的无缝横向扩展（scale-out），形成统一的资源池。&lt;/p>
&lt;p>从我个人角度看，我的对基于OpenStack的私有云持有消极的态度。虽然，OpenStack 给企业数据中心基础设施的建设路线带来了不小的影响；但是，它还是无法解决传统数据中心里经典的三层架构基础设施的三大根本痛点。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%872.JPG"
loading="lazy"
>&lt;/p>
&lt;p>三层架构即由x86服务器层、网络层（以太网/SAN）和存储层所搭建的规模不大数量巨多的虚拟化/物理机集群资源池。由于虚拟化技术的成熟和普及，这些虚拟化集群资源池为业务应用提供了所需要的计算、存储和网络资源。在最近十几年的企业数据中心中处于主力架构，但是它有其核心的三大问题：&lt;/p>
&lt;ol>
&lt;li>性能瓶颈问题比较突出：当突发大量来自于网路的业务请求时，且处理它们需要大量的读写存储操作时，后台存储系统乃至SAN网络都将发生性能耗尽的瓶颈，存储延时剧增，等待时长暴增，还可能伴随大量读写操作失败。&lt;/li>
&lt;li>容量无法线性扩展：三层资源中的任何一层的资源容量耗尽后，都需要多个专业运维团队进行大量手工操作，才能进行物理量容量的扩容，扩容过程中很难实现业务服务的持续性，数据量大的时候甚至不得不面临很长的业务停机时间窗口。&lt;/li>
&lt;li>复杂性令运维和开发胆寒：虽然在虚拟化系统中，虚拟化技术可以提供资源层的HA/FT等功能，但是当业务出现宕机故障时，从应用到下层的硬件，从上到下排查的时候，所有相关团队都不得不全员上线救火，业务服务故障很难在这个复杂性极其高的系统中快速定位。服务质量水平命悬一线，而且SLA很难挽救。&lt;/li>
&lt;/ol>
&lt;p>超融合的理想是全面消除以上三个问题。超融合系统其实为三层架构做了减法，它对传统磁盘阵列的存储设备产生了颠覆性的冲击，它利用优化的网络分布式存储服务消除了传统架构中的存储层。它还利用自动化部署工具，极大的降低了虚拟化集群的搭建、升级和维护过程。HCI超融合系统的本身及其精简，非常好扩容和维护，而且可以实现容量和性能的同步线性按需增长。从云计算的五个基础特征来考察HCI技术栈，我个人觉得它比OpenStack更像是云计算。&lt;/p>
&lt;p>学习超融合技术栈也有很多种学习路径，动手搭建超融合系统无疑时最佳的方式。本期超融合视频中，我们选择的是免费版的Nutanix CE社区版。下面划出本期直播中的重要知识点。希望大家可以在自己的环境中开始超融合刷机之旅，当超融合成为你的一个日常工具的以后，你可能才会对HCI有更深的理解。&lt;/p>
&lt;h2 id="硬件选择">硬件选择&lt;/h2>
&lt;p>HCI系统是虚拟化、x86计算机、万兆以太网和超融合软件完美的组合。在你的工作环境中就存在着大量可用的机器，经过一定的挑选和准备之后，你就应该可以操练超融合技术了。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%873.JPG"
loading="lazy"
>&lt;/p>
&lt;p>任何可以运行服务器虚拟化【esxi/kvm】软件的x86计算机都可以，最近10年以内采购的机器应该都可以适用。为了让其发挥应有的价值和意义，下面是一些建议选项：&lt;/p>
&lt;ul>
&lt;li>最低配置：cpu 桌面机 i5/i7级别起步，4个物理核，或更高配置；服务器推荐E3/E5的多核处理器起步，或者更优CPU；内存32 GB，或更多。&lt;/li>
&lt;li>建议配置：cpu尽量选择双路E5级别，或更新的CPU；单机内存建议128GB，或更多，或者按需增加。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%874.JPG"
loading="lazy"
>&lt;/p>
&lt;p>磁盘选择是超融合系统的重点之一，通常包括SSD和机械磁盘，它是组成分布式存储服务的基础。对于使用RAID卡的服务器，RAID卡上需要删除所有盘的任何RAID配置，确保所有磁盘都直通给主板，SATA接口的主板，请直接按照先后顺序，先连接SSD磁盘，后连结机械盘。&lt;/p>
&lt;ul>
&lt;li>最低配置：单机配置1块64GB SSD用于运行虚拟化软件（U盘-8/16GB也可以，但不建议），250GB SSD 一块或两块，用于安装和运行超融合软件，这是HCI的核心，它往往是以一个虚拟机的形式存在的，该虚拟机会完全运行在SSD上，SSD上的剩余空间计算在分布式存储池的全局空间中，SSD对虚拟机起到了重要的加速功能。机械磁盘一块或者多块，用于提供廉价大量的存储空间，机械磁盘的存储容量和SSD一起计入存储池的空间中。对于纯软件测试目的机械硬盘可以不要。SSD是必须的。机械盘是可选的。推荐混合使用，从而实现性能和空间的鱼和熊掌兼得。&lt;/li>
&lt;li>建议配置：单机配置1块64GB SSD用于运行虚拟化软件，两块1TB的SSD用于运行超融合软件，且为全局存储池提供足够的高速性能SSD存储空间。两块2TB机械硬盘起步，机械盘后续还可以按需添加。集群中所有计算机上的所有SSD和机械磁盘共同组成了统一的混合型存储层。每个虚拟机都可以访问到所有磁盘中的性能和空间。Nutanix CE版文档声称支持总共四块磁盘，但是社区中也有朋友分享6+块盘的正常工作案例。&lt;/li>
&lt;/ul>
&lt;p>网络的选择有以下注意事项：&lt;/p>
&lt;ul>
&lt;li>最低配置：单节点配置至少一个千兆网口，对于单机的超融合系统而言，Nutanix也可以利用到基本上大部分优势功能，包括：运行虚拟机、为虚拟机提供混合盘组成的存储空间、单节点上双副本的数据可靠性等等，我曾长期运行在这个配置上。&lt;/li>
&lt;li>建议配置：一块双口万兆网卡，一个万兆网口用于集群内的存储网络流量，另外一个用于虚拟机中应用的相互网络访问，用VLAN隔离两个网段的流量。测试的目的下，可以混合在一个具备Internet访问条件的网段中。&lt;/li>
&lt;li>建议优化配置：两块双口万兆网卡，一块双口千兆网卡，用于对网络流量、高可用性和性能的进一步优化，这里先不做展开。&lt;/li>
&lt;/ul>
&lt;p>网络交换机的选择，Nutanix CE免费版支持1、3、4节点的搭建模式。单节点没有特殊要求，多节点情况下，现场需要具备至少一台万兆以太网交换机和一台千兆以太网交换机。并且做相应的VLAN准备。&lt;/p>
&lt;h2 id="准备工作">准备工作&lt;/h2>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%875.JPG"
loading="lazy"
>&lt;/p>
&lt;p>必须在 &lt;a class="link" href="https://next.nutanix.com" target="_blank" rel="noopener"
>https://next.nutanix.com&lt;/a> 注册社区账号，记录登录邮箱和密码备用。访问 &lt;a class="link" href="https://next.nutanix.com/discussion-forum-14/download-community-edition-38417" target="_blank" rel="noopener"
>Download Community Edition | Nutanix Community&lt;/a> 这个帖子，下载 Installer ISO &lt;a class="link" href="https://download.nutanix.com/ce/2020.09.16/ce-2020.09.16.iso" target="_blank" rel="noopener"
>https://download.nutanix.com/ce/2020.09.16/ce-2020.09.16.iso&lt;/a> 。将这个ISO文件刻录在启动U盘中。安装前确保网线已经连结正常，且能访问Internet。&lt;/p>
&lt;p>Nutanix CE安装文件也可以在这个网盘中下载：链接：https://pan.baidu.com/s/1DdvvfcPhcpR1jkfrXhCraA 提取码：4dgc&lt;/p>
&lt;h2 id="安装过程">安装过程&lt;/h2>
&lt;p>Nutanix CE版的安装可能会持续1小时左右，过程中包含比较多的自动化操作流程，基本需要用户少量的输入操作，其他更多的是等待时间。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%876.JPG"
loading="lazy"
>&lt;/p>
&lt;p>下面是必须要关注的注意事项，相当于checklist：&lt;/p>
&lt;ol>
&lt;li>在主板BIOS的启动模式选项中，设置为legacy模式，其他模式不支持。&lt;/li>
&lt;li>在BIOS中确认能看到所有磁盘。&lt;/li>
&lt;li>插入一个桌面版 Linux Live CD U盘（如fedora 35），或者Win PE启动U盘，先设置从这个U盘启动。&lt;/li>
&lt;li>用Linux Live CD中的图形化磁盘分区工具，检查所有磁盘的空间，SMART信息，如果磁盘已经可见的老化或者错误，就替换掉在进行后续的装机。删除掉所有磁盘中的分区。重启。&lt;/li>
&lt;li>插入Nutanix CE社区版安装U盘。开始正式的刷机流程。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-disk.png"
loading="lazy"
>&lt;/p>
&lt;p>选项介绍：&lt;/p>
&lt;ul>
&lt;li>选中 AHV - 即Nutnaix版本的KVM的虚拟化软件。&lt;/li>
&lt;li>按顺序选中：服务器虚拟化 Hpyervisor 的SSD盘，CVM的SSD盘，和做数据空间用的机械磁盘。&lt;/li>
&lt;li>Host ip ： 物理机运行虚拟化所在网段IP&lt;/li>
&lt;li>CVM ip：超融合软件运行的网段IP，必须通Internet。&lt;/li>
&lt;li>不要选则创建单节点集群选项。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-license.png"
loading="lazy"
>&lt;/p>
&lt;p>阅读完用户许可证全文后，选中接受，并且点击开始。Nutanix CE是一个裁剪版本有限制的软件，本文建议用于开发测试环境。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-hypervisor.png"
loading="lazy"
>&lt;/p>
&lt;p>开始了物理机的虚拟化的安装，然后自动开始CVM的安装，CVM是一个虚拟机软件，会被自动启动和部分初始化。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-end.png"
loading="lazy"
>&lt;/p>
&lt;p>最后，安装成功的话，拔出U盘，重启服务器。如果是多节点安装，每个节点都需重复这个过程，注意提前规划好Host Ip和CVM Ip的网段。&lt;/p>
&lt;h2 id="初始化配置">初始化配置&lt;/h2>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%8711.JPG"
loading="lazy"
>&lt;/p>
&lt;p>在安装完第一次重启的过程中，我们需要一些等待时间，逐步确认超融合系统的充分就绪，一下每个步骤必须顺序进行，不可跳跃进行：&lt;/p>
&lt;ol>
&lt;li>ssh 登录 host 的ip 地址，root 的默认密码是 nutanix/4u ；登录后，使用hostname 命令查看并记录主机名，运行 virsh list 命令观察 cvm虚拟机的运行状态。&lt;/li>
&lt;li>ssh 登录 cvm 的 ip 地址，默认用户名 nutanix ， 密码 是 nutanix/4u ；登陆后，使用 hostname 命令确认是否变为了 host的主机名+ -cvm 这样的名字，如果看到的是一个 cvm 的ip 地址，什么也不要做。等cvm第一次重启后，在此登录确认主机名。&lt;/li>
&lt;li>在cvm 中执行 ping qq.com 命令，确保和internet的互联。&lt;/li>
&lt;li>在cvm 中执行 genesis status 命令，如果过输出是持续报错信息，就等待错信息的停止，最后正常的输出应该是若干行服务的名称和端口号。&lt;/li>
&lt;li>执行 cluster status 命令，如果过输出是持续报错信息，就等待错信息的停止，知道最后一行显示本系统中还没有被配置，需要创建集群。&lt;/li>
&lt;li>执行超融合集群的创建命令， cluster -s 192.168.1.20 create ； 这里是创建单节点集群，ip地址就是当前cvm的ip地址。等待这条命令初始化集群完毕后，可以看到Nutanix超融合系统的所有服务状态清单。&lt;/li>
&lt;/ol>
&lt;p>多节点（3/4）节点 AHV 集群的搭建说明:&lt;/p>
&lt;ol>
&lt;li>重复以上的安装过程三次或者四次&lt;/li>
&lt;li>确保每个计算机上的cvm都处于 cluster status 输出信息正确一致的状态&lt;/li>
&lt;li>在每个 cvm上ping 其它邻居cvm的ip，确保网络畅通。&lt;/li>
&lt;li>在其中一个cvm的命令行执行多节点集群创建命令： cluster -s 192.168.1.20,192.168.1.22,192.168.1.24 create 。该命令的正确结果是，每个cvm上的集群服务状态信息。&lt;/li>
&lt;/ol>
&lt;p>最后，在cvm上使用 cluster status 命令，确认所有节点的所有服务都正常运行了以后，继续登录超融合系统的网页图像界面。&lt;/p>
&lt;h2 id="集群使用基础">集群使用基础&lt;/h2>
&lt;p>顺序只需一下基础的配置和功能操作。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%8713.JPG"
loading="lazy"
>&lt;/p>
&lt;ol>
&lt;li>在浏览器中访问任一cvm的ip地址，使用默认用户名 admin 密码 nutanix/4u登录，立刻会让你修改 admin 的默认密码，使用并记录这个新密码备用。&lt;/li>
&lt;li>用新密码登录。&lt;/li>
&lt;li>在要求输入Next 账号的地方，输入前面注册好的 Nutanix 论坛的邮箱和密码。&lt;/li>
&lt;li>成功登录后，你可以看到超融合的初始化界面，观察第一个关键信息点，观察左上方的第二个信息块，这里的显示的是存储池的物理和逻辑容量。如果这个数据没有立刻显示出来，那么表明该节点存在的某种问题，但是这不表明它不能用于多节点集群的创建。我有三个计算机时这种情况，单节点初始化失败的计算机在多节点集群的创建中反而没有问题。&lt;/li>
&lt;li>在右上角的配置菜单中，选中镜像访问 image service ，在哪里上传一个准备好的 iso，img 或者 qcow2 文件。等待几分钟后，每个文件应该即处于就绪使用的active 状态。&lt;/li>
&lt;li>在网络配置中创建一个用于虚拟机运行的网络。&lt;/li>
&lt;li>创建空白的虚拟机，挂在iso文件，并且开始虚拟机的安装。&lt;/li>
&lt;li>创建空白虚拟机，创建基于img 或者 qcow2虚拟机模板文件的磁盘，开机后即可使用。&lt;/li>
&lt;/ol>
&lt;h2 id="参考成本">参考成本&lt;/h2>
&lt;p>我个人喜欢在本地运行很多虚拟机的测试环境，属于 self-host 粉。我的虚拟机数量逐渐增加。从一个Intel NUC的单机微型测试机。 到单机联想工作站（双路E5CPU），到现在新增了两个某宝的组装兼容机，最后组成了三节点的Nutanix 超融合集群【vSphere 虚拟化】。个人实现多节点超融合集群的必要性因人而异，这里只是告诉大家，使用Nutanix CE在这些机器上是可行的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-%E5%B9%BB%E7%81%AF%E7%89%871.JPG"
loading="lazy"
>&lt;/p>
&lt;p>下面是网购订单的统计信息，希望对于想自行攒机的朋友，或者对扩容利旧服务器的朋友有些帮助。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-2021-12-29_12-32-49.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="下期预告">下期预告&lt;/h2>
&lt;p>HCI系统的搭建还有很多问题值得一起探讨和学习，HCI超融合系统软件还有很多功能可以学习了解。我们为DevOps社区的朋友们新开辟了这个HCI板块，希望以后会每个月为大家输出一期新的内容。下期直播的简介如下：&lt;/p>
&lt;ol>
&lt;li>日期：2022年1月26日中午1点&lt;/li>
&lt;li>内容1：Nutanix CE版AHV安装答疑解惑&lt;/li>
&lt;li>内容2：VMware vSphere 集群的搭建&lt;/li>
&lt;li>主持人：刘征，吴孔辉&lt;/li>
&lt;li>直播平台：B站搜/关注：中国DevOps社区&lt;/li>
&lt;li>直播抽奖：未知&lt;/li>
&lt;li>报名：互动吧搜/关注：中国DevOps社区&lt;/li>
&lt;/ol>
&lt;h2 id="其他">其他&lt;/h2>
&lt;p>HCI超融合技术对于了解它的人来说很火热，但是还有很多不太了解HCI的人；HCI的用户对它也有不同的使用场景和期望。请大家参与这个《中国超融合状态调查》，我们每月为参与本调查的朋友进行抽奖，抽奖结果在下次直播的时候公布。扫码参与调查。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-dc.png"
loading="lazy"
>&lt;/p>
&lt;p>我们为希望学习HCI技术的朋友们创建了一个qq群，希望可以给大家带来一定帮助。扫码加入我们的QQ群。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2022-01-04-qq.png"
loading="lazy"
>&lt;/p></description></item><item><title>删除Cisco交换机中的所有VLAN数据</title><link>https://martinliu.cn/blog/%E5%88%A0%E9%99%A4cisco%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89vlan%E6%95%B0%E6%8D%AE/</link><pubDate>Tue, 09 Nov 2021 12:58:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%88%A0%E9%99%A4cisco%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89vlan%E6%95%B0%E6%8D%AE/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-09-bigstock-network-hub-and-patch-cables-12234593-1.jpeg" alt="Featured image of post 删除Cisco交换机中的所有VLAN数据" />&lt;p>最近在闲鱼上收了几台网络设备，其中有一台Cisco 3560X作为lab的核心交换机，其它一些都是用于练习网络运维。本文从清除老旧设备上的vlan开始，将会记录我在这些网络设备上的所有重要配置操作。&lt;/p>
&lt;h2 id="网络设备的初始化">网络设备的初始化&lt;/h2>
&lt;h3 id="cisco-交换机">Cisco 交换机&lt;/h3>
&lt;p>Cisco 3560 的初始化是非常容易和方便的，这是一台非常新的设备，拆机后，机箱内部都没有什么积累明显的灰尘。第一次开机的时候通过mini USB口的连线连接，登陆console后发现需要密码才能进入enable模式，然后不得不重置这个设备的所有配置。&lt;/p>
&lt;ul>
&lt;li>在交换机开机的情况下，先用mini USB连接好电脑和交换机。&lt;/li>
&lt;li>拔掉交换机的电源线&lt;/li>
&lt;li>按住交换机前面板，左上角的mode按钮不放&lt;/li>
&lt;li>插上交换机电源线&lt;/li>
&lt;li>保持mode按钮10+秒以上&lt;/li>
&lt;li>看着交换机正常启动，并且进入了快速配置模式&lt;/li>
&lt;li>选择进入快速配置模式，或者选择no，进入正常无向导的手工配置模式&lt;/li>
&lt;/ul>
&lt;p>到此处为止，你就进入了一个无密码，几乎无配置的状态。虽然现在这是一台几乎空白配置的交换机。但是交换机的文件系统里还是有一个名为vlan.dat的数据文件。这个文件是之前这个交换机的管理员留下的。有了他的存在当你当你执行 ‘ show vlan brief ’ 命令的时候，这个数据文件中的vlan数据有近百行，滚动了半天，非常烦人。因此需要想办法将其删除。&lt;/p>
&lt;h4 id="清除vlan数据文件">清除VLAN数据文件&lt;/h4>
&lt;p>参考文章：https://www.networkstraining.com/deleting-the-vlan-database-from-a-cisco-switch/&lt;/p>
&lt;p>首先查看flash上有哪些文件，使用命令 &lt;code>show flash&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sw-bj-01#show flash:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Directory of flash:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10 -rwx 4371 Jan 2 2006 23:55:34 +00:00 config.text
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 -rwx 26945536 Aug 31 2018 10:01:56 +00:00 c3560e-universalk9-mz.152-4.E6.bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 -rwx 26844160 Feb 28 2019 05:02:21 +00:00 c3560e-universalk9-mz.152-4.E7.bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4 -rwx 0 Mar 27 2019 18:36:06 +00:00 merge_config.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5 -rwx 6168 Jan 2 2006 23:55:34 +00:00 multiple-fs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6 -rwx 2915 Jan 2 2006 00:02:10 +00:00 config.old
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8 -rwx 27468 Mar 27 2019 18:36:05 +00:00 candidate_config.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 9 -rwx 736 Jan 2 2006 00:08:27 +00:00 vlan.dat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 11 -rwx 3835 Jan 2 2006 23:55:34 +00:00 private-config.text
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">57671680 bytes total (3395584 bytes free)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面的命令结果中的倒数第二行就是用来保存vlan信息的文件。然后我们使用 &lt;code>delete vlan.dat&lt;/code> 命令将其删除即可。然后使用 &lt;code>copy running-config startup-config&lt;/code> 保存当前的战果。还可以使用 reload 重启一下交换机，再次登陆交换机之后使用 show vlan brief 命令校验当前的交换机上只有默认的6个vlan存在。&lt;/p>
&lt;h4 id="启用-ssh-和-web-登陆">启用 ssh 和 web 登陆&lt;/h4>
&lt;p>每次都适用console线连接并配置交换机？这样还是有点麻烦的，我们需要启用交换机的管理ip和ssh登陆这样以后就可以从网络配置了。以后就可以用Ansible之类的DevOps工具玩NetOps了。配置过程的主要命令如下：&lt;/p>
&lt;ol>
&lt;li>配置管理ip， 参考命令如下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ip default-gateway 192.168.101.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># interface vlan 101
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-if)# ip address 192.168.101.2 255.255.255.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>主机名， 参考命令如下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># config t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config)# hostname myswitch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config)# ip domain-name thegeekstuff.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>创建 RSA 密钥，用于启用ssh登陆，参考命令如下&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">myswitch(config)# crypto key generate rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> The name for the keys will be: myswitch.thegeekstuff.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Choose the size of the key modulus in the range of 360 to 2048 for your
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> General Purpose Keys. Choosing a key modulus greater than 512 may take
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> a few minutes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">How many bits in the modulus [512]: 1024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> % Generating 1024 bit RSA keys, keys will be non-exportable...[OK]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>配置一些 Line VTY 和 console 的参数&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># line vty 0 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# transport input ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# login local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# password mypassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># line console 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# logging synchronous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(config-line)# login local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>设置用户名和密码&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">myswitch# config t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter configuration commands, one per line. End with CNTL/Z.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">myswitch(config)# username myusername password mypassword
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果你还没有配置enable的密码可以参考下面的命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">myswitch# enable secret myenablepassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">myswitch# service password-encryption
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>校验 ssh 访问&lt;/li>
&lt;/ol>
&lt;p>使用命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">myswitch# sh ip ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSH Enabled - version 1.99
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Authentication timeout: 120 secs; Authentication retries: 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在你可以用网络上的电脑测试ssh登陆这个交换机的ip了。&lt;/p>
&lt;h3 id="cisco-路由器">Cisco 路由器&lt;/h3>
&lt;p>待完成&lt;/p>
&lt;h3 id="cisco-防火墙">Cisco 防火墙&lt;/h3>
&lt;p>待完成&lt;/p>
&lt;p>&amp;mdash;- 未完待续 &amp;mdash;-&lt;/p></description></item><item><title>开发者关系、Developer Relation、DevRel这是什么职业？</title><link>https://martinliu.cn/blog/%E5%BC%80%E5%8F%91%E8%80%85%E5%85%B3%E7%B3%BBdeveloper-relationdevrel%E8%BF%99%E6%98%AF%E4%BB%80%E4%B9%88%E8%81%8C%E4%B8%9A/</link><pubDate>Tue, 05 Oct 2021 15:44:13 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%BC%80%E5%8F%91%E8%80%85%E5%85%B3%E7%B3%BBdeveloper-relationdevrel%E8%BF%99%E6%98%AF%E4%BB%80%E4%B9%88%E8%81%8C%E4%B8%9A/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-10-05-people-g95677a868_1920.jpg" alt="Featured image of post 开发者关系、Developer Relation、DevRel这是什么职业？" />&lt;p>国内很多公司比较多认同的是这样一些职位：开发者社区运营、技术品牌运营、开发者市场运营等，这些都是偏运营的职位。在挺多的职位描述中，往往只需要比较少的工作经验。&lt;/p>
&lt;p>在国外也有很多公司正在寻找 DevRel 方面的人才，他们对这个角色的意义和价值也不尽相同，具有明显的差异性。因此这个职位的定位其实和公司的目标是紧密相关的。&lt;/p>
&lt;h4 id="google-的定义">Google 的定义&lt;/h4>
&lt;blockquote>
&lt;p>Developer Relations’ role is to create a vibrant ecosystem of 3rd party developers, by being the interface between those developers and your platform’s product, engineering, and design teams. &lt;!-- raw HTML omitted -->(From)&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
中文翻译：开发者关系的作用是为第三方开发者创建一个充满活力生态系统，成为开发者和你们公司平台的产品经理、工程师和设计团队之间的接口。&lt;/p>
&lt;/blockquote>
&lt;h4 id="twilio-的定义">Twilio 的定义&lt;/h4>
&lt;blockquote>
&lt;p>Our job is to inspire and equip developers to build the next generation of amazing applications. This means understanding what they are trying to do, pointing them to tools and training and generally helping them be successful. &lt;!-- raw HTML omitted -->(From)&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
中文翻译：我们的工作是激励和装备开发人员建立下一代令人惊叹的应用程序。这意味着理解他们正在努力做什么，为他们指出工具和培训，并普遍地帮助他们取得成功。&lt;/p>
&lt;/blockquote>
&lt;p>以上两种定义的区别是：这个职位在Google偏重于双向接口，在Twilio偏向于单向对外赋能。&lt;/p>
&lt;p>Michael Mahemoff 曾经写过一篇博客文章&lt;a class="link" href="http://softwareas.com/developer-relations-a-five-level-maturity-model/" target="_blank" rel="noopener"
>《Developer Relations: A Five-Level Maturity Model》&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>级别&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>LEVEL 0: 无 DevRel&lt;/td>
&lt;td>没有从公司内部的投入，来推广该公司的平台和技术，支持开发者，或捕捉外部开发者的反馈。「&lt;strong>未开放的闭门造车阶段，对外部开发者/用户无感知&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LEVEL 1: 非正式的&lt;/td>
&lt;td>没有官方的开发者关系人员或规划，但一些开发者关系由其他职能部门处理。市场PR可能是在推广平台/技术，业务发展「BD」可能是与开发商合作并支持他们。厂商的开发者可能会给社区一些技术讲座。「&lt;strong>市场和BD部门潜意识的覆盖开发者&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LEVEL 2: 高度接触/合作伙伴&lt;/td>
&lt;td>与宝藏级合作伙伴（即大型、成熟的公司，或那些有足够资源为新功能搭建演示的公司）建立频繁接触，这往往是隐性的关系。这是一种&amp;quot;不用给我们打电话，我们会给主动联系你&amp;quot;的外联活动，可能需要公司的平台提供资金或直接的技术能力来构建整合方案，并经常伴随着尚未宣布的技术合作，可能可以与一组即将发布的应用一起推出。「&lt;strong>重点培养合作伙伴&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LEVEL 3: Evangelism&lt;/td>
&lt;td>通过会议、合作关系和网络媒体大规模地推广宣传、讲解和支持公司的产品/技术/平台。积极主动地招募大量的开发者使用该平台「&lt;strong>批量引流开发者/用户&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LEVEL 4: Advocacy&lt;/td>
&lt;td>一种双向的关系，在这种关系中，公司技术/平台自己的员工认为自己不仅仅是为技术/平台做宣传，而且是为使用平台的开发者着想。在这种心态下，开发者关系在反馈真实世界的产品Bug和功能需求方面发挥着积极的作用，并建立支持性工具来改善开发者的体验。「&lt;strong>更深入的和开发者/用户产生双向互动，从而获取反馈并提供更好的支持&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LEVEL 5: 可量化的&lt;/td>
&lt;td>度量指标驱动的方式，在这种方式中，开发者关系的投资回报被理解，外联工作能够被量化，无论是对高接触的合作伙伴还是对大规模开发者群体。「&lt;strong>理性量化的度量工作成果，用于数据指导下一步的工作。&lt;/strong>」&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>注：在以上的表格中，每一行最后一句话，在方括号中的内容，是我添加的观点。参考资料：&lt;/p>
&lt;ul>
&lt;li>Developer Advocate versus Technical Evangelist; When names change the tone &lt;!-- raw HTML omitted -->&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Developer Relations: A Five-Level Maturity Model &lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>在以上的表格中，我们可以清晰的看到 DevRel 不同的风格或者做法，任何公司根据他们当前的现状和目标，而选择了其中的某一种，然后逐渐演变。如果一个公司希望把重点放在推广和宣传上，或者可能通过参与较少的活动来降低成本，那么他们可以决定把重点放在 &lt;strong>Evangelism&lt;/strong> 宣传上。如果一家公司优先考虑从开发者那里收集产品反馈，那么 &lt;strong>Advocacy&lt;/strong> 宣传可能是更好的方法。&lt;/p>
&lt;p>开发者关系有可能帮助到企业的许多领域，所以你在业务拓展（技术/平台）方面确定的战略和目标很重要。因此可以使用 Dave McClure 的 AARRR 指标可以作为一个基础，从而证明开发者关系是怎样帮助到业务拓展的。&lt;/p>
&lt;h4 id="developer-relations-的定义">Developer Relations 的定义&lt;/h4>
&lt;blockquote>
&lt;p>DevRel, or developer relations, is a process for nurturing mutually beneficial relationships between organisations and software developers. &lt;!-- raw HTML omitted -->(From)&lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
中文翻译：‘开发者关系’是一个培养组织和软件开发者之间互利关系的过程。&lt;/p>
&lt;/blockquote>
&lt;p>换句话说，这是一个战略和战术的集合，帮助公司与软件工程师更好地合作。开发者关系团队到底做什么，为什么要做，取决于他们的组织需要是什么，目标是什么。&lt;/p>
&lt;h2 id="为什么要做开发者关系">为什么要做开发者关系？&lt;/h2>
&lt;p>从不同公司的角度，所追求的 DevRel 的战略动机可能有很大的不同。例如，X公司做DevRel可能是为了推动其API的采用，而Y公司的团队可能是为了提高公司雇用软件工程师的机会。&lt;/p>
&lt;p>这些动机的差异导致了不同DevRel战略、战术的采用，和对DevRel工作成果成功的定义。事实上，理解你的组织为什么需要开发者关系，是你需要知道的关键，而不是其它任何DevRel的工作事项。它可以帮助你理解DevRel该做什么，需要让谁参与，以及如何度量你的投入。&lt;/p>
&lt;p>那么，开发者关系的战略原因是什么？今天，大多数开发者关系计划都集中在鼓励采用产品/技术方面，如API。然而，至少还有其他五个常见的原因。包括采用，大多数公司投资于DevRel是因为他们想影响下面的各个方面：&lt;/p>
&lt;ul>
&lt;li>采用：该组织希望更多的开发者使用他们的产品。&lt;/li>
&lt;li>产品构建：该组织依靠开发者社区来建设他们的（可能是开源的）技术。&lt;/li>
&lt;li>产品与市场的契合：了解开发者的需求和愿望对产品的成功是必要的。&lt;/li>
&lt;li>开发者支持：提供教育、工具和基础设施，以便开发者在其雇主采用产品后使用该产品。&lt;/li>
&lt;li>开发者认知：该组织认为当前的开发者认知是其产品成功的潜在障碍。&lt;/li>
&lt;li>招聘：该组织希望改善其雇主品牌，以便对他们需要雇用的开发者更具吸引力。&lt;/li>
&lt;/ul>
&lt;p>在实践中，组织的DevRel活动的是为了满足以上这些战略驱动力的某种组合。例如，一个需要推动采用的公司，很可能也想确保其产品具有良好的市场适应性。&lt;/p>
&lt;p>尽管公司在做开发者关系时有各种不同的原因和动机，但不论他们怎样做，都是基于一套类似的技能和策略，我们称之为开发者关系的四个支柱。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-10-05-cycle-of-developer-relations.webp"
loading="lazy"
alt="DevRel的四大支柱"
>&lt;/p>
&lt;p>“DevRel的四大支柱”&lt;/p>
&lt;p>就像市场营销不全是广告一样，开发者关系也不只是建立知名度。虽然不是每个人都同意这个命名，但DevRel有四个互补的领域。&lt;/p>
&lt;ul>
&lt;li>开发者营销｜Developer marketing：理解产品的目标开发者是谁，然后确保他们有信息和工具来做决定（是否使用你们的产品）。
&lt;ul>
&lt;li>内容创作、投放和分发&lt;/li>
&lt;li>活动Event的赞助、演讲、出席、组织&lt;/li>
&lt;li>广告和其他付费宣传活动&lt;/li>
&lt;li>竞争和市场研究&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>开发者支持｜Developer enablement：提供开发者成功使用产品所需的一切。
&lt;ul>
&lt;li>开发者教育：文档、教程、视频、指南&lt;/li>
&lt;li>开发者体验：API设计、SDK、参考应用程序、示例代码&lt;/li>
&lt;li>支持和帮助开发者取得成功&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>开发者布道｜Developer advocacy：作为开发者和组织之间的支持者和渠道。
&lt;ul>
&lt;li>作为技术品牌的公众形象&lt;/li>
&lt;li>在社交媒体、论坛和活动中与开发者直接互动&lt;/li>
&lt;li>在活动（会议、meetup）中发言/分享&lt;/li>
&lt;li>Twitch线上直播、视频制作、播客制作&lt;/li>
&lt;li>充当从开发者到公司的反馈回路&lt;/li>
&lt;li>创建宣传和教育材料&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>开发者社区｜Developer community：创建和维护一个可持续的环境，使开发者
&lt;ul>
&lt;li>提供并主持论坛、聊天和其他渠道，为开发者提供直接交流的平台。&lt;/li>
&lt;li>实施冠军计划（类似于微软的MVP，Google的GED，AWS的Hero等）和其他激励/奖励参与者的形式&lt;/li>
&lt;li>设定互动的标准和基调（社区行为准则）&lt;/li>
&lt;li>创建一个可持续的流程和环境，使人们能够满足他们的需求，为一个共同的目标而努力。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="什么是开发者市场营销developer-marketing">什么是开发者市场营销（developer marketing）？&lt;/h2>
&lt;p>开发者营销&amp;ndash;也被称为B2D，或企业对开发者的市场营销，是与软件开发者受众打交道的市场营销方式。开发人员是一种不同的受众，根据2020年的官方统计数据，中国有七百万软件从业人员。对这么多人进行归纳总结是很难的。即便如此，开发构建软件的工作其实也产生了一些共性的特征，这些特征对于任何想向软件开发者推销的人来说都是很重要的。&lt;!-- raw HTML omitted -->&lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>软件开发者们实际上倾向于：&lt;/p>
&lt;ul>
&lt;li>希望得到事实，而非完美的、用于市场宣传的产品推广信息&lt;/li>
&lt;li>在他们选择某一项技术时，会把他们的声誉风险也绑定在了一起&lt;/li>
&lt;li>拥有深厚的专业知识，可能比产品/技术/平台的厂商更了解他们的细分市场&lt;/li>
&lt;li>从非主流的来源获取信息&lt;/li>
&lt;li>重视实践经验，而非豪言壮语的保证&lt;/li>
&lt;li>在技术供应商的选择方面，产生直接的影响&lt;/li>
&lt;/ul>
&lt;p>这影响到信息传递、渠道、语气、战术组合，以及市场营销人员可能做的几乎所有其他事情。&lt;/p>
&lt;h3 id="b2d-的产品是不同的">B2D 的产品是不同的&lt;/h3>
&lt;p>这不只是因为开发者是一个不同类型的受众。以开发者为目标产品在这一点上是不同的。&lt;/p>
&lt;ul>
&lt;li>要了解他们的能力，以及所需要的专业知识&lt;/li>
&lt;li>他们的观点可以在相对较短的时间内得到证明&lt;/li>
&lt;li>购买者往往是用户&lt;/li>
&lt;li>失败到产品可以迅速的升级到影响数百万人&lt;/li>
&lt;/ul>
&lt;p>综合来看，根据开发者目标产品的特殊性，根据软件开发者的需求的不同，我们需要专门的开发者市场营销战略和策略。&lt;/p>
&lt;p>但是，开发人员不讨厌市场营销吗？不，开发者并不讨厌营销。像所有人一样，开发者不喜欢很差劲的市场营销。&lt;/p>
&lt;p>有时，当非开发者试图谈论一项针对开发者有好处的技术，或者尝试理解开发者常见的情况时，他们就会暴露，其实对开发者根本缺乏理解。而这并不是不可逾越的。任何人都可以学习，第一步是认知到开发者受众们都有其特定的需求。&lt;/p>
&lt;p>这一点很重要，因为开发者在研究产品时要寻找值得信赖的信息。如果你所传递的信息感觉&amp;quot;不对劲&amp;quot;，也许是因为它掩盖了一些关键的细节，那么就很难相信你所提供的产品。&lt;/p>
&lt;h3 id="构建开发者市场营销策略">构建开发者市场营销策略&lt;/h3>
&lt;p>构建B2D的市场营销策略与构建任何营销策略都很相似。从目标开始，然后制定如何达到目标的方案。&lt;/p>
&lt;p>更详细地说，建立开发者商营销战略的阶段如下：&lt;/p>
&lt;ol>
&lt;li>广泛的了解公司的战略，并确定服务于该战略服务的北极星目标。&lt;/li>
&lt;li>通过对现状的情景分析来评估你的起点。&lt;/li>
&lt;li>对你的开发者受众进行细分，然后决定哪些是目标人群。&lt;/li>
&lt;li>开展一些用户调研，来了解这些开发者。&lt;/li>
&lt;li>开发针对性的信息，用于和这些开发者对话，表达他们的需求和你的解决方案。&lt;/li>
&lt;li>创建战略方案，帮助你的目标开发者经历你所设计的用户漏斗旅程。&lt;/li>
&lt;li>定义衡量方案成功的指标，并反馈到你的整体开发者营销目标。&lt;/li>
&lt;/ol>
&lt;p>在深入理解 DevRel 前，希望现在大家已经对开发者市场营销有了大概的理解，其实他们是紧密相关的。&lt;/p>
&lt;h2 id="从-aarrr-指标的角度看-devrel-的工作内容">从 AARRR 指标的角度看 DevRel 的工作内容&lt;/h2>
&lt;p>Phil Leggetter 将 AARRR 【&lt;a class="link" href="https://www.slideshare.net/dmc500hats/startup-metrics-for-pirates-long-version" target="_blank" rel="noopener"
>客户生命周期：成功获客的5个步骤&lt;/a>】做了两头的扩展，变成了 AAARRRP， 在头尾分别增加了新的&amp;rsquo;A&amp;rsquo;和‘P’。下面用 AAARRRP 7步法来勾勒出 DevRel 可能会影响到的日常工作内容。&lt;/p>
&lt;ol>
&lt;li>Awareness ｜宣传 &amp;ndash; 对平台/技术/产品和它的功能的认识&lt;/li>
&lt;li>Acquisition ｜获取 &amp;ndash; 注册/下载/安装&lt;/li>
&lt;li>Activation ｜激活 &amp;ndash; 在自己开发的应用中积极使用该平台/技术/产品&lt;/li>
&lt;li>Retention ｜保留 &amp;ndash; 持续使用和跟踪该平台/技术/产品，使用新的/附加的功能，并在新的应用程序中继续使用。&lt;/li>
&lt;li>Revenue ｜收入 &amp;ndash; 付费使用该平台/技术/产品，或者从开源软件版本用户提升为付费版客户。&lt;/li>
&lt;li>Referral ｜推荐 &amp;ndash; 告诉别人这个平台的情况，分享自己踩过的坑和技术。&lt;/li>
&lt;li>Product/platform ｜产品/平台 &amp;ndash; 用户参与上游厂商的产品构建协作，并提供对平台/产品和技术的反馈。&lt;/li>
&lt;/ol>
&lt;p>有一系列广泛而多样的活动可以归入开发者关系DevRel的日常工作中。这些活动中的每一项都可能与实现AAARRRP目标的计划的一个或多个属性相关。&lt;/p>
&lt;ul>
&lt;li>编写文档（获取、激活、产品）。
&lt;ul>
&lt;li>参考资料&lt;/li>
&lt;li>指南（How-to）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>库开发（激活，产品）&lt;/li>
&lt;li>快速上手的杨例应用程序（激活、产品）&lt;/li>
&lt;li>博客文章（认知、获取、激活、保留）
&lt;ul>
&lt;li>教程&lt;/li>
&lt;li>实用技巧&lt;/li>
&lt;li>思路指导&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>网络研讨会 (认知、获取、激活、保留)&lt;/li>
&lt;li>活动赞助（认知、获取）。
&lt;ul>
&lt;li>Meetup 赞助&lt;/li>
&lt;li>会议展位&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>分享演讲（认知、获取）
&lt;ul>
&lt;li>聚会&lt;/li>
&lt;li>会议&lt;/li>
&lt;li>社区/社团&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>支持（激活、保留、产品）
&lt;ul>
&lt;li>用户支持系统，如：Zendesk&lt;/li>
&lt;li>StackOverflow 回答问题&lt;/li>
&lt;li>公司和第三方论坛，如：Discuss等&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>售前技术讨论（收入、激活）。
&lt;ul>
&lt;li>呼叫 Calls&lt;/li>
&lt;li>电子邮件&lt;/li>
&lt;li>技术支持&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>专用论坛，如Google Groups或Discourse，如SmartThings社区（激活、保留）。&lt;/li>
&lt;li>Alpha/Beta 产品试用计划（保留、产品）&lt;/li>
&lt;li>办公时间 Office Hours（激活、保留）。&lt;/li>
&lt;li>获取开发者的反馈（保留、产品）&lt;/li>
&lt;li>帮助公司招聘（宣传）。&lt;/li>
&lt;/ul>
&lt;p>成功地开展这些活动的结果是：对某受众产生积极的影响，并与之建立关系，对公司的形象和公司本身的可信度将提升。这可以增加被推荐的可能性。但这些建立这些关系是需要时间的。&lt;/p>
&lt;p>‘商业收入’在上述活动中被明显的遗漏了。收入可能与开发者使用产品的水平有关。它还依赖于产品的定价结构。所以，还这不能笼统地纳入上述活动清单，但它肯定可以帮助你专注于可能提供更大投资回报的活动或目标中的开发人员。&lt;/p>
&lt;p>那么，根据最常见的工作头衔，这些不同的角色会参加什么活动？&lt;/p>
&lt;ul>
&lt;li>开发者布道师 Developer advocate ： 可以进行上述所有的活动，作为其开发者关系计划的一部分。特别是那些标有产品或保留的活动。&lt;/li>
&lt;li>开发者代言人 Developer evangelist ： 可能会更多地关注引导新用户的活动，如文档、博客文章、活动赞助和分享演讲。请看那些有助于认识和获取的活动。&lt;/li>
&lt;/ul>
&lt;p>好了现在你可以使用‘DevRelOMeter’下面这个工具来测试一下，你自己的日常工作中都从事了以上那些工作，包括主动和被动的，看看你的工作性质是偏 Advocate 还是 Evangelist。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-10-05-devrelometer.gif"
loading="lazy"
alt="DevRelOMeter"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://leggetter.github.io/devrelometer/" target="_blank" rel="noopener"
>点此进入测试页面&lt;/a>&lt;/p>
&lt;p>下面再从Google专家的角度看看DevRel这件事。下面转载 Reto Meier 【Developer Advocate @ Google, software engineer, and author of “Professional Android” series from Wrox. All opinions are my own.】到两篇文章的部分内容：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://medium.com/google-developers/why-do-we-pay-these-people-anyway-d7ed706d6d55#.438f1qn4x" target="_blank" rel="noopener"
>Why Do We Pay These People Anyway?&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://medium.com/google-developers/the-core-competencies-of-developer-relations-f3e1c04c0f5b#.q1c9719cz" target="_blank" rel="noopener"
>The Core Competencies of Developer Relations&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>Reto Meier是从谷歌的Android的生态系统方向考虑和描述DevRel的，Google擅长通过构建平台的方式在全球的范围规模化推广自己原创产品和技术。这有其特殊性，在阅读下面内容的时候，请注意保持第三方的视角。在后需的文字中，读者需要通过上下文辨别‘开发者’，有时候是厂商原厂开发者，有时候是第三方开发者。&lt;/p>
&lt;h2 id="我们为什么要付给这些人钱">我们为什么要付给这些人钱？&lt;/h2>
&lt;p>在我看来，建立一个平台的决定是基于如何最好地服务你的用户。&lt;/p>
&lt;p>一个健康的生态系统会提升你的平台，通过填补你自己没有准备、不能或不愿意填补的空白，提供比你的产品更丰富的产品。你牺牲了市场上的独占性，但作为交换，你为自己和他人创造了更大的机会。你创造了一个更大的馅饼，以换取将其中切的较小的一片。&lt;/p>
&lt;blockquote>
&lt;p>如果一个平台能从与日俱增的用户采用中获益，那么它就需要用产品和服务来吸引这些用户；构建一个第三方开发者的生态系统就是这些产品和服务的发展方式。&lt;/p>
&lt;/blockquote>
&lt;p>生态系统还为其他僵化的垂直结合到产品提供了灵活性。安卓和iOS都是应用开发者的平台，因此，对于每个设备的使用价值来说，只限于由谷歌或苹果为它们编写软件，倒不如开放给所有开发者能加有意义。安卓则更进一步，构建了一个对于所有设备制造商开放的生态系统。&lt;/p>
&lt;p>在不同的规模上，谷歌地图API创造了一个由数百万个应用程序和网站所组成的生态系统，每一个App都有一个嵌入的谷歌地图。这种开放第三方实施开发方式增加了谷歌地图的使用度，这远远超过了谷歌自己可以构建的规模。&lt;/p>
&lt;p>在实践中，创建开发者生态系统的基本目标是复杂而交织的。对平台拥有者来说，它为他们贡献的第一方App和服务到受众增加了，他们可以通过向开发者收取使用平台的费用，或在生态系统内再次分发来实现盈利。一个平台也可以是对冲对竞争对手的屏障，或刺激创新的尝试。考虑到创建一个平台和生态系统的成本，最有可能的目标是这些因素的组合。&lt;/p>
&lt;p>把一个产品变成一个平台并不总是合理的。这样做有可能使竞争对手从你自己的产品中吸纳用户，或者使你的产品的用户体验下降。&lt;/p>
&lt;p>一个健康的生态系统是可自我持续发展，且获利中立的，第三方开发者的成功会帮助你的用户并支持你的目标，反之亦然。&lt;/p>
&lt;h3 id="开发者关系是什么">开发者关系是什么？&lt;/h3>
&lt;blockquote>
&lt;p>Developer Relations’ role is to create a vibrant ecosystem of 3rd party developers, by being the interface between those developers and your platform’s product, engineering, and design teams.&lt;!-- raw HTML omitted -->
中文翻译：开发者关系的作用是为第三方开发者创建一个充满活力生态系统，成为开发者和你们公司平台的产品经理、工程师和设计团队之间的接口。&lt;/p>
&lt;/blockquote>
&lt;p>为了确保界面（接口）的高保真度，开发者关系部必须由工程师组成；这些工程师将同样能够在核心平台或第三方开发者的角色中工作。&lt;/p>
&lt;p>除了建立认知，开发者关系还负责创作，第三方开发者使用你的平台构建伟大产品所需的一切。从收集开发者提出的bug和功能请求、执行早期访问计划（beta和试用）、编写文档、创建样例程序、编写教程和技术视频、在会议上发言、以及在论坛和Stack Overflow上回答问题，等等的一切。&lt;/p>
&lt;p>他们还帮助应用平台的开发者的需求，通过与社区接触&amp;ndash;通过社交媒体在线，以及亲自参与到Meetup和会议中&amp;ndash;并在你的产品和工程团队中充当社区开发者的代言人。这确保了平台的开发与你的生态系统的需求的一致性。&lt;/p>
&lt;p>最终，开发者关系负责你的平台的开发者体验。这将帮助开发者打造更好的产品，从而创造更好的用户体验，从而能构建更成功的应用程序，以及更成功的生态系统&amp;ndash;这反过来又鼓励开发者打造更好的应用程序。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-10-05-0_bE4D-7g4Eu2V84SP.png"
loading="lazy"
alt="开发者关系的良性循环"
>&lt;/p>
&lt;p>“开发者关系的良性循环”&lt;/p>
&lt;p>在小公司（或新生产品），开发者关系任务往往是产品和工程团队的责任。最终你的平台会成熟到需要有工程师来全职专注于这些活动，并扩大他们的工作范围，包括更复杂的项目，如培训和社区参与，并通过开发更丰富的场景来支持外部互动，并包括多个平台和API。&lt;/p>
&lt;blockquote>
&lt;p>开发人员需要信任你的DevRel团队；要做到这一点，他们必须是正统的。&lt;/p>
&lt;/blockquote>
&lt;p>开发者关系是你的开发者产品的公众形象&amp;ndash;第三方开发者的主要信息来源，以及与他们的互动。将这些互动转化为一种可信赖的关系至关重要。&lt;/p>
&lt;p>开发者关系团队的可信度将由厂商所产生的代码的质量，以及他们所提供的建议来衡量。最终，平台本身的质量将通过你的开发者关系团队制作的材料的质量、全面性和可用性进行评估。&lt;/p>
&lt;p>第三方开发人员必须能够信任你的DevRel团队，以及所提供的代码、技术答案、最佳实践和培训，将其作为开发者信息的最佳、最准确和最正规的来源。&lt;/p>
&lt;p>你的开发者关系团队也必须得到你的内部工程团队的信任，确信他们可以准确的表达第三方开发者的想法和体验，给予坦率的技术反馈，并面向开发者受众们诚实地代言平台。&lt;/p>
&lt;p>他们会因为是平台提供方原厂公司的代言人而轻易获得一些最初的信任，但为了产生真正的影响，他们还必须用独立于他们所代表的公司的方式，通过其展现的正统性建立与他人的信任。&lt;/p>
&lt;p>开发者关系并不是市场营销、业务发展BD或销售&amp;ndash;这些都不在工程团队。&lt;/p>
&lt;ul>
&lt;li>开发者市场：与开发者关系DevRel一起工作，帮助提高对市场内容的认知，提供市场研究，支持开发者活动，并创造统一的品牌形象。&lt;/li>
&lt;li>业务发展-BD团队与商业决策者合作，他们需要的不仅仅是良好的开发者体验，以说服他们投入资源在你公司的平台上构建应用。BD通常与少数知名的合作伙伴合作，他们各自的成功可以加速你的平台在用户中的采用。一旦做出承诺，开发者关系部经常与相应的工程团队合作，以确保成功的合作。&lt;/li>
&lt;li>销售团队通常用于开发那些直接为为平台消费的客户，例如云或广告平台。销售团队有时会与销售工程师配对，他们的技术同行，能够与客户的工程团队进行1对1的合作，以支持销售或基于商业关系。&lt;/li>
&lt;/ul>
&lt;p>注：以上是源于Google的组织者结构，一个成熟的大型商业组织，内部团队分工和配合都非常明确。&lt;/p>
&lt;p>一个繁荣的开发者生态系统需要一个由工程师组成的值得信赖的开发者关系团队，他们是第三方开发者和构建底层平台的工程和产品团队之间的接口。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-10-05-1__JYUgsgR0IYcbuLAAaqIHw.png"
loading="lazy"
alt="开发者关系的持续的接口循环"
>&lt;/p>
&lt;p>“开发者关系的持续的接口循环”&lt;/p>
&lt;p>图片翻译（从左到右，从上到下的顺序）：&lt;/p>
&lt;ul>
&lt;li>平台产品和工程&lt;/li>
&lt;li>平台、API和SDK的更新&lt;/li>
&lt;li>开发者的反馈&lt;/li>
&lt;li>开发者关系&lt;/li>
&lt;li>认知和激励&lt;/li>
&lt;li>开发者资源&lt;/li>
&lt;li>开发者反馈&lt;/li>
&lt;li>开发者观点&lt;/li>
&lt;li>第三方开发者&lt;/li>
&lt;/ul>
&lt;p>开发者关系是真相的官方来源，既适用于寻找文档、最佳实践和培训的第三方开发者，也适用于需要了解第三方开发者的想法和体验的内部工程团队，并获得有关其开发者产品的坦率技术反馈。&lt;/p>
&lt;p>在Reto Meier看来，以下是建立一个能够产生真正积极影响的开发者关系团队所需的最重要的价值和能力。&lt;/p>
&lt;ul>
&lt;li>他们需要是合格的工程师 ： 工程师们并不信任伪开发者，所以开发者关系团队需要由合格的开发者组成。即使如此，他们也不会轻易相信任何工程师&amp;ndash;我们DevRel需要证明自己。&lt;/li>
&lt;li>他们需要成为优秀的沟通者 ： 你的开发者关系团队需要创造出能解决问题的材料，同时也要有启发性、趣味性和娱乐性。&lt;/li>
&lt;li>他们需要有多样性 ： 开发者关系的目标是与尽可能多的开发者受众合作，创建一个充满合格工程师的多元化开发者关系团队，使其包容更多的受众。&lt;/li>
&lt;li>他们不可能销售任何东西 ： 开发者关系部不能成为销售活动的拉拉队，或是伪装的销售人员。他们应该让马认识到水的存在，展示水对它的帮助，引导它去喝水，并让水尽可能地容易喝。&lt;/li>
&lt;li>他们需要感受开发者的痛苦 ： 如果一个好的开发者关系团队不相信他们能够诚实地推广和宣传一个产品，他们就不会成为它的代言人。&lt;/li>
&lt;li>他们需要去倾听和响应。&lt;/li>
&lt;li>他们需要成为多产的人 ： 开发者关系是你对你的开发者受众说话的声音&amp;ndash;重要的是，他们经常发声，而且声音很大。&lt;/li>
&lt;li>他们需要规模化地工作 ： 想想开发者关系团队需要面向全球开发者。&lt;/li>
&lt;/ul>
&lt;p>一个有效的开发者关系团队是由一群具有超强沟通能力的合格的工程师所组成的，他们并不会推销任何东西，而会与他们的受众心心相印&amp;ndash;他们不断倾听和回应。他们必须以一种能够规模化到全球千万级万开发者受众的方式来做这一切。&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>What is Developer Relations? - from Why Do We Pay These People Anyway*? &lt;a class="link" href="https://medium.com/google-developers/why-do-we-pay-these-people-anyway-d7ed706d6d55#.438f1qn4x" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>Devangelism at Twilio - from Twilio Heroes &lt;a class="link" href="https://www.leggetter.co.uk/2016/02/03/defining-developer-relations.html" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>Developer Advocate versus Technical Evangelist; When names change the tone &lt;a class="link" href="https://almaer.com/blog/developer-advocate-versus-technical-evangelist-when-names-change-the-tone" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>Developer Relations: A Five-Level Maturity Model &lt;a class="link" href="https://softwareas.com/developer-relations-a-five-level-maturity-model/" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>What is developer relations? &lt;a class="link" href="https://developerrelations.com/what-is-developer-relations" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6">
&lt;p>What is developer marketing? &lt;a class="link" href="https://developerrelations.com/what-is-b2d-or-developer-marketing" target="_blank" rel="noopener"
>blog&lt;/a>&amp;#160;&lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>DevOps社区峰会2021大连后记</title><link>https://martinliu.cn/blog/devops%E7%A4%BE%E5%8C%BA%E5%B3%B0%E4%BC%9A2021%E5%A4%A7%E8%BF%9E%E5%90%8E%E8%AE%B0/</link><pubDate>Sun, 12 Sep 2021 16:16:29 +0800</pubDate><guid>https://martinliu.cn/blog/devops%E7%A4%BE%E5%8C%BA%E5%B3%B0%E4%BC%9A2021%E5%A4%A7%E8%BF%9E%E5%90%8E%E8%AE%B0/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-IMG_7942.JPG" alt="Featured image of post DevOps社区峰会2021大连后记" />&lt;p>这是一次激动人心的记忆。没有 DevOps 社区志愿者的共同努力，我们肯定无法将峰会办的如此成功。&lt;/p>
&lt;p>我在拖了很长时间之后，我还是一定要总结一下有关这次盛会的点滴记忆和感受。我曾经多次去大连出差，于我而言大连不算是一个陌生的城市。可以由于海滨城市对人吸引力，人们对大连一如既往的美誉，本次峰会让我尤为期待。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-113246.jpg"
loading="lazy"
alt="bangchuidao.jpg"
>&lt;/p>
&lt;p>对于美好的事情而言，它们都必然要符合天时地利人和。可是在新冠疫情的影响下，大连这座港口城市的地利，也几乎改写成了劣势。大连峰会本来是计划在 2020年就要举办的，但是去年大连在几乎每次的疫情爆发时，都参与了陪跑的角色；因此小伙伴们准备了一半的大连峰会，不得不往后顺延到了 2021 年。大连峰会在 2020 年无奈跳票，也导致我们不得不将其改到了北京，幸亏 DevOps 社区北京的小伙伴们也是不负众望，20年的北京峰会也在望京庆丰包子疫情事件期间如期举办。今年又在幸运之神的眷顾下，让我们终于得以圆梦大连。&lt;/p>
&lt;p>于 2021 年 9 ⽉ 4 ⽇，中国 DevOps 社区峰会⼤连站，在位于市中心的⽇航酒店隆重举⾏。本次峰会报名⼈数约 500 ⼈，峰会当天近 450 ⼈签到，这也创下 DevOps 社区有史以来，签到⼈数最多的纪录【2020 年 12 月北京，2020 年 9 月成都，2019 年 10 月杭州】。我们有幸邀请到了⼤连软件⾏业协会秘书⻓秦健致开幕辞，邀请到了来自全国各地的讲师和志愿者来到这个浪漫的海滨城市，大家在DevOps社区里欢聚一堂，火热的分享和交流 了一天的DevOps ⽂化、理念、技术和实践。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-110555.jpg"
loading="lazy"
alt="keynotes"
>&lt;/p>
&lt;p>每年“DevOps社区峰会的举办权”是 DevOps 社区各个城市的组织者们，通过公开竞投标的流程而产生的。因此，DevOps 社区下一年两次峰会的举办城市和时间具有不确定性。在当年第二次峰会的复盘回顾会议中，我们设置了一个峰会申办和竞标环节。任何有意申办的社区组织者都可以为其所在城市投标和拉票，所有参会的社区志愿者们会公开用投票的方式选举出得票数前两名的申办城市，这两个投标成功的城市会从此开始下次峰会的筹备工作。&lt;/p>
&lt;p>峰会举办城市的组织者会成立峰会筹备小组，本次⼤连峰会的筹备⼩组中有来⾃全国的 56 名志愿者，其中⼤连本地的志愿者占了绝⼤多数。在整个峰会举办的过程中大家用定期周会的方式组织和安排各种峰会的工作事项。大连的 DevOps 社区呈现出了极佳的多样性，志愿者们的背景、职位、公司类型、年龄和性别都非常多元化。在当天大会现场，据目测观测，女性参会者的人数和比例也略高于其他城市的同类会议。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-110725.jpg"
loading="lazy"
alt="IMG_7964"
>&lt;/p>
&lt;p>下⾯是我对⼤连社区环境的概要分析：&lt;/p>
&lt;ul>
&lt;li>据不完全统计，⼤连的软件从业⼈员是 20 万⼈。【2021 年常住人口 745 万】&lt;/li>
&lt;li>软件公司的业态主要为外包业务，给国内外企业提供项目开发、技术⽀持、运营和呼叫中⼼等服务，还有⼀些企业提供国内外电商平台的技术⽀撑服务，线上教育服务等等。通过云计算交付业务系统，全生命周期软件开发业务正在逐渐递增，交付⽔平受整个⾏业的带动，正逐年提⾼。&lt;/li>
&lt;li>⼤连软件企业所服务的客户既包括国内的⾏业⻰头企业【通信和金融等】，还有更多的是⼤量的⽇本企业，并且与很多优质的⽇本企业具有稳定而长期的业务关系。受疫情影响，⽇本等外资客户对⼤连软件企业的依赖性有提⾼的趋势。&lt;/li>
&lt;li>⼤连本地有⽐较丰富的社区存在，敏捷社区、云原⽣社区、项目管理社区都在⼤连举办过线下和线上的技术交流活动。DevOps 社区已经在⼤连持续发展了三年，我们和其他社区直接也有⼀定的⼈员重叠和合作关系。&lt;/li>
&lt;li>⼤连本地的软件从业者，基本上没有加班的习惯，在下班后或者周末里加班并不是常⻅的现象。⼯作之余他们会从事⾮常丰富的户外活动，跑步、滑雪和帆船等活动非常普遍。&lt;/li>
&lt;/ul>
&lt;p>历届 DevOps 社区峰会都是一个完整和复杂的项目。当社区组织者在全国社区核心运营团队的配合下，成功的完成了各项大会工作。包括峰会前的宣传⽂案、讲师招募、盲⻦票推广、讲师⽇程推广、赞助商⽂案、赞助商讲师海报推广等。这些工作过程和海报都会在 DevOps 社区全国的所有微信群发布，在其他合作社区的微信群⾥做了联合推荐。这些文案和过程都可以在社区的微信公众号（DevOpsMeetup）上查看到。本次大连峰会的总计注册人数是 492 人，由于大连峰会的举办日期距离这个城市上一次的疫情封闭时间并不遥远，因此这个注册人数确实来之不易，堪称相当完美；我们甚至做了转线上峰会的方案。而且实现了 80+%的签到率，更表现出了在一个解封不久之后的城市里，大家报复性的出门参与社区活动的现实。峰会后的宣传包括峰会总结⽂案（内含演讲者的 ppt 下载）。社区为每个演讲者都做了现场演讲稿的速记，随 PPT 图⽚⼀起发布⼀篇推广⽂案。还为演讲者制作了演讲 PPT 录屏视频（带同步⾳频），会后社区将所有视频都发布到了 &lt;a class="link" href="https://space.bilibili.com/370989874" target="_blank" rel="noopener"
>DevOp 社区的 B 站&lt;/a>【https://space.bilibili.com/370989874】和 &lt;a class="link" href="https://www.youtube.com/channel/UC_gVuu1g05VREvNp2pwJbvw" target="_blank" rel="noopener"
>YouTube 频道&lt;/a>【https://www.youtube.com/channel/UC_gVuu1g05VREvNp2pwJbvw】。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-112907.jpg"
loading="lazy"
alt="2021-11-25_18-52-04"
>&lt;/p>
&lt;p>大连峰会⼀整天的活动内容包括上午半天的集中式主会场学习，下午设置了三个分会场和⼀个⼯作坊。分享演讲总数：21 个。&lt;/p>
&lt;p>为了给本次峰会的与会者提供更多层⾯的交流机会，我们在会前组织了夜跑活动。这又是一项DevOps社区的文化传统，首次峰会也跑是三年前的环杭州西湖夜跑，当时我们喊出了“随风奔跑，DevOps是方向”的口号，这句口号被沿用至今。这次大连峰会的夜跑活动的⼈数是有史以来最多的⼀次。在⼤会的前⼀天晚上参与者们分组完成了在星海湾⼤桥的夜跑活动，参与者最后合影留念，并领取了社区定制款夜跑服装。我完美的完成了首次星海湾大桥往返十公里的首刷，和其他社区的小伙伴们一起在桥上海上欣赏到了完美的大连市夜景。在跑步活动结束以后，又去参加了老同事安排的烧烤酒局，这真的是要感恩大连当地志愿者的完美会前准备工作，峰会前的当晚，社区居然没有任何人需要奋战在会场加班，我也首次实现了峰会前撸串的自由。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-113715.jpg"
loading="lazy"
alt="running"
>&lt;/p>
&lt;p>峰会当天的我，应该说是非常兴奋的，虽然我们没有能通过大连在9月开海季节的天时地利拉取到大量到外地参会者，但当天早晨的签到数量也让我们非常激动。也有参展商遇到了所有资料和礼品在上午就很快的全部发放完毕的情况。会场之外我们也能感受到热闹非凡的交流氛围。我的主题分享在下午，晚上我们为所有志愿者和讲师准备了晚宴；席间我们还请到了一桌CxO贵客，大家畅聊DevOps实践相见恨晚。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-112048.jpg"
loading="lazy"
alt="seafood"
>&lt;/p>
&lt;p>在峰会的第⼆天，DevOps 社区组织了志愿者的内部回顾会议和团建活动，在为期⼀天的社区交流活动中，参与者们详细的回顾了本次峰会的整个历程。大家组团游览了当地的部分经典名胜景点，包括：乘坐游艇出海东港投喂海鸥，游览棒槌岛景区和海滩，在渔老人码头的品海楼品尝大连当地特色的海鲜大餐，去老虎滩极地海洋公园畅游，最后大家回到市中心的星海广场观赏海景和星海大桥。在整天的社区团建活动中，我和所有人没完没了的聊天，内容大多还是围绕着大连本地的软件行业发展和现状。通过本次全国志愿者的团结活动，DevOps 社区的文化和凝聚⼒得到了巨大的提升，这进一步确信了全国社区一盘棋的发展方针。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-112517.jpg"
loading="lazy"
alt="team-building"
>&lt;/p>
&lt;p>会后，我们还向所有与会者推送了峰会满意度调查问卷，收到近签到人数20%的有效分析数据。从调查数据中看到：非常满意（67.82%）和满意（26.44%）。对本次活动的净推荐值 NPS 高达 9.01 分，推荐率为 64.37%，这个数据同比预全行业而言，是一个非常不错的成绩。反馈者们也给我们本次峰会提供了很多有价值的改进建议，非常感谢所有参会者对社区活动的参与。本次峰会到场⼈数（450）在此刷新了记录，随着社区影响⼒的扩⼤，参与者满意度调查的⼈数和满意程度均呈现上涨趋势。与会者中，公司项目经理、团队负责⼈、管理者和⾼管的报名⽐例⾼于以往历届峰会。参会者在自于各个本地知名的⼤型软件服务商东软、埃森哲、IBM、日立、IBM、中软等咨询公司，其他⼤型外企和软企业占⽐较多。&lt;/p>
&lt;p>和其它同类峰会不同的是，我们在峰会满意度调查问卷中加入了 Top10 Speaker 的评选环节，选出了本次峰会的民选十佳讲师：&lt;/p>
&lt;ol>
&lt;li>科创时代下的创新与敏捷 | 王立杰–IDCF&lt;/li>
&lt;li>中国DevOps社区 快乐中砥砺前行 | 姚冬 – 华为&lt;/li>
&lt;li>数字化转型成就业务价值 | 黄隽（黄岛主）- 腾讯&lt;/li>
&lt;li>云原生DevOps与Continuous Everything的实践 | 王宇博-亚马逊科技&lt;/li>
&lt;li>用OpenTelemetry通明数字化系统的可观测性 | 刘征– Elastic&lt;/li>
&lt;li>基于DevOps的开源治理 | 庄表伟 – 华为&lt;/li>
&lt;li>AI智能分析和数字化质量管控应用实践 | 高蕊 – 中信银行&lt;/li>
&lt;li>数字化转型趋势下NGINX KIC的高级应用技巧 | 罗剑锋 – F5/Nginx&lt;/li>
&lt;li>容器应用交付控制持续集成持续部署最佳实践 | 宋志麒– F5/Nginx&lt;/li>
&lt;li>从DevOps发展角度看应用架构的演进 | 张卫滨 – 大连金兰软件&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-111002.jpg"
loading="lazy"
alt="2021-11-25_18-48-55"
>&lt;/p>
&lt;p>以上就是我本次大连峰会完美体验的一些记录。我非常期待深圳峰会的举办，非常期待明年峰会城市的竞标结果。&lt;/p>
&lt;p>中国 DevOps 社区是⼀个公益、中⽴、开放的专业 DevOps 社区。我们会在社区的建设过程中，努⼒创新，着⼒打造⼀个充满温度的，对所有参与者友好的学习环境，同时实现多赢的局⾯，为全国软件开发行业的相关从业人员作出应有的贡献。社区的发展离不开所有赞助商和合作社区的支持，衷心感谢大连峰会的所有赞助商和合作方。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-11-25-111100.jpg"
loading="lazy"
alt="2021-11-25_18-50-43"
>&lt;/p>
&lt;p>基于本次峰会的整体感受，我也确实体会到了大连 DevOps 社区核心组织者黄隽（黄岛主）曾经在举办城市竞标拉票宣言中的那句话“大连是一个浪漫的海滨城市”；本文写在峰会结束了两个月以后，所有难忘瞬间还都历历在目。对我个人而言本次峰会意味着：会前与小伙伴们一起夜跑打卡星海大桥并观赏完美大连夜景；和老同事新朋友们品尝大连小海鲜和烧烤，喝到不醉不归；在峰会现场的主题分享，和会场的与会者们做各个层面的交流；在会后社区峰会团结活动中团体的享受和放松；这样的精彩还有很多很多，言之不尽。可是浪漫本身意味着：冒险、经历和激情；而这次黄岛主带领着大连本地的社区志愿者们，通过一次惊艳的社区峰会为我们完美的诠释了“何谓社区的浪漫❤️”，我们需要再次感谢所有大连本地的社区志愿者们，所有参会者和志愿者们都感受到了浓浓的社区情怀。这不禁给让社区种下了解锁中国所有其它著名网红城市的小愿望。&lt;/p></description></item><item><title>2021 年 Stackoverflow 开发者状态调查报告-中文版</title><link>https://martinliu.cn/blog/2021-%E5%B9%B4-stackoverflow-%E5%BC%80%E5%8F%91%E8%80%85%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A-%E4%B8%AD%E6%96%87%E7%89%88/</link><pubDate>Fri, 13 Aug 2021 18:29:57 +0800</pubDate><guid>https://martinliu.cn/blog/2021-%E5%B9%B4-stackoverflow-%E5%BC%80%E5%8F%91%E8%80%85%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A-%E4%B8%AD%E6%96%87%E7%89%88/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134055.jpg" alt="Featured image of post 2021 年 Stackoverflow 开发者状态调查报告-中文版" />&lt;p>从开发者画像、技术流行趋势、工作就业和薪酬状态和社区等方面完整的描述了当今开发者的众生相。虽然调查人数有限，只有中国开发者人数的十分之一，但是也基本上反应了欧美发达国家的开发者现状。&lt;/p>
&lt;h2 id="概述">概述&lt;/h2>
&lt;p>我们在年度调查中提出的问题将帮助我们改善Stack Overflow社区和为他们服务的平台。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134055.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.29.09 PM"
>&lt;/p>
&lt;p>例如，今年，我们观察到开发人员教育自己的方式发生了重大演变。对于年龄在18岁以下的不断增长的编码者来说，像视频和博客这样的在线资源比书本和学校加起来还要受欢迎，这一统计数字在我们其他年龄组中并不成立。总的来说，这个行业充满了新加入者，超过50%的人表示他们从事编码工作不到十年，超过35%的人从事这个行业不到五年。&lt;/p>
&lt;h3 id="快速预览">快速预览&lt;/h3>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134349.jpg"
loading="lazy"
alt="WechatIMG1606"
>&lt;/p>
&lt;p>1） 毫不奇怪，几乎60%的受访者是从网上资源学习如何编码的。年轻的受访者倾向于从在线课程、论坛和其他在线资源中学习。另一方面，年长的受访者则从学校和书本等更传统的媒介中学习。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134246.jpg"
loading="lazy"
alt="WechatIMG1607"
>&lt;/p>
&lt;p>2）AWS保持其作为最广泛使用的云平台的领先地位，但谷歌云和微软Azure比去年有了很大的进步。值得注意的是，今年是我们将云平台从一般平台问题中分离出来的第一年。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134316.jpg"
loading="lazy"
alt="WechatIMG1608"
>&lt;/p>
&lt;p>3）今年，React.js超过了jQuery，成为最常使用的Web框架。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134315.jpg"
loading="lazy"
alt="WechatIMG1609"
>&lt;/p>
&lt;p>4）新来的Svelte占据了最受喜爱的框架的首位。React是最受欢迎的，有四分之一的开发者想要使用。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134314.jpg"
loading="lazy"
alt="WechatIMG1610"
>&lt;/p>
&lt;p>5）Perl从去年的最高薪语言变成了今年的第五高薪。Clojure开发者的工资中位数最高，比第二名的F#多出1.4万。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-134317.jpg"
loading="lazy"
alt="WechatIMG1611"
>&lt;/p>
&lt;p>6）81%的专业开发人员是全职雇员，比2020年的83%有所下降。表示自己是独立承包商、自由职业者或自营职业者的专业开发人员比例从2020年的9.5%增加到2021年的11.2%&amp;ndash;表明潜在的工作不安全或转向更灵活的工作安排。&lt;/p>
&lt;p>我们面临的挑战和机遇是继续扩大和提高我们帮助所有开发人员的能力，并使他们在我们的社区感到受欢迎。&lt;/p>
&lt;p>继续阅读，了解更多关于塑造当今软件技艺和实践的态度、工具和环境的重大洞见。&lt;/p>
&lt;h2 id="开发者画像">开发者画像&lt;/h2>
&lt;p>我们对全球开发者社区的认知。&lt;/p>
&lt;h3 id="主要地区">主要地区&lt;/h3>
&lt;p>Stack Overflow 是服务于国际的社区，我们的调查收到了来自地球上几乎所有国家的回复。&lt;/p>
&lt;h4 id="地域">地域&lt;/h4>
&lt;p>美国和印度继续提供最高数量的调查回应，其次是德国和UKI（英国和爱尔兰）。前十名的国家几乎占了所有答复者的60%。要查看前十名的国家，请参考方法论部分。当我们放大到美国（我们回应最多的国家）时，我们看到，拥有成熟的科技中心的州拥有最多的回应者。加州、纽约、华盛顿和德克萨斯。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135238.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.52.15 PM"
>&lt;/p>
&lt;h3 id="经验">经验&lt;/h3>
&lt;p>高级管理人员和经理往往有最多年的编码经验，而从事数据科学和机器学习的人往往有最少的编码经验，平均来说甚至比学术研究人员还少。&lt;/p>
&lt;h4 id="何时写下第一行代码">何时写下第一行代码？&lt;/h4>
&lt;p>编码者从年轻时就开始了：有超过50%的受访者在11至17岁之间编写了他们人生的第一行代码。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135333.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.55.47 PM"
>&lt;/p>
&lt;h4 id="如何学习编码">如何学习编码？&lt;/h4>
&lt;p>毫不奇怪，几乎60%的受访者都是通过网上的资源，来学习如何编码的。年轻的受访者倾向于从在线课程、论坛和其他在线资源中学习。另一方面，年长的受访者则从学校和书本等更传统的媒介中学习。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135357.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.56.00 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135515.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.56.26 PM"
>&lt;/p>
&lt;h4 id="编码年限">编码年限？&lt;/h4>
&lt;p>50%的受访者从事编码工作的时间在十年以内。来自英国的受访者，平均而言，在我们前十个国家中，拥有的编码经验年数最多。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135540.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.56.48 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135555.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.56.58 PM"
>&lt;/p>
&lt;h4 id="专业编码年限">专业编码年限？&lt;/h4>
&lt;p>大多数受访者以专业开发人员的身份工作的年限为十年或更短，这意味着他们从未在没有Stack Overflow的世界里工作过【译者注：这句话说的 有点感觉StackOverflow的人自我感觉非常好：），难道说非专业人士们离开了 stack overflow 就不会搬砖了么，哈哈：） 】。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135629.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.57.11 PM"
>&lt;/p>
&lt;h4 id="按不同开发者类型划分的专业编码经验年数">按不同开发者类型划分的专业编码经验年数？&lt;/h4>
&lt;p>担任更高级职务的开发人员拥有最多年的专业编码经验。同时，数据科学家和机器学习专家的经验最少，比学术研究人员的年限少。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135723.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.57.39 PM"
>&lt;/p>
&lt;h3 id="开发者角色">开发者角色&lt;/h3>
&lt;p>担任全栈开发人员角色的人是最普遍的。有趣的是，设计师的角色自去年以来有所下降，与系统管理员的位置互换。&lt;/p>
&lt;h4 id="开发者类型">开发者类型?&lt;/h4>
&lt;p>全栈、后端、前端和桌面开发人员仍然占所有受访者的大多数。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135815.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.58.24 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135829.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.58.38 PM"
>&lt;/p>
&lt;h3 id="教育程度">教育程度&lt;/h3>
&lt;p>开发人员是一个受过高等教育的群体，超过65%的人拥有学士学位或更高学历。但是，传统的大学教育并不代表一切，大约四分之一的受访者拥有低于学士学位的学历。&lt;/p>
&lt;h4 id="受教育程度">受教育程度?&lt;/h4>
&lt;p>70%的受访者和80%的专业开发人员完成了某种形式的高等教育，学士学位是最常见的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135853.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.59.05 PM"
>&lt;/p>
&lt;h3 id="人员统计">人员统计&lt;/h3>
&lt;p>大约有三分之一的受访者回答了我们关于心理健康的问题。这是在2020年提供反馈的比例的两倍，这可能反映了人们对心理健康的重要性和正在进行的大流行病的影响的认识在不断提高。&lt;/p>
&lt;h4 id="年龄">年龄？&lt;/h4>
&lt;p>48%的专业开发者是25-34岁。65岁或以上的受访者中，几乎有一半不认为自己是专业开发者。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135939.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.59.43 PM"
>&lt;/p>
&lt;h4 id="性别">性别？&lt;/h4>
&lt;p>91%的受访者和92%的专业开发人员认为自己是男性。美国的性别少数群体（女性、非二进制、变性人或性别不符者）的比例最高。我们有相当多的工作要做，以确保我们的平台具有包容性，并确保我们的调查能代表各地的开发者。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-135954.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 8.59.58 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140007.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.00.22 PM"
>&lt;/p>
&lt;h4 id="变性人">变性人？&lt;/h4>
&lt;p>只有1%的受访者认为自己是变性人，其中一半是专业开发人员。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140028.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.00.38 PM"
>&lt;/p>
&lt;h4 id="性取向">性取向？&lt;/h4>
&lt;p>11.5%的受访者认为自己是直男/异性恋以外的人，6.5%的人倾向于不认同任何取向。要确保开发商社区更具包容性，仍有许多工作要做。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140044.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.00.51 PM"
>&lt;/p>
&lt;h4 id="种族和族裔">种族和族裔？&lt;/h4>
&lt;p>我们继续看到有证据表明，有色人种在专业开发人员中的代表性不足。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140055.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.01.28 PM"
>&lt;/p>
&lt;h4 id="残疾状况">残疾状况？&lt;/h4>
&lt;p>2,960名受访者有身体上的差异，这些受访者大多数是盲人或有视力障碍。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140114.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.01.45 PM"
>&lt;/p>
&lt;h4 id="心理健康">心理健康？&lt;/h4>
&lt;p>超过16,000名受访者回答了我们关于心理健康的问题，其中近10%的受访者表示他们有焦虑症。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140123.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.02.11 PM"
>&lt;/p>
&lt;h2 id="技术">技术&lt;/h2>
&lt;p>每年，我们都会探索开发人员目前正在使用的工具和技术。而且，像往常一样，我们问他们什么技术是最喜欢的、最害怕的和最想要的，包括几个类别。&lt;/p>
&lt;p>今年，我们还引入了一个新的部分，即 &amp;ldquo;使用过的与想要使用的&amp;rdquo;，它向我们准确地展示了开发者在过去一年中使用了什么，以及他们希望在下一年中使用什么。如果你需要复习一下我们是如何构建 &amp;ldquo;喜爱&amp;rdquo;、&amp;ldquo;害怕 &amp;ldquo;和 &amp;ldquo;想要 &amp;ldquo;的，或者你想读一下 &amp;ldquo;用过 &amp;ldquo;与 &amp;ldquo;想要用 &amp;ldquo;背后的直觉，请查看我们&lt;a class="link" href="https://meta.stackoverflow.com/questions/410519/what-is-worked-with-vs-want-to-work-with-in-the-developer-survey-results" target="_blank" rel="noopener"
>这篇元文章&lt;/a>。&lt;/p>
&lt;h3 id="最流行的技术">最流行的技术&lt;/h3>
&lt;p>Python超过了SQL，成为我们第三大最受欢迎的技术，而Node.JS则升至第六大最受欢迎的技术。&lt;/p>
&lt;h4 id="编程脚本和标记语言">编程、脚本和标记语言？&lt;/h4>
&lt;p>JavaScript连续九年完成了作为最常用的编程语言的任务。对于大多数开发者来说，编程就是网络编程。Python与SQL交换了位置，成为第三种最受欢迎的语言。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140323.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.04.15 PM"
>&lt;/p>
&lt;h4 id="数据库">数据库&lt;/h4>
&lt;p>所有受访者和专业开发者之间最常用的数据库是一致的。我们观察到的唯一区别是，专业开发者使用Microsoft SQL Server的可能性略高于MongoDB。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些数据库环境中做了大量的开发工作，你想在下一年中在哪些环境中工作？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->(如果你既在数据库中工作，又想继续这样做，请在该行的两个框中都打勾)。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140356.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.04.34 PM"
>&lt;/p>
&lt;h4 id="云平台">云平台&lt;/h4>
&lt;p>AWS保持其作为最广泛使用的云平台的领先地位，但谷歌云和微软Azure比去年有了很大的进步。值得注意的是，今年是我们将云平台从一般平台问题中分离出来的第一年。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年里，你在哪些云平台上做了大量的开发工作，以及在未来一年里你想在哪些云平台上工作？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>(如果你既在该平台上工作过，又想继续这样做，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140415.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.04.48 PM"
>&lt;/p>
&lt;h4 id="web-框架">Web 框架&lt;/h4>
&lt;p>今年，React.js超过了jQuery，成为最常用的网络框架。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些网络框架和库中做了大量的开发工作，以及你想在下一年中从事哪些工作？&lt;!-- raw HTML omitted -->
(如果你既使用过该框架，又想继续使用，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140446.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.05.01 PM"
>&lt;/p>
&lt;h4 id="其他框架和库">其他框架和库&lt;/h4>
&lt;p>在其他技术中，.NET框架得到了最多的喜爱，尽管有几个用于Python的数据科学库表现强劲。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些其他框架和库中做了大量的开发工作，以及你想在下一年中从事哪些工作？&lt;!-- raw HTML omitted -->
(如果你既在框架中工作过，又想继续这样做，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140511.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.05.19 PM"
>&lt;/p>
&lt;h4 id="其他工具">其他工具&lt;/h4>
&lt;p>超过90%的受访者使用Git，这表明它是作为一个开发者的基本工具。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些工具中做了大量的开发工作，以及在未来一年中你想在哪些工具中工作？&lt;!-- raw HTML omitted -->
(如果你既使用了该技术，又想继续使用，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140528.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.05.44 PM"
>&lt;/p>
&lt;h4 id="集成开发环境">集成开发环境&lt;/h4>
&lt;p>作为所有开发者的首选IDE，Visual Studio Code具有显著的领先优势。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你经常使用哪些开发环境，以及你希望在未来一年中使用哪些开发环境？&lt;!-- raw HTML omitted -->
请勾选所有适用的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140540.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.06.02 PM"
>&lt;/p>
&lt;h4 id="操作系统">操作系统&lt;/h4>
&lt;p>Windows仍然是最受欢迎的操作系统，尽管在专业开发者中略显逊色。今年也是我们第一次将WSL作为一个选项。&lt;/p>
&lt;p>你工作的主要操作系统是什么？&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140553.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.06.15 PM"
>&lt;/p>
&lt;h3 id="最爱最敬畏最想用的">最爱、最敬畏、最想用的&lt;/h3>
&lt;p>Rust是最受喜爱的语言。Python和Typescript是开发者最想使用的语言，如果他们还没有这样做的话。&lt;/p>
&lt;h4 id="编程脚本和标记语言-1">编程、脚本和标记语言&lt;/h4>
&lt;p>在第六年中，Rust是最受喜爱的语言，而Python则是其第五年（去年的报告显示）最想要的语言。&lt;/p>
&lt;p>在过去一年中，你用哪些编程、脚本和标记语言做了大量的开发工作，以及你想在未来一年中用哪些语言工作？&lt;/p>
&lt;p>(如果你既用该语言工作，又想继续这样做，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140732.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.07.15 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140804.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.07.43 PM"
>&lt;/p>
&lt;h4 id="数据库-1">数据库&lt;/h4>
&lt;p>Redis成为最受喜爱的数据库已经是第五年了。PostgreSQL以不到1%的比例勉强超过MongoDB成为最受欢迎的数据库。而IBM DB2则连续第二年成为最令人畏惧的数据库。&lt;/p>
&lt;p>在过去的一年中，你在哪些数据库环境中做了大量的开发工作，以及在未来一年中你想在哪些数据库中工作？
(如果你既在数据库中工作过，又想继续这样做，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140821.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.08.09 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140834.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.08.19 PM"
>&lt;/p>
&lt;h4 id="云平台-1">云平台&lt;/h4>
&lt;p>AWS不仅是最受欢迎的云平台，也是最受欢迎的云平台，处于领先地位。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些云平台上做了大量的开发工作，以及你想在未来一年中在哪些云平台上工作？&lt;!-- raw HTML omitted -->
(如果你既在该平台工作过，又想继续工作，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140847.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.08.43 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140903.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.08.53 PM"
>&lt;/p>
&lt;h4 id="web框架">Web框架&lt;/h4>
&lt;p>新来的Svelte占据了最受喜爱的框架的首位。React是最受欢迎的，有四分之一的开发者想要。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年里，你在哪些网络框架和库中做了大量的开发工作，以及你想在未来的一年里从事哪些工作？&lt;!-- raw HTML omitted -->
(如果你既使用了该框架，又想继续使用，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-140950.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.13.37 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141002.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.13.52 PM"
>&lt;/p>
&lt;h4 id="其他框架和库-1">其他框架和库&lt;/h4>
&lt;p>虽然Tensorflow是最受欢迎的库，但Pytorch是一个更受欢迎的库。Stack Overflow作为.NET Core的用户，我们很高兴看到它排在首位。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年里，你还在哪些框架和库中做了大量的开发工作，以及你想在未来一年里在哪些框架和库中工作？&lt;!-- raw HTML omitted -->
(如果你既使用了该框架，又想继续使用，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141223.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.14.06 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141410.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 10.14.00 PM"
>&lt;/p>
&lt;h4 id="其他工具-1">其他工具&lt;/h4>
&lt;p>早些时候，我们看到有93%的受访者使用Git。现在我们看到，其中85%的受访者希望继续使用Git工作。Git、Docker和Kubernetes都是最受喜爱和最想要的工具。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年里，你在哪些工具中做了大量的开发工作，在未来一年里你想在哪些工具中工作？&lt;!-- raw HTML omitted -->
(如果你既从事过该技术，又想继续从事该技术，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141234.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.15.16 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141326.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.15.31 PM"
>&lt;/p>
&lt;h4 id="协作工具">协作工具&lt;/h4>
&lt;p>虽然Neovim是最受喜爱的编辑器，但它是第10个最受欢迎的编辑器。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你经常使用哪些开发环境，你希望在未来一年中使用哪些环境？&lt;!-- raw HTML omitted -->
请勾选所有适用的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141458.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.15.44 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141508.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.15.55 PM"
>&lt;/p>
&lt;h3 id="用过-vs-想用">用过 vs. 想用&lt;/h3>
&lt;h4 id="编程脚本和标记语言-2">编程、脚本和标记语言&lt;/h4>
&lt;p>这里有很多东西需要解读，但以下是我们发现的一些最值得注意的趋势。有超过1万名Javascript开发者希望开始或继续使用Go或Rust开发。大多数想要使用Dart的开发者目前都在使用JavaScript。我们还看到，想用PHP工作的开发人员只有SQL开发人员。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去一年中，你用哪些编程、脚本和标记语言做了大量的开发工作，以及你想在未来一年中用哪些语言工作？&lt;!-- raw HTML omitted -->
(如果你既用该语言工作，又想继续这样做，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141540.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.16.31 PM"
>&lt;/p>
&lt;h4 id="数据库-2">数据库&lt;/h4>
&lt;p>12,590名MySQL开发人员希望与PostgreSQL一起工作，而6,429名PostgreSQL开发人员希望与MySQL一起工作。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些数据库环境中做了大量的开发工作，以及你在未来一年中想在哪些数据库环境中工作？&lt;!-- raw HTML omitted -->
(如果你既在数据库中工作，又想继续这样做，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141558.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.16.44 PM"
>&lt;/p>
&lt;h4 id="云平台-2">云平台&lt;/h4>
&lt;p>虽然AWS是最受喜爱的平台，但我们看到明年有大量的AWS开发者希望在谷歌云中开发。8,586名AWS开发者希望与谷歌云合作，而只有7,668名谷歌云开发者希望在AWS工作。目前使用Heroku或Digital Ocean的开发者更愿意开始使用或继续使用AWS，然后是谷歌云，最后是Azure。目前使用Azure的开发者中，很少有人想转到Heroku。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年里，你在哪些云平台上做了大量的开发工作，你想在未来一年里在哪些云平台上工作？&lt;!-- raw HTML omitted -->
(如果你既在该平台上工作过，又想继续工作，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141620.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.16.58 PM"
>&lt;/p>
&lt;h4 id="web框架-1">Web框架&lt;/h4>
&lt;p>Django、Flask和Spring的开发者都满足于继续在各自的框架中工作。很少有开发者愿意在ASP.NET中工作。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些网络框架和库中做了大量的开发工作，在未来的一年中你想在哪些框架中工作？&lt;!-- raw HTML omitted -->
(如果你既在框架中工作过，又想继续这样做，请在该行的两个框中都打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143313.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 10.33.01 PM"
>&lt;/p>
&lt;h4 id="其他框架和库-2">其他框架和库&lt;/h4>
&lt;p>想在Hadoop工作的开发者目前正在使用Pandas或Numpy。有和3328名Tensorflow开发者希望继续使用PyTorch，但只有2328名Pytorch开发者希望转到Tensorflow。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你还在哪些框架和库中做了大量的开发工作，以及在未来一年中你想在哪些框架中工作？&lt;!-- raw HTML omitted -->
(如果你既在框架中工作，又想继续这样做，请在该行的两个框中打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141712.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.17.41 PM"
>&lt;/p>
&lt;h4 id="其他工具-2">其他工具&lt;/h4>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你在哪些工具上做了大量的开发工作，以及你想在下一年中从事哪些工作？&lt;!-- raw HTML omitted -->
(如果你既从事了技术工作，又想继续从事技术工作，请在该行的两个方框内打勾)。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141729.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.17.55 PM"
>&lt;/p>
&lt;h4 id="协作工具-1">协作工具&lt;/h4>
&lt;p>我们看到IPython/Jupyter用户希望在VS Code中工作。这可能是由于VS Code在他们的IDE中加入了Notebook API。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->在过去的一年中，你经常使用哪些开发环境，你希望在下一年中使用哪些环境？&lt;!-- raw HTML omitted -->
请勾选所有适用的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141749.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.18.14 PM"
>&lt;/p>
&lt;h3 id="学习与问题解决">学习与问题解决&lt;/h3>
&lt;p>在遇到困难时你会怎么做？受访者在遇到困难时最常使用谷歌或访问Stack Overflow。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->当你遇到问题时，你会怎么做？&lt;!-- raw HTML omitted -->
选择所有适用的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-141808.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.18.47 PM"
>&lt;/p>
&lt;h3 id="薪酬最高的技术">薪酬最高的技术&lt;/h3>
&lt;p>Perl从去年的高薪语言变为今年的第五高薪。Clojure开发者的工资中位数最高，比第二名的F#多出1.4万。&lt;/p>
&lt;p>你目前的总薪酬是多少（年工资、奖金和福利，在税收和扣除前）？
请在下面的方框中输入一个整数，不要有任何标点符号。如果你是按小时计酬的，请估计一下相当于周薪、月薪或年薪。如果您不愿意回答，请在方框内留空。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142042.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.20.02 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142039.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.20.24 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142046.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.20.44 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142043.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.20.58 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142044.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.21.09 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142041.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.21.24 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142058.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.21.36 PM"
>&lt;/p>
&lt;h2 id="工作">工作&lt;/h2>
&lt;h3 id="工作现状">工作现状&lt;/h3>
&lt;p>我们看到更多的受访者从事兼职或在学校工作，而表示全职工作的受访者则减少。这可能反映了非典疫情的影响，所有行业的工人都在后退，并重新评估他们与全职和在职的关系。&lt;/p>
&lt;h4 id="就业状况">就业状况&lt;/h4>
&lt;p>81%的专业开发人员是全职雇员，比2020年的83%有所下降。表示自己是独立承包商、自由职业者或自营职业者的专业开发人员比例从2020年的9.5%增加到2021年的11.2%&amp;ndash;表明潜在的工作不安全或转向了更灵活的就业方式。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->以下哪项最能描述你目前的就业状况？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142134.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.22.05 PM"
>&lt;/p>
&lt;h4 id="按地域划分的就业状况">按地域划分的就业状况&lt;/h4>
&lt;p>与去年相比，来自印度的全职就业者的百分比下降了15个百分点。相比之下，学生的数量增加了9个百分点。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->以下哪项最能说明您目前的就业状况？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142206.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.22.27 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142203.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.22.38 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142204.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.22.51 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142205.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.23.04 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142208.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.23.14 PM"
>&lt;/p>
&lt;h3 id="公司情况">公司情况&lt;/h3>
&lt;h4 id="公司规模">公司规模&lt;/h4>
&lt;p>与去年相比，今年我们看到从事自由职业的受访者有所增加。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->你目前工作的公司或组织大约雇用了多少人？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142223.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.23.28 PM"
>&lt;/p>
&lt;h3 id="薪资">薪资&lt;/h3>
&lt;h4 id="按开发者类型划分的薪资">按开发者类型划分的薪资&lt;/h4>
&lt;p>从整体上看，工程经理、SRE、DevOps专家和数据工程师往往获得最高的薪水。当专注于美国时，我们看到在工资分布的底部有一些差异。在美国，与全球开发者人口相比，移动开发者和教育工作者的工资相对于其他职业来说往往更高。&lt;/p>
&lt;p>你目前的总报酬（年工资、奖金和福利，在税收和扣除前）是多少？
请在下面的方框中输入一个整数，不要有任何标点符号。如果你是按小时计酬的，请估计一个相等的周薪、月薪或年薪。如果您不愿意回答，请在方框内留空。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142256.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.23.41 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142257.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.23.53 PM"
>&lt;/p>
&lt;h4 id="按开发者类型划分的薪资和体验">按开发者类型划分的薪资和体验&lt;/h4>
&lt;p>尽管工程经理、SRE、DevOps专家的薪酬最高，但我们看到他们平均也有超过10年的专业经验。数据科学家或机器学习专家的薪酬排在第8位，但平均来说，他们的经验最少。设计师的工资最低，尽管他们平均有超过十年的经验。&lt;/p>
&lt;p>您目前的总薪酬（年工资、奖金和福利，在税前和扣除前）是多少？
请在下面的方框中输入一个整数，不要有任何标点符号。如果你是按小时计酬的，请估计一个相等的周薪、月薪或年薪。如果您不愿意回答，请在方框内留空。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142319.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.24.11 PM"
>&lt;/p>
&lt;h4 id="按语言划分的薪资和体验">按语言划分的薪资和体验&lt;/h4>
&lt;p>与具有相同经验的其他语言相比，PHP开发人员的工资低得不成比例。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->你目前的总报酬是多少（年工资、奖金和福利，在税前和扣减前）？&lt;!-- raw HTML omitted -->
请在下面的方框中输入一个整数，不要有任何标点符号。如果你是按小时计酬的，请估计一个相等的周薪、月薪或年薪。如果您不愿意回答，请在方框内留空。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142357.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.24.25 PM"
>&lt;/p>
&lt;h2 id="社区">社区&lt;/h2>
&lt;p>社区是我们所有工作的核心。&lt;/p>
&lt;h3 id="stack-overflow网站的使用">Stack Overflow网站的使用&lt;/h3>
&lt;h4 id="访问过stack-exchange网站">访问过Stack Exchange网站&lt;/h4>
&lt;p>不到1%的受访者从未访问过Stack Overflow或Stack Exchange网络。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->您曾访问过以下哪些Stack Overflow网站？&lt;!-- raw HTML omitted -->
选择所有适用的。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142555.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.24.51 PM"
>&lt;/p>
&lt;h4 id="访问stack-overflow">访问Stack Overflow&lt;/h4>
&lt;p>我们知道，开发人员经常访问Stack Overflow，今年早些时候，我们确认他们复制代码的次数也很多。从今年的调查中，我们还知道80%的受访者每周都会访问Stack Overflow，其中55%的人每天都访问。&lt;/p>
&lt;p>你认为你访问Stack Overflow的频率如何？&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142619.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.25.27 PM"
>&lt;/p>
&lt;h4 id="有多少参与者拥有stack-overflow账户">有多少参与者拥有Stack Overflow账户？&lt;/h4>
&lt;p>10位受访者中，有8位拥有Stack Overflow账户。
你有Stack Overflow账户吗？&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142940.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 10.29.33 PM"
>&lt;/p>
&lt;h4 id="开发者多长时间参与一次stack-overflow">开发者多长时间参与一次Stack Overflow？&lt;/h4>
&lt;p>在拥有Stack Overflow账户的人中，46%的人每月参与该网站的次数少于一次或每月。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->您认为您在Stack Overflow上参与问答的频率如何？&lt;!-- raw HTML omitted -->
我们所说的参与是指提出、回答、投票或评论问题。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-142837.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.26.17 PM"
>&lt;/p>
&lt;h4 id="开发者认为自己是stack-overflow社区的一员吗">开发者认为自己是Stack Overflow社区的一员吗？&lt;/h4>
&lt;p>只有44%的受访者认为自己 &amp;ldquo;有点 &amp;ldquo;或 &amp;ldquo;肯定 &amp;ldquo;是Stack Overflow社区的成员。在这些受访者中，我们看到性别少数群体认为自己是Stack Overflow社区成员的可能性较小。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->你认为自己是Stack Overflow社区的成员吗？&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143014.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.26.29 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143013.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.26.37 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143012.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.26.49 PM"
>&lt;/p>
&lt;h3 id="现在的stack-overflow社区">现在的Stack Overflow社区&lt;/h3>
&lt;h4 id="其他在线开发者社区的成员">其他在线开发者社区的成员&lt;/h4>
&lt;p>大多数受访者不属于任何其他在线开发社区。
你是其他在线开发者社区的成员吗？&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143040.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.27.01 PM"
>&lt;/p>
&lt;h4 id="其他公共或私有社区">其他公共或私有社区&lt;/h4>
&lt;p>近2.5万名受访者属于其他在线开发者社区。其中85%是对公众开放的，任何人都可以加入。这些其他社区大多属于Reddit、Github或Discord。&lt;/p>
&lt;p>请说出你所属的其他5个在线开发者社区，并说明它们是公开的（任何人都可以加入）还是私人的（需要邀请）。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143057.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.27.13 PM"
>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143056.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.27.23 PM"
>&lt;/p>
&lt;h2 id="方法论">方法论&lt;/h2>
&lt;h3 id="概况">概况&lt;/h3>
&lt;p>本报告是基于对全球181个国家的83,439名软件开发人员的调查。这是我们根据在完整的、已完成的调查中所花费的时间而认为 &amp;ldquo;合格 &amp;ldquo;的答复数量；另外提交了约172份答复，但没有包括在分析中，因为答复者在调查中花费的时间不到3分钟。&lt;/p>
&lt;p>该调查从2021年5月25日到2021年6月15日进行。&lt;/p>
&lt;p>合格答卷者在调查上花费的时间中位数为10.21分钟。&lt;/p>
&lt;p>应答者主要是通过Stack Overflow拥有的渠道招募的。受访者的主要来源是现场消息、博客帖子、电子邮件列表、横幅广告和社交媒体帖子。由于应答者是通过这种方式招募的，Stack Overflow上的高参与度用户更有可能注意到在征集活动期间进行调查的提示。&lt;/p>
&lt;p>作为一项激励措施，完成调查的受访者如果完成了调查，可以选择获得一个 &amp;ldquo;年度调查 &amp;ldquo;的徽章。&lt;/p>
&lt;p>由于美国的运输/出口制裁，在克里米亚、古巴、伊朗、朝鲜和叙利亚的潜在受访者很遗憾地无法获得我们的调查，因为我们的第三方调查软件封锁了流量。虽然一些受访者使用VPN来绕过封锁，但在解释调查结果时，应牢记这一限制。&lt;/p>
&lt;p>许多问题只根据受访者以前的回答来显示。例如，关于工作和工作的问题只显示给那些说他们在工作的人。&lt;/p>
&lt;p>我们询问了受访者的工资情况。首先，我们问每个受访者通常使用什么货币。然后我们问受访者他们的工资是什么货币，以及该工资是每周、每月还是每年。&lt;/p>
&lt;p>像调查中的大多数问题一样，工资问题是可选的。有46,844名受访者向我们提供了工资数据。&lt;/p>
&lt;p>我们使用2021年6月16日的汇率将用户货币的薪金转换为美元，并假设为12个工作月和50个工作周，转换为年薪。&lt;/p>
&lt;p>美国国内和国外最顶尖的大约2%的工资被修剪掉，用门槛值代替。美国国内和国外的门槛值是不同的。&lt;/p>
&lt;p>为了确定今年的调查应包括哪些技术，我们查看了Stack Overflow上最受欢迎和增长最快的标签（就发布的问题而言）。我们将这些技术与去年包括的技术进行了比较，并查看了有多少人选择了每个选项。我们把所有这些综合起来，策划了一个要包括的技术集合。&lt;/p>
&lt;p>这些问题被组织成几个问题块，它们的顺序是随机的。此外，大多数问题的答案也是随机排列的。&lt;/p>
&lt;h3 id="反馈意见">反馈意见&lt;/h3>
&lt;h4 id="你对今年的调查长度有什么看法">你对今年的调查长度有什么看法？&lt;/h4>
&lt;p>大多数受访者认为今年的调查长度是合适的。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143122.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.27.51 PM"
>&lt;/p>
&lt;h4 id="完成这项调查有多容易或多难">完成这项调查有多容易或多难？&lt;/h4>
&lt;p>不到百分之一的受访者认为今年的调查很困难。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143131.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.28.00 PM"
>&lt;/p>
&lt;h3 id="参与者">参与者&lt;/h3>
&lt;h4 id="谁参与了这次调查">谁参与了这次调查&lt;/h4>
&lt;p>与往年类似，绝大部分受访者的职业是开发人员。&lt;/p>
&lt;p>以下哪个选项最能描述今天的你？这里的 &amp;ldquo;开发者 &amp;ldquo;是指 &amp;ldquo;写代码的人&amp;rdquo;。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143147.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.28.14 PM"
>&lt;/p>
&lt;h4 id="你住在哪里">你住在哪里？&lt;/h4>
&lt;p>以下国家是我们收到答复的前10个国家。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-08-13-143157.jpg"
loading="lazy"
alt="Screen Shot 2021-08-13 at 9.28.26 PM"
>&lt;/p></description></item><item><title>《独角兽项目》读后感及中国 DevOps 社区之观察</title><link>https://martinliu.cn/blog/%E7%8B%AC%E8%A7%92%E5%85%BD%E9%A1%B9%E7%9B%AE%E8%AF%BB%E5%90%8E%E6%84%9F%E5%8F%8A%E4%B8%AD%E5%9B%BD-devops-%E7%A4%BE%E5%8C%BA%E4%B9%8B%E8%A7%82%E5%AF%9F/</link><pubDate>Wed, 23 Jun 2021 08:14:40 +0800</pubDate><guid>https://martinliu.cn/blog/%E7%8B%AC%E8%A7%92%E5%85%BD%E9%A1%B9%E7%9B%AE%E8%AF%BB%E5%90%8E%E6%84%9F%E5%8F%8A%E4%B8%AD%E5%9B%BD-devops-%E7%A4%BE%E5%8C%BA%E4%B9%8B%E8%A7%82%E5%AF%9F/</guid><description>&lt;img src="https://martinliu.cn/img/2021/06/guild-1573610501.jpg" alt="Featured image of post 《独角兽项目》读后感及中国 DevOps 社区之观察" />&lt;p>这本以“DevOps”为主题的小说的故事情节很接地气，引人入胜的剧情会让人很难放手，所以我在周末只用了两个长 sprint（迭代）就读完了。&lt;/p>
&lt;p>掩卷后迟迟没有写读后感的原因，主要是没想好在不剧透的情况下，如何向大家介绍这本书。下面先和大家聊聊在 DevOps 社区中耳闻目睹到的那些事。&lt;/p>
&lt;p>谈到 DevOps 这个话题，我们就不得不纵观当下中国 IT 行业的全景，一边是国家积极倡导的信息化创新和产业数字化转型；一边是国产基础实施类开源软件创业公司的风生水起。随着移动互联网和社交媒体的发展达到了顶峰， 5G 、IoT 、芯片和边缘计算等新技术也迎面而来。对于所有 IT 从业人员，特别是软件开发人员而言；我们可能正处在一个有史以来最利好的时代；同时整个 IT 行业正深陷于严重内卷的残酷现实，也在提醒着我们，这同时也是一个最坏的时代。&lt;/p>
&lt;p>《独角兽项目》的精彩故事情节，使我不禁要停下来，稍微总结一下我在最近 4 年多的时间里，见闻的这些鲜活案例和事实。以下所描述的内容，仅代表我的个人观点，还望各位看官指正和海涵。&lt;/p>
&lt;p>国内 DevOps 水平最高的团队应该在这些一线互联网企业的优秀产品团队；请大家注意我的描述，软件研发的工程工艺水平在这些大厂的不同产品团队间也可以是良莠不一的；研发效能卓越者已经达到了 DORA 2019 状态报告中精英级别的能力组合，即业务需求每日持续发布给用户，软件代码变更分钟级上线投产，上线成功率（失败率）几乎不影响客户体验，以及能分钟级别恢复业务事故等。而它们为什么能这样又快、又好、又安全！由于他们所满足的是中国亿级人口日常的网购、社交和娱乐体验，这些业务能创造巨大的社会和经济价值，每个风口浪尖上的产品也同时承受着巨大市场竞争压力和考验，业务危机使然；而危机感的缺乏的非明星产品团队必然也不需要那么高深的 DevOps 的技艺。这些一线大厂强大的技术品牌输出也事实上几乎统治了现在所有顶级技术大会；在最近刚刚结束的 QCon 北京峰会上，我竟然很难在讲师清单中找到非互联网行业公司的讲师。DeOps 做的好的企业必然是能做到无招胜有招。个别头部互联网企业正在向外输出他们自研的 DevOps 产品和服务平台。&lt;/p>
&lt;p>让我们将视线转移到国内传统行业的诸多“马”公司（相对于市值动辄上亿的独角兽企业），在金融服务、通讯和制造行业中，这几年 DevOps 也有了长足的发展。由于国家的各种信息安全、行业合规的要求颇高，我们以为他们或许应该是最不可能实施 DevOps 的企业。而在我最近参与的一次 DevOps 社区线下 Meetup 上，招行的案例分享确实令我折服。在我的其它大量的社区观察中，那些颇有造诣的企业不仅限于 DevOps 流水线和敏捷业务开发方面的卓越技艺；他们还在组织级别的规模化转型，内部精益教练推广，系统 SRE 建设，甚至混沌工程等方面都各有千秋；从这些角度看，他们的成长速度已经超越了，他们所刷的某些评奖定级。我对所有传统企业在 DevOps 社区的输出尤其赞赏，由于他们之间的相互学习交流和传播，可能对整个 IT 行业更加重要，毕竟实体经济才是中国发展的根本所在。希望他们能将各自的实践经验持续的输出到社区，一起来推动整个行业的变迁。其实《独角兽项目》小说中的场景设定，可能更符合他们的实际情况。传统行业企业往往坐拥得天独厚的资源优势，具有数十年积累的大规模信息科技研发组织和基础设施。 他们更多的出现在全球财富百强清单中是毫无悬念的，但是有时候所拥有的优势和劣势是对等的。如何破局企业组织部门间的制约和博弈，怎样意识到和消除深重的技术债务，怎么能持续优化 IT 服务的价值交付链条？这些都是更加复杂的系统性工程，自我颠覆和业务创新可能是他们的终极挑战和危机。希望大家能借鉴《独角兽项目》小说中的剧情，做到转危为安，实现企业的跃迁。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/06/human-bridge.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>《独角兽项目》一书的任何情节并没有配图，但是上面这幅图中的寓意相信各位看官们都能够秒懂。其实桥和火车是一体的，火车像是企业持续发展的业务。如果我们将这个场景作为 IT 行业软件开发和运维的隐喻，我们可能甚至都不好意思说“我们是高科技从业者”。还有很多企业的开发和运维团队尚处于“刀耕火种”或“手工作坊”的阶段，版本管理混乱、代码分支合并发布困难、重复繁琐的软件测试工作严重依赖人工、在物理隔离的多套环境中不得不纯手工配置和部署应用系统、监控告警的分类定级基本完全依赖经验，这些尚待 DevOps 解决的反模式不胜枚举。&lt;/p>
&lt;p>最后，我觉得虽然《独角兽项目》中的情节是虚构的，但是它们确实是反映出了软件开发过程中众多反模式的一个子集而已；如果在你阅读这本书的过程中，觉得情节离奇而夸张，那么我要恭喜你，可能你要再等一下，才能到这个阶段，或者你已经超越了这些苦难了（我表示否定）；如果你觉得稀松平常的话，那么我认为，你要么已经躺平接受了，要么就是掉进了更大的坑。反模式的后果包括：996/007的加班、职业透支、各种就发生在工位上的悲剧，这些是人类所不可接受的；反模式在《独角兽项目》中将那些斗志犹存，越战越勇，不甘心失败的人团建和聚集在了一起。希望现实工作生活中的大家都可以参考小说中的相关情节，哪里有压迫，哪里就有反抗，就有不可熄灭的追求理想的动力。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/06/5-ideals.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>《独角兽项目》向我们展示了软件开发团队迎难而上，在抗击行业困苦的过程中，需要坚定追求的五大理想。它们就像在社会主义发展的各个阶段中，社会所追求的主旋律都各不相同，但是社会整体上是螺旋上升的一样。这五大理想依次是：&lt;/p>
&lt;ol>
&lt;li>局部和简单性&lt;/li>
&lt;li>专注、流动和快乐&lt;/li>
&lt;li>改进日常工作&lt;/li>
&lt;li>心理安全&lt;/li>
&lt;li>以客户为中心&lt;/li>
&lt;/ol>
&lt;p>注：书中的译文是“五大理念”，在本文中我稍微升华了一下；本书的翻译质量上乘。&lt;/p>
&lt;p>虽然本书是献给 Developer 的一本书，但是在 DevOps 的视角中，测试、运维和安全，以及各种角色都应该是 Developer，大家的工作成果都应该是可以被计算机理解和执行的代码；在人机的交互模型中，切莫让人类变成重复执行任务的工具人（各种人肉某某某），人类应该做更高级的智力劳动。希望此书能给各行各业的开发者们带来一些启发和勇气。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/06/3-books.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>本书的作者Jene Kim 是 DevOps 领域中的大咖，本书是继《凤凰项目》（Phoenix Project）和《DevOps 实践指南》（DevOps Handbook）之后的一本书，也是他的巅峰之作。我是 DevOps Handbook 的译者之一，《凤凰项目》孕育了《DevOps 实践指南》一书，而《独角兽项目》的故事情节不但完美的延续了《凤凰项目》，而且它们向我们用戏剧化的方式，完整的展示了企业从开发到运维的全景，展示从一个技术团队从技术债的谷底背水一战、反败为胜的全过程。如果你对以上三本书都感兴趣的话，建议可以一次性购入，推荐的阅读顺序如下：&lt;/p>
&lt;ol>
&lt;li>《凤凰项目》&lt;/li>
&lt;li>《独角兽项目》&lt;/li>
&lt;li>《DevOps 实践指南》&lt;/li>
&lt;/ol>
&lt;p>这套书可以是团队读书会的必读书目，也是你劝说领导支持你做 DevOps 的铺垫。相信读过以上三本书的领导，可以与 DevOps 团队有更多的共同语言。&lt;/p>
&lt;p>在中国 DevOps 社区中（微信号 DevOpsMeetup），应该说我们汇聚了来自各个公司的 ，属于像是《独角兽项目》中所描述的反抗军的朋友们。社区中的很多朋友也曾经是孤独无助的 DevOps 践行者，通过一己之力很难推动团队瓶颈的解决。大家在DevOps社区的交流互动中能够收获到很多的顿悟时刻，得到大量成功经验的启迪和感召。DevOps 社区的 Meetup 活动正在定期的在各个城市举办，总有一场属于你的社区 Meetup 活动即将发生。&lt;/p>
&lt;p>希望《独角兽项目》是你补习 DevOps 理念的最后一本书，你必须将其付诸于实际行动。DevOps最后要落实并消失在每个开发者日常的工作中，这是一次没有终点的旅程，应该是一局没有结局的游戏。多说无益，让我们在 DevOps 社区里见。&lt;/p></description></item><item><title>Hashicorp 的 Terraform 1.0 正式 GA 了！</title><link>https://martinliu.cn/blog/hashicorp-%E7%9A%84-terraform-1.0-%E6%AD%A3%E5%BC%8F-ga-%E4%BA%86/</link><pubDate>Tue, 15 Jun 2021 09:15:22 +0800</pubDate><guid>https://martinliu.cn/blog/hashicorp-%E7%9A%84-terraform-1.0-%E6%AD%A3%E5%BC%8F-ga-%E4%BA%86/</guid><description>&lt;img src="https://martinliu.cn/img/2021/06/0gLZ2oH.png" alt="Featured image of post Hashicorp 的 Terraform 1.0 正式 GA 了！" />&lt;p>Terraform 1.0&amp;ndash;现在GA了&amp;ndash;标志着你的自动化工作流程的互操作性、易于升级和维护方面的一个重要里程碑。&lt;/p>
&lt;p>Terraform 拥有数以亿计的下载量、成千上万的贡献和令人难以置信的社区，是最广泛采用的基础设施即代码工具。达到 1.0 是一个重要的里程碑。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-06-15-terrafor-history.png"
loading="lazy"
alt="Terraform 的历史"
>&lt;/p>
&lt;p>本文来自：https://www.hashicorp.com/blog/announcing-hashicorp-terraform-1-0-general-availability&lt;/p>
&lt;p>6 月 8 日，在 HashiConf 欧洲会议上，我们很高兴地宣布HashiCorp Terraform 1.0全面上市，这是您自动化工作流程的互操作性、易于升级和维护的一个重要里程碑。Terraform 1.0&lt;a class="link" href="https://www.terraform.io/downloads.html" target="_blank" rel="noopener"
>立即可供下载&lt;/a>，也可在HashiCorp Terraform Cloud 中使用。HashiCorp Terraform已经被大小公司的个人和团队广泛使用，成为多云配置和自动化的标准。这篇文章介绍了新的内容，以及1.0的命名对Terraform用户的意义。&lt;/p>
&lt;h2 id="更好的-terraform-state-互操作性">更好的 Terraform State 互操作性&lt;/h2>
&lt;p>Terraform 在互操作性方面取得了巨大的进步。Terraform state 现在可以在0.14.x、0.15.x和1.0.x版本之间交叉兼容。远程状态数据源的兼容性现在已经回传，支持0.12.30、0.13.6、0.14.0、0.15.0和1.0.x版本。&lt;/p>
&lt;h2 id="改进升级体验">改进升级体验&lt;/h2>
&lt;p>从 Terraform 0.15 开始，一直到1.x的生命周期，你现在可以升级到新的 Terraform 版本，你的工作流程将继续运行，就像之前那些版本一样。使用Terraform 1.x不需要升级工具、重构或其他改变。&lt;/p>
&lt;h2 id="延长维护期">延长维护期&lt;/h2>
&lt;p>所有Terraform 1.x版本将有至少18个月的维护期。这意味着HashiCorp将继续调查1.0版本的错误和发布功能，至少在这段时间内。这些修复可能会在后续的1.x版本中发布，而不一定是增量的1.0.x版本。&lt;/p>
&lt;h2 id="terraform插件sdk-v1的寿命结束">Terraform插件SDK v1的寿命结束&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/hashicorp/terraform-plugin-sdk/" target="_blank" rel="noopener"
>Terraform插件SDK&lt;/a>是一个框架，可以让开发者创建和维护Terraform供应商。HashiCorp将在2021年7月31日结束对插件SDK第一版的支持。Terraform CLI和Terraform Cloud的用户不受此影响，不需要采取任何行动。我们鼓励受到影响的 Terraform Provider 的维护者使用我们的升级指南，转移到Terraform Plugin SDK的第二版本。按照我们的教程，开发您的Provider。其他信息可以在Terraform提供者社区讨论论坛中找到。Terraform插件SDK v1版的生命终结时间表。&lt;/p>
&lt;h2 id="10版本对terraform意味着什么">1.0版本对Terraform意味着什么？&lt;/h2>
&lt;p>1.0版本是一个巨大的成就，对于Terraform来说更是如此。对于许多为该项目做出贡献的人或参与超过100,000,000次下载的人来说，这已经是一个漫长的过程。但在HashiCorp，我们以一致的、透明的方式对待产品版本和1.0的指定，基于四个关键要求，正如2017年4月关于Packer 1.0发布的博文中所记录的那样。&lt;/p>
&lt;p>达到1.0的第一个要求是产品已经被广泛部署，在生产中经过多年的硬化。Terraform自2014年首次发布以来，一直在配置和管理基础设施，并得到了从零售业（星巴克）到证券交易所（TMX集团、德意志交易所集团）到自动驾驶汽车（Cruise）等广泛行业的信任。&lt;/p>
&lt;p>第二个要求是，主要的用例要被理解并得到良好的支持。Mitchell Hashimoto和Armon Dadgar早在2014年创建Terraform时，就已经想到了几个用例。从那时起，超过1500名贡献者开启了超过11000个 PR（GitHub 的贡献方式），这些请求增加了新的功能，并支持新的用例，这是我们从未想象过的。&lt;/p>
&lt;p>第三个要求规定了一个明确的用户体验。Terraform用户从不同的角度来处理他们的工作流程，因此我们专注于创建直观的用户界面；清晰的文档；全面的、自定进度的学习平台；以及互动的、由教师指导的研讨会。&lt;/p>
&lt;p>第四个要求是确保产品的技术架构是成熟和稳定的。&lt;/p>
&lt;p>Terraform 1.0以更大的互操作性、更容易的升级以及重要的维护期来巩固你的自动化工作流程和Terraform功能集的稳定性的形式满足了所有四个要求。&lt;/p></description></item><item><title>2021 年 Gartner AIops 平台市场指南报告</title><link>https://martinliu.cn/blog/2021-%E5%B9%B4-gartner-aiops-%E5%B9%B3%E5%8F%B0%E5%B8%82%E5%9C%BA%E6%8C%87%E5%8D%97%E6%8A%A5%E5%91%8A/</link><pubDate>Wed, 28 Apr 2021 17:22:22 +0800</pubDate><guid>https://martinliu.cn/blog/2021-%E5%B9%B4-gartner-aiops-%E5%B9%B3%E5%8F%B0%E5%B8%82%E5%9C%BA%E6%8C%87%E5%8D%97%E6%8A%A5%E5%91%8A/</guid><description>&lt;img src="https://martinliu.cn/img/2021/4/AIOps-an-Industrial-Benchmark-2048x719.jpg" alt="Featured image of post 2021 年 Gartner AIops 平台市场指南报告" />&lt;p>本文是翻译整理的 Gartner 的行业调查报告，原文在：https://www.gartner.com/doc/reprints?id=1-25RAD0H3&amp;amp;ct=210407&amp;amp;st=sb&lt;/p>
&lt;h2 id="概述">概述&lt;/h2>
&lt;h3 id="主要发现">主要发现&lt;/h3>
&lt;ul>
&lt;li>AIOps平台在企业中的应用正在迅速增长。I&amp;amp;O（基础设施和运维）领导人正在为COVID-19后的环境进行规划，主要参考当前的实际成果，而非理想的目标。&lt;/li>
&lt;li>AIOps平台的产品分为两类：领域无关的和以领域为中心的解决方案。然而，在处理高度多元化数据集的灵活性方面的需求正在逐渐提升，这正在对市场产生重大影响，并使AIOps平台向领域无关的功能性方向转变。&lt;/li>
&lt;li>企业已经开始采用AIOps平台来对比和替换一些类别的传统监控工具。例如，监控 IaaS 和可观察性正在完全在 AIOps 平台内完成，特别是当企业的整个IT服务部署都在云里时。&lt;/li>
&lt;li>企业正在增加将 AIOps 用于IT运维管理（ITOM）的各方面，并使其在DevOps 和 SRE 的实践中的使用应用场景更加成熟。&lt;/li>
&lt;/ul>
&lt;h3 id="建议">建议&lt;/h3>
&lt;p>专注于基础设施、运维和云管理的 I&amp;amp;O 领导人应该。&lt;/p>
&lt;ul>
&lt;li>通过采用渐进式方法，从取代基于规则的事件分析开始，然后再扩展到以领域为中心的工作流程中，如应用程序和网络的诊断，优先考虑实际成果，而不是理想中的目标。&lt;/li>
&lt;li>通过允许根据使用场景来选择的方法，在以领域为中心的AIOps或与领域无关的AIOps之间作出选择。在使用以领域为中心的AIOps功能点时，要将其内置于监控工具中，服务于一次性的特定用例，同时在路线图上规划部署能兼顾多种用例的，领域无关的独立解决方案。&lt;/li>
&lt;li>通过选择一个支持与ITSM工具双向整合的AIOps平台，实现任务自动化、知识管理和变更分析。小心那些只提供基本搜索和显示功能的工具。&lt;/li>
&lt;li>通过AIOps平台所支持的以上这三个方面，实现对整个ITOM的持续洞察：观测、干预和行动（observe, engage and act）。&lt;/li>
&lt;/ul>
&lt;h2 id="市场定义">市场定义&lt;/h2>
&lt;p>本报告于2021年4月19日修订。你正在查看的文件是更正后的版本。欲了解更多信息，请参见gartner.com上的 &lt;a class="link" href="http://www.gartner.com/technology/about/policies/current_corrections.jsp" target="_blank" rel="noopener"
>更正&lt;/a>页面。&lt;/p>
&lt;p>AIOps 平台通过结合数据存储和分析功能，满足I&amp;amp;O领导者对运维支持的需求，根据IT部门为应对数字化转型而产生的数据，向有关团队提供相关的洞见。该能力是数据流水线的一部分，包括数据的摄人和存储，然后是数据整形和分析，然后转向可视化层。分析能力包括统计技术和人工智能技术的混合，但考虑到用户的成熟度，与人工智能层的互动界面对I&amp;amp;O来说是最小化、甚至是不存在的。&lt;/p>
&lt;h2 id="市场描述">市场描述&lt;/h2>
&lt;p>AIOps 平台广泛的强化了一些列 IT 实践，包括 I&amp;amp;O（基础架构/运维）、DevOps、SRE 和服务管理。然而，更集中的成果是在 I&amp;amp;O 领域，包括异常检测、诊断信息、事件关联和根本原因分析（RCA），以改善监控、服务管理和自动化任务。&lt;/p>
&lt;p>AIOps平台的核心功能包括：&lt;/p>
&lt;p>&lt;strong>摄入&lt;/strong>&lt;/p>
&lt;p>AIOps 平台可以从多个领域、信息提供源进行数据摄取、索引和规范化事件或监控数据，包括基础设施、网络、应用程序、云或现有监控工具（用于跨领域分析）（见注2）。该平台必须至少在两个方面，使用机器学习的使能（enable）数据分析，包括。&lt;/p>
&lt;ul>
&lt;li>摄入点的实时分析（流分析）。&lt;/li>
&lt;li>存储数据的历史分析&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>拓扑&lt;/strong>&lt;/p>
&lt;p>AIOps 平台发现并建立IT资产的统一拓扑结构，包括应用程序，和其它相关领域。拓扑结构可以表达物理上的连接性、逻辑上的依赖性或捕捉到IT资产和服务之间其他维度的关系。&lt;/p>
&lt;p>&lt;strong>关联&lt;/strong>&lt;/p>
&lt;p>AIOps 平台对多个监控领域或来源的事件进行关联和压缩（抑制），减少不必要的人工干预。关联功能结合了时间和拓扑结构来分组相关的事件。&lt;/p>
&lt;p>&lt;strong>识别&lt;/strong>&lt;/p>
&lt;p>AIOps 平台处理事件和监控数据，从而检测或预测重要的事件或事故。该平台不断地从操作员的输入和优化的机制中学习和强化重要事件的独特模式。&lt;/p>
&lt;p>&lt;strong>修复&lt;/strong>&lt;/p>
&lt;p>AIOps 平台通过操作员的调校或观察，不断的学习和改进每个重要事件和操作响应之间的关联性。AIOps 平台可能会提供一个建议，自动化响应或触发外部自动化系统。&lt;/p>
&lt;p>AIOps 不仅仅是一个数据存储和检索系统。此外，该平台不限于趋势分析、预测和查询大量数据集的能力。&lt;/p>
&lt;p>AIOps 的目标是通过策划和提高摄入数据的质量，以便 I&amp;amp;O 的领导者能够将多种用例推向相关的合适实践或角色。例如，模式发现可以有助于预测新出现的行为，IT 实体之间的关系，以及（IT工件、用户和代理）的基准行为，从而识别出异常情况，并给业务所有者提供相关背景。分析也促成了自动化的洞察力，简化了根本原因的定位，并使能了运用自动化解决所已发现问题的行动（见图1）。&lt;/p>
&lt;p>图1: AIOps 跨多 IT 运维监控(ITOM)领域使能持续生成洞见 &lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-28-Figure_1_AIOps_Platform_Enabling_Continuous_Insights_Across_IT_Operations_Monitoring_ITOM.png"
loading="lazy"
alt="Figure 1: AIOps Platform Enabling Continuous Insights Across IT Operations Monitoring (ITOM)"
>&lt;/p>
&lt;p>图片翻译如下：&lt;/p>
&lt;p>Real-time and historical data : 实时和历史数据&lt;/p>
&lt;p>Events Metrics, Traces, Topology : 事件 指标，追踪，拓扑&lt;/p>
&lt;p>Incidents, dependencies and changes : 事故、依赖和变更&lt;/p>
&lt;p>Observe （monitoring）：观测（监控）&lt;/p>
&lt;ul>
&lt;li>Historical analysis 历史分析&lt;/li>
&lt;li>Anomaly Detection 异常检测&lt;/li>
&lt;li>Performance analysis 性能分析&lt;/li>
&lt;li>Correlation and contextualization 关联和上下文化&lt;/li>
&lt;/ul>
&lt;p>Engage （ITSM）：干预（ITSM）&lt;/p>
&lt;ul>
&lt;li>Task Automation 任务自动化&lt;/li>
&lt;li>Change Risk analysis 变更风险分析&lt;/li>
&lt;li>Performance Analysis 性能分析&lt;/li>
&lt;li>Knowledge Management 知识管理&lt;/li>
&lt;/ul>
&lt;p>Act （automation） ： 行动 （自动化）&lt;/p>
&lt;ul>
&lt;li>Scripts 脚本&lt;/li>
&lt;li>Runbooks 运行手册&lt;/li>
&lt;li>ARA&lt;/li>
&lt;/ul>
&lt;h2 id="市场方向">市场方向&lt;/h2>
&lt;h3 id="市场转向领域无关的-aiops">市场转向领域无关的 AIOps&lt;/h3>
&lt;p>领域无关的平台正在作为一个独立的市场出现，与以领域为中心的AIOps平台不同（见注3）。这是因为在三到五年渐进式的路线图中，可以灵活地摄取日益多样化的数据集。这种路线图上的用例不仅仅关注异常状态识别，还包括行为分析、客户参与和识别潜在机会。未来的市场指南报告将专注于领域无关的 AIOps。&lt;/p>
&lt;p>随着企业在应用 AIOps 方面的成熟，他们需要一个跨越 I&amp;amp;O、DevOps、SRE的统一的领域无关平台，在某些情况下还需要包括安全实践。&lt;/p>
&lt;p>Gartner 看到 I&amp;amp;O 领导人正在与高级管理层讨论相关的KPI（关键绩效指标）和仪表盘。在所有这些情况下，以领域为中心的工具则出现了明显的差异，它更聚焦在异常检测和减少错误告警方面。AIOps 已经成为许多以领域为中心的市场中的一个决定性特性。&lt;/p>
&lt;h3 id="aiops以领域为中心的工具中的必备功能">AIOps：以领域为中心的工具中的必备功能&lt;/h3>
&lt;p>以领域为中心的 AIOps 已经扩展到多个 ITOM 细分市场，包括可观测性和自动化工具市场。它是一些市场的决定性特性。比如说。&lt;/p>
&lt;ul>
&lt;li>AIOps 能力是 APM 工具的决定性特性之一（见[应用性能监控魔力象限]报告）。&lt;/li>
&lt;li>在 ITIM 和 NPMD 市场，分析被认为是一种核心能力，但供应商已经开始提供AIOps能力，以支持各种产出，如提升洞察和诊断力。&lt;/li>
&lt;li>许多ITSM供应商通过投资自开发平台或与 AIOps 平台供应商合作，将AIOps能力纳入其中（见[IT服务管理工具魔力象限]）。AITSM 的概念通过在 ITSM 工具上应用人工智能的上下文、建议、行动和界面，为 I&amp;amp;O 人员带来了有效性、效率和降低错误（见[利用 AITSM的4个领域来发展ITSM工具和实践]）。&lt;/li>
&lt;/ul>
&lt;p>以领域为中心的 AIOps 方法对那些数据种类有限（即只有少数点状解决方案）并优先考虑少数重点用例的组织有效。这类组织对同时查看多个孤岛数据的需求或能力都比较有限。随着组织内用例的增加，他们可能会转向领域无关的工具。&lt;/p>
&lt;p>仅仅关注以领域为中心的方法的供应商将在那些还没有准备好利用领域诊断工具的优势的客户身上获得成功。然而，随着越来越多的企业希望转向领域无关的选项，只关注以领域为中心的技术的供应商将发现自己被排除在市场的讨论之外。&lt;/p>
&lt;h3 id="持续的关注和增长">持续的关注和增长&lt;/h3>
&lt;p>AIOps 继续的增长和对整个 ITOM 市场的影响，估计2020年的市场规模在9亿至15亿美元之间，2020年至2025年的复合年增长率约为15%（见[市场机会图：全球IT运维管理]）。采用和方向正受到两个独立但最终相关的领域的严重影响。&lt;/p>
&lt;ul>
&lt;li>数字化业务转型&lt;/li>
&lt;li>从被动应对问题过渡到主动解决问题&lt;/li>
&lt;/ul>
&lt;p>数字化业务转型正在推动着 AIOps 市场的发展，因为更多的业务运维被数字化，分析不断增长的数据量变得更加关键和困难。随着数据量达到或超过每分钟千兆字节，跨越十几个不同的领域，人类已经不可能手动分析数据了。&lt;/p>
&lt;p>随着企业继续进行数字化转型，他们不再奢望在问题发生后才作出响应。相反，他们必须变得积极主动，在影响到用户的体验之前就解决掉潜在的问题。&lt;/p>
&lt;p>AIOps 市场继续朝着更广泛和更好的解决方案发展，在这两个目标下，依然同时仍然保持着以领域为中心的方法和领域无关的方法之间的区分（见注3）。未来的状态是一个统一的 AIOps 平台试图取代问题日益增多的领域为中心的工具。Gartner 预计会看到越来越多的专业层，获奖在嵌入设备中包含分析和训练有素的模型。最终，分析技术将被嵌入到构成以领域为中心的AIOps的不同监控技术中，以至于以领域为中心的AIOps被包含在多种监控市场的定义中。&lt;/p>
&lt;p>此外，一些供应商正在尝试将领域无关和以领域为中心的方式混合起来，在其孤立的工具之上提供领域诊断的AIOps功能。在日益动态的IT架构中，由于必须更新相关规则的速度，基于规则的事件关联已经让位于基于人工智能的关联（见[使用AIOps的数据驱动方法来提高IT运维监控工具的洞察力]）。&lt;/p>
&lt;h3 id="低准入门槛">低准入门槛&lt;/h3>
&lt;p>开源技术的商品化降低了该领域许多供应商的准入门槛，为数据采集、存储和可视化工具提供了许多选择。这些与领域无关的采集、存储和展示技术相对容易部署和整合，引发了许多以领域为中心的供应商，包括系统集成商和管理服务提供商的产品开发或改进。用于跨指标、追踪和日志领域的诊断数据采集的开源工具，包括 Prometheus、Elastic Beats、Jaeger 和 Fluentd。对于数据可视化，Gartner 遇到了许多利用 Grafana 实现的方案，无论数据存储在哪里。&lt;/p>
&lt;p>尽管 AIOps 尚未成熟，但只要使用案例合适，AIOps 就会被认为是企业内部的一个有价值的工具，并能长期保持持有的状态（见图2）。&lt;/p>
&lt;p>图 2: 组织计划持续使用 CMP 和 AIOps&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-28-Figure_2_Organizations_Plans_to_Continue_Using_CMP_and_AIOps.png"
loading="lazy"
alt="Of the DevOps initiatives organizations began using in response to COVID-19, CMP and AIOps are the ones organizations most intend to continue using."
>&lt;/p>
&lt;h2 id="市场分析">市场分析&lt;/h2>
&lt;p>尽管 AIOp s技术已经存在多年，但成功的部署还需要时间和努力，包括终端用户的结构化路线图。实施通常会遇到一些问题，包括数据摄取、提供上下文相关的分析和较长的价值实现时间。许多 AIOps 平台工具部署的价值实现时间是以月或年计算的，这导致了对该细分市场的不满和幻灭。然而，企业应该毫不怀疑。&lt;/p>
&lt;blockquote>
&lt;p>IT运维的未来不可能不包括 AIOps。这是由于数据量和变化速度的快速增长（以应用交付速度和事件驱动的商业模式为例），不能依靠人类从数据中挖掘出洞见。&lt;/p>
&lt;/blockquote>
&lt;p>人类根本不可能对其IT系统每秒产生的成千上万的事件进行理解。&lt;/p>
&lt;p>为了更清楚地了解市场是如何发展的，以及供应商彼此之间的定位，请考虑以下属性。&lt;/p>
&lt;ul>
&lt;li>数据摄取和处理&lt;/li>
&lt;li>机器学习（ML）分析&lt;/li>
&lt;li>补救措施&lt;/li>
&lt;/ul>
&lt;h3 id="数据摄入和处理">数据摄入和处理&lt;/h3>
&lt;p>AIOps 平台必须能够摄取静态（历史）数据和动态（实时、流）数据。这些平台可以摄取、索引和存储日志、事件数据、指标、追踪以及图表和文档数据（见注释2）。&lt;/p>
&lt;p>这些用于IT运维的工具必须直接在摄取点上做实时数据分析，而不需要在分析前将数据保存到数据库。它们还必须提供跨越多个实时和历史数据流的关联分析。&lt;/p>
&lt;h3 id="机器学习分析">机器学习分析&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>AIOps 平台使用以下类型的分析方法。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>统计学、概率分析&lt;/strong> 单变量和多变量分析的结合，包括使用相关、聚类、分类和跨IT实体捕获的指标进行推断。&lt;/li>
&lt;li>&lt;strong>自动模式发现和预测&lt;/strong> 发现隐含描述历史和/或流数据中的相关性的模式、集群或群体。然后，这些模式可用于预测具有不同程度概率的事件。&lt;/li>
&lt;li>&lt;strong>异常检测&lt;/strong> 使用前述组件发现的模式来确定正常行为，然后辨别与正常行为的偏差，包括单变量和多变量。超越了单纯的异常值检测，它们必须与业务影响和其他并发流程（如发布管理）相关联，才能充分发挥作用，而不是产生出更多的告警噪音（见[使用AI技术增强DevOps的决策能力]）。&lt;/li>
&lt;li>&lt;strong>可能原因判定&lt;/strong> 对通过自动模式发现和摄取图数据建立的关联网络进行修剪，以确定连接因果关系的因果关系链。&lt;/li>
&lt;li>&lt;strong>拓扑分析&lt;/strong> AIOps平台可以使用应用程序、网络、基础设施或其他拓扑结构来提供上下文分析。从拓扑结构内的数据中得出的模式将建立相关性，并说明隐藏的依赖关系。将拓扑结构作为因果关系判断的一部分，可以大大增加其准确性和有效性。&lt;/li>
&lt;li>&lt;strong>规范性建议&lt;/strong> 建议解决一个问题的方案。这些建议可能是基于对重复出现的问题的历史解决方案（部落知识）的数据库，或通过众包确定。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="补救措施">补救措施&lt;/h3>
&lt;p>随着技术的成熟，用户将能够利用该平台的建议，实现行动阶段（见注4）。这方面的步骤如图3所示。&lt;/p>
&lt;p>图3: AI 辅助自动化的未来 —问题的分类和补救&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-28-Figure_3_The_Future_of_AI-Assisted_Automation__Triage_and_Remediation_of_Problems.png"
loading="lazy"
alt="Graphic illustrates the problem-remediation process with AI-assisted automation."
>&lt;/p>
&lt;p>图片翻译：&lt;/p>
&lt;p>1 开始于已知的&lt;/p>
&lt;ul>
&lt;li>在一个部落知识库中记录成功的解决方案&lt;/li>
&lt;li>将问题进行分类&lt;/li>
&lt;/ul>
&lt;p>2 当前和历史的对照&lt;/p>
&lt;ul>
&lt;li>在数据库将一类问题与一组已知解决方案进行匹配&lt;/li>
&lt;li>众包&lt;/li>
&lt;/ul>
&lt;p>3 建议&lt;/p>
&lt;ul>
&lt;li>建议一组可能的解决方案&lt;/li>
&lt;/ul>
&lt;p>4 执行和评估&lt;/p>
&lt;ul>
&lt;li>运行解决方案（提供）（ARA/运行手册）&lt;/li>
&lt;li>跟踪解决方案效果&lt;/li>
&lt;li>对效果投票&lt;/li>
&lt;/ul>
&lt;p>一个被称为 &amp;ldquo;自我驱动的ITOM &amp;ldquo;的自动化、闭环的流程是非常令人向往的，但这仍然是一种愿望。在商业工具中，除了那些简单的自动 &amp;ldquo;弹出服务器 &amp;ldquo;或 “创建工单 &amp;ldquo;类型的脚本外，很少看到规范性的解决方案。有可能从规范性工具中获得自动行动的候选者是那些低风险的。这些是那些如果失败或导致意外的副作用，造成的损失相对较小。根据环境的不同，手工的预定操作，如补丁更新，以及执行工作负载优化的行动，如启动一个额外的虚拟机（VM）或容器，可能是成功的。&lt;/p>
&lt;h4 id="价值实现时间">价值实现时间&lt;/h4>
&lt;p>Gartner 客户的一个共同抱怨是，部署、配置和从AIOps解决方案中获取价值所需的时间可能长达六个月，在极端情况下，可能长达两年。AIOps是一项新兴技术，这意味着该领域的最佳实践仍在不断发展。但是，当潜在的回报在时间跨度上如此遥远时，企业不愿意投资于一个产品。&lt;/p>
&lt;p>为了应对这种情况，供应商正在采取举措，加快部署速度。这些措施包括。&lt;/p>
&lt;ul>
&lt;li>转向基于SaaS的部署&lt;/li>
&lt;li>改进通用接口的开箱即用的集成方式&lt;/li>
&lt;li>基于现场测试的最佳实践，在系统中建立可重复的工作流&lt;/li>
&lt;li>减少系统产生的误报数量&lt;/li>
&lt;/ul>
&lt;p>在为AIOps的投资回报建立商业案例时，I&amp;amp;O 领导人必须与供应商讨论其实施的预期价值时间。在许多情况下，预计会有一个有限的概念验证，以证明集成在现实环境中如何运作。&lt;/p>
&lt;h4 id="devops-中的-aiops">DevOps 中的 AIOps&lt;/h4>
&lt;p>作为IT运维工具与DevOps流水线整合的 &amp;ldquo;左移 &amp;ldquo;大趋势的一部分，早期采用者正在开发流水线的早期尝试AIOps。结合越来越多的自动化使用，开发人员正在使用人工智能来更快、更安全地交付软件，在生产中更容易管理。图4显示了AIOps 存在于 DevOps 流水线中的例子。
图4：在应用程序的生命周期中，在一系列的使用案例中应用AIOps平台&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-28-Figure_4_Applying_AIOps_Platforms_Across_a_Spectrum_of_Use_Cases_Over_the_Life_Cycle_of_an_Application.png"
loading="lazy"
alt="Graphic illustrates how to apply AIOps throughout an application’s nonexistent, from development through IT service management."
>&lt;/p>
&lt;p>图片翻译：&lt;/p>
&lt;ol>
&lt;li>识别代码中的风险&lt;/li>
&lt;li>日志文件分析&lt;/li>
&lt;li>时间关联、异常分析，RCA&lt;/li>
&lt;li>数字化代理（智能客服）/自动化，变更&lt;/li>
&lt;/ol>
&lt;p>NLP 在 ITSM 工具中被大量采用，但一些APM供应商已经开始将NLP作为其AIOps能力的一部分。一个主要目标是为DevOps团队实现更灵活的ChatOps，并为APM数据和自动化提供更好的接口。&lt;/p>
&lt;h2 id="代表性厂商">代表性厂商&lt;/h2>
&lt;h3 id="市场介绍">市场介绍&lt;/h3>
&lt;p>AIOps平台供应商拥有广泛的功能，并在继续增长。供应商在其数据摄取和开箱即用的用例方面存在差异，只需最小的配置即可使用。在表1中，我们提供了一个有代表性的供应商样本列表，提供领域无关的AIOps平台功能。该表中的一些供应商也提供以领域为中心的产品。&lt;/p>
&lt;p>表2包括以领域为中心的AIOps供应商，在某些情况下，他们专注于一个以上的领域。随着AIOps功能开始成为APM和ITSM等不同领域的决定性特性，Gartner将在本市场指南的未来版本中关注领域无关的AIOps供应商。&lt;/p>
&lt;p>表1: 领域无关的AIOps平台市场的代表厂商&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;strong>厂商&lt;/strong>&lt;/th>
&lt;th style="text-align:center">&lt;strong>产品,服务或者解决方案&lt;/strong> &lt;strong>名称&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.bigpanda.io/" target="_blank" rel="noopener"
>BigPanda&lt;/a>&lt;/td>
&lt;td style="text-align:center">BigPanda&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.bmc.com/" target="_blank" rel="noopener"
>BMC&lt;/a>&lt;/td>
&lt;td style="text-align:center">TrueSight Operations Management, Helix Platform&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.broadcom.com/" target="_blank" rel="noopener"
>Broadcom-CA Technologies&lt;/a>&lt;/td>
&lt;td style="text-align:center">DX Operational Intelligence&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.devo.com/" target="_blank" rel="noopener"
>Devo&lt;/a> (formerly Logtrust)&lt;/td>
&lt;td style="text-align:center">Devo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://digitate.com/" target="_blank" rel="noopener"
>Digitate&lt;/a>&lt;/td>
&lt;td style="text-align:center">ignio&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.elastic.co/" target="_blank" rel="noopener"
>Elastic&lt;/a>&lt;/td>
&lt;td style="text-align:center">Elasticsearch&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.ibm.com/" target="_blank" rel="noopener"
>IBM&lt;/a>&lt;/td>
&lt;td style="text-align:center">IBM Cloud Pak for Watson AIOps&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.interlinksoftware.com/" target="_blank" rel="noopener"
>Interlink Software&lt;/a>&lt;/td>
&lt;td style="text-align:center">Interlink Software&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://logz.io/" target="_blank" rel="noopener"
>Logz.io&lt;/a>&lt;/td>
&lt;td style="text-align:center">Log Management&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.moogsoft.com/" target="_blank" rel="noopener"
>Moogsoft&lt;/a>&lt;/td>
&lt;td style="text-align:center">Moogsoft&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.pagerduty.com/" target="_blank" rel="noopener"
>PagerDuty&lt;/a>&lt;/td>
&lt;td style="text-align:center">PagerDuty&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="http://servicenow.com/" target="_blank" rel="noopener"
>ServiceNow&lt;/a>&lt;/td>
&lt;td style="text-align:center">IT Operations Management (ITOM)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.splunk.com/" target="_blank" rel="noopener"
>Splunk&lt;/a>&lt;/td>
&lt;td style="text-align:center">Splunk Enterprise, Splunk Cloud&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.stackstate.com/" target="_blank" rel="noopener"
>StackState&lt;/a>&lt;/td>
&lt;td style="text-align:center">StackState&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.sumologic.com/" target="_blank" rel="noopener"
>Sumo Logic&lt;/a>&lt;/td>
&lt;td style="text-align:center">Sumo Logic&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Source: Gartner (April 2021)&lt;/p>
&lt;p>表2: 以领域为中心的AIOps平台市场的代表厂商&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;strong>厂商&lt;/strong>&lt;/th>
&lt;th style="text-align:center">&lt;strong>产品,服务或者解决方案&lt;/strong> &lt;strong>名称&lt;/strong>&lt;/th>
&lt;th style="text-align:center">&lt;strong>供应商擅长的领域&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://aisera.com/" target="_blank" rel="noopener"
>Aisera&lt;/a>&lt;/td>
&lt;td style="text-align:center">Aisera&lt;/td>
&lt;td style="text-align:center">ITSM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.cisco.com/" target="_blank" rel="noopener"
>Cisco&lt;/a>&lt;/td>
&lt;td style="text-align:center">AppDynamics&lt;/td>
&lt;td style="text-align:center">APM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="http://datadoghq.com/" target="_blank" rel="noopener"
>Datadog&lt;/a>&lt;/td>
&lt;td style="text-align:center">Datadog APM&lt;/td>
&lt;td style="text-align:center">APM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://digital.ai/" target="_blank" rel="noopener"
>Digital.ai&lt;/a>&lt;/td>
&lt;td style="text-align:center">Numerify&lt;/td>
&lt;td style="text-align:center">ITSM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.dynatrace.com/" target="_blank" rel="noopener"
>Dynatrace&lt;/a>&lt;/td>
&lt;td style="text-align:center">Dynatrace&lt;/td>
&lt;td style="text-align:center">APM, ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.espressive.com/" target="_blank" rel="noopener"
>Espressive&lt;/a>&lt;/td>
&lt;td style="text-align:center">Barista Case Management&lt;/td>
&lt;td style="text-align:center">ITSM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.extrahop.com/" target="_blank" rel="noopener"
>ExtraHop&lt;/a>&lt;/td>
&lt;td style="text-align:center">ExtraHop Reveal(x) for IT Operations&lt;/td>
&lt;td style="text-align:center">NPMD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://harness.io/" target="_blank" rel="noopener"
>Harness&lt;/a>&lt;/td>
&lt;td style="text-align:center">Continuous Integration, Continuous Delivery, Continuous Efficiency Platforms&lt;/td>
&lt;td style="text-align:center">DevOps&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://amelia.com/about/" target="_blank" rel="noopener"
>IPsoft (Amelia)&lt;/a>&lt;/td>
&lt;td style="text-align:center">DigitalWorkforce.ai Platform&lt;/td>
&lt;td style="text-align:center">ITSM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.kentik.com/" target="_blank" rel="noopener"
>Kentik&lt;/a>&lt;/td>
&lt;td style="text-align:center">Kentik&lt;/td>
&lt;td style="text-align:center">NPMD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.overops.com/" target="_blank" rel="noopener"
>OverOps&lt;/a>&lt;/td>
&lt;td style="text-align:center">OverOps&lt;/td>
&lt;td style="text-align:center">Dev&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.pico.net/" target="_blank" rel="noopener"
>Pico&lt;/a>&lt;/td>
&lt;td style="text-align:center">Corvil&lt;/td>
&lt;td style="text-align:center">NPMD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://newrelic.com/" target="_blank" rel="noopener"
>New Relic&lt;/a>&lt;/td>
&lt;td style="text-align:center">New Relic One Platform&lt;/td>
&lt;td style="text-align:center">APM, ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.opsramp.com/" target="_blank" rel="noopener"
>OpsRamp&lt;/a>&lt;/td>
&lt;td style="text-align:center">OpsRamp&lt;/td>
&lt;td style="text-align:center">ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://sciencelogic.com/" target="_blank" rel="noopener"
>ScienceLogic&lt;/a>&lt;/td>
&lt;td style="text-align:center">SL1 Platform&lt;/td>
&lt;td style="text-align:center">ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.virtana.com/" target="_blank" rel="noopener"
>Virtana&lt;/a>&lt;/td>
&lt;td style="text-align:center">Virtana Platform&lt;/td>
&lt;td style="text-align:center">ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;a class="link" href="https://www.gartner.com/doc/zenoss.com" target="_blank" rel="noopener"
>Zenoss&lt;/a>&lt;/td>
&lt;td style="text-align:center">Zenoss&lt;/td>
&lt;td style="text-align:center">ITIM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Source: Gartner (April 2021)&lt;/p>
&lt;p>*本市场指南中所列的供应商并不意味着是一份详尽的清单。本节旨在提供对市场及其产品的更多了解。&lt;/p>
&lt;h2 id="市场建议">市场建议&lt;/h2>
&lt;h3 id="使用一个自上而下的-aiops-框架">使用一个自上而下的 AIOps 框架&lt;/h3>
&lt;p>AIOps的使用案例跨越了从IT操作员到业务线所有者甚至CEO的各个层次。&lt;/p>
&lt;p>在实践中，这些平台只具备开箱即用的异常检测和事件关联能力。这意味着对IT操作员来说，开箱即用的相关性相当高，而终端用户必须创造与人员相关的结果，如 I&amp;amp;O 领导、系统管理员、架构师和LOB所有者。&lt;/p>
&lt;p>该平台的分析能力利用算法和模型来支持基于数据集的结果，这些数据集可能质量差、不完整且缺乏统一性。结果并不总是通用或相似的；因此，算法的价值是有限的。由于IT的复杂性和不断变化的性质，即使是AIOps平台所利用的模型，如果没有持续的反馈机制，也会失去相关性。&lt;/p>
&lt;p>**例如，在监控策略中，确定AIOps如何将数据转化为与目标人物的相关性，以及如何帮助解决各自人物的目的（见注5）。随后，从IT运维中的可视化现状开始，描绘出通往目标的以下步骤（见[采用AIOps的解决方案路径]）。&lt;/p>
&lt;ul>
&lt;li>以最终目标为起点的目标路线图&lt;/li>
&lt;li>通向目标的中间步骤&lt;/li>
&lt;li>IT运维的现有状态（噪音事件、基于静态阈值的告警或利用动态阈值）&lt;/li>
&lt;/ul>
&lt;p>选择最适合为路线图上的第一步提供开箱即用功能的AIOps供应商，并提供符合组织路线图的平台（例如，帮助组织以最小的努力从事件关联推进到动态阈值到行为分析）。随着用例的成熟，请注意这些平台的可移植性挑战（见注6）。&lt;/p>
&lt;h3 id="基于洞见的自动化">基于洞见的自动化&lt;/h3>
&lt;p>一些企业有一个目标，导致对已发现的异常情况进行自动化补救。任何自动化举措都是基于一定程度的标准化。这是大规模部署自动化行动的一个主要抑制因素。成熟度高的IT组织更喜欢自动化的洞察力，而不是自动化的行动，这是一个切实的目标。I&amp;amp;O领导应该优先考虑那些能减少IT操作人员视觉负担的工具。例如，AIOps平台应该强调出需要人类关注的领域，而不是对多个图表进行可视化分析。&lt;/p>
&lt;p>COVID-19疫情要求企业从根本上改变排查方式和采用AIOps用例的方式，因为向居家工作的转变暴露了现有做法的缺点。例如，在运维中心，有人会提出一个 &amp;ldquo;问题&amp;rdquo;，不同的小组会大声喊出他们对 &amp;ldquo;答案 &amp;ldquo;的看法。高管们看到了一个机会，在起草一个能够长期保持的战略时，重新审视综合运维工具、流程和人员的基本方面（见注5的图5）。&lt;/p>
&lt;p>在2019年，Gartner的客户有一个理想的目标，即设计与LOB所有者相关的仪表盘。这个过程中，一些企业花了10个月到两年的时间。两个主要因素是透明度和用于使业务领导人推动决策的上下文信息，与旨在让业务领导人了解情况的报告相比。疫情大流行开始后，大多数企业关注基本面和减少风险，把自己限制在现有的开箱即用的用例上，如事件关联性。在COVID-19大流行之前，Gartner看到企业提出了理想的目标，而这些目标在今天的AIOps工具中可能还没有开箱即用。&lt;/p>
&lt;h3 id="与不同角色的关联性">与不同角色的关联性&lt;/h3>
&lt;p>AIOps平台被不同的团队采用，如DevOps、SRE、IT运维、网络安全（见[安全信息和事件管理魔力象限]），以及业务领导人。所需的用例和原始数据根据采用该平台的团队及其成熟度而不同。&lt;/p>
&lt;p>DevOps团队主要专注于日志摄取和分析。随着DevOps实践的成熟，用例从对生产前的关注扩大到包括用户参与、质量和业务相关性等生产指标。这就产生了对新的KPI的需求，在多个版本之间进行比较，并关注产品和平台。考虑到这种情况，选择能够摄取埋点的数据（追踪、指标和日志）的平台，并减轻为DevOps提供平台和产品视图的工作。&lt;/p>
&lt;p>IT运维团队通常需要指标和日志摄取的组合，然后是分析。这个过程从事件关联开始，随着团队的成熟，扩大到基于指标和日志分析的行为分析。这里的主要目标是异常检测和诊断信息，然后是根本原因分析。其他用例包括通过使用脚本的自动行动，其中AIOps识别与自动行动相关的触发器。选择那些能够灵活地摄取事件、日志和指标的平台，并为I&amp;amp;O的至少一个优先用例提供开箱即用的功能。&lt;/p>
&lt;p>企业领导更关注用户参与度，而应用性能只是影响整体参与度的一个参数。在一些全球性的组织中，业务领导已经不再区分员工和客户，所以这里的 &amp;ldquo;用户 &amp;ldquo;既指员工也指客户。这个旅程通常从基于IT的用户影响的相关性开始，但扩大到包括技术、人员和现有流程的效率和生产力等定性的关键绩效指标。在成熟的组织中，更好的参与而不是减员是这种关键绩效指标背后的驱动力。对于这样的场景，选择专注于聚类和人口统计学的平台，并在不同的数据集上提供因果洞察力，包括情感和满意度。&lt;/p>
&lt;p>SRE实践通常有与IT运维和DevOps用例重叠的目标。通常，这些都是跨越两个实践的成熟用例。例如，事件关联和日志摄取不是SRE团队的主要目标。他们的重点领域包括IT架构评估。对于SRE用例，选择为IT架构提供实时拓扑和依赖性洞见的平台作为主要用例之一。&lt;/p>
&lt;h2 id="首字母缩写词和词汇表术语">首字母缩写词和词汇表术语&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>APM&lt;/strong>&lt;/th>
&lt;th>&lt;strong>Application performance monitoring&lt;/strong> 应用性能监控&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>BAM&lt;/td>
&lt;td>Business activity monitoring 业务活动监控&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DA&lt;/td>
&lt;td>Domain-agnostic 领域无关&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DC&lt;/td>
&lt;td>Domain-centric 领域为中心&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ITIM&lt;/td>
&lt;td>IT infrastructure monitoring IT 基础架构监控&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ITOM&lt;/td>
&lt;td>IT operations management IT 运维管理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ITSM&lt;/td>
&lt;td>IT service monitoring IT 服务监控&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NLP&lt;/td>
&lt;td>Natural language processing 自然语言处理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NPMD&lt;/td>
&lt;td>Network performance monitoring and diagnostics 网络性能监控和诊断&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SIEM&lt;/td>
&lt;td>Security information and event management 安全信息和事件管理&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="证据">证据&lt;/h2>
&lt;p>&lt;strong>1&lt;/strong> &lt;strong>Gartner的2020年通过自动化、持续质量和DevOps实现业务敏捷性研究&lt;/strong>于2020年6月至8月在北美和西欧已部署或正在使用DevOps的服务提供商、云供应商和终端用户组织工作的205名受访者中进行了在线调查。符合条件的组织的年收入至少为5亿美元，并要求主要在银行和金融服务、政府、保险、医疗机构和零售业中运维。受访者必须在其组织的IT职能部门工作，其职称低于C-suite级别，并且与组织中的最高主管相差两层或更多。受访者的角色必须主要集中在应用开发、基础设施和运维，或商业智能和信息管理。在这些重点领域，他们还被要求执行相关的角色/活动。这项研究是由关注数字商业趋势的Gartner分析师和Gartner的研究数据和分析团队合作开发的。&lt;/p>
&lt;p>这项研究的结果并不代表全球调查结果或整个市场，而是反映受访者和受访公司的情绪。&lt;/p>
&lt;p>在过去的12个月里，AIOps构成了Gartner客户关于IT性能分析的所有咨询中的40%的谈话内容。这些咨询的主题包括。&lt;/p>
&lt;ul>
&lt;li>技术和市场意识&lt;/li>
&lt;li>平台选择&lt;/li>
&lt;li>构建与购买决策&lt;/li>
&lt;li>现有AIOps部署的优化&lt;/li>
&lt;li>新部署情况下的部署策略&lt;/li>
&lt;li>在DevOps、I&amp;amp;O、安全和SRE团队之间共享一个共同平台的利与弊&lt;/li>
&lt;li>IT内部和外部的多种AIOps使用案例，以帮助可视化、决策和诊断。&lt;/li>
&lt;/ul>
&lt;p>在大流行病中，大多数用例都与事件关联有关。&lt;/p>
&lt;h2 id="注1-代表性供应商选择">注1: 代表性供应商选择&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>本研究中列出的供应商是根据具有以下一个或两个特征而挑选出来的样本。&lt;/p>
&lt;ul>
&lt;li>领域无关的解决方案，能够从多个来源摄取数据，包括历史和实时流。&lt;/li>
&lt;li>以领域为中心的解决方案，能够从特定领域或特定框架或实践的数据中摄取数据（例如，网络、应用、IT基础设施、DevOps或ITSM领域）。&lt;/li>
&lt;li>不同的产品，包括专有的、开源的、免费的和商业化的版本，包括跨越企业内部和基于SaaS的部署方案。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="注2--aiops-平台的数据源">注2: AIOps 平台的数据源&lt;/h2>
&lt;p>AIOps 的数据源包括:&lt;/p>
&lt;ul>
&lt;li>API&lt;/li>
&lt;li>Application logs 应用日志&lt;/li>
&lt;li>CRM 数据&lt;/li>
&lt;li>客户数据&lt;/li>
&lt;li>事件&lt;/li>
&lt;li>图&lt;/li>
&lt;li>ITSM&lt;/li>
&lt;li>元数据&lt;/li>
&lt;li>指标&lt;/li>
&lt;li>社交媒体&lt;/li>
&lt;li>追踪&lt;/li>
&lt;li>布线&lt;/li>
&lt;/ul>
&lt;p>不幸的是，无论一个给定的数据集有多大，更新有多频繁，限制在一个单一的数据源往往会限制对系统行为的洞察力。现代IT系统&amp;ndash;具有模块化和动态性&amp;ndash;需要一个多视角的方法来理解它们在被观察时正在发生什么。&lt;/p>
&lt;h2 id="注-3-领域无关和领域中心的aiops">注 3: 领域无关和领域中心的AIOps&lt;/h2>
&lt;p>**领域无关的AIOps -**供应商以通用的AIOps平台进入市场。这些产品往往主要依靠监控工具来执行数据采集，并迎合最广泛的使用情况。&lt;/p>
&lt;p>**领域中心的AIOps -**供应商拥有核心组件，但是一组有限的使用场景。以他们基本上做着与以前相同的事情，但现在他们用数学（算法）代替了规则、启发式方法和指纹。这些供应商专注于一个领域（例如，网络、端点系统或APM）。然而，以领域为中心的解决方案供应商已经做出了一些努力，将这些类别混合起来，发展到从他们自己的埋点工具以外的来源摄取数据，并将这些数据纳入他们的分析。&lt;/p>
&lt;h2 id="注4-基于规范性建议的自动化行动所面临的挑战">注4: 基于规范性建议的自动化行动所面临的挑战&lt;/h2>
&lt;p>自动化执行行动分为多个类别。&lt;/p>
&lt;ul>
&lt;li>可以提前计划的预定性质的任务（例如，补丁管理或新构建的部署）。&lt;/li>
&lt;li>不能提前计划好的任务，但有已知的触发器，可能会或不可能经常出现。在这种情况下，程序是有据可查的（例如，虚拟化环境中的工作负载优化）。&lt;/li>
&lt;li>具有不可预测的触发器的任务，其行动是众所周知的，但没有很好的文件记录（例如，已知的异常情况）。&lt;/li>
&lt;/ul>
&lt;p>I&amp;amp;O领导通常不希望将行动完全交给机器，并要求在触发自动化之前至少有一个验证步骤。这种缺乏信任是阻碍自动化行动普遍使用的主要障碍之一。&lt;/p>
&lt;p>在这三种自动化行动中，我们看到对第三类行动的兴趣最大；然而，处理这类行动的技术困难是具有挑战性的，因此，到目前为止，它的采用是最小的。&lt;/p>
&lt;h2 id="注5-aiops-作为-it-监控策略的一部分">注5: AIOps 作为 IT 监控策略的一部分&lt;/h2>
&lt;p>Figure 5: AIOps as Part of an IT Monitoring Strategy&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-28-Figure_5_AIOps_as_Part_of_an_IT_Monitoring_Strategy.png"
loading="lazy"
alt="Where AIOps Contributes to a Sample IT Monitoring Strategy"
>&lt;/p>
&lt;h2 id="注-6-可移植性">注 6: 可移植性&lt;/h2>
&lt;p>随着企业采用AIOps的功能模型和质量成果的成熟，供应商转换变得困难。切换到不同的供应商来复制现有的高质量仪表盘将需要时间，这就消除了通过直接成本节约获得的任何价值。Gartner观察到，在部署比较成熟的企业中，正是因为这个原因，才不愿意在续约时更换供应商。&lt;/p>
&lt;p>需要可行的选择来挑战现有的供应商，这就产生了关于跨供应商的算法的可移植性问题。这种需求来自于一些成熟的企业，在这些企业中，AIOps的采用已经很成熟。市场仍处于高速增长阶段，我们至少要在几年后才能看到企业对可移植性的压力增加，以及供应商作为差异化的回应。&lt;/p>
&lt;p>一些供应商正在提出转移学习，这仍然处于初级阶段。在其较简单的形式中，终端用户可以选择通过使用历史数据训练一个选定的模型。该算法的结果与实时结果进行比较。一旦结果显示出相当的准确性和可接受的误差范围，终端用户就可以使用相同的算法来分析实时数据。这种能力在生产前和生产环境之间或在边缘和数据中心环境之间效果最好。更复杂的用例的演变将需要供应商和最终用户方面的成熟和高级技能。&lt;/p></description></item><item><title>探究改变了整个行业的全球开源大潮</title><link>https://martinliu.cn/blog/%E6%8E%A2%E7%A9%B6%E6%94%B9%E5%8F%98%E4%BA%86%E6%95%B4%E4%B8%AA%E8%A1%8C%E4%B8%9A%E7%9A%84%E5%85%A8%E7%90%83%E5%BC%80%E6%BA%90%E5%A4%A7%E6%BD%AE/</link><pubDate>Tue, 27 Apr 2021 09:48:32 +0800</pubDate><guid>https://martinliu.cn/blog/%E6%8E%A2%E7%A9%B6%E6%94%B9%E5%8F%98%E4%BA%86%E6%95%B4%E4%B8%AA%E8%A1%8C%E4%B8%9A%E7%9A%84%E5%85%A8%E7%90%83%E5%BC%80%E6%BA%90%E5%A4%A7%E6%BD%AE/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-27-opensource.jpg" alt="Featured image of post 探究改变了整个行业的全球开源大潮" />&lt;p>开源科普讲座简介：这是给大学校园的老师和同学们定制的免费公益讲座。在最近的20年里，开源软件已经了席卷全球。当今企业应用开源技术和云计算创作着巨大的社会和商业价值，大学生应该怎样了解、学习和参与开源技术？这成了所有相关学科的同学们不可规避的话题。我们想通过这样一个专题讲座交流的形式，帮助大家按照从由来到未来发展的逻辑梳理开源软件技术的发展。结合我（刘征）20年的外企工作经历，帮助大家深度剖析一家典型的来起源于开源社区的公司，通过这个公司的变迁我们可以看到开源企业所能取得的成功和面临的挑战。Elastic Stack 这个技术栈的核心是 Elasticsearch，这是一个被广泛深度应用的开源大数据搜索平台，中国的一线互联网公司的各种流行产品的背后也都有着它的身影，让我们一起简单理解一下这个技术栈的使用方法，希望它能在校园的研究工作、同学的毕业设计项目等等方面有所帮助。本讲座是注重IT知识的非商业宣传讲座，为了有助于增加同学们的就业竞争力，在最后一个是交流互动环节，我们可以做一些就业形势、求职和职业发展等方面的答疑。&lt;/p>
&lt;p>下面是本次交流见过的概要内容介绍，希望能引起大家的兴趣，如果有任何建议和疑问也可以随时和我直接联系。&lt;/p>
&lt;h2 id="开源用20年改变了整个it行业">开源用20年改变了整个IT行业&lt;/h2>
&lt;p>开源方式是在开源社区内进行思考和协作的一种形式。这一理念基于知识自由和核心原则：透明、协作、交付、包容和社区。社区的思想交流和软件开发推动了以下行业的创新、科学和技术进步：教育、政府、法律、医疗保健和制造业。这项活动提供了一种通过源代码协作、共享和协助实现个人及团体目标的方式。&lt;/p>
&lt;p>开源软件是协作性的，依靠社区生产和同行评审来使用、更改和共享源代码。开发人员分享洞察、构想和代码，共同和单独创建更多创新的软件解决方案。这种可扩展且灵活的软件可确保任何拥有源代码的人都能将其修改、增强和重新分发，从而提高可复用性和可访问性。开源软件基于对等生产和大规模协作的基本原则，从而为最终用户创造更可持续的软件开发体验。&lt;/p>
&lt;p>封源软件 (CSS) 是不向公众分发的专有软件。这类软件进行了加密，因此仅创建该代码的原始作者有权合法复制、修改、更新和编辑源代码。闭源软件会限制最终用户对应用可以执行的操作，防止用户修改、共享、复制或重新发布源代码。&lt;/p>
&lt;p>除了开源和闭源软件之外，FOSS（自由和开源软件）允许用户从更有哲理的角度访问软件。在自由和开源软件中，自由软件基金会 (FSF) 保护用户自由，开源促进会 (OSI) 确保可靠软件的技术价值。有各种各样的免费软件许可证，可供商业使用、修改和销售，包括：GPL、LGPL 和 BSD 许可证。&lt;/p>
&lt;p>一些最受欢迎的开源软件许可证包括：&lt;/p>
&lt;ul>
&lt;li>MIT 许可证©：MIT 许可证是一种免费的软件许可证，允许用户修改原始代码，而且限制要求非常少。&lt;/li>
&lt;li>GNU General Public© (GPL)：GNU 是一系列免费的软件许可证，可确保最终用户能够运行、研究、共享和修改软件。&lt;/li>
&lt;li>Apache®：Apache License 2.0 是一种免费的软件许可证，允许用户出于任何目的使用、修改和分发软件。&lt;/li>
&lt;li>BSD：此许可证对开发人员的限制较少，允许用户使用和修改代码而不必共享修改。&lt;/li>
&lt;li>MySQL™：MySQL 是一个开源数据库管理系统，具有两个单独的许可证 - mySQL Standard Edition 和 MySQL Enterprise Edition。&lt;/li>
&lt;li>SUSE：SUSE Linux 建立在开源 Linux 内核上，并随系统和应用软件一起分发。&lt;/li>
&lt;li>Ubuntu®：Ubuntu 是一个 Linux 发行版，由在桌面、云端和物联网中发布的免费和开源软件组成。&lt;/li>
&lt;/ul>
&lt;p>开源软件大事记：&lt;/p>
&lt;ol>
&lt;li>在 1969 年 AT&amp;amp;T® 贝尔实验室，Unix 做为一种专有但可许可的产品诞生。很快加州大学伯克利分校开发了自己的 Unix 操作系统，名为 Berkley Software Distribution（BSD 许可证）的学术版本。BSD 和 AT&amp;amp;T 的 System V 版最终合并成为统一的第七版 Unix，然后进一步演进为：Sun Solaris、FreeBSD、NetBSD 和 OpenBSD。&lt;/li>
&lt;li>1984 年，Richard Stallman 创建了一个名为 GNU (GNU&amp;rsquo;s Not Unix) 的自由 Unix 克隆。此版本是开放的，可根据需要自由使用、修改和重新分发。Richard Stallman 是 Open Source 界的伟大人物之一, 他是gcc, gdb, emacs的作者。&lt;/li>
&lt;li>1991 年，Linus Torvalds 创建了名为“Linux”或 Linux 内核的操作系统内核。通过与 FSF 和 BSD 组件相结合，Linux 成为一个完整的操作系统。Linux 正式踏上了颠覆整个 IT 行业和改造这个世界的使命，知道今天无不知，无人不晓的云计算和智能硬件，知道工业物联网和火星登录计划。&lt;/li>
&lt;/ol>
&lt;h2 id="市值过百亿的-elastic-公司曲折的开源旅程">市值过百亿的 Elastic 公司曲折的开源旅程&lt;/h2>
&lt;p>Elastic 公司的开源故事起源于创始人 Shay 和妻子的菜谱的故事。现在 Elastic 是一家员工进 2000 人的上市公司，它帮助企业实时大规模地使用数据，完成企业搜索，确保可观测性和安全。Elastic 解决方案基于一个免费的开放技术栈。该技术栈可以部署在任何地方，帮助用户从任何类型的数据中快速获取可作为行动依据的洞见，从搜索文档一直到监控基础架构，再到检测网络攻击威胁。全球各地已有数千家企业利用Elastic 解决方案来支持关键任务系统，包括思科、Goldman Sachs、微软、The Mayo Clinic、NASA、《纽约时报》、维基百科和Verizon等等。Elastic 成立于2012年，已在纽约证券交易所（NYSE）上市，股票代码为ESTC。今天它的股票市值已经超过百亿，从开源开放，到免费开放；从 Appache v2 许可到 Elastic V2 + SSPL 许可，在最近短短的 3 年里到底这家公司都经历了什么？这家公司的开源历程能给予我们怎样的启发？&lt;/p>
&lt;h2 id="轻松入手-elastic-stack-搜索技术栈">轻松入手 Elastic Stack 搜索技术栈&lt;/h2>
&lt;p>Elastic Stack 技术栈包含了一组开源项目。 “ELK”是三个重要组成开源项目的首字母缩写，这三个项目分别是：Elasticsearch、Logstash 和 Kibana。Elasticsearch 是一个搜索和分析引擎。Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等“存储库”中。Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。&lt;/p>
&lt;p>&lt;img src="https://www.elastic.co/static-res/images/elk/elk-stack-elkb-diagram.svg"
loading="lazy"
>&lt;/p>
&lt;p>Elastic Stack 就是 ELK Stack，但是更加灵活，可以帮助人们出色完成各项事务。下面我们演示一下内容：&lt;/p>
&lt;ol>
&lt;li>Elasticsearch 和 Kibana 的安装&lt;/li>
&lt;li>使用 Kibana 可视化分析和展示航公公司航班信息、电商平台订单和Web 网络服务器的日志。&lt;/li>
&lt;li>导入最近几年的电影数据，尝试从多个角度分析和展示这些数据&lt;/li>
&lt;/ol>
&lt;h2 id="开源及就业答疑">开源及就业答疑&lt;/h2>
&lt;p>在这个环节里，我们也准备了一些求职准备的经验技巧。&lt;/p>
&lt;ul>
&lt;li>软件专业学生如何构建无敌求职简历&lt;/li>
&lt;li>软件行业里工作岗位的分工和配合&lt;/li>
&lt;li>在 996 和 007 的企业中工作是怎样的体验&lt;/li>
&lt;/ul>
&lt;p>最后，希望和同学们做自由交流，内容范围和问题不限。&lt;/p>
&lt;p>参考文档：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.ibm.com/cn-zh/topics/open-source" target="_blank" rel="noopener"
>https://www.ibm.com/cn-zh/topics/open-source&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.elastic.co/cn/" target="_blank" rel="noopener"
>https://www.elastic.co/cn/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.elastic.co/cn/what-is/elk-stack" target="_blank" rel="noopener"
>https://www.elastic.co/cn/what-is/elk-stack&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ld.sogou.com/article/i5634372.htm?ch=lds.pc.sh.media.all" target="_blank" rel="noopener"
>https://ld.sogou.com/article/i5634372.htm?ch=lds.pc.sh.media.all&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.163.com/dy/article/G0NG79CD0543QP26.html" target="_blank" rel="noopener"
>https://www.163.com/dy/article/G0NG79CD0543QP26.html&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>对不起Scrum，你的游戏可能已经结束了!</title><link>https://martinliu.cn/blog/%E5%AF%B9%E4%B8%8D%E8%B5%B7scrum%E4%BD%A0%E7%9A%84%E6%B8%B8%E6%88%8F%E5%8F%AF%E8%83%BD%E5%B7%B2%E7%BB%8F%E7%BB%93%E6%9D%9F%E4%BA%86/</link><pubDate>Sat, 10 Apr 2021 22:21:29 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%AF%B9%E4%B8%8D%E8%B5%B7scrum%E4%BD%A0%E7%9A%84%E6%B8%B8%E6%88%8F%E5%8F%AF%E8%83%BD%E5%B7%B2%E7%BB%8F%E7%BB%93%E6%9D%9F%E4%BA%86/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-10-0_IFV2UEaD1Vj4S_to.jpg" alt="Featured image of post 对不起Scrum，你的游戏可能已经结束了!" />&lt;p>我们不可能忽视 Scrum 的知名度。多年来，Scrum 是全球大多数公司在敏捷框架中的首选；只有少数公司会挑战它。但最近，发生了一些变化，组织正在失去对Scrum的信任。在未能获得有意义的结果之后，在许多地方，人们正在用 SAFe、Kanban 或其他框架取代 Scrum。&lt;/p>
&lt;p>除了这些不满 Scrum 的组织，有些经验丰富的专业人士也不愿意与Scrum共舞。很多人甚至觉得被称为产品经理（Product Owner）或 Scrum Master 都很尴尬。市场正在向新的方向转变，Scrum还会有空间吗？&lt;/p>
&lt;blockquote>
&lt;p>公司想做敏捷，但他们难以放弃旧的指令和管控风格。&lt;/p>
&lt;/blockquote>
&lt;p>让我来阐述一下，为什么我认为 Scrum 的游戏可能已经结束了。
&lt;em>请注意 这篇文章的内容是基于我过去十年的经验和观察。这也是为什么我邀请你也分享你的观点。&lt;/em>&lt;/p>
&lt;h2 id="作者">作者&lt;/h2>
&lt;p>本文出处：https://medium.com/serious-scrum/sorry-scrum-the-game-might-be-over-for-you-915227f3a0d&lt;/p>
&lt;p>作者：&lt;a class="link" href="https://medium.com/@davidavpereira?source=post_sidebar--------------------------post_sidebar-----------" target="_blank" rel="noopener"
>David Pereira&lt;/a> Head of Product Management @virtualidentity Course: How to be a strong Product Owner: &lt;a class="link" href="http://bit.ly/30ylNEH" target="_blank" rel="noopener"
>http://bit.ly/30ylNEH&lt;/a>&lt;/p>
&lt;h2 id="scrum不是一个流程">Scrum不是一个流程!&lt;/h2>
&lt;p>第一个软件是在1948年才出现的，那时候软件开发还是个新鲜事物。我猜汤姆-基尔本无法想象软件开发会给世界带来多么快的进步。&lt;/p>
&lt;blockquote>
&lt;p>计算机科学家汤姆-基尔本负责编写了世界上第一个软件，该软件于1948年6月21日上午11时在英国曼彻斯特大学运行。&lt;em>—&lt;/em>&lt;/p>
&lt;p>&lt;a class="link" href="https://medium.com/u/ec2848c0389?source=post_page-----915227f3a0d--------------------------------" target="_blank" rel="noopener"
>Micah Yost&lt;/a>&lt;em>,&lt;/em> &lt;a class="link" href="https://medium.com/@micahyost/a-brief-history-of-software-development-f67a6e6ddae0" target="_blank" rel="noopener"
>A Brief History of Software Development&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>在新千禧年之前，公司缺乏符合客户期望的技术。大多数公司专注于围绕软件开发改进流程。尽管所有的努力都是为了实施像 &lt;a class="link" href="https://en.wikipedia.org/wiki/Rational_Unified_Process" target="_blank" rel="noopener"
>Rational Unified Process &lt;/a>统一流程这样的重磅流程，但质量还是有问题，客户也还是不满意。构建无用的软件让许多人感到沮丧；软件行业需要一场革命。&lt;/p>
&lt;p>虽然像 &lt;a class="link" href="https://warren2lynch.medium.com/the-brief-of-history-of-scrum-15efb73b4701" target="_blank" rel="noopener"
>Scrum&lt;/a> 和 &lt;a class="link" href="https://en.wikipedia.org/wiki/Extreme_programming" target="_blank" rel="noopener"
>e&lt;strong>X&lt;/strong>treme &lt;strong>P&lt;/strong>rogramming&lt;/a> 这样的敏捷框架已经存在许久，但在2001年《敏捷宣言》-（&lt;a class="link" href="https://agilemanifesto.org/" target="_blank" rel="noopener"
>Agile Manifesto &lt;/a>）出台后，才大大改变了全球软件的开发方式。在那之后，Scrum框架成为最受欢迎的替代品。&lt;/p>
&lt;p>从千禧年的初期情况来看，Scrum 能解决软件开发的所有问题吗？我们必须去了解问题的根本原因，但很多公司忽略了这一步，反而求助于寻找新的流程。仅仅依靠替换人们工作方式的流程是不够的。这就是大多数组织未能从Scrum 中获益的原因。&lt;/p>
&lt;blockquote>
&lt;p>根本原因不是流程，而是缺乏敏捷的思维方式。&lt;/p>
&lt;/blockquote>
&lt;p>我们以足球为例，在瓜迪奥拉(Pep Guardiola)的领导下，巴塞罗那在4年内赢得了14个冠军。从2008年到2012年，巴塞罗那绝对是世界上最强的足球队。很多人将成功归功于瓜迪奥拉执教球队的方式。其中一个显著的方面是主导比赛；巴塞罗那经常拥有70%以上的控球率。这是否意味着将 &lt;a class="link" href="https://en.wikipedia.org/wiki/Tiki-taka" target="_blank" rel="noopener"
>&amp;ldquo;Tiki Taka &amp;ldquo;&lt;/a> 运用到另外一支球队后，他们就能达到类似的效果呢？&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-10-1_0UHTWnUk-eJ16jd7vGqPXw.png"
loading="lazy"
>&lt;/p>
&lt;p>瓜迪奥拉从2013年到2016年执教拜仁慕尼黑，他应用了和巴塞罗那一样的风格。然而，所取得的成功与巴萨不相上下；在拜仁慕尼黑，他获得了5个国家冠军，却没有获得欧冠冠军。要想实现伟大的成就，仅仅靠一个‘流程’是不够的，还需要其它更多的东西。&lt;/p>
&lt;p>把Scrum当做流程的公司都失败了。如果还没有更重大的改变，任何敏捷框架都无法带领团队走向成功。除非公司解决了他们的组织型障碍（dysfunctions），否则环境不会让团队发挥的更出色。&lt;/p>
&lt;p>我观察过很多虚弱无力的 Scrum 团队，因为环境的组织型障碍。最常见的组织障碍是。&lt;/p>
&lt;ul>
&lt;li>缺乏信任&lt;/li>
&lt;li>缺少方向&lt;/li>
&lt;li>根据职位确定优先次序&lt;/li>
&lt;li>微观管理（micromanagement）&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>对于这些有组织型障碍的公司来说，Scrum应用失效是不可避免的。最后，Scrum还要背这个锅。&lt;/p>
&lt;/blockquote>
&lt;p>Scrum 框架并不适合畏惧改变的组织。不改变其文化，就不可能用 Scrum 取得成功。许多人对 Scrum 的角色、事件和工件了如指掌，但很少有人知道背后的价值观。如果不活用 Scrum 背后的价值观，就不可能实现 Scrum 的承诺。&lt;/p>
&lt;h2 id="为什么scrum即将崩塌">为什么Scrum即将崩塌？&lt;/h2>
&lt;p>Scrum 自称简单易行，其实很难掌握。几乎我认识的每个人都同意这句话，然而，我要质疑 Scrum 有多简单。框架的一个关键部分经常被忽略，试着问一些团队的价值观是什么？你会惊讶的发现，几乎没有人知道。不过，价值观仍然是 Scrum 的一个关键部分。&lt;/p>
&lt;blockquote>
&lt;p>Scrum 的成功使用取决于人们是否能更熟练地运用这五种价值观。
&lt;strong>承诺、专注、开放、尊重和勇气。&lt;/strong>&lt;/p>
&lt;p>&lt;em>—&lt;/em> &lt;a class="link" href="https://www.scrumguides.org/scrum-guide.html" target="_blank" rel="noopener"
>The Scrum Guide&lt;/a>&lt;em>, November 2020&lt;/em>&lt;/p>
&lt;/blockquote>
&lt;p>当组织把 Scrum 当作一个流程来实施时，挫折是不可避免的。从设计上看，Scrum 是不完整的，没有一个团队能够在不适应其场景的情况下取得成功。例如，产品管理并不是 Scrum 的一部分，然而，它却是交付有意义产品的关键学科。&lt;/p>
&lt;p>要想利用 Scrum 获得成功，组织必须经历一场大规模的转型。不幸的是，大多数高管都不愿意去准备一个能让团队茁壮成长的环境。我在企业中遇到过以下几种范式。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>赋权 vs. 微观管理&lt;/p>
&lt;/li>
&lt;li>
&lt;p>成果 vs. 产出&lt;/p>
&lt;/li>
&lt;li>
&lt;p>协调/对齐 vs. 共识&lt;/p>
&lt;/li>
&lt;li>
&lt;p>承担风险 vs. 遵循计划&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&amp;ldquo;高层管理者们认为，拥有真正自我管理的团队风险太大。这就是为什么 Scrum 会遇到玻璃天花板的原因。&amp;rdquo;
&lt;em>—&lt;/em> &lt;a class="link" href="https://medium.com/u/a55fee07a2c4?source=post_page-----915227f3a0d--------------------------------" target="_blank" rel="noopener"
>&lt;em>Willem-Jan Ageling&lt;/em>&lt;/a>&lt;em>,&lt;/em> &lt;a class="link" href="https://medium.com/serious-scrum/scrum-has-hit-the-glass-ceiling-3610bb978b1d" target="_blank" rel="noopener"
>&lt;em>Scrum Has Hit the Glass Ceiling&lt;/em>&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>高层管理人员们往往无法充分给个人授权，因为他们想继续自己的控制。所以他们才会走捷径。首先，改变执行力。然后，如果 Scrum 证明了它的价值，那再来改变文化。好吧，这样做是行不通的，结果是大家都很沮丧。当Scrum 变成了一个过场（译者注：此处突出一下形同虚设的空架子流程的含义，请酌情理解），角色就会变异成毫无意义的东西。让我来分享一下我的一些心得。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-10-0-vZwKs-yTiUrjsf1F.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>Photo by &lt;a class="link" href="https://unsplash.com/@miteneva?utm_source=medium&amp;amp;utm_medium=referral" target="_blank" rel="noopener"
>Maria Teneva&lt;/a> on &lt;a class="link" href="https://unsplash.com/?utm_source=medium&amp;amp;utm_medium=referral" target="_blank" rel="noopener"
>Unsplash&lt;/a>&lt;/p>
&lt;h2 id="产品负责人经理product-owner">产品负责人/经理（Product owner）&lt;/h2>
&lt;p>如果不能对优先级负责，产品负责人就会像服务员一样。他们接受订单，建议配菜，然后把订单交给厨房。做一个接单员是令人沮丧的，你唯一的义务是管理利益相关者的期望，并用做和开发人员沟通的桥梁。&lt;/p>
&lt;p>不幸的是，与产品负责人角色的变异更多的是规则而不是例外。这就是为什么我在想，是否有人可以成为 Scrum产品负责人。当我回顾我的职业生涯时，也许我曾经就差点变成这样的人，但从来没有像 Scrum 指南所推荐的那样，被完全的授权过。我的问题是：Scrum产品负责人在现实的企业中存在吗？&lt;/p>
&lt;blockquote>
&lt;p>你能举出多少家公司的产品负责人真正的完全拥有产品决策的最终决定权？如果他们没有最终决定权，这些人还是产品负责人吗？然而，有成千上万的人声称自己是产品所有者，却不拥有任何产品。&lt;em>—&lt;/em>&lt;/p>
&lt;p>&lt;a class="link" href="https://medium.com/u/b40569a4ce51?source=post_page-----915227f3a0d--------------------------------" target="_blank" rel="noopener"
>Maarten Dalmijn&lt;/a> &lt;em>,&lt;/em> &lt;a class="link" href="https://medium.com/serious-scrum/will-the-real-product-owner-please-stand-up-951917cf7b18" target="_blank" rel="noopener"
>Will the real Product Owner please stand up?&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>在反模式之上，我注意到很多有产品思维的人对产品负责人这个角色失去了兴趣。他们觉得很难把它和产品经理联系起来。虽然公司经常雇佣产品负责人，但由于 Marty Cagan 所推崇的看法，很多专业人士都不好意思这样称呼，他声称产品负责人不是一份工作，而是一个角色，而且这份工作比 Scrum 所建议的要多得多。&lt;/p>
&lt;h2 id="开发人员">开发人员&lt;/h2>
&lt;p>开发者是决定实际如何开展工作的人，他们负责实现，使用哪种技术栈，等等。这是一个美丽的幻觉（理论）。但在实践中，我从未见过这种情况。常见的是有一个首席技术官（CTO），一个技术负责人，或者其他头衔的什么人，他们不仅要来做决策，还要管理开发者。&lt;/p>
&lt;p>Scrum 所宣称的开发者有自主权，但他们得到了吗？我认为自主的情况很少见。说起来也很悲哀，但大多数开发者所收到的命令都是要遵守的；只是很少有开发者被授权在没有截止日期的情况下解决问题。&lt;/p>
&lt;blockquote>
&lt;p>Scrum 开发者在幻想世界中可能会和 Scrum产品所有者工作在一起，但在现实中却不是。我们最常见的是开发者被封印在了特性工厂里。&lt;/p>
&lt;/blockquote>
&lt;h2 id="scrum-master">Scrum Master&lt;/h2>
&lt;p>Scrum Master 是 Scrum 中最遭受鄙视的角色。没有 Scrum Master 的 Scrum 团队是很常见的，因为公司不愿意雇佣专人来做这个工作。不过，即便有些公司雇佣了 Scrum Master ，但还是会经常让他们虚弱无力。&lt;/p>
&lt;blockquote>
&lt;p>Scrum Master 的失效无法避免，因为他们也不能催生出任何必需的改变，能让 Scrum 蓬勃发展起来。&lt;/p>
&lt;/blockquote>
&lt;p>Scrum Master 和其他角色也没有什么不同。要找到一个人，他能够完全像Scrum指南中所建议的那样，成为真正的 Scrum Master 是不太可能的。Scrum Master 通常无力促进组织中所需要的变化。&lt;/p>
&lt;p>##Scrum 还会活下去吗？&lt;/p>
&lt;p>许多有经验的专业人士已经厌倦了 Scrum，他们对它失去了信心。他们想要一些其他的东西，这些专业人士正在寻找机会尝试其它的框架。&lt;/p>
&lt;p>高管们对变革的恐惧阻碍了 Scrum 团队的发展。一连串错误的决定和错误的观念可能会导致 Scrum 走向灭亡。高层管理者不能将其先天不足的指令和管控风格留在过去。&lt;/p>
&lt;blockquote>
&lt;p>一个可悲的结果可能就会发生，SAFe，这个瀑布模型的卧槽马，它已经准备好要上位了。&lt;/p>
&lt;/blockquote>
&lt;p>我很害怕 SAFe，因为它是一个沉重的流程，它看起来一点也不像是一个敏捷的方法。这台沉重的机器怎么能让人背得滚瓜烂熟呢？我真不知道他们凭什么敢说这也是敏捷。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-10-0_Zm_LEQK00gf_arR-.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.scaledagileframework.com/" target="_blank" rel="noopener"
>SAFe 5.0&lt;/a>&lt;/p>
&lt;h2 id="scrum可能需要重启才能活下来">Scrum可能需要重启才能活下来&lt;/h2>
&lt;p>Scrum 角色的魅力已经大不如前。很多公司对 Scrum 的错误认知，导致专业人士抵触与之合作。在 Scrum 成为一个流程的场景下，人们也不想成为 Scrum Master 或产品所有者。&lt;/p>
&lt;p>&lt;strong>我相信 Scrum 需要重新开始才能保持存在的意义。&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>我们所处的时代与20年前不同。在2001年，Scrum 是一个新生的孩子。世界已经改变了。现在 Scrum 是一种商品。为了让 Scrum 还维持在前线，创造者们需要有勇气去接受框架的核心，并解决那些阻碍。其中一些（可能的）阻碍可能是人家的血牛。想想（Scrum Master 和 Product Owner）认证产业。&lt;/p>
&lt;p>&lt;em>—&lt;/em> &lt;a class="link" href="https://medium.com/u/a55fee07a2c4?source=post_page-----915227f3a0d--------------------------------" target="_blank" rel="noopener"
>Willem-Jan Ageling&lt;/a>&lt;em>,&lt;/em> &lt;a class="link" href="https://medium.com/serious-scrum/will-scrum-fall-victim-to-its-own-success-7cc488dea09b" target="_blank" rel="noopener"
>Will Scrum Fall Victim to Its Own Success?&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>不管发生了什么，那些勇于改变自己内核的公司还是能在 Scrum 中脱颖而出。这从来都不是为了定义一个流程，而是为了拥有一种专注于更快地交付价值的文化。希望尚在，一些大胆的公司能拥抱变化，他们所表现出的迹象是。&lt;/p>
&lt;ul>
&lt;li>首席产品官（Chief Product Officer）成了高管团队的成员。&lt;/li>
&lt;li>高层管理人员专注于给出方向而不是指令。&lt;/li>
&lt;li>Scrum团队被授权去试验各种用来达成关键成果的方案。&lt;/li>
&lt;li>产品探索（Product Discovery）的建立。高管们知道，投入适当的时间去发现那些值得解决的问题是必不可少的工作。&lt;/li>
&lt;/ul></description></item><item><title>10 分钟读懂 DevOps 工具链</title><link>https://martinliu.cn/blog/10-%E5%88%86%E9%92%9F%E8%AF%BB%E6%87%82-devops-%E5%B7%A5%E5%85%B7%E9%93%BE/</link><pubDate>Fri, 02 Apr 2021 22:34:09 +0800</pubDate><guid>https://martinliu.cn/blog/10-%E5%88%86%E9%92%9F%E8%AF%BB%E6%87%82-devops-%E5%B7%A5%E5%85%B7%E9%93%BE/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-03-eggs-3216877_1920.jpeg" alt="Featured image of post 10 分钟读懂 DevOps 工具链" />&lt;p>【译文】上周，我和我的几位非常资深的同事都在评论说，有很多新的DevOps工具正在出现，而且每天都越来越难跟踪它们，以及它们在DevOps 领域的定位。我问了他们几个工具，Ansible、Terraform、Salt、Chef、Bamboo、CloudFormation这些工具的定位在哪里？我为什么要用这个而不是那个？它们甚至是同一种东西吗？我是不是漏掉了一个主要角色？我得到了什么，一些白眼和问题。所以，我想我会做一些研究，阅读，并试图让我们所有人理解它，以便我们可以将那些产品都分类到我们都熟悉的类别或用途。&lt;/p>
&lt;p>原文：&lt;a class="link" href="https://levelup.gitconnected.com/the-10-minute-read-to-understanding-devops-tools-bc4ac807a25d" target="_blank" rel="noopener"
>https://levelup.gitconnected.com/the-10-minute-read-to-understanding-devops-tools-bc4ac807a25d&lt;/a>&lt;/p>
&lt;p>在我们开始谈论DevOps工具和类别之前，让我们退一步讨论几个基本的（但往往是超载的）术语以及它们的含义。&lt;/p>
&lt;p>&lt;strong>计算机/服务器&lt;/strong> - &lt;strong>Computer/Server&lt;/strong>： 具有中央处理器（CPU）、内存（RAM）、本地存储（磁盘）并运行操作系统的物理设备。&lt;/p>
&lt;p>&lt;strong>虚拟机&lt;/strong> - &lt;strong>Virtual Machine&lt;/strong>：在主机上运行的计算机系统的模拟器（虚拟机管理程序）；vm 通常可以在CPU、内存和磁盘使用方面与其他操作系统隔离。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-02-0-cuHFPvnmr141Dfcc.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>容器&lt;/strong>&amp;ndash;&lt;strong>Containers&lt;/strong>：打包一个软件及其所有依赖，使其能够在任何基础设施上统一、一致地运行。Docker容器是最流行的。它们允许你打包一堆东西（你的软件、配置和其他软件），以便于部署和传输。你可以把容器看作是虚拟化的下一代进化（继虚拟机之后）。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-02-0-hWRNCynYRFw2KCxn.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>网络设备&lt;/strong> - &lt;strong>Network Device&lt;/strong>：在设备之间路由网络流量的硬件。例如路由器、负载平衡器和防火墙。&lt;/p>
&lt;p>&lt;strong>软件&lt;/strong> - &lt;strong>Software&lt;/strong>：编码并在操作系统上运行的代码。&lt;/p>
&lt;p>&lt;strong>DevOps&lt;/strong> - 传统上有 &amp;ldquo;开发&amp;rdquo;（你来构建它），还有 &amp;ldquo;运维&amp;rdquo;（我们将运行它），他们两者之间的一切都受制于作坊式的工作方式。从2010年左右开始，到2018年左右DevOps 已经发展为几乎无处不在的现象，DevOps的理念是：&amp;ldquo;一套实践，目的是在保证高质量的前提下，缩短从提交系统变更到变更投入正常生产环境之间的时间&amp;rdquo;。&lt;/p>
&lt;p>当你在考虑构建和运行一个非同寻常的系统时，其实还有很多不得不做的事情。以下是需要考虑到的传统的事项清单。&lt;/p>
&lt;ol>
&lt;li>获取计算机/服务器硬件 （Obtaining the computer/server hardware）&lt;/li>
&lt;li>配置计算机/服务器硬件（操作系统、网络布线等）（Configuring the computer/server hardware (operating systems, network wiring, etc.)）&lt;/li>
&lt;li>监控计算机/服务器硬件（Monitoring the computer/server hardware）&lt;/li>
&lt;li>获取网络设备（负载均衡器、防火墙、路由器等）（Obtaining the network devices (load balancers, firewalls, routers, etc.)）&lt;/li>
&lt;li>配置网络设备（Configuring the network devices）&lt;/li>
&lt;li>监控网络设备（Monitoring the network devices）&lt;/li>
&lt;li>编写软件（Constructing the software）&lt;/li>
&lt;li>构建软件（Building the software）&lt;/li>
&lt;li>测试软件（Testing the software）&lt;/li>
&lt;li>软件打包（Packaging the software）&lt;/li>
&lt;li>部署/发布软件（Deploying/releasing the software）&lt;/li>
&lt;li>监测软件（Monitoring the software）&lt;/li>
&lt;/ol>
&lt;p>在DevOps之前，我们曾经有四个不同的团队在做这项工作。&lt;/p>
&lt;ul>
&lt;li>Developer 开发人员 — 他们会做 #7, #8 ，有时候包括 #10&lt;/li>
&lt;li>QA 测试人员— 他们会做 #9 ，有时候包括 #11&lt;/li>
&lt;li>System Administrator 系统管理员 — 他们会做 #1, #2, #3, #12&lt;/li>
&lt;li>Network Administrator 网络管理员 — 他们会做 #4, #5, #6&lt;/li>
&lt;/ul>
&lt;p>对于硬件、网络设备和软件的配置，每个团队很可能会使用自己的一套脚本和工具，而且在很多情况下，会通过手工操作来实现 &amp;ldquo;软件发布&amp;rdquo;。&lt;/p>
&lt;p>随着DevOps的出现，对我来说，关键的想法是打破这些部门墙，让每个人都成为 &amp;ldquo;一个 &amp;quot; 团队的一部分，为所有事物的配置、部署和管理方式带来一致性。&lt;/p>
&lt;p>&lt;strong>云&lt;/strong>&amp;ndash;&lt;strong>Cloud&lt;/strong>：定义信息技术史上最流行的名词是很难的，但我喜欢那件T恤，上面写着 &amp;ldquo;没有云，只是别人的电脑&amp;rdquo;。最初，当云服务开始的时候，它们真的只是别人的电脑（或者运行在电脑上的虚拟机），或者存储。随着时间的推移，它们已经演变成到了现在的状态，包含很多很多的增值服务。硬件大部分已经被抽象掉了，现在大多数云服务中，你不能购买它们的硬件设备，但你可以购买这些硬件设备所提供的各种云服务。&lt;/p>
&lt;p>&lt;strong>基础架构即代码&lt;/strong>(&lt;strong>IAC&lt;/strong>)&amp;ndash;：一种新的能力或概念，它允许我们通过定义或配置文件来完整的定义数据中心中所有项目的设置，包括虚拟机、容器和网络设备。这个概念是我可以创建一些配置和一些脚本，然后使用我们即将讨论的一个工具来运行它们，它们会自动为我们按需配制出数据中心的所有服务。CI/CD是IAC的前身，多年来我们一直致力于自动化我们的构建/测试/集成/部署周期，在我们的云基础设施上做这个工作是一个自然的延伸。这带来了成本的降低，更快的上市时间，以及更小的风险（人为错误）。&lt;/p>
&lt;p>随着IAC的出现，许多传统的开发工具现在可以用于管理基础设施。像软件仓库、构建工具、CI/CD、代码分析器和测试工具等类别的工具（如下所列），传统上是由软件开发人员使用的，现在可以被DevOps工程师用来构建和维护基础设施。&lt;/p>
&lt;blockquote>
&lt;p>AGAIN: &amp;ldquo;随着DevOps的出现，对我来说，关键的理念是&amp;hellip;&amp;hellip;让每个人都成为&amp;rsquo;一个&amp;rsquo;团队的一部分，为所有事物的配置、部署和管理方式带来一致性。&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>因此，现在我们已经定义了以上基础术语/概念，让我回到试图对DevOps工具进行分类的任务，以使我们更容易确定什么工具是用于什么目的的。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>软件仓库&lt;/strong> &amp;ndash; 管理软件版本的工具&amp;ndash;目前使用最广泛的是Git。&lt;/li>
&lt;li>&lt;strong>构建工具&lt;/strong>&amp;ndash;有些软件在打包或使用前需要编译，传统的构建工具包括Make、Ant、Maven和MSBuild。&lt;/li>
&lt;li>&lt;strong>持续集成工具&lt;/strong>&amp;ndash;在配置好以后，每次将代码提交到存储库中时，它都会对软件进行构建、部署和测试。这通常可以提高软件质量和上市时间。这个市场上最流行的工具是 Jenkins、Travis、TeamCity和Bamboo。&lt;/li>
&lt;li>&lt;strong>代码分析/审查工具&lt;/strong>&amp;ndash;这些工具可以查找代码中的错误，检查代码格式和质量，以及测试覆盖率。这些工具因编程语言而异。SonarQube是这个领域的一个流行工具，还有其他各种 &amp;ldquo;轻量的 &amp;ldquo;工具。&lt;/li>
&lt;li>&lt;strong>配置管理&lt;/strong>&amp;ndash;配置管理工具和数据库通常存储所有关于你的硬件和软件项目的信息，以及提供一个脚本和/或模板系统，用于自动化常见任务。在这个领域似乎有很多玩家。传统的玩家是Chef、Puppet和Salt Stack。&lt;/li>
&lt;li>&lt;strong>部署工具&lt;/strong>&amp;ndash;这些工具有助于软件的部署。许多CI工具也是CD（持续部署）工具，它们协助软件的部署。传统上在Ruby语言中，Capistrano工具被广泛使用；在Java语言中，Maven被很多人使用。所有的编排工具也都支持某种形式的部署。&lt;/li>
&lt;li>&lt;strong>编排工具&lt;/strong>&amp;ndash;这些工具配置、调度和管理计算机系统和软件。它们通常将 &amp;ldquo;自动化 &amp;ldquo;和 &amp;ldquo;工作流 &amp;ldquo;作为其服务的一部分。Kubernetes是一个非常流行的编排工具，它专注于容器。Terraform是一个非常流行的编排工具，它的关注点更广，包括云编排。另外，每个云提供商都有自己的一套工具（CloudFormation、GCP Deployment Manager, 和ARM）。&lt;/li>
&lt;li>&lt;strong>监控工具&lt;/strong> - 这些工具允许监控硬件和软件。通常，它们包括监控代理程序，用于监视进程和日志文件，以确保系统的健康。Nagios是一种流行的监控工具。&lt;/li>
&lt;li>&lt;strong>测试工具&lt;/strong> - 测试工具用于管理测试，以及测试自动化，包括性能和负载测试等。&lt;/li>
&lt;/ul>
&lt;p>当然，和其他任何一套产品一样，类别也不一定完全清晰。许多工具都是跨类别的，并提供两个或多个类别的功能。下面是我试图展示大多数非常流行的工具，并可视化它们在这些类别中的位置。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-02-1-wTp-r9QJvF-DXGZDZUHmbA.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>正如你所看到的，有几个玩家，如Ansible、Terraform和云工具(AWS、GCP和Azure)，正试图通过他们的产品覆盖部署、配置管理和编排类别。老牌工具集Puppet、Chef和Salt Stack专注于配置管理和自动化，但已经扩展到编排和部署的。还有像GitLab和Azure DevOps这样的工具，几乎试图跨越DevOps的所有类别。&lt;/p>
&lt;p>我希望这个概述能帮助你了解DevOps的基础知识，可用工具的类别，以及目前市场上的各种产品如何在这些类别中的一个或多个类别中提供帮助。在Solution Street，多年来我们已经使用了许多这样的工具，对我们来说，没有一个单一的 &amp;ldquo;一招鲜 &amp;ldquo;的工具能胜任所有情况下使用。使用什么是基于所使用的技术，在哪里托管（以及未来可能在哪里托管），以及团队的人才和构成。&lt;/p>
&lt;blockquote>
&lt;p>教练观点：敏捷教练不能回避DevOps 工具链的话题，中低层管理人员更应该在宏观上深刻理解 SLDC 所有环节的技术概要和工具需求，需要具备基础的概念知识，具备和工程师讨论所必备的语言。工程师们更要有工具链整体优化的意识，而不仅仅是精通某个环节，或局限在与自己的上下游工具上，工作在这个系统中的所有人需要有全局协作和优化的意识，优化价值流的流量、流速，关注价值的产生。警惕&amp;mdash;-整个工具链的自动化程度越高，不一定工作效率越高，加班越少，公司盈利越多。它们其实是相互作用的。&lt;/p>
&lt;/blockquote></description></item><item><title>可汗学院如何在一周内成功处理2.5倍的流量？</title><link>https://martinliu.cn/blog/%E5%8F%AF%E6%B1%97%E5%AD%A6%E9%99%A2%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%80%E5%91%A8%E5%86%85%E6%88%90%E5%8A%9F%E5%A4%84%E7%90%862.5%E5%80%8D%E7%9A%84%E6%B5%81%E9%87%8F/</link><pubDate>Thu, 25 Mar 2021 00:21:05 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%8F%AF%E6%B1%97%E5%AD%A6%E9%99%A2%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%80%E5%91%A8%E5%86%85%E6%88%90%E5%8A%9F%E5%A4%84%E7%90%862.5%E5%80%8D%E7%9A%84%E6%B5%81%E9%87%8F/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-24-sunrise-5863751_1920.png" alt="Featured image of post 可汗学院如何在一周内成功处理2.5倍的流量？" />&lt;p>可汗学员处理流量突然暴增的过程离不开 SRE 的设计和工作。他们的应对策略包括使用云和CDN。&lt;/p>
&lt;p>可汗学院是一家非营利性机构，其使命是为任何人、任何地方提供免费的世界级教育。&lt;/p>
&lt;p>本文原文出处：https://blog.khanacademy.org/how-khan-academy-successfully-handled-2-5x-traffic-in-a-week/&lt;/p>
&lt;p>这篇文章的发布时间在去年（2020 年 5 月），大约是全球疫情最严重的时候。以下是正文。&lt;/p>
&lt;p>说到快速扩展&amp;hellip;&lt;/p>
&lt;p>几个月前，我发布了一些关于扩展的想法，并承诺很快会发布更多的内容。好吧，说到快速扩展&amp;ndash;在3月份的短短两周内，可汗学院网站的使用量就增长到了去年同期的2.5倍，并且一直维持到现在。由于冠状病毒大流行，世界各地的学校都关闭了，学生、家长和老师都转向了远程教育，可汗学院能够做出反应，提供高质量的内容和课堂体验&amp;ndash;而且是免费的。在4月份，我们在平台上为3000万学习者提供了服务。最近一项针对家长的全国性调查发现，可汗学院是 &lt;a class="link" href="https://tytonpartners.com/library/2177-2/" target="_blank" rel="noopener"
>&amp;ldquo;使用最多的在线资源&amp;rdquo;&lt;/a>。&lt;/p>
&lt;p>我很自豪，我们吸纳了这种快速增长，同时并没有干扰到我们的用户。除了在几天内迅速做出反应以缓解压力点之外，我们还提前做好了准备，而这种准备也得到了回报。我们之所以能够轻松地进行扩展，很大程度上是因为我们的架构以及谨慎选择外部服务并正确使用它们的严谨做法。&lt;/p>
&lt;p>因此，在这篇文章中，我将讨论对我们网站的可扩展性起关键作用的架构方面。&lt;/p>
&lt;p>我们架构的两个基本组件在这里为我们提供了特别好的服务。我们使用谷歌云，包括AppEngine、Datastore和Memcache，以及Fastly CDN，它们是无服务器和缓存策略的支柱，这是我们扩展性的关键。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-24-scaling-traffic-in-a-week.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="无服务器基础设施">无服务器基础设施&lt;/h2>
&lt;p>使用 GCP 的 AppEngine，这种完全管理的环境，意味着我们可以非常容易地扩展，几乎不费吹灰之力。即使在流量大幅增加的情况下，我们的网站也能保持良好的性能，而且干预最少。我们自己不需要担心负载平衡，因为服务器实例会根据需要启动，也不需要任何干预。我们同样使用 Datastore，它可以自动扩展存储和访问容量，与 App Engine 扩展 Web服务器实例的方式非常相似。&lt;/p>
&lt;h2 id="缓存">缓存&lt;/h2>
&lt;p>Fastly CDN使我们能够缓存所有静态数据，并最大限度地减少服务器跳转。巨大的可扩展性，它还能帮助我们优化托管资源，在我们的App Engine无服务器模式中，托管资源的成本随着使用量的增加而线性增长。如架构图所示，所有的客户端请求都会经过Fastly，这样我们可以防止不必要的服务器流量，提高性能。我们主要从YouTube加载视频，其次从Fastly加载。这样也可以降低成本，以及保证视频的快速加载。&lt;/p>
&lt;p>除了在Fastly中缓存静态数据外，我们还广泛缓存常见的查询、用户偏好和会话数据，并利用这些来加快数据获取性能。我们除了围绕 Datastore 行使其他关键的最佳实践外，还大量使用Memcache，以确保快速响应时间。&lt;/p>
&lt;p>我们的网站可靠性(SRE)团队当然需要做好扎实的监控准备&amp;ndash;我们也是做到了。我们注意到头几天出现了一些降速，并发现是部署导致了这些衰减。在我们的要求下，Google 增加了我们的 Memcache 的容量，一周内我们就可以轻松恢复到正常的连续部署模式。这个速度是至关重要的，因为我们的团队正在快速的开发资源，以指导新网站用户尽可能轻松地上手使用我们的服务。&lt;/p>
&lt;p>总的来说，我们努力工作，谨慎选择服务，遵循最佳实践，并根据需要开发自己的服务。有了正确的技术、精心的准备，以及我们了不起的工程团队的现场调整，我们已经能够不间断地为现在比以往任何时候都更依赖我们的学生、家长和教师提供服务。&lt;/p></description></item><item><title>战斗机飞行员如何进行事故管理（译文）</title><link>https://martinliu.cn/blog/%E6%88%98%E6%96%97%E6%9C%BA%E9%A3%9E%E8%A1%8C%E5%91%98%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E4%BA%8B%E6%95%85%E7%AE%A1%E7%90%86%E8%AF%91%E6%96%87/</link><pubDate>Tue, 23 Mar 2021 19:45:57 +0800</pubDate><guid>https://martinliu.cn/blog/%E6%88%98%E6%96%97%E6%9C%BA%E9%A3%9E%E8%A1%8C%E5%91%98%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E4%BA%8B%E6%95%85%E7%AE%A1%E7%90%86%E8%AF%91%E6%96%87/</guid><description>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-23-f-16-fighter-pilot-1-scaled.jpg" alt="Featured image of post 战斗机飞行员如何进行事故管理（译文）" />&lt;p>你的事故管理与战斗机飞行员的有什么共同点？经验丰富的战斗机飞行员，Transposit 的 Anthony &amp;ldquo;AB &amp;quot; Bourke 说，他最近在DevOps企业峰会的快乐时光上做了这个演讲。&lt;/p>
&lt;blockquote>
&lt;p>教练观点：incident management 在目前的所有出版物中，甚至大部分翻译软件中，都被翻译为 “事件管理”。在 IT 行业中，这个词汇的首次出现大约是在 20 年前，从 ITIL 引入运维管理的时候，从第一波 ITIL 在国内传播布道的时候，它就一直被翻译为 “事件管理”，“事件” 其实是一个没有好坏之分，好恶差异的中性词，不带有严重后果的含义。但是如果你在美剧中，在美国 NBC 新闻频道仔细的听；incident 往往和某人遭遇交通事故受伤亡相关；和就在今天美国科罗拉多的一个商场里发生的 10 人死亡的枪击案件相关。大部分企业的 ITIL/ITSM 软件中事件管理流程里所管理的其实都是 Event Management，而不是事故。希望本文能引起大家的注意。本文中将其翻译为“事故管理”，事故应该是 Incident 这个单词在 IT 服务管理这个语境里应该有的，精确的含义。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-23-2021.10.20a.jpg"
loading="lazy"
>&lt;/p>
&lt;p>本文出处：https://www.transposit.com/blog/fighter-pilots-and-incident-management/&lt;/p>
&lt;p>想象一下。在你所从事的工作中，你是最棒的，你被招募为蓝天上的飞翔天使。&amp;ldquo;所以，现在我们希望你驾驶着你的喷气式飞机，在很低的高度上高速飞过大量的人群，并发出巨大的噪音。然后我们要做编队飞行，你和你领导机翼间隙只有18英寸。还有一件事我得提一下，有一半的时间里，我们希望你们是倒立的，倒过来的；&lt;strong>所以就像你的IT业务服务遭受了灾难一般，后果非常严重&amp;rdquo;&lt;/strong>&lt;/p>
&lt;p>他说的没错。事实上，作为一名值守的工程师，在新冠疫情期间，应付的是应用系统发生的各种状况，值守工程师承受的压力比以往任何时候都大，有多少时候会有 &amp;ldquo;倒飞&amp;quot;的感觉？这可能是一种令人头晕目眩的体验。而失败的后果往往很严重，同时大家对 &amp;ldquo;完美任务 &amp;ldquo;的期望也从未如此的高。&lt;/p>
&lt;p>在事故管理的坚实基础上，我们可以从战斗机飞行员那里学到什么？能否帮助我们运行和保障业务关键任务服务的安全？&lt;/p>
&lt;h2 id="如实汇报不可打折">如实汇报不可打折&lt;/h2>
&lt;p>虽然我们认为：飞行员所完成的史诗般的飞行，是他们工作中最重要的部分，但伯克强调，其实汇报与任务本身同等重要。&lt;/p>
&lt;p>每次任务结束后，无一例外的，战斗机飞行员在汇报上所花费的时间，几乎是他们飞行时间的两倍。事实上：&amp;ldquo;无论我们认为自己已经有多好了，无论我们的计划有多优秀，无论我们的技术有多完美，无论我们的人员素质多么无敌，其实战斗机飞行员并没有执行过所谓的完美任务。&amp;rdquo; 我们的大部分学习，并不是发生在任务或事故本身，而是发生在事后，是在我们恢复之后，在和同事讨论的过程中，用清醒的头脑看待所发生的事情。&lt;/p>
&lt;p>我们能，也应该将这种纪律性带入自己的事故管理实践中。&amp;ldquo;不要将这种汇报的概念，看作是只能在军队中发挥作用的东西，&amp;rdquo; 伯克说。&amp;ldquo;想一想，你是如何提高你在给予和接受反馈方面的标准的。&amp;rdquo; 你不仅会加速新员工的成长体验，而且你还会发现，你团队中经验丰富的人也能够突破他们自己的玻璃天花板，同时避免他们无法提升，无法适应不可避免的变化。&lt;/p>
&lt;h2 id="透明度是汇报的关键">透明度是汇报的关键&lt;/h2>
&lt;p>跟我们一起飞上一段旅程吧！假设你就是一名中级军官，你刚刚和一群军官一起执行训练任务归来，还有一名二星将军还在回家的路上。当你汇报任务时，你在视频中观察到，将军现在已经在目标之外的100英里了，而且他应该在离开目标50英里的时候，就将“主臂”置于保险状态，可是他现在的&amp;quot;主臂 &amp;ldquo;开关放了在手臂的位置上（这意味着武器仍然是发射就绪状态）。你会指出这个将军的操作失误么&amp;ndash;他可是负责着你的涨薪、晋升和降级？&lt;/p>
&lt;p>当伯克提出这个问题时，我们中的许多人都觉得，对一个权威人物，指出他们犯了一个错误的想法是非常恐怖的。但随后，他介绍了闭口不言的潜在后果。你们中队所驾驶的F16战机的载弹量是2000磅，它可以每分钟发射6000发子弹。在你返航接近基地时，错误的按下一个按钮，可能就是一个致命的错误，这会将自己部队的基地给摧毁掉。有了这些补充说明后，答案就很明显了。透明度不能是可有可无的。&lt;/p>
&lt;p>汇报的做法会让团队在下一次任务（或事故）来临时变得更强大，适应性更强。但汇报成功的奥秘并不神秘，但往往却求之不得：完全透明。&lt;/p>
&lt;p>在汇报过程中，官衔等级应该被抛弃，自我要放在一边。&amp;ldquo;当汇报室的门关上时，一些神奇的事情就会发生，&amp;ldquo;伯克说。&amp;ldquo;军衔铭牌从我们的胸前脱落了，我们举行的汇报并没有等级制度，唯一的目的就是学习和改善。&amp;rdquo; 伯克敦促队友成为 &amp;ldquo;自己最大的敌人&amp;rdquo;，暴露自己的错误，并承诺今后要做出改变。队友们不是将责任推给他人，而是从同伴那里获得信心。&lt;/p>
&lt;p>创造这种环境需要领导层有意识地付出努力，为各种等级的队友提供一个安全的空间，让他们坦诚相待。&amp;ldquo;我们的IT领导者必须找到一种方法，来创造这样的环境，让他们的员工能够给他们提供所需的诚实、实时的反馈，以帮助他们做出正确的决策，使他们领先于威胁，领先于竞争者，领先于不可避免的变化。&amp;rdquo;&lt;/p>
&lt;h2 id="通过事后回顾总结提升事故管理">通过事后回顾总结提升事故管理&lt;/h2>
&lt;p>接受伯克的说法：&amp;ldquo;汇报是世界上最强大的工具，组织中人员的经验可以得到加速度成长，帮助你团队中的每个人都成为奇才，并推动产生更好的成果。&amp;rdquo; 如果我们真正想实践持续改进，事后总结应该是一致的、彻底的、广泛分享的。&lt;/p>
&lt;ul>
&lt;li>第一步是确保你的团队在每一个事件发生后都要进行事后分析。&lt;/li>
&lt;li>其次，事后总结需要检查事故解决过程中实际发生的细节，而不仅仅是产生问题的原因。在一个安全的环境中，团队成员会很自在地分享他们可以做得更好的地方，并确定需要改进的地方。&lt;/li>
&lt;li>最后，还要在整个组织内分享学习成果，这样经验就不会被忽略，否则就无法积累组织的知识。你永远也不知道，谁可能需要在下一次事故中实施这些经验，这些学习将帮助他们更好地准备起来，应对各种状况。&lt;/li>
&lt;/ul>
&lt;p>我们的任务可能在飞行高度上有所不同，但在原则上非常相似。承受极端的压力。高风险。以及永无止境的学习空间。借鉴战斗机飞行员的实战经验，我们可以成为自己组织中的特立独行者，将我们的流程提升到新的高度。透明度、诚实，以及对学习和改进的承诺，将会使我们的事故管理飞速发展。&lt;/p></description></item><item><title> DevOps 的未来：2021 年的 15 个趋势</title><link>https://martinliu.cn/blog/devops-%E7%9A%84%E6%9C%AA%E6%9D%A52021-%E5%B9%B4%E7%9A%84-15-%E4%B8%AA%E8%B6%8B%E5%8A%BF/</link><pubDate>Sun, 21 Mar 2021 00:05:58 +0800</pubDate><guid>https://martinliu.cn/blog/devops-%E7%9A%84%E6%9C%AA%E6%9D%A52021-%E5%B9%B4%E7%9A%84-15-%E4%B8%AA%E8%B6%8B%E5%8A%BF/</guid><description>&lt;img src="https://martinliu.cn/img/2021/03/The-Future-Is-Bright.jpg" alt="Featured image of post DevOps 的未来：2021 年的 15 个趋势" />&lt;p>本文的原文地址：[https://thechief.io/c/editorial/future-DevOps -15-trends-2021/](&lt;a class="link" href="https://thechief.io/c/editorial/future-DevOps" target="_blank" rel="noopener"
>https://thechief.io/c/editorial/future-DevOps&lt;/a> -15-trends-2021/ ) 本文是一篇译文，旨在学习，并分享给社区。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-20-Screen%20Shot%202021-03-21%20at%201.26.38%20AM.jpg"
loading="lazy"
>&lt;/p>
&lt;p>DevOps 和整个IT运维是一个不断发展的领域，本文的趋势就是证明。总是需要跟上趋势并利用其优势。&lt;/p>
&lt;p>DevOps 正在与机器学习和人工智能等各种技术创新不断发展和融合，这些创新将在2021年占据更多的领域。&lt;/p>
&lt;p>学习这些趋势，并在你的 DevOps 实践中实施它们，将使你在这个革命性的领域中保持活力。&lt;/p>
&lt;p>在过去十年的引入中，DevOps 已经成长为许多IT公司不可或缺的一部分。&lt;/p>
&lt;p>专家预测，到2025年，DevOps 市场规模将达到128.5亿美元。在软件工程中实施 DevOps 所带来的效率和众多优势，是其被大量采用的关键驱动力。&lt;/p>
&lt;p>年复一年，软件开发领域总有一些新的实践出现，有些则被抛弃。&lt;/p>
&lt;p>在本文中，我们将探讨 DevOps 的上升趋势和实践，以及对2021年该行业的期望。&lt;/p>
&lt;h1 id="1-devsecops-将成为新的-devops">1-DevSecOps 将成为新的 DevOps&lt;/h1>
&lt;p>随着企业拥抱无服务器、Docker、Kubernetes和其他现代云技术，安全将一如既往地成为高度优先级，成为 DevOps 的默认部分。&lt;/p>
&lt;p>与 DevOps &amp;ndash;开发团队和IT团队的融合类似，DevSecOps 将是将安全融入开发和IT运维团队。&lt;/p>
&lt;p>技术研究公司国际数据公司(IDC)预测，到2024年，DevSecOps 将推动亚太地区至少50%的新应用，这让 DevSecOps 从2021年开始有了成长的乐土。&lt;/p>
&lt;h1 id="2-aiops-的实施率将上升">2-AIOps 的实施率将上升&lt;/h1>
&lt;p>自2017年以来，采用人工智能和机器学习来增强、自动化和管理IT运维，是 DevOps 过程中的革命性改变。&lt;/p>
&lt;p>Gartner 的研究指出，到2023年，40%的DevOps 团队将利用人工智能进行IT运维（AIOps）来增强应用和基础设施监控工具。&lt;/p>
&lt;p>随着超过30%的IT组织已经利用机器学习和人工智能，越来越多的组织将采用 AIOps 来提高关键 DevOps 任务的效率和自动化程度，为IT操作人员腾出时间用于更有价值的业务活动。&lt;/p>
&lt;h1 id="3-基础架构自动化ia将更占主导地位">3-基础架构自动化（IA）将更占主导地位&lt;/h1>
&lt;p>基础设施管理工具将帮助 DevOps 团队将自动化引入交付、配置和IT基础设施管理。&lt;/p>
&lt;p>IA 应用可以无缝地自动化IT基础设施的交付、配置和管理，帮助 IT 团队提高工作效率和可靠性。&lt;/p>
&lt;p>2021年，企业将开始用企业级的 IA 工具取代自定义设置，实现部署和配置的自动化。&lt;/p>
&lt;h1 id="4-混沌工程将成为常规的测试技术">4-混沌工程将成为常规的测试技术&lt;/h1>
&lt;p>混沌工程&amp;ndash;在生产中对软件进行实验，以建立对系统抵御突发事故能力的信心的学科，在 DevOps 中会变得更加重要。&lt;/p>
&lt;p>软件被要求具有高效和冗余性，混沌工程提供了这方面的测试以及更多。&lt;/p>
&lt;p>Gartner 提出，到2023年，40%的组织将实施混沌工程作为 DevOps 的一部分，这将减少高达 20% 的意外停机时间。&lt;/p>
&lt;h1 id="5-在-devops-流程中实现更多自动化">5-在 DevOps 流程中实现更多自动化&lt;/h1>
&lt;p>实际上，每个IT组织都在以某种方式使用自动化。Business wire 的一份报告显示，美国61%的组织广泛使用自动化。&lt;/p>
&lt;p>企业正在意识到自动化的力量和好处，并将其引入到 DevOps 的每一个层面，从开发，到部署和管理阶段。&lt;/p>
&lt;p>在2021年，DevOps 将获得并使用更多先进的自动化工具来评估容易出错的人工执行任务，并更好地在 DevOps 发展中加速开发和部署。&lt;/p>
&lt;p>事实的更广泛的大流行，很多公司正在并将继续进行大量的自动化工作，这是前所未有的。&lt;/p>
&lt;h1 id="6-从设计到部署公司将采用混合云">6-从设计到部署，公司将采用混合云&lt;/h1>
&lt;p>随着2020年整个行业经历的转变，远程工作成为新的常态，企业将全面拥抱混合运维。随着企业对其技术堆栈进行的现代化改造，从而利用云的优势，混合云将成为部署的新常态，以及一般的业务。&lt;/p>
&lt;p>企业将开始同时使用内部私有云部署和公有云来进行IT运维。&lt;/p>
&lt;h1 id="7-利用-agileops-实现更敏捷的软件交付">7-利用 AgileOps 实现更敏捷的软件交付&lt;/h1>
&lt;p>AgileOps 结合了成熟的敏捷和 DevOps 技术，为I&amp;amp;O团队提高敏捷性、管理软件开发和快速响应需求。&lt;/p>
&lt;p>快速实时响应用户需求的需求不断增加，将推动 AgileOps 在IT运维中的进一步发展。&lt;/p>
&lt;h1 id="8-基础设施即代码iac将蓬勃发展">8-基础设施即代码（IaC）将蓬勃发展&lt;/h1>
&lt;p>IaC 提供了一种通过配置文件来管理IT基础设施的手段，包括服务器、网络、存储设备（内部和云端）。&lt;/p>
&lt;p>通过 IaC，软件工程师可以通过运行一个脚本，来构建一套完整的基础设施，提供部署相同配置的一致性、可靠性，并提高软件开发环境的效率。&lt;/p>
&lt;p>基础设施即代码(IaC)的快速恢复、减少停机时间等优势，将推动更多公司在运维中采用它。&lt;/p>
&lt;h1 id="9-dataops的趋势是真实的并将更加成熟">9-DataOps的趋势是真实的，并将更加成熟&lt;/h1>
&lt;p>DataOps 将通过使用机器学习模型来预测事故或中断，从而彻底改变 DevOps。DataOps 使用预测分析，拥有彻底改变 DevOps 的潜力。&lt;/p>
&lt;p>Itamar Ben Hemo 是 Rivery 的CEO和联合创始人，他写道。&lt;/p>
&lt;blockquote>
&lt;p>就像DevOps将软件开发系统化了一样，DataOps旨在加速数据的收集、处理和分析。正如CIO所指出的，&amp;ldquo;IDC在&amp;rsquo;数据到见解&amp;rsquo;的管道中定义了四个核心阶段。识别数据、收集数据、转换数据和分析数据。这些阶段也共同构成了这门新兴学科 DataOps 的核心要素。&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>根据Nexla进行的一项调查，73%的公司计划投资DataOps来管理数据团队，关于他们如何使用数据，他们的团队结构和数据挑战发现，73%的公司正在投资DataOps。&lt;/p>
&lt;h1 id="10-无服务器架构将被广泛采用">10-无服务器架构将被广泛采用&lt;/h1>
&lt;p>无服务器(Serverless)计算为应用和软件部署提供了可扩展性，而无需物理硬件成本。&lt;/p>
&lt;p>由于企业正在寻求减少和最大限度地利用开支，以缓解新冠疫情的影响，更多的公司将迁移到无服务器架构，消除管理基础设施的责任，允许他们 &amp;ldquo;为你使用的东西付费&amp;rdquo;。&lt;/p>
&lt;p>将会有一个强有力无服务器的诉求，即我们将把代码推送到云端，其余的操作将由云提供商完成。&lt;/p>
&lt;h1 id="11-devops-将更深的实施-kubernetes">11-DevOps 将更深的实施 Kubernetes&lt;/h1>
&lt;p>越来越多的公司将开始看到Kubernetes提供的灵活性、可扩展性、自动化、高可用性和可移植性等优势，将带来直接的经济和运维效益，从而开始更深入的应用它。&lt;/p>
&lt;h1 id="12-边缘计算将被重视">12-边缘计算将被重视&lt;/h1>
&lt;p>组织正在需要处理收集数据的地方依靠边缘计算，以获得更好的延迟、成本优化和分析。&lt;/p>
&lt;p>随着IT操作人员进一步研究过滤监控数据，边缘计算将为DevOps提供这方面的优势，从而在2021年得到更多的应用。&lt;/p>
&lt;h1 id="13-迁移到微服务变得很重要">13-迁移到微服务变得很重要&lt;/h1>
&lt;p>通过实施微服务，企业将能够控制应用程序并自动管理软件版本，而且风险更低。&lt;/p>
&lt;p>商业企业在2021年及以后继续加速向云计算转移。他们越来越多地以灵活性为代价，尝试微服务带来的新技术栈。&lt;/p>
&lt;h1 id="14-noops将来到运维场景再次">14-NoOps将来到运维场景（再次）&lt;/h1>
&lt;p>NoOps 的思想是去除DevOps中所有的平台管理部分，减少开发者和基础设施之间的摩擦。&lt;/p>
&lt;p>随着 DevOps 中各种自动化和 AI 的兴起，NoOps 将在2021年登场，之后开始经历颠覆性的增长。&lt;/p>
&lt;h1 id="15-gitops将研究院">15-GitOps将研究院&lt;/h1>
&lt;p>GitOps 是一种集部署、监控、管理于一体的构建云应用的运维模式。GitOps 允许 DevOps 使用开发者工具来驱动运维，在DevOps中建立了一个 &amp;ldquo;你构建，你负责&amp;rdquo; 的流程。&lt;/p>
&lt;p>如果你想了解更多关于 GitOps的信息，请查看我们的播客集&lt;a class="link" href="https://anchor.fm/thedevopsfauncast/episodes/GitOps-This-is-What-You-Need-to-Know-12-epga8p?ref=thechiefio?ref=thechiefio" target="_blank" rel="noopener"
>GitOps: This is What You Need to Know.&lt;/a>&lt;/p></description></item><item><title>DevOps 教练周刊 #7 | 全球 DevOps + SRE 精选资讯</title><link>https://martinliu.cn/blog/devops-%E6%95%99%E7%BB%83%E5%91%A8%E5%88%8A-#7-%E5%85%A8%E7%90%83-devops--sre-%E7%B2%BE%E9%80%89%E8%B5%84%E8%AE%AF/</link><pubDate>Tue, 16 Mar 2021 19:23:15 +0800</pubDate><guid>https://martinliu.cn/blog/devops-%E6%95%99%E7%BB%83%E5%91%A8%E5%88%8A-#7-%E5%85%A8%E7%90%83-devops--sre-%E7%B2%BE%E9%80%89%E8%B5%84%E8%AE%AF/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps 教练周刊 #7 | 全球 DevOps + SRE 精选资讯" />&lt;p>本期有 6 个公司的服务出现了宕机事故，一如既往的为你精选了十几篇值得学习的内容。&lt;/p>
&lt;blockquote>
&lt;p>[EN] May your queries flow and your pagers stay silent.
&amp;ndash;Dave, Betsy, Niall, Stephen, and Ken&lt;/p>
&lt;/blockquote>
&lt;p>【译】：愿你的咨询队列和传呼机都保持静默。&lt;/p>
&lt;h2 id="宕机">宕机&lt;/h2>
&lt;h2 id="fastly-3-月事故一览">Fastly 3 月事故一览&lt;/h2>
&lt;p>Fastly是一家 CDN 服务提供商，每个月的事故披露条数大约是 20 到 30 条。本月（三月）已经可以在 &lt;a class="link" href="https://status.fastly.com/history" target="_blank" rel="noopener"
>https://status.fastly.com/history&lt;/a> 看到 23 条事故披露通告。主要内容有三种：事故时间线记录，事故回顾和计划内活动（扩容等）。&lt;/p>
&lt;p>回顾三月份的事故历史，事故类型组要是：&lt;/p>
&lt;ul>
&lt;li>区域性和全球性的性能事故。&lt;/li>
&lt;li>网络路由和 DNS 故障&lt;/li>
&lt;li>数据中心计划内的维护、扩容和新上线（新加坡）。&lt;/li>
&lt;/ul>
&lt;p>目前一共有 8 个事故回顾。浏览一下大致内容主要是对过去发生过的事故的确认。每一条事故回顾中精确的描述了事故影响起始时间点和影响范围。&lt;/p>
&lt;blockquote>
&lt;p>教练观点：看起来他们三月份的日子过的不咋样，不知道这个月的错误预算是否快烧完了。&lt;/p>
&lt;/blockquote>
&lt;h2 id="ovh-cloud-数据中心发生火灾">OVH Cloud 数据中心发生火灾&lt;/h2>
&lt;p>这是一家服务器托管/云服务器提供商，数据中心主要在欧洲中西部和美国东岸。&lt;/p>
&lt;p>3 月 10 日这次发生火灾的是位于法国Strasbourg的一个数据中心，该数据中心园区里有 4 栋大楼。从新闻图片上看到有一栋大楼几乎彻底烧毁。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-21-151636.png"
loading="lazy"
alt="2021-03-21_23-05-14"
>&lt;/p>
&lt;p>该公司的创始人/CEO 第一时间在 Twitter 上发布和更新着火灾的状态。&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-21-151729.png"
loading="lazy"
alt="2021-03-21_23-06-03"
>&lt;/p>
&lt;p>从这可以看到，数据中心园区中的 SBG2 大楼发生火灾，因此直接关闭里其它的大楼。他每天在 Twitter 上更新一次，在公司官网上 &lt;a class="link" href="https://www.ovh.com/world/news/press/cpl1787.fire-our-strasbourg-site?124" target="_blank" rel="noopener"
>https://www.ovh.com/world/news/press/cpl1787.fire-our-strasbourg-site?124&lt;/a> 也可以看到每天一次的更新。&lt;/p>
&lt;p>至今火灾的原因还没有说明，从每日的更新里还可以看到，火灾的影响目前没有完全消除，其它数据中心的电池还有冒烟的情况出现。&lt;/p>
&lt;p>火灾恢复的过程包括：&lt;/p>
&lt;ul>
&lt;li>对每个大楼的可用状态更新，SBG-3 大楼已经恢复到了 40%可用的状态，团队工作在重启服务器的过程中。&lt;/li>
&lt;li>其它三个大楼在逐一恢复抢修中，主要包括这些工作：重启电源供应，重启网络服务，重启服务器。&lt;/li>
&lt;/ul>
&lt;p>可以看到他们的救灾工作的三个优先级：&lt;/p>
&lt;ol>
&lt;li>恢复各个大楼的服务。&lt;/li>
&lt;li>在其他数据中心为客户制备新的服务器（承诺了1.5 万台新服务器）&lt;/li>
&lt;li>与所有受到影响的客户一起实施 DRP 计划。（灾难恢复计划）&lt;/li>
&lt;/ol>
&lt;p>以上三项救灾工作的数据都是日更在以上的网页中。&lt;/p>
&lt;blockquote>
&lt;p>教练观点：这个数据中心可谓是非常罕见的大规模灾难，救灾速度和进展还是比较缓慢的，但愿受影响的公司都有自己的扩域高可用容灾方案，希望 DRP 计划执行的顺利有效。&lt;/p>
&lt;/blockquote>
&lt;h2 id="俄罗斯发生大规模域名解析故障">俄罗斯发生大规模域名解析故障&lt;/h2>
&lt;p>在 3 月10日，由于俄罗斯的网监局（&lt;a class="link" href="https://twitter.com/roscomnadzor" target="_blank" rel="noopener"
>roscomnadzor&lt;/a> 联邦通信、信息技术和大众媒体监督局）对Twitter 的短域名服务 t[.]co 不当屏蔽，导致了全境所有包含了 t.co 的子域名都无法访问，包括例如：Microsoft[.]com 和 Reddit[.]com 的域名，还有很多其它躺枪的域名。&lt;/p>
&lt;p>参考Twitter 上的信息如下：&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-03-21-153938.png"
loading="lazy"
alt="2021-03-21_23-38-50"
>&lt;/p>
&lt;blockquote>
&lt;p>教练观点：感觉这个错误犯的有点低级了。&lt;/p>
&lt;/blockquote>
&lt;h2 id="dyn-dns-服务器故障">Dyn DNS 服务器故障&lt;/h2>
&lt;p>这是 Oracle 云的提供的 DNS 服务，本次故障导致大部分客户的 DNS 服务解析失败或者降级，影响范围是所有相关客户。&lt;/p>
&lt;p>调查得到的主要根因：Oracle Public DNS 基础设施实施配置变更是发生了问题。&lt;/p>
&lt;h2 id="chef-服务发生大量-5xx-错误">Chef 服务发生大量 5xx 错误&lt;/h2>
&lt;p>Chef 的服务不经常发生故障，这次 api.chef.io 服务发生了大量 5xx 错误增多的事故，错误的对象是索引集群。目前故障已经排除，服务恢复了正常。&lt;/p>
&lt;h2 id="github-3-月事故">GitHub 3 月事故&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.githubstatus.com/history" target="_blank" rel="noopener"
>https://www.githubstatus.com/history&lt;/a> 在这个页面上可以看到本月已经发生了 7 次事故。在 3 个严重事故中，有 2 个的事故影响时间接近 2 小时。3-15 日的事故影响了 GitHub Actions 服务。12 日的事故中影响到了绝大多数服务的可用性，但是恢复的还比较快。&lt;/p>
&lt;blockquote>
&lt;p>教练观点：我本月体验到了一次 GitHub Actions 构建报错挂住僵死的问题，后来继续提交，GitHub Actions 的 pipeline 又恢复正常工作了。持续时间不太长。&lt;/p>
&lt;/blockquote>
&lt;h1 id="新闻">新闻&lt;/h1>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://puppet.com/blog/take-the-2021-state-of-devops-survey-be-part-of-our-10-year-history/" target="_blank" rel="noopener"
>Take the 2021 State of DevOps Survey, be part of our 10-year history&lt;/a> 这是我跟踪最长时间的 DevOps 状态调查报告，以前是和 DORA 合作的，在 DORA 被 Google Cloud 收编了以后，Puppet 有开始找的其它大拿继续这个调查。对于计划做行业调查的朋友，还是可以学习一下，这套问卷的设问。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://kubernetes.us10.list-manage.com/track/click?u=3885586f8f1175194017967d6&amp;amp;id=5a32cff75d&amp;amp;e=7098f23071" target="_blank" rel="noopener"
>CD Foundation Announces Industry Initiative to Standardize Events from CI/CD Systems&lt;/a> 持续交付基金会发生了，宣布行业级 CI/CD 系统的标准化事件的号召。他们搞了一个 &lt;a class="link" href="https://github.com/cdfoundation/sig-events" target="_blank" rel="noopener"
>Events SIG&lt;/a> 厂商中立的兴趣讨论小组，这个计划对以后所有 CI/CD 流水线系统间的互操作性比较重要。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="软件发布">软件发布&lt;/h2>
&lt;ul>
&lt;li>Java 16 发布&lt;/li>
&lt;li>AWS EC2 发布了新的 X2gd 实例，这是一块 ARM-based Graviton2-powered 高内存实例。可达 1TB 内存和 3.8TB 的SSD 存储。&lt;/li>
&lt;li>Git 2.31 发布&lt;/li>
&lt;li>Ghost 4.0 开源 CMS 系统&lt;/li>
&lt;li>Audacity 3.0.0 开源音频编辑软件&lt;/li>
&lt;li>SQLite 3.35 发布&lt;/li>
&lt;/ul>
&lt;h1 id="文章">文章&lt;/h1>
&lt;p>本周推荐如下经常文章。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.transposit.com/blog/fighter-pilots-and-incident-management/" target="_blank" rel="noopener"
>战斗机飞行员和事故管理有什么共同点？&lt;/a>
我觉得战斗机飞行员对每一次任务，无论成功与否，都会有一个回顾，这真的很新鲜。总有一些东西需要学习。杰西卡-阿贝尔森&amp;ndash;Transposit&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://blog.heroku.com/incident-response-at-heroku-2020" target="_blank" rel="noopener"
>Heroku的事故响应&lt;/a>
Heroku应用事故管理系统，指定一名事故指挥官，负责保持事故的正常进行，并监督外部和内部的沟通。Guillaume Winter - Heroku&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://blog.khanacademy.org/how-khan-academy-successfully-handled-2-5x-traffic-in-a-week/" target="_blank" rel="noopener"
>可汗学院如何在一周内成功处理2.5倍的流量？&lt;/a>
这个故事正在变得很常见：当大范围居家办公开始时，可汗学员的流量突然暴增。他们的策略包括使用云和CDN。Marta Kosarchyn - 可汗学院&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://engineering.squarespace.com/blog/2017/under-the-hood-ensuring-site-reliability" target="_blank" rel="noopener"
>根基：确保站点可靠性&lt;/a>
下面是对Squarespace如何做SRE的精彩总结。Franklin Angulo - Squarespace&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://increment.com/reliability/reliability-at-scale/" target="_blank" rel="noopener"
>[增量：可靠性] 大规模的可靠性。&lt;/a>
Deliveroo、DigitalOcean、Fastly和Headspace的领导们分享了他们的组织是如何看待可靠性和弹性的，以及他们对开始可靠性之旅的工程机构的建议。每位领导都回答了一系列关于他们的组织如何处理可靠性的问题，给出了一个有趣的比较和对比的概述。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://increment.com/reliability/resilience-as-adaptability-freshworks/" target="_blank" rel="noopener"
>「增量：可靠性案例分析」弹性作为Freshworks的适应性&lt;/a>
利用在一场毁灭性的飓风之后制定的灾难计划，Freshworks在这场大流行中幸存下来，并在大流行前的最后期限前交付了一个重要的新产品。伊普西塔-阿加瓦尔&amp;ndash;增量公司&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://launchdarkly.com/blog/what-is-a-canary-deployment/" target="_blank" rel="noopener"
>什么是金丝雀部署？&lt;/a>
本篇解释了什么是金丝雀部署，它如何帮助您，以及金丝雀部署与蓝/绿部署的区别。LaunchDarkly&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.blameless.com/blog/how-to-build-an-sre-team-with-a-growth-mindset" target="_blank" rel="noopener"
>如何以成长的心态打造SRE团队？&lt;/a>
这篇文章解释了成长型思维方式的含义，并展示了它如何应用于SRE。艾米丽-阿诺特&amp;ndash;Blameless&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>《2020 年 SRE 报告》by Catchpoint</title><link>https://martinliu.cn/blog/2020-%E5%B9%B4-sre-%E6%8A%A5%E5%91%8Aby-catchpoint/</link><pubDate>Mon, 01 Mar 2021 11:29:33 +0800</pubDate><guid>https://martinliu.cn/blog/2020-%E5%B9%B4-sre-%E6%8A%A5%E5%91%8Aby-catchpoint/</guid><description>&lt;img src="https://martinliu.cn/img/2021/03/2020-sre-report.jpg" alt="Featured image of post 《2020 年 SRE 报告》by Catchpoint" />&lt;p>2020 年是不寻常的疫情年，所有行业都受到了巨大的影响， SRE 纯分布式工作方式的转型也是本报告的亮点之一。报告从 4 个方面详细介绍了疫情年中 SRE 的众生相。&lt;/p>
&lt;p>本报告出自：&lt;a class="link" href="https://pages.catchpoint.com/2020-sre-report" target="_blank" rel="noopener"
>https://pages.catchpoint.com/2020-sre-report&lt;/a>&lt;/p>
&lt;p>本文是个人学习的结果，非 Catchpint 官方出品，观点尽量与官方保持一致，但个别地方可能难免会出现偏差，有任何质疑请参考原文，或者与我交流。&lt;/p>
&lt;h2 id="概要">概要&lt;/h2>
&lt;h3 id="sre--调查贡献者">SRE 调查贡献者&lt;/h3>
&lt;p>Catchpoint 要特别感谢 Sanjeev Sharma、Marc Hornbeek、Archana Joshi 和 Niladri Choudhuri。他们的见解和贡献为整个报告奠定了基础。&lt;/p>
&lt;p>我们还要特别感谢 Nithyanand Mehta。Nith 关于成熟度的内部白皮书为本报告的一些关键谈话点提供了灵感。&lt;/p>
&lt;p>感谢 Eveline Oehrlich 和 DevOps Institute 的同事。他们的反馈和时间是至关重要的贡献，超过了本文档所能捕捉到的内容。&lt;/p>
&lt;h3 id="支持伙伴">支持伙伴&lt;/h3>
&lt;p>如果没有 Blameless、Gremlin、Honeycomb、NS1、LaunchDarkly 和 Packet 这些了不起的合作伙伴，Catchpoint就 不可能开展本次 &amp;lsquo;SRE from Home&amp;rsquo; 的调查。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-01%20at%2012.01.12%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-01 at 12.01.12 A"
>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>长期以来，人们一直在讨论客户期望值不断提高的恶性循环，认为这是推动在快速、边缘分布式的环境中提供服务的复杂性不断增加的原因。可靠的方式。今年，我们特别考虑到在家工作的突然增加；我们认为我们的员工和客户一样分布在世界各地。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre2.jpg"
loading="lazy"
>&lt;/p>
&lt;p>我们真的很感激大家为 2020 年的 SRE 报告提供数据，这样就有了两组清晰的数据。今年的报告包括 &amp;ldquo;在家工作前 &amp;ldquo;和 &amp;ldquo;在家工作后 &amp;ldquo;两个时间段的调查结果和数据，提供了业界最独特的视角之一，说明了 2020 年里 SRE 的特殊意义。&lt;/p>
&lt;p>我们评估了600多百名调查对象的数据。在分析数据的同时，我们希望能对当今 SRE 先锋们的趋势、现状和面临的挑战进行真实、人性化的观察。&lt;/p>
&lt;p>我们衷心感谢为本报告做出贡献的所有个人，现在我们也同样感谢您，读者。我们希望您能像我们享受研究和写作一样，享受阅读的乐趣。&lt;/p>
&lt;p>与Catchpoint以前的 SRE 报告一样，我们考虑了那些被认定为从事 SRE 类工作的个人的数据，尽管头衔可能还没有用到 &amp;quot; SRE &amp;ldquo;。&lt;/p>
&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>从&amp;quot;当你要求软件工程师设计一个运维团队时会发生什么？&amp;rdquo; 这个问题出发，将会得出的答案是：&amp;rdquo; SRE 团队负责其服务的可用性、延迟、性能、效率、变更管理、监控、应急响应和容量规划。&amp;rdquo; 如果说 SRE 是广义的 DevOps 原则的狭义实施，那么它们的主要区别就是 SRE 的核心重点是可靠性。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre-1.jpg"
loading="lazy"
>&lt;/p>
&lt;p>以上述问答为基础，今年的 SRE 2020报告强调了一个目标，这个目标可能是关于与所有相关从业者的共同目标，无论他们的头衔是什么： &lt;strong>通过设计可观测的系统来防止服务中断，而不是去被动的修复服务中断&lt;/strong> 。让我们从一个明确的融合点开始，并向后延伸，使大型或小型组织都能根据这个 2020 年的基线数据进行自我评估。&lt;/p>
&lt;p>如果一个共同的目标是解决复杂的问题，那么这个旅程应该是什么样的呢？在一个由边缘计算工作推动的微服务世界中，这个旅程涉及到的组件比以前更多了，这些现在需要在在家工作的现实中重新评估这些组件。这包括暴露出那些可能会被忽视，或以前并不存在的领域。考虑诸如士气、员工体验和人类健康等问题，与传统的资产类别，如组织结构、工具堆栈、硬件和软件一起考虑。&lt;/p>
&lt;h2 id="关键要点1-可观测性组件存在而可观测性存在么">关键要点1 ：可观测性组件存在，而可观测性存在么？&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/ch1.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>找出你所提供的服务在哪里汇聚成了典型的 &lt;strong>数字&lt;/strong>体验消费点；从那里往后梳理。不仅要考虑到你的代码，还要考虑到网络、第三方和所有交付链中的组件；从客户的应用体验好坏的角度来评估 &lt;strong>可观测性&lt;/strong>三个支柱。问自己：&amp;ldquo;客户的体验是由于那些代码、互联网和网络、第三方或其他交付链组件所构成的？&amp;quot;。&lt;/p>
&lt;/blockquote>
&lt;p>如果我们提供的能力是通往积极业务成果的门户，那么在当今这个边缘分布、以体验为中心的世界中，几乎没有人可以争驳斥，通过设计和构建可观测系统来进行预防是一种必要的能力。&lt;/p>
&lt;p>当提出 &amp;quot; SRE 使用的工具类别是什么？&amp;ldquo;这个问题时，高达93%的人选择了监控，而53%的人选择了可观测性。当我们深入到进一步的指标问题时，一束耀眼的光芒向我们提出了挑战，并邀请我们对一些监控性的进行深入研究。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145734184864.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>监控和告警 93%&lt;/li>
&lt;li>仪表板 73%&lt;/li>
&lt;li>基础设施作为代码 71%&lt;/li>
&lt;li>分析与趋势 56%&lt;/li>
&lt;li>应用程序发布和部署管理 55%&lt;/li>
&lt;li>APM代码追踪 53%&lt;/li>
&lt;li>可观测性 53%&lt;/li>
&lt;li>安全 47%&lt;/li>
&lt;li>测试 41%&lt;/li>
&lt;li>遥测 38%&lt;/li>
&lt;li>混沌工程 26%&lt;/li>
&lt;li>ITSM工具 26%&lt;/li>
&lt;li>价值流管理10%&lt;/li>
&lt;/ul>
&lt;p>如果说可观测性的学术定义是：&amp;ldquo;根据系统外部暴露的信息，可以推断出系统内部工作状态的好坏&amp;rdquo;，那么我们在说暴露的时候，一定要附加一个情境性的定义，通常是只对于 &lt;em>消费者、客户或者员工的体验&lt;/em>。&lt;/p>
&lt;blockquote>
&lt;p>考虑一下: 如果一个用户的数字体验由第三方、网络（互联网和内部）、代码和基础设施组成，所有这些要素都汇聚在一个关键点上，就构成了我们所谓的体验。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>而不要拘泥于关于&lt;strong>可观测性&lt;/strong>在实践、度量和追踪（三根支柱）的商业定义，谨防将过多的关注点放在 &lt;em>白盒内部&lt;/em>。&lt;/p>
&lt;/blockquote>
&lt;p>71%的受访者表示&lt;strong>错误率&lt;/strong>是一种他们所跟踪的关键指标。表示客户满意度（数据见下一节）是一个高度优先级，但测量&lt;em>错误率&lt;/em>而不是&lt;em>最终用户响应时间&lt;/em>，将导致持续关注&lt;strong>从内到外&lt;/strong>而不是&lt;strong>从外到内&lt;/strong>。与其争论各种白盒与黑盒监控理论，不如专注于&lt;strong>理解体验&lt;/strong>，进而研究用户体验交付的组件之间的关联性。&lt;/p>
&lt;p>&lt;strong>贵组织跟踪以下哪些指标？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145744115347.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>错误率71%&lt;/li>
&lt;li>终端用户响应时间69%。&lt;/li>
&lt;li>MTTR 60%&lt;/li>
&lt;li>MTTD 42%&lt;/li>
&lt;li>错误/性能预算 36%&lt;/li>
&lt;/ul>
&lt;p>同样值得讨论的是，第三方的关注度或可视性的泛滥。根据 HTTP Archive 的数据，93% 的页面至少包括一个第三方域名；平均一个页面包括 9 个不同的第三方域名！这说明，第三方域名的重要性。然而，只有 11% 的受访者表示他们的自动化工作流程扩展到了第三方供应商。&lt;/p>
&lt;p>鉴于可观测性的支柱也必须适用于第三方组件，也许可以理解为什么只关注白盒内部的引力。就像 SRE 致力于设计可观测性系统是相对新鲜的一样，使用数字体验监控来揭示第三方系统，并收集数据也是比较新的。不过，这里却蕴含着一个黄金机会，可以考虑将黑匣数字体验监控延伸到第三方。仅仅依靠白盒监控意味着你并不知道用户看到了什么，尤其是与第三方有关的情况。例如，无法加载的页面或无法导航的应用程序可能是 CDN、传输网络或 DNS 供应商状态不正常的后果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145747826279.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>11%的受访者表示，事件管理的自动化工作流程包括含第三方供应商的所有的工作流程。&lt;/li>
&lt;li>37%的受访者认为第三方是导致居家办公时事故增加的原因（仅次于流量/容量问题）。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>使用了何种仿真监控策略？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145754797127.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>测试 API&lt;/li>
&lt;li>测试网络&lt;/li>
&lt;li>多步骤交易&lt;/li>
&lt;li>测试 DNS&lt;/li>
&lt;li>压力测试&lt;/li>
&lt;li>测试 CDN&lt;/li>
&lt;li>没用使用&lt;/li>
&lt;/ul>
&lt;p>对于仿真用户测试，这里的一个关键指标是，只有 39% 的用户在使用了仿真的多步骤交易来模拟用户体验。&lt;/p>
&lt;p>与其他监控特定组件（如DNS或CDN）的用例相比，或与完全不使用任何仿真监控的受访者相比。&lt;/p>
&lt;p>&lt;strong>SRE团队在多大程度上实施了全面的应用程序和基础设施性能监控和告警？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145757182600.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>监控和告警的自动化程度高。监控系统足够智能，能够辨别是否需要对特定事件发出告警。44%&lt;/li>
&lt;li>我们有系统级的性能监控和自动告警，但没有应用级的。 21%&lt;/li>
&lt;li>我们可以看到一些应用和系统的情况，但在一些关键领域，我们没有能力监控。20%&lt;/li>
&lt;li>有的只是实时监控的仪表盘。没有自动化的。 12%&lt;/li>
&lt;li>没有实时监控，值守的团队会收到来自客户支持的人工提醒。 4%&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145764118295.jpg"
loading="lazy"
>&lt;/p>
&lt;p>89%的受访者表示他们执行监控活动，44%的受访者表示监控和告警是高度自动化的。这是个好消息，说明白盒内部考虑的周全。但坏消息是，对内部的明确关注导致我们想当然了，关注数字体验的外在黑盒监控仍然被误解。对于这一点，我们提供了以下观点，供企业在通过设计可观测系统成熟到预防措施时进行评估。&lt;/p>
&lt;blockquote>
&lt;p>找出你所提供的服务在哪里汇聚成了典型的 &lt;strong>数字&lt;/strong>体验消费点；从那里往后梳理。不仅要考虑到你的代码，还要考虑到网络、第三方和所有交付链中的组件；从客户的应用体验好坏的角度来评估 &lt;strong>可观测性&lt;/strong>三个支柱。问自己：&amp;ldquo;客户的体验是由于那些代码、互联网和网络、第三方或其他交付链组件所构成的？&amp;quot;。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>在服务层面是否有健康监控，以便能够检测到中断或性能问题（在服务层面）？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145765275496.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>每个服务都有自己的监控和告警，并且有自己的健康检查API，可以插入到我们的可观测性框架中。43%&lt;/li>
&lt;li>有些服务有自己的监控和告警，有健康检查API，但有些服务却没有。27%&lt;/li>
&lt;li>每个服务都有自己的监控和告警。没有健康检查API或可观测性框架。19%&lt;/li>
&lt;li>没有服务级监控。 9%&lt;/li>
&lt;li>不适用。我们的系统中没有独立的服务。我们都是单体应用。2%&lt;/li>
&lt;/ul>
&lt;p>可观测性就是要回答以前无法回答的问题，因为它与 &amp;ldquo;为什么&amp;quot;有关。&amp;ldquo;为什么&amp;quot;用户无法访问我的网站？&amp;ldquo;为什么&amp;quot;用户无法访问自己的数据？&amp;ldquo;为什么&amp;quot;用户的情绪如此失望？&lt;/p>
&lt;p>回答 &amp;ldquo;为什么&amp;quot;的能力应该由一个框架来驱动，而不是由某个单点工具。这是一个如此重要的指标性问题，我们提出来作为本节的结尾。如果43%的受访者将他们的数据插入可观测性能力框架，那么57%的受访者则没有这样做。在下一节中，我们将通过一些关键的 &amp;ldquo;开发&amp;rdquo; 与 &amp;ldquo;运维&amp;quot;数据来进一步探索这一差距。&lt;/p>
&lt;h2 id="关键要点-2-人肉运维负荷的代价">关键要点 2 ：人肉运维负荷的代价&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre3.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>实施 DevOps 的 SRE 原则，通过设计和构建可观测性的系统来预防事故。努力将可靠性进一步向左移动，获得降低成本、团队调整和业务收益等成果。以开发工作与运维工作各占一半时间为基准，在运维工作中 On-Call 值守的比例不超过 25%。然后，当你向着预防的最终目标进行管理场景的迭代时，找出制约因素，从而消除约束点。达成最后成果以奠定了一个 SRE 团队的基础。当你消除约束点时，之后相应的更新你的场景。&lt;/p>
&lt;/blockquote>
&lt;p>如果维持系统的成本有高达90%是发生在系统的部署之后（即向右转移），那么为什么企业还是以操作型、被动式为主的方式来进行？在这本章的这个小节中，我们探讨了这一问题，并提出企业的 SRE 有机会向左转移，帮助企业履行所有的工作，并转化为成熟的、可观测性的能力。&lt;/p>
&lt;p>Google 建议应该有一个上限目标，即50%的运维工作和50%的开发工作（或者称为&amp;quot;55分&amp;rdquo;）。在理想情况下，运维工作的数量应该比这少得多。运维工作中的 On-Call 部分应该不超过25%。开发活动与运维活动各占一半工作量的目标似乎是一个空想。根据调查数据显示，大部分工作都是以运维类活动为主。&lt;/p>
&lt;p>&lt;strong>SRE 的工作时间中开发工作的比例占多少&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145777848228.jpg"
loading="lazy"
>&lt;/p>
&lt;p>当受访者被问到：“SRE 的工作时间中开发工作的比例占多少？”这个问题时，只有 14% 的人表示超过 50%。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145778274283.jpg"
loading="lazy"
>&lt;/p>
&lt;p>当被问到基本相同的问题时（但列出具体的选择让人们选择），如 &amp;quot; 在这些活动中哪些活动是SRE工作的一部分？&amp;ldquo;时，结果令人大开眼界。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145781100582.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>25% : 选择开发活动（如：开发应用，写有助于运维的软件）&lt;/li>
&lt;li>75% : 选择运维活动（如：处理工单，事故响应）&lt;/li>
&lt;/ul>
&lt;p>在家工作两个半月后，净增10%的受访者表示，他们的活动已经转变为包含更多的运维工作。&lt;/p>
&lt;p>&lt;strong>居家工作的 Dev vs Ops&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.25.46%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.25.46 A"
>&lt;/p>
&lt;p>&lt;strong>在家工作以来，你的工作活动有什么变化？（Dev vs Ops）&lt;/strong>
&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.26.09%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.26.09 A"
>&lt;/p>
&lt;ul>
&lt;li>太多的开发 5%&lt;/li>
&lt;li>多了一些开发 11%&lt;/li>
&lt;li>大致相同 57%&lt;/li>
&lt;li>更多运维 17%&lt;/li>
&lt;li>太多的运维 9%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>在你的组织中，谁在执行 SRE 工作活动？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.28.36%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.28.36 A"
>&lt;/p>
&lt;ul>
&lt;li>我们有一个专门的SRE团队，独立于其他运营/管理团队。46%&lt;/li>
&lt;li>DevOps团队处理SRE活动。19%&lt;/li>
&lt;li>业务和系统管理小组负责SRE活动。16%&lt;/li>
&lt;li>SRE活动在全组织范围内开展，而不是局限于一个团队。13%&lt;/li>
&lt;li>SRE对我们来说还是个新事物，我们还不清楚这是否需要单独的。7%&lt;/li>
&lt;/ul>
&lt;p>如果我们都在通过设计和实施可观测系统来进行预防，那么我们还有很长的路要走。首先，我们要走的路很长。最重要的是，考虑采用&amp;rdquo;&lt;strong>建立它，就会实现&lt;/strong>&amp;ldquo;的方法来改造一个 SRE 组织。首先要从识别那些作为是DevOps 的 SRE 工作开始。根据我们的调查，83%的人认为自己在做 SRE 活动。不过，我们提醒大家，你认为正在从事的 SRE 活动，并不意味着你是一个 SRE 。这是因为我们必须将其作为一个整体来考虑，而不是将其作为一部分或几块。 SRE 团队的定义越来越明确，但跨度也越来越大。在不同的焦点上，确实使 SRE 工作被埋没或隐藏起来。&lt;/p>
&lt;p>46%的人声称有一个专门的 SRE 团队。然而，53%的人表示，他们在生命周期的后期才参与其中，因此遇到了挑战，52%的人表示说他们花了太多时间排错（稍后再谈）：关键的 SRE 反模式指标。&lt;/p>
&lt;p>对事故和问题作出反应是 SRE 生活的一部分。如果我们重新提出了一个核心目标，即通过设计预防措施来实现可观测系统，那么旅程的阶段可能是这样的。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.36.40%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.36.40 A"
>&lt;/p>
&lt;blockquote>
&lt;p>被动的 -&amp;gt; 主动的 -&amp;gt; 前瞻/预防的&lt;/p>
&lt;/blockquote>
&lt;p>在这种情况下，我们问 SRE 们都进行哪些被动性活动。在这一问题上，我们问道：&amp;rdquo; SRE 从事哪些被动活动？这里的目的是帮助确定公司可能在哪些方面开始成熟起来。根据自己的业务和组织的背景，从被动到主动。&lt;/p>
&lt;p>从每一个问题的结果来看，事后回顾和应对系统产生的告警分别名列前茅。然而，读者查看这些结果的另一种方法，是将他们分类看。然后判断你是否应该在某个分类上更成熟。例如，如果事后回顾类型与分析包括 SLI 和 SLO 在内的度量指标有重叠，然后再考虑是否可以将整体分析作为预防之路的起点。&lt;/p>
&lt;p>&lt;strong>在你的组织内， SRE 参与了哪些 &amp;ldquo;被动 &amp;ldquo;活动？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.35.25%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.35.25 A"
>&lt;/p>
&lt;ul>
&lt;li>通过计划的活动对问题进行事后分析。80%&lt;/li>
&lt;li>响应系统生成的告警信息 75%&lt;/li>
&lt;li>分析指标，包括 SLI、SLO、SLA等指标 72%&lt;/li>
&lt;li>文档记录所获的知识 69%&lt;/li>
&lt;li>基础设施问题的维修 68%&lt;/li>
&lt;li>On-Call 轮值 68%&lt;/li>
&lt;li>审查并回应客户报告的支持工单 58%&lt;/li>
&lt;li>一般行政任务（如进度报告、内务管理）49%&lt;/li>
&lt;li>重现客户报告的问题 47%&lt;/li>
&lt;li>为客户安装、配置和/或调试应用程序。41%&lt;/li>
&lt;/ul>
&lt;p>如果没有人在做救火的反应，那么我们可以认为我们所做的一切都是主动的。与其孤立地辩论一项活动的性质，不如转移话题，提问&amp;quot;我们这样做能防止什么事情发生？&amp;quot;。这样，在讨论 SRE 章程是什么样子的时候，对话就可以转向基于结果的方式。理想情况下，我们希望将服务运维优化到不再需要持续的人力工作的程度，这样 SRE 团队就可以专注于高价值的活动。&lt;/p>
&lt;p>&lt;strong>你在哪些 &amp;ldquo;主动&amp;quot;活动上花费了适度或大量的时间？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.49.01%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.49.01 A"
>&lt;/p>
&lt;ul>
&lt;li>自动化任务，使其无需手动执行。61%&lt;/li>
&lt;li>监控和分析系统指标，以发现可能导致未来出现故障或SLA问题的趋势。56%&lt;/li>
&lt;li>支持部署后行动 54%&lt;/li>
&lt;li>SRE专用系统规划 53%&lt;/li>
&lt;li>编写优化运维操作的软件 48%&lt;/li>
&lt;li>与开发部门合作，帮助开发应用程序 42%&lt;/li>
&lt;li>系统的预防性维护 41%&lt;/li>
&lt;li>容量规划活动 38%&lt;/li>
&lt;li>通过混沌工程等实践进行弹性检查。19%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>作为 SRE 工作的一部分， SRE 要做哪些活动？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.54.12%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.54.12 A"
>&lt;/p>
&lt;ul>
&lt;li>监控 89%&lt;/li>
&lt;li>事故响应/故障单和解决升级问题 83%&lt;/li>
&lt;li>指标分析 78%&lt;/li>
&lt;li>帮助基础设施和业务能力规划的努力 74%&lt;/li>
&lt;li>与开发部门合作，帮助他们开发应用程序 74%&lt;/li>
&lt;li>记录所获知识 71%&lt;/li>
&lt;li>编写软件帮助操作 65%&lt;/li>
&lt;li>质量保证测试和发布 30%&lt;/li>
&lt;/ul>
&lt;p>当去掉主动或被动的限定词，问&amp;rdquo; SRE 在这些活动中，哪些是作为 SRE 工作的一部分&amp;quot;时，我们看到监控和事故管理被列为首要活动。同样重要的是，编写优化运维操作的软件被排在第五位。牢记开发应该是最主要的活动类型（相对于运维），考虑是什么原因导致了目前的状态。&lt;/p>
&lt;ul>
&lt;li>章程是否不正确或不存在？&lt;/li>
&lt;li>是否没有考虑到 SRE 原则的必要性？&lt;/li>
&lt;li>是否没有评估以客户为中心提供服务的方法？&lt;/li>
&lt;li>还能问什么？接着问&amp;quot;为什么&amp;rdquo;？&lt;/li>
&lt;/ul>
&lt;p>一旦 SRE 的工作和价值得到认可，就可以开始得到回报。为了帮助获得支持，将对话与某种业务背景联系起来。例如，当可靠性被提前考虑而不是推迟考虑时，就会降低系统的拥有成本。让一个可靠的系统，更加可靠要容易得多。&lt;/p>
&lt;p>将谈话的重点放在解决复杂问题和实现业务目标的动力和愿望上；将这一数据点作为基线。&lt;/p>
&lt;p>&lt;strong>您如何考虑 SRE 和DevOps团队的关系？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.56.33%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.56.33 A"
>&lt;/p>
&lt;ul>
&lt;li>41% 的人说DevOps和 SRE 是同一个团队的一部分。&lt;/li>
&lt;li>26% 的人说DevOps和 SRE 是互补的。&lt;/li>
&lt;li>19% 表示不知道&lt;/li>
&lt;li>11% 表示二者是竞争关系&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>在度量变更的业务影响方面，这些指标各有多重要？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%209.58.23%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 9.58.23 A"
>&lt;/p>
&lt;ul>
&lt;li>客户满意度下降 82%&lt;/li>
&lt;li>收入损失 79%&lt;/li>
&lt;li>客户流失 79%&lt;/li>
&lt;li>雇员生产力下降 69%&lt;/li>
&lt;li>社交媒体的吐槽 59%&lt;/li>
&lt;/ul>
&lt;p>幸运的是，调查对象能够阐明如何从业务角度衡量成功。&lt;/p>
&lt;p>修炼能力是获得正向业务成果的通道。当进行&amp;quot;我们为什么需要 SRE &amp;ldquo;的对话时，不要只谈能力或只谈积极的结果。相反，要将它们结合起来，说&amp;quot;这些能力将帮助我们实现这些结果&amp;rdquo;。&lt;/p>
&lt;p>&lt;strong>有多少个专职与 SRE 活动的团队成员？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202020-10-02%20at%2010.56.40%20AM.jpg"
loading="lazy"
alt="Screen Shot 2020-10-02 at 10.56.40 A"
>&lt;/p>
&lt;p>在本节结束时，有一个巨大的机会，可以在早期阶段将被动的业务工作向左移。从&amp;quot;不仅仅是帮助开发&amp;rdquo;，而是&amp;quot;从工作结果中获取反馈，并将其作为一种投资，用于帮助构建/提升产品或服务的可观测性&amp;rdquo;。例如，在 SRE 拿起那个传呼机后（开始 OnCall 工作），他们所记录的注意事项，可能会引指导下一波服务的开发工作，以避免落入相同的坑。&lt;/p>
&lt;p>我们最后的想法是， SRE 参与整体生命周期的想法适用于任何组织的规模。换句话说，旅程的各个阶段还是一样的。&lt;/p>
&lt;blockquote>
&lt;p>实施 DevOps 的 SRE 原则，通过设计和构建可观测性的系统来预防事故。努力将可靠性进一步向左移动，获得降低成本、团队调整和业务收益等成果。以开发工作与运维工作各占一半时间为基准，在运维工作中 On-Call 值守的比例不超过 25%。然后，当你向着预防的最终目标进行管理场景的迭代时，找出制约因素，从而消除约束点。达成最后成果以奠定了一个 SRE 团队的基础。当你消除约束点时，之后相应的更新你的场景。&lt;/p>
&lt;/blockquote>
&lt;h2 id="关键要点3-远程工作转型带来了机遇和挑战">关键要点3 ：远程工作转型带来了机遇和挑战&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre3.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>将新出现的或以前被忽视的挑战转化为战略上差异化的机会。关注士气、员工体验、工作/生活平衡、员工参与度和情绪等挑战，可以展示公司员工至上的心态，吸引或留住顶尖人才。&lt;/p>
&lt;/blockquote>
&lt;p>任何其他头衔的 SRE 仍然会创造商业价值。但是，企业是否重视他们的 SRE 呢？&lt;/p>
&lt;blockquote>
&lt;p>如果说，&amp;ldquo;正确对待你的员工，他们就会正确对待你的客户 &amp;ldquo;只是一句座右铭，那么现在愿它成为你的战斗口号。&lt;/p>
&lt;/blockquote>
&lt;p>在 SRE 2020 调查问卷的一组有关在家工作前的问题中，受访者指出了他们面临的一些关键挑战。然后，在两个半月的在家工作后，又有更多的挑战浮出了水面。&lt;/p>
&lt;p>这包括以前可能被忽视的挑战，或者对一些人来说不存在的挑战，它们都浮出了水面。诸如士气、员工体验、工作/生活平衡、员工参与度和情绪等挑战；现在企业有机会将其转化为战略性的差异化资产了，公司展示出员工至上的心态。换句话说，如果说 &amp;ldquo;正确对待你的员工，他们就会正确对待你的客户&amp;quot;这句话，在以前只是一句座右铭，那么现在愿它成为一个战斗口号。&lt;/p>
&lt;p>&lt;em>居家工作之前&lt;/em>&lt;/p>
&lt;p>&lt;strong>哪些问题具有一定或极强的挑战性？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.38.55%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.38.55 P"
>&lt;/p>
&lt;ul>
&lt;li>常常在生命周期后期参与 53%&lt;/li>
&lt;li>调试时间过长 52%&lt;/li>
&lt;li>缺乏其他团队的支持 47%&lt;/li>
&lt;li>培训预算不足 46%&lt;/li>
&lt;li>监控技术过于耗时 45%&lt;/li>
&lt;li>在非办公时间经常提供支持 39%&lt;/li>
&lt;li>工作压力过大，缺乏支持 38%&lt;/li>
&lt;li>工具预算不足 36%&lt;/li>
&lt;/ul>
&lt;p>&lt;em>居家工作之后&lt;/em>&lt;/p>
&lt;p>&lt;strong>&amp;lsquo;在家&amp;rsquo;后，你面临着哪些问题？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.39.00%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.39.00 P"
>&lt;/p>
&lt;ul>
&lt;li>工作/生活平衡 60%&lt;/li>
&lt;li>团队沟通 56%&lt;/li>
&lt;li>重点/清晰度 51%&lt;/li>
&lt;li>设施，包括设备和宽带 42%&lt;/li>
&lt;li>隔离/鼓励 41%&lt;/li>
&lt;li>激励 39%&lt;/li>
&lt;li>心理健康、压力或情绪健康 37%；&lt;/li>
&lt;li>工具技术栈 23%&lt;/li>
&lt;li>界定成功指标 22%&lt;/li>
&lt;li>On-Call 值守 12%&lt;/li>
&lt;li>其他 7%&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre4.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;在这段经历中，我发现我发现：每天在家带孩子是压力最大的部分。一般来说，保持工作与生活的平衡是很困难的，但当你经常失去注意力时，很难不觉得自己和其他人是一样的努力工作（即使你的公司是支持你的）。&amp;rdquo;&lt;br>
&amp;ndash; 受访者反馈&lt;/p>
&lt;/blockquote>
&lt;p>在我们 2019 年的 SRE 报告中，得分高的&lt;strong>琐事泛滥&lt;/strong>是最严重的，59%的受访者认为组织中的琐事太多。在我们的 SRE 2020 报告中，我们重新验证了这一发现，并扩展到按分布式的数据形式展示。&lt;/p>
&lt;p>&lt;strong>SRE 的工作有百分之多少是琐事？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.41.30%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.41.30 P"
>&lt;/p>
&lt;p>&lt;strong>SRE 的工作有百分之多少是琐事？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.41.36%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.41.36 P"
>&lt;/p>
&lt;p>41%的受访者表示，他们的工作有一半或更多是琐事。考虑到： 1）高琐事率 2）附加问题中60%的受访者将工作/生活平衡列为在家工作后的头号挑战，我们建议企业从战略上考虑降低职业倦怠（透支/996）的方案。&lt;/p>
&lt;p>在此，我们将琐事（本身可能正是人们时常需要的精神激活剂）与倦怠（我们要避免的结果）区分开来。&lt;/p>
&lt;p>一个组织在处理大量的工作时，要考虑到缺乏自动化的根本原因。如果结论是由于缺乏技能或人力，那么前进的道路可能会与长期积累的大量技术债务不同。&lt;/p>
&lt;p>如果团队的目标一致，或者优先级一致，那么自动化能力是否可以扩大？首先梳理开发+运维是否有根本性的缺失？最起码，在&amp;quot;开发&amp;quot;与&amp;quot;运维&amp;quot;时间各占一半的情况下，要有一个基准线，以了解工作量的差距。然后，与管理者对话，使团队有一个合理的期望；而不是，例如，觉得他们应该做到‘零运维’的工作。&lt;/p>
&lt;p>&lt;strong>SRE 的琐事主要来源是那些？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.43.07%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.43.07 P"
>&lt;/p>
&lt;ul>
&lt;li>可以自动化的人工维护任务 29%&lt;/li>
&lt;li>关于可自动化的应用程序发布的工作 19%&lt;/li>
&lt;li>可以自动化的人工值守任务 18%&lt;/li>
&lt;li>解决假阳性/阴性问题 16%&lt;/li>
&lt;li>非紧急服务相关信息 13%&lt;/li>
&lt;li>解决与服务无关的信息 12%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>使用自动化进行自修复的问题和事件的百分比是多少？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.44.18%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.44.18 P"
>&lt;/p>
&lt;p>45%的人说监控技术太耗时。这是一个机会，可以通过可观测性能力将重点放在预防措施上，同时还可以扩展到使用软件（而不是人）来解释数据，并判断是否需要采取行动。与其生成告警，再要求人来决定是否需要采取行动，到不如只在应该由人采取行动的时候，才触发告警。然后让系统实际执行行动。&lt;/p>
&lt;p>为了帮助企业实现这种向可操作性告警方向转变，我们说：&amp;ldquo;你不可能对所有的事情都进行监控和告警，所以先从最重要的事情：开始对‘用户体验’监控和告警&amp;rdquo;。在这种情况下，各种人工智能(&amp;ldquo;AI&amp;rdquo;)或机器学习(&amp;ldquo;ML&amp;rdquo;)能力才可能会有用武之地。&lt;/p>
&lt;p>16%的人认为解决假阳性/阴性是一个主要的苦恼来源。&lt;/p>
&lt;p>&lt;strong>您是否使用自动化工具进行容量规划和制备？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.45.02%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.45.02 P"
>&lt;/p>
&lt;ul>
&lt;li>手工容量规划+自动化制备&lt;/li>
&lt;li>手工制备+自动化容量规划&lt;/li>
&lt;li>容量规划和制备都是手工的&lt;/li>
&lt;li>是的，容量规划和制备都是自动化的&lt;/li>
&lt;li>容量规划根据预算周期或者是否冻结走&lt;/li>
&lt;/ul>
&lt;p>看到这个数据，我们有些惊讶。在我们的2018年 SRE 报告中，65%的受访者表示，他们全部或部分使用云计算。我们预计这个数字从那时起就会增加（尽管我们今年没有明确提出这个问题）。随着云提供的各种功能，包括各种 &amp;ldquo;特性/函数即服务&amp;rdquo;，我们对评估什么是可自动化的，以减少琐事和随后的透支的建议仍然是相同的：当在分析组织中为何存在大量琐事时，缺乏自动化解决方案，最可能被认为是根本原因。那如果得出的根因结论却是：技能或能力的欠缺呢？那么在前方的道路上，可能就不会在长期的积累大量技术债务了。&lt;/p>
&lt;p>&lt;strong>您的 SRE 团队成员有哪些培训和认证？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.45.53%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.45.53 P"
>&lt;/p>
&lt;ul>
&lt;li>内部辅导和培训方案 78%&lt;/li>
&lt;li>云厂商认证（如 AWS，GCP，Azure） 51%&lt;/li>
&lt;li>工具厂商的培训或特殊工具 40%&lt;/li>
&lt;li>个人或者团队参加第三方 DevOps 课程 29%&lt;/li>
&lt;li>个人或者团队参加第三方 SRE 课程 24%&lt;/li>
&lt;li>个人或者团队参加第三方 ITILv3 课程 16%&lt;/li>
&lt;/ul>
&lt;p>缺乏预算和培训（来自前面的挑战清单），再加上大量的琐事，就会导致透支。正如我们增编问题的数据所显示的那样，这些问题更加严重，工作/生活平衡（60%）和专注/清晰（51%）是在家工作之后，关于‘幸福感’（well-bing）的两个最高挑战。&lt;/p>
&lt;p>内部辅导和培训是之间存在着关联性的方案(78%)，但对 SRE 培训的预算不足。这表明&lt;strong>内部计划&lt;/strong>可能不那么有效。该数据也让我们不得不问，是否调试时间过长（52%）？是因为培训在这里也是一个空白。既然内部培训是最主要的培训方式，那么就要看这些项目的效果。培训教练或团队领袖是否是该领域的专家？这是否是一个挑战？希望做内部培训是否是没有预算的直接后果？牢记我们的愿望是：让员工提高工作效率，那么深入的 ** SRE 培训** 和扎实的理解 SRE 角色是必不可少的，通过设计和实施系统的可观测性，来实施预防措施的路线图。&lt;/p>
&lt;p>我们还是将&lt;strong>缺乏工具预算的问题&lt;/strong>也纳入了培训的这一章节，因为缺乏预算是两者之间的共同主题。不幸的是，员工生产力下降的指标，是商业影响的第二低指标，因此投资于培训可能是应该开始做了。&lt;/p>
&lt;p>在 2019 年的 SRE 报告中，琐事和压力是首当其冲的焦点。我们可能用的是一些预期的反应来调查。&lt;/p>
&lt;p>&lt;strong>你在家后面临哪些心理/个人幸福感的挑战？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.47.10%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.47.10 P"
>&lt;/p>
&lt;ul>
&lt;li>工作/生活平衡 60%&lt;/li>
&lt;li>专注/清晰 51%&lt;/li>
&lt;li>隔离 41%&lt;/li>
&lt;li>动力 39%&lt;/li>
&lt;li>精神健康、压力或情感幸福感 37%&lt;/li>
&lt;li>其它 2%&lt;/li>
&lt;/ul>
&lt;p>以上问题的解决思路包括：&lt;/p>
&lt;ul>
&lt;li>使用自动化消除琐事&lt;/li>
&lt;li>通过无职责文化，消除事故回顾的压力&lt;/li>
&lt;li>通过可观测性的能力转换到主动度量，在根本上减少事件&lt;/li>
&lt;/ul>
&lt;p>大多数组织的强制在家工作的政策，都凸显了更加关注员工的幸福感的必要性。当读者看到这个关于在家的数据集时，请问：&amp;ldquo;这个数据集的结论，如何使年初调查数据的结论变得更好或更坏？&amp;quot;。例如，那些感觉到被隔离的人，在之前，他们会觉得沟通或缺乏支持是问题么？会对其有什么影响？他们会不会可能感到得到了更多或更少的支持？&lt;/p>
&lt;p>将新出现的，或以前被忽视的挑战转化为战略上的差异化机会。关注士气、员工体验、工作/生活平衡、员工参与度和情绪等挑战，可以展示公司员工至上的心态，以吸引或留住顶尖人才。&lt;/p>
&lt;h2 id="关键要点4-远程-sre-光明的未来">关键要点4 ：远程 SRE 光明的未来&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre5.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>重新评估各种业务连续性方案。考虑是否需要调整&lt;strong>恢复时间&lt;/strong>和&lt;strong>恢复时间点&lt;/strong>。在进行灾难或连续性演习时，确定现在可以实施预防措施的机会领域。在您的 SRE 章程中记录任何新的洞见。&lt;/p>
&lt;/blockquote>
&lt;p>在我们的 SRE 2018 年调查中，按《纽约时报》的风格，这个标题是这样说的。&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;如果你想远程工作， SRE 角色可能不适合你。虽然有些 SRE 是远程工作的，但 81% 的 SRE 表示，他们团队的所有或大部分工作都在办公室里进行的。&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>我们想到的第一个问题是：&amp;ldquo;当世界重新开放时，你的员工中，有百分之多少会首选&amp;quot;远程/在家办公&amp;rdquo;（有多少比例的人的次要选择是&amp;quot;现场/办公室&amp;rdquo;）？&amp;rdquo; 在一个异步、世事纷繁的时代，这个数据可能不会让你感到惊讶。&lt;/p>
&lt;p>&lt;strong>预期远程工作人员的百分比&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.50.10%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.50.10 P"
>&lt;/p>
&lt;p>考虑到从全员现场、到分布式劳动力的转变，我们希望进一步研究其他变化因素，为决策者提供一个投资方向。需要应对哪些新的挑战？&lt;strong>事件管理&lt;/strong>是什么样的？如果没有了办公桌，将如何运行他们的灾难恢复桌面演习？&lt;/p>
&lt;p>我们不想在说&amp;quot;远程 SRE 的未来很遥远&amp;quot;的时候，做出&amp;quot;水很深 &amp;ldquo;式的说法。而是说，远程 SRE 的未来是光明的，但也要注意以下几点。&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;小学教师工资发的不够&amp;hellip;&amp;hellip;&amp;rdquo;
&amp;ndash;调查对象&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre6.jpg"
loading="lazy"
>&lt;/p>
&lt;p>牢记本报告之前关于&lt;strong>希望通过设计和实施可观察系统&lt;/strong>来预防事故的评论。然后考虑这些直接、宏观的问题，对你的 SRE 章程有什么影响。&lt;/p>
&lt;p>主动式与被动式相比（向更多的被动式净增2%）没有开发与运维相比（向更多的运维净增10%）的差距那么大。在这里，我们再次参考在家工作前的数据，表明75%的受访者在做运维活动（而25%在做开发活动）。&lt;/p>
&lt;p>&lt;strong>自从 &amp;ldquo;在家工作 &amp;ldquo;后，你的活动有什么变化？(主动与被动)&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145887375405.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>太多主动了 4%&lt;/li>
&lt;li>主动多些 14%&lt;/li>
&lt;li>基本一致 60%&lt;/li>
&lt;li>有点被动 16%&lt;/li>
&lt;li>太被动了 4%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>自从 &amp;ldquo;在家工作 &amp;ldquo;后，你的活动有什么变化？(开发与运维)&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145888275975.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>太多开发了 5%&lt;/li>
&lt;li>开发多了一些 11%&lt;/li>
&lt;li>差不多持平 57%&lt;/li>
&lt;li>运维多了一些 17%&lt;/li>
&lt;li>太多运维了 9%&lt;/li>
&lt;/ul>
&lt;p>我们想了解事件的绝对数量以及相对数量（下一页）。需要提醒的是，&amp;ldquo;在家工作后&amp;quot;这组调查问题，在家工作的两个半月后提出的。&lt;/p>
&lt;p>&lt;strong>在家后，你负责的站点或应用经历的事故更多/少吗？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145889082162.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>无/零 17%&lt;/li>
&lt;li>1 次 9%&lt;/li>
&lt;li>2~5 次 42%&lt;/li>
&lt;li>6~10 次 11%&lt;/li>
&lt;li>要多得多 21%&lt;/li>
&lt;/ul>
&lt;p>对于，&amp;ldquo;自家工作以来，发生的事件多还是少&amp;rdquo;，数据形成了一条正态分布的钟形曲线。不过，在这个问题中，最突出的是7%的人不知道!&lt;/p>
&lt;p>&lt;strong>在家后，你所负责的站点或应用经历了更多/少的事故&lt;/strong>
&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.57.02%20PM-1.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.57.02 P"
>&lt;/p>
&lt;ul>
&lt;li>更少 9%&lt;/li>
&lt;li>差不多相同 73%&lt;/li>
&lt;li>更多事故 9%&lt;/li>
&lt;li>不知道 7%&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145898292315.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>流量增长和/或容量问题 54%&lt;/li>
&lt;li>第三方问题 37%&lt;/li>
&lt;li>发布管理相关变更 25%&lt;/li>
&lt;li>测试和质量控制 25%&lt;/li>
&lt;li>安全 4%&lt;/li>
&lt;li>其它 16%&lt;/li>
&lt;/ul>
&lt;p>流量和(或)容量问题的增加被认为是导致事故增加的首要因素。&lt;strong>第三方&lt;/strong>被认为是第二大因素，这也是为什么，我们在本报告的第一部分中，讨论了有必要考虑如何处理第三方依赖的策略。&lt;/p>
&lt;p>我们想指出，只有那些表示自从在家工作后发生更多事故的受訪者们，才被问及这个问题。但我们想把数据包括在内，考虑到尽职。&lt;/p>
&lt;p>净+9%的受访者表示，自从在家之后，事件管理变得更加有效。这是一个令人振奋的数据，我们不知道更好的事件管理是否与公司做更少的发布有关（根据 Atlassian 的这个数据，66%的受访者已经放慢了他们软件的发布频率) 注意14%的受访者选择了&lt;strong>无法评价&lt;/strong>和&lt;strong>识别机会&lt;/strong>，看看是否是由于在家的原因。&lt;/p>
&lt;p>&lt;strong>请评价贵公司自&amp;quot;在家&amp;quot;以来事故管理流程的有效性&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145899532646.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>&amp;ldquo;在家 &amp;ldquo;时，效果较差（MTTR较高）5%。&lt;/li>
&lt;li>大约相同的MTTR 66%&lt;/li>
&lt;li>&amp;ldquo;在家&amp;quot;时更有效(MTTR较低) 14%。&lt;/li>
&lt;li>无法评价 14%&lt;/li>
&lt;/ul>
&lt;p>我们在 &amp;ldquo;在家后&amp;rdquo; 调查中问的最后一个直接问题是：&amp;ldquo;你或你团队中的任何人，是否不得不去现场？&amp;rdquo; 对于回答&amp;quot;是&amp;quot;这个问题的14%的人，我们后续的开放式问题：&amp;ldquo;有多少次？他们的答案各种都有，有总是和每班一个人（跟着太阳走）的，有只有一次和每两周一次的。&lt;/p>
&lt;p>&lt;strong>从&amp;rsquo;在家&amp;rsquo;开始，你有没有不得不去现场过？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/16145899912972.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>是的 14%&lt;/li>
&lt;li>不是 86%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&amp;lsquo;在家&amp;rsquo;后，事故管理在哪些方面变得更具挑战性？&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%208.59.41%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 8.59.41 P"
>&lt;/p>
&lt;ul>
&lt;li>检测事故发生/宕机 9％&lt;/li>
&lt;li>查明事故根本原因 9％&lt;/li>
&lt;li>向正确的团队升级 28%&lt;/li>
&lt;li>修复根因 8%&lt;/li>
&lt;li>验证修复是否成功 13%。&lt;/li>
&lt;li>以上的都不是 51%&lt;/li>
&lt;/ul>
&lt;p>在我们努力结束今年的报告之际，我们提供最后一个数据点。公司重新评估他们将如何继续运营。我们问道：&amp;ldquo;你们多久执行一次针对在家场景的灾难恢复演练&amp;rdquo; 当你考虑到你的各种恢复时间可能是如何 受影响的情况下，考虑到以前的路径，到预防性的座右铭，因此你要努力设计和实施系统的可观察的问题。&lt;/p>
&lt;p>&lt;strong>你们多久执行一次针对在家场景的灾难恢复演练？&lt;/strong>
&lt;img src="https://martinliu.cn/img/2021/Screen%20Shot%202021-02-28%20at%209.00.47%20PM.jpg"
loading="lazy"
alt="Screen Shot 2021-02-28 at 9.00.47 P"
>&lt;/p>
&lt;ul>
&lt;li>完全没有 40%&lt;/li>
&lt;li>还没有；我们正在计划26%&lt;/li>
&lt;li>随机19%&lt;/li>
&lt;li>每月5%&lt;/li>
&lt;li>每周5%&lt;/li>
&lt;li>其它5%&lt;/li>
&lt;/ul>
&lt;p>可观测性是指能够回答&amp;quot;为什么我们客户体验到了这个效果？&amp;rdquo; 是不是因为第三方，应用代码、传输网络或其他交付链中的组件，如DNS或CDN？然后使用这些答案来迭代改进现有的，或新建的产品或服务。&lt;/p>
&lt;p>当&amp;quot;内建&amp;quot;可靠性时，要考虑到开发和运维之间的分裂。在您制定 SRE 章程时，您可以将其与业务工作进行比较。这里的目标是：尽早将可靠性纳入其中，因为提升一个已经靠谱了的系统，还是要来的要更容易些。&lt;/p>
&lt;p>最后，考虑到您的员工队伍的分布性质，并承认可能被忽视或被忽视的一系列挑战。无论存在与否，都要考虑到诸如，琐事、缺乏支持、工作/生活平衡，以及，孤独感可能会导致的某些操作规则或流程被取消，都要从根上重新进行评估。&lt;/p>
&lt;h2 id="方法论">方法论&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/2021/sre7.jpg"
loading="lazy"
>&lt;/p>
&lt;p>2020年1月，Catchpoint进行了一项通过电子邮件列表和社交媒体推广的 SRE 调查。 该调查询问了来自不同行业的技术专业人员，调查关于他们作为&lt;strong>站点可靠性工程师&lt;/strong> SRE 角色。通过报告，这组问题被称为&amp;quot;预先&amp;quot;问题集。&lt;/p>
&lt;p>2020年6月，Catchpoint 又进行了一项增补调查，加入了关于新冠疫情（COVID 19）后，居家办公的考虑。这组问题旨在询问各种&amp;quot;发生了什么变化&amp;quot;的问题，被称为&amp;quot;后疫情&amp;quot;或&amp;quot;在家 &amp;ldquo;问题集。&lt;/p>
&lt;p>在编写本报告时，收到了共有594名调查对象的反馈。在预定的时间里，其它人在格式化本报告和编写附录的过程中在也纷至沓来，统计周期的只对本报告的统计数字产生了较小的影响，不超过1%。&lt;/p></description></item><item><title>Elastic 可观测性工作坊</title><link>https://martinliu.cn/blog/elastic-%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E5%B7%A5%E4%BD%9C%E5%9D%8A/</link><pubDate>Sat, 06 Feb 2021 10:36:12 +0800</pubDate><guid>https://martinliu.cn/blog/elastic-%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E5%B7%A5%E4%BD%9C%E5%9D%8A/</guid><description>&lt;img src="https://martinliu.cn/img/2021/Hubble_01.jpg" alt="Featured image of post Elastic 可观测性工作坊" />&lt;p>本工作坊包括本地虚拟机版本、AWS 和腾讯云共三个版本，目标是用实践的方式理解 Elastic 可观测性解决方案。可观测性是解决运维云原生应用的复杂性和分布式式难点的关键所在。&lt;/p>
&lt;h2 id="简介">简介&lt;/h2>
&lt;p>Elastic 可观测性解决方案是基于 Elastic Stack 的一站式解决方案。该解决方案具有完备的日志、指标、APM 和可用性采集能力，可以在大规模/云原生的环境下，完成服务质量目标（SLO）的管理。本实战工作坊基于多层架构的宠物诊所为示例应用程序，手把手的引导参与者搭建可观测性管理平台，体验分层次的收集整合、分析、关联和搜索运维数据的全过程。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/elastic-obv-solution.png"
loading="lazy"
alt="可观测性解决方案"
>&lt;/p>
&lt;h2 id="为什么要做这个工作坊">为什么要做这个工作坊？&lt;/h2>
&lt;p>从理论的理解到技术工具的实操掌握需要一个过程。&lt;/p>
&lt;ul>
&lt;li>关于可观测性的各种一小时左右的技术、方案、产品分享，完全无法让听众正确理解可观测性的相关概念&lt;/li>
&lt;li>而通过实操性质的，上机动手实验则可以让新手迅速入门，使熟手快速全面的提高&lt;/li>
&lt;li>大量 ELK 用户只使用到了日志管理的部分功能，还不了解任何一种可观测性管理方案的全貌&lt;/li>
&lt;li>社区里的朋友们对可观测性心存大量误解，如“ APM 工具就等于可观测性” 等等，因此相关的正确观念和技术急需尽快普及&lt;/li>
&lt;/ul>
&lt;p>通过半天的实战演练，彻底学会相关知识。&lt;/p>
&lt;h2 id="动手实验">动手实验&lt;/h2>
&lt;p>本工作坊的最佳参与方式是在老师的引导下，在线下/线上同步进行。其次是在视频的指导下自学。所有动手实验的目标是：理解可观测性解决方案的各个组成部分，以及为什么要使用这些工具？而且这个整个方案的实施过程和顺序也是经过精心设计的，目标是让理论和实际彻底融会贯通。&lt;/p>
&lt;p>您将会学到：&lt;/p>
&lt;ol>
&lt;li>搭建单节点 Elasticsearch 服务，并且配置好 Kibana 管理图形管理界面。&lt;/li>
&lt;li>学习可观测性的基本概念和实施步骤&lt;/li>
&lt;li>搭建和配置服务健康检查的探针&lt;/li>
&lt;li>部署采集操作系统性能监控指标的流程&lt;/li>
&lt;li>配置操作系统日志的采集和分析工具&lt;/li>
&lt;li>搭建用于 APM 追踪分析的后台服务&lt;/li>
&lt;li>运行一个多层架构的宠物商店应用，对各个子服务进行 APM 监控埋点&lt;/li>
&lt;li>配置常用的服务质量监控大屏&lt;/li>
&lt;/ol>
&lt;p>本工作坊课程基于如下的应用系统。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/16042852442364.png"
loading="lazy"
>&lt;/p>
&lt;p>应用基本概况：&lt;/p>
&lt;ul>
&lt;li>多层宠物商店应用系统&lt;/li>
&lt;li>所有组件都部署在一个虚拟机上&lt;/li>
&lt;li>包括前端、后端和内置的数据库&lt;/li>
&lt;li>使用到的技术有 JavaScript、NodeJs 和 Java Spring 等。&lt;/li>
&lt;li>本应用系统是被监控的对象&lt;/li>
&lt;/ul>
&lt;p>Elastic Stack 的基本状况：&lt;/p>
&lt;ul>
&lt;li>版本 7.9.3&lt;/li>
&lt;li>组件 Elasticsearch、Kibana、APM、Filebeat、Metricbeat 和 Heatbeat。&lt;/li>
&lt;/ul>
&lt;p>实验环境：&lt;/p>
&lt;ul>
&lt;li>本地虚拟机环境，打包好的虚拟机里包含了所有必要的软件包和演示应用。&lt;/li>
&lt;li>AWS 云环境，本课程所使用的公共 AMI 操作系统镜像：宁夏区 &lt;code>ami-0e5a0e294902966af&lt;/code> 北京区 &lt;code>ami-0e1382088b62cb38d&lt;/code>&lt;/li>
&lt;li>腾讯云环境，基于腾讯云提供的 Elasticsearch 服务，演示用的虚拟机在制作中，稍后会发布到云市场。&lt;/li>
&lt;li>阿里云环境，基于阿里云提供的 Elasticsearch 服务的课件正在开发中。&lt;/li>
&lt;/ul>
&lt;h2 id="可观测性构建四步法">可观测性构建四步法&lt;/h2>
&lt;p>可观测性依赖于应用系统自身和监控工具平台的配合实现。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/e2e85893b5dd8014.jpeg"
loading="lazy"
alt="可观测性"
>&lt;/p>
&lt;p>分层次的构建可观测性的推荐过程如下：&lt;/p>
&lt;ol>
&lt;li>STEP0：使用 Heatbeat 构建轻量灵活的服务健康检查能力&lt;/li>
&lt;li>STEP1：使用 Metricbeat 构建全面细致的指标采集能力&lt;/li>
&lt;li>STEP2：使用 Filebeat 构建高维度的日志采集能力&lt;/li>
&lt;li>STEP3：使用 APM 构建分布式应用系统的全堆栈追踪能力&lt;/li>
&lt;/ol>
&lt;p>通过以上的四个构建步骤，使用 Elastic Stack 实施四大服务质量监控能力的构建，搭建了持续统一运维管理的工具平台。&lt;/p>
&lt;p>使用 SRE 基于‘用户旅程’或‘系统边界’的 SLO 分析设定方法，从 Elastic Stack 的已有数据采集能力中，选取第批直接可用的 SLI 采集点。在基于 SLO 的监控过程中，不断的优选 SLI，调整告警的数量和质量，为开发团队提供持续有效的反馈。&lt;/p>
&lt;p>使用 Canvas 的画布功能，定制如下的 SLO 监控大屏。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-11-05_00-13-06.jpeg"
loading="lazy"
alt="2020-11-05_00-13-06"
>&lt;/p>
&lt;h2 id="工作坊课件">工作坊课件&lt;/h2>
&lt;p>讲师 PPT 下载： &lt;a class="link" href="https://docs.qq.com/slide/DUGRzYVVTU3ZxblBP" target="_blank" rel="noopener"
>https://docs.qq.com/slide/DUGRzYVVTU3ZxblBP&lt;/a>&lt;/p>
&lt;h4 id="本地虚拟机环境">本地虚拟机环境&lt;/h4>
&lt;p>可以使用本地的 VirtualBox 或者 VMWare 的虚拟机环境，配合以下课件完成所有练习。&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/one-nodes-es-server/#0" target="_blank" rel="noopener"
>‘Elastic Stack 单节点搭建’ 课件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/elastic-observability-foundation/#0" target="_blank" rel="noopener"
>‘Elastic 可观测性方案’ 课件&lt;/a>&lt;/li>
&lt;/ol>
&lt;h4 id="aws-云计算环境">AWS 云计算环境&lt;/h4>
&lt;p>可以使用 AWS 云计算（中国区北京或宁夏区）环境，配合以下的课件完成所有练习。&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/one-nodes-es-server/#0" target="_blank" rel="noopener"
>‘Elastic Stack 单节点搭建’ 课件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/elastic-observability-foundation/#0" target="_blank" rel="noopener"
>‘Elastic 可观测性方案’ 课件&lt;/a>&lt;/li>
&lt;/ol>
&lt;h4 id="腾讯云计算环境">腾讯云计算环境&lt;/h4>
&lt;p>可以使用腾讯云计环境，配合以下的课件完成所有练习。&lt;/p>
&lt;ol>
&lt;li>在本环境下，不需要搭建 Elastic Stack 的服务器，参展下面课件的第二步骤，创建 Elasticsearch 服务集群。&lt;/li>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/elastic-observability-foundation-qq/#0" target="_blank" rel="noopener"
>‘Elastic 可观测性方案’ 课件&lt;/a>&lt;/li>
&lt;li>腾讯云环境录播网址：&lt;a class="link" href="https://cloud.tencent.com/developer/salon/live-1304" target="_blank" rel="noopener"
>腾讯课堂查看&lt;/a>&lt;/li>
&lt;/ol>
&lt;h4 id="阿里云计算环境">阿里云计算环境&lt;/h4>
&lt;p>可以使用阿里云环境，配合以下的课件完成所有练习。&lt;/p>
&lt;blockquote>
&lt;p>课件开发中。&lt;/p>
&lt;/blockquote>
&lt;h2 id="如何参与本工作坊">如何参与本工作坊？&lt;/h2>
&lt;p>本工作坊会在多个社区中举办，具体安排如下：&lt;/p>
&lt;ul>
&lt;li>定期在 Elastic 社区中举办可观测性主题的线上或者线下的社区活动，具体报名方式，
&lt;ol>
&lt;li>请关注 Elastic 公司的官方微公众号 “Elastic搜索”。&lt;/li>
&lt;li>关注 Elastic 公司社区在百格的社区活动报名网址：https://www.bagevent.com/org/738410&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Elasitc 用户日 专场活动，接受企业的团队预约，可以在约定的时间里，通过线上或者线下的方式进行，建议参与学习交流的人数在 10~20 人。 预约邮件： &lt;a class="link" href="mailto:zheng.liu@elastic.co" >zheng.liu@elastic.co&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>由于 Elastic Stack 产品的更新迭代速度特别快，本工作坊的软件版本和学习课件也会不定期更新。欢迎大家积极参与 Elastic 技术社区的交流和学习活动。&lt;/p></description></item><item><title>教程</title><link>https://martinliu.cn/course/</link><pubDate>Sat, 06 Feb 2021 00:00:00 +0000</pubDate><guid>https://martinliu.cn/course/</guid><description>&lt;img src="https://martinliu.cn/img/student-g0c2d46b41_640.jpg" alt="Featured image of post 教程" />&lt;h3 id="devops---免费课程">DevOps - 免费课程&lt;/h3>
&lt;blockquote>
&lt;p>持续开发中。&lt;/p>
&lt;/blockquote>
&lt;p>本课程包含虚拟化、云计算、配置管理、CI、CD 等各种实操练习实验。&lt;/p>
&lt;ul>
&lt;li>实验内容：
&lt;ul>
&lt;li>Vagrant 实验室&lt;/li>
&lt;li>Elastic Stack 实验室&lt;/li>
&lt;li>Chef 实验室&lt;/li>
&lt;li>Ansible 实验室&lt;/li>
&lt;li>Jenkins 实验室&lt;/li>
&lt;li>Pipeline 流水线实验室&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="可观测性管理---免费课程">可观测性管理 - 免费课程&lt;/h3>
&lt;p>基于 Elastic Stack 技术栈的可观测性实战工作坊，目标是让参与者彻底理解‘可观测性’对分布式复杂应用系统的作用，正确的使用可观测性工具集，实现对云原生应用或者传统应用的运维管理。&lt;/p>
&lt;ul>
&lt;li>课程详细介绍：&lt;a class="link" href="https://martinliu.cn/blog/workshop-elastic-observability/" target="_blank" rel="noopener"
>见这篇博客文章&lt;/a>&lt;/li>
&lt;li>课程讲师 PPT：&lt;a class="link" href="https://docs.qq.com/slide/DUGRzYVVTU3ZxblBP" target="_blank" rel="noopener"
>在线查看&lt;/a>&lt;/li>
&lt;li>本地环境的课件：
&lt;ul>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/one-nodes-es-server/#0" target="_blank" rel="noopener"
>‘Elastic Stack 单节点搭建’ 课件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://elk-workshop.github.io/codelabs/elastic-observability-foundation/#0" target="_blank" rel="noopener"
>‘Elastic 可观测性方案’ 课件&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>腾讯云环境录播网址：&lt;a class="link" href="https://cloud.tencent.com/developer/salon/live-1304" target="_blank" rel="noopener"
>腾讯课堂查看&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="nutanix---免费课程">Nutanix - 免费课程&lt;/h3>
&lt;ul>
&lt;li>访问地址：&lt;a class="link" href="https://nutanix.martinliu.cn" target="_blank" rel="noopener"
>点这里&lt;/a>&lt;/li>
&lt;li>简介：本实验室包含 Nutanix CE 的基础安装，没有 Nutanix 专用服务器的朋友，可以从这一步开始。这里的所有练习步骤都是 Nutanix 软件的基础操作，在企业版软件上也同样适用。&lt;/li>
&lt;li>实验内容：
&lt;ol>
&lt;li>Prism Central 部署和配置&lt;/li>
&lt;li>Nutanix Calm 基础功能&lt;/li>
&lt;li>Nutanix Calm 中级操作&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h3 id="sre-实践必修课收费">SRE 实践必修课（收费）&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>简介：本课程是 IT 从业人员的 SRE 必修课。适合于覆盖所有级别的相关人员。适合在企业在导入 SRE 和 DevOps 实践，并改革前行。一天或者两天内训。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>目标：&lt;/p>
&lt;ul>
&lt;li>在组织中对 SRE 相关的 基础、实践流程达成高度一致和认同&lt;/li>
&lt;li>详细了解在组织中制定 SLO 的流程、实施的方式&lt;/li>
&lt;li>彻底梳理 SRE 的知识体系和重要的技术实践实践&lt;/li>
&lt;li>对 SRE 的实施过程和相关案例做针对性的研讨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>课程对象&lt;/p>
&lt;ul>
&lt;li>所有对 SRE 感兴趣的人员&lt;/li>
&lt;li>从 CxO 到各种类型的工程师&lt;/li>
&lt;li>想成为 SRE/DevOps 工程师的人员&lt;/li>
&lt;li>产品经理、项目经理、一线运维经理&lt;/li>
&lt;li>DevOps Professional/Master 认证人员，Srcum Master 认证人员&lt;/li>
&lt;li>敏捷教练，DevOps 教练&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>课程内容概要&lt;/p>
&lt;ol>
&lt;li>SRE 的由来和定义&lt;/li>
&lt;li>SRE 的 5 大核心基础&lt;/li>
&lt;li>SRE 的实践和流程的特性&lt;/li>
&lt;li>经典案例分享&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;p>欲了解详情，请关注微信公众号 “MyDevOps” 联系。&lt;/p>
&lt;h3 id="sre-foundation-认证培训收费">SRE Foundation℠ 认证培训（收费）&lt;/h3>
&lt;p>详细课程介绍点下图。&lt;/p>
&lt;p>&lt;a class="link" href="https://mp.weixin.qq.com/s/LqRJfXWdm0yOlEwUa3qDDg" target="_blank" rel="noopener"
>&lt;img src="https://martinliu.cn/images/sref-zs.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>全国各个城市火热报名中，小班授课，人满就开班。&lt;/p>
&lt;p>欲了解详情，请关注微信公众号 “MyDevOps” 联系。&lt;/p></description></item><item><title>在 Github 上搭建基于 Hugo 的免费个人博客</title><link>https://martinliu.cn/blog/%E5%9C%A8-github-%E4%B8%8A%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8E-hugo-%E7%9A%84%E5%85%8D%E8%B4%B9%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</link><pubDate>Sat, 06 Feb 2021 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E5%9C%A8-github-%E4%B8%8A%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8E-hugo-%E7%9A%84%E5%85%8D%E8%B4%B9%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</guid><description>&lt;img src="https://martinliu.cn/img/2019/03/pic03.jpg" alt="Featured image of post 在 Github 上搭建基于 Hugo 的免费个人博客" />&lt;p>最近更新了新的博客样式，再次搬迁回到了 GitHub 平台，并使用了 Github Action 的自动化 CI/CD 发布功能。这个是一个任何人都可以拥有的方案，现在用最简洁的语言分享给大家。&lt;/p>
&lt;p>选择将博客搭建在 Github 上的原因包括：&lt;/p>
&lt;ul>
&lt;li>Github Pages 是一个免费使用的功能，在不强求网站访问速度，考虑持久性的情况下，Github Pages 不失为一根优秀的羊毛。&lt;/li>
&lt;li>用 master 分支管理 hugo 站点的所有代码和文件（markdown、网站模板和图片），用 gh-pages 分支存放 Hugo 编译后的网站发布文件&lt;/li>
&lt;li>Github Actions 功能实现了自动化的编译和部署功能，使用它所提供的工作流将 master 分支中的更新编译后发布到 gh-pages 分支中&lt;/li>
&lt;/ul>
&lt;p>而 Hugo 是一款比较流行的静态网站管理软件，可以在各种操作系统轻松的安装本地的博客环境，在本地的操作系统上实现博客的预览和测试。Hugo 的社区提供了大量的免费网站模板，不同类型的模板可以满足各种网站需求。&lt;/p>
&lt;h2 id="选择-hugo-博客主题">选择 Hugo 博客主题&lt;/h2>
&lt;p>在 &lt;a class="link" href="https://themes.gohugo.io/" target="_blank" rel="noopener"
>https://themes.gohugo.io/&lt;/a> 可以搜索到大量的免费网站模板。我这次选择了名为 “HUGO FUTURE IMPERFECT SLIM” 的模板。&lt;/p>
&lt;p>这是一个功能非常丰富的模板：&lt;/p>
&lt;ul>
&lt;li>界面简洁，兼具丰富的格式，博客文章有头图&lt;/li>
&lt;li>带有侧栏&lt;/li>
&lt;li>带有 ‘about’ ‘categories’ ‘contact’ 等独立页面格式，无头图&lt;/li>
&lt;li>具有多语言支持和菜单选择&lt;/li>
&lt;li>带有搜索页面&lt;/li>
&lt;li>带有讨论功能&lt;/li>
&lt;/ul>
&lt;p>对我而言这些都是很快就都可以用到的功能。&lt;/p>
&lt;p>Hugo 博客本地安装和配置新手指南，参考这两篇文章。&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/102131163" target="_blank" rel="noopener"
>零基础使用 Hugo 和 GitHub 搭建个人博客&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://sb.sb/blog/migrate-to-hugo/" target="_blank" rel="noopener"
>使用 Hugo 生成静态博客教程&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="github-pages-新手指南">GitHub Pages 新手指南&lt;/h2>
&lt;p>在 &lt;a class="link" href="https://pages.github.com/" target="_blank" rel="noopener"
>https://pages.github.com/&lt;/a> 提供了视频和文字版本的新手指南教程。为了方便新手理解，下面就使用‘user or organization site’这个最常用的选项做简要说明：&lt;/p>
&lt;ol>
&lt;li>创建与自己的 &lt;strong>Github 用户/组织&lt;/strong> 同名前缀的公开代码仓库，例如：zhangsan/zhangsan.github.io&lt;/li>
&lt;li>选择在命令行里（前提是安装配置好了 Git，否则使用图形化界面 GitHub Desktop 工具）&lt;/li>
&lt;li>克隆第一步创建的那个代码库到本地电脑的目录中。&lt;/li>
&lt;li>创建只包含 ‘Hello World’ 为内容的主页测试文件。&lt;/li>
&lt;li>推送本地的更新到 Github 服务器端&lt;/li>
&lt;li>在本地的浏览器中查看测试网页 &lt;a class="link" href="http://zhagnsan.github.io/" target="_blank" rel="noopener"
>http://zhagnsan.github.io/&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>GitHub Pages 的新手指南已经包含在了上一节推荐的两篇文章中。&lt;/p>
&lt;h2 id="使用-github-actions-自动化发布博客更新">使用 Github Actions 自动化发布博客更新&lt;/h2>
&lt;p>本地的测试环境是非常重要的，可以帮我们快速的掌握 Hugo 的基本使用方式，测试和选择网站模板。在模板确定了以后，就进入了日常的内容更新过程中，平常内容更新的工作都是在 master 分支中进行。并不会在本地操作 gh-pages 分支，这个分支里只会存放的是 Hugo 编译之后结果内容，即 public 目录中的内容。&lt;/p>
&lt;p>你可以在代码库的 Actions 标签页面中，创建一个默认的演示工作流文件，在本地做一个测试更新，用 push 动作测试触发和执行它。从无到有的创建新工作流文件的过程在这里不讲解。&lt;/p>
&lt;p>在本使用 Github Actions 的功能的主要目的如下：&lt;/p>
&lt;ol>
&lt;li>通过 master 分支的 push 事件，触发自动化工作流，即 CI/CD 工作流，这里是持续部署的过程。&lt;/li>
&lt;li>将 master 分支的内容签出，使用新配置的 Hugo 软件构建全站的所有内容&lt;/li>
&lt;li>将构建后的结果发布更新到 gh-pages 分支中。&lt;/li>
&lt;/ol>
&lt;p>下面是我所使用的工作流代码和注释。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 将 Hubo 博客构建后部署到 Github Pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: Deploy github-pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 在 master 主干分支的任何 push 事件都会触发本 DevOps 工作流水线
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">on:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> push:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> branches: [ master ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 以下是本串行执行工作流的所有组成部分
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jobs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 这里只定义了一个名为 &amp;#34;deploy&amp;#34; 的多步骤作业
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build-deploy-hugo-blog:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 将后续的所有工作步骤都运行在最新版的 ubuntu 操作系统上
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> runs-on: ubuntu-latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 本构建和部署作业的所有步骤定义如下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> steps:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 1 - Checks-out 你的代码库到 $GITHUB_WORKSPACE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Checkout blog code repo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uses: actions/checkout@v2 # 这是 Github 官方提供的一个动作模块
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> submodules: true # 同步更新所使用的 Hugo 模板
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fetch-depth: 0 # 更新到该模板最新的版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 2 - 配置最新版本的 Hugo 环境
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Setup Hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uses: peaceiris/actions-hugo@v2 # 这是 Github Actions 市场中的一个动作模块
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo-version: &amp;#39;latest&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 3 - 清理代码库中 public 目录中的内容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Clean public directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> run: rm -rf public # 彻底删除这个目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 4 - 用最新版本的 Hugo 构建个人博客站点
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Build blog site
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> run: hugo --minify
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 5 - 创建用于私有域名所需要的 CNAME 文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Create CNAME file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> run: echo &amp;#39;martinliu.cn&amp;#39; &amp;gt; public/CNAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Step 6 - 将构建好的博客站点推送发布到 gh-pages 分支
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Deploy blog to Github-pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uses: peaceiris/actions-gh-pages@v3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github_token: ${{ secrets.DEPLOY_KEY }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> publish_dir: ./public
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="后续事项">后续事项&lt;/h2>
&lt;ol>
&lt;li>解决旧文章头图空白的问题&lt;/li>
&lt;li>增加文章评论功能&lt;/li>
&lt;li>增加 CDN 功能&lt;/li>
&lt;/ol></description></item><item><title>DevOps 教练周刊 #6 | 全球 DevOps + SRE 精选资讯</title><link>https://martinliu.cn/blog/devops-%E6%95%99%E7%BB%83%E5%91%A8%E5%88%8A-#6-%E5%85%A8%E7%90%83-devops--sre-%E7%B2%BE%E9%80%89%E8%B5%84%E8%AE%AF/</link><pubDate>Mon, 31 Aug 2020 00:11:01 +0800</pubDate><guid>https://martinliu.cn/blog/devops-%E6%95%99%E7%BB%83%E5%91%A8%E5%88%8A-#6-%E5%85%A8%E7%90%83-devops--sre-%E7%B2%BE%E9%80%89%E8%B5%84%E8%AE%AF/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps 教练周刊 #6 | 全球 DevOps + SRE 精选资讯" />&lt;h2 id="宕机">宕机&lt;/h2>
&lt;ul>
&lt;li>上一周新发的宕机事故。&lt;/li>
&lt;li>近期全球重大宕机事故的分析总结、事后回顾。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>May your queries flow and your pagers stay silent.
&amp;ndash;Dave, Betsy, Niall, Stephen, and Ken&lt;/p>
&lt;/blockquote>
&lt;h3 id="上周新发事故">上周新发事故&lt;/h3>
&lt;ul>
&lt;li>Zoom 无法开始和加入会议， 官方报道 &lt;a class="link" href="https://status.zoom.us/incidents/1z2lrf4nrv8p" target="_blank" rel="noopener"
>https://status.zoom.us/incidents/1z2lrf4nrv8p&lt;/a>&lt;/li>
&lt;li>Slack 多个功能模块服务降级，甚至无法使用，官方：https://status.slack.com//2020-08/960bbb3c9d49a3cc&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt 数据中心硬件方式故障导致 API 报错，官方：https://status.io/pages/incident/55957a99e800baa4470002da/5f45330250878c04bf3fb6eb&lt;/li>
&lt;li>NZX 新西兰证券交易所遭受重大DDoS攻击导致NZX停电，交易停止。媒体：https://www.stuff.co.nz/business/122562006/major-ddos-attack-causes-nzx-power-outage-trading-halt&lt;/li>
&lt;li>eBay宕机。服务器状态最新，DNS故障和服务不可用的错误错误，媒体：https://www.express.co.uk/life-style/science-technology/1329281/eBay-down-server-status-DNS-failure-service-unavailable-error&lt;/li>
&lt;li>Heroku 发生大量的 H100 报错，官方：https://status.heroku.com/incidents/2101&lt;/li>
&lt;li>Fastly CDN 服务商的服务发生多区域性能故障，官方：https://status.fastly.com/incidents/p1lwmmv2j2gq&lt;/li>
&lt;li>Cloudflare 上周发生的这个问题，我的个人 blog 也遇到了，Google 的搜索索引服务记录了那些 500 错误，我也感到非常诧异；第三方传输供应商问题导致HTTP 5xx错误增加； 官方：https://www.cloudflarestatus.com/incidents/hptvkprkvp23&lt;/li>
&lt;/ul>
&lt;h3 id="鳄鱼杯2020年第二季度最大宕机颁">鳄鱼杯：2020年第二季度最大宕机颁&lt;/h3>
&lt;p>来源：https://statusgator.com/blog/2020/08/21/5-biggest-outages-of-q2-2020/&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/crocodile-cup-3-1.jpg"
loading="lazy"
>&lt;/p>
&lt;p>任何可能发生的坏事都会发生。这句古老的谚语100%适用于技术行业，在这个行业中，崩溃和中断远比销售和营销团队希望我们想象的要常见得多。然而，与基础设施打交道的DevOps工程师知道，要确保所有东西都能一直按预期工作是多么困难&amp;ndash;并配置监控，实际跟踪系统的健康状况，帮助防止崩溃和停机。&lt;/p>
&lt;p>在StatusGator，我们监控800多个基于云的服务的状态页面，并向用户提供即时通知。我们拥有堆积如山的宕机和中断数据，并能看到全貌，因此我们决定每季度制定一份最高宕机时间列表。我们希望我们的发现能够激励DevOps工程师去看看其他人是如何处理服务中断的，以便他们能够提高自己的可靠性。&lt;/p>
&lt;p>请继续阅读，了解2020年第二季度的五大故障，以及Slack、Zoom、GitHub、IBM Cloud和T-Mobile在这些危机中如何行动。我们还对这些故障的结果进行了评级，并很乐意听到您对我们评级的看法。&lt;/p>
&lt;h4 id="第一名-slack-全球范围的服务中断-may-12-2020">第一名 Slack 全球范围的服务中断, May 12, 2020&lt;/h4>
&lt;p>Slack是全球数千家公司的主要沟通方式，因此其稳定的正常运行时间是最重要的问题。因此，当用户在美国东部时间晚上7:30左右停止发送和接收Slack消息时，情况迅速升级为一个全面的问题。与之前的故障期间不同，这影响到了整个Slack生态系统：没有人能够登录Slack，也没有人能够收到任何通知。&amp;ldquo;Slack宕机了吗？&amp;quot;，用户们自问自答，答案是毋庸置疑的 &amp;ldquo;是！&amp;rdquo;&lt;/p>
&lt;p>美国东部时间晚上10:26，Slack报告全面恢复了服务，并再次为造成的不便道歉。更重要的是，他们在Medium上发表了一份详细的事后报告，解释了问题背后的原因，他们为克服这个问题所采取的行动，得出的结论，以及他们正在采取的措施，以消除类似情况再次发生的机会。&lt;/p>
&lt;p>欢迎阅读这篇事后总结，它的技术性很强，但即使是普通人也很容易理解。Slack在这里展示了他们对用户群成员&amp;ndash;包括开发者和大众用户群&amp;ndash;的关心，这篇文章所投射出的信心令人钦佩。&lt;/p>
&lt;p>这里需要注意的是，虽然问题本身是在美国东部时间上午8:30开始的，但直到美国东部时间晚上7:30左右，多名用户报告了Slack的问题，这个问题才完全被人察觉。在Slack团队意识到这一情况之前，他们在应用内部（当时大部分已经宕机）、Twitter上、Downdetector上、Slack网站（很快就宕机了）以及其他许多渠道进行了报告。&lt;/p>
&lt;h4 id="第二名-zoom-宕机-may-17-2020">第二名 Zoom 宕机, May 17, 2020&lt;/h4>
&lt;p>自冠状病毒大流行以来，随着越来越多的人远程工作和学习，Zoom的使用率急剧上升。Zoom状态页面的订阅量也是如此，自4月份以来，StatusGator中的订阅量急剧上升。&lt;/p>
&lt;p>除了企业被迫开始远程办公外，许多教会和其他公共组织也开始使用Zoom来举行周日弥撒、会议以及举办公共活动。因此，虽然周日不是工作日，但英国的许多付费账户很快就发现他们无法主持或加入Zoom会议（免费账户似乎没有受到影响）。这个问题通过多种渠道被报告，包括Twitter和监控Zoom状态的StatusGator。&lt;/p>
&lt;p>Zoom发言人回应称，承认意识到了这一情况，并提到这只影响了一个子集的用户。然而，我们都知道子集可能是1%或99%，Zoom没有提供任何关于受影响用户量的说明。提供更透明的受影响用户的比例是一个高质量状态页面的标志，这是Zoom应该改进的地方。&lt;/p>
&lt;h4 id="第三名-github-又无法访问了-june-29-2020">第三名 GitHub 又无法访问了. June 29, 2020&lt;/h4>
&lt;p>自从GitHub被微软以75亿美元收购后，GitHub似乎又下降了很多。原因尚未披露，我们只能猜测原因。也许是与GitHub基础设施与微软系统的整合有关。也许是因为GitHub的发展速度更快，增加了更多的功能。无论如何，从收购到现在已经快两年了，用户发现GitHub的持续宕机时间越来越长。我们对GitHub状态页面的独立分析证实，在过去的两年里，宕机变得更加频繁。&lt;/p>
&lt;p>微软正在努力将GitHub变成一个比以前更好的开发者场所。这家雷德蒙德巨头在今年早些时候让所有的付费计划变得更加实惠，并免费提供一些关键功能，将更多的工具放在IT专业人士的手中。微软、苹果、AWS、谷歌、Facebook和其他数千家公司使用GitHub来存储和运行他们的代码仓库，因此它的正常运行时间是最重要的。&lt;/p>
&lt;p>然而，GitHub在2020年6月29日出现了两个小时的故障。整个网站及其服务都无法访问，因此许多开发人员甚至无法推送代码或部署他们的应用程序，因为GitHub集成的数量没有响应。自然，这引起了很大的反响，并导致GitHub除了状态页面外，还推出了每月的可用性报告，对每次中断的原因和结果进行了详细的解释。&lt;/p>
&lt;h4 id="第四名-ibm-cloud-挂了服务状态页面有更新-june-10-2020">第四名 IBM Cloud 挂了，服务状态页面有更新, June 10, 2020&lt;/h4>
&lt;p>任何基于云的服务都会犯的最大错误之一就是将其状态页面托管在自己的基础设施上。看来IBM云就是这么做的，所以当它的整个基础设施在6月份有几个小时无法访问的时候，它的状态页面也随之而来。我们本可以期待IBM在今年3月的达拉斯宕机事件后得出一些结论，但是，显然，他们并没有理会，或者说没有做出足够的努力。&lt;/p>
&lt;p>于是，在2020年6月10日，IBM云基础设施在全球范围内宕机。这次宕机使得Watson AI、IBM Cloud Foundry、Kubernetes Service、云对象存储、身份访问和管理、VPS的VPN、App Connect等功能完全无法访问。幸运的是，IBM Cloud状态页面只在中断初期无法使用，后来才断断续续地可用。这也是为什么StatusGator还能向订阅了IBM Cloud状态页面的用户发送提醒的原因。&lt;/p>
&lt;p>该公司完全没有告知中断的原因，以及为缓解影响所采取的措施。后来从一个独立的监控服务机构了解到，一个第三方网络提供商广泛使用了流量路线，导致IBM云配置带宽严重受限。IBM专家对系统进行了重新配置，并恢复了运行，但随后并没有官方的解释或公告&amp;ndash;这让用户非常失望。&lt;/p>
&lt;p>这不是IBM第一次在公共关系上失败，我们认为，也不会是最后一次。这可能是他们尽管提供了多样化的有竞争力的云服务，却远远落后于AWS、谷歌云平台、微软Azure和其他云服务商的原因之一。&lt;/p>
&lt;p>但IBM能做什么呢？自然是有一个独立的状态页面! 下面只是他们可以使用的一些变种。&lt;/p>
&lt;h4 id="第五名-t-mobile冲洗其网络下水道2020年6月15日">第五名 T-Mobile冲洗其网络下水道，2020年6月15日。&lt;/h4>
&lt;p>作为美国、欧盟和英国最大的移动网络运营商之一，T-Mobile最近发现自己正处于一场完美的风暴之中，它在美国各地连续13个小时无法提供语音和短信服务。外界观察家马修-普林斯（Matthew Prince，CEO@Cloudflare）认为，&amp;ldquo;T-Mobile对他们的网络进行了一些改变，但这些改变出了问题，导致他们的用户出现了一连串的故障&amp;rdquo;。他还表示，&amp;ldquo;这场灾难几乎可以肯定完全是T-Mobile团队自己造成的&amp;rdquo;。&lt;/p>
&lt;p>相反，T-Mobile技术总裁Neville Ray在推特上表示，虽然这确实是一个 &amp;ldquo;影响全国用户语音和文字服务的重大问题&amp;rdquo;，但它源于第三方供应商的系统故障，T-Mobile的工程师正在努力修复。随后，他在博客中详细阐述了这一话题，并对故障原因进行了解释。&lt;/p>
&lt;p>引用雷先生的话说：&amp;ldquo;据悉，触发事件是东南部的第三方供应商的租用光纤电路故障。这是每一个移动网络都会发生的事情，所以我们与我们的供应商合作，建立冗余和弹性，以确保这种类型的电路故障不会影响客户。这种冗余让我们失败了，导致了过载的情况，然后又因为其他因素而变得更加复杂&amp;rsquo;。这导致IP池过载，美国所有地区都发生了崩溃。&lt;/p>
&lt;p>由于无法接触到大多数服务，T-Mobile的客户开始报告Facebook、Instagram和其他平台无法使用，而实际上离线的是他们的移动运营商网络。Business Insider报道称，虽然T-mobile客户将故障归咎于AT&amp;amp;T和Verizon，但这两家运营商都是在正常的负载水平下运营的。不过，前述Neville Ray的帖子表示，T-Mobile正在采取一切必要措施，通过为所有核心系统建立双重弹性和冗余措施，确保未来不可能发生此类事件。&lt;/p>
&lt;p>可以看到，公司无法明确表达自己的立场，从一开始就不愿意承担失败的责任，以及在故障发生后缺乏透明度，都没能让T-mobile毫无污点地走出困境。这甚至导致了他们面临大规模DDoS攻击却未能击退的传闻。&lt;/p>
&lt;h3 id="statusgator为第二季参赛者颁奖">StatusGator为第二季参赛者颁奖&lt;/h3>
&lt;p>让我们根据这些宕机事件的发现、相关公司的沟通以及每个事件的结果来评定。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/gator-q2.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Group-20-2048x1474.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;h2 id="软件发布">软件发布&lt;/h2>
&lt;ul>
&lt;li>Kubernetes 1.19 发布了， 它由34项增强功能组成。10个增强版转为稳定版，15个增强版在测试版，9个增强版在alpha版。&lt;/li>
&lt;li>AWS 发布新的 EBS 卷类型 (io2) 提高 100x 持久性，和 10x 倍的 IOPS/GiB&lt;/li>
&lt;li>Tekton Hub 预览版上线，随着该项目对底层流水线和构建的定义的日臻成熟，开放出一个相关的自由市场也是必然的，开源生态催生出来的上下游技术提供和消费的模式正在普及中，无周边生态的很难获利和发展，https://hub-preview.tekton.dev/&lt;/li>
&lt;/ul>
&lt;h3 id="devops-大会峰会">DevOps 大会/峰会&lt;/h3>
&lt;h4 id="中国-devops-社区流水线大赛----pipeline-craft-championship">中国 DevOps 社区流水线大赛 &amp;ndash; Pipeline Craft Championship&lt;/h4>
&lt;ul>
&lt;li>8 月 18 日开始为期两个月，免费活动&lt;/li>
&lt;li>报名：https://wj.qq.com/s2/6852880/c181&lt;/li>
&lt;li>活动官网：https://Pipeline.devopsmeetup.com&lt;/li>
&lt;/ul>
&lt;h4 id="snykcon">SnykCon&lt;/h4>
&lt;ul>
&lt;li>将在10月21日/22日举行一个关于所有应用安全和 DevOps 的在线活动。免费注册，CFP现在开放。&lt;/li>
&lt;li>&lt;a class="link" href="https://snyk.io/snykcon/" target="_blank" rel="noopener"
>https://snyk.io/snykcon/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>推荐和分享你感兴趣的大会和峰会给我和其它人吧？发邮件到：martin@devopscoach.org&lt;/p>
&lt;h2 id="文章">文章&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/WhyAvoidAutomation.gif"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>这是一篇很好的文章，讲述了在整个组织中获得变革的支持时，自动化这个词所带来的问题，以及为什么观念很重要。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://blogs.starcio.com/2020/08/avoid-calling-it-automation.html" target="_blank" rel="noopener"
>https://blogs.starcio.com/2020/08/avoid-calling-it-automation.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>什么是Kubernetes Operators，为什么它对SRE很重要？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Kubernetes Operators: 自动化容器编排平台》中，作者Jason Dobies和Joshua Wood将Operators描述为 &amp;ldquo;其应用的自动化站点可靠性工程师&amp;rdquo;。鉴于SRE的多方面经验和多样化的工作量，这是一个大胆的说法。那么，Operators到底能做什么呢？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.blameless.com/blog/what-is-a-kubernetes-operators-and-how-to-automate-sre" target="_blank" rel="noopener"
>https://www.blameless.com/blog/what-is-a-kubernetes-operators-and-how-to-automate-sre&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>探讨遗留IT系统的隐秘世界。探讨了一些值得注意的事件，以及我们需要更多地了解如何建立可长期运行的系统。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://spectrum.ieee.org/computing/it/inside-hidden-world-legacy-it-systems" target="_blank" rel="noopener"
>https://spectrum.ieee.org/computing/it/inside-hidden-world-legacy-it-systems&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一篇文章，讲述了随着组织的发展，增加一个总括性的平台团队的风险，以及为什么向平台组件和重用发展可以更具扩展性。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://kislayverma.com/organizations/a-case-against-platform-teams/" target="_blank" rel="noopener"
>https://kislayverma.com/organizations/a-case-against-platform-teams/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NoOps Go on Cloud Run&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://medium.com/@peter.malina/noops-go-on-cloud-run-689d92215c5c" target="_blank" rel="noopener"
>https://medium.com/@peter.malina/noops-go-on-cloud-run-689d92215c5c&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="工具">工具&lt;/h2>
&lt;ul>
&lt;li>werf/werf : GitOps 交付工具&lt;/li>
&lt;li>ovh/cds : 企业级持续交付和 DevOps 自动化开源平台，&lt;/li>
&lt;li>markphelps/flipt 一个现代的功能开关方案&lt;/li>
&lt;li>fluxcd/toolkit ： 用 GitOps 的方式组装 CD 流水线的体验版工具包。&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;h2 id="学习资源">学习资源&lt;/h2>
&lt;p>本周推荐如下 B 站学习资源。&lt;/p>
&lt;p>Jenkins+Ansible+Gitlab自动化部署（CI/CD）&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1Dp411Z7Lf" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1Dp411Z7Lf&lt;/a>&lt;/li>
&lt;li>持续集成在工作中的应用。&lt;/li>
&lt;/ul>
&lt;p>通俗易懂ElasticSearch 项目实践课程&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1wA411n7LY" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1wA411n7LY&lt;/a>&lt;/li>
&lt;li>搜房网实例项目讲解&lt;/li>
&lt;/ul>
&lt;p>【Python趣味教学】99%相似度！手把手教你用Python制作超级玛丽游戏&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1G54y197C2" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1G54y197C2&lt;/a>&lt;/li>
&lt;li>前26集都在这了，爱编程的小伙伴们，一起来重现童年经典吧！&lt;/li>
&lt;/ul>
&lt;p>Kubernetes教程 k8s企业级DevOps实践&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1c64y1F7wP" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1c64y1F7wP&lt;/a>&lt;/li>
&lt;li>k8s是一个开源的，用于管理云平台中多个主机上的容器化的应用，Kubernetes的目标是让部署容器化的应用简单并且高效（powerful）,Kubernetes提供了应用部署，规划，更新，维护的一种机制。&lt;/li>
&lt;/ul></description></item><item><title>Elasticsearch 3 节点集群搭建 (7.9.0)</title><link>https://martinliu.cn/blog/elasticsearch-3-%E8%8A%82%E7%82%B9%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA-7.9.0/</link><pubDate>Thu, 27 Aug 2020 13:54:46 +0800</pubDate><guid>https://martinliu.cn/blog/elasticsearch-3-%E8%8A%82%E7%82%B9%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA-7.9.0/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-6.jpg" alt="Featured image of post Elasticsearch 3 节点集群搭建 (7.9.0)" />&lt;p>最近发布的 Elastic Stack 7.9 ，带来了很多新的特性。Elastic Agent 统一集成数据采集代理是一大亮点。另外还看增加了企业搜索、端点安全防护等组件。Ingest Manager 统一 Beat 配置管理功能让我们向 SaaS 风格的监控工具又迈进了一步。由代理端自行注册到后端，在后端统一纳管所有被管理服务器，将是一种以后非常通用的模式。这样做的好处是：将数据采集端点的配置工作量和复杂度降低到最低。Beats 的各种相关独立模块也在平行的发布，这种双轨模式也可以让用户更弹性的做出选择，能最大程度的保持旧版本部署环境管理模式的延续性。 Ingest manager 的前提条件是：后台 ES 需要启用 api key 安全，启用 ES 客户端的 HTTPS 访问。我们也可以看到这两个功能选项也有其非常广泛的应用需求。本文将用最简单的文字，向你描述一套 3 节点的 ES 集群的搭建方式，这套系统的核心特性如下：&lt;/p>
&lt;ul>
&lt;li>启用用户名和密码认证&lt;/li>
&lt;li>启用集群内 es 节点间 transport.ssl 通讯加密&lt;/li>
&lt;li>启用 es 的 http 客户端 http.ssl 加密通讯&lt;/li>
&lt;li>安装脚本中包括创建数字证书的必要命令（没猜错的话，大部分人可能会在这一步花费大量时间）&lt;/li>
&lt;/ul>
&lt;h2 id="演示环境介绍">演示环境介绍&lt;/h2>
&lt;p>我使用的是本地的测试环境，环境配置如下：&lt;/p>
&lt;ul>
&lt;li>Mac OS&lt;/li>
&lt;li>vagrant&lt;/li>
&lt;li>virtualBox - CentOS 8&lt;/li>
&lt;li>Elastic Stack 7.9.0&lt;/li>
&lt;li>ip 和主机名分配见 Vagrantfile 文件&lt;/li>
&lt;li>Vagrant 的 vagrant-hostsupdater 插件实现了 Mac OS 主机和所有虚拟机的 host 文件 DNS 解析的同步，保证所有相关虚拟机都可以解析其它虚拟机的 FQDN，尽量模拟生产环境。&lt;/li>
&lt;/ul>
&lt;p>本文所使用的所有配置文件和安装脚本见：https://github.com/DevOps-Coach/elasticstack.git&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ elasticstack git:(master) ✗ vagrant up es1 es2 es3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bringing machine &amp;#39;es1&amp;#39; up with &amp;#39;virtualbox&amp;#39; provider...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bringing machine &amp;#39;es2&amp;#39; up with &amp;#39;virtualbox&amp;#39; provider...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bringing machine &amp;#39;es3&amp;#39; up with &amp;#39;virtualbox&amp;#39; provider...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; es1: Importing base box &amp;#39;bento/centos-8&amp;#39;...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; es1: Matching MAC address for NAT networking...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; es1: Checking if box &amp;#39;bento/centos-8&amp;#39; version &amp;#39;202002.04.0&amp;#39; is up to date...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">省略中间大量输出。。。。。。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: ● elasticsearch.service - Elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; enabled; vendor preset: disabled)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Active: active (running) since Thu 2020-08-27 05:55:21 UTC; 223ms ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Docs: https://www.elastic.co
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Main PID: 4205 (java)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Tasks: 41 (limit: 11499)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Memory: 1.2G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: CGroup: /system.slice/elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: ├─4205 /usr/share/elasticsearch/jdk/bin/java -Xshare:auto -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -XX:+ShowCodeDetailsInExceptionMessages -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dio.netty.allocator.numDirectArenas=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Djava.locale.providers=SPI,COMPAT -Xms1g -Xmx1g -XX:+UseG1GC -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -Djava.io.tmpdir=/tmp/elasticsearch-14730718416313121303 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/lib/elasticsearch -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m -XX:MaxDirectMemorySize=536870912 -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/etc/elasticsearch -Des.distribution.flavor=default -Des.distribution.type=rpm -Des.bundled_jdk=true -cp /usr/share/elasticsearch/lib/* org.elasticsearch.bootstrap.Elasticsearch -p /var/run/elasticsearch/elasticsearch.pid --quiet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: └─4360 /usr/share/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Aug 27 05:54:54 es3.zenlab.local systemd[1]: Starting Elasticsearch...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Aug 27 05:55:21 es3.zenlab.local systemd[1]: Started Elasticsearch.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Provisioning script works good!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es3: Please access Elasticsearch https://192.168.50.13:9200
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后的系统登录验证命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ elasticstack git:(master) ✗ curl --cacert certs/ca/ca.crt -u elastic &amp;#39;https://es1.zenlab.local:9200/_cat/nodes?v&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter host password for user &amp;#39;elastic&amp;#39;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.13 26 95 8 0.03 0.31 0.18 dilmrt - es3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.12 33 95 0 0.01 0.14 0.09 dilmrt - es2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.11 36 93 1 0.06 0.16 0.12 dilmrt * es1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上命令需要输入 elastic 用户的密码，es1 节点初始化了所有 Elasticsearch 内置用户的密码，需要复制 console 中的那一段密码信息备用。&lt;/p>
&lt;p>创建以上所有数字证书和秘钥文件的种子文件是 certs/instance.yml ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># instance.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">instances:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es1&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.11&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es1.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#34;es2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.12&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es2.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es3&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.13&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es3.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es4&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.14&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es4.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#34;es5&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.15&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es5.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es6&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.16&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es6.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es7&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.17&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es1.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#34;es8&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.18&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es2.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es9&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.19&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es3.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;lk&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.20&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;lk.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里一次性生产了所有我这个本地测试环境里可能用到的数字证书文件。&lt;/p>
&lt;h2 id="elasticsearch-安装脚本">Elasticsearch 安装脚本&lt;/h2>
&lt;p>下面是第一个 Elasticsearch 节点的安装脚本和注释，pre-install-es1.sh ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># author: Martin Liu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># url:martinliu.cn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#指定安装的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">elastic_version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;7.9.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#开始安装流程&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Provisioning a Elasticsearch &amp;#34;&lt;/span>&lt;span class="nv">$elastic_version&lt;/span>&lt;span class="s2">&amp;#34; Server...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo date &amp;gt; /etc/vagrant_provisioned_at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#配置 ES 需要的操作系统参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo swapoff -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sysctl -w vm.max_map_count&lt;span class="o">=&lt;/span>&lt;span class="m">262144&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sysctl -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &lt;span class="s2">&amp;#34;echo &amp;#39;elasticsearch - nofile 65535&amp;#39; &amp;gt;&amp;gt; /etc/security/limits.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#设置个性化 SSH 登录提示信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &lt;span class="s2">&amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt; /etc/motd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &lt;span class="s2">&amp;#34;echo &amp;#39;**** Welcome to Elastic Stack Labs&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &lt;span class="s2">&amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &lt;span class="s2">&amp;#34;echo &amp;#39;*&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#安装 ES 软件包&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/elasticsearch-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#创建 ES 集群内部通信加密数字证书，提前清理旧的证书文件和目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rm -f /vagrant/certs/certs.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rm -rf /vagrant/certs/es*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rm -rf /vagrant/certs/ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rm -rf /vagrant/certs/lk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-certutil cert -in /vagrant/certs/instance.yml -pem -out /vagrant/certs/certs.zip -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#解压缩所有证书备用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /usr/bin/unzip /vagrant/certs/certs.zip -d /vagrant/certs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#部署节点需要的秘钥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/elasticsearch/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/es1/* /etc/elasticsearch/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#更新 ES 默认的配置文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/es1.yml /etc/elasticsearch/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#配置和启动 ES 系统服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#初始化 ES 服务器内建用户的密码，这些密码需要在控制台上复制保存备用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto -b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#成功顺利的完成了安装&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> Provisioning script works good!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> Please access Elasticsearch https://192.168.50.11:9200
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>说明：你也可以参考以上脚本手工执行，如果是非 Vagrant 环境，请注意替换各个命令中相关文件的路径。第二个和第三个节点的安装脚本稍有不同，详情见代码库。&lt;/p>
&lt;h2 id="elasticsearch-配置文件">Elasticsearch 配置文件&lt;/h2>
&lt;p>下面是第一个 Elasticsearch 节点的参考配置文件， es1.yml ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ---------------------------------- Cluster -----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定集群名称
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.name: elk4devops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------------ Node ------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定节点名称，此处使用的是 hostname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node.name: es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ----------------------------------- Paths ------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定 es 服务器数据目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.data: /var/lib/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定 es 服务器日志目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.logs: /var/log/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ---------------------------------- Network -----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定此节点加入网络的名称，这里使用的是 FQDN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network.host: es1.zenlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># --------------------------------- Discovery ----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#设定初始的 master 节点为 es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.initial_master_nodes: [&amp;#34;es1&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">discovery.seed_hosts: [&amp;#34;es1.zenlab.local&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------- TLS and Cert ---------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#启用用户名和密码认证
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#启用 ES 集群内加密传输
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate_authorities: ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.key: ${node.name}.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate: ${node.name}.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#启用 ES 集群客户端访问加密
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate_authorities: ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.key: ${node.name}.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate: ${node.name}.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># For Elastic Agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.authc.api_key.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#启用监控数据收集
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.monitoring.collection.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------- App Search ---------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#提前为 App Search 做好准备
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">action.auto_create_index: &amp;#34;.app-search-*-logs-*,-.app-search-*,+*&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>说明：第二个和第三个节点的配置文件稍有不同，详情见代码库。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>在三节点集群的搭建过程中，最好建议启用各种安全和加密选项，用配置安装脚本最小化工作量；这样一步到位的安全性，可以为后续增加其他 Elastic Stack 的产品组件打下良好的基础，ES 集群的配置尽量完善，尽量覆盖后期的其他各种潜在需求，减少未来配置变更的工作量，让后续的测试越来越轻松。&lt;/p></description></item><item><title>DevOps Coach 周刊 #5</title><link>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#5/</link><pubDate>Tue, 25 Aug 2020 15:20:51 +0800</pubDate><guid>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#5/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps Coach 周刊 #5" />&lt;h2 id="宕机">宕机&lt;/h2>
&lt;ul>
&lt;li>上一周新发的宕机事故。&lt;/li>
&lt;li>近期全球重大宕机事故的分析总结、事后回顾。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>May your queries flow and your pagers stay silent.
&amp;ndash;Dave, Betsy, Niall, Stephen, and Ken&lt;/p>
&lt;/blockquote>
&lt;h3 id="equinix-重大电力故障让数据中心客户大发雷霆">Equinix 重大电力故障让数据中心客户大发雷霆&lt;/h3>
&lt;ul>
&lt;li>关于 Equinix ：Equinix 是全球领先的数据运营商，目前在美洲、亚太、欧洲及中东 14 个国家（地区）的 31 个市场运营着 94 个国际业务交换。&lt;/li>
&lt;li>消息来源 CBR &lt;a class="link" href="https://www.cbronline.com/news/equinix-outage" target="_blank" rel="noopener"
>https://www.cbronline.com/news/equinix-outage&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>教练点评：数据中心 UPS 的单点故障并不稀奇，但是这次 Equinix 的事故堪称史诗级事故。&lt;/p>
&lt;/blockquote>
&lt;p>&amp;ldquo;经历如此严重的停电，显然是不可接受的&amp;rdquo;&lt;/p>
&lt;p>北京时间 8 月 19 日 8 点 10 分更新：最后的电路似乎已经在 8 月 18 日晚间约 22 点 20 分恢复；在停电开始后约 18 小时。&lt;/p>
&lt;p>数据中心巨头 Equinix 表示，在其位于伦敦码头区的 IBX LD8 数据中心遭遇长时间停电后，它已经为所有客户恢复了机架&amp;ndash;该问题使数百名客户（包括几家 ISP）的服务从北京时间凌晨 4:30 开始离线；使许多人对缓慢的电力恢复深感沮丧。&lt;/p>
&lt;p>&amp;ldquo;Equinix 工程师已将问题的根本原因诊断为 UPS（不间断电源）系统故障，我们正在与客户合作，以尽量减少影响。该公司在北京时间 8 月 18 日 12:04 的首次公开声明中表示：&amp;ldquo;我们对由此造成的任何不便感到遗憾。(ISP Giganet 负责人 Matthew Skipsey 早些时候将 Equinix 缺乏沟通描述为 &amp;ldquo;糟糕透顶&amp;rdquo;)。&lt;/p>
&lt;p>多名客户指出，该问题是 Galaxy UPS 系统(由施耐德销售)中的输出静态开关出现故障。该开关将关键负载连接到 UPS 的条件电源或旁路电源的原始电源。停电时间的长短表明，LD8 的 A+B 交流电源是来自同一个 UPS。期望其直流供应商确保弹性和依赖单一数据中心的 ISP 正在吸取惨痛教训。&lt;/p>
&lt;p>伦敦互联网交易所 LINX 同时表示，约有 150 名 LINX 会员直接受到此次事件的影响。(到 13:42，LINX 的所有设备都恢复了。该组织有 900 多个 ASN 从 80 多个不同的国家连接）。)&lt;/p>
&lt;p>受影响的一个客户是 ISP Giganet。它告诉客户。&amp;ldquo;我们仍在等待我们的网络架恢复供电 继 Equinix 和他们的承包商在早期故障后将电源迁移到新的基础设施上之后。&lt;/p>
&lt;p>&amp;ldquo;可悲的是，仍然没有估计的修复时间，这是最令人沮丧的。他们已向我们保证，他们将在可能的情况下提供这一信息。Equinix 不断被追问最新情况。正如您所了解的那样，这是一个 P1 问题，影响着许多 100 多家其他运营商/ISP&amp;ndash;所以它被赋予了最大的优先级。&amp;rdquo;&lt;/p>
&lt;p>据了解，英国电信也是受影响的公司之一。数据中心的访问控制系统已经被中断，一个客户，马修-斯基普西说，&amp;ldquo;所以一切[是]通过双向无线电手动运行，然后通过其他地方打电话。疯狂的时代。这是一个 MBORC 的地狱。&amp;rdquo;&lt;/p>
&lt;p>Equinix 表示，它允许客户 &amp;ldquo;更灵活地访问 LD8&amp;rdquo;，因为它争分夺秒地解决这个问题，&amp;ldquo;在我们的 COVID-19 限制内工作&amp;rdquo;。&lt;/p>
&lt;p>Giganet 补充道：&amp;ldquo;我们已经在凌晨 4.23 时左右失去了我们 2 个 Equinix LD8 机架中的 1 个机架的两个 A+B 馈线。此前，根据 Equinix 的报告，UPS 出现故障，然后触发了数据中心的火警。我们失去电源的机架上安装着我们的核心 Juniper MX 路由器和 Cisco LNS。瞻博网络 MX 路由器是我们的核心设备，LD8 中的一切功能都需要它，包括终止一些专线连接以及为我们的 vDC 平台提供连接。我们所有的设备电源都是由数据中心提供的&amp;rsquo;多样化&amp;rsquo;A+B 电源双馈&amp;ndash;但是经过这次事件，我们怀疑是缺乏弹性，在事件解决后一定会提出来，因为经历如此严重的断电显然是不可接受的。&amp;rdquo;&lt;/p>
&lt;h3 id="google-公司的云平台和-g-stuit-系列事故">Google 公司的云平台和 G Stuit 系列事故&lt;/h3>
&lt;ul>
&lt;li>来源官方 &lt;a class="link" href="https://status.cloud.google.com/incident/zall/20008#20008005" target="_blank" rel="noopener"
>https://status.cloud.google.com/incident/zall/20008#20008005&lt;/a>&lt;/li>
&lt;li>Google Cloud Infrastructure Components Incident #20008&lt;/li>
&lt;li>GCP 多个产品发生故障：App Engine, Cloud Storage 和 Cloud Logging&lt;/li>
&lt;li>G Suit 多个模块和功能：Gmail, Drive, Docs/Editor, Chat, Meet, Keep, Voice, Jamboard, Admin Console&lt;/li>
&lt;li>事故时间：August 19, 2020, from 20:55 to 03:30&lt;/li>
&lt;li>诊断：AppEngine 的部署会报错，访问 GCS 桶时的高延迟，以及 Cloud Logging 中的日志条目丢失。G Suit 多种产品报错和无法使用。&lt;/li>
&lt;li>详细的事故总结报告https://static.googleusercontent.com/media/www.google.com/zh-CN//appsstatus/ir/bd9m3vkqwpvkk4j.pdf&lt;/li>
&lt;li>根本原因
&lt;ul>
&lt;li>许多 Google 服务使用一个通用的、内部的、分布式的系统来存储不可变的、非结构化的数据，也就是二进制大对象，或者说 blob。这个 blob 存储系统包含一个与 Google 内部客户端服务对接的前端，一个处理元数据操作的中层，以及一个用于存储数据的后端。blobs 本身。当客户端向前端提出请求时，元数据操作被转发到元数据服务，元数据服务与存储服务进行通信。&lt;/li>
&lt;li>来自另一个 Google 服务的流量增加开始使元数据服务超载，导致任务变得不健康，请求的延迟增加。这种延迟促使这些操作的过度重试，导致资源耗尽。自动化系统试图启动新的元数据任务。然而，其中许多任务立即被其收到的流量所淹没，而这些任务也被淹没。由于资源枯竭，分配到的资源不足。这一问题因以下原因而更加严重： 策略用于取消和重试失败的请求，这对流量造成了倍增效应。&lt;/li>
&lt;li>与其他产品相比，谷歌云存储受到的影响较小。虽然谷歌云存储是建立在 同一个 blob 存储系统，GCS 的元数据层大多与受影响的元数据层隔离。谷歌内部元数据服务。对于 &amp;ldquo;美国&amp;rdquo;，GCS 元数据隔离的迁移正在进行中。多区域，而所有其他迁移工作已经完成。因此，对全球通信系统客户的影响是 减少，这种影响仅限于 &amp;ldquo;美国 &amp;ldquo;多区域。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>教练点评：从事发时刻到 Google 工程师收到告警的时刻（20：58）之间只有短短的 3 分钟，在一个小时内受影响的各个 GCP 服务就开始了并行的调查和补救措施。在 23：00 定位到 blob 存储是根因故障，并实施配置变更，消除了大多数的内部错误。这正是 SRE 中所讨论的重大事故应急流程的有效执行，能快速有效的恢复服务。可以看出 Google 团队在事故响应方面的训练有素。&lt;/p>
&lt;/blockquote>
&lt;h3 id="spotify">Spotify&lt;/h3>
&lt;ul>
&lt;li>来源官方 Twitter 账号： &lt;a class="link" href="https://twitter.com/SpotifyStatus/status/1296064517504409600" target="_blank" rel="noopener"
>https://twitter.com/SpotifyStatus/status/1296064517504409600&lt;/a>&lt;/li>
&lt;li>这好像是由于 TLS 证书过期导致的。&lt;/li>
&lt;li>其它媒体报道： &lt;a class="link" href="https://www.teiss.co.uk/spotify-outage-expired-tls-cert/" target="_blank" rel="noopener"
>https://www.teiss.co.uk/spotify-outage-expired-tls-cert/&lt;/a>&lt;/li>
&lt;li>据报道，周三发生了影响音乐流媒体服务 Spotify 的长达一小时的大规模中断，原因是该公司未能在 TLS 证书到期前更新。&lt;/li>
&lt;li>不过，Cloudflare 的网络工程师 Louis Poinsignon 提供了 Spotify 系统内部到底发生了什么事情的线索。据他介绍，该公司显然没有及时更新 TLS 证书，证书过期导致中断。在 TLS 证书更新后，Spotify 的服务很快就恢复了在线。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>教练点评：Spotify 的特有的团队工作开发模式一直是一种学习的榜样，很难想象他们的服务会在这样简单的问题上翻船。&lt;/p>
&lt;/blockquote>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;h3 id="devops-大会峰会">DevOps 大会/峰会&lt;/h3>
&lt;p>中国 DevOps 社区流水线大赛 &amp;ndash; Pipeline Craft Championship&lt;/p>
&lt;ul>
&lt;li>8 月 18 日开始为期两个月，免费活动&lt;/li>
&lt;li>报名：https://wj.qq.com/s2/6852880/c181&lt;/li>
&lt;li>活动官网：https://Pipeline.devopsmeetup.com&lt;/li>
&lt;/ul>
&lt;p>GitLab 的大会 &amp;ndash; Commit: You belong here&lt;/p>
&lt;ul>
&lt;li>8 月 26 日&lt;/li>
&lt;li>线上免费峰会&lt;/li>
&lt;li>&lt;a class="link" href="https://about.gitlab.com/events/commit/" target="_blank" rel="noopener"
>https://about.gitlab.com/events/commit/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>推荐你感兴趣的大会和峰会，发邮件到：martin@devopscoach.org&lt;/p>
&lt;h3 id="grafana-labs-喜提-b-轮-5000-万美元融资">Grafana Labs 喜提 B 轮 5000 万美元融资&lt;/h3>
&lt;ul>
&lt;li>来源官方：https://grafana.com/about/press/2020-08-17-series-b-announcement/&lt;/li>
&lt;li>8 月 27 日宣布&lt;/li>
&lt;li>Grafana Labs 还宣布了 Grafana 加速器计划（GAP），以培养在更广泛的 Grafana 生态系统中进行创新的早期公司和副业项目。GAP 将提供免费的 Grafana Cloud 和 Grafana Enterprise 订阅、现金补助、股权融资以及进入 Grafana Labs 核心开发者的内部通道。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>教练点评：这个 CNCF 的热门项目终于迈向了商业化的第一步，随着企业订阅模式的形成，且看后续的创新开发和社区经营是否也能一浪高过一浪。&lt;/p>
&lt;/blockquote>
&lt;h2 id="文章">文章&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>《 Ops 工作的未来 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一篇关于运维角色变化的好文章。对于那些想知道现代运维是什么样子的人来说，有一些很好的提示，包括供应商管理、外包基础设施和理解社会技术系统的重要性。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://acloudguru.com/blog/engineering/the-future-of-ops-jobs" target="_blank" rel="noopener"
>https://acloudguru.com/blog/engineering/the-future-of-ops-jobs&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>《 NAT 是如何工作的 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对于任何想要更好地了解这个网络领域的人来说，这是一本很好的 NAT 网络介绍。好的图和例子，还有很多细节。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://tailscale.com/blog/how-nat-traversal-works/" target="_blank" rel="noopener"
>https://tailscale.com/blog/how-nat-traversal-works/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>《 如何打造给董事会看的软件开发 KPI 报表 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>度量标准有很多不同的用途，包括向组织高层报告。这篇文章探讨了用于董事会对话的工程 KPI。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://codeclimate.com/blog/engineering-kpis-board-deck/" target="_blank" rel="noopener"
>https://codeclimate.com/blog/engineering-kpis-board-deck/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>《 马丁富乐老师：单链接通道 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有没有想过确保服务之间的消息保持有序，并为任何丢失的消息建立重试机制？这篇文章描述了一个具体的模式，但也是一组关于分布式计算模式的文章的一部分，值得探讨。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://martinfowler.com/articles/patterns-of-distributed-systems/single-socket-channel.html" target="_blank" rel="noopener"
>https://martinfowler.com/articles/patterns-of-distributed-systems/single-socket-channel.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>《 提升事故回顾质量的套路 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>事故回顾越来越常见，但往往很难做好。这段视频和详细的文字记录有各种改进流程的技巧。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.blameless.com/blog/improving-postmortems-paul-osman" target="_blank" rel="noopener"
>https://www.blameless.com/blog/improving-postmortems-paul-osman&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>《 应用日志开发的最佳实践 》&lt;/p>
&lt;/li>
&lt;li>
&lt;p>即使你不是用 Java 编写应用程序，掌握一些关于日志工作的知识通常也是有用的，因为你可能最终会至少运行一些 Java 应用程序。这些帖子提供了一个坚实的基础。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://sematext.com/blog/java-logging/" target="_blank" rel="noopener"
>https://sematext.com/blog/java-logging/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://sematext.com/blog/java-logging-best-practices/" target="_blank" rel="noopener"
>https://sematext.com/blog/java-logging-best-practices/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="工具">工具&lt;/h2>
&lt;ul>
&lt;li>标签对于大规模管理 AWS 资源至关重要。Awstaghelper 提供了一个命令行工具，可以轻松地在广泛的 AWS 资源中向 CSV 文件或从 CSV 文件中添加和管理标签。&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/mpostument/awstaghelper" target="_blank" rel="noopener"
>https://github.com/mpostument/awstaghelper&lt;/a>&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>GitOps 工具包是一套可组合的 API 和专门的工具，可用于在 Kubernetes 之上构建一个持续交付平台。它们应该可以为 Flux 的 v2 提供基础，但也可以用来构建其他有趣的高级工具，采用同样的控制循环方法。&lt;/li>
&lt;li>&lt;a class="link" href="https://toolkit.fluxcd.io/" target="_blank" rel="noopener"
>https://toolkit.fluxcd.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>Kip 是一个虚拟 Kubelet 提供商，它允许 Kubernetes 集群透明地将 pods 发射到自己的云实例上。如果你需要额外的工作负载隔离，这很方便。&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/elotl/kip" target="_blank" rel="noopener"
>https://github.com/elotl/kip&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="学习资源">学习资源&lt;/h2>
&lt;p>这里推荐一些值得关注和学习的免费视频学习资料。&lt;/p>
&lt;blockquote>
&lt;p>教练点评：B 站里的相关视频是不可忽视的学习资源。善加利用，就可以加速获取知识的进度。&lt;/p>
&lt;/blockquote>
&lt;p>波波老师的系列课程&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://space.bilibili.com/518029478/video" target="_blank" rel="noopener"
>https://space.bilibili.com/518029478/video&lt;/a>&lt;/li>
&lt;li>包括 k8s 和微服务等 DevOps 技术&lt;/li>
&lt;/ul>
&lt;p>【SpringBoot 项目实战】 2020 最新在线教育 spring boot 分布式项目实战&lt;/p>
&lt;ul>
&lt;li>系统后端接口部分，使用目前流行的 SpringBoot+SpringCloud 进行微服务架构，使用 Feign、Gateway、Hystrix，以及阿里巴巴的 Nacos 等组件搭建了项目的基础环境。项目中还使用 MyBatisPlus 进行持久层的操作，使用了 OAuth2+JWT 实现了分布式的访问，项目中整合了 SpringSecurity 进行了权限控制。除此之外，项目中使用了阿里巴巴的 EasyExcel 实现对 Excel 的读写操作，使用了 Redis 进行首页数据的缓存，使用 Git 进行代码的版本控制&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1y7411y7am" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1y7411y7am&lt;/a>&lt;/li>
&lt;li>播放量： 10w+&lt;/li>
&lt;/ul>
&lt;p>2019 谷粒商城微服务 SpringBoot,Dubbo,MySql 高级,Redis 秒杀,ElasticSearch,ActiveMQ,SSO 单点登&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1B4411V7cA" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1B4411V7cA&lt;/a>&lt;/li>
&lt;li>2019 谷粒商城微服务 SpringBoot, zookeep 注册中心, Dubbo, MySql 高级, ElasticSearch, ActiveMQ, 通用 mapper, 解决秒杀, SSO 单点登录, OAuth2 协议三方登录, 第三方支付接口对接, Redis lua 脚本, Redis 秒杀, Redis 分布式锁, 集群搭建, 分布式, sku,spu 表结构介绍, 等等技术结合使用~~~~~~~~~~~&lt;/li>
&lt;li>播放量： 10w+&lt;/li>
&lt;/ul>
&lt;p>Git+GitHub 教程&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1pW411A7a5" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1pW411A7a5&lt;/a>&lt;/li>
&lt;li>Git 是先进的分布式版本控制系统，而 Github 是常用的 Git 代码托管中心。
本套教程内容丰富、详实，囊括：Git 安装过程、本地库基本操作、远程基本操作、基于分支的 Gitflow 工作流、跨团队协作的 Forking 工作流、Eclipse 中的 Git 版本控制以及 Git 对 Eclipse 特定文件忽略的配置方法。还通过展示 Git 内部版本管理机制，让你了解 到 Git 高效操作的底层逻辑。教程的最后完整演示了 Gitlab 服务器的搭建过程。&lt;/li>
&lt;li>播放量： 21w+&lt;/li>
&lt;/ul>
&lt;p>GitLab 与 GitFlow 的简单使用&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1Wb411e7ec" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1Wb411e7ec&lt;/a>&lt;/li>
&lt;li>播放量： 1w+&lt;/li>
&lt;/ul></description></item><item><title>DevOps Coach 周刊 #4</title><link>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#4/</link><pubDate>Mon, 17 Aug 2020 18:43:26 +0800</pubDate><guid>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#4/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps Coach 周刊 #4" />&lt;p>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg"
loading="lazy"
alt="DevOps Coach weekly update"
>&lt;/p>
&lt;h2 id="宕机">宕机&lt;/h2>
&lt;ul>
&lt;li>上一周新发的宕机事故。&lt;/li>
&lt;li>近期全球重大宕机事故的分析总结、事后回顾。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>May your queries flow and your pagers stay silent.
&amp;ndash;Dave, Betsy, Niall, Stephen, and Kent&lt;/p>
&lt;/blockquote>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;h3 id="项目发布速递">项目发布速递&lt;/h3>
&lt;ul>
&lt;li>Azure Functions 的 PowerShell 7 支持现在是 GA，如果在 PowerShell 中编写无服务器函数对你有吸引力。&lt;/li>
&lt;li>Go 1.15 - 流行的编程语言。&lt;/li>
&lt;li>AWS Glue 2.0 - AWS 上的 ETL 作业服务。&lt;/li>
&lt;li>Node 14.8.0 - 服务器端 JavaScript 运行时。&lt;/li>
&lt;/ul>
&lt;h3 id="devops-大会峰会">DevOps 大会/峰会&lt;/h3>
&lt;p>中国 DevOps 社区流水线大赛 &amp;ndash; Pipeline Craft Championship&lt;/p>
&lt;ul>
&lt;li>8 月 18 日开始为期两个月，免费活动&lt;/li>
&lt;li>报名：https://wj.qq.com/s2/6852880/c181&lt;/li>
&lt;li>活动官网：https://Pipeline.devopsmeetup.com&lt;/li>
&lt;/ul>
&lt;p>提交大议信息发邮件到：martin@devopscoach.org&lt;/p>
&lt;h2 id="文章">文章&lt;/h2>
&lt;p>编写 Kubernetes Operators 的 7 个最佳实践。SRE 的观点&lt;/p>
&lt;ul>
&lt;li>Manuel Dewald，红帽公司&lt;/li>
&lt;li>&lt;a class="link" href="https://www.openshift.com/blog/7-best-practices-for-writing-kubernetes-operators-an-sre-perspective" target="_blank" rel="noopener"
>https://www.openshift.com/blog/7-best-practices-for-writing-kubernetes-operators-an-sre-perspective&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>DevNation 技术讲座：每个用户都应该知道的 10 个很棒的 Kubernetes 工具&lt;/p>
&lt;ul>
&lt;li>Alex Soto 和 Burr Sutter，红帽公司。&lt;/li>
&lt;li>&lt;a class="link" href="https://www.twitch.tv/videos/709079582?t=00h01m01s" target="_blank" rel="noopener"
>https://www.twitch.tv/videos/709079582?t=00h01m01s&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>变化的世界, 变化的 Mozilla (但裁员 250 名员工) 非常悲伤的消息从 Mozilla, 火狐的创造者, 本周，他们已- 经裁掉了一个明显的数量的员工，他们的商业需求驱动.&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.mozilla.org/blog/2020/08/11/changing-world-changing-mozilla/" target="_blank" rel="noopener"
>https://blog.mozilla.org/blog/2020/08/11/changing-world-changing-mozilla/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>用 Prometheus 和 Grafana 进行系统监控。&lt;/p>
&lt;ul>
&lt;li>监控超级饲料。分布式系统的历史和挑战。&lt;/li>
&lt;li>&lt;a class="link" href="https://flightaware.engineering/systems-monitoring-with-prometheus-grafana/" target="_blank" rel="noopener"
>https://flightaware.engineering/systems-monitoring-with-prometheus-grafana/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>在 Git 中想做的事情以及如何做这些事情？&lt;/p>
&lt;ul>
&lt;li>一些一般的 GIT 技巧&lt;/li>
&lt;li>&lt;a class="link" href="https://stu2b50.dev/posts/things-you-wante9665" target="_blank" rel="noopener"
>https://stu2b50.dev/posts/things-you-wante9665&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>公布 Kubernetes 的 Pulumi 开源新项目&lt;/p>
&lt;ul>
&lt;li>宣布新功能，推进 Pulumi 的 Kubernetes 支持部署自动化、云原生生态系统集成和 Pulumi 的简单采用。&lt;/li>
&lt;li>&lt;a class="link" href="https://www.pulumi.com/blog/new-kubernetes-superpowers/" target="_blank" rel="noopener"
>https://www.pulumi.com/blog/new-kubernetes-superpowers/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Mirantis 收购了 Kubernetes 的 IDE&amp;ndash;Lens - TechCrunch&lt;/p>
&lt;ul>
&lt;li>最近收购了 Docker 企业业务的公司 Mirantis 今天宣布收购了 Lens。&lt;/li>
&lt;li>&lt;a class="link" href="https://techcrunch.com/2020/08/13/mirantis-acquires-lens-an-ide-for-kubernetes/" target="_blank" rel="noopener"
>https://techcrunch.com/2020/08/13/mirantis-acquires-lens-an-ide-for-kubernetes/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>MySQL 性能调优&lt;/p>
&lt;ul>
&lt;li>技巧、脚本和工具&lt;/li>
&lt;li>&lt;a class="link" href="https://haydenjames.io/mysql-performance-tuning-tips-scripts-tools/" target="_blank" rel="noopener"
>https://haydenjames.io/mysql-performance-tuning-tips-scripts-tools/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&amp;ldquo;第一天 &amp;ldquo;云原生组织&lt;/p>
&lt;ul>
&lt;li>在这里，我提出了一个云原生架构，以促进任何组织内的创新和实验的动态文化。&lt;/li>
&lt;li>&lt;a class="link" href="https://medium.com/lambda-lego/day-one-cloud-native-organisations-250b4e181a8d" target="_blank" rel="noopener"
>https://medium.com/lambda-lego/day-one-cloud-native-organisations-250b4e181a8d&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>从单体架构到微服务。架构和数据管理&lt;/p>
&lt;ul>
&lt;li>在本文中，我们分析了从单体架构到微服务架构的转变，深入探讨了微服务通信类型，并以一个零售应用为例，研究了服务之间通信的最佳实践。&lt;/li>
&lt;li>&lt;a class="link" href="https://epsagon.com/development/monolithic-to-microservices-architecture-data-management/" target="_blank" rel="noopener"
>https://epsagon.com/development/monolithic-to-microservices-architecture-data-management/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="工具">工具&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/mingrammer/diagrams" target="_blank" rel="noopener"
>https://github.com/mingrammer/diagrams&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>云系统架构原型设计的 &amp;ldquo;图表即代码&amp;rdquo;（Diagram as Code）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/linkedin/shiv" target="_blank" rel="noopener"
>https://github.com/linkedin/shiv&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>shiv 是一个命令行实用程序，用于构建完全自包含的 Python zipapps，就像 PEP 441 中概述的那样，但包含了所有的依赖关系。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/hazelcast/hazelcast-jet" target="_blank" rel="noopener"
>https://github.com/hazelcast/hazelcast-jet&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开源的分布式流和批处理技术&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/abe-winter/automigrate" target="_blank" rel="noopener"
>https://github.com/abe-winter/automigrate&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用 git 版本的 SQL 模式+自动迁移它们。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/soraxas/shsh" target="_blank" rel="noopener"
>https://github.com/soraxas/shsh&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一个多线程管理器，用于管理 shell 脚本、函数、独立的二进制文件、tab-completions 等。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/dutchcoders/cloudman" target="_blank" rel="noopener"
>https://github.com/dutchcoders/cloudman&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>管理 ec2 实例的文本用户界面。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/diego3g/rocketredis" target="_blank" rel="noopener"
>https://github.com/diego3g/rocketredis&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一个漂亮的 Redis GUI&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>DevOps Coach 周刊 #3</title><link>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#3/</link><pubDate>Tue, 11 Aug 2020 15:03:54 +0800</pubDate><guid>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#3/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps Coach 周刊 #3" />&lt;p>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg"
loading="lazy"
alt="DevOps Coach weekly update"
>&lt;/p>
&lt;h2 id="宕机">宕机&lt;/h2>
&lt;ul>
&lt;li>上一周新发的宕机事故。&lt;/li>
&lt;li>近期全球重大宕机事故的分析总结、事后回顾。&lt;/li>
&lt;/ul>
&lt;h3 id="上周新发宕机事故">上周新发宕机事故&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Discord&lt;/strong> 这个值得注意的是，它涉及到谷歌云平台中所谓的 &amp;ldquo;吵闹邻居 &amp;ldquo;情况。https://discord.statuspage.io/incidents/bnv0wbddzz2x&lt;/li>
&lt;li>&lt;strong>Slack&lt;/strong> 更新缓存基础架构的坑。从2020年7月23日晚上9:00 PDT到2020年8月1日下午5:17 PDT，客户在使用各种API端点时可能会出现滞后或故障。我们于7月29日开始调查这一问题，并将这些问题追溯到最近对我们的缓存基础设施进行的一项变更，旨在增加该基础设施的容量。一个不可预见的副作用导致一小部分API请求需要更长的时间来处理并最终超时。我们在8月1日恢复了这一更改，所有受影响的客户的问题都得到了解决。8月6日, 6:49 AM GMT+8 &lt;a class="link" href="https://status.slack.com//2020-07/7d32ad54b0703c47" target="_blank" rel="noopener"
>https://status.slack.com//2020-07/7d32ad54b0703c47&lt;/a>&lt;/li>
&lt;li>**佳能 ** 遭遇勒索软件攻击，Maze宣称对此事负责 来源： &lt;a class="link" href="https://www.zdnet.com/article/canon-suffers-ransomware-attack-maze-claims-responsibility/" target="_blank" rel="noopener"
>https://www.zdnet.com/article/canon-suffers-ransomware-attack-maze-claims-responsibility/&lt;/a>&lt;/li>
&lt;li>&lt;strong>Steam&lt;/strong> 服务器目前已经瘫痪 &lt;a class="link" href="https://gamerant.com/steam-servers-down-8-05/" target="_blank" rel="noopener"
>https://gamerant.com/steam-servers-down-8-05/&lt;/a>&lt;/li>
&lt;li>&lt;strong>Fastly&lt;/strong> 著名 CDN 服务器最近又出性能事故了， 影响范围，Edge Cloud Services (Fastly API, 快速配置应用, TLS 制备) &lt;a class="link" href="https://status.fastly.com/incidents/d6ljy97shb0p" target="_blank" rel="noopener"
>https://status.fastly.com/incidents/d6ljy97shb0p&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="关于-quayio-宕机事故回顾">关于 Quay.io 宕机事故回顾&lt;/h3>
&lt;ul>
&lt;li>来源官网： &lt;a class="link" href="https://www.openshift.com/blog/about-the-quay.io-outage-post-mortem" target="_blank" rel="noopener"
>https://www.openshift.com/blog/about-the-quay.io-outage-post-mortem&lt;/a>&lt;/li>
&lt;li>时间线：5 月 19 日第一次宕机，28 日第二次宕机，这些事故影响了大多数 quay.io 服务的用户。&lt;/li>
&lt;li>Red Hat SRE 团队对本次事件的经验总结：
&lt;ul>
&lt;li>&lt;strong>关于谁和什么人在使用你的服务，你永远都不可能有足够的参考数据。&lt;/strong> 由于Quay &amp;ldquo;一直是正常工作&amp;rdquo;，我们从来不需要花太多时间分析我们的流量模式，处理负载的行为。这创造了一种虚假的安全感，即服务将无限期地扩展。&lt;/li>
&lt;li>&lt;strong>当服务出现故障时，恢复是你的首要任务。&lt;/strong> 由于Quay在第一次中断期间不断出现数据库死锁的情况，我们的标准流程并没有明确的实现服务恢复的预期目标。这就导致我们花了更多的时间进行分析和收集数据，希望找到根本原因，而不是把所有的精力都放在让客户恢复运行上。&lt;/li>
&lt;li>&lt;strong>要了解你的每一个服务功能的影响。&lt;/strong> App Registry很少被我们的客户使用，所以它不是我们团队的主要优先事项。当你的产品中有很少使用的功能时，bug就不会被提交，开发人员也不会再看代码。我们很容易认为这不会给团队带来任何负担&amp;ndash;直到它突然成为重大事件的一部分。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="关于-heroku-事故-2090-的后续分析">关于 Heroku 事故 #2090 的后续分析&lt;/h2>
&lt;ul>
&lt;li>概述：此次事件涉及Heroku的基础设施提供商（大概是AWS）的DNS故障。这次事故的坑是 DNS。&lt;/li>
&lt;li>来源官网：https://status.heroku.com/incidents/2090&lt;/li>
&lt;li>重要看点：为了给DNS查询提供内部IP地址，我们的服务提供商运行自己的内部DNS服务。这些DNS服务是确保在同一地区运行的基础设施之间建立最快连接的根本。当这些 DNS 服务不可用时，服务之间无法建立新的内部连接。与应用程序或数据服务的外部连接不会受到影响。在此次事件中，我们在一个地区的基础设施子集上经历了这些DNS服务的间歇性故障，包括我们运维的Heroku大部分内部服务的地方。&lt;/li>
&lt;li>经验总结：我们正在审查我们如何应对服务提供商的DNS故障或降级，以确保我们能够尽快发现并解决任何未来的问题。&lt;/li>
&lt;/ul>
&lt;h2 id="linkedin-最近的-hadoop-事故总结理论-vs-实战">LinkedIn 最近的 Hadoop 事故总结：理论 vs. 实战&lt;/h2>
&lt;ul>
&lt;li>概述：LinkedIn的这起事件影响了多个内部客户，他们对耐用性和延迟的要求各不相同，使得恢复变得复杂。&lt;/li>
&lt;li>来源官网：https://engineering.linkedin.com/blog/2020/learnings-from-a-recent-hadoop-incident&lt;/li>
&lt;li>学习制度化：一场大型事件结束后，总会有一些心得体会。以下是我们正在跟进的几条。
&lt;ul>
&lt;li>为Hadoop基础设施建立一个强大和更全面的主机生命周期管理。&lt;/li>
&lt;li>建立更好地理解我们在负载下各数据中心的网络行为，并确保按需修改网络路由的自动化方式。&lt;/li>
&lt;li>目前，我们正在Azure上构建下一代基础设施，包括Hadoop协议栈。就中期而言，我们将有一个额外的集群，该集群建立在一个完全不同的技术栈上，这应该会进一步帮助我们实现冗余。&lt;/li>
&lt;li>调查其他架构的可行性，作为我们Azure迁移的一部分。例如，我们可以将数据摄取一次，然后将相同的数据复制到 D/R Cluster中，并通过数据布局和查询规划优化来吃掉延迟成本。我们正在采用Apache Iceberg作为我们的表格式。有了Iceberg，我们应该可以更好地对受影响的文件进行针对性的恢复。在我们当前架构的临时，我们已经建立了几个工具，让我们能够辅助恢复（例如，恢复除损坏数据以外的所有数据，更容易从另一个集群恢复大文件等），并围绕它建立了运行本，以便于访问。&lt;/li>
&lt;li>努力审计我们的流程，以确保它们有定义良好的灾难恢复协议。&lt;/li>
&lt;li>增加我们的灾难演练的频率，此外，还要审查灾难演练中流程的表现与他们所述的恢复策略的评分卡。&lt;/li>
&lt;li>继续研究我们的工具，围绕着理解世系，因为事实证明它在识别流和数据的依赖性方面非常有用。这也将提供理解生态系统端到端的连接图的能力&amp;ndash;这在灾难恢复等大型协调事件中是非常宝贵的。&lt;/li>
&lt;li>一些流量所有者在他们的应用工作流本身中增强了弹性。例如，对延迟敏感的应用，产生关键业务小时和每日指标的应用，正在应用逻辑本身中进行明确的数据呆滞性与弹性的权衡。&lt;/li>
&lt;li>专注于提高我们预测数据恢复的数据可用性SLA的能力，以便在这种性质的事件再次发生时有能力快速发布。我们的内部数据消费者可以使用这些SLA，并在恢复协议的决策选择方面做出明智的决定。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="github可用性报告----2020年7月">GitHub可用性报告 &amp;ndash; 2020年7月&lt;/h3>
&lt;ul>
&lt;li>概述：相信很多人都经历了 GitHub 7 月13 日的事故。该事故持续了4 小时 25 分钟。以下报告包括对涉及Kubernetes pods和DNS服务受损的事件的描述。&lt;/li>
&lt;li>来源官网：https://github.blog/2020-08-05-github-availability-report-july-2020/&lt;/li>
&lt;li>要点回顾：
&lt;ul>
&lt;li>事件的起因是我们的生产型 Kubernetes Pods 开始被标记为不可用。这在我们的集群中层出不穷，导致容量减少，最终导致我们的服务瘫痪。对Pods的调查显示，Pod中的一个容器超过了其定义的内存限制并被终止。尽管该容器不需要处理生产流量，但Kubernetes的性质要求所有容器都是健康的，Pod才能被标记为可用。&lt;/li>
&lt;li>一般情况下，当一个Pod运行到这种故障模式时，集群会在一分钟左右恢复。在这种情况下，Pod中的容器被配置为ImagePullPolicy为Always，它指示Kubernetes每次都要获取新的容器镜像。然而，由于之前完成了一次例行的DNS维护操作，我们的集群无法成功到达我们的注册表，导致Pods无法启动。当为了缓解而触发了重新部署时，这个问题的影响就增加了，我们看到这个故障开始在我们的生产集群中传播。直到我们使用缓存的DNS记录重新启动进程，我们才得以成功获取容器镜像，重新部署，并恢复我们的服务。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>后续事项：展望未来，我们已经确定了本季度要解决的一些领域。
&lt;ul>
&lt;li>加强监控，确保Pod重启不会再基于这种相同的模式而失败&lt;/li>
&lt;li>尽量减少我们对镜像仓库的依赖。&lt;/li>
&lt;li>在DNS变更期间扩大验证范围&lt;/li>
&lt;li>重新评估所有现有的Kubernetes部署策略&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;h3 id="项目发布速递">项目发布速递&lt;/h3>
&lt;ul>
&lt;li>Nano 5.0 — The popular simple Unix text editor.&lt;/li>
&lt;li>Julia 1.5 — High performance, dynamically typed language.&lt;/li>
&lt;li>Mastodon 3.2 — Federated social app.&lt;/li>
&lt;li>Django 3.1 — Python-based Web application framework.&lt;/li>
&lt;li>Alacritty 0.5 — Simplicity-focused terminal emulator.&lt;/li>
&lt;li>Terraform 0.13 General Availability&lt;/li>
&lt;/ul>
&lt;h3 id="devops-大会峰会">DevOps 大会/峰会&lt;/h3>
&lt;p>KubeCon + CloudNativeCon 欧洲 2020&lt;/p>
&lt;ul>
&lt;li>8 月 17 – 20， 免费&lt;/li>
&lt;li>报名： &lt;a class="link" href="https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/" target="_blank" rel="noopener"
>https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Commit 峰会&lt;/p>
&lt;ul>
&lt;li>8 月 26 ~ 27， GitLab 免费&lt;/li>
&lt;li>报名：https://about.gitlab.com/events/commit/&lt;/li>
&lt;/ul>
&lt;p>DevOps Fusion&lt;/p>
&lt;ul>
&lt;li>8 月 26 日， 免费&lt;/li>
&lt;li>报名：https://swisstestingday.ch/en/&lt;/li>
&lt;/ul>
&lt;p>DevOpsCon 伦敦 2020&lt;/p>
&lt;ul>
&lt;li>8 月 31 日 ~ 9 月 3 日，收费&lt;/li>
&lt;li>报名： &lt;a class="link" href="https://devopscon.io/" target="_blank" rel="noopener"
>https://devopscon.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>提交大议信息发邮件到：martin@devopscoach.org&lt;/p>
&lt;h2 id="文章">文章&lt;/h2>
&lt;p>麦肯锡：《十种 &amp;ldquo;反模式&amp;rdquo;，让技术转型脱轨。》&lt;/p>
&lt;ul>
&lt;li>大型组织转型项目的反模式清单。在选择技术、技术管理、路线图等方面都有很好的建议。&lt;/li>
&lt;li>&lt;a class="link" href="https://www.mckinsey.com/business-functions/mckinsey-digital/our-insights/ten-antipatterns-that-are-derailing-technology-transformations" target="_blank" rel="noopener"
>https://www.mckinsey.com/business-functions/mckinsey-digital/our-insights/ten-antipatterns-that-are-derailing-technology-transformations&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>AWS：《为运维可视化构建仪表板》&lt;/p>
&lt;ul>
&lt;li>一篇关于仪表盘设计的好文章，有很多道理、提示、技巧和例子。&lt;/li>
&lt;li>&lt;a class="link" href="https://aws.amazon.com/builders-library/building-dashboards-for-operational-visibility/" target="_blank" rel="noopener"
>https://aws.amazon.com/builders-library/building-dashboards-for-operational-visibility/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>LearnK8s：《验证Kubernetes YAML的最佳实践和策略》&lt;/p>
&lt;ul>
&lt;li>看看对验证和测试Kubernetes配置文件有用的几个工具。有用的对比表和每个不同工具的例子。&lt;/li>
&lt;li>&lt;a class="link" href="https://learnk8s.io/validating-kubernetes-yaml" target="_blank" rel="noopener"
>https://learnk8s.io/validating-kubernetes-yaml&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>推荐 Arrested DevOps 这个网站，它是帮助你实现理解、开发良好实践、运营你的团队和组织的播客，以获得最大的DevOps妙用。&lt;/p>
&lt;ul>
&lt;li>关于Service Mesh和SMI规范的所有事情的讨论。&lt;/li>
&lt;li>&lt;a class="link" href="https://www.arresteddevops.com/service-mesh/" target="_blank" rel="noopener"
>https://www.arresteddevops.com/service-mesh/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Dev.to：《使用Conftest、Regula和OPA保护你的Terraform管道安全》&lt;/p>
&lt;ul>
&lt;li>关于使用Conftest和Regula帮助编写安全的Terraform代码和测试作为CI流程的一部分的帖子。&lt;/li>
&lt;li>&lt;a class="link" href="https://dev.to/prince_of_pasta/securing-your-terraform-pipelines-with-conftest-regula-and-opa-4hkh" target="_blank" rel="noopener"
>https://dev.to/prince_of_pasta/securing-your-terraform-pipelines-with-conftest-regula-and-opa-4hkh&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>无罪网：《事件回顾从小白到大师》&lt;/p>
&lt;ul>
&lt;li>Under Armour（！）的首席SRE对他们如何进行SRE有很多有趣的事情可以分享。我喜欢他们对事件回顾的方法，即从1:1采访相关人员开始。保罗-奥斯曼&amp;ndash;Under Armour（无罪峰会）。&lt;/li>
&lt;li>&lt;a class="link" href="https://www.blameless.com/blog/improving-postmortems-paul-osman" target="_blank" rel="noopener"
>https://www.blameless.com/blog/improving-postmortems-paul-osman&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>medium.com 《主要的DevOps挑战以及如何应对这些挑战？》&lt;/p>
&lt;ul>
&lt;li>DevOps通过提供高效的解决方案，帮助加快交付速度，鼓励团队之间的协作，并促进敏捷环境，推动组织走向更美好的未来。&lt;/li>
&lt;li>&lt;a class="link" href="https://medium.com/faun/major-devops-challenges-and-how-to-address-them-3b4d7b6ee50b" target="_blank" rel="noopener"
>https://medium.com/faun/major-devops-challenges-and-how-to-address-them-3b4d7b6ee50b&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="工具">工具&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Open Service Mesh是一个新的轻量级、可扩展的、用于动态微服务环境的服务网状结构。它提供了开箱即用的可观察性功能，并使用SMI进行配置。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://openservicemesh.io/" target="_blank" rel="noopener"
>https://openservicemesh.io/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/openservicemesh/osm" target="_blank" rel="noopener"
>https://github.com/openservicemesh/osm&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Sysbox是一个新的容器运行时，它可以让你更容易地在容器中运行低级软件，比如Systemd、Docker和Kubernetes。由于可插拔的运行时功能，你也可以用Docker运行它。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/nestybox/sysbox" target="_blank" rel="noopener"
>https://github.com/nestybox/sysbox&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我们开始看到应用框架和开发者工具为在Kubernetes等平台上运行提供高级抽象。Tye是一个有趣的.NET工具，它可以简化在云原生平台上运行.NET应用程序。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/dotnet/tye" target="_blank" rel="noopener"
>https://github.com/dotnet/tye&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Turandot允许在Kubernetes中使用TOSCA。TOSCA提供了一种高级服务描述，旨在实现底层基础设施之间的可移植性和互操作性。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://turandot.puccini.cloud/" target="_blank" rel="noopener"
>https://turandot.puccini.cloud/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Copper是一个Kubernetes的配置文件验证器。它支持使用内置的Javascript DSL编写定制测试。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/cloud66-oss/copper" target="_blank" rel="noopener"
>https://github.com/cloud66-oss/copper&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>腾讯云下部署 Elastic Stack 各种 Beat 的最佳实践</title><link>https://martinliu.cn/blog/%E8%85%BE%E8%AE%AF%E4%BA%91%E4%B8%8B%E9%83%A8%E7%BD%B2-elastic-stack-%E5%90%84%E7%A7%8D-beat-%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</link><pubDate>Fri, 07 Aug 2020 17:14:20 +0800</pubDate><guid>https://martinliu.cn/blog/%E8%85%BE%E8%AE%AF%E4%BA%91%E4%B8%8B%E9%83%A8%E7%BD%B2-elastic-stack-%E5%90%84%E7%A7%8D-beat-%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-6.jpg" alt="Featured image of post 腾讯云下部署 Elastic Stack 各种 Beat 的最佳实践" />&lt;h2 id="概述">概述&lt;/h2>
&lt;p>使用 Elastic Stack 的各种 Beats 模块可以彻底的终结在服务器上手工捞日志查指标的扭曲实践。利用腾讯云提供的 Elasticsearch 服务，可以轻松搞定大规模云环境的运维。本文一次性的帮你梳理清楚了，必备的基础操作，确保你能用 Elastic Stack 安全、稳定和扩展的持续监控你的生产环境。&lt;/p>
&lt;h2 id="创建-es-集群">创建 ES 集群&lt;/h2>
&lt;p>登录腾讯云服务控制台，查询并进入 Elasticsearc 服务，点击新建按钮，创建 Elasticsearch 集群。如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/qcloud-es.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>集群配置说明：&lt;/p>
&lt;ul>
&lt;li>北京区&lt;/li>
&lt;li>7.5.1 - 白金版&lt;/li>
&lt;li>单可用区&lt;/li>
&lt;li>冷热模式&lt;/li>
&lt;/ul>
&lt;p>本实例其它参数保持默认，可以根据实际业务需求修改这些参数。&lt;/p>
&lt;p>点击下一步后，设置 Elasticsearch 集群的超级用户名和密码。&lt;/p>
&lt;p>在几分钟之后这个集群就成功创建了。查看下面这些基础的配置。&lt;/p>
&lt;ul>
&lt;li>启用 Kibana 内网地址： &lt;a class="link" href="http://es-ot7wei87.internal.kibana.tencentelasticsearch.com:5601" target="_blank" rel="noopener"
>http://es-ot7wei87.internal.kibana.tencentelasticsearch.com:5601&lt;/a> 用于 Bests 的 Setup 命令&lt;/li>
&lt;li>启用 Kibana 公网地址： &lt;a class="link" href="https://es-ot7wei87.kibana.tencentelasticsearch.com:5601" target="_blank" rel="noopener"
>https://es-ot7wei87.kibana.tencentelasticsearch.com:5601&lt;/a> 用户Elastic Stack 的初始化配置，如创建角色和调整索引生命周期策略等。&lt;/li>
&lt;/ul>
&lt;p>这样我们就有了一个安全、可扩展和性能足够的 ES 后台服务。&lt;/p>
&lt;h2 id="创建-beats-写入角色和用户">创建 Beats 写入角色和用户&lt;/h2>
&lt;p>登录 Kibana ，点击角色和用户管理，创建用于 Beast 配置文件的‘只写’权限用户。&lt;/p>
&lt;ul>
&lt;li>创建 beats-writer 角色&lt;/li>
&lt;li>创建 beats-writer 用户，该用户只赋予beats-writer角色，自定义一个安全的复杂密码。&lt;/li>
&lt;/ul>
&lt;p>Beats-write 角色设置如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/beats-writer.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这个用户会用到后面的所有 Beats 配置文件中，用最小化权限用户极大的降低了数据泄露的风险。&lt;/p>
&lt;h2 id="beats-初始化配置">Beats 初始化配置&lt;/h2>
&lt;p>登录准备好的一个 Linux 服务器，在这台机器上做 Beats 相关的初始化工作；也就是要执行一些列的 setup 命令；这些命令的作用是：&lt;/p>
&lt;ul>
&lt;li>在 ES 后台加载索引模板，以及索引的 ILM 策略。&lt;/li>
&lt;li>加载 Kibana 相关的对象和可视化仪表板。&lt;/li>
&lt;/ul>
&lt;p>注意这是一次性的工作，在一个虚拟机上，只需要成功执行一次。&lt;/p>
&lt;p>SSH 登录到准备的 Linux 服务器上，首先需要安装相关 beats 的 rpm 安装包，安装命令在这里忽略，否则无法执行这些命令。 安装好 filebeat 和 metricbeat 的rpm 包后， 执行下面参考命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat setup -e &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.logstash.enabled&lt;span class="o">=&lt;/span>&lt;span class="nb">false&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.hosts&lt;span class="o">=[&lt;/span>&lt;span class="s1">&amp;#39;192.168.0.43:9200&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.username&lt;span class="o">=&lt;/span>elastic &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.password&lt;span class="o">=&lt;/span>YourPassWord &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E setup.kibana.host&lt;span class="o">=&lt;/span>es-ot7wei87.internal.kibana.tencentelasticsearch.com:5601
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metricbeat setup -e &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.hosts&lt;span class="o">=[&lt;/span>&lt;span class="s1">&amp;#39;192.168.0.43:9200&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.username&lt;span class="o">=&lt;/span>elastic &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E output.elasticsearch.password&lt;span class="o">=&lt;/span>YourPassWord &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -E setup.kibana.host&lt;span class="o">=&lt;/span>es-ot7wei87.internal.kibana.tencentelasticsearch.com:5601
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行以上命令的时候 Beats 处于默认安装的状态，这些命令行参数是必要的查收，有了这些参数 beats 会忽略默认的配置文件。&lt;/p>
&lt;p>以上命令根据需求，如果需要使用到其它的 Beats，请使用相关的 setup 命令。其中的 es 和 kibana 相关信息需求参考上一步创建的 es 集群信息。&lt;/p>
&lt;p>以上所有命令成功之后，登录 Kibana 界面，点击 Dashboard 菜单，这里应该已经加载了很多仪表板。目前为止 Elastic Stack 后台就初始化成功了。&lt;/p>
&lt;h2 id="在节点上正式部署-beats">在节点上正式部署 Beats&lt;/h2>
&lt;p>参考和修改安装脚本，一键式安装和配置 Beats&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/martinliu/elastic-stack-lab.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd tencent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sh add-agent.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>成功执行完以上脚本后，相关的 beats 服务应是正常运行的状态。执行完这个命令之后，在 Linux 服务器上使用检查服务是否正常运行 &lt;code>sudo systemctl status filebeat&lt;/code> ；使用这个命令应该可以看到filebeat 服务都是正常运行的。&lt;/p>
&lt;p>这个脚本所使用的配置文件中的要点：&lt;/p>
&lt;ul>
&lt;li>删除了所有和数据摄入无关的配置（例如 es 和 kibana 的配置和初始化等）&lt;/li>
&lt;li>加入了最小化的必要的最佳实践参数集合&lt;/li>
&lt;li>建议根据需求增加 beats 相关的模块&lt;/li>
&lt;li>根据需求加入必要的 Beat 配置参数&lt;/li>
&lt;/ul>
&lt;p>实例配置文件如。&lt;/p>
&lt;p>filebeat.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#=========================== Filebeat inputs =============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat.inputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- type: log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paths:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /var/log/*.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#============================= Filebeat modules ===============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat.config.modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: ${path.config}/modules.d/*.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.period: 60s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#-------------------------- Elasticsearch output ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output.elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: [&amp;#34;${INT_ES_SRV}&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: ${BEATS_WRITER_PW}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ${BEATS_WRITER_USERNAME}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#================================ Processors =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">processors:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_host_metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netinfo.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.ttl: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_cloud_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_docker_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_kubernetes_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target: &amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.name: &amp;#39;Joint Lab&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.id: &amp;#39;es-qq&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==================== Best Practice Configuration ==========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.ilm.check_exists: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logging.level: error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue.spool: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>metricbeat.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># =========================== Modules configuration ============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metricbeat.config.modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: ${path.config}/modules.d/*.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.period: 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#-------------------------- Elasticsearch output ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output.elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: [&amp;#34;${INT_ES_SRV}&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: ${BEATS_WRITER_PW}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ${BEATS_WRITER_USERNAME}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#================================ Processors =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">processors:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_host_metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netinfo.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.ttl: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_cloud_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_docker_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_kubernetes_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target: &amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.name: &amp;#39;Joint Lab&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.id: &amp;#39;es-qq&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==================== Best Practice Configuration ==========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.ilm.check_exists: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logging.level: error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue.spool: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上配置文件使用了这些通用最佳实践配置参数。&lt;/p>
&lt;ul>
&lt;li>使用 ECS 扩展字段，丰富上下文含义&lt;/li>
&lt;li>启用 beats 端点监控&lt;/li>
&lt;li>用 keystore 隐藏所有敏感信息&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#禁用索引 ilm 策略检查，避免无用动作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.ilm.check_exists: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#把Beats自身的日志记录调到最低级别降低
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logging.level: error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#开启本地默认的端点缓存行为
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue.spool: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#启用端点的监控
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="排错方法">排错方法&lt;/h2>
&lt;h3 id="filebeat-setup-不成功">filebeat setup 不成功&lt;/h3>
&lt;p>在任何 beats 首次做 setup 命令的时候，它可能是会在分钟级别成功结束。如果发生失败或者卡顿的情况，可以等一下，等更长时间看看。不成功的话，需要反复执行，排查 es 和 kibana 服务是否能正常工作。知道陈功了，才能进行下一步的安装工作。&lt;/p>
&lt;h3 id="配置文件错误导致的服务不能启动">配置文件错误导致的服务不能启动&lt;/h3>
&lt;p>由于上面的定制化配置文件也可能出现错误，特别是在首次部署这个配置文件的时候，可以先把日志级别 error 哪一行注释掉，把启动服务那两行也注释掉。&lt;/p>
&lt;p>然后在命令行执行 &lt;code>filebeat -e&lt;/code> 查看整个 feilebeat 的启动过程，这个命令会读取定制化的配置文件，然后开始连接后台 es 服务，然后进入正常数据传送的状态。这个过程中如果有任何配置错误，也可以直观的看到相关信息，直到调整到正常的状态。&lt;/p>
&lt;p>以上过程的调整好了以后，一定要通过 git 版本管理起来，然后可以放心的在其它节点上执行 beast 的一键式部署工作。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>以上是在 Beats 部署相关基础最佳实践，也就是说在生产环境中 ES 后台和 beats 的搭配，以及本文所涉及的内容都是基线配置。建议根据自己的需求做更多的调优，这里使用 shell 脚本的方式部署 beats 和相关的配置，shell 脚本适合用于演示原理，建议替换成你所熟悉的自动化运维工具，例如 ansible 等工具。从而保证更大规模的自动化部署和维护。&lt;/p>
&lt;p>本相关的配置文件和脚本位于：https://github.com/martinliu/elastic-stack-lab.git&lt;/p></description></item><item><title>DevOps Coach 周刊 #2</title><link>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#2/</link><pubDate>Mon, 03 Aug 2020 22:26:23 +0800</pubDate><guid>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#2/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps Coach 周刊 #2" />&lt;p>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg"
loading="lazy"
alt="DevOps Coach weekly update"
>&lt;/p>
&lt;h2 id="宕机">宕机&lt;/h2>
&lt;p>上周全球重大宕机事故清单。&lt;/p>
&lt;h3 id="facebook">Facebook&lt;/h3>
&lt;ul>
&lt;li>具英媒体报道：7月 28 日 12：20pm， Facebook, Instagram 和 WhatsApp 这三款用户的一半以上的用户，无法加载出页面，无法正常使用服务。 Facebook 官方还没有关于这次事故的回应。实际上整个欧洲大陆，特别是葡萄牙和西班牙的故障更要严重一些。原因不明。&lt;/li>
&lt;li>影响范围：London, Birmingham 和 Manchester.&lt;/li>
&lt;li>来源： &lt;a class="link" href="https://metro.co.uk/2020/07/28/facebook-instagram-whatsapp-13048914/" target="_blank" rel="noopener"
>https://metro.co.uk/2020/07/28/facebook-instagram-whatsapp-13048914/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="fastly---知名-cdn-服务商">fastly - 知名 CDN 服务商&lt;/h3>
&lt;ul>
&lt;li>官方声明：Fastly的网络具有内置冗余和自动故障转移路由，以确保最佳性能和正常运行时间。但当网络问题出现时，我们认为我们的客户应该得到清晰、透明的沟通，这样他们才能保持对我们的服务和团队的信任。当我们重新分配流量、升级硬件或在极少数情况下我们的网络不提供流量时，我们会在这里发布通知。如果您遇到问题而没有看到张贴的通知，请发送电子邮件至 &lt;a class="link" href="mailto:support@fastly.com" >support@fastly.com&lt;/a> 寻求帮助。&lt;/li>
&lt;li>影响范围：North America (Ashburn (BWI), Ashburn (DCA), Ashburn (IAD), Ashburn (WDC), Atlanta (FTY), Atlanta (PDK), Dallas (DAL), Dallas (DFW), Jacksonville (JAX)).&lt;/li>
&lt;li>来源：https://status.fastly.com/history&lt;/li>
&lt;/ul>
&lt;h3 id="heroku">Heroku&lt;/h3>
&lt;ul>
&lt;li>官方声明：JUL 28, 2020 09:15 UTC Heroku 平台的很大的部分都遭受到可用性故障。然后开始和他们的服务提供商一起解决问题。一个多小时后平台恢复了正常。&lt;/li>
&lt;li>来源：https://status.heroku.com/incidents/2090&lt;/li>
&lt;/ul>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;p>DevOps实践的采用与组织拥抱数字化转型齐头并进。这两个短语都有被过度使用的风险，但这些帖子讨论了一些有用的心理模型，以帮助聚焦对话。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://aws.amazon.com/blogs/enterprise-strategy/mental-models-for-digital-transformation/" target="_blank" rel="noopener"
>https://aws.amazon.com/blogs/enterprise-strategy/mental-models-for-digital-transformation/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://aws.amazon.com/blogs/enterprise-strategy/mental-models-to-clarify-the-goals-for-of-digital-transformation-part-2/" target="_blank" rel="noopener"
>https://aws.amazon.com/blogs/enterprise-strategy/mental-models-to-clarify-the-goals-for-of-digital-transformation-part-2/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>开发者平台的哪些属性会导致采用？下面的文章是专门关于大规模边缘平台的，但对于任何为开发者构建各种平台的人来说，包括在内部平台团队中这样做的人来说，都是很好的阅读。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.cloudflare.com/cloudflare-workers-serverless-week/" target="_blank" rel="noopener"
>https://blog.cloudflare.com/cloudflare-workers-serverless-week/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>当第一次接受DevOps实践和云服务时，在大型组织中通常会建立一个卓越中心。在采取这种方法时，需要避免一些陷阱，下面的文章将讨论这些陷阱。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.contino.io/insights/cloud-centre-of-excellence-2020" target="_blank" rel="noopener"
>https://www.contino.io/insights/cloud-centre-of-excellence-2020&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>最近的DevSecCon在线会议的视频都可以看到，其中涵盖了一系列有趣的主题，包括基础设施作为代码安全、持续审计合规、供应链攻击等。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.mydevsecops.io/post/devseccon24" target="_blank" rel="noopener"
>https://www.mydevsecops.io/post/devseccon24&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>关于无服务器架构和单体应用之间的权衡，主要集中在较小规模的应用上，是一个不错的讨论。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://dev.to/iamcherta/my-monolith-doesn-t-fit-in-your-serverless-311o" target="_blank" rel="noopener"
>https://dev.to/iamcherta/my-monolith-doesn-t-fit-in-your-serverless-311o&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>一篇关于linux内核新特性的深度技术文章，这些特性应该会让非特权容器更受欢迎。对seccomp的细节也做了很好的介绍。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://people.kernel.org/brauner/the-seccomp-notifier-new-frontiers-in-unprivileged-container-development" target="_blank" rel="noopener"
>https://people.kernel.org/brauner/the-seccomp-notifier-new-frontiers-in-unprivileged-container-development&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>基于角色的访问控制在保护Kubernetes的安全方面发挥着重要作用。这个方便的网站将文章、工具和官方文档收集在一起。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://rbac.dev/" target="_blank" rel="noopener"
>https://rbac.dev/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>对于任何使用Serverless技术的人来说，这是一项有趣的调查，来自该领域的众多公司。我期待着结果公布时的到来。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://codingsans.typeform.com/to/mPinnC" target="_blank" rel="noopener"
>https://codingsans.typeform.com/to/mPinnC&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="文章">文章&lt;/h2>
&lt;p>LaunchDarkly从基于 Polling 的架构开始，最终迁移到向客户推送变化量（Streaming）。Dawn Parzych&amp;ndash;LaunchDarkly。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://launchdarkly.com/blog/launchdarklys-evolution-from-polling-to-streaming/" target="_blank" rel="noopener"
>https://launchdarkly.com/blog/launchdarklys-evolution-from-polling-to-streaming/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>一个更简单的分布式跟踪的替代方案，用于故障排除。
简要概述了分布式追踪的一些问题，以及涉及人工智能的另一种方式的建议。 Larry Lancaster - Zebrium&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.zebrium.com/blog/virtual-tracing-a-simpler-alternative-to-distributed-tracing-for-troubleshooting" target="_blank" rel="noopener"
>https://www.zebrium.com/blog/virtual-tracing-a-simpler-alternative-to-distributed-tracing-for-troubleshooting&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>谷歌云 对 Classroom 的故障总结报告 2020-07-07
这是Google在7月7日对其Google Classroom 事件的事后报告。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://static.googleusercontent.com/media/www.google.com/en//appsstatus/ir/u5sinmib27yly4i.pdf" target="_blank" rel="noopener"
>https://static.googleusercontent.com/media/www.google.com/en//appsstatus/ir/u5sinmib27yly4i.pdf&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>面向领域的微服务架构介绍
长期以来，Uber一直是微服务的倡导者。现在，凭借几年的经验，他们分享了他们所学到的经验，以及如何处理一些陷阱。Adam Gluck - Uber&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://eng.uber.com/microservice-architecture/" target="_blank" rel="noopener"
>https://eng.uber.com/microservice-architecture/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>通过远程事件响应使PagerDuty始终保持开启状态。
本文开篇就从PagerDuty的角度对Cloudflare中断的情况进行了有趣的描述。Dave Bresci - PagerDuty&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.pagerduty.com/blog/remote-incident-response/" target="_blank" rel="noopener"
>https://www.pagerduty.com/blog/remote-incident-response/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>安全是设计出来的？
这篇文章反映了两种不同的安全理念。&lt;/p>
&lt;ul>
&lt;li>工程设计应确保系统的安全。&lt;/li>
&lt;li>单纯的设计不能保证系统的安全
Lorin Hochstein&lt;/li>
&lt;li>&lt;a class="link" href="https://surfingcomplexity.blog/2020/07/28/safe-by-design/" target="_blank" rel="noopener"
>https://surfingcomplexity.blog/2020/07/28/safe-by-design/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>我们能做的就是发现问题
你不能用可用性指标来告知你的系统是否足够可靠，因为它们只能在你出现问题时告诉你。
Lorin Hochstein&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://surfingcomplexity.blog/2020/07/28/all-we-can-do-is-find-problems/" target="_blank" rel="noopener"
>https://surfingcomplexity.blog/2020/07/28/all-we-can-do-is-find-problems/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="工具推荐">工具推荐&lt;/h2>
&lt;p>管理 K8s 命令行工具的工具，所有命令行工具一站式搞定，一键式安装很多 k8s 集群基础。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/alexellis/arkade/" target="_blank" rel="noopener"
>https://github.com/alexellis/arkade/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>一个在文件系统之上的文件系统。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/carlosgaldino/gotenksfs" target="_blank" rel="noopener"
>https://github.com/carlosgaldino/gotenksfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>一个 Cloud-Native API Gateway&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/apache/apisix" target="_blank" rel="noopener"
>https://github.com/apache/apisix&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>一个简单而全面的容器漏洞扫描器，适用于CI。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/aquasecurity/trivy" target="_blank" rel="noopener"
>https://github.com/aquasecurity/trivy&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>APM 分布式追踪为何这么难？</title><link>https://martinliu.cn/blog/apm-%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%BD%E8%B8%AA%E4%B8%BA%E4%BD%95%E8%BF%99%E4%B9%88%E9%9A%BE/</link><pubDate>Sun, 02 Aug 2020 20:48:30 +0800</pubDate><guid>https://martinliu.cn/blog/apm-%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%BD%E8%B8%AA%E4%B8%BA%E4%BD%95%E8%BF%99%E4%B9%88%E9%9A%BE/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-3.jpg" alt="Featured image of post APM 分布式追踪为何这么难？" />&lt;p>用跟踪的方式调试计算机程序的调用堆栈的实践其实由来已久，这种方法可能仅次于用 print 输出各种信息。在云原生的时代里，我们还会遭遇工具过剩的情况，工具之间的相生相克加剧了实施分布式追踪的难度。&lt;/p>
&lt;p>总的来说有三个基础难点：&lt;/p>
&lt;ol>
&lt;li>生成追踪数据难。对已有应用系统的代码库进行埋点处理的挑战巨大，你的应用程序系统的模式可能也不符合埋点的模式需求。&lt;/li>
&lt;li>采集存储追踪数据难。捕获和管理大量追踪数据包，即照顾到查询和使用的需求，又要设定成本合理的数据存储策略，处理数据收集能力的扩缩容。&lt;/li>
&lt;li>从数据中获益难。如何理解和使用数据产生可执行行动，如何用它优化微服务的遥测，怎么将它的利益扩展到各个相关团队。&lt;/li>
&lt;/ol>
&lt;p>分布式追踪系统的实施结果是落地一条能深度洞察目标系统的工具。让人们能轻松的理解局部和整体的状态，特别是在请求堆栈中的任何局部服务出现故障时，可以最快速的定位故障根源。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/screenshot-apm-service-map.png"
loading="lazy"
>&lt;/p>
&lt;p>上图是用追踪数据生成的服务地图。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/blog-k8s-o11y-apm-trace-correlation.jpg"
loading="lazy"
>&lt;/p>
&lt;p>上图是一次用户请求的全部细节，还可以一键式的跳转到相应的日志或者指标。&lt;/p>
&lt;p>以上三个难点覆盖了部署实施分布式追踪系统的核心领域。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>埋点&lt;/strong> OpenTelemetry是目前受到广泛支持的埋点框架，对棕地应用和绿地应用进行埋点处理的挑战是不同的，需要遵循不同的额最佳实践。&lt;/li>
&lt;li>&lt;strong>部署&lt;/strong> 在理解了目标追踪应用系统的运行时状态后，最好使用一种弹性的方式收集和存储追踪数据。满足分析数据量需求的同时平衡存储成本。&lt;/li>
&lt;li>&lt;strong>收益&lt;/strong> 将其与日志和指标工具关联起来，定义和监控重要有意义的监控点，用于优化系统性能基线，并最小化 MTTR。&lt;/li>
&lt;/ul>
&lt;p>在云计算、Kubernetes、容器化大行其道的今天，分布式追踪的实施是不是正处在进退维谷的尴尬境地呢？其实并非如此，特别是监控运维挑战越高的应用，其实越需要需要使用分布式追踪 APM 工具。分布式追踪对云原生的容器化微服务应用尤为适用。APM 对单纯使用日志和指标的场景具有极大的补充和提高作用，而且它是可观测性策略的关键组成部分。&lt;/p>
&lt;p>总的来说分布式追踪工具可以通过追踪的方式展现请求在系统中的流动状态。流行的开源埋点框架使之与应用的编程语言、运行时环境无关，可以适配与所有类型的应用和服务。有些 APM 工具可以支持运行时埋点（或称为运行框架埋点），在不改变代码的情况下采集追踪数据。APM 的实施虽然有一定难度，但是当开始实施埋点处理，收集追踪数据以后，相关的价值和收益也就会慢慢显现出来了。&lt;/p>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://opentelemetry.io/" target="_blank" rel="noopener"
>https://opentelemetry.io/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.elastic.co/cn/apm" target="_blank" rel="noopener"
>https://www.elastic.co/cn/apm&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>应用开发 DBA 技巧集锦</title><link>https://martinliu.cn/blog/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91-dba-%E6%8A%80%E5%B7%A7%E9%9B%86%E9%94%A6/</link><pubDate>Fri, 31 Jul 2020 22:23:44 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91-dba-%E6%8A%80%E5%B7%A7%E9%9B%86%E9%94%A6/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 应用开发 DBA 技巧集锦" />&lt;h2 id="前言">前言&lt;/h2>
&lt;p>DBA 可能是经常被其它团队依赖的一种角色、团队，因此他们也会有着很长的等待队列，也经常是事故救火中的英雄和常客。DevOps 强调用跨角色的学习和培训来解决这种依赖，也就是 DevOps 工作三步法的第三步，学习与持续改进。 本文写给所有的应用开发者，希望大家能多学习一些 DBA 知识，减少对专家 DBA 的依赖，加速你们的业务的交付，消除由于等待而造成的浪费。&lt;/p>
&lt;p>本文转载自：https://hakibenita.com/sql-tricks-application-dba&lt;/p>
&lt;p>以下是正文原文：&lt;/p>
&lt;p>当我开始我的开发生涯时，我的第一份工作是DBA。那时，在AWS RDS、Azure、Google Cloud和其余云服务之前，有两种类型的DBA。&lt;/p>
&lt;p>&lt;strong>基础设施 DBA&lt;/strong> 负责建立数据库配置存储，并负责备份和复制。设置好数据库后，基础架构DBA会时不时地冒出来做一些 &amp;ldquo;实例调整&amp;rdquo;，比如调整缓存的大小。&lt;/p>
&lt;p>&lt;strong>应用 DBA&lt;/strong> 从基础架构DBA那里得到了一个干净的数据库，并负责模式设计：创建表、索引、约束和调优SQL。应用DBA也是实现ETL流程和数据迁移的人。在使用存储过程的团队中，应用DBA也会维护这些存储过程。&lt;/p>
&lt;p>应用DBA通常是开发团队的一部分。他们会拥有深厚的领域知识，所以通常他们只会在一两个项目上工作。基础架构DBA通常是某个IT团队的一部分，他们会同时在多个项目上工作。&lt;/p>
&lt;p>&lt;strong>我是一名应用DBA&lt;/strong> 我从来没有任何欲望去摆弄备份或调整存储（我相信这很迷人！）。直到今天，我都喜欢说自己是一个懂得开发应用的DBA，而不是一个懂得数据库的开发者。&lt;/p>
&lt;p>在本文中，我将分享我一路走来收集到的一些关于数据库开发的非浅显技巧。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/00-sql-tricks-dba.jpg"
loading="lazy"
>&lt;/p>
&lt;p>Be that guy&amp;hellip;&lt;!-- raw HTML omitted -->Image by &lt;!-- raw HTML omitted -->CommitStrip&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="只更新需要更新的内容">只更新需要更新的内容&lt;/h2>
&lt;p>UPDATE是一个相对昂贵的操作。为了加快UPDATE命令的速度，最好确保只更新需要更新的内容。&lt;/p>
&lt;p>以这个查询为例，它对电子邮件列进行了标准化处理。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1010000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1583&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">935&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">584&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>看起来很无辜吧，查询更新了1010,000个用户的邮箱。但是，真的需要更新所有的行吗？&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">299&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">470&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>只需要更新10000行。通过减少受影响的行数，执行时间从1.5秒降到了不到300ms。更新的行数少了，也节省了后期的数据库维护工作。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1264.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这种类型的大更新在数据迁移脚本中非常常见。所以下次写迁移脚本时，一定要只更新需要更新的内容。&lt;/p>
&lt;h2 id="在批量加载过程中禁用约束和索引">在批量加载过程中禁用约束和索引。&lt;/h2>
&lt;p>约束是关系型数据库的重要组成部分：它们能保持数据的一致性和可靠性。不过它们的好处是有代价的，在加载或更新大量行时最明显。&lt;/p>
&lt;p>为了演示，为一个存储设置一个小模式。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CASCADE&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">serial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">TEXT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">price&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">INT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">price&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">)::&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CASCADE&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">serial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">TEXT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">serial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">timestamptz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>模式定义了不同类型的约束，如 &amp;ldquo;非空 &amp;ldquo;和唯一约束。&lt;/p>
&lt;p>要设置一个基线，首先要向销售表添加外键，然后将一些数据加载到表中:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_product_fk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">413&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_customer_fk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">464&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_created_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">605&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SALE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">interval&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;1 hour&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">)::&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">)::&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">15410&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">234&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">410&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>定义约束和索引后，将100万行加载到表中，耗时约15.4s。&lt;/p>
&lt;p>接下来，尝试先将数据加载到表中，然后才添加约束和索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SALE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">interval&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;1 hour&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">)::&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">)::&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2277&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">824&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">02&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">278&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_product_fk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">169&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">193&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_customer_fk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">customer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">185&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">633&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_created_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">484&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">244&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将数据加载到没有索引和约束的表中，速度快了很多，2.27s，而之前是15.4s。在数据加载到表中后创建索引和约束花了一点时间，但总体上整个过程快了很多，3.1s，而之前是15.4s。&lt;/p>
&lt;p>遗憾的是，对于索引，PostgreSQL并没有提供一个简单的方法，除了放弃和重新创建索引。在其他数据库中，如Oracle，你可以禁用和启用索引，而不必重新创建索引。&lt;/p>
&lt;h2 id="中间数据中使用-unlogged-的表">中间数据中使用 UNLOGGED 的表&lt;/h2>
&lt;p>当你修改PostgreSQL中的数据时，修改的内容会被写入提前写日志&lt;a class="link" href="https://www.postgresql.org/docs/current/wal-intro.html" target="_blank" rel="noopener"
>（WAL）&lt;/a>。WAL用于维护完整性，在恢复期间快速推进数据库，并维护复制。&lt;/p>
&lt;p>写入WAL是经常需要的，但在某些情况下，你可能愿意放弃它的一些用途来使事情变得更快。一个例子是中间表。&lt;/p>
&lt;p>中间表是一次性的表，它存储了用于实现某些过程的临时数据。例如，ETL过程中一个非常常见的模式是将数据从CSV文件加载到中间表，清理数据，然后加载到目标表。在这种用例中，中间表是一次性的，在备份或复制中没有用处。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1265.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在灾难发生时不需要恢复的中间表，以及在副本中不需要的中间表，可以设置为 UNLOGGED。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UNLOGGED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">staging_table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cm">/* table definition */&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>**注意：**在使用UNLOGGED之前，请务必了解其全部含义。&lt;/p>
&lt;h2 id="使用-with-和-returning-实施完成的流程">使用 WITH 和 RETURNING 实施完成的流程&lt;/h2>
&lt;p>假设你有一个用户表，你发现表中有一些重复的内容。&lt;/p>
&lt;p>表的设置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">SERIAL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">TEXT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UNIQUE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">SERIAL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">INT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders_user_fk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">USERS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VALUES&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;foo@bar.baz&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;me@hakibenita.com&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ME@hakibenita.com&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VALUES&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>表的内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">order_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">order_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">----+-------------------+----------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">baz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">baz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ME&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ME&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用户haki benita注册了两次，一次是用邮箱ME@hakibenita.com，另一次是用me@hakibenita.com。由于我们在将邮件插入表中时没有将其规范化，现在我们必须处理重复的问题。&lt;/p>
&lt;p>为了合并重复的用户，我们要。&lt;/p>
&lt;ol>
&lt;li>通过小写的电子邮件来识别重复的用户。&lt;/li>
&lt;li>更新订单以引用其中一个重复的用户。&lt;/li>
&lt;li>从用户表中删除重复的用户&lt;/li>
&lt;/ol>
&lt;p>整合重复用户的一种方法是使用中间表。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UNLOGGED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">normalized_email&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">array_remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ARRAY_AGG&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">normalized_email&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">normalized_email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-------------------+-----------------+--------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>中间表持有重复用户的映射。对于每一个使用相同的标准化电子邮件地址出现不止一次的用户，我们定义最小ID的用户作为我们将所有重复用户转换为的用户。其他用户被保存在一个数组列中，这些用户的所有引用都将被更新。&lt;/p>
&lt;p>利用中间表，我们更新订单表中重复用户的引用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANY&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">that&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">there&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">no&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">references&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">safely&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">unnest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>请注意，我们使用了函数 unnest 来 &amp;ldquo;转置 &amp;ldquo;数组，即把每个数组元素变成一行。&lt;/p>
&lt;p>这就是结果：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">order_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">order_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">----+-------------------+----------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">baz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">baz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>很好，用户3(&lt;a class="link" href="mailto:ME@hakibenita.com" >ME@hakibenita.com&lt;/a>)的所有出现都转换为用户2(&lt;a class="link" href="mailto:me@hakibenita.com" >me@hakibenita.com&lt;/a>)。&lt;/p>
&lt;p>我们还可以验证重复的用户是否从用户表中被删除。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">----+-------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">baz&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">hakibenita&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在我们可以摆脱中间表了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个很好，但是非常长，需要清理! 有没有更好的方法？&lt;/p>
&lt;h3 id="使用通用表表达式cte">使用通用表表达式(CTE)&lt;/h3>
&lt;p>使用常见的表表达式，也就是所谓的WITH子句，我们只需要一条SQL语句就可以执行整个过程。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">array_remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ARRAY_AGG&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">update_orders_of_duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANY&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">unnest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们不创建中间表，而是创建一个通用的表表达式，并多次重复使用。&lt;/p>
&lt;h3 id="从-cte-返回结果">从 CTE 返回结果&lt;/h3>
&lt;p>在WITH子句中执行DML的一个很好的特性是，你可以使用&lt;a class="link" href="https://www.postgresql.org/docs/current/dml-returning.html" target="_blank" rel="noopener"
>RETURNING关键字&lt;/a>来返回数据。例如，让我们报告更新和删除的行数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">array_remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ARRAY_AGG&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">update_orders_of_duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_to_user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANY&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">du&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">RETURNING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">delete_duplicate_user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">unnest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">convert_from_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">duplicate_users&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">RETURNING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">update_orders_of_duplicate_users&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">orders_updated&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">delete_duplicate_user&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_deleted&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个结果是:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">orders_updated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_deleted&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">----------------+---------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这种方法的主要吸引力在于，整个过程是在一条命令中执行的，所以不需要管理一个事务，也不需要担心在过程失败时清理中间表。&lt;/p>
&lt;p>**注意：**Reddit上的&lt;a class="link" href="https://www.reddit.com/r/programming/comments/hyv0xh/some_sql_tricks_of_an_application_dba/fzhqzw5?utm_source=share&amp;amp;utm_medium=web2x" target="_blank" rel="noopener"
>一位读者&lt;/a>给我指出了在&lt;a class="link" href="https://www.postgresql.org/docs/current/queries-with.html#QUERIES-WITH-MODIFYING" target="_blank" rel="noopener"
>普通表表达式中执行DML的一个可能无法预测的行为&lt;/a>。&lt;/p>
&lt;blockquote>
&lt;p>WITH中的子语句相互之间以及与主查询同时执行。因此，当在WITH中使用数据修改语句时，指定的更新实际发生的顺序是不可预测的。&lt;/p>
&lt;/blockquote>
&lt;p>这意味着你不能依赖独立子语句的执行顺序。看来，当子语句之间存在依赖关系时，比如在上面的例子中，你可以依靠依赖的子语句在被使用之前执行。&lt;/p>
&lt;h2 id="避免在选择性低的列上使用索引">避免在选择性低的列上使用索引。&lt;/h2>
&lt;p>假设你有一个注册流程，用户用电子邮件地址注册。为了激活帐户，他们必须验证他们的电子邮件。你的表可以是这样的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">serial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">boolean&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你的大部分用户都是好公民，他们用有效的邮箱注册，并立即激活账号。让我们用用户数据来填充表格，其中大概有90%的用户被激活。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">md5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------+--------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">102567&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">897433&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要查询已激活和未激活的用户，你可能会想在列激活上创建一个索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_activated_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当你试图查询未激活的用户时，数据库正在使用索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1923&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">11282&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">102567&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Filter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_activated_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">1897&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">102567&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">false&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>数据库估计，过滤后会有102567个，这大概是表的10%。这与我们填充的数据是一致的，所以数据库对数据的感觉很好。&lt;/p>
&lt;p>但是，当你尝试查询激活用户时，你发现数据库决定不使用索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">18334&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">897433&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Filter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>很多开发人员在数据库没有使用索引的时候，往往会感到困惑。解释为什么索引并不总是最好的选择的一种方法是：&lt;strong>如果你必须读取整个表，你会使用索引吗？&lt;/strong>&lt;/p>
&lt;p>答案可能是否定的，因为你为什么要这样做？从磁盘上读取是很昂贵的，你希望尽可能少地读取。例如，如果一个表是10MB，索引是1MB，要读取整个表，你就必须从磁盘上读取10MB。如果要使用索引来读取表，你就必须从磁盘上读取11MB。这是很浪费的。&lt;/p>
&lt;p>有了这样的理解，我们来看看PostgreSQL对表的收集统计。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">n_distinct&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">most_common_vals&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">most_common_freqs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pg_stats&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;activated&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">------------------+------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">n_distinct&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">most_common_vals&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">most_common_freqs&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">89743334&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">10256667&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当PostgreSQL分析该表时，发现激活的列有两个不同的值。most_common_vals列中的值t对应的是most_common_freqs列中的频率0.89743334，值f对应的是频率0.10256667。也就是说，经过分析，数据库估计表中89.74%是激活用户，其余10.26%是未激活用户。&lt;/p>
&lt;p>通过这些统计，PostgreSQL决定，如果希望90%的行满足条件，最好扫描整个表。过了这个阈值，数据库可能会决定使用或不使用索引，这取决于很多因素，没有一个经验法则可以使用。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1266.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="使用部分索引">使用部分索引&lt;/h2>
&lt;p>在上一节中，我们在布尔值列上创建了一个索引，其中90%的值为真（激活用户）。当我们试图查询活跃用户时，数据库没有使用该索引。然而，当我们查询未激活的用户时，数据库却使用了该索引。&lt;/p>
&lt;p>这就引出了下一个问题&amp;hellip;&amp;hellip;如果数据库不打算使用索引来过滤活跃用户，那么我们为什么要首先使用索引呢？&lt;/p>
&lt;p>在回答这个问题之前，我们先来看看激活列上的完整索引有多大重量。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">di&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_activated_ix&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Schema&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Owner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Size&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------+--------------------+-------+-------+-------+------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_activated_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">haki&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MB&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>索引是21MB。仅供参考，用户表是65MB。这意味着索引的重量约为表的32%。我们也知道~90%的索引可能不会被使用。&lt;/p>
&lt;p>在PostgreSQL中，有一种方法可以只在表的一部分创建索引，&lt;a class="link" href="https://www.postgresql.org/docs/current/indexes-partial.html" target="_blank" rel="noopener"
>使用所谓的部分索引&lt;/a>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_unactivated_partial_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用WHERE子句，我们限制了索引所索引的行。首先让我们确认一下它是否有效。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">activated&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">using&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_unactivated_partial_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">3493&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">102567&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>令人惊奇的是，数据库很聪明，它明白我们在查询中使用的谓词可以通过部分索引来满足。&lt;/p>
&lt;p>使用部分索引还有一个好处。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">di&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_unactivated_partial_ix&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">relations&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Schema&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Owner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Size&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------+------------------------------+-------+-------+-------+---------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users_unactivated_partial_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">haki&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kB&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>部分索引仅重2.2MB。列上的全索引重达21MB。部分索引的大小正好是全索引的10%，这与表中非活跃用户的比例相匹配。&lt;/p>
&lt;h2 id="始终加载排序过的数据">始终加载排序过的数据&lt;/h2>
&lt;p>这是我在代码评审中评论最多的事情之一。它不像其他提示那样直观，它对性能的影响很大。&lt;/p>
&lt;p>比如说你有一个大的销售事实表。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">serial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Every&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">night&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">during&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">some&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ETL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">process&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">load&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">md5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-01-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">interval&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;1 day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">365&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了伪造一个加载过程，我们使用了随机数据。我们插入了10万行随机的用户名，销售日期从2020-01-01到未来两年。&lt;/p>
&lt;p>该表主要用于制作汇总销售报表。大多数报表都是通过日期来过滤，得到特定时期的销售情况。为了加快范围扫描，你可以在sold_at上创建一个索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>让我们看看一个查询的执行计划，以获取2020年6月的所有销售。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">108&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">1107&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">69&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4293&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Recheck&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Blocks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">exact&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">927&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">107&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4293&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Planning&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">191&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Execution&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在执行了几次查询预热缓存后，时间稳定在约6ms。&lt;/p>
&lt;h3 id="bitmap-scan">Bitmap Scan&lt;/h3>
&lt;p>从执行计划来看，我们可以看到数据库使用了位图扫描。位图扫描的工作分为两个阶段。&lt;/p>
&lt;ul>
&lt;li>位图索引扫描。浏览整个索引sale_fact_sold_at_ix 并映射所有包含相关记录的表页。&lt;/li>
&lt;li>位图堆扫描：读取包含相关行的页面。读取包含相关行的页面，并在这些页面中找到满足条件的行。&lt;/li>
&lt;/ul>
&lt;p>页面可以包含多条记录。第一步使用索引来查找页面。第二步检查这些页面里面的行，因此执行计划中的 &amp;ldquo;Recheck Cond &amp;ldquo;操作。&lt;/p>
&lt;p>这时，很多DBA和开发人员都会收工，继续进行下一个查询。BUT，有一个方法可以让这个查询变得更好。&lt;/p>
&lt;h3 id="index-scan">Index Scan&lt;/h3>
&lt;p>为了让事情变得更好，我们会在加载数据的方式上做一个小小的改变。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">md5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-01-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">interval&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;1 day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">365&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ORDER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">VACUUM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这次，我们加载的数据是按sold_at排序的。&lt;/p>
&lt;p>让我们看看现在完全相同的查询的执行计划是什么样子的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">using&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">184&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">73&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4272&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Planning&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">145&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Execution&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">294&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在运行了几次查询后，我们得到了一个稳定在2.3ms的轮回时间。与之前的查询耗时约6ms相比，我们得到了约60%的稳定节省。&lt;/p>
&lt;p>还有一点我们可以马上看到，这次数据库没有使用位图扫描，而是使用了 &amp;ldquo;常规 &amp;ldquo;索引扫描。为什么会这样呢？&lt;/p>
&lt;h3 id="correlation">Correlation&lt;/h3>
&lt;p>当数据库在分析一张表时，它会收集各种统计数据。其中一个统计是&lt;a class="link" href="https://www.postgresql.org/docs/current/view-pg-stats.html" target="_blank" rel="noopener"
>相关性&lt;/a>。&lt;/p>
&lt;blockquote>
&lt;p>物理行排序和逻辑列值排序之间的统计相关性。这个范围从-1到+1。当该值接近-1或+1时，由于减少了对磁盘的随机访问，估计对该列进行索引扫描会比接近零时更便宜。&lt;/p>
&lt;/blockquote>
&lt;p>正如官方文档所解释的那样，相关性衡量了特定列值在磁盘上的 &amp;ldquo;排序 &amp;ldquo;程度。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1267.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>当相关性为1，或接近1时，意味着表中的页在磁盘上的存储顺序与表中的行大致相同。这其实是很常见的。例如，自动递增的ID通常会有接近1的相关性。跟踪行创建时间的日期和时间戳列通常也会有接近于1的相关性。&lt;/p>
&lt;p>当相关性为-1时，表的页面相对于列的排序顺序是相反的。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1268.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>当相关性接近0时，意味着列中的值与表的页面存储方式没有相关性或相关性很小。&lt;/p>
&lt;p>回到我们的sale_fact表，当我们将数据加载到表中时，没有先进行排序，这些就是相关性。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pg_stats&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;sale_fact&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------+----------+--------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">005344716&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">011389783&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>自动生成的列id的相关性为1，sold_at列的相关性很低：连续的值分散在整个表中。&lt;/p>
&lt;p>当我们将排序数据加载到表中时，这些是数据库计算出的相关性。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------+----------+----------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00041992788&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在sold_at的相关性为1。&lt;/p>
&lt;p>那么为什么数据库在相关性较低的时候使用位图扫描，而在相关性接近1的时候使用索引扫描呢？&lt;/p>
&lt;ul>
&lt;li>当相关性为1时，数据库估计请求范围内的行很可能在连续的页面中。在这种情况下，索引扫描很可能读取很少的页面。&lt;/li>
&lt;li>当相关性接近0时，数据库估计请求范围内的行很可能分散在整个表中。在这种情况下，使用位图扫描来映射存在行的表页是有意义的，只有这样才能获取行并应用条件。&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;p>下次将数据加载到表中时，请考虑如何查询数据，并确保以用于范围扫描的索引能够受益的方式进行排序。&lt;/p>
&lt;h3 id="cluster-command">CLUSTER Command&lt;/h3>
&lt;p>另一种按特定索引对磁盘上的表进行 &amp;ldquo;排序 &amp;ldquo;的方法是使用CLUSTER命令。&lt;/p>
&lt;p>例如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- Insert rows without sorting
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">md5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()::&lt;/span>&lt;span class="nb">text&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-01-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">interval&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;1 day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">365&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">generate_series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">100000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pg_stats&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;sale_fact&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------+-----------+----------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">9702674&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">05&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">010033822&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们按照随机顺序向表中加载数据，结果sold_at的相关性接近于零。&lt;/p>
&lt;p>为了按sold_at对表进行 &amp;ldquo;重新排列&amp;rdquo;，我们使用CLUSTER命令，根据索引sale_fact_sold_at_ix对磁盘上的表进行排序。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CLUSTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CLUSTER&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pg_stats&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;sale_fact&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">attname&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">correlation&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-----------+----------+--------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">002239401&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">013389298&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>表格聚类后，我们可以看到sold_at的相关性为1。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1269.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>关于CLUSTER命令需要注意的一些事情。&lt;/p>
&lt;ul>
&lt;li>通过特定列对表进行聚类可能会影响其他列的相关性。例如，请看我们将表按sold_at聚类后，列id的相关性。&lt;/li>
&lt;li>CLUSTER是一个重度、阻塞的操作，所以请确保不要在活表上执行。&lt;/li>
&lt;/ul>
&lt;p>基于这两个原因，最好是将数据分类插入，不要依赖CLUSTER。&lt;/p>
&lt;h2 id="使用-brin-索引高相关性的列">使用 BRIN 索引高相关性的列&lt;/h2>
&lt;p>说到索引，大多数开发人员会想到B-Tree索引。但是，PostgreSQL提供了其他类型的索引，比如&lt;a class="link" href="https://www.postgresql.org/docs/current/brin.html" target="_blank" rel="noopener"
>BRIN&lt;/a>。&lt;/p>
&lt;blockquote>
&lt;p>BRIN是为处理非常大的表而设计的，在这些表中，某些列与它们在表中的物理位置有一些自然的关联。&lt;/p>
&lt;/blockquote>
&lt;p>BRIN是Block Range Index的缩写。根据文档，BRIN索引对于相关性高的列效果最好。正如我们在前面的章节中已经看到的，一些字段如自动递增的ID和时间戳与表的物理结构有天然的相关性，因此它们是BRIN索引的良好候选。&lt;/p>
&lt;p>在某些情况下，与类似的B-Tree索引相比，BRIN索引在大小和性能上可以提供更好的 &amp;ldquo;性价比&amp;rdquo;。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1270.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>BRIN索引的工作原理是将值的范围保持在表内相邻的若干页内。假设我们在一列中有这些值，每个值都是单表页。&lt;/p>
&lt;p>&lt;code>1, 2, 3, 4, 5, 6, 7, 8, 9&lt;/code>&lt;/p>
&lt;p>BRIN索引在表中相邻页的范围内工作。如果相邻页数设置为3，索引将把表格分为以下范围：&lt;/p>
&lt;p>&lt;code>[1,2,3], [4,5,6], [7,8,9]&lt;/code>&lt;/p>
&lt;p>对于每个范围，BRIN指数保持最小值和最大值。&lt;/p>
&lt;p>&lt;code>[1–3], [4–6], [7–9]&lt;/code>&lt;/p>
&lt;p>利用上面的索引，尝试搜索数值5。&lt;/p>
&lt;ul>
&lt;li>[1–3] - Definitely not here&lt;/li>
&lt;li>[4–6] - Might be here&lt;/li>
&lt;li>[7–9] - Definitely not here&lt;/li>
&lt;/ul>
&lt;p>利用BRIN索引，我们设法将搜索范围限制在4-6块。&lt;/p>
&lt;p>让我们再举一个例子，这次列中的值会有一个接近于零的相关性，这意味着它们没有被排序。&lt;/p>
&lt;p>&lt;code>[2,9,5], [1,4,7], [3,8,6]&lt;/code>&lt;/p>
&lt;p>将3个相邻的块进行索引，会产生以下范围。&lt;/p>
&lt;p>&lt;code>[2–9], [1–7], [3–8]&lt;/code>&lt;/p>
&lt;p>让我们试着搜索一下数值5。&lt;/p>
&lt;p>[2–9] - 可能在这
[1–7] - 可能在这
[3–8] - 可能在这&lt;/p>
&lt;p>在这种情况下，索引根本没有限制搜索，因此它是没有用的。&lt;/p>
&lt;h3 id="理解-pages_per_range">理解 pages_per_range&lt;/h3>
&lt;p>相邻页面的数量由参数pages_per_range决定。每个范围的页数会影响BRIN索引的大小和精度。&lt;/p>
&lt;p>大的pages_per_range会产生一个小而不准确的索引。
小的pages_per_range会产生更大更准确的索引。
默认的页面_per_range为128页。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1271.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>为了演示，让我们在2个相邻页面的范围上创建一个BRIN索引，并搜索值5。&lt;/p>
&lt;ul>
&lt;li>[1–2] - 肯定不在这&lt;/li>
&lt;li>[3–4] - 肯定不在这&lt;/li>
&lt;li>[5–6] - 可能在这&lt;/li>
&lt;li>[7–8] - 肯定不在这&lt;/li>
&lt;li>[9] - 肯定不在这&lt;/li>
&lt;/ul>
&lt;p>使用每个范围为2页的索引，我们能够将搜索限制在第5和第6块。当范围为3页时，索引将搜索范围限制在4、5和6块。&lt;/p>
&lt;p>两个索引之间的另一个区别是，当范围是3页时，我们只需要保留3个范围。当范围为2时，我们必须保留5个范围，所以索引更大。&lt;/p>
&lt;p>&lt;strong>创建 BRIN 索引&lt;/strong>&lt;/p>
&lt;p>使用之前的sales_fact，让我们在sold_at列上创建一个BRIN索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_bix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">BRIN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pages_per_range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这就创建了一个BRIN索引，默认的页面_per_range = 128。&lt;/p>
&lt;p>让我们尝试查询销售日期的范围。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">1135&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">61&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4319&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Recheck&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Removed&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Recheck&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">23130&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Blocks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lossy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">256&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_bix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">03&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">12500&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Execution&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">877&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>数据库使用我们的BRIN索引得到了一系列的销售日期，但这不是有趣的部分&amp;hellip;&amp;hellip;。&lt;/p>
&lt;p>&lt;strong>优化 pages_per_range&lt;/strong>&lt;/p>
&lt;p>根据执行计划，数据库从使用索引找到的页面中删除了23130条记录。这可能表明我们为索引设置的范围对于这个特定的查询来说太大。让我们尝试创建一个每个范围内页数较少的索引。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_bix64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">BRIN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pages_per_range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">ANALYZE&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">1048&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4319&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Recheck&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Removed&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Recheck&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">9434&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Heap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Blocks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lossy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bitmap&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_bix64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">02&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">6667&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Execution&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">491&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在每个范围为64页的情况下，数据库从使用索引找到的页面中删除的记录较少，只删除了9,434条，而当范围为128页时，删除了23,130条。这意味着数据库需要做更少的IO，查询速度也稍快，约5.5ms，而不是约8.9ms。&lt;/p>
&lt;p>用不同的pages_per_range值测试索引，产生了以下结果。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">PAGES_PER_RANGE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ROWS_REMOVED_BY_INDEX_RECHECK&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">130&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">434&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">874&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">446&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">446&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们可以看到，当我们减少pages_per_range时，索引更加准确，并且从使用索引找到的页面中删除的行数更少。&lt;/p>
&lt;p>注意，我们针对一个非常特殊的查询进行了优化。这对于演示目的来说是可以的，但在实际生活中，最好使用满足大多数查询需求的值。&lt;/p>
&lt;p>&lt;strong>评估指数大小&lt;/strong>&lt;/p>
&lt;p>BRIN索引的另一大卖点是其大小。在前面的章节中，我们在sold_at字段上创建了一个B-Tree索引。该索引的大小是2224kB。page_per_range=128的BRIN索引的大小只有48kb。这比B-Tree索引小了46倍。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Schema&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Owner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Size&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------+-----------------------+-------+-------+-----------+-------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_bix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">haki&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kB&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">haki&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2224&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kB&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>BRIN索引的大小也会受到pages_per_range的影响。例如，page_per_range=2的BRIN索引重56kb，仅比48kb稍大。&lt;/p>
&lt;h2 id="让索引-不可见">让索引 &amp;ldquo;不可见&amp;rdquo;&lt;/h2>
&lt;p>PostgreSQL有一个很好的功能，叫做事务性DDL。在使用Oracle多年后，我已经习惯了诸如CREATE、DROP和ALTER等结束事务的DDL命令。然而，在PostgreSQL中，你可以在事务中执行DDL命令，而且只有当事务提交时，更改才会生效。&lt;/p>
&lt;p>正如我最近发现的那样，使用事务性DDL，你可以使索引不可见! 当你想看看一个执行计划在没有一些索引的情况下是什么样子的时候，这就很方便了。&lt;/p>
&lt;p>例如，在上一节的sale_fact表中，我们在sold_at上创建了一个索引。获取7月份销售额的执行计划是这样的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">using&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">182&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4319&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Cond&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了看看如果索引sale_fact_sold_at_ix不存在，执行计划会是什么，我们可以在一个事务里面放弃索引，然后立即回滚。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BEGIN&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">BEGIN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXPLAIN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">-#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BETWEEN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">QUERY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PLAN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">---------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scan&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="mi">2435&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4319&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Filter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-01&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sold_at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2020-07-31&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ROLLBACK&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ROLLBACK&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们首先使用BEGIN开始一个事务。然后我们放弃索引并生成一个执行计划。注意，现在执行计划使用了全表扫描，就像索引不存在一样。此时事务仍在进行中，所以还没有丢弃索引。为了在不丢弃索引的情况下完成事务，我们使用ROLLBACK命令回滚事务。&lt;/p>
&lt;p>现在，确保索引仍然存在。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">db&lt;/span>&lt;span class="o">=#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">di&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">relations&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">Schema&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Owner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">Size&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">--------+----------------------+-------+-------+-----------+---------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact_sold_at_ix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">haki&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sale_fact&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2224&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kB&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他不支持事务性DDL的数据库提供了其他方法来实现同样的目标。例如，Oracle让你将一个索引标记为不可见，这将导致优化器忽略它。&lt;/p>
&lt;p>注意：在事务内部丢弃索引会在事务处于活动状态时锁定表的并发选择、插入、更新和删除。请在测试环境中谨慎使用，并避免在生产数据库中使用。&lt;/p>
&lt;h2 id="不要在圆周时间安排长期运行的流程">不要在圆周时间安排长期运行的流程。&lt;/h2>
&lt;p>众所周知，当一只股票的价格达到一个漂亮的整数，如10元、100元、1000元时，就会发生奇怪的事情，这是投资者都知道的事实。&lt;a class="link" href="https://www.investopedia.com/trading/support-and-resistance-basics/#mntl-sc-block_1-0-38" target="_blank" rel="noopener"
>正如下面的文章&lt;/a>所解释的。&lt;/p>
&lt;blockquote>
&lt;p>[&amp;hellip; &amp;hellip;]资产的价格可能会有一个困难的时间 超过一个整数，如50元或100元/股。大多数没有经验的交易者倾向于在价格处于整数时买入或卖出资产，因为他们更有可能觉得一只股票在这种水平上的价值相当高。&lt;/p>
&lt;/blockquote>
&lt;p>开发商在这个意义上与投资者并没有什么不同。当他们需要安排一个长期运行的过程时，他们通常会把时间安排在一个整点。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG1272.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这种在圆周时间安排任务的倾向，会在这些时间内造成一些异常的负载。所以，如果你需要安排一些长期运行的进程，如果你在其他时间安排，你有更好的机会找到一个系统在休息。&lt;/p>
&lt;p>另一个好主意是给任务的日程安排应用一个随机的延迟，这样它就不会每次都在同一时间运行。这样，即使另一个任务安排在同一时间运行，也不会有大问题。如果你使用systemd定时器单元来安排任务，你可以使用&lt;a class="link" href="https://www.freedesktop.org/software/systemd/man/systemd.timer.html#RandomizedDelaySec=" target="_blank" rel="noopener"
>RandomizedDelaySec&lt;/a>选项来实现。&lt;/p>
&lt;h2 id="结束语">结束语&lt;/h2>
&lt;p>本文涵盖了我自己经验中的一些琐碎和非琐碎的技巧。其中有些技巧很容易实现，有些则需要更深入地了解数据库的工作原理。数据库是大多数现代系统的支柱，所以花一些时间来了解它们的工作原理对任何开发人员来说都是一项很好的投资!&lt;/p></description></item><item><title>DevOps Coach 周刊 #1</title><link>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#1/</link><pubDate>Tue, 28 Jul 2020 10:35:19 +0800</pubDate><guid>https://martinliu.cn/blog/devops-coach-%E5%91%A8%E5%88%8A-#1/</guid><description>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg" alt="Featured image of post DevOps Coach 周刊 #1" />&lt;p>&lt;img src="https://martinliu.cn/images/weeklyupdate.jpg"
loading="lazy"
alt="DevOps Coach weekly update"
>&lt;/p>
&lt;h2 id="新闻">新闻&lt;/h2>
&lt;p>又到了一年一度的时间。定期的Puppet Devops状态调查已经开始。今年的重点是变革管理、持续交付和自服务平台之间的关系。
&lt;a class="link" href="https://polls.onresearch.net/xsurvey/20JT028/20JT028T1/Survey.aspx?ckie=true" target="_blank" rel="noopener"
>https://polls.onresearch.net/xsurvey/20JT028/20JT028T1/Survey.aspx?ckie=true&lt;/a>&lt;/p>
&lt;p>文档和设计在构建强大的系统中起着至关重要的作用。这篇文章探讨了为什么设计文档是有用的，以及它们应该包含什么样的内容。
&lt;a class="link" href="https://www.industrialempathy.com/posts/design-docs-at-google/" target="_blank" rel="noopener"
>https://www.industrialempathy.com/posts/design-docs-at-google/&lt;/a>&lt;/p>
&lt;p>一份关于公共Terraform代码安全状况的新报告。对于任何使用Terraform配置服务的人来说，一些有用的数据和一些好的提示。
&lt;a class="link" href="https://bridgecrew.io/blog/state-of-open-source-terraform-security-report-2020/" target="_blank" rel="noopener"
>https://bridgecrew.io/blog/state-of-open-source-terraform-security-report-2020/&lt;/a>&lt;/p>
&lt;p>看看如何使用 Azure Pipelines 自动验证 sysmon 配置。
&lt;a class="link" href="https://medium.com/falconforce/using-azure-pipelines-to-validate-my-sysmon-configuration-48315dba7571" target="_blank" rel="noopener"
>https://medium.com/falconforce/using-azure-pipelines-to-validate-my-sysmon-configuration-48315dba7571&lt;/a>&lt;/p>
&lt;p>这是一个很好的大规模迁移低级组件的故事，在这个案例中是一个应用服务器。金丝雀的推出、上游贡献、性能和其他有趣的话题。
&lt;a class="link" href="https://about.gitlab.com/blog/2020/07/08/migrating-to-puma-on-gitlab/" target="_blank" rel="noopener"
>https://about.gitlab.com/blog/2020/07/08/migrating-to-puma-on-gitlab/&lt;/a>&lt;/p>
&lt;p>拥抱云原生技术和工作方式会带来挑战，本帖记录了其中一些挑战，包括安全、缺乏专业知识、发布周期缓慢等。
&lt;a class="link" href="https://www.cloudops.com/2020/07/top-7-challenges-to-becoming-cloud-native/" target="_blank" rel="noopener"
>https://www.cloudops.com/2020/07/top-7-challenges-to-becoming-cloud-native/&lt;/a>&lt;/p>
&lt;h2 id="文章">文章&lt;/h2>
&lt;p>“How could they be so stupid?” 上周知名Twitter 账号入侵事件出现了更多细节，导致一些人说出了上面这句话。这里有一个看法，如何看待这不是 &amp;ldquo;愚蠢 &amp;ldquo;的问题。Lorin Hochstein
&lt;a class="link" href="https://surfingcomplexity.blog/2020/07/20/how-could-they-be-so-stupid/" target="_blank" rel="noopener"
>https://surfingcomplexity.blog/2020/07/20/how-could-they-be-so-stupid/&lt;/a>&lt;/p>
&lt;p>Data Consistency Checks 你的数据库中的数据应该是一致的&amp;hellip;&amp;hellip;但话说回来，事故不应该发生，对吗？Slack接受在他们的规模下，数据经常会出问题，他们有框架和一套工具来处理它。Paul Hammond and Samantha Stoller — Slack
&lt;a class="link" href="https://slack.engineering/data-consistency-checks-e73261318f96" target="_blank" rel="noopener"
>https://slack.engineering/data-consistency-checks-e73261318f96&lt;/a>&lt;/p>
&lt;p>Obstacles to Learning from Incidents 我从这篇文章中学到了很多东西。我最喜欢的障碍是 &amp;ldquo;通过差异化来拉开距离&amp;rdquo;，比如 &amp;ldquo;我们绝对不会以这种方式应对事件&amp;rdquo;。Thai Wood — Learning from Incidents
&lt;a class="link" href="https://www.learningfromincidents.io/blog/obstacles-to-learning-from-incidents" target="_blank" rel="noopener"
>https://www.learningfromincidents.io/blog/obstacles-to-learning-from-incidents&lt;/a>&lt;/p>
&lt;p>You don’t need SRE. What you need is SRE. […] SRE，也就是谷歌定义的SRE，对于大多数组织来说并不适用。Sanjeev Sharma
&lt;a class="link" href="https://sdarchitect.blog/2020/02/20/you-dont-need-sre-what-you-need-is-sre/" target="_blank" rel="noopener"
>https://sdarchitect.blog/2020/02/20/you-dont-need-sre-what-you-need-is-sre/&lt;/a>&lt;/p>
&lt;p>Questionable Advice: “What’s the critical path?” 专家建议，当你试图弄清楚你的关键路径是什么（以及为什么你想知道它是什么）时，应该问什么问题。Charity Majors
&lt;a class="link" href="https://charity.wtf/2020/07/24/questionable-advice-whats-the-critical-path/" target="_blank" rel="noopener"
>https://charity.wtf/2020/07/24/questionable-advice-whats-the-critical-path/&lt;/a>&lt;/p>
&lt;p>Thinking About Your Humans With J. Paul Reed 这个播客集有点像J.Paul Reed和Tim Heckman在https://srefromhome.com/的联合演讲的预览。我喜欢他们把这场传染病大流行称为长达数月的事件，并指出如果你总是在事件中，那么你永远不会在事件中。Julie Gunderson and Mandi Walls — Page it to the Limit
&lt;a class="link" href="https://www.pageittothelimit.com/thinking-about-your-humans/" target="_blank" rel="noopener"
>https://www.pageittothelimit.com/thinking-about-your-humans/&lt;/a>&lt;/p>
&lt;p>Rebuilding messaging: How we bootstrapped our platform 我喜欢一个好的双写故事。以下是LinkedIn如何过渡到新的消息存储机制。 Pradhan Cadabam and Jingxuan (Rex) Zhang — LinkedIn
&lt;a class="link" href="https://engineering.linkedin.com/blog/2020/bootstrapping-our-new-messaging-platform" target="_blank" rel="noopener"
>https://engineering.linkedin.com/blog/2020/bootstrapping-our-new-messaging-platform&lt;/a>&lt;/p>
&lt;p>Using Automation and SLOs to Create Margin in your Systems 在系统中留有余地，使其具有适应能力，并利用SLO(同情地)来推动优先事项的确定。
&lt;a class="link" href="https://thechief.io/c/blameless/using-automation-and-slos-create-margin-your-systems/" target="_blank" rel="noopener"
>https://thechief.io/c/blameless/using-automation-and-slos-create-margin-your-systems/&lt;/a>&lt;/p>
&lt;p>How to Classify Incidents 如何对事件进行分类 什么是事件分类？为什么要对事件进行分类？事件严重性与优先级，以及如何创建事件类别？
&lt;a class="link" href="https://thechief.io/c/blameless/how-classify-incidents/" target="_blank" rel="noopener"
>https://thechief.io/c/blameless/how-classify-incidents/&lt;/a>&lt;/p>
&lt;h2 id="宕机">宕机&lt;/h2>
&lt;p>上周全球重大宕机事故清单。&lt;/p>
&lt;ul>
&lt;li>Garmin 作为佳明手表和 app 的用户，我体验到了这场 24+小时的服务中断
&lt;ul>
&lt;li>&lt;a class="link" href="https://spectrumlocalnews.com/nys/rochester/ap-online/2020/07/24/garmin-fitness-tracking-service-goes-down-frustrating-users" target="_blank" rel="noopener"
>https://spectrumlocalnews.com/nys/rochester/ap-online/2020/07/24/garmin-fitness-tracking-service-goes-down-frustrating-users&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Snapchat 打不开 app，黑屏，无法使用摄像头相关功能
&lt;ul>
&lt;li>&lt;a class="link" href="https://screenrant.com/snapchat-down-app-slow-response-messages-not-sent-issues/" target="_blank" rel="noopener"
>https://screenrant.com/snapchat-down-app-slow-response-messages-not-sent-issues/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Tweetdeck Twitter 客户的工具服务发生故障。
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.independent.co.uk/life-style/gadgets-and-tech/news/tweetdeck-down-twitter-not-working-loading-a9633636.html" target="_blank" rel="noopener"
>https://www.independent.co.uk/life-style/gadgets-and-tech/news/tweetdeck-down-twitter-not-working-loading-a9633636.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>GGPoker 在 World Series of Poker (WSOP) 世界扑克大赛赛事期间发生一些列问题.
&lt;ul>
&lt;li>&lt;a class="link" href="https://portswigger.net/daily-swig/online-poker-operator-hit-by-ddos-attack-on-opening-day-of-wsop-event" target="_blank" rel="noopener"
>https://portswigger.net/daily-swig/online-poker-operator-hit-by-ddos-attack-on-opening-day-of-wsop-event&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Fastly (control plane) Full disclosure: Fastly is my employer.
&lt;ul>
&lt;li>&lt;a class="link" href="https://status.fastly.com/incidents/7q2psqf255wl" target="_blank" rel="noopener"
>https://status.fastly.com/incidents/7q2psqf255wl&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Squarespace 这一周非常痛苦，在July 21 事故后发生的相关事件：
* July 21 &lt;a class="link" href="https://status.squarespace.com/incidents/hh3p432jcq03" target="_blank" rel="noopener"
>https://status.squarespace.com/incidents/hh3p432jcq03&lt;/a>
* July 22 (包含事件详细分析) &lt;a class="link" href="https://status.squarespace.com/incidents/3cgg1171wyvz" target="_blank" rel="noopener"
>https://status.squarespace.com/incidents/3cgg1171wyvz&lt;/a>
* July 24 &lt;a class="link" href="https://status.squarespace.com/incidents/x63nssl9kzvm" target="_blank" rel="noopener"
>https://status.squarespace.com/incidents/x63nssl9kzvm&lt;/a>
* July 24 &lt;a class="link" href="https://status.squarespace.com/incidents/v6ql728f1f4d" target="_blank" rel="noopener"
>https://status.squarespace.com/incidents/v6ql728f1f4d&lt;/a>&lt;/li>
&lt;li>Google Cloud Platform 几个谷歌云平台组件受到影响，包括 7 层负载均衡器。
&lt;ul>
&lt;li>&lt;a class="link" href="https://status.cloud.google.com/incident/zall/20006" target="_blank" rel="noopener"
>https://status.cloud.google.com/incident/zall/20006&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="工具">工具&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/flant/shell-operator" target="_blank" rel="noopener"
>https://github.com/flant/shell-operator&lt;/a>
Shell-operator是一个在Kubernetes集群中运行事件驱动脚本的工具。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Fizzadar/pyinfra" target="_blank" rel="noopener"
>https://github.com/Fizzadar/pyinfra&lt;/a>
pyinfra在大规模的基础架构中实现了超快的自动化。它可以用于临时命令执行、服务部署、配置管理等。
#python #配置管理&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/alerta/alerta" target="_blank" rel="noopener"
>https://github.com/alerta/alerta&lt;/a>
Alerta 监测系统&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/GoogleCloudPlatform/terraformer" target="_blank" rel="noopener"
>https://github.com/GoogleCloudPlatform/terraformer&lt;/a>
CLI工具可以从现有的基础设施中生成terraform文件（反向Terraform）。
#基础设施即代码&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/visenger/awesome-mlops" target="_blank" rel="noopener"
>https://github.com/visenger/awesome-mlops&lt;/a>
MLOps的精选参考资料清单。
#github&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/cycloidio/inframap" target="_blank" rel="noopener"
>https://github.com/cycloidio/inframap&lt;/a>
读取你的tfstate或HCL，为每个提供者生成一个特定的图表，只显示最重要/相关的资源。
#terraform&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Hack-with-Github/Awesome-Hacking" target="_blank" rel="noopener"
>https://github.com/Hack-with-Github/Awesome-Hacking&lt;/a>
一个为黑客、Pentesters和安全研究人员提供的各种令人敬畏的列表的集合。
#github #安全&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/box/kube-iptables-tailer" target="_blank" rel="noopener"
>https://github.com/box/kube-iptables-tailer&lt;/a>
kube-iptables-tailer做的正是你所期望的。它将底层的iptables数据暴露给kubectl，方便发现服务在Kubernetes中互相通信的尝试和失败。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Stono/kconmon" target="_blank" rel="noopener"
>https://github.com/Stono/kconmon&lt;/a>
Kconmon是一个Kubernetes连通性监控工具，它可以运行频繁的测试（tcp、udp和dns），并公开Prometheus指标，这些指标富含节点名称，以及位置信息（如区域），使您能够关联可用性区域或节点之间的问题。&lt;/p></description></item><item><title>Skaffold 让 K8s 开发者更加酸爽</title><link>https://martinliu.cn/blog/skaffold-%E8%AE%A9-k8s-%E5%BC%80%E5%8F%91%E8%80%85%E6%9B%B4%E5%8A%A0%E9%85%B8%E7%88%BD/</link><pubDate>Wed, 15 Jul 2020 00:09:53 +0800</pubDate><guid>https://martinliu.cn/blog/skaffold-%E8%AE%A9-k8s-%E5%BC%80%E5%8F%91%E8%80%85%E6%9B%B4%E5%8A%A0%E9%85%B8%E7%88%BD/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post Skaffold 让 K8s 开发者更加酸爽" />&lt;p>&lt;img src="https://martinliu.cn/images/skaffold.png"
loading="lazy"
>&lt;/p>
&lt;p>今天介绍一个本地 Kubernetes 开发的利器 Skaffold。
这是我偶然间发现的一个工具，询问了一下周围的人，居然还没有人用过。测试之后，确实有一种不吐不快的感觉。&lt;/p>
&lt;h2 id="简介">简介&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/intro.gif"
loading="lazy"
>&lt;/p>
&lt;p>Skaffold Google 开发的一个开源项目。是一个非常轻量的命令行工具，就是一个可执行文件。它的主页上是这样的介绍它的。&lt;/p>
&lt;ul>
&lt;li>轻量：Skaffold只是一个客户端工具。由于集群上不需要任何的相关组件，您的集群没有任何开销或维护负担。&lt;/li>
&lt;li>运行在任何地方：Skaffold是与世界分享你的项目的最简单的方法：&amp;ldquo;git clone&amp;rdquo;，然后 &amp;ldquo;skaffold run&amp;rdquo;。此外，你还可以使用配置文件、本地用户配置、环境变量和标志来轻松地集成不同环境的差异。&lt;/li>
&lt;li>功能丰富：Skaffold拥有许多Kubernetes原生开发的基本功能，包括基于策略的打镜像标签、资源端口转发和日志、文件同步等。&lt;/li>
&lt;li>优化你的开发：Skaffold使内部循环紧密，高度优化，让您在开发的同时得到即时反馈。&lt;/li>
&lt;/ul>
&lt;h2 id="客户评价">客户评价&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/forgerock.png"
loading="lazy"
>&lt;/p>
&lt;p>&amp;ldquo;我们的客户很喜欢[Kubernetes]，但一直给我们反馈说在Kubernetes上开发很麻烦。Skaffold一针见血地解决了这个问题。以前需要几分钟才能部署的docker镜像或配置的更改，现在只需要几秒钟。Skaffold的插件架构使我们能够部署到Helm或Kustomize，并使用各种docker构建插件，如Kaniko。Skaffold用一个精简的工具取代了我们定制的实用程序和脚本集合，并且易于使用。&amp;rdquo;
Warren Strange，ForgeRock的工程总监。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/quora.png"
loading="lazy"
>&lt;/p>
&lt;p>&amp;ldquo;当我们评估我们可以使用Kubernetes的工作流程时，Skaffold脱颖而出，成为我们在开发和部署中都想要的工具。它为我们提供了一个跨应用程序的通用入口点，我们也可以为CI/CD重用。现在，我们所有的Kubernetes应用的CI/CD管道在构建和部署时都使用Skaffold。&amp;rdquo;
Taylor Barrella，Quora的软件工程师&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/tng.png"
loading="lazy"
>&lt;/p>
&lt;p>&amp;ldquo;Skaffold是一个了不起的工具，它为我们简化了开发和交付。Skaffold通过覆盖两个维度，击中了我们的甜蜜点。第一，从本地开发、集成测试到交付的整个开发周期。第二，Skaffold让我们能够在Linux、OSX和Windows上独立开发，不需要特定的平台逻辑。&amp;rdquo;
Martin Höfling，TNG技术咨询有限公司首席顾问&lt;/p>
&lt;h2 id="推荐首次测试流程">推荐首次测试流程&lt;/h2>
&lt;p>前置条件，你的开发用工作电脑上已经安装了它需要调用的 kubectl 和 docker 命令，kubectl 需要有至少一个可用的配置，这个配置可以指向任一一个你有权限部署的 Kubernetes 集群。&lt;/p>
&lt;p>我在 macOS 上，直接运行 &lt;code>‌brew install skaffold&lt;/code> 即可，其它系统参考：https://skaffold.dev/docs/install/&lt;/p>
&lt;p>克隆 Skaffold 的代码库到本地，获取必要的测试应用代码。&lt;/p>
&lt;p>&lt;code>‌git clone https://github.com/GoogleContainerTools/skaffold&lt;/code>&lt;/p>
&lt;p>进入代码库中的‘hello world’示例应用。&lt;/p>
&lt;p>执行：&lt;code>‌cd skaffold/examples/getting-started&lt;/code>&lt;/p>
&lt;p>执行 &lt;code>‌skaffold dev&lt;/code> ，你会看到 Skaffold 进入了这个项目的构建和运行的状态，执行结果是持续的输出 ”[getting-started] Hello world!“&lt;/p>
&lt;p>现在 Skaffold 就进入了 /getting-started 的监视状态。观察任何代码文件的修改存盘动作，每次代码的变更会触发 Skaffold 流水线的执行，skaffold.yaml 文件中描述了本地流水线中的相关动作：&lt;/p>
&lt;ul>
&lt;li>使用 Dockerfile 从源头构建Docker镜像。&lt;/li>
&lt;li>用Docker镜像的内容的sha256哈希值来打上标签。&lt;/li>
&lt;li>更新 Kubernetes manifest k8s-pod.yaml，以使用上一步构建的镜像。&lt;/li>
&lt;li>使用 kubectl apply -f 部署 Kubernetes manifest。&lt;/li>
&lt;li>从已部署的应用程序取回日志在本地控制台显示。&lt;/li>
&lt;/ul>
&lt;p>现在用代码编辑器打开这个项目唯一的程序文件 main.go ，修改其中的 Hello World 为其它你想到的词，保存后，观察构建的过程。&lt;/p>
&lt;h2 id="推荐微服务测试">推荐微服务测试&lt;/h2>
&lt;p>参考以下视频，测试 Skaffold 代码库中的 microservice 项目。&lt;/p>
&lt;h2 id="skaffold-流水线阶段">Skaffold 流水线阶段&lt;/h2>
&lt;p>Skaffold 主要会用到五个阶段。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/workflow.png"
loading="lazy"
>&lt;/p>
&lt;p>其所有阶段如下：&lt;/p>
&lt;ul>
&lt;li>Init ： generate a starting point for Skaffold configuration&lt;/li>
&lt;li>Build ：build images with different builders&lt;/li>
&lt;li>Tag ： tag images based on different policies&lt;/li>
&lt;li>Test ：test images with structure tests&lt;/li>
&lt;li>Deploy ：deploy with kubectl, kustomize or helm&lt;/li>
&lt;li>File Sync ： sync changed files directly to containers&lt;/li>
&lt;li>Log ： Tailing tail logs from workloads&lt;/li>
&lt;li>Port Forwarding ：forward ports from services and arbitrary resources to localhost&lt;/li>
&lt;li>Cleanup ： cleanup manifests and images&lt;/li>
&lt;/ul>
&lt;p>当你启动Skaffold时，它就会收集你项目中的源代码，并使用你所选择的工具构建工件；工件一旦成功构建，就会根据你的需要进行标记，并推送到你指定的仓库中。在工作流程的最后，Skaffold还帮助你将工件部署到你的Kubernetes集群中，同样使用你喜欢的工具。&lt;/p>
&lt;p>Skaffold允许你跳过各个阶段。例如，如果你在本地使用Minikube运行Kubernetes，Skaffold不会将工件推送到远程仓库。&lt;/p>
&lt;p>每个阶段的详情见：https://skaffold.dev/docs/pipeline-stages/&lt;/p>
&lt;h2 id="架构设计">架构设计&lt;/h2>
&lt;p>Skaffold 秉承着插件化的设计思想。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/architecture.png"
loading="lazy"
>&lt;/p>
&lt;p>以上架构内置了对下来工具的支持：&lt;/p>
&lt;ul>
&lt;li>Build
&lt;ul>
&lt;li>Dockerfile locally, in-cluster with kaniko or on cloud using Google Cloud Build&lt;/li>
&lt;li>Jib Maven and Jib Gradle locally or on cloud using Google Cloud Build&lt;/li>
&lt;li>Bazel locally&lt;/li>
&lt;li>Cloud Native Buildpacks locally or on cloud using Google Cloud Build&lt;/li>
&lt;li>Custom script locally or in-cluster&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Test
&lt;ul>
&lt;li>container-structure-test&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Tag&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>Git tagger&lt;/li>
&lt;li>Sha256 tagger&lt;/li>
&lt;li>Env Template tagger&lt;/li>
&lt;li>DateTime tagger&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>Deploy&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>Kubernetes Command-Line Interface (kubectl)&lt;/li>
&lt;li>Helm&lt;/li>
&lt;li>kustomize&lt;/li>
&lt;/ul>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Skaffold 确实让基于 Kubernetes 的开发者的本地工作环境更加优化和整洁了。希望本文对你的工作有所帮助。&lt;/p></description></item><item><title>Beats 摄入数据的最佳实践</title><link>https://martinliu.cn/blog/beats-%E6%91%84%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</link><pubDate>Sun, 21 Jun 2020 18:42:56 +0800</pubDate><guid>https://martinliu.cn/blog/beats-%E6%91%84%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</guid><description>&lt;img src="https://martinliu.cn/images/locked-up.jpg" alt="Featured image of post Beats 摄入数据的最佳实践" />&lt;p>本文概要：配置 ES 3 节点全加密，Kibana 的 SSL 加密配置，Beats 的高可靠性加密传输，用 RBAC 怎样把权限控制到最小，在配置文件中消除明文密码，这些你都做到了么？如何保证安全、能适应和可扩展的配置 Elastic Stack 技术栈，让我们从 Bests 的角度开始讲解。&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>本文使用的软版本：&lt;/p>
&lt;ul>
&lt;li>Elastic Stack 7.8.0&lt;/li>
&lt;li>macOS 10.15.5&lt;/li>
&lt;li>Vagrant 2.2.9&lt;/li>
&lt;li>VirtualBox 6.0&lt;/li>
&lt;li>CentOS 8.0&lt;/li>
&lt;/ul>
&lt;p>下面的配置和测试过程基于以下 Vagrantfile ，你可以在其它任何同等的环境中测试下面的所有配置。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># -*- mode: ruby -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># vi: set ft=ruby :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Every Vagrant development environment requires a box. You can search for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># boxes at https://atlas.hashicorp.com/search.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BOX_IMAGE = &amp;#34;bento/centos-8&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ES_COUNT = 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NODE_COUNT = 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Vagrant.configure(&amp;#34;2&amp;#34;) do |config|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #设置所有 guest 使用相同的静态 dns 解析 /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.provision :hosts, :sync_hosts =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #用 vagrant 默认密钥对 ssh 登录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.ssh.insert_key = false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 用于部署 Elasticsearch 服务器的集群
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (1..ES_COUNT).each do |i|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.define &amp;#34;es#{i}&amp;#34; do |es_config|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.box = BOX_IMAGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.hostname = &amp;#34;es#{i}.zenlab.local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.network :private_network, ip: &amp;#34;192.168.50.#{i + 10}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.provision :hosts, :sync_hosts =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.provider :virtualbox do |vb|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.memory = 2048
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.cpus = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> es_config.vm.provision :shell, path: &amp;#39;pre-install-ES.sh&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 用于部署 Kibana、Logstash 、APM Server、Heatbeat 和 Packetbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.define &amp;#34;lk&amp;#34; do |lk_config|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.box = BOX_IMAGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.hostname = &amp;#34;lk.zenlab.local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.network :private_network, ip: &amp;#34;192.168.50.20&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.network &amp;#39;forwarded_port&amp;#39;, guest: 5601, host: 5601
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.provision :hosts, :sync_hosts =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lk_config.vm.provider :virtualbox do |vb|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.memory = 1024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.cpus = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #logstash_config.vm.provision :shell, path: &amp;#39;pre-install-ES.sh&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 两个被管理节点，用于部署监控应用和各种 Beats 代理
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (1..NODE_COUNT).each do |i|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.define &amp;#34;node#{i}&amp;#34; do |node_config|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node_config.vm.box = BOX_IMAGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node_config.vm.hostname = &amp;#34;node#{i}.zenlab.local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node_config.vm.network :private_network, ip: &amp;#34;192.168.50.#{i + 20}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node_config.vm.provider :virtualbox do |vb|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.memory = 1024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vb.cpus = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node_config.vm.provision :shell, path: &amp;#39;pre-install-beats.sh&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Install avahi on all machines
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.provision &amp;#34;shell&amp;#34;, inline: &amp;lt;&amp;lt;-SHELL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sh -c &amp;#34;echo &amp;#39;Welcome to Elastic Stack!&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SHELL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注：下文中所有路径中的 &lt;code>/vagrant/&lt;/code> 目录是本 vagrant 测试环境中，所有虚拟机的共享目录，是所有节点上配置文件的原路径。如果你使用的不是 vagrant 环境，你需要在下面的测试中适当的替换。&lt;/p>
&lt;h2 id="三节点-elasticsearch-服务器集群">三节点 Elasticsearch 服务器集群&lt;/h2>
&lt;p>在每个节点上使用下面的初始化脚本，部署 Elasticsearch 服务器。&lt;/p>
&lt;p>使用&lt;code>vagrant up es1 es2 es3&lt;/code>命令创建并启动 ES 服务器三个节点。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># pre-install-ES.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elastic_version=&amp;#39;7.8.0&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo &amp;#34;Provisioning a Elasticsearch &amp;#34;$elastic_version&amp;#34; Server...&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo date &amp;gt; /etc/vagrant_provisioned_at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo swapoff -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sysctl -w vm.max_map_count=262144
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sysctl -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;elasticsearch - nofile 65535&amp;#39; &amp;gt;&amp;gt; /etc/security/limits.conf&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** Welcome to Elastic Stack Labs&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;*&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/elasticsearch-$elastic_version-x86_64.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面的脚本简单的初始化了几个操作系统参数，然后完成了 rpm 包的安装。非vagrant 环境的需要手工上传 rpm 安装文件，和运行以上的命令。&lt;/p>
&lt;h3 id="配置首个-es-服务器节点">配置首个 ES 服务器节点&lt;/h3>
&lt;p>登录 es1 节点&lt;code>vagrant ssh es1&lt;/code> ；&lt;/p>
&lt;p>创建用于节点间传输所需要的数字证书和秘钥文件，下面是所使用的种子文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># instance.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">instances:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es1&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.11&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es1.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#34;es2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.12&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es2.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;es3&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.13&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;es3.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &amp;#39;lk&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: [&amp;#39;192.168.50.20&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns: [ &amp;#39;lk.zenlab.local&amp;#39; ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用 &lt;code> elasticsearch-certutil&lt;/code> 创建证书文件包。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-certutil cert --ca --pem --in /vagrant/certs/instance.yml --out /vagrant/certs/certs.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将得到的 zip 文件解压缩在适当的目录里备用。&lt;/p>
&lt;p>重要步骤：在 Elasticsearch 的配置文件目录中放置必要的数字证书文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo mkdir /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/es1/* /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ls /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 certs 目录中有三个文件：&lt;/p>
&lt;ol>
&lt;li>ca.crt CA 根证书&lt;/li>
&lt;li>es1.crt 服务器证书&lt;/li>
&lt;li>es1.key 私钥文件&lt;/li>
&lt;/ol>
&lt;p>CA 根证书是在所有节点上发起对 ES 服务的 HTTPS 服务所需要的客户端证书。 es1.crt 和 es1.key 这样的必要对需要在所有 ES 节点上部署，用于 ES 节点间的 transport 协议加密传输，每个 ES 节点都是用自己的密钥对文件。&lt;/p>
&lt;p>在 ES1 的主配置文件中打开安全选项和其它必要配置，示例配置文件如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ---------------------------------- Cluster -----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.name: elk4devops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------------ Node ------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node.name: es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ----------------------------------- Paths ------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.data: /var/lib/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.logs: /var/log/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ---------------------------------- Network -----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network.host: es1.zenlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># --------------------------------- Discovery ----------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.initial_master_nodes: [&amp;#34;es1&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">discovery.seed_hosts: [ &amp;#34;es1.zenlab.local&amp;#34; ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------- TLS and Cert ---------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#外部服务加密配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.key: certs/es1.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate: certs/es1.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate_authorities: certs/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#集群内通讯加密配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.key: certs/es1.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate: certs/es1.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate_authorities: certs/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.monitoring.collection.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ------------------------------- App Search ---------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">action.auto_create_index: &amp;#34;.app-search-*-logs-*,-.app-search-*,+*&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用以上配置文件覆盖Elasticsearch 默认的配置文件，首次启动第一个 ES 节点的服务。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/elasticsearch.yml /etc/elasticsearch/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用下面的命令查看启动日志，直到 elasticsearch 服务正常启动。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo tail -f /var/log/elasticsearch/elk4devops.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用下面的命令初始化 Elasticsearch 系统内置账号为随机复杂密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto -u &amp;#34;https://es1.zenlab.local:9200&amp;#34; -b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user apm_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD apm_system = irpVThXpbFDrdq2rBQUC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user kibana_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD kibana_system = CxGNlkqQMbcp6u6XuCbk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD kibana = CxGNlkqQMbcp6u6XuCbk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user logstash_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD logstash_system = EOUiCyQQ97IHwUJs8Eum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user beats_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD beats_system = EF8OdPmcpy1bUCgFVQ90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user remote_monitoring_user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD remote_monitoring_user = 3ZRBVo5Omu33McoOKgwE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password for user elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD elastic = ZSzN2idoU6hFa4f0ulPP
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将上面随机生成的密码保存在安全的地方备用，这些内置的超级用户权限大，一旦遗失了密码，可能会造成重大的数据泄露。&lt;/p>
&lt;p>用上面创建的账户测试第一个 ES 节点是否可以通过 https 正常访问，这里也测试 ca 公钥的可用性。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl --cacert /vagrant/certs/ca/ca.crt -u elastic &amp;#39;https://es1.zenlab.local:9200/_cat/nodes?v&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 es1 服务器的命令行运行以上命令，输入 elastic 的密码。应该可以看到正常的输出。&lt;code>/vagrant/certs/ca/ca.crt&lt;/code> 这个路径替换成你的环境中的相关 ca 证书文件路径。&lt;/p>
&lt;h3 id="配置第二个和第三个-es-服务器节点">配置第二个和第三个 ES 服务器节点&lt;/h3>
&lt;p>剩下的两个节点在加入集群之前都已经通过初始化脚本安装完了 rpm 安装包。剩下的就是逐个节点的部署之前生产的证书文件和修改后的 elasticsearc.yml 主配置文件。在本文档参考的环境中使用如下命令。&lt;/p>
&lt;p>登录 es 2 &lt;code> vagrant ssh es2&lt;/code>&lt;/p>
&lt;p>配置 es2 的证书和秘钥文件，下面的复制原路径需要替换成你所使用的实际路径。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo mkdir /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/es2/* /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ls /etc/elasticsearch/certs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>部署 es2 的配置文件，然后启动这个节点的 Elasticsearch 服务。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/elasticsearch2.yml /etc/elasticsearch/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>elasticsearch2.yml &lt;/code> 文件的内容如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ---------------------------------- Cluster -----------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">cluster.name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">elk4devops&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ------------------------------------ Node ------------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">node.name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">es2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ----------------------------------- Paths ------------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">path.data&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/lib/elasticsearch&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">path.logs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/log/elasticsearch&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ---------------------------------- Network -----------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network.host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">es2.zenlab.local&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># --------------------------------- Discovery ----------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">cluster.initial_master_nodes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;es1&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">discovery.seed_hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;es1.zenlab.local&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ------------------------------- TLS and Cert ---------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.http.ssl.enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.http.ssl.key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/es2.key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.http.ssl.certificate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/es2.crt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.http.ssl.certificate_authorities&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/ca.crt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.transport.ssl.enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.transport.ssl.key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/es2.key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.transport.ssl.certificate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/es2.crt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.security.transport.ssl.certificate_authorities&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">certs/ca.crt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">xpack.monitoring.collection.enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ------------------------------- App Search ---------------------------------&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">action.auto_create_index&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;.app-search-*-logs-*,-.app-search-*,+*&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 es2 的命令用下面的命令查看是否该节点正常加入了集群。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl --cacert /vagrant/certs/ca/ca.crt -u elastic &lt;span class="s1">&amp;#39;https://es1.zenlab.local:9200/_cat/nodes?v&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter host password &lt;span class="k">for&lt;/span> user &lt;span class="s1">&amp;#39;elastic&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.11 &lt;span class="m">37&lt;/span> &lt;span class="m">94&lt;/span> &lt;span class="m">0&lt;/span> 0.00 0.05 0.06 dilmrt * es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.12 &lt;span class="m">17&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">9&lt;/span> 0.49 0.20 0.07 dilmrt - es2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意上面 ca.crt 文件的路径，要输入的是 elasstic 用户的密码。 正常情况下两个节点都会出现在结果清单中。&lt;/p>
&lt;p>用相似的命令初始化和启动 es3 节点的服务。es3 的主配置文件样例如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ---------------------------------- Cluster -----------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.name: elk4devops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ------------------------------------ Node ------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node.name: es3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ----------------------------------- Paths ------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.data: /var/lib/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">path.logs: /var/log/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ---------------------------------- Network -----------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network.host: es3.zenlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --------------------------------- Discovery ----------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.initial_master_nodes: &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;es1&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">discovery.seed_hosts: &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;es1.zenlab.local&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ------------------------------- TLS and Cert ---------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.key: certs/es3.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate: certs/es3.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate_authorities: certs/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.key: certs/es3.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate: certs/es3.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate_authorities: certs/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.monitoring.collection.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ------------------------------- App Search ---------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">action.auto_create_index: &lt;span class="s2">&amp;#34;.app-search-*-logs-*,-.app-search-*,+*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最终集群的测试状态如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@es1 ~&lt;span class="o">]&lt;/span>$ curl --cacert /vagrant/certs/ca/ca.crt -u elastic &lt;span class="s1">&amp;#39;https://es1.zenlab.local:9200/_cat/nodes?v&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter host password &lt;span class="k">for&lt;/span> user &lt;span class="s1">&amp;#39;elastic&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.11 &lt;span class="m">20&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">6&lt;/span> 0.18 0.09 0.03 dilmrt * es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.13 &lt;span class="m">50&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">2&lt;/span> 0.02 0.07 0.03 dilmrt - es3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.12 &lt;span class="m">25&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">1&lt;/span> 0.00 0.02 0.00 dilmrt - es2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置-kibana-服务器">配置 Kibana 服务器&lt;/h2>
&lt;p>服务是必要的的管理界面，是数据搜索、可视化的重要工具。在 Elasticsearch 服务打开了外部 https 加密访问的情况下，Kibana 服务器的安装和配置也需要做如下调整。&lt;/p>
&lt;p>Kibana 的 rpm 安装这里省略。下面直接进入相关的主要配置步骤。&lt;/p>
&lt;p>复制用于链接 ES 集群的证书&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo mkdir /etc/kibana/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/kibana/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/lk/* /etc/kibana/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ls /etc/kibana/certs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改默认的 kibana.yml 配置文件，然后覆盖默认的配置文件后启动 kibana 服务。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/kibna.yml /etc/kibana/kibana.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cat /etc/kibana/kibana.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start kibana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>监控 kibana 的启动日志，直到它正常启动。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo tail -f /var/log/messages
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动后，使用浏览器访问 &lt;code>https://lk.zenlab.lcoal:5601 &lt;/code> Kibana 服务，使用 elastic 用户的密码登录，确保 Kibana 正常启动。&lt;/p>
&lt;h2 id="配置权限-beats-账号">配置权限 Beats 账号&lt;/h2>
&lt;p>在使用 Beats 采集监控数据的时候，Beats 的配置文件中需要配置一个后台 Elasticsearch 服务访问账号，安全起见需求需要将这个账号配置为只写权限。配置步骤如下。&lt;/p>
&lt;p>在 Kibana 的用户管理中创建名为 &lt;code>beats-writer&lt;/code> 的角色，如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/writer-role.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>以上这个角色拥有 filebeat 和 Metricbeat 两个索引的访问权限，这里是为了评估用户角色管理的工作量，否则可以每个索引单独设置一套必要权限的角色和用户，从而实现更安全的防护。&lt;/p>
&lt;p>然后创建名为 &lt;code>beats-writer&lt;/code> 的用户，设置一个密码，将它赋予 &lt;code>beats-writer&lt;/code> 的角色（上面创建的）。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/beats-writer-user.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这样它就可以用于所有 Beats 节点的配置了。&lt;/p>
&lt;h2 id="初始化首个-beats-节点">初始化首个 Beats 节点&lt;/h2>
&lt;p>在 vagrant 测试环境中启动第一个用于测试 Beats 的节点。&lt;/p>
&lt;p>&lt;code>vagrant up node1&lt;/code>&lt;/p>
&lt;p>这里使用了初始脚本安装相关的 rpm 安装包。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># author: Martin Liu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># url:martinliu.cn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">elastic_version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;7.8.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Installing a Filebeat &amp;#34;&lt;/span>&lt;span class="nv">$elastic_version&lt;/span>&lt;span class="s2">&amp;#34; agent...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/filebeat-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> filebeat.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/metricbeat-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> metricbeat.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/auditbeat-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> auditbeat.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>登录该节点进行 Beats 的初始化配置。目前 Elasticsearch 集群还是空白的，还没有初始化任何 Beats 相关的索引、可视化和仪表板。这个初始化工作是通过，每种 Beats 的 setup 命令完成的。这个 setup 命令只需要在一个节点上成功执行一次即可，其它节点的配置文件中，连 setup 命令相关的配置都不需要。&lt;/p>
&lt;p>这里使用的 filebeat.yml 参考文件如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#=========================== Filebeat inputs =============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat.inputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- type: log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paths:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /var/log/*.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#============================= Filebeat modules ===============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat.config.modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: ${path.config}/modules.d/*.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.period: 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==================== Elasticsearch template setting ==========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.template.settings:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.number_of_shards: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.codec: best_compression
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#============================== Kibana =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.kibana:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host: &amp;#34;https://lk.zenlab.local:5601&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#-------------------------- Elasticsearch output ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output.elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: [&amp;#34;es1.zenlab.local:9200&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: &amp;#34;elastic&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: &amp;#34;1l1lqVMMWMbLI6DCH0dQ&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#================================ Processors =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">processors:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_host_metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netinfo.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.ttl: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> geo:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: bj-dc-01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location: 35.5528, 116.2360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> continent_name: Asia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> country_iso_code: CN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_iso_code: CN-BJ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> city_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_cloud_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_docker_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_kubernetes_metadata: ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>目前的计划是配置 Beats 直接访问 Elasticsearch 后台服务，不通过 Logstash 中转。以后增加这个参考配置。&lt;/p>
&lt;p>在执行 filebeat setup 命令之前，还需要在 Beats 节点上部署上面生成的 ca 公钥文件。参考命令如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo update-ca-trust enable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/pki/ca-trust/source/anchors/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo update-ca-trust extract
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里把 ca.crt 公钥文件部署到了 CentOS 操作系统的的可信 CA 发放机构的目录中，其它操作系统中的这个证书路径可能不同，需要做替换，包括以上的证书更新命令也可能需要调整。&lt;/p>
&lt;p>经过以上的配置之后，用之前的 curl 命令测试一下是否这个证书生效了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>vagrant@es1 ~&lt;span class="o">]&lt;/span>$ curl -u elastic &lt;span class="s1">&amp;#39;https://es1.zenlab.local:9200/_cat/nodes?v&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter host password &lt;span class="k">for&lt;/span> user &lt;span class="s1">&amp;#39;elastic&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.11 &lt;span class="m">20&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">6&lt;/span> 0.18 0.09 0.03 dilmrt * es1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.13 &lt;span class="m">50&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">2&lt;/span> 0.02 0.07 0.03 dilmrt - es3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.50.12 &lt;span class="m">25&lt;/span> &lt;span class="m">96&lt;/span> &lt;span class="m">1&lt;/span> 0.00 0.02 0.00 dilmrt - es2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这次在参数中故意省略了 ca 证书文件路径，如果 curl 可以正常访问，那么 Beats 程序也可以，而且不需要在 Beats 配置文件中生命公钥的路径，更有利于在以后切换到另外一套 CA 秘钥后，配置文件的更新工作。&lt;/p>
&lt;p>这里省略 Beats 配置文件的展示，参考一下命令做初始化前的准备。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp -f /vagrant/filebeat.yml /etc/filebeat/filebeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -f /vagrant/metricbeat.yml /etc/metricbeat/metricbeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo filebeat modules enable system
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了测试的方便起见，在 filebeat.yml 和 metricbeat.yml 文件中使用了超级用户 elastic ，如果这个动作伴随着 Elastic Stack 的版本升级需要经常发生，此处需要配置一个 Beats setup 用的专用角色和账户，从而避免多次使用超级用户。&lt;/p>
&lt;p>下面运行 setup 命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">filebeat setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metricbeat setup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这两个命令正常运行后，在 Kibana 里会增加增加相关的索引、pipeline、可视化和仪表板等对象。&lt;/p>
&lt;p>使用下面的命令测试 filebeat 和 metricbeat 是否能正常的采集数据并传输到后台。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">filebeat -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metricbeat -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果报错的话，将 level 在配置文件中设置为 debug，方便调试。调试成功之后，应该在 Kibana 的界面中，可以看到 node1 节点，点击后能看到实时更新过来的日志和监控指标。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/metric-node1.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="在新的节点上部署-beats">在新的节点上部署 Beats&lt;/h2>
&lt;p>在新的需要部署 Beats 的节点上，可以使用下面的脚本配置和部署。&lt;/p>
&lt;p>add-agent.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># author: Martin Liu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># url:martinliu.cn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">elastic_version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;7.8.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">b_user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;beats-writer&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">b_pwd&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;DevOps1234&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;############## Installing a Beats &amp;#34;&lt;/span>&lt;span class="nv">$elastic_version&lt;/span>&lt;span class="s2">&amp;#34; agent...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/filebeat-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> filebeat.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo filebeat modules &lt;span class="nb">enable&lt;/span> system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/metricbeat-&lt;span class="nv">$elastic_version&lt;/span>-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> metricbeat.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;################### Setup Public CA...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo update-ca-trust &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/certs/ca/ca.crt /etc/pki/ca-trust/source/anchors/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo update-ca-trust extract
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;################### Update Beats configuration files ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -f /vagrant/filebeat-v1.yml /etc/filebeat/filebeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -f /vagrant/metricbeat-v1.yml /etc/metricbeat/metricbeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;################### Setup Keystor for Beats ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$b_user&lt;/span> &lt;span class="p">|&lt;/span> sudo filebeat keystore add BEATS_WRITER_USERNAME --stdin --force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$b_pwd&lt;/span> &lt;span class="p">|&lt;/span> sudo filebeat keystore add BEATS_WRITER_PW --stdin --force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$b_user&lt;/span> &lt;span class="p">|&lt;/span> sudo metricbeat keystore add BEATS_WRITER_USERNAME --stdin --force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$b_pwd&lt;/span> &lt;span class="p">|&lt;/span> sudo metricbeat keystore add BEATS_WRITER_PW --stdin --force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;################### Start Beats services ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start metricbeat.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start filebeat.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>简单说明以上脚本的功能：&lt;/p>
&lt;ul>
&lt;li>用 rpm 安装包安装所需要的 Beats，filebeat 开启 system 模块。&lt;/li>
&lt;li>在目标操作系统里部署必须的 ca 证书到默认路径中，并启用。从而省略在所有 beats 文件中生命公钥文件的路径。&lt;/li>
&lt;li>覆盖更新默认的 Beats 配置文件。&lt;/li>
&lt;li>创建并初始化 Beats 配置文件中所需要的 beats-writer 用户名和密码。从而消除消除所有明文密码。以上脚本只需要在节点上更新的时候才允许，允许后删除，从而不会留下任何明文密码和账户信息。Beats 的任何模块配置中，如果需要配置任何密码账户也需要如法炮制，从而保证基本的安全性。&lt;/li>
&lt;li>启动 Beats 服务&lt;/li>
&lt;/ul>
&lt;p>以上脚本所使用的配置文件文件如下。&lt;/p>
&lt;p>filebeat-v1.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">filebeat.inputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- type: log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paths:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /var/log/*.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#============================= Filebeat modules ===============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat.config.modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: ${path.config}/modules.d/*.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.period: 60s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#-------------------------- Elasticsearch output ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output.elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: [&amp;#34;es1.zenlab.local:9200&amp;#34;,&amp;#34;es2.zenlab.local:9200&amp;#34;,&amp;#34;es3.zenlab.local:9200&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: ${BEATS_WRITER_PW}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ${BEATS_WRITER_USERNAME}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#================================ Processors =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">processors:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_host_metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netinfo.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.ttl: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> geo:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: bj-dc-01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location: 35.5528, 116.2360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> continent_name: Asia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> country_iso_code: CN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_iso_code: CN-BJ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> city_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_cloud_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_docker_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_kubernetes_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target: &amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.name: &amp;#39;Elastic Cloud&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.id: &amp;#39;ec-ww&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==================== Best Practice Configuration ==========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.ilm.check_exists: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logging.level: error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue.spool: ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>metricbeat.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># =========================== Modules configuration ============================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metricbeat.config.modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: ${path.config}/modules.d/*.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload.period: 120s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#-------------------------- Elasticsearch output ------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output.elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: [&amp;#34;es1.zenlab.local:9200&amp;#34;,&amp;#34;es2.zenlab.local:9200&amp;#34;,&amp;#34;es3.zenlab.local:9200&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: ${BEATS_WRITER_PW}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ${BEATS_WRITER_USERNAME}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#================================ Processors =====================================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">processors:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_host_metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netinfo.enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.ttl: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> geo:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: bj-dc-01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location: 35.5528, 116.2360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> continent_name: Asia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> country_iso_code: CN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> region_iso_code: CN-BJ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> city_name: Beijing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_cloud_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_docker_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_kubernetes_metadata: ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - add_fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target: &amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.name: &amp;#39;Elastic Cloud&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service.id: &amp;#39;ec-ww&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#==================== Best Practice Configuration ==========================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup.ilm.check_exists: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logging.level: error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue.spool: ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解释一下相关的重要配置。&lt;/p>
&lt;ul>
&lt;li>netinfo.enabled: true 收集所有网卡的配置信息，覆盖多块网卡的情况&lt;/li>
&lt;li>geo: 地理位置信息对以后基于位置的查询打下基础，这对于监控和信息安全都非常重要。为以后基于 host 的上下文关联打下基础，方便在 apm、log、metric、heartbeat 和机器学习的界面中相互跳转。&lt;/li>
&lt;li>add_fields: 在 fields 下面维护 ECS 数据定义中的必要的有意义的数据，在网上查询 ECS 的数据定义，这些字段可以优化以后的搜索逻辑。&lt;/li>
&lt;li>最后一段是其它必要的最佳实践设置&lt;/li>
&lt;li>output.elasticsearch : 这里使用了三个 ES 节点的链接地址，这里应该使用至少 2 个 Elasticsearch 集群中的 ingest 节点。&lt;/li>
&lt;/ul>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>本文没有展开说明和配置的地方包括：对 Best 节点的工作状态的监控；对索引生命周期规则的调优（用尽磁盘），冷热数据的自动化迁移规则。&lt;/p>
&lt;p>完成的配置包括：&lt;/p>
&lt;ul>
&lt;li>配置 ES 3 节点集群内部的 TLS 加密传输，对外的 HTTPS 加密协议服务&lt;/li>
&lt;li>Kibana 基于证书的 SSL 加密配置&lt;/li>
&lt;li>Beats 的高可靠性后台传输数据，TLS加密传输数据&lt;/li>
&lt;li>用基于角色的访问控制，创建了只写权限的 beats-writer 角色和用户。&lt;/li>
&lt;li>用 beats 的 keystore 将配置文件中的明文密码消除。&lt;/li>
&lt;/ul></description></item><item><title>徘徊在 3 种 DevOps 平台服务之间难以抉择（上）</title><link>https://martinliu.cn/blog/%E5%BE%98%E5%BE%8A%E5%9C%A8-3-%E7%A7%8D-devops-%E5%B9%B3%E5%8F%B0%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E9%9A%BE%E4%BB%A5%E6%8A%89%E6%8B%A9%E4%B8%8A/</link><pubDate>Sun, 21 Jun 2020 18:42:56 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%BE%98%E5%BE%8A%E5%9C%A8-3-%E7%A7%8D-devops-%E5%B9%B3%E5%8F%B0%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E9%9A%BE%E4%BB%A5%E6%8A%89%E6%8B%A9%E4%B8%8A/</guid><description>&lt;p>中国 DevOps 社区在最近两年期间得到了长足的发展，从最初的单一官网站点，发展到现在的社区官网、社区峰会官网、社区论坛、社区微信公众号和社区服务号等多种对外公众界面。在这些网站平台之后的是 20 多位社区志愿者们的辛勤工作和贡献。&lt;/p>
&lt;p>社区官网最初是在 GitHub 上通过 Github-page 的免费空间发布的，在购买了收费的 Hugo 模板之后；网站的代码有了转为私有仓库的需求，因此CODING就从 GitHub 迁移到了 GitLab；当时 Github 还没有免费不限数量的私有仓库，而且 Github 也不能免费实现 20+ 社区代码贡献者的组队维护多个项目。GitLab 总的来说能满足目前的所有社区开发和协作需求：这些需求包括无限私有仓库，足够数量的代码协作人员，免费的 CI 构建和发布功能。GitLab 平台也可以实现 GitLab-page 的静态网站托管服务，但是，如果代码仓库设置为通过 page 实现静态网站发布的情况，需要整个代码库设置为对外公开访问，而这与代码库本身依然需要保持私密矛盾。因此社区的小伙伴也无奈的在 GitLab 上维护代码，然后将 hugo 构建后的结果再发布到 Github-page 的项目去。&lt;/p>
&lt;p>根据以上社区网站代码库迁移的经历，下面总结一下中国 DevOps 社区在网站开发维护和配套 CI/CD 方面的总体需求：&lt;/p>
&lt;ul>
&lt;li>实现多人（20+志愿者）私有和共有代码仓库的协作，相关工作包括社区网站内容维护和新功能开发，社区书籍和技术白皮书协作翻译等。&lt;/li>
&lt;li>实现 OKR 风格的社区网站开发相关工作管理，季度目标制定，任务跟踪等。&lt;/li>
&lt;li>实现 Scrum 风格的软件项目计划、分配和跟踪；统一规划开发和运维相关的所有任务；与季度 OKR 相关联。&lt;/li>
&lt;li>实现自动化的 CI、CD 流水线。&lt;/li>
&lt;li>自动化和快速的部署软件项目工件（Artifacts）到腾讯云服务器（和其它相关服务），包括静态网页到 Nginx 服务器的发布，到云存储的发布，目前也可能即将会用到 K8s 服务/Serverless 服务的发布。&lt;/li>
&lt;/ul>
&lt;p>基于目前社区的相关工作需求，我们在三个平台之间进行了综合的对比和评测：GitLab（免费版）、Jira Cloud（免费版） 和 CODING - 高级版（腾讯云 DevOps 平台服务）。总的来说我们需要一种能满足以上所有需求的、集成化的 DevOps 工具 SaaS 平台服务。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/atlassian-marketplace.png"
loading="lazy"
alt="DevOps持续循环"
>&lt;/p>
&lt;p>在开始 DevOps 平台选项之前，值得再次研究一下上面这幅图。重申一下，这幅图表达了两个意思：&lt;/p>
&lt;ol>
&lt;li>DevOps 是持续不断的循环，并不是单向的多少次重复的流程。理想情况下一次循环对应着敏捷开发的一个迭代，每个迭代 done 的定义并不是编码完成就结束了，还包括后面的测试和运维的所有工作，应该管理到从开发到上线过程中的所有工作。本次迭代的结果可以作为下一个迭代的输入之一。&lt;/li>
&lt;li>DevOps 工具平台需要支持的每一次循环中包括的阶段有：计划、构建、持续集成、部署、运维、持续反馈（监控）；如果某个阶段无法直接实现，用其他独立工具实现也不是不可以，例如持续监控阶段（但是监控的状态必须实时透明的反馈给DevOps循环中的所有人）。&lt;/li>
&lt;/ol>
&lt;p>下面我们分阶段的描述以上三个 DevOps 工具平台的实际结果，每个阶段中会提出不同的功能需求点，然后横向比对三个工具的优缺点。声明这里是基于中国 DevOps 社区的实际需求做出的工具平台的需求使用体验调研，这些调研结果决定了最后平台选择的决定。&lt;/p>
&lt;h2 id="计划---plan">计划 - Plan&lt;/h2>
&lt;p>&lt;strong>OKR 管理 ：&lt;/strong> &amp;ndash; 传统的社区项目规划往往是技术导向，或者比较就事论事的安排某些开发和维护工作。而中国 DevOps 社区更希望能应用高于项目本身一个层级的 OKR 概念来统筹所有项目的工作。需要用一个顶级目标对应多个KR，每个 KR 能关联到不同项目中的各种工作，也需要能跟踪孤立的 KR。&lt;/p>
&lt;ul>
&lt;li>GitLab ：在 Gitlab 官方文档和网上并没有查到的 OKR 的实现方式。&lt;/li>
&lt;li>Jira Cloud：默认云服务没有 OKR 的功能，不过可以通过两种方式实现：安装第三方 App，使用 Structure 功能扩展实现。实际测试了一个名为 OKR for Jira （by Digital Toucan）的 App；能满足需求。在 OKR 关联界面中可以关联项目 issue，在 issue 的界面里也可以关联 KR；实现双向关联和跟踪。&lt;/li>
&lt;li>CODING：在团队管理页面的‘团队目标’功能里有内置的 OKR 管理功能。功能性完全满足社区需求。可以在一个平面的可折叠页面中管理大量的 OKR 条目。O 的完成进度可以根据 KR 的进展自动计算，KR 的完成度可以手工拖到，也可以根据所连接的项目状态自动计算，所有条目的排序可以自由拖动。操作简洁方便。在项目工作的界面里不能关联到 OKR。&lt;/li>
&lt;/ul>
&lt;p>下图是 OKR for Jira 免费 app 的截图：
&lt;img src="https://martinliu.cn/images/CODING-jira-okr.jpeg"
loading="lazy"
alt="OKR for Jira 免费 app "
>&lt;/p>
&lt;p>下面是 CODING 中管理 OKR 的界面截图。
&lt;img src="https://martinliu.cn/images/CODING-okr.jpeg"
loading="lazy"
alt="CODING ork"
>&lt;/p>
&lt;p>&lt;strong>项目规划/协同 ：&lt;/strong> &amp;ndash; 社区网站相关工作需要在每一个项目的执行过程中实现需求分析、工作分解、工作分配和进度追踪等功能。并不需要实现高级的企业产品路线图和Eprics的管理，由于并不开发复杂的商业产品，至少目前工作的复杂度没有这个需求。&lt;/p>
&lt;ul>
&lt;li>GitLab：项目管理功能齐全，而且包含可定制的看板功能（Scum board / Kanban board），里程碑和 Todos 也是比较特色的功能。具备Issue 状态和代码PR 自动化的关联。&lt;/li>
&lt;li>Jira Cloud：默认项目管理丰富，Issue 的默认查看视图有多种方式支持各种看板。Issue 的查看、编辑和相关操作非常符合开发者视角的思路，可以从 Issue 上一键式的创建分支，并且看到分支代码提交、构建和部署的各种状态。&lt;/li>
&lt;li>CODING：支持项目中的 Backlog 规划，管理迭代、Epric、需求、任务和缺陷。它可以很方便的定制每一种工作的状态和工作流，特别符合国人默认流程定制的需求。支持项目中的模块管理。操作比较简洁直观可用。一个项目中可以容纳和管理多个代码库。&lt;/li>
&lt;/ul>
&lt;p>下面是 CODING 中管理项目协同中的任务管理，虽然没有看板展示的模式，不过用拖拽的方式可以方便的对 Backlog 中的工作条目做迭代规划，点击每个工作条目都可以对其进行编辑修改。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/CODING-plan.jpeg"
loading="lazy"
alt="CODING plan"
>&lt;/p>
&lt;h2 id="构建---build">构建 - Build&lt;/h2>
&lt;p>&lt;strong>代码托管 ：&lt;/strong> 社区需要使用 Git 代码仓库管理各种网站和应用的代码开发，包括markdown 格式的网站内容更新，主要是用基于主干的开发，或者部分功能分支的方式。&lt;/p>
&lt;ul>
&lt;li>GitLab：功能强大和丰富的代码仓库管理，支持丰富的合并请求（MR）策略。&lt;/li>
&lt;li>Jira Cloud：通过 bitbucket 实现代码仓库管理。从源码到提交、分支、PR 等等都可以关联和跳转。&lt;/li>
&lt;li>CODING：虽然不是老牌的 Git 仓库工具，它可以支持 git 和 SVN 仓库。能满足代码的提交、分支、合并请求、版本、对比等功能。功能完全满足需求。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>云端开发工具 ：&lt;/strong> 如果开发者在不能访问自己的工作电脑的情况下，还是需要可以访问到一个功能齐全的线上代码编辑环境。确保社区参与者能够容易的参与相关开发工作。&lt;/p>
&lt;ul>
&lt;li>GitLab：代码库中的每个文件都可以通过 Web IDE 功能打开，能实现代码的语法检查、提交变化提示、Markdonwn 编辑/预览等功能。具备一定的可用性。&lt;/li>
&lt;li>Jira Cloud：在 bitbucket 中选取文件点击编辑后，能进入一个基本的文本文件编辑模式。无其他高级功能，很难胜任稍微复杂一些的程序代码变更。&lt;/li>
&lt;li>CODING：代码库中的代码文件可以支持在线的编辑，具有一定的语法加亮和变更对比功能，能提供基础的线上开发能力。同时还提供了全功能的线上 IDE 环境 &lt;a class="link" href="https://cloudstudio.net/" target="_blank" rel="noopener"
>https://cloudstudio.net/&lt;/a>，这个功能很类似于一个线上版本的 vs code，它可以拉取 git 仓库地址，并在与之的多种语言环境中开展代码开发工作。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>代码检查 ：&lt;/strong> 在尽可能的提供代码质量扫码、评估和反馈会对每个社区开发者的工作质量提供帮助，需要帮助社区小伙伴们开发出高质量和安全的社区网站代码。&lt;/p>
&lt;ul>
&lt;li>GitLab：可以集成第三方的代码扫码服务，在 CI 的过程中调用第三方服务实现。&lt;/li>
&lt;li>Jira Cloud：同上。&lt;/li>
&lt;li>CODING：内置了一套简洁的代码扫描功能，可以针对不同的开发语言定制各种代码扫描方案，实现代码检查、质量评估、路径过滤等功能。扫描结果可以生成在总体概览视图报表和任务管理清单。&lt;/li>
&lt;/ul>
&lt;p>下图是一个代码扫描方案编辑示例。
&lt;img src="https://martinliu.cn/images/CODING-scan.jpeg"
loading="lazy"
alt="CODING plan"
>&lt;/p>
&lt;p>&lt;strong>私有制品库/镜像仓库 ：&lt;/strong> 随着后期复杂社区项目的开发，以及容器化和微服务化的趋势。需要使用轻量的解决方案予以满足。&lt;/p>
&lt;ul>
&lt;li>GitLab：为每个项目提供包管理（支持通用、Conan、Maven，NPM、NuGet、PyPi）和 Docker 镜像仓库。满足在一个内的制品管理。&lt;/li>
&lt;li>Jira Cloud：需要集成第三方的服务实现。&lt;/li>
&lt;li>CODING：为每个项目提供了各种类型的制品仓库，包括：Generic、Docker, Maven, NPM, PyPi, Helm, Composer, NuGet, Conan。可以设置项目内、团队内和公开的访问范围权限。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>编译构建 ：&lt;/strong> 需要提供自动化的编译构建能力，通过自动化的 CI 流水线给开发者快速的反馈，提供友好的 DevOps 流水线构建和修订界面。平台提供免费的构建算力，能够按需要自行接入构建节点和 K8S 环境。&lt;/p>
&lt;ul>
&lt;li>GitLab：提供基于 gitlab-ci.yml 文件的 Pipeline as Code 的流水线管理模式。无流水线的图形编辑界面。可以通过部署 Runner 的方式扩展构建环境到外部的服务器上，或者 k8s 的环境中。&lt;/li>
&lt;li>Jira Cloud：在 Bitbucket 中提供基于 bitbucket-pipelines.yml 文件的 Pipeline as Code 的流水线管理模式。无流水线的图形编辑界面。这个流水线的后台应该是一个共享的基于 Bamboo 的SaaS 服务，还没有发现扩展这个部署环境的方法。&lt;/li>
&lt;li>CODING：提供基于 Jenkins 的 CI 服务。也就是说 CODING 服务用套娃的方式包装了 Jenkins 服务，通过共享的构建服务提供基础的构建算力，如果需要的话也可以和 GitLab 一样扩展到外部的构建服务器或者 K8s 服务集群。这里 CODING 还提供了 构建服务到腾讯云的相关服务的集成。因此它能提供 Jenkins+ 的服务能力，对于 Jenkins 服务的构建能力这里就不在赘述。由于 Jenkins 流水线技术比较普及。社区的同学用了半天的时间实现了社区官网构建发布流水线的调试。将基于 Hugo 的网站构建结果用 ssh 命令的方式发布到腾讯云里的 Nginx 服务器的目录中。&lt;/li>
&lt;/ul>
&lt;p>下图是在图形流水线编辑器中对标准模板的调试，这里简单的实现了构建和打包的过程，在部署的步骤里，通过远程 ssh 的命令实现了对网站发布包到腾讯云虚拟机的部署。
&lt;img src="https://martinliu.cn/images/CODING-pipeline.jpeg"
loading="lazy"
alt="CODING plan"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>以上是中国 DevOps 社区对 DevOps 工具平台服务的选型测试过程的一部分总结，这里仅仅从社区的实际工作需求出发，通过试用对比的方式探索了几种平台。总的来说腾讯的 CODING 平台使用体验要好于其它两个服务。具体说有以下几个方面：&lt;/p>
&lt;ul>
&lt;li>CODING 的页面访问速度非常快，由于是相对比较年轻的产品，目前它比起 Jira 和 GitLab 还处于婴儿期；因此这种够用就好的阶段也降低了对复杂高级产品的认知难度。通过 git 命令下载和提交代码的速度非常快。&lt;/li>
&lt;li>OKR 的管理功能具备够用的可用性。&lt;/li>
&lt;li>流水线功能同支持图形的流水线编辑和自控制的 Jenkins 文件。如果已经具备了一定的 Jenkins 能力，你就能快速上手开始构建和部署项目了。这个界面整合良好的套娃服务其实还具备了一定的可迁移性。&lt;/li>
&lt;li>与腾讯云服务的良好互访问性。如果已经使用了腾讯云的服务，那么 CODING 的部署流水线将对其非常友好，易于衔接已有资源。&lt;/li>
&lt;/ul>
&lt;p>后续还将按需测试和对比 DevOps 循环中的其它阶段。如果你也感兴趣参与中国 DevOps 社区的相关志愿者开发工作，请随时和我联系。也希望对此感兴趣的小伙伴能报名参与我们的这种主题评测活动。&lt;/p></description></item><item><title>入门 Elastic Workplace Search</title><link>https://martinliu.cn/blog/%E5%85%A5%E9%97%A8-elastic-workplace-search/</link><pubDate>Fri, 24 Apr 2020 10:37:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%85%A5%E9%97%A8-elastic-workplace-search/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 入门 Elastic Workplace Search" />&lt;h2 id="简介">简介&lt;/h2>
&lt;p>Elastic Workplace Search 提供了一个统一的搜索体验，从而便于任何人在任何时间找到所需的文档信息。为企业搭建了一个横跨所有工作内容、所有团队和真相的统一搜索参考平台。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Picture1.jpg"
loading="lazy"
>&lt;/p>
&lt;p>这个搜索平台能够对接各种数据源，并且实现文档内容级别的索引，目前所支持的数据源包括：OneDrive、SharePoint、ServiceNow、Box、Dropbox、Github、Github Enterprise、Google Drive、JIRA、Confluence、Salesforce、Zendesk 等。&lt;/p>
&lt;p>它具有以下特点：&lt;/p>
&lt;ul>
&lt;li>配置部署简单，缩短了系统上线和等待时间。不像是传统的消耗数个月甚至一年都无法完成的搜索项目，这个解决方案可以让企业在几天或几周内就能投入使用。&lt;/li>
&lt;li>个性化定制的搜索体验。通过 Elasticsearch 所提供的搜索能力，管理员可以控制企业、团队级别的数据源，个体用户可以控制自己的私有数据源，所有级别上都可以调整相关度权重，从而提高搜索结果的准确性和实用性&lt;/li>
&lt;li>提供各种自然语言的和关键字的搜索。系统提供了强大的语言分析和关键字检测能力，用户可以使用任意关键字和搜索开关轻松的搜索到所需的信息。&lt;/li>
&lt;li>具备丰富的开箱即用功能：无须开发即可实现用户管理、数据源管理、基于用户和组的数据源可见性设置、数据源对不同用户和组的权重等功能。&lt;/li>
&lt;/ul>
&lt;h2 id="系统安装配置">系统安装配置&lt;/h2>
&lt;p>本文的假设，文中所使用的安装包和需要部署的配置文件都在 /vagrant 这个目录下面。下面的所有命令中都假设从这个目录里选用和复制。配置文件见代码库：https://github.com/martinliu/elastic-labs&lt;/p>
&lt;p>本文所使用的安装测试环境是：&lt;/p>
&lt;ul>
&lt;li>CentOS Server 8&lt;/li>
&lt;li>JDK 11&lt;/li>
&lt;li>Elasticsearch 7.6.1&lt;/li>
&lt;li>Kibana 7.6.1&lt;/li>
&lt;li>Elastic Workplace Search 7.6.1&lt;/li>
&lt;/ul>
&lt;p>下面使用 &lt;code>vagrant up&lt;/code> 一键式拉起基础测试环境的说明，请参考之前的文章。本测试所使用的基础 ES 安装脚本如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo I am provisioning a Elasticsearch Server...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date &amp;gt; /etc/vagrant_provisioned_at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo swapoff -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sysctl -w vm.max_map_count=262144
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;elasticsearch - nofile 65535&amp;#39; &amp;gt;&amp;gt; /etc/security/limits.conf&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** Welcome to Elastic Stack Labs&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;**** -- -- -- -- -- -- -- -- ****&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh -c &amp;#34;echo &amp;#39;*&amp;#39; &amp;gt;&amp;gt; /etc/motd&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh /vagrant/rpm/elasticsearch-7.6.1-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-certutil cert -out /etc/elasticsearch/elastic-certificates.p12 -pass &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod 660 /etc/elasticsearch/elastic-certificates.p12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/elasticsearch/elasticsearch.yml /etc/elasticsearch/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto -b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo Provisioning script works good!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo Please go to http://192.168.50.10:9200/ using above passwords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这段脚本配合 vagrant 的 provision 功能使用，它本来就是一段 shell 脚本，可以可以独立执行，它的输出结果如下。&lt;/p>
&lt;p>使用 vagrant up 命令拉起了测试虚拟机之后，在屏幕的输出信息中复制出 elastic 用户的密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> master1: Changed password for user apm_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD apm_system = XAZnaek3wm0GxN3OHwhP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: Changed password for user kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD kibana = sUg8OaYqh4f55GzoYApk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: Changed password for user logstash_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD logstash_system = RLthIQOH3aOFLVKqaTMu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: Changed password for user beats_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD beats_system = 73yH90G3hvrzYgVDnG3y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: Changed password for user remote_monitoring_user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD remote_monitoring_user = Sk9J77H9QFPsOZtVQJld
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: Changed password for user elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> master1: PASSWORD elastic = OeR3gADZ1Fw1cgc90pwE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本示例使用了 &lt;code>elasticsearc-native&lt;/code> 的用户认证模式。 为了方便起见，安装了 Kibana 7.6.1 ，过程此处忽略；在 Kibana 的用户管理中创建如下用户：&lt;/p>
&lt;ul>
&lt;li>sales1 、 sales2&lt;/li>
&lt;li>dev1 、 dev2&lt;/li>
&lt;/ul>
&lt;p>示例如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-22_09-15-47.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这些是测试用户，用于 Elastic Workplace Search 的测试中。&lt;/p>
&lt;h2 id="安装-elastic-enterprise-search">安装 Elastic Enterprise Search&lt;/h2>
&lt;p>Elastic Enterprise Search 需要 JDK 8 或者 JDK 11， 本实例安装了 Oracle JDK 11。&lt;/p>
&lt;p>&lt;code>sudo rpm -ivh /vagrant/rpm/jdk-11.0.6_linux-x64_bin.rpm&lt;/code>&lt;/p>
&lt;p>复制 Enterprise Search 的安装包到 &lt;code>/opt&lt;/code> 目录下，解压缩这个安装包。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/rpm/enterprise-search-7.6.0.tar.gz.tar /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cd /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo tar zxvf /opt/enterprise-search-7.6.0.tar.gz.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 Enterprise Search 的配置文件中加入 &lt;code>elastic&lt;/code> 用户的密码等配置信息。并且将配置文件部署到测试服务器中。本实例的配置文件 &lt;code>enterprise-search.yml&lt;/code> 内容如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">elasticsearch.username: elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.password: eZhp0h2ZTPKchlxxwwex
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.host: http://192.168.50.10:9200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow_es_settings_modification: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ent_search.auth.source: elasticsearch-native
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ent_search.external_url: http://192.168.50.10:3002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ent_search.listen_host: 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ent_search.listen_port: 3002
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将以上目标配置文件复制到 Elastic Workplace Search 的配置文件目录中，覆盖默认配置文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/enterprise-search/enterprise-search.yml /opt/enterprise-search-7.6.0/config/enterprise-search.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动 Enterprise Search 服务器，并且设置默认的管理员密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo ENT_SEARCH_DEFAULT_PASSWORD=martin1demo /opt/enterprise-search-7.6.0/bin/enterprise-search
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在启动的过程中，关注一下的屏幕输出信息，则表示一切正常。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">*** Default user credentials have been setup. These are only printed once, so please ensure they are recorded. ***
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: enterprise_search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: martin1demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No secret management encryption keys were provided.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your secrets will be stored unencrypted.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can use the following generated encryption key in your config file to store new encrypted secrets:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">secret_management.encryption_keys: [911f804cd11f7bc2dd338743ea1752b0b7cd2589cc80060159ed94a918bc09d3]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>等待服务器启动正常后，参考相关文档。完成 Github、Jira 和 Confluence 等数据源的配置。&lt;/p>
&lt;h2 id="配置数据源">配置数据源&lt;/h2>
&lt;p>见介绍文档 &lt;a class="link" href="https://www.elastic.co/guide/en/workplace-search/current/workplace-search-content-sources.html" target="_blank" rel="noopener"
>https://www.elastic.co/guide/en/workplace-search/current/workplace-search-content-sources.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Confluence Cloud&lt;/li>
&lt;li>Confluence Server&lt;/li>
&lt;li>Dropbox&lt;/li>
&lt;li>GitHub&lt;/li>
&lt;li>Google Drive&lt;/li>
&lt;li>Jira Cloud&lt;/li>
&lt;li>Jira Server&lt;/li>
&lt;li>OneDrive&lt;/li>
&lt;li>Salesforce&lt;/li>
&lt;li>ServiceNow&lt;/li>
&lt;li>SharePoint Online&lt;/li>
&lt;li>Zendesk&lt;/li>
&lt;/ul>
&lt;p>除了默认支持以上数据源外，还可以使用 Custom API 实现自己的数据源接入。数据源的类型分：&lt;/p>
&lt;ul>
&lt;li>组织级：可以分配给个人和用户组&lt;/li>
&lt;li>私有级：用户个体接入某个数据源，而仅供自己使用&lt;/li>
&lt;/ul>
&lt;h3 id="github-数据源对接">GitHub 数据源对接&lt;/h3>
&lt;p>首先你需要属于 GitHub 的一个组织，或者多个组织，然后在某个组织，或者几个组织做为一个数据源，对接到 Elastic Workplace Search 中。具体的配置步骤如下.&lt;/p>
&lt;p>在 GitHub 中找到需要搜索的组织，每个 repo 的 issue 和 pr 都是全文搜索的目标。
&lt;img src="https://martinliu.cn/images/2020-04-21_14-31-43.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在 GitHub 的账户中创建一个 OAuth App，图中 1、2、3、4 信息点需要和你的测试环境匹配。复制出 client ID 和 Client Secret 备用。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-21_14-17-22.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在 Elastic Workplace Search 的数据源配置页面创建 GitHub 数据源。填入上一步的两个 ID。
&lt;img src="https://martinliu.cn/images/2020-04-21_14-35-49.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>保存以上配置后，在这一步点击 Connect GitHub。
&lt;img src="https://martinliu.cn/images/2020-04-21_14-39-16.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在这一步选择需要搜索的组织，勾选后，点击完成连接配置。
&lt;img src="https://martinliu.cn/images/2020-04-21_14-40-38.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>正常连接成功后，就可以看到这个组织里所有 repo 中的 issue 和 pr 了。
&lt;img src="https://martinliu.cn/images/2020-04-21_14-55-21.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="atlassion-数据源对接">Atlassion 数据源对接&lt;/h3>
&lt;p>支持对 Confluence 和 Jira 两款产品的云服务和本地部署的搜索。配置的过程非常简单， 如果你有多套独立的 Confluence 和 Jira 环境，那么就可以给每个需要搜索的环境配置一个数据源，并且按照需要将对它们的统一搜索配置到一个统一的搜索平台之内。&lt;/p>
&lt;p>配置文档见： &lt;a class="link" href="https://www.elastic.co/guide/en/workplace-search/current/workplace-search-confluence-cloud-connector.html" target="_blank" rel="noopener"
>https://www.elastic.co/guide/en/workplace-search/current/workplace-search-confluence-cloud-connector.html&lt;/a> 和其它。下面是一个配置成功的 Jira 云服务的结果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-26_10-23-51.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>如果所示，每套 Atlassion 环境的产品都可以仅仅通过配置接入这个搜索平台。Jira 中索引的内容类型如下：&lt;/p>
&lt;ul>
&lt;li>Task&lt;/li>
&lt;li>子任务&lt;/li>
&lt;li>长篇故事&lt;/li>
&lt;li>Project&lt;/li>
&lt;li>Other&lt;/li>
&lt;/ul>
&lt;p>配置完成以后，默认的同步周期是 2 小时做一次增量索引。下图是用户对 Jira 和 Confluence 的两个本地部署服务器联合统一搜索的效果。管理员可设置任何一个人和用户组能搜索那些数据源，每个数据源在搜索结果中的权重排位。从而实现对任何一个用户组定制化搜索结果的作用。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG32.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="用户配置示例">用户配置示例&lt;/h2>
&lt;p>本文的目标是给两个用户组的人分配不同的数据源权重，从而得到各异的搜索结果排名。下面是一些建议的思路和配置过程。&lt;/p>
&lt;p>这里把仅有的两个数据源设置成了组织级别的可搜索，也就是他可以进入任何一个合法用户的搜索清单中。加入是特定团队所使用的数据源，在这里需要关闭搜索开关。
&lt;img src="https://martinliu.cn/images/2020-04-26_11-17-20.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>本文使用的 Elasticsearc 原生用户的认证，示例中将用户名为 sales* 开头的的用户名分配到 Elastic Workplace Search 的 “销售&amp;amp;市场” 组中。
&lt;img src="https://martinliu.cn/images/2020-04-26_11-23-23.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>示例中将用户名为 dev* 开头的的用户名分配到 Elastic Workplace Search 的 “产品开发和运维” 组中。这里只是示例，你可以用任何已知用户与搜索用户组的对应，从而满足你的使用场景。
&lt;img src="https://martinliu.cn/images/2020-04-26_11-24-29.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在组织级别的组属性设置中，先设置默认用户的数据源权重，这里使用默认的 1，也就是不区分两个数据源的权重，使用相同权重。
&lt;img src="https://martinliu.cn/images/2020-04-26_11-30-03.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>下面是对 “销售&amp;amp;市场” 组的数据源权重设置，这里假设这个组的人员可能更会搜索 Jira 中的关于项目开发、问题解决进展这类的信息，不会太关注工程师实际解决的代码相关的问题。因此将 Jira 中的权重从 1 增加到 5 ，从而在相同关键字中，提升 Jira 中搜索结果的整体排名。
&lt;img src="https://martinliu.cn/images/2020-04-26_19-14-15.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>同理为 “产品开发&amp;amp;运维” 团队设置 GitHub 的高权重。
&lt;img src="https://martinliu.cn/images/2020-04-26_19-15-07.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>最后在这个安全的选项设置中，开启了搜索用户可以自主添加数据源的情况，也就是说这部分是个性化的数据源，可能是自己所使用的网盘，或者个人的 GitHub 组织等等，都可以！用户可以将对自己有帮助的，需要搜索的数据源都自助式的添加上，从而提高自己的工作效率。
&lt;img src="https://martinliu.cn/images/2020-04-26_19-16-19.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="搜索效果确认">搜索效果确认&lt;/h2>
&lt;p>下面是用户 sales1 搜索 &lt;code>ealsticsearch&lt;/code> 关键字的结果示意图。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-26_19-54-40.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>在上图中，搜索用户可以点击右侧的数据源图标，点选其中的一个数据源作为搜索范围，可以点击 All Time 时间设置条件，筛选出目标时段的文档等。还可以在搜索框中使用类似 &lt;code>ppt&lt;/code> 等文件类型搜索条件。 搜索结果是故意设置的，这是 Jira 中的一个 pdf 附件，pdf 的原文也可以搜索，而且对于 销售&amp;amp;市场 用户组来说， Jira 的权重大于 GitHub 很多，因此即使 Github 中有四个匹配的结果，也就将其排了在了最下面。&lt;/p>
&lt;p>下图是 dev1 用户（属于产品开发&amp;amp;运维组）的登录后界面。这里显示了建议的搜索快捷短语 &lt;code>pull requests form last week&lt;/code> ，页面上的搜索结果是按照数据源中最更新的文档靠前的规则排列的。
&lt;img src="https://martinliu.cn/images/2020-04-26_20-01-51.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>下面这个用户搜索可关键词 &lt;code>app search&lt;/code>，从这个结果中可以看出，即使是在 GitHub 中的一半匹配（并无完整的 app search 这个词组出现在任何文档里）搜索结果的排名都比 Jira 中的完全命中的排名高。
&lt;img src="https://martinliu.cn/images/2020-04-26_20-03-00.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="测试总结">测试总结&lt;/h2>
&lt;p>到目前为止，本文展示了一部分 Elastic Workplace Search 的基础功能。以及一些假象的搜索和配置场景，相信对此感兴趣的读者参考本文，也可以在 1 天之内完全实现以上所有的测试场景，从而为正确评估这个产品打下一个基础。&lt;/p>
&lt;p>如果，想进一步集成自己的资料库的话，可以参考自定义 API 的相关文档，开发自定义的数据源。这就是一个功能齐全的搜索平台，它可以非常方便的集成任何公司的环境中，并且实现集中统一搜索平台的效果。&lt;/p>
&lt;h2 id="devops核心能力建设">DevOps核心能力建设&lt;/h2>
&lt;p>如果你也是 DevOps 的实践者，如果你看过我之前写的关于 DevOps 状态调查报告和能力成长模型的相关文章，你可能对下图也有印象。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567339751/2019-dora-DevOps-all.jpg"
loading="lazy"
>&lt;/p>
&lt;p>这是 DORA 出的最新版本的 DevOps 能力成长模型，在 2019 年的DevOps 能力调查中，增加了对生产力工具的调查，该模型中所关注的三种生产力能力工具包括：&lt;/p>
&lt;ul>
&lt;li>各种有用易用的工具&lt;/li>
&lt;li>互联网搜索&lt;/li>
&lt;li>内网搜索&lt;/li>
&lt;/ul>
&lt;p>在这个部分有两项生产力影响因素能力是关于搜索的。在我国的很多工作环境中，特别是开发相关的工作，无 Internet 环境的纯内网是很普遍的。而内网上的 Atlassian 相关产品，微软相关产品又是最多用的；不同业务部门或者团队拥有自建的 Jira 或者 Confulence 服务器；在团队协作的时候，或者在执行跨部门的项目的时候，项目资料的统一搜索就成了问题。类似的需求和现象不胜枚举，希望本文介绍的 Elastic Workplace Search 统一搜索平台可以成为你的帮手，为你填补 DevOps 能力成长模型中关于 &lt;code>内网搜索&lt;/code> 的这一项空白。当然，这个平台所支持的外网 SaaS 服务也是很多的，可以综合使用。&lt;/p></description></item><item><title>随心所欲的为应用无痛添加搜索功能</title><link>https://martinliu.cn/blog/%E9%9A%8F%E5%BF%83%E6%89%80%E6%AC%B2%E7%9A%84%E4%B8%BA%E5%BA%94%E7%94%A8%E6%97%A0%E7%97%9B%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/</link><pubDate>Sat, 11 Apr 2020 09:36:49 +0800</pubDate><guid>https://martinliu.cn/blog/%E9%9A%8F%E5%BF%83%E6%89%80%E6%AC%B2%E7%9A%84%E4%B8%BA%E5%BA%94%E7%94%A8%E6%97%A0%E7%97%9B%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 随心所欲的为应用无痛添加搜索功能" />&lt;p>开发搜索功能从此再也不用犯愁了，有了 App Search ，为应用增加搜索功能一下子变得简单了很多。本文描述了如何轻松上手这套搜索平台的所有步骤。&lt;/p>
&lt;p>什么是 App Search? 这是一套强大的 API 和开发者工具集，以构建功能强大的面向用户的搜索应用为目标。相关详细介绍见 &lt;a class="link" href="https://www.elastic.co/cn/app-search" target="_blank" rel="noopener"
>https://www.elastic.co/cn/app-search&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps1.jpg"
loading="lazy"
>&lt;/p>
&lt;p>丰富的开箱即用功能:&lt;/p>
&lt;ul>
&lt;li>为相关性搜索应用场景而优化&lt;/li>
&lt;li>拼写错误容忍&lt;/li>
&lt;li>相关度调整&lt;/li>
&lt;li>支持第三方 API 客户端，且具备强大的 API&lt;/li>
&lt;li>独立的 API 日志和搜索分析&lt;/li>
&lt;li>自动化扩展&amp;amp;运维支持&lt;/li>
&lt;li>Search UI library&lt;/li>
&lt;/ul>
&lt;h2 id="环境准备">环境准备&lt;/h2>
&lt;p>测试环境现需要一台 Elasticsearch 服务器，或者和下面等同的环境。&lt;/p>
&lt;p>本文的环境描述如下：&lt;/p>
&lt;ul>
&lt;li>macOS 10.15.4&lt;/li>
&lt;li>vagrant 2.2.7&lt;/li>
&lt;li>virtualbox 6.0.15&lt;/li>
&lt;li>虚拟机模板 bento/centos-8&lt;/li>
&lt;li>elasticsearch 7.6.1&lt;/li>
&lt;li>app-search 7.6.1&lt;/li>
&lt;li>jdk-11.06&lt;/li>
&lt;/ul>
&lt;p>本文的测试环境基于 Vagrant + VirtualBox 的组合环境搭建而成，基础安装工作可以一键完成。&lt;/p>
&lt;p>主要脚本 Vagrantfile、pre-install-ES.sh 请参考此代码库：&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/martinliu/elastic-labs/tree/master/app-search" target="_blank" rel="noopener"
>https://github.com/martinliu/elastic-labs/tree/master/app-search&lt;/a>&lt;/p>
&lt;p>开启并登陆这套安装环境的命令如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vagrant up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vagrant ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在以上命令的启动信息里找到如下的 elastic 用户密码部分备用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">master1: Changed password for user elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1: PASSWORD elastic = eczHJ7NPrsO1B1BRA8SS
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="安装-app-search">安装 App Search&lt;/h2>
&lt;p>浏览 App Search 的安装文档： &lt;a class="link" href="https://swiftype.com/documentation/app-search/self-managed/installation" target="_blank" rel="noopener"
>https://swiftype.com/documentation/app-search/self-managed/installation&lt;/a>&lt;/p>
&lt;p>安装 App Search 所需的 JDK 8 或者 11 ，本文安装的是 Oracle 的 JDK 11。本文假设所有的安装文件和已经编辑好的配置文件都放在了 /vagrant 目录下。&lt;/p>
&lt;p>&lt;code>sudo rpm -ivh /vagrant/rpm/jdk-11.0.6_linux-x64_bin.rpm&lt;/code>&lt;/p>
&lt;p>安装 App Search 服务器。&lt;/p>
&lt;p>&lt;code>sudo rpm -ivh /vagrant/rpm/app-search-7.6.1.rpm &lt;/code>&lt;/p>
&lt;p>浏览 App Search 服务器默认的配置文件，了解有哪些可用选项。&lt;/p>
&lt;p>&lt;code>sudo more /usr/share/app-search/config/app-search.yml &lt;/code>&lt;/p>
&lt;p>将 Elasticsearch 服务器安装时产生的随机密码更新到 app-search.yml 文件中，并且定制它的内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">allow_es_settings_modification: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.host: http://192.168.50.10:9200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.username: elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.password: eczHJ7NPrsO1B1BRA8SS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_search.external_url: http://192.168.50.10:3002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_search.listen_host: 192.168.50.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_search.listen_port: 3002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_directory: /var/log/app-search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filebeat_log_directory: /var/log/app-search
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将更新好的 app-search.yml 更新到它默认的路径中。&lt;/p>
&lt;p>&lt;code>sudo cp /vagrant/appsearch/app-search.yml /usr/share/app-search/config/app-search.yml&lt;/code>&lt;/p>
&lt;p>启动 App Search 服务器。&lt;/p>
&lt;p>&lt;code>sudo /usr/share/app-search/bin/app-search&lt;/code>&lt;/p>
&lt;p>在启动日志中，找到如下的默认用户名和密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#########################################################
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*** Default user credentials have been setup. These are only printed once, so please ensure they are recorded. ***
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: app_search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: vjqmjhv2s5rzixjc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#########################################################
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在服务器初始化启动完毕之后，用上面的用户名和密码，在浏览器中登录 App Search 服务器 http://192.168.50.10:3002&lt;/p>
&lt;p>到此为止，App Search 服务器的安装就完成了。它其实是一个基于 Elasticsearch 的搜索服务平台。&lt;/p>
&lt;p>它的特点是帮助开发者随心所欲的为已有的或者正在开发的项目增加功能强大的搜索功能，而且将搜索功能的实施成本降低到无痛点的程度。App Search 可以覆盖的使用场景如下：&lt;/p>
&lt;ul>
&lt;li>SaaS / web 应用&lt;/li>
&lt;li>复杂的电商应用&lt;/li>
&lt;li>客户支持服务站点&lt;/li>
&lt;li>Geo 地理搜索&lt;/li>
&lt;li>公司官网&lt;/li>
&lt;li>内部的搜索&lt;/li>
&lt;li>还有更多其他&lt;/li>
&lt;/ul>
&lt;h2 id="创建名为-games-的搜索引擎">创建名为 games 的搜索引擎&lt;/h2>
&lt;p>在首页的创建引擎的输入框中输入 games， 语言选择默认选项，点击创建。浏览新创建的引擎，点击左下角的菜单 Credentials，复制 privite-key 备用。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps2.jpg"
loading="lazy"
>&lt;/p>
&lt;p>找到这个搜索引擎的 API 调用网址备用。
&lt;code>http://192.168.50.10:3002/api/as/v1/&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps3.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="通过-api-索引数据文档">通过 API 索引数据文档&lt;/h2>
&lt;p>需要通过 App Search 提供的 API 索引一份具有 4000+ 条数据的 json 文件。数据文件见代码库中的 &lt;code>video-games.json&lt;/code> 。本文使用 Ruby 编写了一个上传脚本，见 &lt;code>upload.rb&lt;/code> ，该脚本使用了名为 elastic-app-search 的客户端库。你可以使用其他编程语音，实现待接入系统和 App Search 服务器的对接，并与之保持同步，保持待搜索数据的更新。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># `gem install elastic-app-search progress_bar`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">require &amp;#39;elastic-app-search&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">require &amp;#39;json&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">require &amp;#39;progress_bar&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API_ENDPOINT = &amp;#39;http://192.168.50.10:3002/api/as//v1/&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API_KEY = &amp;#39;private-jdhcmi1yhy8wjxo6upb4qki3&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ENGINE_NAME = &amp;#39;games&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client = Elastic::AppSearch::Client.new(:api_key =&amp;gt; API_KEY, :api_endpoint =&amp;gt; API_ENDPOINT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file = File.read(&amp;#39;./video-games.json&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data = JSON.parse(file)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar = ProgressBar.new(data.count / 100)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data.each_slice(100) do |slice|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client.index_documents(ENGINE_NAME, slice)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bar.increment!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上脚本中的 API_ENDPOINT 和 API_KEY 需要更新，与当前测试系统匹配。这个脚本的运行效果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ app-search git:(master) ✗ ruby upload.rb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[##########################################################################] [40/40] [100.00%] [00:54] [00:00] [ 0.73/s]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>索引之后，在搜引擎的 Documents 页面，浏览索引后的数据，用 Query Tester 进行一些搜索，了解这些数据的内容，注意观察当前搜索的结果和排序。&lt;/p>
&lt;h2 id="修订-schema">修订 Schema&lt;/h2>
&lt;p>开发者可以按照需要随时修改 Schema，实际上这是一个 Schema 的平台。 Schema 的修改后，数据即可生效，在这个过程中前端用户的搜索体验不会受到任何影响。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps4.jpg"
loading="lazy"
>&lt;/p>
&lt;p>修改三个字段的定义，并增加 language 字段，点击右上角的 Update Type 按钮生效。&lt;/p>
&lt;h2 id="按需进行搜索设置">按需进行搜索设置&lt;/h2>
&lt;h3 id="创建同义词">创建同义词&lt;/h3>
&lt;p>为 Pokemon 创建同义词 Pikachu，如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps5.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="调整搜索字段的权重">调整搜索字段的权重&lt;/h3>
&lt;p>为 globa_sales 增加 Functional Boost 1。
&lt;img src="https://martinliu.cn/images/apps6.jpg"
loading="lazy"
>&lt;/p>
&lt;p>为 Name 增加 weight 3 ，点击右上角的 Save 保存。在这个过程中观察右侧的搜结果的动态变化，还可以做其他字段的修改，知道搜素结果满意为止。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps7.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="创建-curations">创建 curations&lt;/h3>
&lt;p>故意将某条搜索结果置顶，这有可能因为，这款游戏目前是热评游戏，是畅销爆款，是高利率商品，是广告商品，或者其他业务原因。可以给某个关键字，置顶一条或者多条搜索结果。下面将 pokemon 的 pokemon-ranger-ds-2006 这款产品置顶。点击右上角的 Query Tester 测试一下效果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps8.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="创建用户端搜索界面">创建用户端搜索界面&lt;/h2>
&lt;p>Reference UI 是提供给用户使用的搜索界面，它可以是只有一个输入框，也可以是比较复杂的条件查询。如下所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps10.jpg"
loading="lazy"
>&lt;/p>
&lt;p>调整之后点击 Create Preview 按钮，进入搜素界面的确认页面，尝试使用所设定的搜索功能。满意后点击右上角的 Download ZIP Package 按钮下载这个界面的所有代码。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/apps11.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在本地解压缩这份搜索代码，并进行调试。&lt;/p>
&lt;p>在命令行，进入这个目录，先执行 &lt;code>npm install &lt;/code>命令，然后执行&lt;code>npm start&lt;/code>命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Compiled successfully!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can now view app-search-reference-ui-react in the browser.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Local: http://localhost:3000/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> On Your Network: http://192.168.1.6:3000/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Note that the development build is not optimized.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To create a production build, use npm run build.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在弹出的网页中，在本地测试这个搜索界面的可用性。最后运行 &lt;code>npm run build&lt;/code> 命令，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ games-react-demo-ui git:(master) ✗ npm run build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; app-search-reference-ui-react@1.2.0 build /Users/martin/code/elastic-labs/app-search/games-react-demo-ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; npm-run-all build-css build-js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; app-search-reference-ui-react@1.2.0 build-css /Users/martin/code/elastic-labs/app-search/games-react-demo-ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; node-sass-chokidar src/ -o src/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No input files were found.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; app-search-reference-ui-react@1.2.0 build-js /Users/martin/code/elastic-labs/app-search/games-react-demo-ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; node ./scripts/build-no-chunks.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating an optimized production build...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Browserslist: caniuse-lite is outdated. Please run next command `npm update`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Browserslist: caniuse-lite is outdated. Please run next command `npm update`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Compiled successfully.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">File sizes after gzip:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 109.1 KB build/static/js/main.2f745bc0.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3.64 KB build/static/css/main.e43852a4.css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The project was built assuming it is hosted at the server root.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can control this with the homepage field in your package.json.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">For example, add this to build it for GitHub Pages:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;homepage&amp;#34; : &amp;#34;http://myname.github.io/myapp&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The build folder is ready to be deployed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You may serve it with a static server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> npm install -g serve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serve -s build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Find out more about deployment here:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> https://bit.ly/CRA-deploy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后将构建结果部署到一个目标的先安装的 Nginx 服务器上。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo yum install -y nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mv -f build/* /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在浏览器中访问 Nginx 服务器 &lt;code>http://192.168.50.10/index.html&lt;/code> 观察最终的实现效果。
&lt;img src="https://martinliu.cn/images/apps12.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>使用 App Search 搜索平台，开发者可以快速的开发出一套定制化的搜索系统，轻松的实现后台搜索业务逻辑的调整，并轻松的将用户搜索界面测试后部署上线。&lt;/p></description></item><item><title>使用 Elastic Stack 监控 Covid-19 疫情发展</title><link>https://martinliu.cn/blog/%E4%BD%BF%E7%94%A8-elastic-stack-%E7%9B%91%E6%8E%A7-covid-19-%E7%96%AB%E6%83%85%E5%8F%91%E5%B1%95/</link><pubDate>Wed, 08 Apr 2020 17:04:08 +0800</pubDate><guid>https://martinliu.cn/blog/%E4%BD%BF%E7%94%A8-elastic-stack-%E7%9B%91%E6%8E%A7-covid-19-%E7%96%AB%E6%83%85%E5%8F%91%E5%B1%95/</guid><description>&lt;p>代号为 COVID-19 的新型冠状病毒肺炎在全球肆虐着，剧情翻转的非常快，目前欧美已经成为了全球的重灾区。
本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。&lt;/p>
&lt;p>本文使用的 Elastic Stack 版本和环境如下：&lt;/p>
&lt;ul>
&lt;li>Vagrant 的基础镜像 bento/centos-8&lt;/li>
&lt;li>Elasticsearch 7.6.1&lt;/li>
&lt;li>Kibana 7.6.1&lt;/li>
&lt;li>Logstash 7.6.1&lt;/li>
&lt;/ul>
&lt;p>关于使用 Vagrant 环境搭建 Elastic Stack 的方法，见我之前的文章。本文的数据分析处理流程图如下所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_17-58-31.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="分析和展示丁香园数据">分析和展示丁香园数据&lt;/h2>
&lt;p>本文的目标分析数据源是 &lt;a class="link" href="https://ncov.dxy.cn/ncovh5/view/pneumonia" target="_blank" rel="noopener"
>https://ncov.dxy.cn/ncovh5/view/pneumonia&lt;/a> 这个也是我们最近一直在关注的关于中国的疫情公布平台。&lt;/p>
&lt;p>丁香园网页的数据被香港大学的 Isaac Lin 同学，通过他所开发的网络爬虫抓取加工后，用 API 的形式和 csv 数据文件的形式提供了出来，他的爬虫程序和结果数据给很多目前分析疫情的人带来了很大的帮助，有不少人去他的 blog 和 github 上点赞和评论的。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/BlankerL/DXY-COVID-19-Data/tree/master/csv" target="_blank" rel="noopener"
>https://github.com/BlankerL/DXY-COVID-19-Data/tree/master/csv&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://lab.isaaclin.cn/nCoV/" target="_blank" rel="noopener"
>https://lab.isaaclin.cn/nCoV/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>你可以用 Python 程序调用 Lin 同学的 API 然后在将处理后的结果写入 ES，这样的脚本可以参考 Rockybean 的这个 &lt;a class="link" href="https://www.yuque.com/elastictalk/blog/et25?from=timeline" target="_blank" rel="noopener"
>https://www.yuque.com/elastictalk/blog/et25?from=timeline&lt;/a>。也可以用下面的命令将Github 的 csv 文件下载到本地，在做手工的数据分析，这样也等于是对林同学的数据内容和定义进行一次深入的探索，这也将更有益于你理解数据，方面后面使用 Kibana 做数据分析。&lt;/p>
&lt;p>在本机使用 git 做数据下载和同步的命令如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/BlankerL/DXY-COVID-19-Data.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd DXY-COVID-19-Data/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你也可以用用&lt;code>git pull&lt;/code>命令在日后做数据更新，并进行后续的跟踪分析。&lt;/p>
&lt;p>同步到本地的数据也可以使用 Logstash 或者是 Filebeat 持续的同步到 ES 中，这样就可以在 Kibana 上看到每日的实时更新结果。&lt;/p>
&lt;h3 id="导入数据并初始化索引">导入数据并初始化索引&lt;/h3>
&lt;p>本文选择了最简单直接的方式，使用 Kibana 自带的数据导入功能，手工导入丁香园的 csv 时序数据文件 &lt;code>csv/DXYArea.csv&lt;/code>。 如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_10-23-22.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这个工具是机器学习的周边工具 &lt;code>数据可视化器&lt;/code> ，它对这份数据做了初步的分析和识别，点击导入，然后在下面点击 Advancd ，进入高级设置，如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_10-27-15.jpeg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>可以在 index name 中可以输入&lt;code>dxy-area-m5&lt;/code> 作为本次新建的索引名称。&lt;/li>
&lt;li>然后删除默认的 Mapping 定义，输入下面的重新重定义的数据结构。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;@timestamp&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;date&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;continentEnglishName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;continentName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;countryEnglishName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;countryName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;provinceEnglishName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;provinceName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;province_confirmedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;province_curedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;province_deadCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;province_suspectedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;province_zipCode&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cityEnglishName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cityName&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;city_confirmedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;city_curedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;city_deadCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;city_suspectedCount&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;city_zipCode&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;level&amp;#34;:{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;keyword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;location&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;geo_point&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;is_china&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;boolean&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;updateTime&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;date&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;format&amp;#34;: &amp;#34;yyyy-MM-dd HH:mm:ss&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>对以上 Mapping 的简要说明：&lt;/p>
&lt;ul>
&lt;li>增加了字段 level, is_china 和 Location，你也可以加入你所需要的其它待用字段，所有新增无值字段都需要后期进行初始化。&lt;/li>
&lt;li>level 定义了数据记录的级别为：国家、港澳台和省级。&lt;/li>
&lt;li>is_china 定义了国内外数据标识&lt;/li>
&lt;li>在导入后，本文使用的字段的批量初始化/维护是调用 /_update_by_query 方法，也可以是使用 ingest pipline 的方式，或者其它 Elastic Stack 中的其它替代功能。&lt;/li>
&lt;/ul>
&lt;p>如上图所示的数据导入成功之后，点击 View index in Discovery， 我们可以使用 Kibana 的 Discovery 功能来对所导入的数据进行分析和确认，特别是一些关键字段的数值。观察这些数据的格式和内容的含义是什么。使用 filter 功能了解数据的内容和特征。建议使用下面的 filter 和组合探索一下【也可以使用 kql 语言做查询，如果用 kql 做查询的话，也可以很方便的将这些查询条件进行复用】。&lt;/p>
&lt;ul>
&lt;li>countryName:中国&lt;/li>
&lt;li>NOT countryName:中国&lt;/li>
&lt;li>countryName:中国 / provinceName:中国&lt;/li>
&lt;li>countryName:中国 / NOT provinceName:中国 / cityName exists&lt;/li>
&lt;li>countryName:中国 / NOT provinceName:中国 / NOT cityName exists&lt;/li>
&lt;li>countryName:中国 / cityName: 境外输入&lt;/li>
&lt;/ul>
&lt;p>以上的 / 是多个 filter 叠加的含义，可以大概的猜测出下面的结论。&lt;/p>
&lt;ul>
&lt;li>中国国内数据&lt;/li>
&lt;li>国外数据&lt;/li>
&lt;li>中国省级统计数据&lt;/li>
&lt;li>中国各省的各个城市的统计数据&lt;/li>
&lt;li>中国的港澳台数据&lt;/li>
&lt;li>中国海关所监控到的境外输入数据&lt;/li>
&lt;/ul>
&lt;p>为了后面使用省的名称做地图分析，这里需要查看数据中各个省英文名称，以广西为例，设置查询条件：provinceEnglishName Guangxi&lt;/p>
&lt;p>现在来浏览 Elastic Map 地图服务所引用的中国各省的中英文名称和代码，查看 &lt;a class="link" href="https://maps.elastic.co/#file/china_provinces" target="_blank" rel="noopener"
>https://maps.elastic.co/#file/china_provinces&lt;/a> ；&lt;/p>
&lt;p>可以发现现所导入的数据和 Elastic 地图服务的官方数据不一致。&lt;/p>
&lt;p>下图是用 Excel 分析对比的结果，建议使用 Python、logstash 或者其它工具在导入的过程中对这个字段做预处理和校准。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-07_12-55-23.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>本文下面描述了 Dev Tool 中运行相关的数据优化和及校准脚本。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#维护is_china字段
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POST dxy-area-m5/_update_by_query
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;script&amp;#34;:{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lang&amp;#34;: &amp;#34;painless&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;source&amp;#34;: &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.countryEnglishName == &amp;#34;China&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.is_china = true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.is_china = false;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#维护 level 字段，对于中国的数据来说，如果省的名字是中国这就是国家级的统计数据
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POST dxy-area-m5/_update_by_query
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;script&amp;#34;:{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lang&amp;#34;: &amp;#34;painless&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;source&amp;#34;: &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(ctx._source.provinceName == ctx._source.countryName){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.level = &amp;#34;country&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.cityName == null) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.level = &amp;#34;cn-hmt&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.level = &amp;#34;province&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#更新省的名字为国际代码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POST dxy-area-m5/_update_by_query
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;script&amp;#34;:{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lang&amp;#34;: &amp;#34;painless&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;source&amp;#34;: &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Guangxi&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Guangxi Zhuang Autonomous Region&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Hong Kong&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;HongKong&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Macao&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Macau&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Neimenggu&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Inner Mongolia&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Ningxia&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Ningxia Hui Autonomous Region&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Taiwan&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Taiwan Province&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceName = &amp;#34;台湾省 (中华人民共和国)&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.provinceEnglishName == &amp;#34;Xizang&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.provinceEnglishName = &amp;#34;Tibet&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (ctx._source.cityName == &amp;#34;境外输入人员&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctx._source.cityName = &amp;#34;境外输入&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意：以上的三个 POST 方法调用的对象是 &lt;code>dxy-area-m5 &lt;/code> ，这个索引的名字需要和你上面导入数据创建的索引一致。由于是手工初次处理这些数据，建议再次运行以上的一系列搜索过滤条件，确认这些目标字段和数据得到了正确的处理。&lt;/p>
&lt;h3 id="可视化和展示数据">可视化和展示数据&lt;/h3>
&lt;p>在分析数据就绪了以后，下面介绍一组通过 Kibana 进行数据可视化分析展示的思路和方法。&lt;/p>
&lt;h4 id="-从-discovery-界面中直接调用可视化视图创建">💻 从 Discovery 界面中直接调用可视化视图创建&lt;/h4>
&lt;p>在 Discovery 的查询界面里，点击左侧 fields 清单中的 provinceName，或者其它想进行可视化分析的字段，点击后即可查看其中一部分的数值分布情况，点击下面的 Visualize 按钮。就可以进入可视化编辑模式。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_11-11-13.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>进入这个 field 的默认可视化配置模式，选择 Y 轴的指标为 province_confirmedCount 的最大值，然后在上方增加 is_china:true 和 level:province 过滤条件后，就可以得到下面的结果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_11-09-48.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>还可以对 Buckets 里面 X 轴的值进行调整，使用省的名字。 这样基本上得出了确诊数省排名的结果。或者你还可以调整出其它的分析结论。在分析结束后，点击左上角的 Save ，将分析组合保存下来用于后期的仪表板的制作。&lt;/p>
&lt;h4 id="-使用-visualization-的-lens-功能探索数据">💻 使用 Visualization 的 lens 功能探索数据&lt;/h4>
&lt;p>点击 New Visualization，选择左上角的 Lens 图标。在 CHANGE INDEX PATTERN 中选择目标的索引如：dxy-area-m5。 拖拽几个字段进入中间的显示区：continentName countryName province_confirmedCount 这些字段，也可以尝试将这些字段拖入右侧的 X 轴或者 Y 轴。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_12-35-17.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>拖入不同的位置，图形下方的建议可视化展示风格会随之变化，Lens 功能在预判和猜测你可能会用到的展示和分析组合。感受这些建议图形所提供的数据分析的线索。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_12-59-59.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>同样的，你也可以在上面使用过滤器和时间段选择功能，这些数据筛选条件发生变化之后，可视化的图形数据也会随之变化。&lt;/p>
&lt;h4 id="使用-tsvb-时序数据可视化构造器">使用 TSVB 时序数据可视化构造器&lt;/h4>
&lt;p>这个控件的功能稍微复杂一些，用下图说明它的用法。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_19-02-31.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>如上图所示，现在 Panel Options 里面设置需要使用的数据索引，以及其他参数。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_19-08-55.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>然后在 Data 中选择需要显示的数据指标，如上图中选择了全国累计确诊和累计治愈，两个指标。将他们放在一起更能回答这样一个问题：是否治愈的速度是足够的，如果治愈速度跟得上的话，说明医疗资源是足够用的，如果这两条线之间的落差比较大就危险了。&lt;/p>
&lt;p>上方的 TSVB 图形显示了所有数值和格式调整后的预览效果。可以无限的修订知道满意为止。这个控件天然支持指标数值、排行榜、速度表、Markdown 文本和数据表。可以切换到不同的视角看它的展示效果。&lt;/p>
&lt;h4 id="使用地图展示省级累计数据">使用地图展示省级累计数据&lt;/h4>
&lt;p>我们可以使用已经导入的数据在地图上显示省级的累计确诊和治愈人数。过程是这样的：&lt;/p>
&lt;ul>
&lt;li>点击 Kibana 左侧的 Maps 图标，创建一个新的地图。&lt;/li>
&lt;li>创建图层，选择 EMS Boundaries ，选择这个图层所使用的基础地图为 China Provinces&lt;/li>
&lt;li>点击 Add layer 按钮&lt;/li>
&lt;li>在图层配置里输入图层名称缩放级别，透明度的设置&lt;/li>
&lt;li>设置 Tooltip fields 的设置中增加 name(zh) ,中文的省名称&lt;/li>
&lt;li>设置 Term Joins 的规则，点击 Join 关键字，设置索引中的数据和地图的关联。如下图所示，这就是我们为什么要把导入数据中的省英文名称与 EMS 的定义数据对齐了。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_21-30-40.jpeg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>点击 and use metrics 设置在每个省上显示的数据。如下图所示。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_21-31-05.jpeg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>最后设置 Layer Style， 将 Fill color 填色设置为 By Value， 选择省累计确诊，下面的颜色可以选择白色到深红的过度。&lt;/li>
&lt;li>最后点击 Save &amp;amp; close 按钮。&lt;/li>
&lt;/ul>
&lt;p>这里的技术点在于：Elastic 地图中的基础数据（地理名称代码）必须和目标索引中的相关字段能够匹配上（join）上，然后才能将索引中的实际做聚合运算的字段根据地理名称进行处理，例如根据数值的大小，将各个省填充成不同的颜色，用 tooltips 显示这个省的数据信息。&lt;/p>
&lt;h4 id="创建-dashboard-仪表板">创建 Dashboard 仪表板&lt;/h4>
&lt;p>上面所设计的所有的图示和地图都是创建 Dashboard 的素材，等做了一些素材之后就可以做仪表板了。这个过程就是在空白的仪表板上逐渐加入合适的图表，然后不断调整图表布局的过程，然后呈现出一个阶段性的效果。如下图所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_13-44-03.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="世卫组织数据的处理和展示">世卫组织数据的处理和展示&lt;/h2>
&lt;p>浏览世卫组织的数据 &lt;a class="link" href="https://github.com/CSSEGISandData/COVID-19" target="_blank" rel="noopener"
>https://github.com/CSSEGISandData/COVID-19&lt;/a>&lt;/p>
&lt;p>基于以上数据可以制作一个如下的仪表板：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_13-44-40.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>这个仪表板中的地图是亮点，建议仔细学习研究一下。 这个仪表板的来源是一篇国外的文章： &lt;a class="link" href="https://www.siscale.com/importing-covid-19-data-into-elasticsearch/" target="_blank" rel="noopener"
>https://www.siscale.com/importing-covid-19-data-into-elasticsearch/&lt;/a>&lt;/p>
&lt;p>我在一个小时左右，根据经验顺利的在我的实验环境里顺利生成了这个成果。下面是根据这篇文章怎么样使用 logstash 导入 Github 中世卫组织发布的数据，并持续与之保持同步。这里是他们的代码：https://github.com/siscale/covid-19-elk&lt;/p>
&lt;p>下面描述如何使用这份代码。首先你需要有一个安装好的切正常运行的 Elasticsearch 7.6.1 服务器，一个可以正常使用的 Kibana 7.6.1 服务器。在此基础之上，安装 logstash 服务器，修改并放好 logstash 的配置文件。 在 Kibana 的 Dev Tool 中导入索引的 Mapping。启动 logstash 服务器，等待和确认数据的传入。导入 Kibana 的相关对象。浏览查看和确认 siscale （国外一家 Elastic 的合作伙伴公司） 的作品。理解每个可视化展示控件的设计细节。&lt;/p>
&lt;p>你可以参考下面的安装步骤和注意事项。&lt;/p>
&lt;ul>
&lt;li>登录 Kibana，进入 Dev Tool 中，将文件 index-template-mapping.json 中的内容复制进去并点击执行按钮。&lt;/li>
&lt;li>安装 Logstash 7.6.1&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yum install java-11-openjdk-11.0.6.10-0.el8_1.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rpm -ivh logstash-7.6.1.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>将配置文件中的 /etc/logstash/covid-19-hashes.json 修改为 /usr/share/logstash/covid-19-hashes.json 然后把它们复制到 logstash 的配置目录中&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cp logstash-github-covid-19-daily-reports-template.conf logstash-github-covid-19-time-series-template.conf /etc/logstash/conf.d/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>确保你的虚拟机（测试环境和 github 以及其他的国外基本正常的情况下）网络正常的情况下，启动 logstash 服务并且关注该服务的日志信息&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl start logstash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo tail -f /var/log/logstash/logstash-plain.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>PS:在日志中可以看到 logstash 完全正常的启动成功，或者看到报错，这时候就需要停止 logstash 服务，并进行调整。直到服务彻底运行成功不报错。&lt;/p>
&lt;p>在 logstash 服务正常运行的情况下，世卫组织的数据是会被正常的导入到 ES 中的，你可以在 Discovery 中查看如下的查询结果。那么恭喜你，你已经和世卫组织的数据保持实时同步了。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_22-05-06.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>最后是导入该项目的仪表板对象。操作步骤参考：登录 kibana， 进入管理， 点击 Kibana 下面的 saved objeces ； 点击 import 按钮。选择 kibana-7.6.1-covid-19-dashboard.ndjson ，然后即可浏览名为 COVID 19 的仪表板了。导入后在 Kibana 的仪表板清单中选择查看名为 “COCID 19” 的仪表板。预祝你能看到和我相同的结果，建议仔细查看他们的地图设计，做的是非常的细致，如下图所示，它是三个图层叠加的显示效果。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2020-04-08_23-34-36.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>最后希望你通过本文已经成功的展示出了以上的预期结果。下面简单总结一下相关知识点。&lt;/p>
&lt;ul>
&lt;li>对陌生数据集的首次探索可以是手动导入 csv 文件的手动过程&lt;/li>
&lt;li>在导入的过程中需要做适当的 field mapping 的调整，和扩展，让后期的查询和数据分析更加清晰&lt;/li>
&lt;li>对导入后的数据，充分利用 Discovery 的查询和分析能力，确定好数据校准和调优的更新策略&lt;/li>
&lt;li>充分利用 ES 的批量查询修改 API，可以轻松快捷的实现数据修订。&lt;/li>
&lt;li>地图的使用重点在地理信息代码和数据索引中的实际 field 的 join，因此需要特别设计和维护 join 的字段，确保他们的精确性。&lt;/li>
&lt;li>仪表板的制作和设计依赖于各种图标的设计&lt;/li>
&lt;/ul>
&lt;p>Elastic Stack 在本案例中得到了充分而综合的运用。从 E 到 L 到 K 一个都不能少。建议大家能平衡掌握这个技术栈的各种技术能力，补足不太擅长的部分。&lt;/p>
&lt;p>本文参考的网址如下：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6" target="_blank" rel="noopener"
>https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://covid.surge.sh/" target="_blank" rel="noopener"
>http://covid.surge.sh/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://informationisbeautiful.net/visualizations/covid-19-coronavirus-infographic-datapack/" target="_blank" rel="noopener"
>https://informationisbeautiful.net/visualizations/covid-19-coronavirus-infographic-datapack/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ncov.dxy.cn/ncovh5/view/pneumonia" target="_blank" rel="noopener"
>https://ncov.dxy.cn/ncovh5/view/pneumonia&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/CSSEGISandData/COVID-19" target="_blank" rel="noopener"
>https://github.com/CSSEGISandData/COVID-19&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://lab.isaaclin.cn/nCoV/" target="_blank" rel="noopener"
>https://lab.isaaclin.cn/nCoV/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/siscale/covid-19-elk" target="_blank" rel="noopener"
>https://github.com/siscale/covid-19-elk&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.mapbox.cn/coronavirusmap/#3.35/28.47/109.74" target="_blank" rel="noopener"
>https://www.mapbox.cn/coronavirusmap/#3.35/28.47/109.74&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ncov.deepeye.tech/" target="_blank" rel="noopener"
>https://ncov.deepeye.tech/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.siscale.com/importing-covid-19-data-into-elasticsearch/" target="_blank" rel="noopener"
>https://www.siscale.com/importing-covid-19-data-into-elasticsearch/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>如何在墙内正常导入 Vagrant 虚拟机模板</title><link>https://martinliu.cn/blog/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%A2%99%E5%86%85%E6%AD%A3%E5%B8%B8%E5%AF%BC%E5%85%A5-vagrant-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A8%A1%E6%9D%BF/</link><pubDate>Thu, 26 Mar 2020 08:57:57 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%A2%99%E5%86%85%E6%AD%A3%E5%B8%B8%E5%AF%BC%E5%85%A5-vagrant-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A8%A1%E6%9D%BF/</guid><description>&lt;img src="https://martinliu.cn/images/vagrant-download-box.jpg" alt="Featured image of post 如何在墙内正常导入 Vagrant 虚拟机模板" />&lt;p>当你满心欢喜的安装完了 vagrant 之后，在你第一次 &lt;code>vagrant up&lt;/code> 命令的时候，是下载超时么？你的内心是什么感受？想放弃了么？&lt;/p>
&lt;p>其实你只需要找到国内的 box 文件镜像服务器，或者下载地址，然后手工下载对应的 Box 文件（操作系统镜像文件），并导入即可，本文将帮你铲除这只官方镜像文件下载失败的拦路虎。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/vagrant-home-page.png"
loading="lazy"
>&lt;/p>
&lt;p>Vagrant 的优势：&lt;/p>
&lt;ul>
&lt;li>虚拟机对于系统级开发和测试工作具有不可替代的作用&lt;/li>
&lt;li>手工安装的虚拟机非常&lt;/li>
&lt;/ul>
&lt;h2 id="准备工作">准备工作&lt;/h2>
&lt;p>我的测试环境如下，如果你的测试环境和我的不同，但是本操作方法和过程也同样的适用于相似的环境。&lt;/p>
&lt;p>环境描述：&lt;/p>
&lt;ul>
&lt;li>macOS catalina version 10.15.3&lt;/li>
&lt;li>vagrant 2.2.4&lt;/li>
&lt;li>Virtuabox 6.0.15r135660&lt;/li>
&lt;/ul>
&lt;p>如果你也百度了’ vagrant box 国内镜像‘的话，结果会使你很失望，清华大学等站点只是缓存了个别的镜像文件，并没有其它版本特别全面的网站，更没有完整的镜像。如果你知道其它国内的镜像站点请告诉我，我会增加到本文。&lt;/p>
&lt;p>Ubuntu 的可以浏览这两个目标下载网址。&lt;/p>
&lt;p>&lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/vagrant/" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/vagrant/&lt;/a>&lt;/p>
&lt;p>然后用vagrant 下面的命令就可以将 box 下载并且添加到本地。&lt;/p>
&lt;ul>
&lt;li>ubuntu 18.04 LTS:&lt;/li>
&lt;/ul>
&lt;p>vagrant box add &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/bionic/current/bionic-server-cloudimg-amd64-vagrant.box" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/bionic/current/bionic-server-cloudimg-amd64-vagrant.box&lt;/a> &amp;ndash;name ubuntu18&lt;/p>
&lt;ul>
&lt;li>ubunt 16.04 LTS：&lt;/li>
&lt;/ul>
&lt;p>vagrant box add &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/xenial/current/xenial-server-cloudimg-amd64-vagrant.box" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/xenial/current/xenial-server-cloudimg-amd64-vagrant.box&lt;/a> &amp;ndash;name ubuntu16&lt;/p>
&lt;ul>
&lt;li>ubuntu14：&lt;/li>
&lt;/ul>
&lt;p>vagrant box add &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/vagrant/trusty/current/trusty-server-cloudimg-amd64-vagrant-disk1.box" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/vagrant/trusty/current/trusty-server-cloudimg-amd64-vagrant-disk1.box&lt;/a> &amp;ndash;name ubuntu14&lt;/p>
&lt;p>对于 CentOS 而言，它的官网整理的比较好，提供了各种格式的下载，可能需要科学上网才能访问到 Centos 的下载网址。&lt;/p>
&lt;p>&lt;a class="link" href="http://cloud.centos.org/centos/7/vagrant/" target="_blank" rel="noopener"
>http://cloud.centos.org/centos/7/vagrant/&lt;/a>
&lt;a class="link" href="http://cloud.centos.org/centos/8/vagrant/" target="_blank" rel="noopener"
>http://cloud.centos.org/centos/8/vagrant/&lt;/a>&lt;/p>
&lt;p>实战建议：你并不需要下载过多的 box 操作系统镜像文件，够用即可。建议将最近有可能使用到的 Box 文件用断点续传的多线程下载工具下载到本机磁盘备用。我下载了一些，关注的微信号‘ MyDevOps ’ 回复 box1 即可获得百度网盘下载地址，这个共享目录中有本文中所提到的所有 Box 文件。&lt;/p>
&lt;h2 id="导入-box-文件">导入 Box 文件&lt;/h2>
&lt;p>用 &lt;code>vagrant box add&lt;/code> 命令将本地下载好的 box 文件导入到 vagrant 的主目录中，macOS 下是在&lt;code>~/.vagrant/&lt;/code> 目录里。&lt;/p>
&lt;p>使用&lt;code>vagrant box list&lt;/code>名先查看本地已有的 box 清单，下面的执行结果如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ ~ vagrant box list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Puppetlabs Ubuntu 12.04.2 x86_64, VBox 4.2.10, No Puppet or Chef (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-7.1 (virtualbox, 2.2.2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-7.2 (virtualbox, 2.3.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-8 (virtualbox, 202002.04.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/ubuntu-16.04 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coreos-alpha (virtualbox, 1451.2.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/centos6 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/centos7 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/ubuntu1604 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/trusty64 (virtualbox, 20161207.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/trusty64 (virtualbox, 20170307.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/wily64 (virtualbox, 20160715.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/xenial64 (virtualbox, 20161214.0.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/xenial64 (virtualbox, 20170307.0.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;code>vagrant box add&lt;/code>导入，并确认。 参考下面的执行过程&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ ~ vagrant box add ~/Downloads/box/bionic-server-cloudimg-amd64-vagrant.box --name ubuntu/bionic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; box: Box file was not detected as metadata. Adding it directly...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; box: Adding box &amp;#39;ubuntu/bionic&amp;#39; (v0) for provider:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> box: Unpacking necessary files from: file:///Users/martin/Downloads/box/bionic-server-cloudimg-amd64-vagrant.box
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; box: Successfully added box &amp;#39;ubuntu/bionic&amp;#39; (v0) for &amp;#39;virtualbox&amp;#39;!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ ~ vagrant box list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Puppetlabs Ubuntu 12.04.2 x86_64, VBox 4.2.10, No Puppet or Chef (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-7.1 (virtualbox, 2.2.2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-7.2 (virtualbox, 2.3.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/centos-8 (virtualbox, 202002.04.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bento/ubuntu-16.04 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coreos-alpha (virtualbox, 1451.2.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/centos6 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/centos7 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">geerlingguy/ubuntu1604 (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/bionic (virtualbox, 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/trusty64 (virtualbox, 20161207.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/trusty64 (virtualbox, 20170307.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/wily64 (virtualbox, 20160715.0.0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/xenial64 (virtualbox, 20161214.0.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu/xenial64 (virtualbox, 20170307.0.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">➜ ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="校验所导入的-box">校验所导入的 Box&lt;/h2>
&lt;p>创建一个测试目录，并执行&lt;code>vagrant init ubuntu/bionic&lt;/code> ，然后使用 vagrant up 测试。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">➜&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pwd&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">➜&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">vagrant&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bionic&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">Vagrantfile&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">has&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">been&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">placed&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">this&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">directory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">vagrant&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">virtual&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">environment&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">comments&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vagrantfile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">well&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">documentation&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">vagrantup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">information&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">using&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vagrant&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>test 目录下面现在生成了一个默认的 Vagrantfile 文件，查看这个默认的 Vagrantfile 配置文件。这是一个很好的学习资料。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ test cat Vagrantfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># -*- mode: ruby -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># vi: set ft=ruby :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># All Vagrant configuration is done below. The &amp;#34;2&amp;#34; in Vagrant.configure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># configures the configuration version (we support older styles for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># backwards compatibility). Please don&amp;#39;t change it unless you know what
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># you&amp;#39;re doing.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Vagrant.configure(&amp;#34;2&amp;#34;) do |config|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # The most common configuration options are documented and commented below.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # For a complete reference, please see the online documentation at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # https://docs.vagrantup.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Every Vagrant development environment requires a box. You can search for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # boxes at https://vagrantcloud.com/search.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config.vm.box = &amp;#34;ubuntu/bionic&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Disable automatic box update checking. If you disable this, then
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # boxes will only be checked for updates when the user runs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # `vagrant box outdated`. This is not recommended.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.box_check_update = false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Create a forwarded port mapping which allows access to a specific port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # within the machine from a port on the host machine. In the example below,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # accessing &amp;#34;localhost:8080&amp;#34; will access port 80 on the guest machine.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # NOTE: This will enable public access to the opened port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 80, host: 8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Create a forwarded port mapping which allows access to a specific port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # within the machine from a port on the host machine and only allow access
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # via 127.0.0.1 to disable public access
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 80, host: 8080, host_ip: &amp;#34;127.0.0.1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Create a private network, which allows host-only access to the machine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # using a specific IP.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.network &amp;#34;private_network&amp;#34;, ip: &amp;#34;192.168.33.10&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Create a public network, which generally matched to bridged network.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Bridged networks make the machine appear as another physical device on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # your network.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.network &amp;#34;public_network&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Share an additional folder to the guest VM. The first argument is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # the path on the host to the actual folder. The second argument is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # the path on the guest to mount the folder. And the optional third
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # argument is a set of non-required options.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.synced_folder &amp;#34;../data&amp;#34;, &amp;#34;/vagrant_data&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Provider-specific configuration so you can fine-tune various
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # backing providers for Vagrant. These expose provider-specific options.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Example for VirtualBox:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.provider &amp;#34;virtualbox&amp;#34; do |vb|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # # Display the VirtualBox GUI when booting the machine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # vb.gui = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # # Customize the amount of memory on the VM:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # vb.memory = &amp;#34;1024&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # View the documentation for the provider you are using for more
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # information on available options.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Enable provisioning with a shell script. Additional provisioners such as
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # documentation for more information about their specific syntax and use.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # config.vm.provision &amp;#34;shell&amp;#34;, inline: &amp;lt;&amp;lt;-SHELL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # apt-get install -y apache2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # SHELL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在可以踏实的运行 vagrant up 了，Ubuntu 的 Box 文件导入通常没有什么问题。默认配置的 Ubuntu 版本 bionic 的 vm 现在就正常启动了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ test vagrant up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bringing machine &amp;#39;default&amp;#39; up with &amp;#39;virtualbox&amp;#39; provider...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Importing base box &amp;#39;ubuntu/bionic&amp;#39;...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Matching MAC address for NAT networking...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Setting the name of the VM: test_default_1585496539631_90780
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Clearing any previously set network interfaces...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Preparing network interfaces based on configuration...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Adapter 1: nat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Forwarding ports...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: 22 (guest) =&amp;gt; 2222 (host) (adapter 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Running &amp;#39;pre-boot&amp;#39; VM customizations...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Booting VM...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Waiting for machine to boot. This may take a few minutes...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: SSH address: 127.0.0.1:2222
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: SSH username: vagrant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: SSH auth method: private key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Warning: Connection reset. Retrying...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Vagrant insecure key detected. Vagrant will automatically replace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: this with a newly generated keypair for better security.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Inserting generated public key within guest...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Removing insecure key from the guest if it&amp;#39;s present...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Key inserted! Disconnecting and reconnecting using new SSH key...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Machine booted and ready!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Checking for guest additions in VM...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: The guest additions on this VM do not match the installed version of
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: VirtualBox! In most cases this is fine, but in rare cases it can
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: prevent things such as shared folders from working properly. If you see
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: shared folder errors, please make sure the guest additions within the
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: virtual machine match the version of VirtualBox you have installed on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: your host and reload your VM.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: Guest Additions Version: 5.2.34
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: VirtualBox Version: 6.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; default: Mounting shared folders...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default: /vagrant =&amp;gt; /Users/martin/code/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在 ssh 登录到这个崭新的 vm 。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">➜ test vagrant ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-91-generic x86_64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Documentation: https://help.ubuntu.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Management: https://landscape.canonical.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Support: https://ubuntu.com/advantage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System information as of Sun Mar 29 15:42:53 UTC 2020
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System load: 1.25 Processes: 99
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Usage of /: 10.1% of 9.63GB Users logged in: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory usage: 12% IP address for enp0s3: 10.0.2.15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Swap usage: 0%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 packages can be updated.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 updates are security updates.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vagrant@ubuntu-bionic:~$ top
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="导入-centos-7-可能遇到的问题">导入 CentOS 7 可能遇到的问题&lt;/h2>
&lt;p>CentOS 7 和 8 的相关版本在我的测试环境中都出现了导入正常 vagrant up 异常的问题，通常网络搜索错误代码后，就可以解决了，如果有任何问题，欢迎到我的微信公众后台留言。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Vagrant 的功能性和必要性是非常高的，特别是对于天朝的码农而言，就更加重要了。它是 DevOps 工具链上的知名工具，而它的使用率和广泛性却不高。后续还会出这方面的系列内容，讲解更多关于 Vagrant 的优化和功能。&lt;/p>
&lt;p>2io&lt;/p></description></item><item><title>最简化 Elasticsearch &amp; Kibana &amp; Filebeat 安装说明</title><link>https://martinliu.cn/blog/%E6%9C%80%E7%AE%80%E5%8C%96-elasticsearch-kibana-filebeat-%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/</link><pubDate>Thu, 26 Mar 2020 08:51:15 +0800</pubDate><guid>https://martinliu.cn/blog/%E6%9C%80%E7%AE%80%E5%8C%96-elasticsearch-kibana-filebeat-%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 最简化 Elasticsearch &amp; Kibana &amp; Filebeat 安装说明" />&lt;p>&lt;img src="https://martinliu.cn/images/980-elastic-stack.jpg"
loading="lazy"
alt="elk"
>&lt;/p>
&lt;p>本文描述如何搭建一套具备用户名和密码安全认证的 Elastic Stack 系统，并开始使用 Filebeat 的基础模块实现分布式的日志收集。&lt;/p>
&lt;ul>
&lt;li>安装单节点 Elasticsearch 服务器，启用用户名和密码安全认证，并创建 TLS 数字证书备用&lt;/li>
&lt;li>安装 Kibana 服务器，并配置与 Elasticsearch 服务的连接&lt;/li>
&lt;li>安装和配置 Filebeat 代理程序，并配置 system 和 auditd 模块&lt;/li>
&lt;li>使用 Kibana 监控 Filebeat 所采集的系统日志，并监控系统的状态&lt;/li>
&lt;/ul>
&lt;p>为了使你也获得与我一致的安装和测试体验，请先下载并浏览相本文所使用的代码库：https://github.com/martinliu/elastic-labs&lt;/p>
&lt;h2 id="试验环境概述和启动">试验环境概述和启动&lt;/h2>
&lt;p>本文所使用相关软件以及版本。&lt;/p>
&lt;ul>
&lt;li>macOS Catalina version 10.15.3&lt;/li>
&lt;li>Vagrant 2.2.4&lt;/li>
&lt;li>VirtalBox 6.0&lt;/li>
&lt;li>操作系统镜像: bento/centos-8 (virtualbox, 202002.04.0)&lt;/li>
&lt;li>Elastic Stack 安装包（RPM）
&lt;ul>
&lt;li>Elasticsearch 7.6.1&lt;/li>
&lt;li>Kibana 7.6.1&lt;/li>
&lt;li>Filebeat 7.6.1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>使用 Vagrant 的目录共享功能，分享安装包到测试机的 /vagrant/rpm 目录下&lt;/li>
&lt;/ul>
&lt;p>注意事项：&lt;/p>
&lt;ol>
&lt;li>你也可以使用任何一台 CentOS 8 虚拟机或者云主机，则后续的安装命令和 rpm 安装包的路径需要有所变化。&lt;/li>
&lt;li>Vagrant 文件中定义的虚拟机配置为 4 GB 内存，建议你的操作系统最低为 8GB 内存，推荐 16GB 或者更高，&lt;/li>
&lt;li>本文也适用于 Linux 或 Windows 操作系统的 Vagrant 测试环境，需要提前下载并且准备好 bento/centos-8 的基础操作系统镜像。&lt;/li>
&lt;/ol>
&lt;p>启动测试环境。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vagrant up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vagrant status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="安装-elasticsearch-服务器">安装 Elasticsearch 服务器&lt;/h2>
&lt;p>SSH 登录测试虚拟机。&lt;/p>
&lt;p>&lt;code>vagrant ssh&lt;/code>&lt;/p>
&lt;p>执行 RPM 安装命令，安装 elasticsearch 服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /vagrant/rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh ./elasticsearch-7.6.1-x86_64.rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl enable elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试 Elasticsearch 服务是否功能正常 【 Dry run 】&lt;/p>
&lt;p>curl localhost:9200&lt;/p>
&lt;p>期待的输出类似下面。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34; : &amp;#34;elk-master&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cluster_name&amp;#34; : &amp;#34;elasticsearch&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cluster_uuid&amp;#34; : &amp;#34;X4V2Yvc-SJ6ccjWbXQ5OmQ&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;version&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;number&amp;#34; : &amp;#34;7.6.1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_flavor&amp;#34; : &amp;#34;default&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_type&amp;#34; : &amp;#34;rpm&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_hash&amp;#34; : &amp;#34;aa751e09be0a5072e8570670309b1f12348f023b&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_date&amp;#34; : &amp;#34;2020-02-29T00:15:25.529771Z&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_snapshot&amp;#34; : false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lucene_version&amp;#34; : &amp;#34;8.4.0&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;minimum_wire_compatibility_version&amp;#34; : &amp;#34;6.8.0&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;minimum_index_compatibility_version&amp;#34; : &amp;#34;6.0.0-beta1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;tagline&amp;#34; : &amp;#34;You Know, for Search&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>浏览和学习 Elasticsearch 默认的配置文件。&lt;/p>
&lt;p>&lt;code>sudo cat /etc/elasticsearch/elasticsearch.yml&lt;/code>&lt;/p>
&lt;p>使用 Elasticsearch 的精简版目标测试配置文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/elasticsearch/elasticsearch.yml /etc/elasticsearch/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl restart elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>手工查看 Elasticsearch 服务器的日志，并确认服务启动正常。&lt;/p>
&lt;p>&lt;code>sudo tail -f /var/log/elasticsearch/my-elk.log&lt;/code>&lt;/p>
&lt;p>Ctl + c 终止以上日志查看，再次测试 Elasticsearch 服务。&lt;/p>
&lt;p>&lt;code>curl localhost:9200&lt;/code>&lt;/p>
&lt;p>替换为 IP 地址测试。&lt;/p>
&lt;p>&lt;code>curl http://192.168.50.10:9200/&lt;/code>&lt;/p>
&lt;h2 id="配置-elasticsearch-服务的-tls-数字证书和身份验证">配置 Elasticsearch 服务的 TLS 数字证书和身份验证&lt;/h2>
&lt;p>停止 Elasticsearch 服务。&lt;/p>
&lt;p>&lt;code>sudo systemctl stop elasticsearch.service&lt;/code>&lt;/p>
&lt;h3 id="创建-tls-数字证书">创建 TLS 数字证书&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /usr/share/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo bin/elasticsearch-certutil cert -out /etc/elasticsearch/elastic-certificates.p12 -pass &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod 660 /etc/elasticsearch/elastic-certificates.p12
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="更新-elasticsearch-配置文件">更新 Elasticsearch 配置文件&lt;/h3>
&lt;p>手工打开 Elasticsearch 配置文件。&lt;/p>
&lt;p>&lt;code>sudo vi /etc/elasticsearch/elasticsearch.yml&lt;/code>&lt;/p>
&lt;p>在配置文件的末端增加下面的配置段落。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ------------------------------- TLS and Cert ---------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.verification_mode: certificate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.truststore.path: elastic-certificates.p12
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重新启动配置 Elasticsearch 服务。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl restart elasticsearch.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status elasticsearch.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确认服务已经正常启动。&lt;/p>
&lt;p>&lt;code>sudo tail -f /var/log/elasticsearch/my-elk.log&lt;/code>&lt;/p>
&lt;h3 id="创建-elasticsearch-服务的用户密码">创建 Elasticsearch 服务的用户密码&lt;/h3>
&lt;p>运行 Elasticsearch 的密码配置工具，为各种内置用户生成随机的密码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cd /usr/share/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo bin/elasticsearch-setup-passwords auto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将生成的密码信息妥善保存备用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user apm_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">apm_system&lt;/span> &lt;span class="o">=&lt;/span> AHyg5HzJRZg8Fiva0buW
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">kibana&lt;/span> &lt;span class="o">=&lt;/span> Kt72IXkiarlGr7do02Yp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user logstash_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">logstash_system&lt;/span> &lt;span class="o">=&lt;/span> Q9nnlOdf6V9kyPbbhqN7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user beats_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">beats_system&lt;/span> &lt;span class="o">=&lt;/span> bLNrZDggPKRSKc35EG32
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user remote_monitoring_user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">remote_monitoring_user&lt;/span> &lt;span class="o">=&lt;/span> o1pi2yTDnhrKBGcS6xqP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Changed password &lt;span class="k">for&lt;/span> user elastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD &lt;span class="nv">elastic&lt;/span> &lt;span class="o">=&lt;/span> RO11xymgXTCD16ivTP33
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在浏览器中访问http://192.168.50.10:9200/ ，测试并确认上面的 elastic 用户的密码。&lt;/p>
&lt;h2 id="安装和配置-kibana-服务器">安装和配置 Kibana 服务器&lt;/h2>
&lt;p>执行 Kibana 安装命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /vagrant/rpm/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh kibana-7.6.1-x86_64.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看并学习 Kibana 默认配置文件&lt;/p>
&lt;p>&lt;code>sudo cat /etc/kibana/kibana.yml&lt;/code>&lt;/p>
&lt;p>更新默认配置文件，准备好 elastic 用户的密码，将其更新到 Kibana 配置文件中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cp /vagrant/kibana/kibna.yml /etc/kibana/kibana.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start kibana.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status kibana.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看重启的服务是否工作正常。&lt;/p>
&lt;p>&lt;code>sudo tail -f /var/log/messages&lt;/code>&lt;/p>
&lt;p>在浏览器里测试登录 Kibana http://192.168.50.10:5601 ，使用 elastic 的用户名和密码。&lt;/p>
&lt;h2 id="安装-filebeat-并配置-2-个模块">安装 filebeat 并配置 2 个模块&lt;/h2>
&lt;p>执行 Filebeat 安装包。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /vagrant/rpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rpm -ivh ./filebeat-7.6.1-x86_64.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看默认的 Filebeat 配置文件。&lt;/p>
&lt;p>&lt;code>sudo cat /etc/filebeat/filebeat.yml&lt;/code>&lt;/p>
&lt;p>更新默认配置文件，准备好 elastic 用户的密码，将其更新到 Kibana 配置文件中。&lt;/p>
&lt;p>&lt;code>sudo cp /vagrant/filebeat/filebeat.yml /etc/filebeat/filebeat.yml&lt;/code>&lt;/p>
&lt;p>查看 Filebeat 的默认日志监控模块。&lt;/p>
&lt;p>&lt;code>sudo filebeat modules list&lt;/code>&lt;/p>
&lt;p>启用 Filebeat 的 System 和 Auditd 模块，监控系统日志和基础的操作系统安全信息。&lt;/p>
&lt;p>&lt;code>sudo filebeat modules enable system auditd&lt;/code>&lt;/p>
&lt;p>查看 Filebeat 监控模块的配置文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo cd /etc/filebeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ls -l modules.d/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建议查看以上启用的 System 和 Auditd 模块的配置文件。&lt;/p>
&lt;p>运行 Filebeat 在后台的初始化命令，在后台创建 Filebeat 所需要的索引 filebeat-* ，并导入所有模块相关的 Dashboard 等 Kibana 日志可视化分析工具。&lt;/p>
&lt;p>&lt;code>sudo filebeat setup&lt;/code>&lt;/p>
&lt;p>在浏览器中登录 http://192.168.50.10:5601 Kibana 后，点击左侧的 Dashboard 图标，查看所有刚才导入的内容，搜索并打开 System 关键字的 Dasboard。&lt;/p>
&lt;p>在启动日志收集代理 Filebeat 服务前，运行一下命令测试 Filebeat 配置文件的正确性。&lt;/p>
&lt;p>&lt;code>sudo filebeat test config&lt;/code>&lt;/p>
&lt;p>启动 Filebeat 服务，开始对这台操作系统的日志进行监控。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl start filebeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status filebeat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="建议的测试">建议的测试&lt;/h2>
&lt;ol>
&lt;li>点击左侧的 Dicovery 图标，选中 Filebeat-* 索引，打开并一条日志数据，并查看所有字段；用 KQL 进行全文搜索。&lt;/li>
&lt;li>点击左侧的 Dashboard 图标，搜索 system 关键字，查看一个仪表板的日志展示；搜索 audit 关键字，并查打开一个仪表板，在命令行中尝试 ssh localhost，多尝试几次，刷新 Audit 仪表板，观察数据是否发生了变化。&lt;/li>
&lt;li>点击左侧的 Logs 图标，用鼠标上下滚动日志信息流， 点击右上角的开始 Live Stream 查看模式，观察日志信息流的自动滚动效果，在 KQL 搜素框中输入 tags : demo-service ，体验它的搜索建议功能，在 Highlight 中输入 http://192.168.50.10:5601/app/infra ，观察日志信息流显示的变化。&lt;/li>
&lt;li>点击左侧的 SIEM 图标，看看这里都有什么内容。&lt;/li>
&lt;/ol>
&lt;h2 id="后续">后续&lt;/h2>
&lt;ul>
&lt;li>用启用 Filebeat 的 Elasticsearch, Kibana 日志监控模块&lt;/li>
&lt;li>安装 Apache, MySQL 等软件，并开启 Filebeat 的日志监控模块&lt;/li>
&lt;/ul>
&lt;p>参考文档：
&lt;a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html" target="_blank" rel="noopener"
>https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html&lt;/a>&lt;/p></description></item><item><title>SLA、SLO 和 SLI 还是傻傻分不清么？</title><link>https://martinliu.cn/blog/slaslo-%E5%92%8C-sli-%E8%BF%98%E6%98%AF%E5%82%BB%E5%82%BB%E5%88%86%E4%B8%8D%E6%B8%85%E4%B9%88/</link><pubDate>Thu, 05 Mar 2020 17:37:29 +1100</pubDate><guid>https://martinliu.cn/blog/slaslo-%E5%92%8C-sli-%E8%BF%98%E6%98%AF%E5%82%BB%E5%82%BB%E5%88%86%E4%B8%8D%E6%B8%85%E4%B9%88/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-6.jpg" alt="Featured image of post SLA、SLO 和 SLI 还是傻傻分不清么？" />&lt;p>SLA、SLI 和 SLO 是 SRE 工程实践里非常核心的概念，但是大家在同时提到这些概念的时候，经常容易混淆。&lt;/p>
&lt;p>长篇大论的文章反而容易使人更加疑惑，还不如画一张示意图说明一下，帮助大家一次性彻底梳理清楚这些不可以含糊不清的核心概念。说明一下，下图假设所讨论的 SLA 个数为 1，使用了软件工程中 ER 图的表达方式，但也有所变化。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/sla-sli-slo.jpeg"
loading="lazy"
alt="SLA、SLO、SLI"
>&lt;/p>
&lt;p>一图讲清 SLA、SLO、SLI&lt;/p>
&lt;p>本文不讲 why，只是帮助大家梳理清楚这些概念在以上人机系统中的相互关系。虽然不想做名词解释。但是为了方便起见，整理一个术语清单。&lt;/p>
&lt;ul>
&lt;li>SLA = Service Level Agreement = 服务质量/水平协议&lt;/li>
&lt;li>SLO = Service Level Objective = 服务质量/水平目标&lt;/li>
&lt;li>SLI = Services Level Indicator = 服务质量/水平指标&lt;/li>
&lt;/ul>
&lt;p>下面用人、事、物的逻辑进行阐释。&lt;/p>
&lt;h2 id="人和事">人和事&lt;/h2>
&lt;p>用从上到下，从左到右的顺序。&lt;/p>
&lt;p>客户 - 每 1 个客户在使用产品服务时，都显性或隐性的基于某 1 个 SLA，SLA 和客户之间是一种 1 对 1 的文档关系，这份协议文档就显性或者隐性的存在于系统中。客户使用 1 种，或者 n 种连接方式访问产品服务的 1 个或者 n 个应用系统。&lt;/p>
&lt;p>销售 - SLA 本身是所销售产品服务的一部分，它规定了承诺给客户的产品功用和质量。基于 SLA，客户可以选择用付费或者免费的方式使用产品。1 个/份 SLA 的销售工作可以由 1 到 n 位销售完成。销售和客户都幻想着几乎完美的 SLA，这样代表企业利益的销售，以及产品的客户就都可以达到双赢的局面，皆大欢喜。&lt;/p>
&lt;p>产品 - 通过与销售的间接互动，或者直接的客户调研，产品经理能够确定应用系统所应该具有的功能和发展方向。&lt;/p>
&lt;p>SRE - SRE 和产品共同制定了每个 SLA 相关应用系统的 SLO，SLO 定量的定义了每 1 个应用系统所应该具备的服务质量，1 个应用系统的 SLO 被该产品服务的 SLO 文档定义，在该文档中 SLO 被映射到 1 个或者 n 个 SLI，每个 SLI 都需要用监控工具持续采集数据，通常它们的数值单位各不相同。所有 SLO 都是用百分比数值形式表达的，例如：99.99% 的成功率，90％ 的请求延迟 &amp;lt; 400 毫秒等。SRE 和产品经理/专家还应该共同关注运行应用系统的基础设施层，确保基础设施的可用性和容量足以满足目标数量的用户访问，而且还要考虑和设计底层资源的容灾和跨区多活等复杂场景。&lt;/p>
&lt;p>开发/运维 - 重要但暂不做讨论。&lt;/p>
&lt;h2 id="事">事&lt;/h2>
&lt;p>用从下往上的顺序。&lt;/p>
&lt;p>IaaS 云服务 - 也可以是其它类型的可以供应用系统运行的环境。这里存在着 1 到 n 种子服务。它和上层的 n 个应用系统通常是 n 对 n 的关系。&lt;/p>
&lt;p>应用系统 - 1 个到 n 个应用系统构成了 1 个产品服务（内含SLA），在和客户的互动中实现着产品服务的业务价值。&lt;/p>
&lt;p>文档 - 以网页或者纸张的形式向用户描述了某个应用服务所提供的服务内容和质量信息。向用户提供这个文档并不是强制、显性和必须的。&lt;/p>
&lt;h2 id="结束">结束&lt;/h2>
&lt;p>请根据以上解释，结合你的实际工作场景，想象并描绘一下 SLA 、SLO 和 SLI 在你周围的人事物中关系网。在SRE 的工作实践中，定义 SLO，并梳理 SLI，将量化以后的目标和说明文档化，并让各个干系人认同并签署，是一项基础的起步工作。&lt;/p>
&lt;p>本文参考了 Google 出品的两本SRE 书籍，这两本书的英文版在 Google 的官网可以免费在线阅读。SRE Workbook 的简体中文版会在2020 年中出版。&lt;/p></description></item><item><title>怎样使用两个DevOps研究模型？</title><link>https://martinliu.cn/blog/%E6%80%8E%E6%A0%B7%E4%BD%BF%E7%94%A8%E4%B8%A4%E4%B8%AAdevops%E7%A0%94%E7%A9%B6%E6%A8%A1%E5%9E%8B/</link><pubDate>Sun, 01 Sep 2019 17:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E6%80%8E%E6%A0%B7%E4%BD%BF%E7%94%A8%E4%B8%A4%E4%B8%AAdevops%E7%A0%94%E7%A9%B6%E6%A8%A1%E5%9E%8B/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/1-jafadjf.jpg" alt="Featured image of post 怎样使用两个DevOps研究模型？" />&lt;p>本文要覆盖的章节是《 How to use the research models》 这一章。双模型在今年的报告中首次出现了，它们是效能模型和生产力模型。为什么会存在两个模型？有什么区别？有什么相似之处？最重要的问题是，你怎么用它们来指导你的DevOps工作？&lt;/p>
&lt;p>本文的阅读建议：&lt;/p>
&lt;ul>
&lt;li>下载我整理的最新版的《DevOps能力成长模型》，含双模型分解图。&lt;/li>
&lt;li>阅读和参考前5年的DevOps状态调查报告，了解今年这份报告的历史和发展历程。以前的文章中有下载链接/二维码。&lt;/li>
&lt;li>阅读2019年的调查问卷的中文版，感谢中国DevOps社区翻译团队对英文原版问卷的翻译工作，如果你都不知道这些调查结果是通过什么问卷调查得出的，那真的是很可惜。如果你想用这套问卷工具在企业内部做调研，请使用前文中的免费调查服务申请流程。样例问卷的访问地址：https://www.wjx.cn/jq/43837840.aspx&lt;/li>
&lt;li>在Google的网站上做极简版DevOps行业基础测试，它是6年行业调查结果数据库的首次对外开放。&lt;/li>
&lt;/ul>
&lt;h2 id="模型是怎么诞生的">模型是怎么诞生的？&lt;/h2>
&lt;p>首先，我们需要了解一下这份持续了6年的报告是谁主导并开发的？这是一个怎样的团队？从DORA公司网站的这个页面上，可以看到团队人员介绍。https://devops-research.com/about.html 如下所示。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567336555/1sajldfkj.png"
loading="lazy"
>&lt;/p>
&lt;p>不做其它任何解读和评论，只想请大家关注一下分析报告的主持者的title : Dr Nicole Forsgren, CEO and Chief Scientist ; 翻译一下 Nicole Forsgren 博士，CEO和首席科学家。她是一个长期的IT行业从业人员，最早专注于DevOps的行业调研员。她持有管理信息系统的博士学位和会计硕士学位。从社交媒体上可以看出她和行业大咖Jez Humber和Gene Kim都是好朋友。&lt;/p>
&lt;p>其次，如果你也回顾了所有往届的DevOps状态调查报告，我们应该能体会到这场历时6年行业调研的基本逻辑和脉络。在第一年就已经提出了四大黄金度量指标，并且以此为主线；每年反复验证状态，以及其他相关影响因素。使用了&lt;strong>穷举&lt;/strong>的逻辑，每年根据行业的发展动态，根据和其它业内大咖的讨论，适当的加入新的调查点。当然每个调查的能力点也是需要每年反复确认和验证，调查点之间的逻辑关系也越来越明显，经过二次研究之后就形成了DevOps能力成长模型。&lt;/p>
&lt;p>最后，DevOps能力成长模型诞生于《Accelerate:The Science of Lean Software and DevOps: Building and Scaling High Performing Technology Organizations 》这本书。
&lt;a class="link" href="https://www.amazon.com/Accelerate-Software-Performing-Technology-Organizations/dp/1942788339" target="_blank" rel="noopener"
>https://www.amazon.com/Accelerate-Software-Performing-Technology-Organizations/dp/1942788339&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1530036828/Accelerate.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在这本书里分模块（局部）的介绍了DevOps能力模型的影响逻辑关系，从转型型领导力一直推导出模型的最右侧：组织效能和非商业效能。这个模型应该就是历届DevOps状态调查研究背后的理论基础，当然它也应该是慢慢发展和完善出来的，起码数字转型这个话题是2018年才出现的热点。模型的数值计算算法，见近两年报告的附录部分。这个模型在本书中是从各个不同的局部关系逐渐介绍的。如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567337105/3-jsfjaksjf333.png"
loading="lazy"
>&lt;/p>
&lt;p>Accelerate全书的逻辑不仅在于介绍各种DevOp实践、技术、文化、领导力等等相关因素有哪些，更重要的是揭示出这些影响因素（能力点）之间的关联关系。在书的最后展示了DevOps能力成长模型的全图，如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567337168/4-ruwiur848.png"
loading="lazy"
>&lt;/p>
&lt;p>Accelerate这本书也提供了这幅图的电子版下载链接：https://devops-research.com/assets/transformation_practices.pdf&lt;/p>
&lt;p>这是一份非常棒的学习资料，如果你还没有买本书的话，也可以下载学习这份精华资料。这份文档的总标题是：”调研总体策划“，除了模型之外该文档还提供了一张全面复杂的表格，表格的名字：”高效能团队，管理、领导力行为和实践调查表，由Steve Bell，Karen Whitley Bell“；如果你想对自己的组织进行全面的调研的话，这也是一份优秀的调研方案。调研的矩阵如下：&lt;/p>
&lt;ul>
&lt;li>纵向：文化、组织结构、直接学习和对齐价值、部署策略、通过分析提高流动性和训练有素的问题解决、工作方式节奏化&amp;amp;日常化&lt;/li>
&lt;li>横向：团队实践、管理实践、领导力实践。&lt;/li>
&lt;/ul>
&lt;p>我很有幸2017年在北京DevOpsDays大会上参加Jez先生的培训，并获赠了Jez先生的签名版《Accelerate》纸版书，其实在这以前我已经购买了Kindle的电子版和Audible的有声书版。我反复研读了这本书的各种版本，再次强烈推荐所有DevOps相关的管理者一定要学习这本书。&lt;/p>
&lt;p>以书中的模型为基础，2018年的DevOps状态报告里以又进一步做了各种扩展，如果你读过去年的报告，你可以看到如下的各种局部的扩展。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567337168/7asdfweruui238.png"
loading="lazy"
>&lt;/p>
&lt;p>大家注意看2018年的这个局部模型图的标题”精益和敏捷实践“，这里也包含敏捷开发实践。我在反复琢磨这个模型之后，用Twitter私信问过Nicole博士。我问他为何没有专项调查过敏捷开发实践？模型上为何不给敏捷开发一个位置？她的回复是，我们之前已经调研过了，而且模型上也提到了。可能在全球的软件开发工程水平看，有可能Nicole博士团队认为敏捷开发应该是比较基础的软件开发实践，据我个人了解国外高水平公司要么都已经规范照做了，要么也有像Google这样的高水平公司确实也不显性的宣传自己是敏捷开发，甚至吐槽敏捷的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567337168/8jfasjflsdf.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567337168/9ruwueriowur.png"
loading="lazy"
>&lt;/p>
&lt;p>2018年对模型的扩展力度还是很大的，提出了很多新的调查项；为了能看到方便的看到一个DevOps能力模型的全景视图，我使用OmniGraffle软件基于《Accelerate》书中的模型，扩充绘制了如下的模型图：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567338260/12-23ru83.png"
loading="lazy"
>&lt;/p>
&lt;p>这幅图向我们完整的揭示了到2018年以来的所有DevOps调研点，有些点是经过多年反复验证的，有些是2018年新引入的。这幅图花了我几天时间，在这个过程中也反复的推敲了其中的逻辑关系。这幅图仅代表我个人的观点，不代表DORA和《Accelerate》书籍的任何观点；需要声明的是：我绘制的DevOps能力成长模型并非我的个人著作，引用了DORA和《Accelerate》的著作，但我力求精确无误的表达整个模型。再次声明，这个模型图非官方出品，是我的个人研究。&lt;/p>
&lt;p>研究模型的研究逻辑是穷举法，是从左到右的推导和影响关系。最新发布的2019年DevOps状态调查报告显示了新的变化，这触发了对以上模型的更新。本文将提供最新版高清大图的下载。&lt;/p>
&lt;h2 id="为何两个模型">为何两个模型？&lt;/h2>
&lt;p>为何2019年会分化出两个模型，简单的讲：穷举的范围越来越大了，生产力作为一个新的全局共享目标进入了调查问卷的范围。我们之前社区的小伙伴已经将2019年的近100道调查题问题翻译成中文了，敬请参阅参考DevOps状态调研问卷。在翻译完那些题目后，我并没有意识到今年可能会新增出这样一个全局共享目标的调研对象，真的以为：这个效能模型（组织效能和非商业效能）会一条道走到最后。&lt;/p>
&lt;h3 id="效能模型">效能模型&lt;/h3>
&lt;p>对效能模型的更新变化如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567339754/2019-dora-perf.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="生产力模型">生产力模型&lt;/h3>
&lt;p>新增的生产力模型令我感到相当意外，它的结构如下所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567339754/2019-dora-prod.jpg"
loading="lazy"
>&lt;/p>
&lt;p>总之，还无法预测明年的调研范围会有怎样的更新。可以确认的是行业DevOps的能力模型是在动态变化的，想跟上世界级的水平还必须不断刷新自己的能力组合。否则你的同行的对手可能早就一骑绝尘而去了。DevOps能力发展不是一个有限游戏（例如刷黄金5级），是每年都和整个行业一起发展的无限游戏。&lt;/p>
&lt;h2 id="如何使用模型">如何使用模型？&lt;/h2>
&lt;p>2019年的报告中给出了模型的使用和阅读方法的官方解释，见2019年报告英文原版的27页。本文对其的解读如下。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567379589/11-3kgsfdgjds.png"
loading="lazy"
>&lt;/p>
&lt;h3 id="使用模型指导转型">使用模型指导转型&lt;/h3>
&lt;p>识别你将要改善的能力点。模型中的每个被箭头所指向的方块被称之为构造，构造有单级构造，也有二级构造（如精益产品开发、软件开发实践），历年来的报告中已经为你展示和所有DevOps能力点，你现在需要做的是从中选择出你需要改进的候选能力点。&lt;/p>
&lt;p>开展加速度的组织转型需要一个前提条件，一个扎实的基础作为起点。报告中并没有解释这个条件，你需要自己理解。聚焦在转型所急需的那些候选能力点上，在多个候选能力点里选择出亟需改进的”约束点“「此处参考TOC限制理论，相关书籍《目标》」。想想：那些能力的不足造成了最大的延期？「记住这里说的是最大值，这需要一个量化的跨组织的分析调研」什么最让你头痛？什么是最大的问题？经过以上的引导问题的提示，从清单中选出3~5个候选优化发展的能力项，安排出专项人力和财力资源，先重拳出击改善第一波能力点。不要担心你还有其他的很多问题；现阶段不妨聚焦在那个最大的问题上；这样你才能将瓶颈（约束点）各个击破，发掘这个其他的协同功效，避免不必要的工作。这个部分基本上是经典TOC理论的应用，关于这个理论在DevOps实施中的详细使用方法描述，请参考《DevOps实践指南》的第二章 2.5 持续识别和改善约束点。&lt;/p>
&lt;p>以上DevOps转型工作还有其他的产出。那些追求SDO组织效能的组织还会得到这些收益，降低职业透支（996icu）和部署的痛，提高安全水平。附加的好处还包括，它能提高生产力，提高了生产力就可以获得工作生活平衡且降低职业透支。&lt;/p>
&lt;h3 id="怎样阅读模型">怎样阅读模型？&lt;/h3>
&lt;p>报告使用了结构方程模型 （Structural equation modeling &lt;a class="link" href="https://en.wikipedia.org/wiki/Structural_equation_modeling" target="_blank" rel="noopener"
>https://en.wikipedia.org/wiki/Structural_equation_modeling&lt;/a>） ，来作为一种预测模型，用它测试各个构造之间的关系。模型中的每个方块就是一个调研度量的点，就是一个构造。剪头表示了构造之间的关系。一个大的包含多个构造的方框称之为二级构造。淡蓝色的构造表示一个控制变量，它用点线连接。&lt;/p>
&lt;p>在报告原文中，将第31页和57页的模型称之为全模型，见报告的27页的原文：”See pages 31 and 57 for full models.“；而在我的系列文章中，则将下图称之为全模型。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567339751/2019-dora-DevOps-all.jpg"
loading="lazy"
>&lt;/p>
&lt;p>以上阅读方法同样的适用于上图。总之请仔细理解了左下角的图例，正确的阅读和理解模型。不管你是将DevOps实践的实施视为组织转型也好，把它当做项目做也罢；当你识别你的目标的时候，都可以参考这个模型。&lt;/p>
&lt;h3 id="两个研究模型的重叠">两个研究模型的重叠&lt;/h3>
&lt;p>由于SDO效能和生产力在很多方面本来就是相关的。它们的产出都是使用各种优秀的方法创造和交付各种技术，从而为组织和个人交付价值。那些优化软件交付的支持工作也将使生产力受益，这也是理所当然的。虽然他们的某些诱因是相同的，它们看起来很相似，但是他们度量的产出确实不同的，报告团队也是组织了独立的分析调研。总之，SDO效能和生产力是两个不同的调研模型。&lt;/p>
&lt;h3 id="重叠模型的妙用">重叠模型的妙用&lt;/h3>
&lt;p>当你在应用SDO效能模型的时候，可以在消减职业透支方面做出聪明点的投资，更高的生产力也同样能降低职业透支。因此这个应该是向各种组织和技术团队大力提倡的做法，由于工作需求是持续增长的。工作是没完没了的，这个项目完了，还有下一个项目。而我们需要注意，我们也要关注生活和工作的平衡，而降低职业透支。&lt;/p>
&lt;p>心理安全性文化也能对SDO效能、组织效能和生产力作出贡献。研究结果表明了创造和发展健康的文化对组织和个人都有好处。&lt;/p>
&lt;p>投资在代码可维护性、松耦合架构和监控方面，也能同时帮助SDO效能、生产力（它们是通过消减技术债间接的影响到生产力的）。好的工具和系统也非常值得关注。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>通过本文我相信你已经可以正确的理解2019年状态报告中的模型了，模型包括SDO效能模型和生产力模型。包括我绘制的全模型。希望DORA官方能后续推出官方版模型全图。&lt;/p>
&lt;blockquote>
&lt;p>模型的意义在于：DevOps能力点是整个软件开发和交付行业都应该关注的，在投资DevOps实践的时候，需要能聚焦到组织各自不同的急需改进的能力约束点组合上。通过模型最右侧的组织级统一共享目标来度量和验证DevOps的实践是否实际有效。&lt;/p>
&lt;/blockquote>
&lt;p>TOC是一个值得关注的问题解决套路，参考其它的相关文章和其它各种书籍。&lt;/p>
&lt;p>请关注DevOps教练的公众号，在后台输入2019，下载本文中各种模型的高清大图。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566516259/DevOps-Coach-qrcode_for_gh_bce38ef330e5_430.jpg"
loading="lazy"
>&lt;/p>
&lt;hr></description></item><item><title>如何做横向行业的DevOps表现基准测试？</title><link>https://martinliu.cn/blog/%E5%A6%82%E4%BD%95%E5%81%9A%E6%A8%AA%E5%90%91%E8%A1%8C%E4%B8%9A%E7%9A%84devops%E8%A1%A8%E7%8E%B0%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</link><pubDate>Wed, 28 Aug 2019 07:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%A6%82%E4%BD%95%E5%81%9A%E6%A8%AA%E5%90%91%E8%A1%8C%E4%B8%9A%E7%9A%84devops%E8%A1%A8%E7%8E%B0%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/1-jafadjf.jpg" alt="Featured image of post 如何做横向行业的DevOps表现基准测试？" />&lt;p>长期关注我的blog和微信公众号（DevOps教练）的朋友可以发现，我今年从这个调查问卷开始，陆续发布了一些列文章。如果给这些文章一个文集标题的话，那么应该是：死磕2019年加速度全球DevOps状态调查报告系列。 为了帮助大家充分利用这份优秀的行业报告，我会用一些列文章，分章节的解读这份长达80多页的报告。上一篇文章如果你已经解读了该报告的核心重要发现和看点。本文要覆盖的章节是 How do we compare 这一章。&lt;/p>
&lt;p>本文的阅读建议：&lt;/p>
&lt;ul>
&lt;li>先阅读和参考前5年的DevOps状态调查报告，了解今年这份报告的历史和发展历程。以前的文章中有下载链接/二维码。&lt;/li>
&lt;li>阅读2019年的调查问卷的中文版，感谢中国DevOps社区翻译团队对英文原版问卷的翻译工作，如果你都不知道这些调查结果是通过什么问卷调查得出的，那真的是很可惜。如果你想用这套问卷工具在企业内部做调研，请使用前文中的免费调查服务申请流程。样例问卷的访问地址：https://www.wjx.cn/jq/43837840.aspx&lt;/li>
&lt;li>在Google的网站上做极简版DevOps行业基础测试，它是6年行业调查结果数据库的首次对外开放。&lt;/li>
&lt;/ul>
&lt;h2 id="why-devops">WHY DEVOPS？&lt;/h2>
&lt;p>这是一个可以持续反复问自己的问题，首先让我们澄清一件事情：为什么要做DevOps？&lt;/p>
&lt;p>是否是为了提高研发效能？是否是为了提高生产力？是否是为了提高效率？这些答案可能都对，也可都不对。对于一个组织而言：如果IT对它的使命和目标至关重要的情况下，组织对IT会产生强依赖关系，DevOps才对该组织才有意义。历年来的DevOps状态调查告诉我们：DevOps对于那些以IT为命脉的组织而言直观重要，对所有从事软件交付的组织广泛有效。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/12-23ru83.png"
loading="lazy"
>&lt;/p>
&lt;p>从DevOps能力成长模型中可以看出，图中的诸多能力项都正向贡献/预测到最右侧的两个组织级别目标，他们是：组织效能和非商业效能（商业和非商业目标），它们是：&lt;/p>
&lt;ul>
&lt;li>盈利能力 （商业）&lt;/li>
&lt;li>生产力&lt;/li>
&lt;li>市场份额 （商业）&lt;/li>
&lt;li>客户数量 （商业）&lt;/li>
&lt;li>产品或服务的数量 （商业）&lt;/li>
&lt;li>运营效率&lt;/li>
&lt;li>客户满意度 （商业）&lt;/li>
&lt;li>提供的产品或服务的质量 （商业）&lt;/li>
&lt;li>实现组织或使命目标&lt;/li>
&lt;/ul>
&lt;p>如果你的某项/某几项DevOps实践能够直接贡献到以上的商业目标，或者说能持续的创造客户价值，即商业价值；那么你的DevOps就是成功的。反之，如果你仅仅期望研发效能、生产力、效率能够就等同于创造出了很多的客户价值，那是一种幻觉；这就像是：你经过了很多预赛和体能的准备，而在冠军争夺赛中，你依然名落孙山，当你的组织的绩效远远低于预期的商业目标的时候，你的各种XXX效率都是无用的。&lt;/p>
&lt;h2 id="四大黄金度量指标">四大黄金度量指标&lt;/h2>
&lt;p>6年来的DevOps状态调查报告（我只关注DORA主导和执行的这个）已经在用量化的方式，帮助我们作出了精英表现者的画像，当然还有其它的落后者。可以明确的一点是：强者从四个维度上同时都表现强劲。（去年已经打破了常见的一个误区：过度的保守主义导致在组织四个指标之中做折中选择，常见的是牺牲吞吐量指标，确保稳定性，可是后果往往是相反的。）&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/10-2373.png"
loading="lazy"
>&lt;/p>
&lt;p>先来回顾和梳理所谓的四大黄金度量指标的分类：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>吞吐量&amp;ndash;部署频率&lt;/strong>：对于您工作的主要应用程序或服务，您的组织在生产环境进行代码部署或向最终用户做发布的频率。调查这个指标的问题见2019年加速度DevOps状态调查问卷中的第二部分的第二题。&lt;/li>
&lt;li>&lt;strong>吞吐量&amp;ndash;前置时间&lt;/strong>：对于您工作的主要应用程序或服务，从代码提交到在生产中成功运行的过程需要的时间。调查这个指标的问题见2019年加速度DevOps状态调查问卷中的第二部分的第一题。&lt;/li>
&lt;li>&lt;strong>稳定性&amp;ndash;服务恢复时间&lt;/strong>：对于您工作的主要应用程序或服务，当服务中断或出现影响用户Bug时（如：计划外中断、服务受损），恢复服务通常需要的时间。调查这个指标的问题见2019年加速度DevOps状态调查问卷中的第二部分的第四题。&lt;/li>
&lt;li>&lt;strong>稳定性&amp;ndash;变更失败率&lt;/strong>：对于您所工作的主要应用程序或服务，对于生产变更，或向最终用户发版的变更，百分之多少会导致服务质量下降（如：服务受损或服务中断），并需要进行后续的修复工作（需要热补丁、回滚，前向修复，打补丁修复）。调查这个指标的问题见2019年加速度DevOps状态调查问卷中的第二部分的第五题。&lt;/li>
&lt;/ul>
&lt;p>上面的四个指标是DevOps状态调查报告使用cluster算法做受众分类的主要依据，这个类聚分析的结果就是那张四大DevOps等级的泡泡图。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567001372/11-w97459438isuuf.png"
loading="lazy"
>&lt;/p>
&lt;p>在这个泡泡图中，我们可以看到有多少比例的受访者处于精英、高效、中等和低效的阵营。复述一下今年的一个重大发现：精英表现者已经从去年的高效能表现者集团中脱颖而出，他们在指标的绝对值和总体数量上都增长迅敏，增长率高达将近3倍。&lt;em>【DevOps教练点评：回顾一下这份报告的标题中加入的加速度的关键字，一旦某个组织的实施方法得当，一个持续优化的组织的整体效能就可能做上火箭，加速度的飞离地球。而加速度不足的企业则处于持续跌回地面的窘境。】&lt;/em>&lt;/p>
&lt;p>这四大黄金度量指标的采集方法就是调查问卷中那些四个问题。对所有实践DevOps的组织而言，我们需要的是持续实施和优化追踪这些度量指标的方法和系统，确保能实时查看这四个指标的状态是最完美的。可是目前几乎还没有什么企业能够做到，手工分别统计上报，定期公布到全体IT部门也是非常可取的做法。总之，没有度量就不存在管理，就无从系统性的改进。&lt;/p>
&lt;h2 id="我在行业里的表现如何">我在行业里的表现如何？&lt;/h2>
&lt;p>这是我写作本文想要回答的核心问题。如果你能够度量自己的四个黄金指标了，也能够随时拿出一组确切的数据，我们就能做行业基准测试比较了。&lt;/p>
&lt;p>这可能是Google收编DORA团队所买到的最有价值的一部分资产，历年来的DevOps调查问卷参与者的问卷答案数据库。Google今年将这个数据库向公众开放了，网址在 &lt;a class="link" href="https://beta.devops-research.com/performance.html" target="_blank" rel="noopener"
>https://beta.devops-research.com/performance.html&lt;/a> (这个网址应该不用科学上网，会出现证书错误提示，请忽略继续访问该页面)。在你回答了下面的五个问题后，就可以获得一份自己的行业基准测试报告。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/2-faldjfald.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/3-adfjafdasldf.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/4-9578921374.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/5-faljdfl2e44.png"
loading="lazy"
>&lt;/p>
&lt;p>最后一个问题是，从13个行业中选择出一个最合适的所在行业。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/6-ajflasjfd22.png"
loading="lazy"
>&lt;/p>
&lt;p>下图是你在整个所有行业里的横向对比。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/7-fjlasf.png"
loading="lazy"
>&lt;/p>
&lt;p>下图是你在所在行业里的横向对比。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/8-ajflasjf2.png"
loading="lazy"
>&lt;/p>
&lt;p>下图是四个黄金指标在四个表现级别/集团上的度量；表明你每个指标处于哪个等级。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/9-asjfl23uu.png"
loading="lazy"
>&lt;/p>
&lt;p>经过以上的最简版DevOps表现状态基准测试以后，你就看到了你在所有行业中和所在行业中的横向比较。当然，我们也能预测一下自己处于那个阵营和等级。然而，这并不是你的DevOps旅程的剧终情节。&lt;/p>
&lt;p>所有DevOps的实践者一旦上路以后，都是一条不归路的感觉，我们可以定期的关注我们的基准测试结果，并观察自己在动态变化的行业基线中的位置，而更重要的是：找到每个现阶段的改进空间，并且持续突破自己DevOps的能力瓶颈和极限。持续的无限制的加速度发展所有DevOps能力点才是这个DevOps旅程的终极意义。&lt;/p>
&lt;h2 id="关于服务运维效能">关于服务运维效能&lt;/h2>
&lt;p>服务效能指标是在去年的效能报告中新引进的，而在去年和今年的调查问卷和结果报告中并没有直接的关于这项指标的采集数据和结果。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1567000726/10-2373.png"
loading="lazy"
>&lt;/p>
&lt;p>从上图中我们可以直接的理解一下，左侧的四大黄金指标都关乎于软件开发部门，而这个指标关乎于服务运维部门。去年并没有给出关于可用性指标的度量方法，今年也没有在调查问卷中做直接/显性的问题设置。只是在今年2019年的报告中做了进一步的解释，说这个可用性指标的实施方法论是SRE套路。我正在翻译SRE Workbook，这本书比起之前翻译的DevOps Handbook，更具有实操性。我们拭目以待，明年的状态调查问卷是如何对可用性设问和调查分析的。关于SRE的基础概念和实施方法，心急的朋友不妨参加中国DevOps社区今年10月在杭州举办的年度大会，我有一个关于SRE的主题分享，让我们一起讨论SRE的落地套路，让用SRE套路使我们的DevOps故事闭环。&lt;/p>
&lt;p>总之我们实践DevOps的时候要全局的关注“软件交付和运维效能”，简称SDO效能（software delivery and operational performance）；有O了才完整的闭环了。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>本文写道这里，我认为你可以无障碍的阅读2019年加速度全球DevOps状态调查报告到第25页了。我们总结一下，你应该能理解吞吐量和稳定性的四大黄金度量指标的定义；持续度量和关注这些指标的正确方法；使用Google所提供的极简版度量工具，找到自己在行业中的定位和所处的效能级别。关注SDO效能的完整性，尝试了解和实践SRE实践，让你的DevOps体验闭环和完整起来。下一期死磕2019年加速度全球DevOps状态调查报告系列将为你呈现更新版本的DevOps能力成长模型，进一步讲解如何应用今年分化出来的两个研究模型：SDO和组织效能模型与生产力模型。&lt;/p>
&lt;hr></description></item><item><title>2019年加速度DevOps状态调查报告-导读</title><link>https://martinliu.cn/blog/2019%E5%B9%B4%E5%8A%A0%E9%80%9F%E5%BA%A6devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A-%E5%AF%BC%E8%AF%BB/</link><pubDate>Thu, 22 Aug 2019 07:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/2019%E5%B9%B4%E5%8A%A0%E9%80%9F%E5%BA%A6devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A-%E5%AF%BC%E8%AF%BB/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/abstract-4.jpg" alt="Featured image of post 2019年加速度DevOps状态调查报告-导读" />&lt;p>凭借六年多的来自全球31,000多名专业人士的数据的研究，2019年加速发展状态报告是同类研究中规模最大、持续时间最长的研究。2019年加速度DevOps状态调查首发，首发的位置在Google Cloud网站上的Blog栏目，发布于产品新闻分类下。&lt;/p>
&lt;blockquote>
&lt;ul>
&lt;li>文章使用的主标签 DevOps 、SRE。&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;ul>
&lt;li>文章地址：https://cloud.google.com/blog/products/devops-sre/the-2019-accelerate-state-of-devops-elite-performance-productivity-and-scaling&lt;/li>
&lt;/ul>
&lt;p>下文为对Google文章原文的翻译和整理。并且加入了我本人的各种判断和见解。&lt;/p>
&lt;p>关于今年的DevOps状态调查报告有什么更新和变化？报告文章中给我们了一句话的概要介绍：今年会对部署工具链、云计算、灾难恢复和工作方式等主题进行深度调查。更详细的情况，详细的参过问卷调查的您自有评判。&lt;/p>
&lt;p>‘DevOps之研究和评估’（DORA）是通过数据驱动的洞察力，帮助组织实现DevOps和高效能组织的先驱，而Google Cloud很高兴地宣布推出2019年加速DevOps报告 。（前期文章介绍过DORA加入Google Cloud的细节） 该报告提供了DevOps行业的全景视图，为各种规模和所有行业的组织提供可操作的指导，从而提高他们的软件交付效能，最终使之成为精英DevOps实践者。&lt;/p>
&lt;h2 id="2019年的新洞见">2019年的新洞见&lt;/h2>
&lt;p>我们看到：有持续的证据表明了软件的速度、稳定性和可用性有助于提高组织绩效，今年我们能够发现一些关于推动DevOps高绩效表现，以及实践和功能的新洞见。 部分如下所示：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>DevOps已经‘跨越了鸿沟’&lt;/strong>：各个行业的组织继续地提高着他们的DevOps专业知识，特别是在表现最高那部分人群中。 精英表现者的比例几乎提高了两倍，目前他们占所有组织的&lt;em>20％。 这也得到了其他行业分析师报告的证实。&lt;/em>【教练解读：精英表现者实现了从7%到20%的增长。】&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566509912/DevOps_insights.0986061310991192.max-2000x2000.png"
loading="lazy"
alt="DevOps insights"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>精英表现者更有可能使用云计算 ：快速自动扩缩容、成本可见性和可靠性是云计算提供的一些关键优势。更具国家标准与技术研究院（NIST）定义的云计算所具有的五项特征功能，效能最高的DevOps团队比低效能团队在这些方面执行的可能性高24倍，5大特性包括按需的自助服务、广泛的网络访问、资源池，快速弹性和可度量的服务。 &lt;em>【教练解读：你们家使用的云计算是假的。】&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>大多数云计算用户并未充分发挥其潜力 ：只有29％的使用云计算的受访者符合NIST上述的五项标准特征。 这证明了这样一个事实，即声称使用云计算的组织，未必采用了所有必要的云计算特征模式来实现精英水平的业绩，这也有可能会阻碍他们通过云计算获益。 &lt;em>【教练解读：你号称的优势正在阻碍你。】&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>首次呈现出了行业差异性 ：在今年的报告中，零售行业在速度和稳定性方面都展示出了更好的表现。然而，与前几年保持一致的是，根据持续的证据表明，DevOps更好或更差的表现，并没有其行业的差异性。这依然表明：各种类型和规模的组织，包括金融服务、政府和零售等高度监管的行业，也都是可以通过应用DevOps实践来实现高水平的绩效。【教练解读：今年零售业做的很突出，还是你们进来刷榜了？】&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DevOps走进企业 - 第1部分 ：我们首次发现，根据证据显示大型企业组织（员工人数超过5,000人）的效能低于小型企业（员工人数少少于5,000人）。重量级的流程和控制措施，以及紧耦合的体系架构是导致较低速度，以及相关不稳定性的部分原因。&lt;em>【教练解读：大型组织的坑也更大。】&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DevOps走进企业 - 第2部分 ：我们的分析显示最高能的DevOps表现者（即高级和精英表现者），专注于通过结构化的解决方案来构建DevOps社区，这些解决方案包括以下四种模式之一：社区建设者、大学、涌现和实验者（Community Builders, University, Emergent, and Experimenters）。&lt;em>【教练解读：需要给它山之石提供存在的土壤。】&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>没有“一刀切”的方法，成功有赖于一致的努力付出 ：在投资于DevOps的各项能力时，特别是在大型组织中，需要同时关注团队级别和组织级别的工作成果。在团队层面上，持续集成、自动化测试和监控等实践的一些工作投入运作良好。组织级能力包括：在多个部门和团队之间，设置系统体系结构或变更审批策略的能力。 该报告分解了这些能力并概述了应该采取的策略，因此您也可以执行相关的DevOps策略，并从中获得最大的效果。&lt;em>【教练解读：单纯的刷某个团队或者项目也是然并卵。】&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>表现较差的组织比高级和精英表现者使用的软件更多 ：维护和支持私有商业软件的成本可能过高，这促使高级和精英表现者使用开源解决方案。 这和以前报告中的结果一致。 事实上， 2018年的加速度 DevOps报告就表明，精英表现者大量使用开源组件、库和平台的可能性是其它组织的 1.75倍。&lt;em>【教练解读：开源软件正在吞噬着整个世界。】&lt;/em>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="你如何改进devops">你如何改进DevOps？&lt;/h2>
&lt;p>今年的报告提供了有助于推动DevOps改进性能和生产力的两种研究模型。&lt;/p>
&lt;p>&lt;strong>效能研究模型&lt;/strong> 着眼于哪些能让你提升组织绩效的结构和抓手，提供相关的云计算、持续交付、灾难恢复测试，明确变更管理和心理安全文化是如何对软件交付绩效产生积极作用的见解。 本次研究还发现重量级的变革流程是不起作用的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566512814/performance_research_model.max-2000x2000.png"
loading="lazy"
alt="效能研究模型"
>&lt;/p>
&lt;p>图片翻译参考：&lt;/p>
&lt;ul>
&lt;li>左侧的一列，从上至下：清晰的变更流程、重量级变更流程、灾难恢复测试、代码的可维护性、松耦合的架构、监控、主干开发、自动化部署。&lt;/li>
&lt;li>中间的一列，从上至下：心理安全感文化、持续交付、云计算、持续集成、自动化测试。&lt;/li>
&lt;li>右侧的一列，从上至下：行业（控制）企业（控制）、工作恢复、透支&lt;/li>
&lt;li>图例，从上至下：结构、二级结构、团队或者组织的统一目标、控制变量、正向预测关系、双向影响、负面影响关系、粗体字-今年新的调查结果（左侧1～4，中间1）&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>生产力研究模型&lt;/strong> 表明：组织可以通过投资易于易用的工具和信息搜索引擎、心理安全文化，以及消除技术债务的方式来提高工程师的生产力。 提高生产力还有助于提高员工的工作-生活平衡，并降低职业透支（教练注释-996icu）。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566513555/productivity_research_model.max-1600x1600.png"
loading="lazy"
alt="生产力研究模型"
>&lt;/p>
&lt;p>图片翻译参考：&lt;/p>
&lt;ul>
&lt;li>左侧的一列，从上至下：实用且易用的工具、内部搜索引擎、外部搜索引擎、代码可维护性。&lt;/li>
&lt;li>中间的一列，从上至下：心理安全感文化、生产力、技术债、松耦合的架构、监控。&lt;/li>
&lt;li>右侧的一列，从上至下：多年的经验（控制）、SDO效能、软件交付效能、可用性、组织级效能、透支&lt;/li>
&lt;li>图例，从上至下：结构、正向预测关系、负面影响关系、团队或者组织的统一目标、控制变量、弱关联性、粗体字-今年新的调查结果（左侧1～4，中间1～2，右侧2）&lt;/li>
&lt;/ul>
&lt;p>今年的报告再次确认了连续第六年各种重要发现：首先，可以在不牺牲速度的情况下优化稳定性。 其次，DevOps通过影响商业和非商业目标为​​客户和最终用户提供价值。&lt;/p>
&lt;p>感谢为调查做出贡献的所有人。 我们希望此报告能够帮助各种规模，行业和地区的组织改进。 我们期待听到您对报告的想法和反馈。 您可以通过以下方式了解有关2019年加速状态报告的更多信息。&lt;/p>
&lt;h2 id="相关材料和扩展">相关材料和扩展&lt;/h2>
&lt;h3 id="报告尝鲜试读">报告尝鲜试读&lt;/h3>
&lt;h4 id="报告封面">报告封面&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518180/state-of-devops-2019.jpg"
loading="lazy"
>&lt;/p>
&lt;p>关注点：DORA + Google， 新的赞助商的支持。&lt;/p>
&lt;h4 id="报告目录">报告目录&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518068/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.51.36.png"
loading="lazy"
>&lt;/p>
&lt;p>目录结构很类似，内容大不同。&lt;/p>
&lt;h4 id="devops四大核心度量指标">DevOps四大核心度量指标&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518068/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.51.58.png"
loading="lazy"
>&lt;/p>
&lt;p>四个级别的表现者在四大度量维度上的比较，以及今年的数据更新。&lt;/p>
&lt;h4 id="精英表现者">精英表现者&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518069/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.52.10.png"
loading="lazy"
>&lt;/p>
&lt;p>他们始终遥遥领先。重点是所有的指标同时都好。&lt;/p>
&lt;h4 id="两大研究模型的分化">两大研究模型的分化&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518069/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.52.23.png"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>效能模型&lt;/li>
&lt;li>生产力模型&lt;/li>
&lt;/ul>
&lt;h4 id="灾难恢复测试">灾难恢复测试&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518069/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.52.49.png"
loading="lazy"
>&lt;/p>
&lt;p>灾难恢复测试和DevOps强相关。&lt;/p>
&lt;h4 id="心理安全性">心理安全性&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518068/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.53.04.png"
loading="lazy"
>&lt;/p>
&lt;p>文化建设的一个关键组成。&lt;/p>
&lt;h4 id="devops转型的策略一览表">DevOps转型的策略一览表&lt;/h4>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566518068/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2019-08-23_%E4%B8%8A%E5%8D%887.53.41.png"
loading="lazy"
>&lt;/p>
&lt;p>你们都用了哪些推广DevOps的策略呢？抱歉并没有刷成熟度这一项。&lt;/p>
&lt;h3 id="下载报告">下载报告&lt;/h3>
&lt;p>目前Google的官网上提供了所有DORA的DevOps状态调查报告的下载包括2019年度最新的状态调查报告。为了方便国内DevOp实践者的学习，我将它下载到了百度网盘。请大家需要的按照一下方法下载阅读。&lt;/p>
&lt;p>报告下载方法：&lt;/p>
&lt;ol>
&lt;li>扫码下面的二维码，关注DevOps教练的微信公众号&lt;/li>
&lt;li>进入DevOps教练的微信公众号的文字输入状态&lt;/li>
&lt;li>输入数字 ： 2019&lt;/li>
&lt;li>识别自动回复的二维码&lt;/li>
&lt;li>下载pdf版本的2019加速度DevOps状态调查报告&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1566516259/DevOps-Coach-qrcode_for_gh_bce38ef330e5_430.jpg"
loading="lazy"
alt="DevOps教练"
>&lt;/p>
&lt;h3 id="使用2019调查问卷服务">使用2019调查问卷服务&lt;/h3>
&lt;p>前面的文章发布了2019DevOps问卷调查的中文翻译版本，https://martinliu.cn/posts/2019-state-devops-survey-chinese-version/ 这是对原版英文调查问卷的翻译，由中国DevOps社区翻译组完成，现在我们已经将它通过问卷星平台转化成了可以使用的调查服务。&lt;/p>
&lt;p>如果你的企业正在实施DevOps，如果你想了解一下这种称之为DevOps的科学的调查问卷，不妨可以通过下面的流程申请使用这个问卷服务：&lt;/p>
&lt;ol>
&lt;li>发邮件到 &lt;a class="link" href="mailto:info@DevOpsChina.org" >info@DevOpsChina.org&lt;/a> ；邮件标题为 dora 2019&lt;/li>
&lt;li>邮件内容请包含：公司名称、使用范围（全公司、团队）、使用其实时间、联系人姓名、联系人手机/微信、调查问卷的套数（题套问卷对应一个网站，可下载一份数据采集结果）&lt;/li>
&lt;li>本服务为免费社区服务，在收到邮件后就会尽快为您提供所需要数量的网址，并在约定的结束时间发送调查结果到你的邮箱。&lt;/li>
&lt;/ol>
&lt;h2 id="后续">后续&lt;/h2>
&lt;p>经过了多年对这项行业顶级调查问卷和报告的追逐。今年的报告内容量大，新发现多，而且引入了新的研究模型。我会从内容和模型层面做更多的总结和研究。后续用一系列的文章进行报道。请关注“DevOps教练”微信号的更新文章和本网址的更新。&lt;/p>
&lt;hr></description></item><item><title>中文版：2019年DevOps状态调查问卷</title><link>https://martinliu.cn/blog/%E4%B8%AD%E6%96%87%E7%89%882019%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E9%97%AE%E5%8D%B7/</link><pubDate>Mon, 06 May 2019 12:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E4%B8%AD%E6%96%87%E7%89%882019%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E9%97%AE%E5%8D%B7/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-dora.png" alt="Featured image of post 中文版：2019年DevOps状态调查问卷" />&lt;p>本文是中文版《2019年加速度DevOps状态调查》问卷。如果你还没有填写该问卷的话，可以在线上填写英文版，点击这个链接 &lt;a class="link" href="https://bit.ly/2UzLMH2" target="_blank" rel="noopener"
>https://bit.ly/2UzLMH2&lt;/a> ，进入问卷调查网站。本文可以作为你的帮助文档。&lt;/p>
&lt;blockquote>
&lt;p>译者团队：刘征、张晔、刘頲、朱婷、王英伟、王虹、李建芳、沈越飞、井建宇、申屠欣欣&lt;/p>
&lt;/blockquote>
&lt;p>本文由以上翻译团队经过两周的时间，在业余时间翻译完成，如果对本文有任何改进建议请发邮件到 martin AT DevOpsCoach.org&lt;/p>
&lt;p>发布本文的另外一个原因：作为历时6年，被称之为DevOps界之科学的调查研究，我们可以透过这套问卷，洞察如何用问卷的方式定量的度量DevOps的现状。对于已经实施了多年DevOps企业，本问卷可谓是一道营养丰富的大餐。&lt;/p>
&lt;h2 id="历年来的devops状态报告">历年来的DevOps状态报告&lt;/h2>
&lt;p>如果你需要下载学习的话，请点击下面的链接（扫码二维码），这里还有历年来英文版报告全集和部分中文版本。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1555778529/reports-download.png.png"
loading="lazy"
alt="下载"
>&lt;/p>
&lt;hr>
&lt;p>下面是2019年DevOps状态调查问卷的简体中文版译文。&lt;/p>
&lt;h2 id="第一部分">第一部分&lt;/h2>
&lt;p>欢迎参加2019年全球DevOps全球行业调查。&lt;/p>
&lt;ul>
&lt;li>我们有兴趣了解您的工作方式以及工作环境。 &lt;/li>
&lt;li>答案并没有对错。 &lt;/li>
&lt;li>如果您不知道答案，可以选择“我不知道或不适用”，您的作答将被忽略。&lt;/li>
&lt;/ul>
&lt;p>非常感谢您花时间帮助我们去探索那些能使技术进步的秘密！&lt;/p>
&lt;h3 id="1-您的组织主要属于哪个行业">1. 您的组织主要属于哪个行业？&lt;/h3>
&lt;ul>
&lt;li>教育&lt;/li>
&lt;li>能源&lt;/li>
&lt;li>金融服务&lt;/li>
&lt;li>政府&lt;/li>
&lt;li>医疗保健和制药&lt;/li>
&lt;li>工业与制造业&lt;/li>
&lt;li>保险&lt;/li>
&lt;li>媒体/娱乐&lt;/li>
&lt;li>非盈利&lt;/li>
&lt;li>零售/消费品/电子商务&lt;/li>
&lt;li>技术&lt;/li>
&lt;li>电信&lt;/li>
&lt;li>其他。请明确说明： [____]&lt;/li>
&lt;/ul>
&lt;h3 id="2-有多少员工在您的组织里工作">2. 有多少员工在您的组织里工作？&lt;/h3>
&lt;ul>
&lt;li>1-4&lt;/li>
&lt;li>5-9&lt;/li>
&lt;li>10-19&lt;/li>
&lt;li>20-99&lt;/li>
&lt;li>100-499&lt;/li>
&lt;li>500-1,999&lt;/li>
&lt;li>2,000-4,999&lt;/li>
&lt;li>5,000-9,999&lt;/li>
&lt;li>10,000+&lt;/li>
&lt;li>我不知道&lt;/li>
&lt;/ul>
&lt;h3 id="3-你们的服务器上都部署了哪些操作系统">3. 你们的服务器上都部署了哪些操作系统？ &lt;/h3>
&lt;ul>
&lt;li>Windows 2003 / 2003R2&lt;/li>
&lt;li>Windows 2008 / 2008R2&lt;/li>
&lt;li>Windows 2012 / 2012R2&lt;/li>
&lt;li>Windows 其他&lt;/li>
&lt;li>Linux Debian / Ubuntu变种&lt;/li>
&lt;li>Linux Enterprise Linux变体（RHEL，Oracle，CentOS）&lt;/li>
&lt;li>Linux Fedora&lt;/li>
&lt;li>Linux SUSE Linux Enterprise Server&lt;/li>
&lt;li>Linux OpenSUSE&lt;/li>
&lt;li>Linux Arch&lt;/li>
&lt;li>Linux其他&lt;/li>
&lt;li>其他的UNIX&lt;/li>
&lt;li>FreeBSD / NetBSD / OpenBSD系统&lt;/li>
&lt;li>AIX&lt;/li>
&lt;li>Solaris&lt;/li>
&lt;li>其他&lt;/li>
&lt;/ul>
&lt;h3 id="4-在过去一年中关于下列绩效指标您的组织实现的程度如何">4. 在过去一年中，关于下列绩效指标，您的组织实现的程度如何？&lt;/h3>
&lt;ul>
&lt;li>您组织的整体表现&lt;/li>
&lt;li>您组织的整体盈利能力&lt;/li>
&lt;li>主要产品的相对市场份额&lt;/li>
&lt;li>客户数量增加&lt;/li>
&lt;/ul>
&lt;p>（表现远低于目标 表现低于目标 略低于目标 达到了目标 略高于目标 表现高于目标 表现远高于目标 不适用或我不知道）&lt;/p>
&lt;h3 id="5-我们也有兴趣了解其他一些目标选择指示您的组织在过去一年中如何针对以下目标执行的选项">5. 我们也有兴趣了解其他一些目标。 选择指示您的组织在过去一年中如何针对以下目标执行的选项&lt;/h3>
&lt;ul>
&lt;li>产品或服务的数量&lt;/li>
&lt;li>运营效率&lt;/li>
&lt;li>消费者满意度&lt;/li>
&lt;li>所提供的产品或服务的质量&lt;/li>
&lt;li>实现组织的/使命的目标&lt;/li>
&lt;li>通过其它的方面向外部各方证明了贵组织实现预期成果&lt;/li>
&lt;/ul>
&lt;p>（表现远低于目标 表现低于目标 略低于目标 达到了目标 略高于目标 表现高于目标 表现远高于目标 不适用或我不知道）&lt;/p>
&lt;h3 id="6-我们有兴趣了解devops或敏捷方法是怎样在您组织的各个团队中传播的">6. 我们有兴趣了解DevOps或敏捷方法是怎样在您组织的各个团队中传播的。 &lt;/h3>
&lt;p>在这里，我们将描述我们看到过的那些常见的模式，并要求您从中选择出&lt;strong>哪些在自己的组织中最常见&lt;/strong>方式（请选择所有适用的选项）&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>培训中心（有时也称为&lt;strong>&lt;strong>DOJO&lt;/strong>&lt;/strong>）&lt;/strong> - 让人们暂时脱离正常的工作惯例，以便在一段时间内学习新的工具或技术、实践甚至文化，然后再回到正常的工作环境中，目标（希望？）是：他们会坚持使用新的工作方式，甚至可能推广给其他的人。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>卓越中心&lt;/strong> - 一个所有专业知识都具足，然后为内部各方提供咨询的地方。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>止步于概念证明&lt;/strong> - 进行概念证明（PoC）项目，通常执行团队可以突破组织规范（通常是官方的规则）的羁绊，从而自由的按照所认为的最好的方式构建。然而，在PoC之后，那些付出就停滞不前了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>用概念证明当模板&lt;/strong> - 也是从小规模的概念证明（PoC）项目（如上所述）开始，然后开始使用这个最初的模式在组织中的其它团队进行复制。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>用概念证明做种子&lt;/strong> - 也是从小规模的概念证明（PoC）开始，然后将PoC知识传播给其他团队。这是通过打散PoC（可以是第一个PoC团队，或是后续/并行的PoC团队）执行团队，并将他们派发到其他团队，去分享他们所学到的知识和实践的方式来完成的。也可以称此为轮岗，那些前PoC团队成员沉浸在其他团队中，发挥着传播新的实践和文化，并兼做导师的职责。他们可能会无限期地留在这个新的群体中，或者只是用足够长的时间来确保，他带来的新的做法是可持续的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>实践社区&lt;/strong> - 在组织内培养对工具、语言或方法有共同兴趣的团体，以便在他们的彼此之间、团队之间，以及在组织内部分享他们的知识和专业技能。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>大爆炸式&lt;/strong> - 组织进行整体一次性的DevOps方法（当然他们要选择对其下的定义）转型，通常采用自上而下的指令。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>自下而上或草根方式&lt;/strong> - 那些在一线工作的小团队将资源整合在一起，然后在整个组织中，通过非官方的形式分享所取得的成功，并进行推广，而无需任何组织官方的支持或资源。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>混搭型&lt;/strong> - 组织实施过了上述的若干种方法，通常由于无法得到成功所需的资源和重视，只能是半途而废了。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="第二部分">第二部分&lt;/h2>
&lt;p>这部分涉及您的工作及其成果，以及它对您自身的影响。&lt;/p>
&lt;h3 id="1-在你工作的过程中你的感受是怎样的">1. 在你工作的过程中，你的感受是怎样的？ &lt;/h3>
&lt;p>请评价您对以下陈述的同意或不同意程度。&lt;/p>
&lt;ul>
&lt;li>我经常处于高水平的生产力&lt;/li>
&lt;li>我经常能够进入一个良好的“流程”，在那里我可以完成复杂、耗时的任务，同时最大限度地减少干扰和中断。&lt;/li>
&lt;li>我对我的工作很满意。&lt;/li>
&lt;li>我有足够的工具和资源来完成我的工作。&lt;/li>
&lt;li>我的工作很好地利用了我的技能和能力。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h3 id="2-对于您工作的主要应用程序或服务变更前置时间即从代码提交到在生产中成功运行的过程需要的时间是多长">2. 对于您工作的主要应用程序或服务，变更前置时间（即：从代码提交到在生产中成功运行的过程需要的时间）是多长？&lt;/h3>
&lt;ul>
&lt;li>超过六个月&lt;/li>
&lt;li>一个月到六个月之间&lt;/li>
&lt;li>一周到一个月之间&lt;/li>
&lt;li>一天到一周之间&lt;/li>
&lt;li>不到一天&lt;/li>
&lt;li>不到一个小时&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="3-对于您工作的主要应用程序或服务您的组织在生产环境进行代码部署或向最终用户做发布的频率是什么">3. 对于您工作的主要应用程序或服务，您的组织在生产环境进行代码部署或向最终用户做发布的频率是什么？&lt;/h3>
&lt;ul>
&lt;li>每六个月少于一次&lt;/li>
&lt;li>每一到六个月一次&lt;/li>
&lt;li>每周到每月一次&lt;/li>
&lt;li>每天到每周一次&lt;/li>
&lt;li>每小时到每天一次&lt;/li>
&lt;li>按需（每天都要进行多次部署）&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="4-对于您工作的主要应用程序或服务当服务中断或出现影响用户bug时如计划外中断服务受损恢复服务通常需要多长时间">4. 对于您工作的主要应用程序或服务，当服务中断或出现影响用户Bug时（如：计划外中断、服务受损），恢复服务通常需要多长时间？&lt;/h3>
&lt;ul>
&lt;li>超过六个月&lt;/li>
&lt;li>一个月到六个月之间&lt;/li>
&lt;li>一周到一个月之间&lt;/li>
&lt;li>一天到一周之间&lt;/li>
&lt;li>一天之内&lt;/li>
&lt;li>一小时之内&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="5-对于您所工作的主要应用程序或服务对于生产变更或向最终用户发版的变更百分之多少会导致服务质量下降如服务受损或服务中断并需要进行后续的修复工作需要热补丁回滚前向修复打补丁修复">5. 对于您所工作的主要应用程序或服务，对于生产变更，或向最终用户发版的变更，百分之多少会导致服务质量下降（如：服务受损或服务中断），并需要进行后续的修复工作（需要热补丁、回滚，前向修复，打补丁修复）&lt;/h3>
&lt;ul>
&lt;li>0％-15％&lt;/li>
&lt;li>16％-30％&lt;/li>
&lt;li>31％-45％&lt;/li>
&lt;li>46％-60％&lt;/li>
&lt;li>61％-75％&lt;/li>
&lt;li>76％-100％&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="6-接下来的问题会询问可靠性以及您和您的团队如何看待它">6. 接下来的问题会询问可靠性，以及您和您的团队如何看待它。 &lt;/h3>
&lt;p>请评价您对以下陈述的同意或不同意程度。
对于您所工作的主要应用程序或服务：&lt;/p>
&lt;ul>
&lt;li>定义了明确的可用性目标（如服务级别协议/服务级别目标），这些目标在团队和客户之间达成了清晰的共识。&lt;/li>
&lt;li>我知道最近一段时间实际的可用性。&lt;/li>
&lt;li>在最近一段时间内，我的团队达到或超过了可用性目标。&lt;/li>
&lt;li>当我们未达成可用性目标时，就会进行改进工作，也或将对调整工作的优先级。&lt;/li>
&lt;li>如果使用云服务，我的团队就会借助云计算的高可用性（如：使用多个可用区）来提高可靠性。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h3 id="7-工作的可持续性很重要而职场透支是一个相关的重要度量指标您能否回答几个问题让我们知道您的工作对您有何影响">7. 工作的可持续性很重要，而职场透支是一个相关的重要度量指标。您能否回答几个问题，让我们知道您的工作对您有何影响？ &lt;/h3>
&lt;p>请评价您对以下声明的同意或不同意程度：&lt;/p>
&lt;ul>
&lt;li>我感觉透支很严重。&lt;/li>
&lt;li>我感到筋疲力尽。&lt;/li>
&lt;li>我对所从事的工作无语或愤世嫉俗。&lt;/li>
&lt;li>我觉得工作效率低下。&lt;/li>
&lt;li>我觉得工作应对业余的正常生活产生负面影响。&lt;/li>
&lt;li>我能够完成工作并保持良好的整体状态。&lt;/li>
&lt;li>我能够有效应对与工作有关的压力。&lt;/li>
&lt;li>我可以在业余时间中（即，当我选择不工作时）脱离工作。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h2 id="第三部分">第三部分&lt;/h2>
&lt;p>当你回答以下问题的时候，请回想一下你在团队中的经历&lt;/p>
&lt;h3 id="1-请评价您对以下声明的同意或不同意程度">1. 请评价您对以下声明的同意或不同意程度：&lt;/h3>
&lt;ul>
&lt;li>如果我对我们的团队犯了错误，也不会有不良影响。&lt;/li>
&lt;li>我们团队的成员能够发现问题和提出棘手的问题。&lt;/li>
&lt;li>我们团队的成员不会因为差异性而互相拒绝。&lt;/li>
&lt;li>对我们的团队而言冒风险是安全的。&lt;/li>
&lt;li>想让我们团队的其人提供帮助并不困难。&lt;/li>
&lt;li>我们团队中没有人会以任何形式故意破坏我的工作成果。&lt;/li>
&lt;li>团队非常重视我独特的技术和才能。&lt;/li>
&lt;li>我们的团队能够在出现冲突时解决冲突。&lt;/li>
&lt;li>我们团队内部有很高的信任度。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h3 id="2-当你回答以下问题时回想你是如何和你的团队合作的">2. 当你回答以下问题时，回想你是如何和你的团队合作的&lt;/h3>
&lt;p>请评价您对以下声明的同意或不同意程度：&lt;/p>
&lt;ul>
&lt;li>当我的团队成员之间存在相反的意见时，我们会互相尊重。&lt;/li>
&lt;li>我可以依靠我的团队来产出高质量的成果。&lt;/li>
&lt;li>我的团队提供了一个可以创新的环境。&lt;/li>
&lt;li>我的团队有明确的角色和责任。&lt;/li>
&lt;li>我的团队所承担的项目对我来说具有个人和专业意义。&lt;/li>
&lt;li>我能够获得有效完成工作所需的必要的信息（例如，战略、新产品、组织变革，我们的优先事项和价值观）。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h3 id="3-回想一下你的团队是如何工作和组织的">3. 回想一下你的团队是如何工作和组织的&lt;/h3>
&lt;p>请评价您对以下陈述的同意或不同意程度。&lt;/p>
&lt;p>对于您使用的主要应用程序或服务：&lt;/p>
&lt;ul>
&lt;li>为了完成我自己的工作，我不需要与团队外的人沟通和协调。&lt;/li>
&lt;li>在我的团队中，我们可以对系统的设计进行大规模更改，而无需为其他团队创建重要的工作。&lt;/li>
&lt;li>在我的团队中，我们可以对系统的设计进行大规模更改，而不用依赖于其他团队的大量工作。&lt;/li>
&lt;li>我的团队可以根据需要独立部署和发布我们的产品或服务，而不依赖于其依赖的其他服务。&lt;/li>
&lt;li>我们可以按需的进行大部分的测试，而无需等待一个集成测试环境。&lt;/li>
&lt;li>在我的团队中，我们在正常工作指端中执行部署，停机时间可忽略不计。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h3 id="4-最后我们想了解一下您的组织文化">4. 最后，我们想了解一下您的组织文化。&lt;/h3>
&lt;p>请评价您对以下声明的同意或不同意程度：&lt;/p>
&lt;ul>
&lt;li>我的组织氛围宜人，重视各种不同的观点。&lt;/li>
&lt;li>我的组织是一个所有类型的员工（例如，所有性别，种族，文化背景）都能够完全发挥其能力的地方。&lt;/li>
&lt;li>当我在组织中发言时，我的意见很受重视。&lt;/li>
&lt;/ul>
&lt;p>（强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用）&lt;/p>
&lt;h2 id="第四部分">第四部分&lt;/h2>
&lt;p>这部分关于你所处环境中知识是如何供给和获取的。
让我们换个角度，告诉我们您的日常工作。&lt;/p>
&lt;h3 id="1-当您工作时您会在哪里寻找信息">1. 当您工作时，您会在哪里寻找信息？&lt;/h3>
&lt;ul>
&lt;li>当我需要相关知识用于解决问题时，我会频繁访问外部信息（如Stack Overflow、百度等）。&lt;/li>
&lt;li>当我遇到具有挑战性的问题，需要寻找类似问题的解决方案时，我经常访问外部信息 (如Stack Overflow、百度等)。&lt;/li>
&lt;li>当我处理困难的任务时，我经常和可能遇到类似问题的人沟通。&lt;/li>
&lt;li>当我需要工作相关主题或问题的知识时，我经常与其他人讨论。&lt;/li>
&lt;li>在处理任务时，我经常会参考内部知识库或工具来帮助找到解决方案。&lt;/li>
&lt;li>当我处理具有挑战性的问题时，我经常搜索内部工具或代码库以便找到类似问题或示例的解决方案。&lt;/li>
&lt;li>当我有疑问或寻找代码示例时，我经常搜索组织的源代码库&lt;/li>
&lt;li>当我有疑问或遇到有挑战的问题时，我会搜索内部文档&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="2-当您遇到问题时您会定期检查哪些信息来源请选择所有适用项">2. 当您遇到问题时，您会定期检查哪些信息来源？请选择所有适用项&lt;/h3>
&lt;ul>
&lt;li>内部(组织)知识库、论坛或文档&lt;/li>
&lt;li>内部(组织)代码库&lt;/li>
&lt;li>Stack Overflow 网站&lt;/li>
&lt;li>在线教程和视频&lt;/li>
&lt;li>百度、Bing或其它类似的公开搜索引擎&lt;/li>
&lt;li>外部(公共)参考文档&lt;/li>
&lt;li>当面请教同事&lt;/li>
&lt;li>通过电子邮件、文本或聊天工具请教同事&lt;/li>
&lt;li>朋友或同行(如微信、网络兴趣组、微博等)&lt;/li>
&lt;li>您自己的个人笔记&lt;/li>
&lt;li>其它。请填写&lt;/li>
&lt;li>以上都不是&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h2 id="第五部分">第五部分&lt;/h2>
&lt;p>这部分关于你的角色，以及你们团队做变更的特征和模式等。&lt;/p>
&lt;h3 id="1-现在让我们谈谈您工作时的感受">1. 现在让我们谈谈您工作时的感受。&lt;/h3>
&lt;p>无论您的正式职位是什么，让我们谈谈您所做的工作。在您的日常工作中，您负责多少个不同的角色（或工作类型）？请选择所有适用项&lt;/p>
&lt;ul>
&lt;li>软件开发&lt;/li>
&lt;li>测试&lt;/li>
&lt;li>基础设施/运营&lt;/li>
&lt;li>数据库管理&lt;/li>
&lt;li>信息/应用安全&lt;/li>
&lt;li>人员管理&lt;/li>
&lt;li>项目或产品管理&lt;/li>
&lt;li>文档&lt;/li>
&lt;li>需求分析&lt;/li>
&lt;li>用户体验&lt;/li>
&lt;li>随时待命/事件响应&lt;/li>
&lt;li>其它。请列出您执行的其他角色&lt;/li>
&lt;/ul>
&lt;h3 id="2-您每天在这些角色之间切换多少次">2. 您每天在这些角色之间切换多少次？&lt;/h3>
&lt;ul>
&lt;li>不想回应&lt;/li>
&lt;li>0&lt;/li>
&lt;li>1&lt;/li>
&lt;li>2&lt;/li>
&lt;li>3&lt;/li>
&lt;li>4&lt;/li>
&lt;li>5&lt;/li>
&lt;li>6&lt;/li>
&lt;li>7&lt;/li>
&lt;li>8&lt;/li>
&lt;li>9&lt;/li>
&lt;li>10&lt;/li>
&lt;li>11&lt;/li>
&lt;li>12&lt;/li>
&lt;li>13&lt;/li>
&lt;li>14&lt;/li>
&lt;li>15&lt;/li>
&lt;li>16&lt;/li>
&lt;li>17&lt;/li>
&lt;li>18&lt;/li>
&lt;li>19&lt;/li>
&lt;li>20或以上&lt;/li>
&lt;/ul>
&lt;h3 id="3-您现在正工作在多少个项目或产品上">3. 您现在正工作在多少个项目或产品上？&lt;/h3>
&lt;ul>
&lt;li>不想回应&lt;/li>
&lt;li>0&lt;/li>
&lt;li>1&lt;/li>
&lt;li>2&lt;/li>
&lt;li>3&lt;/li>
&lt;li>4&lt;/li>
&lt;li>5&lt;/li>
&lt;li>6&lt;/li>
&lt;li>7&lt;/li>
&lt;li>8&lt;/li>
&lt;li>9&lt;/li>
&lt;li>10&lt;/li>
&lt;li>11&lt;/li>
&lt;li>12&lt;/li>
&lt;li>13&lt;/li>
&lt;li>14&lt;/li>
&lt;li>15&lt;/li>
&lt;li>16&lt;/li>
&lt;li>17&lt;/li>
&lt;li>18&lt;/li>
&lt;li>19&lt;/li>
&lt;li>20或以上&lt;/li>
&lt;/ul>
&lt;h3 id="4-您通常在一周中工作在多少个项目上">4. 您通常在一周中工作在多少个项目上？&lt;/h3>
&lt;ul>
&lt;li>不想回应&lt;/li>
&lt;li>0&lt;/li>
&lt;li>1&lt;/li>
&lt;li>2&lt;/li>
&lt;li>3&lt;/li>
&lt;li>4&lt;/li>
&lt;li>5&lt;/li>
&lt;li>6&lt;/li>
&lt;li>7&lt;/li>
&lt;li>8&lt;/li>
&lt;li>9&lt;/li>
&lt;li>10&lt;/li>
&lt;li>11&lt;/li>
&lt;li>12&lt;/li>
&lt;li>13&lt;/li>
&lt;li>14&lt;/li>
&lt;li>15&lt;/li>
&lt;li>16&lt;/li>
&lt;li>17&lt;/li>
&lt;li>18&lt;/li>
&lt;li>19&lt;/li>
&lt;li>20或以上&lt;/li>
&lt;/ul>
&lt;h3 id="5-思考下你过去3个月的工作-请以这些记忆里的工作对以下陈述进行回应">5. 思考下你过去3个月的工作。 请以这些记忆里的工作对以下陈述进行回应。&lt;/h3>
&lt;p>我遇到过的代码，脚本，配置或系统&amp;hellip;&amp;hellip;&lt;/p>
&lt;ul>
&lt;li>包含已知的错误，这些错误不支持新功能开发&lt;/li>
&lt;li>没有足够的测试或测试覆盖率&lt;/li>
&lt;li>与低下的代码质量或设计有关&lt;/li>
&lt;li>取消或放弃项目后尚未进行清理&lt;/li>
&lt;li>在我所在的团队中没有人有专业知识能够理解&lt;/li>
&lt;li>有不完全或不正确的迁移&lt;/li>
&lt;li>使用了过时的技术&lt;/li>
&lt;li>文档和/或注释存在缺失、不完整或过时的情况&lt;/li>
&lt;/ul>
&lt;h3 id="6-现在思考在你的组织中的进行变更及相应流程是什么样的">6. 现在思考在你的组织中的进行变更及相应流程是什么样的。&lt;/h3>
&lt;p>在我的组织中&amp;hellip;&amp;hellip;&lt;/p>
&lt;ul>
&lt;li>在实施或部署之前，必须由外部机构（例如，变更审批委员会，经理等）批准生产变更&lt;/li>
&lt;li>我的组织有一个正式的流程来批准在实施或发布之前对应用程序或生产系统进行变更。&lt;/li>
&lt;li>我清楚地了解批准实施​​变更的流程&lt;/li>
&lt;li>我相信我能够及时通过审批流程来实施变更&lt;/li>
&lt;li>对于我通常所做的各类变更，我知道每次从“提交”到“已接受”所需的步骤。&lt;/li>
&lt;li>我们依靠同事的同行评审（例如代码审查或结对编程）来管理或批准变更。&lt;/li>
&lt;li>我的团队遵循基于风险的政策来批准变更，通过自动化方法推进低风险变更，只有高风险变更才需要人工批准。&lt;/li>
&lt;li>所有重大变更必须在实施前由高级经理批准&lt;/li>
&lt;/ul>
&lt;h2 id="第6部分">第6部分&lt;/h2>
&lt;p>对于此页面上的问题，请思考你为测试生产系统的弹性所做的工作。&lt;/p>
&lt;h3 id="1以下哪些活动用于测试我们的it系统服务的弹性">1.以下哪些活动用于测试我们的IT系统/服务的弹性？&lt;/h3>
&lt;ul>
&lt;li>未在真实系统上进行沙盘推演&lt;/li>
&lt;li>基础设施（包括数据中心）故障转移&lt;/li>
&lt;li>应用程序故障转移&lt;/li>
&lt;li>模拟破坏类生产的测试系统（包括故障注入、如降级网络链路、关闭路由器等）&lt;/li>
&lt;li>模拟破坏生产系统（包括故障注入，如降级网络链路，关闭路由器等）&lt;/li>
&lt;li>创建自动化和系统，定期，持续地破坏生产系统&lt;/li>
&lt;li>其他。 请明确说明：&lt;/li>
&lt;li>以上都不是&lt;/li>
&lt;/ul>
&lt;h3 id="2-你所在的组织多久执行一次中断生产系统的模拟包括故障注入例如降级网络链路关闭路由器等">2. 你所在的组织多久执行一次中断生产系统的模拟（包括故障注入，例如降级网络链路、关闭路由器等）&lt;/h3>
&lt;ul>
&lt;li>从不&lt;/li>
&lt;li>仅在初次部署&lt;/li>
&lt;li>按周&lt;/li>
&lt;li>按月&lt;/li>
&lt;li>按年&lt;/li>
&lt;li>少于一年一次&lt;/li>
&lt;li>不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="3-你所在的组织多久执行一次基础设施包括数据中心故障转移以测试弹性">3. 你所在的组织多久执行一次基础设施（包括数据中心）故障转移以测试弹性？&lt;/h3>
&lt;ul>
&lt;li>从不&lt;/li>
&lt;li>仅在初次部署&lt;/li>
&lt;li>按周&lt;/li>
&lt;li>按月&lt;/li>
&lt;li>按年&lt;/li>
&lt;li>少于一年一次&lt;/li>
&lt;li>不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="4-你所在的组织多久执行一次应用程序故障转移以测试弹性">4. 你所在的组织多久执行一次应用程序故障转移以测试弹性？&lt;/h3>
&lt;ul>
&lt;li>从不&lt;/li>
&lt;li>仅在初次部署&lt;/li>
&lt;li>按周&lt;/li>
&lt;li>按月&lt;/li>
&lt;li>按年&lt;/li>
&lt;li>少于一年一次&lt;/li>
&lt;li>不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="5-如果我的组织在灾备演习时发现了任何改进的机会我们会创建行动任务并在下一次演习前修复这些改进项">5. 如果我的组织在灾备演习时发现了任何改进的机会，我们会创建行动任务并在下一次演习前修复这些改进项。&lt;/h3>
&lt;ul>
&lt;li>非常同意&lt;/li>
&lt;li>同意&lt;/li>
&lt;li>有点同意&lt;/li>
&lt;li>既不赞成也不反对&lt;/li>
&lt;li>不太同意&lt;/li>
&lt;li>不同意&lt;/li>
&lt;li>强烈反对&lt;/li>
&lt;li>不适用或我不知道&lt;/li>
&lt;/ul>
&lt;h2 id="第七部分">第七部分&lt;/h2>
&lt;p>此页将会询问您或您的组织关于云应用的一些问题&lt;/p>
&lt;h3 id="1-我主要负责的产品或服务在哪运行请选择所有适用的选项">1. 我主要负责的产品或服务在哪运行？（请选择所有适用的选项）&lt;/h3>
&lt;ul>
&lt;li>公有云（包含多个公有云）&lt;/li>
&lt;li>私有云&lt;/li>
&lt;li>混合云（将公有云和私有云/数据中心/本地设施结合在一起）&lt;/li>
&lt;li>在数据中心或本地（不是云）&lt;/li>
&lt;li>我桌面下的一个小服务器&lt;/li>
&lt;li>其他
 &lt;/li>
&lt;/ul>
&lt;h3 id="2采用多个云提供商的驱动因素是什么请最多选择3个">2.采用多个云提供商的驱动因素是什么？（请最多选择3个）&lt;/h3>
&lt;ul>
&lt;li>我们只有一个云提供商, 或者我们没有使用公有云&lt;/li>
&lt;li>法律合规性&lt;/li>
&lt;li>灾备可用性&lt;/li>
&lt;li>对一个供应商缺乏信任&lt;/li>
&lt;li>利用每个提供商的独特优势&lt;/li>
&lt;li>谈判策略或采购要求&lt;/li>
&lt;li>其他&lt;/li>
&lt;/ul>
&lt;h3 id="3请评价您对以下陈述同意或不同意的程度">3.请评价您对以下陈述同意或不同意的程度&lt;/h3>
&lt;ul>
&lt;li>我主要负责的产品或服务最初是设计在云中运行或基于云设计架构的。&lt;/li>
&lt;li>对于我主要负责的产品或服务, 环境配置和部署仅使用存储在版本控制库中的脚本和信息, 无需手动步骤 (审批除外)。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="4请评价您使用云服务时对以下陈述的同意或不同意程度">4.请评价您使用云服务时对以下陈述的同意或不同意程度。&lt;/h3>
&lt;ul>
&lt;li>一旦我有了访问权限, 我就可以根据需要独立地配置和配置产品或服务所需的云资源和功能, 而无需提高票证或需要人工交互。&lt;/li>
&lt;li>我主要负责的服务或产品设计为通过网络从各种设备 (如智能手机、平板电脑、笔记本电脑) 访问, 而不需要专有插件或协议。&lt;/li>
&lt;li>我的产品或服务所运行的云，服务于多个团队和应用程序, 并根据需要动态分配和重新分配计算和基础架构资源。&lt;/li>
&lt;li>我可以根据需求动态地增加或减少可用于主要支持的服务或产品的云资源。&lt;/li>
&lt;li>我可以监视或控制我主要支持的服务或产品所使用的云资源的数量和成本。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="5换个主题在您工作的时候您是怎样看待成本的">5.换个主题，在您工作的时候，您是怎样看待成本的？&lt;/h3>
&lt;ul>
&lt;li>我的团队可以准确地估计操作我们软件的成本。&lt;/li>
&lt;li>我的团队可以轻松识别我们运营成本最高的应用程序。&lt;/li>
&lt;li>我的团队很少超出我们的成本费用或支出预算。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h2 id="第八部分">第八部分&lt;/h2>
&lt;p>关于版本控制系统、分支模型、自动化测试、持续集成、持续交付等一直到生产环境的反馈等等实践。
现在让我们谈谈您和您的团队所做的技术工作。&lt;/p>
&lt;h3 id="1请介绍一下您和您的团队如何开发软件我的团队">1.请介绍一下您和您的团队如何开发软件。我的团队：&lt;/h3>
&lt;ul>
&lt;li>我们的组织将所有代码存储在一个单一庞大的版本控制存储库中&lt;/li>
&lt;li>组织中所有工程师都可以查看和搜索组织中所有代码&lt;/li>
&lt;li>我可以在自己之外的项目中编辑代码，并适时提交&lt;/li>
&lt;li>我们将应用程序的所有依赖项源代码（例如软件库）都存储到版本控制存储库中&lt;/li>
&lt;li>我们为发行版本创建的所有包，包括依赖项，都是在单个版本控制中创建的，而不是从多个版本或分支中创建的&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="2我们关注您工作中使用什么代码请评价您对以下陈述同意或不同意程度">2.我们关注您工作中使用什么代码，请评价您对以下陈述同意或不同意程度&lt;/h3>
&lt;ul>
&lt;li>如果需要，我们很容易更改其他团队维护的代码&lt;/li>
&lt;li>我很容易在代码库中找到示例&lt;/li>
&lt;li>我经常从团队之外的工程师那里收到项目的更新。&lt;/li>
&lt;li>我很容易重新使用别人的代码&lt;/li>
&lt;li>我很容易对我的项目增加新的依赖项&lt;/li>
&lt;li>我很容易移动新的依赖项版本&lt;/li>
&lt;li>我的依赖项是稳定的很少破坏我的代码&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="3我们关注您在工作中遵循的开发实践和模式">3.我们关注您在工作中遵循的开发实践和模式。&lt;/h3>
&lt;ul>
&lt;li>我团队中的所有开发人员至少每天都会将代码推送到trunk / master&lt;/li>
&lt;li>应用程序的代码库中不到三个活动分支&lt;/li>
&lt;li>我们的应用程序团队从来没有代码锁定期，任何时候没有人可以签入代码或由于合并配置而执行请求。&lt;/li>
&lt;li>在合并到master之前，分支和分叉的生命周期非常短（不到一天）。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="4下一组问题是关于在工作中提交代码搭建和部署软件">4.下一组问题是关于在工作中提交代码、搭建和部署软件。&lt;/h3>
&lt;p>对于您使用的主要应用程序或服务：&lt;/p>
&lt;ul>
&lt;li>代码提交会自动生成软件&lt;/li>
&lt;li>代码提交会运行一系列自动化测试&lt;/li>
&lt;li>每天成功地执行自动化的构建和测试&lt;/li>
&lt;li>当构建中断时，它通常在十分钟内修复&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="5许多团队使用自动化测试来优化他们的软件">5.许多团队使用自动化测试来优化他们的软件&lt;/h3>
&lt;p>请评价您对以下陈述的同意或不同意程度
回答这些问题时，请考虑您自己的测试过程：&lt;/p>
&lt;ul>
&lt;li>当自动化测试通过时，我确信软件是可发布的&lt;/li>
&lt;li>自动测试失败可能表明存在真正的缺陷&lt;/li>
&lt;li>开发人员很容易重现和修复验收失败的测试&lt;/li>
&lt;li>我们测试必要的数据，以便每一步都能轻松运行自动化测试&lt;/li>
&lt;li>我可以在十分钟内从自动测试中得到反馈&lt;/li>
&lt;li>我们经常使用之前的测试运行数据来提高自动化测试套件的质量&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="6请评价您对以下陈述的同意或不同意程度">6.请评价您对以下陈述的同意或不同意程度&lt;/h3>
&lt;p>对于您使用的主要应用程序或服务：&lt;/p>
&lt;ul>
&lt;li>我们的软件在整个生命周期中都处于可部署状态&lt;/li>
&lt;li>我的团队优先考虑保持软件可部署而不是处理新功能&lt;/li>
&lt;li>团队中的任何人都可以获得系统在质量和可部署性方面的快速反馈&lt;/li>
&lt;li>当人们得到系统不可部署的反馈时（例如构建或测试失败），他们将优先解决这些问题&lt;/li>
&lt;li>我们可以根据需要随时将我们的系统部署到生产或最终用户&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="7-请结合自己的测试过程回答以下问题">7. 请结合自己的测试过程回答以下问题：&lt;/h3>
&lt;ul>
&lt;li>当通过自动化测试后，我相信软件是可发布的。&lt;/li>
&lt;li>自动化测试失败表明存在真正的缺陷。&lt;/li>
&lt;li>开发人员很容易重现并修复验收测试发现的缺陷。&lt;/li>
&lt;li>我们有必要的测试数据，用于每个步骤中轻松地运行自动化测试。&lt;/li>
&lt;li>我可以在10分钟内收到自动化测试反馈。&lt;/li>
&lt;li>我们经常使用以前测试运行的数据来提高自动化测试套件的质量。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="8-对于您工作的主要应用或服务">8. 对于您工作的主要应用或服务：&lt;/h3>
&lt;ul>
&lt;li>我们的软件始终处于可部署的状态。&lt;/li>
&lt;li>在我的团队中，保持软件处于可部署状态的优先级高于实现新需求。&lt;/li>
&lt;li>任何团队成员都可以快速反馈系统的质量和可部署性。&lt;/li>
&lt;li>团队成员将修复导致系统无法部署的问题（如编译失败、测试失败等）置于最高优先级。&lt;/li>
&lt;li>我们可以随时根据需要将系统部署到生产环境或最终用户。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="9-对于您工作的主要应用或服务实现完全自动化部署到生产环境或最终用户的比例是">9. 对于您工作的主要应用或服务，实现完全自动化部署到生产环境或最终用户的比例是：&lt;/h3>
&lt;ul>
&lt;li>0%-15%&lt;/li>
&lt;li>16%-30%&lt;/li>
&lt;li>31%-45%&lt;/li>
&lt;li>46%-60%&lt;/li>
&lt;li>61%-75%&lt;/li>
&lt;li>76%-100%&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="10-对于您工作的主要应用或服务部署过程需要多长时间才能使软件新版本可供用户使用">10. 对于您工作的主要应用或服务，部署过程需要多长时间才能使软件新版本可供用户使用：&lt;/h3>
&lt;ul>
&lt;li>小于1小时&lt;/li>
&lt;li>在1小时和1天之间&lt;/li>
&lt;li>在1天和3天之间&lt;/li>
&lt;li>在3天和1周之间&lt;/li>
&lt;li>在1周和1个月之间&lt;/li>
&lt;li>大于1个月&lt;/li>
&lt;li>我不知道或不适用&lt;/li>
&lt;/ul>
&lt;h3 id="11-您如何监控和了解正在运行的系统">11. 您如何监控和了解正在运行的系统：&lt;/h3>
&lt;ul>
&lt;li>我的团队有一套技术解决方案用以报告系统的整体健康状况（如系统功能是否正常？系统是否有充足的可用资源等？）。&lt;/li>
&lt;li>我的团队有一套技术解决方案用以报告基于用户使用情况的系统状态（如用户是否知道系统已关闭，是否有不良的体验等？）。&lt;/li>
&lt;li>我的团队有一套技术解决方案用以监控主要业务和系统参数。&lt;/li>
&lt;li>我的团队有工具用于协助我们了解和调试生产环境上的系统。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h2 id="第九部分">第九部分&lt;/h2>
&lt;p>这页面询问了一些细节关于您的技术环境和工作&lt;/p>
&lt;p>请选择以下之一&lt;/p>
&lt;h3 id="1--为了部署我们的软件解决方案我的团队使用以下ci--cd-测试自动化工具链">1. 为了部署我们的软件解决方案，我的团队使用以下CI / CD /测试自动化工具链&lt;/h3>
&lt;ul>
&lt;li>主要是内部开发（自研）的，且所有权属于我的组织&lt;/li>
&lt;li>混合使用专有工具，开源和商业现成软件&lt;/li>
&lt;li>主要是开源和商用现货，高度定制&lt;/li>
&lt;li>主要是开源和商用现货，很少定制&lt;/li>
&lt;li>主要是商业现成的套装软件&lt;/li>
&lt;li>主要是开源的，高度定制&lt;/li>
&lt;li>主要是开源的，很少定制&lt;/li>
&lt;li>其他&lt;/li>
&lt;li>不适用或我不知道&lt;/li>
&lt;/ul>
&lt;h2 id="2-请评价您对以下说法的同意或不同意程度">2. 请评价您对以下说法的同意或不同意程度&lt;/h2>
&lt;ul>
&lt;li>在我的团队中，与组织中的其他团队相比，我们的CI/CD/自动化测试过程和工具是为我们的需求而定制的&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="3-请评价您对以下说法的同意或不同意程度-通过ci--cd工具链部署软件时">3. 请评价您对以下说法的同意或不同意程度。 通过CI / CD工具链部署软件时：&lt;/h3>
&lt;ul>
&lt;li>使用CI / CD工具链可以提高我的效率在我的工作中&lt;/li>
&lt;li>使用CI / CD工具链在我的工作中提高我的生产力&lt;/li>
&lt;li>使用Ci/CD工具链提高了我的工作效率&lt;/li>
&lt;li>我发现CI / CD工具链在我的工作中很有用。&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="4-请评价您对以下说法的同意或不同意程度-通过ci--cd-测试自动化工具链部署软件时">4. 请评价您对以下说法的同意或不同意程度。 通过CI / CD /测试自动化工具链部署软件时：&lt;/h3>
&lt;ul>
&lt;li>我的交互在工具链是清晰易懂的&lt;/li>
&lt;li>与工具链交互并不需要我的大量精力&lt;/li>
&lt;li>我发现工具链容易使用&lt;/li>
&lt;li>我发现容易让工具链做我想要做的事&lt;/li>
&lt;/ul>
&lt;p>(强烈反对 不同意 不太同意 既不赞成也不反对 有点同意 同意 非常同意 我不知道/不适用)&lt;/p>
&lt;h3 id="5-选择最能代表谁负责创建和维护ci--cd-测试自动化工具链及其配置的选项">5. 选择最能代表谁负责创建和维护CI / CD /测试自动化工具链及其配置的选项：&lt;/h3>
&lt;ul>
&lt;li>我们的团队有完全自治选择和配置自己的CI / CD /自动化测试的工具链。&lt;/li>
&lt;li>我们需要使用一个统一工具链，但是我们为构建/测试/部署过程维护自己的脚本，并且在配置方式上有很多自主权。&lt;/li>
&lt;li>我们需要使用一个统一工具链具有预配置脚本和构建步骤，测试和部署过程的步骤，我们可以根据需要重构或自定义。&lt;/li>
&lt;li>我们需要使用带有预配置脚本和步骤的统一工具链，而我们几乎没有能力重构它&lt;/li>
&lt;li>所有构建，测试和部署软件，都由我们建立的统一团队处理&lt;/li>
&lt;li>不适用或我不知道&lt;/li>
&lt;/ul>
&lt;h3 id="6-我的工具链包括以下内容请选择所有适用的选项">6. 我的工具链包括以下内容（请选择所有适用的选项）&lt;/h3>
&lt;ul>
&lt;li>自动化构建&lt;/li>
&lt;li>自动化单元测试&lt;/li>
&lt;li>自动化验收测试&lt;/li>
&lt;li>自动化性能测试&lt;/li>
&lt;li>自动安全测试&lt;/li>
&lt;li>自动化配置和部署到测试环境&lt;/li>
&lt;li>自动化部署到生产&lt;/li>
&lt;li>与chatbots / Slack集成&lt;/li>
&lt;li>与生产监控和可视化工具集成&lt;/li>
&lt;li>以上都不是&lt;/li>
&lt;/ul>
&lt;h2 id="第十部分">第十部分&lt;/h2>
&lt;p>最后一页！请花几分钟时间告诉我们你自己。 
请注意，此数据仅用于研究目的，此调查是匿名的，仅以匿名方式汇总报告。&lt;/p>
&lt;h3 id="1-你的性别">1. 你的性别？&lt;/h3>
&lt;ul>
&lt;li>男&lt;/li>
&lt;li>女&lt;/li>
&lt;li>非二元&lt;/li>
&lt;li>不想回应&lt;/li>
&lt;/ul>
&lt;h3 id="2-在您的团队中工作的女性比例是多少">2. 在您的团队中工作的女性比例是多少？&lt;/h3>
&lt;p>请输入0到100之间的数字。 &lt;/p>
&lt;ul>
&lt;li>女性团队的百分比： [___]&lt;/li>
&lt;li>不想回应&lt;/li>
&lt;/ul>
&lt;h3 id="3-您是否认定为少数派群体的成员">3. 您是否认定为少数派群体的成员？&lt;/h3>
&lt;ul>
&lt;li>是&lt;/li>
&lt;li>没有&lt;/li>
&lt;li>不想回应&lt;/li>
&lt;/ul>
&lt;h3 id="4-你认定是残疾人吗">4. 你认定是残疾人吗？&lt;/h3>
&lt;p>包括与视觉，听觉，步行，记忆/集中，自我保健或沟通相关的残疾&lt;/p>
&lt;ul>
&lt;li>是&lt;/li>
&lt;li>没有&lt;/li>
&lt;li>不想回应&lt;/li>
&lt;/ul>
&lt;h3 id="5-哪个最贴切地描述了你的工作角色">5. 哪个最贴切地描述了你的工作角色？&lt;/h3>
&lt;ul>
&lt;li>开发或工程师&lt;/li>
&lt;li>DevOps或SRE&lt;/li>
&lt;li>信息安全&lt;/li>
&lt;li>IT运营或基础设施&lt;/li>
&lt;li>网络运营&lt;/li>
&lt;li>产品管理&lt;/li>
&lt;li>用户体验或软件分析&lt;/li>
&lt;li>经理&lt;/li>
&lt;li>专业服务&lt;/li>
&lt;li>质量工程师或QA&lt;/li>
&lt;li>发布工程师&lt;/li>
&lt;li>销售工程师&lt;/li>
&lt;li>销售或营销&lt;/li>
&lt;li>我是顾问、教练或培训师&lt;/li>
&lt;li>我是C级高管&lt;/li>
&lt;li>我是学生&lt;/li>
&lt;li>我不属于任何部门&lt;/li>
&lt;li>其他&lt;/li>
&lt;li>不想回答&lt;/li>
&lt;/ul>
&lt;h3 id="6-你有多少年的经验">6. 你有多少年的经验？&lt;/h3>
&lt;ul>
&lt;li>0-2&lt;/li>
&lt;li>3-5&lt;/li>
&lt;li>6-10&lt;/li>
&lt;li>11-15&lt;/li>
&lt;li>超过16&lt;/li>
&lt;li>不想回应&lt;/li>
&lt;/ul>
&lt;h3 id="7-请选择您所在的地理区域">7. ­­­­­请选择您所在的地理区域：&lt;/h3>
&lt;ul>
&lt;li>非洲&lt;/li>
&lt;li>亚洲&lt;/li>
&lt;li>中美洲&lt;/li>
&lt;li>东欧洲&lt;/li>
&lt;li>欧洲联盟&lt;/li>
&lt;li>中东&lt;/li>
&lt;li>北美&lt;/li>
&lt;li>大洋洲&lt;/li>
&lt;li>南美洲&lt;/li>
&lt;li>加勒比&lt;/li>
&lt;/ul>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>本文是否帮你解答了这样一个疑问：每年的DevOps状态报告中的参考数据是从哪里来的？是通过什么方式采集的？到目前为止，我们还不清楚这些数据是通过什么打分规则和算法处理的。如果你是这方面的专家，请和我们分享以下你的观点。&lt;/p></description></item><item><title>2019年DevOps状态调查问卷开放中</title><link>https://martinliu.cn/blog/2019%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E9%97%AE%E5%8D%B7%E5%BC%80%E6%94%BE%E4%B8%AD/</link><pubDate>Sat, 20 Apr 2019 22:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/2019%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E9%97%AE%E5%8D%B7%E5%BC%80%E6%94%BE%E4%B8%AD/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/abstract-4.jpg" alt="Featured image of post 2019年DevOps状态调查问卷开放中" />&lt;p>2019年加速度DevOps状态调查首发，首发的位置在Google Cloud网站上的Blog栏目，发布于产品新闻分类下。&lt;/p>
&lt;ul>
&lt;li>文章使用的主标签 DevOps 、SRE。&lt;/li>
&lt;li>文章地址：https://cloud.google.com/blog/products/devops-sre/make-your-voice-heard-take-the-2019-accelerate-state-of-devops-survey&lt;/li>
&lt;/ul>
&lt;p>关于今年的状态调查有什么更新和变化，文章中只给出了一句话的概况：今年会对部署工具链、云计算、灾难恢复和工作方式等主题进行深度调查。更详细的情况，详细你参与完问卷调查只有自由评判。&lt;/p>
&lt;h2 id="如何参与2019年devops状态调查">如何参与2019年DevOps状态调查&lt;/h2>
&lt;p>点击这个链接 &lt;a class="link" href="https://bit.ly/2UzLMH2" target="_blank" rel="noopener"
>https://bit.ly/2UzLMH2&lt;/a> ，进入问卷调查网站。&lt;/p>
&lt;p>从围观到参与是一种积极的态度。与其观望这份行业报告的产生过程，倒不如参与其中。由于今年这个问卷调查是Google发起的，可能会有更多的人会参与。&lt;/p>
&lt;p>精通英文的人应该能在半个小时内完成这个调查。如果英文不好的话，最多也用不了2个小时，以上推测，基于我去年的填写经历。&lt;/p>
&lt;p>我还想发起一个基于这个调查的兴趣小组，请符合以下条件之一的人进微信群交流：&lt;/p>
&lt;ol>
&lt;li>正在认证填写这份问卷，想从群里获得必要的帮助，从而可以能正确的作答。&lt;/li>
&lt;li>想研究这份文件的题库，大家共同分析DORA设问的目标和结构。&lt;/li>
&lt;li>跟进一步的，交流关于DevOps度量方面的话题&lt;/li>
&lt;/ol>
&lt;h2 id="关于2018年的devops状态报告">关于2018年的DevOps状态报告&lt;/h2>
&lt;p>有幸去年策划和参与了这份报告的翻译工作。也算是相对其他人更深入的学习和研究了去年的结果。并对它的总结和推论都有非常深刻的印象，也受益匪浅。&lt;/p>
&lt;p>2018年DevOps状态调查报告的中文版本，在2018年DevOpsDays 深圳大会上做了发布，我也在台上和张乐一起向与会者做了简短的分享。如果你需要下载学习的话，请点击下面的链接（扫码二维码），这里还有历年来英文版报告全集和部分中文版本。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1555778529/reports-download.png.png"
loading="lazy"
alt="下载"
>&lt;/p>
&lt;p>在2018年里Nicole Forsgren博士发布了《Accelerate》这本书，书里算是对这场从2014年开始的，持续对年的行业专项调查研究的一个总结。书中对度量DevOps这个主题做了详解科学的解读，它是那些需要度量DevOps成果的组织的一本很好的参考书。中文版本据说在翻译的过程中，期待它的出版。等不及的话可以去国外买英文电子版，这本书我是读了不下三遍，也做了相关的分享演讲，确实有很多收获。&lt;/p>
&lt;p>分享几个我观察到的小细节：&lt;/p>
&lt;ul>
&lt;li>DORA在2018年结束了与Puppet公司的合作调查，因此2018年的报告标题中增加了一个单词“加速度”，即：2018 Acclerate State of DevOps Report； 以前的都叫做 xxxx年 State of DevOps Report。&lt;/li>
&lt;li>Puppet公司也没有闲着，Puppet和Splunk公司携手也进行了状态调查和分析，也发布了名为《2018 State of DevOps Report》，问卷的问题肯定和以前无法延续和持续的，但是报告的命名保持下来了。我猜这也是为何DORA的报告需要加一个词的原因，&lt;/li>
&lt;/ul>
&lt;p>总结一下，由Nicole Forsgren博士主持进行的DevOps状态调查报告的下载站点都在 &lt;a class="link" href="https://puppet.com/resources/whitepaper" target="_blank" rel="noopener"
>https://puppet.com/resources/whitepaper&lt;/a> ， 在这里依然可以下载到名为 2018 State of DevOps Report 的报告，但是这一个和Nicole博士无关；所有她主持的报告下载地址在她的DORA网站上 &lt;a class="link" href="https://devops-research.com/research.html" target="_blank" rel="noopener"
>https://devops-research.com/research.html&lt;/a> 。 在DORA加入了Google Cloud以后，Nicole博士主持的调查问卷名为“ Accelerate State of DevOps Report” ； 相信我们所期待的最终的分析结果的标题应该是“ 2019 Accelerate State of DevOps Report” ； 而Puppet公司应该还是会持续发布名为“2019 State of DevOps Report”的报告。我相信肯定会有很多人在2018年去年就有点晕了，怎么出来两个名字相似，可是内容大相径庭的DevOps状态报告。&lt;/p>
&lt;h2 id="devops背后的科学访谈nicole-forsgren">DevOps背后的科学：访谈Nicole Forsgren&lt;/h2>
&lt;p>最近在Nicole Forsgren正式发布了2019年的DevOps状态调查报告之后，她接受了RealWorldDevOps电台的访问。Nicole Forsgren保持这一贯的爽朗、认真和理性的特点，与电台主播迈克进行了42分钟的畅谈。&lt;/p>
&lt;ul>
&lt;li>访谈英文原文：https://www.realworlddevops.com/episodes/the-science-behind-devops-with-dr-nicole-forsgren 在这个页面上还可以收听或者下载这期访谈节目。&lt;/li>
&lt;li>英文原文的翻译版本（Google机器翻译，为修订）见下文。&lt;/li>
&lt;li>访谈中的几个关键内容（并不是所有观点）：
&lt;ul>
&lt;li>2014年开始DevOps状态调查分析和报告工作&lt;/li>
&lt;li>这项工作前期与Puppet公司合作进行&lt;/li>
&lt;li>Nicole和Jez Humble建立了独立的DORA，即DevOps Research &amp;amp; Assessment公司 &lt;a class="link" href="https://devops-research.com/" target="_blank" rel="noopener"
>https://devops-research.com/&lt;/a>&lt;/li>
&lt;li>2018年12月DORA被Google收购，Nicole加入Google后，Google将作为DORA的特别调查样本和支持公司，保持DORA持续进行。&lt;/li>
&lt;li>Nicole叙述了最有意义的三件事：架构高于技术，云计算很重要，外包是不起作用的。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>在这次访谈中，我们也可以听出一点关于这个行业调查的宗旨和调性。紧跟时代发展步伐，每年做一定的突破和更新，保持厂商/工具无关性等等。具体内容详见下面的机器翻译文字。&lt;/p>
&lt;h3 id="访谈笔录">访谈笔录&lt;/h3>
&lt;p>以下为电台网站英文版本的直接机器翻译，未做修订，不保证能够被人正确理解；有疑问的地方请参考英文原文和访谈音频。&lt;/p>
&lt;hr>
&lt;p>迈克朱利安：这是真实的世界DevOps播客，我是你的主持人迈克朱利安。我正准备在DevOps世界中遇到最有趣的人。从您喜爱的工具的创作者到精彩会议的组织者，以及出色的公共演讲者的伟大着作的作者，我想向您介绍我能找到的最有趣的人。&lt;/p>
&lt;p>迈克朱利安：啊，崩溃报道。经常被遗忘的一块坚实的监控策略。您是否很难复制您从用户那里听到的错误或难以捉摸的性能问题？你应该看看Raygun。无论你是负责网络应用程序还是移动应用程序，Raygun都可以在几分钟内轻松找到并诊断出问题，而不是你通常做的事情，如果你像我一样，请问最近的人，“嘿，是app适合你？“得到一个空白的凝视，因为嘿，这是星巴克，谁是一个奇怪的人提出有关移动应用程序性能的问题？无论如何，Raygun，我个人感谢他们帮助使这个播客成为可能。您可以访问raygun.com查看今天的免费试用版。&lt;/p>
&lt;p>迈克朱利安：嗨伙计们。我是Mike Julian，你是Real World DevOps Podcast的主持人。本周我的客人是Nicole Forsgren博士。您可能知道她是“加速：精益软件和DevOps的科学”一书的作者，或者可能是年度DevOps状态报告背后的研究员。当然，这不是全部。她也是最近被谷歌收购的DevOps研究和评估的创始人，他是管理信息系统和会计教授，同时也是一名性能工程师和系统管理员。说我很高兴与你交谈，这可能是一种轻描淡写。所以，欢迎来到节目。&lt;/p>
&lt;p>Nicole Forsgren：谢谢。很高兴来到这里。我很高兴我们终于联系了。我们试图做多久了？&lt;/p>
&lt;p>迈克朱利安：几个月。我想我已经联系过你了，现在已经是三月了。我在11月份到达了，你说，“嗯，你知道，我还有其他的东西在继续，顺便说一句，我的公司被收购了。”&lt;/p>
&lt;p>Nicole Forsgren：那么，那时候，我必须狡猾，对吧？我不得不说，“我有一个真正的大项目。我很抱歉。我们以后可以见面吗？”而且，上帝保佑，你是非常仁慈和善良的，你说，“当然 - ”&lt;/p>
&lt;p>迈克朱利安：谢谢你。&lt;/p>
&lt;p>Nicole Forsgren：&amp;hellip;&amp;hellip;“我们以后可以聊聊。”然后我想你在说：“哦，恭喜你的&amp;rsquo;大项目&amp;rsquo;&amp;lsquo;之后给我发了一条消息。”我说，“谢谢。”&lt;/p>
&lt;p>迈克朱利安：听起来不错。&lt;/p>
&lt;p>Nicole Forsgren：我很感激。是啊。然后，你再次伸出手，我说，“哦，我正在做另一个大项目。但是，这一次&amp;hellip;&amp;hellip;”&lt;/p>
&lt;p>迈克朱利安：这不是收购。&lt;/p>
&lt;p>Nicole Forsgren：是的，这不是收购。这一次，这是一个正常的大项目，这是今年的DevOps状态报告。我们刚刚启动了调查，所以我非常兴奋，我们再次收集数据。&lt;/p>
&lt;p>迈克朱利安：所以我们可以解决这个问题，你在哪里可以找到DevOps状态报告？&lt;/p>
&lt;p>Nicole Forsgren：所有DevOps状态报告都在DORA网站上发布。我们仍然有网站。我们所参与的所有报道，我想说我们从2014年开始，我已经很老了，我已经忘记了。我们完成的所有报告都是托管的。我们会在演出笔记中发布它们。如果你可以拿自己的健怡可乐或咖啡或茶或水，或者你想要波本威士忌。舒服。坐下来，大约需要25分钟。我知道，对，每个人都喜欢，“女孩，25分钟？”&lt;/p>
&lt;p>迈克朱利安：这是一项重大调查。&lt;/p>
&lt;p>妮可福斯格伦：我知道。它是。但这是因为DevOps状态报告是科学的，对吧？我们研究预测，而不仅仅是相关性。但请坐下来，舒服一点，让我知道做你的工作是什么感觉。因为今年我们正在挖掘其他一些东西;生产力，工具链，关于职业倦怠和幸福的额外事情，以及我们如何进入流动，以及真正的样子。还有一些非常棒的事情是，在以非常深思熟虑的方式进行调查之后，已经有很多人已经准备好了。顺便说一下，如果你有的话，我爱你们所有人。与同事分享，与同行分享。&lt;/p>
&lt;p>但是他们已经说过，仅仅通过参加调查，他们已经离开了，甚至在报告出来之前，他们已经走开了有关如何使他们的工作更好的非常有趣的想法和技巧和见解。&lt;/p>
&lt;p>迈克朱利安：是的，想到这一点很疯狂，参加调查的行为实际上改善了我的工作。因为我采取的大多数调查，我已经完成了，我想，“嗯，这有点浪费时间。”感觉就像我只是放弃了一堆东西而没有得到任何东西。&lt;/p>
&lt;p>Nicole Forsgren：是的，我认为这种方式起作用的原因是因为我们对问题的处理方式非常谨慎，有时只是采取调查的行为可以帮助你思考你的工作方式。因此，采取某些问题的行为可以帮助人们思考他们正在做的事情。然后，当然，就像我开玩笑说，这是我的生活圈，调查将持续到5月3日，然后我将进入数据分析和报告撰写。我们预计报告本身将在8月中旬左右公布。&lt;/p>
&lt;p>迈克朱利安：嗯，为什么我们不退后几步说&amp;hellip;每个人都喜欢一个好的起源故事。很多年前，我相信你和我在一次LISA会面。您正在与Carolyn Rowland联合举办研讨会 -&lt;/p>
&lt;p>Nicole Forsgren：哦，我喜欢Carolyn。&lt;/p>
&lt;p>迈克朱利安：是的，她也很精彩。我应该让她在这里。&lt;/p>
&lt;p>妮可福斯格伦：我的双胞胎。是。绝对。&lt;/p>
&lt;p>迈克朱利安：所以当我第一次见到你时你就是一名教授。我想，你知道教授在LISA上闲逛，并就如何理解商业价值给出了所有这些很好的建议，我认为这绝对令人着迷。教授，在DevOps世界中闲逛，这是怎么发生的？&lt;/p>
&lt;p>Nicole Forsgren：哦，天哪。好的，有趣的是，我实际上是从工业开始的。我的第一份工作是在一个主框架上，编写医疗系统，然后编写财务系统。所以我是一名大型机程序员。然后支持我的主框架系统，对吧？这就是Ops中我们这么多人在Ops中开始的原因，有人说，“好吧，有人必须这样做。”对？我还在学校，然后我最终成为DEV，对吗？我在IBM担任软件工程师已有好几年了，然后转向学术界。我得到了博士学位，在那里我开始询问有关如何分析系统的问题，所以我实际上在做NLP，自然语言处理。&lt;/p>
&lt;p>迈克朱利安：很有意思。&lt;/p>
&lt;p>Nicole Forsgren：是的，我在做&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>迈克朱利安：是的，这是一个奇怪的切入点。绝对不是我所期望的。&lt;/p>
&lt;p>Nicole Forsgren：是的，所以疯狂的事情，我的第一年实际上是欺骗检测。&lt;/p>
&lt;p>迈克朱利安：我打赌这太棒了。&lt;/p>
&lt;p>Nicole Forsgren：这真的很有趣，非常有趣。但是我从系统工作中充分利用了我的背景，对吧？因为我们做什么？我们分析日志系统。&lt;/p>
&lt;p>迈克朱利安：对。&lt;/p>
&lt;p>妮可福斯格伦：对吗？我们习惯于以凌乱的格式分析大量数据，很多时候基于文本，超级嘈杂，不能总是信任它，对吧？现在人们都说，“我不相信调查。人们撒谎。”孩子们，我们的系统也是如此。&lt;/p>
&lt;p>迈克朱利安：一直以来。&lt;/p>
&lt;p>妮可福斯格伦：对吗？所以，他们喜欢我的一大堆这项工作。突然间，我随机对系统管理员进行了可用性研究。我们写了结果，把它们还给了IBM，IBM就像是，“你的意思是什么？我们遵循UCD指南，用户中心设计指南。这应该是适用的。”我就像是，“等等，哇哇哇哇哇哇哇哇哇哇哇哇哇哇&lt;/p>
&lt;p>当时，他们为所有用户提供了一套UCD指南。超级先进，高级别的高级系统管理员，他们正在做备份，灾难恢复，一切。那些买过笔记本电脑并且在生命中第一次使用电子邮件的人。&lt;/p>
&lt;p>迈克朱利安：我确信那个过得很好。&lt;/p>
&lt;p>妮可福斯格伦：什么？我想，“就是这样。改变我的论文。”当然，这让我的顾问惊慌失措。他们就像是，“你会去做什么？”所以我开始做什么，当时是DevOps的基础。那是什么，你如何理解和预测信息系统？通过信息系统，技术，自动化，使用和预测，然后是团队，组织层面的个人团队的结果和影响。&lt;/p>
&lt;p>现在，我说了所有这些，那是大词，这是学术用语，基本上是什么是DevOps。我如何理解人们何时使用自动化和流程以及工具和文化，以及我如何知道它汇总起来以产生影响并增加价值？现在我们就像，“哦，那是DevOps。”&lt;/p>
&lt;p>这是2007年末。&lt;/p>
&lt;p>迈克朱利安：哦，哇。所以你和我们在一起很早。&lt;/p>
&lt;p>Nicole Forsgren：是的。这是一个非常有趣的平行轨道，因为现在我们回顾过去，我们就像，大约10年前。这与DevOps同时是新生的起源，对吧？所以，我们这么多人在同一时间偶然发现了它。我不知道这是在工业中发生的事情。我一直在偷偷摸摸，我一直这样做，偶然发现LISA，试图连接数据，当然，就像每个好学者一样。拼命想找到数据。&lt;/p>
&lt;p>偶然发现，撞到了一个收集类似东西但使用不同粗糙方法的小组。一个来自一个可爱的小配置管理创业公司的团队叫做Puppet，对吧？开始与他们合作，邀请自己参与该项目。上帝保佑他们，我对他们有如此多的爱和尊重，因为他们基本上让这个随机的，随机的学术撕裂他们的研究并重做它并亲切地告诉我以前从未见过的这两个家伙，在电话中，名叫Jean和Jez，他们做错了什么，他们使用的这个词不是正确的词。 Redid，在2013年末，DevOps状态报告，使其在学术上严谨，然后，持续了几年，对吗？然后突然间，我们在几年后重新编写了一堆东西。&lt;/p>
&lt;p>我离开学术界，离开即将任职的地方，去另一个可爱的小配置管理创业公司Chef，这很有趣，对吗？因此，我正在与Puppet合作，为Chef工作，并继续研究并与组织和公司合作。我离开了学术界，因为我看到这个疯狂的DevOps事情有所作为。但是在学术界，他们还没有完全掌握它。而且我想确保我可以做出更大的改变，因为我在98,99,2000开始在大学的科技工作;我们举起这个疯狂的网络泡沫破灭。&lt;/p>
&lt;p>它不是一场萧条，因为一切都崩溃了，世界就像人们想象的那样结束了，但公司失败了，它对人们的遭遇产生了巨大的影响和影响。他们失去了工作，打破了家庭，他们感到沮丧，影响了他们的生活，有些人正在自杀。而且我非常担心当我们再次击中这一波时会发生什么，我们又开始看到那次击中。那么，如果公司和组织不了解制造技术的智能方法会发生什么，因为你不能只是让人们不顾问题，或者让同样的人陷入困境。当我说同样的人扔我的意思时，七天强行游行。&lt;/p>
&lt;p>当他们让我们这样做时，我在IBM，对吗？他们陷入集体诉讼，你不能这样做。这不是一种生活方式。&lt;/p>
&lt;p>迈克朱利安：是的，我参与其中很多，他们是残酷的。而且它们没有任何有用的结果。&lt;/p>
&lt;p>Nicole Forsgren：这只是破碎的心灵和破碎的生命，对吧？所以，有些人喜欢说，你真的关心这个。我只是这个书呆子的学者，他只关心我做的事情。因此，如果我们真的可以，从根本上改变人们制作软件的方式，因为如果它实际上实际上，从根本上改善了他们的生活&amp;hellip;&amp;hellip;让我们这样做。&lt;/p>
&lt;p>然后，感谢上帝，我们发现它确实存在。当然，它很好地为企业提供价值，但这很重要，因为那时它的作用是帮助他们做出更明智的投资，因为这样可以减少倦怠。它让人们更快乐，让他们的生活更美好，我认为这是重要的部分。&lt;/p>
&lt;p>迈克朱利安：所以你发现的是，一家公司实施所有这些更好的持续部署实践，更快的交付时间，更快的价值实现&amp;hellip;&amp;hellip;它使人们的生活更好地完成了工作？&lt;/p>
&lt;p>Nicole Forsgren：是的，John Shook也发现了这一点。对？他在精益中做了这项伟大的工作，为了改变&amp;hellip;有些人说，“你如何改变文化？”让我们找到改变文化的方法。有时，改变文化的最佳方式是改变你的工作方式，我相信我们已经看到了自己，对吗？在我们生活的其他方面。改变我们的感受，改变家庭的工作方式，改变我们的关系工作方式。你实际上改变了你的生活经历，或者你生活经历的某些方面。&lt;/p>
&lt;p>因此，如果我们改变我们制作软件的方式，我们将改变我们团队的运作方式，这正在改变文化的方式。换句话说，如果我们可以告诉我们的组织在技术和流程方面做出哪些明智的投资，那么我们也可以改善文化。我们也可以改变人们的生活吧？微软Bing团队发现了这个，对吧？他们希望在持续交付方面进行明智的投资。&lt;/p>
&lt;p>在一年之内，他们看到了工作生涯的分数，我将其从头脑中拉下来，但我想说它从38％上升到75％。那太大了。&lt;/p>
&lt;p>迈克朱利安：这是一个令人难以置信的跳跃。&lt;/p>
&lt;p>妮可福斯格伦：对。这是因为人们能够在工作中离开工作然后回家。你可以去看你的家人，你可以去看电影，你可以去吃饭，你可以有爱好，或者你可以去狂欢看格雷的解剖。你可以做你想做的。&lt;/p>
&lt;p>迈克朱利安：这对我来说最令人难以置信的事情之一是，为了让公司取得成功，他们必须推动员工，让他们通过振铃器。直观地说，这是永远不会正确的。而你实际上有数据表明这是不对的。做这些事实上让每个人都变得更好。业务得到了显着改善，人们的生活得到了极大的改善，而且一切都很棒。&lt;/p>
&lt;p>Nicole Forsgren：是的，如果我们想要推动人们，这是不可持续的。如果有的话，我们希望推动人们做他们擅长的事情，我们希望利用自动化来实现自动化擅长的事情。那是什么意思呢？&lt;/p>
&lt;p>我们希望让人们做有创意，创新，新颖的事情。让我们让人们解决问题，让自动化做我们需要的一致性，可靠性，可重复性，可自动性。让我们不要让人敲打锤子并不断进行手动测试。让我们让人们弄清楚如何解决问题，做一两次以确保这是正确的事情，自动化，将其委托给自动化，机器和工具，交付，完成，然后拉人回到循环中进入循环，找出新的东西。&lt;/p>
&lt;p>我认为是Jesse Purcell说：“我想让自己不断自动化。”对？使自己脱离当前的工作，然后找到一份新工作，让自己再次自动化。我们永远不会失业。&lt;/p>
&lt;p>Mike Julian：是的，当我第一次开始使用DevOps时，我常常担心这一点，实际上，当我第一次开始自动化时，当时并不是DevOps，它是在大学中自动化Windows桌面部署。这是在21世纪初。我最大的担忧之一是，因为我花了半个星期的时间来做这件事，如果我要自动化，我会花一个小时做这个，剩下的时间我会做什么呢？他们只是要解雇我，因为他们不再需要我了。&lt;/p>
&lt;p>事实证明，不，这根本不是发生的事情。更高的工作价值变得有效，因为我并没有那么专注于辛劳。&lt;/p>
&lt;p>Nicole Forsgren：对，那些类型的东西，机器和电脑都做不到。而另一件事，我曾经告诉我的所有朋友，在工作保障方面不考虑这一点，对吧？不要试图将自己描绘成一个别人无法做到的事情，因为那样你就无法被替换，因为这也意味着你永远无法得到晋升。&lt;/p>
&lt;p>如果我们始终确保工作的某些方面可以实现自动化，以便我们有机会获得新工作，那么这只会为创造更多的事物创造更多机会。总会有问题，我们总有一些问题需要解决。我不想被困在做无聊的工作。&lt;/p>
&lt;p>迈克朱利安：是的，上帝知道这是事实。&lt;/p>
&lt;p>妮可福斯格伦：哦，天哪，我知道。我不想被困在做无聊，重复的工作。这简直令人头痛。如果我们能找到，特别是真正具有挑战性的复杂事物，如果我们能找到自动化的方法，相信我，我们永远不会把自己挖到那个洞的底部。那总是存在的。&lt;/p>
&lt;p>Mike Julian：所以我想谈谈DevOps状态报告，我想先问一个你之前提到过的问题。你提到这句话，学术严谨。那是什么意思？&lt;/p>
&lt;p>Nicole Forsgren：学术严谨包括一些事情，好吗？因此学术严谨的一部分是研究设计。所以这不只是在回答一堆问题&amp;hellip;&amp;hellip;对不起，yolo是我的简写，“你的方法论是有问题的。”&lt;/p>
&lt;p>迈克朱利安：我最近看到很多调查结果出来了。&lt;/p>
&lt;p>Nicole Forsgren：是的。所以一个是研究设计。有人说，“妮可，研究设计是什么意思？”那么研究设计是，您要求的问题类型是否与您用于收集数据的方法相匹配？对？这些东西是否匹配？对于某些事情，调查是恰当的。一次，所以一次是横截面，一个时间跨整个行业的调查。有些事情适合。有些事情不适合。&lt;/p>
&lt;p>一个很好的例子，很多人真的希望我在DevOps状态报告中做开放空间和问题。&lt;/p>
&lt;p>迈克朱利安：这是什么意思？喜欢开放式问题？&lt;/p>
&lt;p>Nicole Forsgren：不，开放空间。所以很多人对开放式办公空间有很多感觉。我应该在开放的办公空间工作吗？开放办公空间会影响生产力吗？或配对编程&amp;hellip;&amp;hellip;配对编程会影响生产力吗？配对编程会影响质量吗？人们对这些事情有很多感觉。在DevOps状态报告中使用的研究设计类型是一个完全匿名部署的调查，在整个行业中的单个时间点，并不适合回答其中任何一个问题的研究设计。&lt;/p>
&lt;p>迈克朱利安：那是为什么？&lt;/p>
&lt;p>Nicole Forsgren：因为您需要做的是拥有更加可控的研究设计。所以我需要知道，例如，你和谁一起工作。我需要知道，所以让我们继续进行同行评审，我需要知道你正在处理的问题类型，代码问题的类型，我现在需要问题的复杂性，我需要知道它花了多长时间，对吧？如果你现在想要提高生产力，对吧？因为我需要了解一定的生产力。我需要知道结果是什么。因此，如果我的结果是生产力，我需要衡量生产力，因为我需要控制困惑，对吧？因为事情比较复杂，我们希望花更长的时间。那些不那么复杂的东西，我希望不会那么久，对吧？&lt;/p>
&lt;p>然后我需要匹配和控制。对？甚至像开放式办公空间这样的东西，对吧？因为如果你在一个开放的办公空间而不是一个开放的办公空间进行同行编程，如果你在办公室里这样做，我需要知道这个人的资历，或者一些资历代理。我现在需要你如何配对，你是否与你的近似经验水平的人配对，如果不是资历经验水平。我需要知道配对编程是如何工作的，我需要知道所涉及的技术，我需要知道你是否偏远，或者你是否真的坐在一起。我需要知道你是否能够同时输入文本，或者是否有人插入而另一个人没有。&lt;/p>
&lt;p>因此，当我进行比较时，我知道比较是什么样的。&lt;/p>
&lt;p>迈克朱利安：这是一个令人难以置信的信息量。我没想到你必须知道这么多才能从中得到一个好的答案。&lt;/p>
&lt;p>Nicole Forsgren：这不是我的头脑。是的，因为你问了我一个很好的问题，我吐了一口气。这只是研究设计，然后你继续分析，对吗？当您继续进行分析时，我们需要了解您提出的问题类型。这些类型的问题，我们是否在考虑相关性？我们在看预测吗？我们在考虑因果关系吗？我们提供哪些类型的数据以及适合哪种类型的分析和问题？&lt;/p>
&lt;p>同样，他们需要以正确的方式匹配。某些类型的数据不适用于某些类型的分析或问题。所以你真的需要确保每一个都适合于正确类型的东西。对？某些类型的分析，如机械，调查问题，永远不适合机械分析，对吧？虽然，老实说，没有人会做机械分析。从来没有，顺便说一句，如果有人来找我并说他们正在做机械分析，我会坐下来非常专心地听你的，非常感兴趣，因为我认为没有人在做机械&amp;hellip;&amp;hellip;这不是一个事情。&lt;/p>
&lt;p>迈克朱利安：所以当你分析调查结果时，我们看到的是一个问题，然后是另一个问题，接下来是另一个问题，你知道数百个问题。当您分析这些内容时，您是在一次查看问题，还是在查看多个问题，然后根据您在几个不同问题中看到的内容来解释答案？&lt;/p>
&lt;p>Nicole Forsgren：所以当我写完结果时，当我写这份报告时，我正在写出我的分析结果，而我的分析正在考虑一个非常非常仔细的研究设计。现在意味着什么，我的研究设计经过精心构建，以尽量减少误解。它试图尽量减少答案中的漂移。所以，我们这样做的一种方式，这在加速的第二部分中概述，如果有任何想要阅读的统计数据书呆子，我们做的事情称为潜在结构。&lt;/p>
&lt;p>所以，你问过只有几个问题或几个问题。我提到过，我们这样做的一种方式称为潜在构造。如果我想问你关于文化的话，我可以向10个人询问文化，我会得到15个答案。因为文化可能意味着许多不同的事情，对吗？一般来说，当我们在DevOps环境中谈论文化时，我们倾向于得到一些东西&amp;hellip;&amp;hellip;人们会说非常常见的事情，如打破孤岛，拥有良好的信任，拥有新奇，对吧？&lt;/p>
&lt;p>因此，我们所做的是从定义开始，然后我们将提出几个项目，问题，捕获每个维度。所以你可能想要考虑一个涂料维恩图，其中每个问题都被覆盖，然后是所有他们拥有最大或完美覆盖的东西，它们是中心，那个小坚果，这就是构造是什么。这就是文化，即文化所代表的。&lt;/p>
&lt;p>然后每个圈子都是问题。这就是我们在研究设计中所做的。研究设计的一部分。当我进入统计分析模式时，我会考虑所有问题，所有项目，不仅仅是文化，而是我正在考虑的每一件事。因此，在过去的几年里，我已经完成了监视可观察性，我已经完成了CI，我已经完成了自动化测试，我已经完成了版本控制，我已经完成了所有这些工作，并且我将所有这些都扔进了漏斗，对？&lt;/p>
&lt;p>迈克朱利安：我敢肯定，这可能是你庞大的Excel电子表格。&lt;/p>
&lt;p>Nicole Forsgren：不，这是SPSS。我使用SPSS但您可以使用几种不同的统计工具。我们做主成分分析。而我们所做的就是它们如何加载？基本上，他们如何组合在一起，我们是否具有收敛有效性？它们会聚合吗？他们只测量他们应该测量的东西吗？我们是否有判别有效性？他们不衡量他们不应该衡量的东西吗？我们有可靠性吗？每个阅读这些问题的人都会以非常相似的方式阅读吗？&lt;/p>
&lt;p>一旦我们掌握了所有这些，并且对所有这些事情进行了几次统计测试，那么我说，“好的，这些项目，通常是三到五项，所有这些项目都是文化，”或“所有这些项目一起是CI，“或”所有这些，正确的这些项目分组，代表了这一点。“好的，现在，现在，我可以开始查看关联，预测或其他内容，然后我会看到报告，现在我只想谈谈文化。&lt;/p>
&lt;p>所以我把它作为一件事情谈论，但实际上是几件事，然后当我谈到文化时，我可以说，“这就是文化是什么”，我可以用这种细微的，多维的方式谈论它，我知道那些维度是什么，因为它由三到五，六到七个问题组成，顺便说一下，如果其中一个问题不合适，因为我从统计分析中知道，我可以抛弃它，我知道为什么。我总是有几件事。如果您只有一个问题或者您只有两个问题，那就是风险。如果其中一个不起作用，哪一个是错误的？你不知道。对？因为，是A还是B？我不知道。&lt;/p>
&lt;p>至少如果我从三开始，一个失败，那么它可能是好的两个。&lt;/p>
&lt;p>迈克朱利安：是的。这里的许多听众已经采取了很多由营销组织进行的调查，除了调查也是由营销人员设计的&amp;hellip;&lt;/p>
&lt;p>Nicole Forsgren：他们是由想要特定答案的人设计的。&lt;/p>
&lt;p>迈克朱利安：没错。&lt;/p>
&lt;p>Nicole Forsgren：这就是挑战。&lt;/p>
&lt;p>迈克朱利安：是的，然而，为了清楚地说明，DevOps状态报告根本就不是这样。正如你所说，有很多东西都是严格的。&lt;/p>
&lt;p>Nicole Forsgren：好的一点是，我们一直是供应商和工具无关的。&lt;/p>
&lt;p>迈克朱利安：你不是在寻找一个非常特别的答案，你想知道实际上是什么。&lt;/p>
&lt;p>Nicole Forsgren：我们并不是在寻找产品的答案。那么，在CI的例子中，什么是CI？我不关心工具。我说，如果你正在做CI，如果你正在进行CI，持续集成，以一种预测智能结果的方式，你将拥有这四样东西。其中的力量是，任何人都可以回过头来看待这个评估工具。如果您是经理，领导者或开发人员，您可以说，“我使用的任何工具，世界上的任何工具，我应该寻找这四件事”，或“我自己构建的任何工具，或者如果我正在做CI，我应该有这四件事。“&lt;/p>
&lt;p>如果你是一个供应商，你应该说，“如果我认为我正在建立或销售CI，我最好有这四件事。对吗？这就是伟大的事情，我必须说，上帝保佑我的新团队。他们让我以同样的方式运行它。它仍然是相同的。它仍然是供应商和工具无关，它仍然是能力集中。你寻找的每一件事，无论是自动化或流程，文化或结果，它的供应商和工具不可知，它的能力集中，再次，权力是你可以用它作为一个评估工具。&lt;/p>
&lt;p>我的团队是这样做的吗？我的工具是这样做的吗？我的技术是这样做的吗？我能做到吗？如果我不是，我的弱点是什么？我的约束是什么？因为如果我把我们带回到开头，是什么驱使我和DORA团队，那么我们想要摆脱这一点是什么？我们想让事情变得更好。我们该怎么做？我们可以为人们提供简单的评估标准。而且我并不是说这很容易，因为所有这些都很简单，需要工作。但如果有明确的评估标准，我们就有了可以去的地方。&lt;/p>
&lt;p>Mike Julian：因为我知道你喜欢谈论你几年来所做的事情。您提出了哪些最有趣的结果？&lt;/p>
&lt;p>Nicole Forsgren：哦，有很多好的。&lt;/p>
&lt;p>迈克朱利安：让我们选择你的前三名。&lt;/p>
&lt;p>Nicole Forsgren：好的，我认为我的最爱之一是，我会用俗气的营销方式来做&amp;hellip;&lt;/p>
&lt;p>迈克朱利安：请接受。我们已经做好了准备。&lt;/p>
&lt;p>Nicole Forsgren：有一个小创业公司并且不得不假装它作为营销人员一分钟的人，我们将看到我在这方面做了什么。&lt;/p>
&lt;p>架构很重要，而不是技术没有。第一。好的。那是什么意思呢？这意味着，我们发现如果您以正确的方式构建它，您的架构结果会比您的技术堆栈产生更大的影响。所以架构成果，一些关键问题是：我可以测试吗？我可以部署吗？我可以建立没有细粒度的沟通和协调吗？&lt;/p>
&lt;p>迈克朱利安：细粒度意味着什么？&lt;/p>
&lt;p>Nicole Forsgren：我是否必须与他人见面并一起工作并征用一些东西，我是否需要开辟一些疯狂的新测试环境，还是必须获得17个不同团队的批准？请注意，我刚刚提到过团队。沟通和协调可能是技术限制，也可能是人的限制。这让人很难回到康威定律。&lt;/p>
&lt;p>迈克朱利安：我最喜欢的法律之一。&lt;/p>
&lt;p>妮可福斯格伦：对吗？这是一个DevOp的事情。但是，这是真的。无论我们的沟通模式如何，我们通常最终会融入我们的技术。现在，我将说这在云和云原生环境中通常更容易实现，但它也可以在Legacy和Mainframe环境中完全实现。我们没有看到前几年布朗菲尔德和格林菲尔德受访者之间存在统计学上的显着差异。&lt;/p>
&lt;p>迈克朱利安：很高兴知道。&lt;/p>
&lt;p>Nicole Forsgren：是的，我喜欢那个。那个人很有趣。&lt;/p>
&lt;p>好的，第二个。云很重要，但只有你做得对。&lt;/p>
&lt;p>迈克朱利安：噢，这意味着什么？&lt;/p>
&lt;p>Nicole Forsgren：Dun dun duh。所以，这是我最喜欢的统计数据之一。我们发现，如果您正在执行所有五个重要的云特征，那么您成为精英表演者的可能性要高23倍。根据美国国家标准技术研究院（NIST）的说法，我想你可以说你是否正在完成云计算的所有五个基本特征。所以我没有提出这个，这来自NIST，好吗？&lt;/p>
&lt;p>所以它很有趣，因为我们询问了很多人是否在云端。他们就像，当然我们在云端，我们完全在云端，对吗？但只有22％的人正在做五件事。那这五个是什么？所以这五个是按需自助服务。您可以在没有人工干预的情况下配置资源，如果您必须填写一张票并等待一个人办票，这不算数。没有积分。&lt;/p>
&lt;p>另一个是广泛的网络访问。因此，您可以通过任何类型的平台访问您的云端内容;手机，平板电脑，笔记本电脑，工作站。大多数人都非常擅长这一点。另一个是资源池，因此可以根据需要动态分配和重新分配资源。另一个是快速弹性，对，爆裂魔法。我们通常都知道这个。&lt;/p>
&lt;p>现在最后一个是测量服务。所以我们只支付我们使用的费用。因此，最常查看的通常是广泛的网络访问和按需自助服务。&lt;/p>
&lt;p>迈克朱利安：是的，有趣的是，对我来说，那里没有任何东西阻止，比如说，从排位赛开始的内部开放堆栈集群。&lt;/p>
&lt;p>Nicole Forsgren：没错，对。所以这可能是私有云。我爱你指出了这一点。之所以如此重要的原因是，它只是归结为执行。它可以完成，另一个挑战是组织，管理人员或董事会经常说你必须去云，所以有人说，“哦，是的，我们要去云端。”但后来有人重新定义了云中的意义。对？所以，你到达那里，有人检查他们的小盒子，把金星放在某人的图表上，他们走开了，他们就像是，“好吧，我们没有看到任何好处。”好吧，是的，因为你没有这样做。&lt;/p>
&lt;p>迈克朱利安：对。是的。&lt;/p>
&lt;p>Nicole Forsgren：就像是，“我买了一个健身房会员，我已经完成了。”不，再说一遍，我不是说这很容易，对吧？有一些工作涉及。现在我喜欢的另一件事是，让我们说你不在云端，由于某种原因你必须留在Legacy环境中，你可以看看这五件事你可以尽可能多地实现，你仍然可以实现利益。&lt;/p>
&lt;p>迈克朱利安：对。这不是一个全有或全无的方法。你可以做其中的一些，并从中获得很多好处。&lt;/p>
&lt;p>Nicole Forsgren：这几乎就像一个骗子回到了第一，这是建筑问题，技术没有。我怎么能做一个备忘单，看看如何到达那里的一些非常好的技巧？&lt;/p>
&lt;p>迈克朱利安：那你的三号是什么？&lt;/p>
&lt;p>Nicole Forsgren：我的第三个可能是，外包不起作用。&lt;/p>
&lt;p>迈克朱利安：是的。&lt;/p>
&lt;p>Nicole Forsgren：有些人讨厌我，他们从他们的眼睛射出激光束。所以我们说外包不起作用*。&lt;/p>
&lt;p>迈克朱利安：好的，什么是星号？&lt;/p>
&lt;p>Nicole Forsgren：Asterisk，星号将是功能性外包不起作用。&lt;/p>
&lt;p>迈克朱利安：好的，所以说外包我的待命职责，可能不会那么好用。&lt;/p>
&lt;p>Nicole Forsgren：拿走所有的DEV，把它运走。全部采用TEST，将其运走。拿走所有OPS，运送它。现在，为什么呢？因为那样，你们所做的一切都是另一套交接，你们创造了另一个孤岛。你还批量完成了大量的工作，而你却让每个人都等待这种情况发生。目标是创造价值而不是让人们等待。如果现在每个人都必须等待所有东西回来，如果你正在做高价值的工作等待低价值的工作，因为它必须回到一起，这通常是它的工作方式，你是骨头。&lt;/p>
&lt;p>现在，功能外包。如果您有一个与您合作并与您协调并以相同的节奏交付的外包合作伙伴，那么这不是功能性外包。那是星号。&lt;/p>
&lt;p>迈克朱利安：好的，有问题。&lt;/p>
&lt;p>Nicole Forsgren：另外，如果他们是你的团队的一部分，他们是你公司的一部分，但他们基本上一次消失了三个月。对不起孩子，这是功能外包。我没有任何积分，愿上帝怜悯你的灵魂。这没用。&lt;/p>
&lt;p>迈克朱利安：对。在我看来，你怎么知道你是否处于这种困境中，如果你的团队和你给这些项目的人之间有明显的交接，你就有功能外包。那会是对的吗？&lt;/p>
&lt;p>Nicole Forsgren：是的，特别是如果有一个明显的手，然后是一个黑盒子的神秘。&lt;/p>
&lt;p>迈克朱利安：就像，工作是如何完成的？&lt;/p>
&lt;p>Nicole Forsgren：第一步，第二步，问号，第三步：获利。&lt;/p>
&lt;p>迈克朱利安：也许吧。所以前两个，这一切都很好，因为我们可以看到从哪里去，但第三个实际上看起来有点困难，因为如果我是一个系统管理员，我完全无法控制这个功能外包。我可能也讨厌它，我可能自己讨厌它，但我对它没有任何控制权。我可以做什么作为系统管理员，或操作员，开发人员，我该如何改善这种情况？&lt;/p>
&lt;p>妮可福斯格伦：所以一些想法可能包括一些事情，看看是否有任何方法可以改善过渡期间的沟通或节奏。对？您可能仍然拥有该外包合作伙伴，因为这就是它的方式。但是，假设您已经以三个月的增量进行了工作，有没有办法将切换增加到每月一次？有没有什么方法可以让我们知道我们知道我们导入的功能，小批量工作，只是增加切换？有什么方法可以将它们整合到我们的节奏中，融入我们的团队吗？&lt;/p>
&lt;p>现在我意识到这里有一些挑战，因为从法律的角度来看，我们不能像我们的团队那样对待他们，因为那时，至少从美国的角度来看，一旦我们像对待员工那样对待他们，那么我们就要对就业税负责以及所有其他合法的东西。但是，如果我们能够将它们整合到我们的工作节奏中，或者更接近我们的工作节奏，那么我们的结果就会得到改善。&lt;/p>
&lt;p>迈克朱利安：好的，很酷。这更有意义。这听起来并不像我担心的那么难。&lt;/p>
&lt;p>Nicole Forsgren：所以它可以开始减少节奏的延迟，要求稍微更清楚地了解正在发生的事情，如果它是一个完整的黑盒子，那就是寻找它。&lt;/p>
&lt;p>迈克朱利安：妮可，这绝对是太棒了。非常感谢你加入我。我有两个最后的问题。人们在哪里可以找到这个DevOps状态报告来进行调查？调查在哪里？&lt;/p>
&lt;p>Nicole Forsgren：哦，我们已经发布了调查结果。我可以将它包含在演出笔记中吗？&lt;/p>
&lt;p>迈克朱利安：当然。好的，大家，查看链接的节目说明。我的最后一个问题是除了这项调查之外，人们可以在哪里找到更多关于你和你的工作的信息？&lt;/p>
&lt;p>Nicole Forsgren：我有几个地方。所以我自己的网站是在nicolefv.com，我总是在Twitter上，通常谈论冰淇淋和健怡可乐，那是@nicolefv。&lt;/p>
&lt;p>迈克朱利安：我确实爱你Twitter推特。这是我的最爱之一。&lt;/p>
&lt;p>Nicole Forsgren：是的，每个人都来打个招呼。我的DM是开放的。&lt;/p>
&lt;p>迈克朱利安：我最喜欢你的Twitter提要大概是在你写报告的时候，说：“天哪，我为什么要这样做？”&lt;/p>
&lt;p>Nicole Forsgren：是的，我试着把它锁起来，但每隔一段时间就会有什么东西会滑落，比如“哦，我的天哪，一件好事正在发生”，或者“哦，我忘记了这一件事”，或“那么多好事正在发生。“&lt;/p>
&lt;p>迈克朱利安：是的，我记得去年就像，“哦，我的上帝，这太酷了，但我无法告诉你。”&lt;/p>
&lt;hr></description></item><item><title>2019年关于DevOps的几个预测</title><link>https://martinliu.cn/blog/2019%E5%B9%B4%E5%85%B3%E4%BA%8Edevops%E7%9A%84%E5%87%A0%E4%B8%AA%E9%A2%84%E6%B5%8B/</link><pubDate>Sat, 09 Mar 2019 22:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/2019%E5%B9%B4%E5%85%B3%E4%BA%8Edevops%E7%9A%84%E5%87%A0%E4%B8%AA%E9%A2%84%E6%B5%8B/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218597150085.jpg" alt="Featured image of post 2019年关于DevOps的几个预测" />&lt;p>本文汇聚了来自3个网站的预测文章，他们分别是XebiaLabs、G20Group和Veritis。在总共22项预测中，个别预测是相同的。DevOps是一个持续进化和发展的过程，同时也受到目前各种新技术的影响。&lt;/p>
&lt;h2 id="xebialabs的7个预测">XebiaLabs的7个预测&lt;/h2>
&lt;p>英文原文： &lt;a class="link" href="https://blog.xebialabs.com/2019/01/10/7-predictions-for-devops-in-2019/" target="_blank" rel="noopener"
>https://blog.xebialabs.com/2019/01/10/7-predictions-for-devops-in-2019/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.xebialabs.com/wp-content/uploads/2019/01/crystal-ball-768x450.jpg"
loading="lazy"
alt="XebiaLabs的7个预测"
>&lt;/p>
&lt;h3 id="1-持续集将成作为流水线的重要代办事项">1. 持续集将成作为流水线的重要代办事项&lt;/h3>
&lt;p>如果企业希望提高团队用在功能开发上的可用时间，从而加速向生产环境中交付的话，那么在整个DevOps流水线中，引进持续集成CI部分将成为高优先级且重要的事项。监控CI流水线相关的数据、活动和流程的能力将变得非常重要，这样可以使发布流程中的所有人都能看到最新的流程状态，从而减少开发人员花费在无关任务上的时间。 【来自：XebiaLabs产品开发副总裁Andreas Prins】&lt;/p>
&lt;h3 id="2-价值流映射将被广泛使用">2. 价值流映射将被广泛使用&lt;/h3>
&lt;p>目前，随着软件交付的速度和质量正成为大型企业的巨大竞争优势，越来越多的组织将会探索价值流映射（Value stream mapping）的使用方式，从而确保他们的软件开发是和整体业务价值保持一致的。这种转变将会减少软件发布流水线中的浪费，并创建出更强大的跨职能团队协作。【来自：Lisa Wells，XebiaLabs产品营销副总裁】&lt;/p>
&lt;h3 id="3-实时挖掘软件交付流水线所产生的数据">3. 实时挖掘软件交付流水线所产生的数据&lt;/h3>
&lt;p>在2019年，IT部门通过软件持续不断创造业务价值的压力将会越来越高。因此，组织将用各种方法挖掘在软件交付流程中大量的由机器所生成的数据，而不只是在事后才进行分析，甚至还包括DevOps的可预测性。这样才能够更好地预测软件交付流程和基础架构中所发生的问题，而这些问题可能对应用程序的质量和安全性产生负面影响，可能会使产品上市时间延期。【来自： Lisa Wells，XebiaLabs产品营销副总裁】&lt;/p>
&lt;h3 id="4-在人和流程中培养责任共但文化">4. 在人和流程中培养责任共但文化&lt;/h3>
&lt;p>DevOps同时关乎于人、流程和工具。对于任何DevOps实施计划而言，需要将人和流程视为首要的交付价值的因素。在2019年，我们将看到企业会越来越重视培养承担责任的文化，团队在复杂的应用程序交付流水线中共同承担质量和效率的责任。各个团队需要及时了解协作和进度。关键是在项目的进展过程中，及时的与整个公司分享那些取得了成功的措施和及其成果。除了证明他们的努力能够带来重大成果之外，毕竟，也没有什么比这种方式更能激励团队的了。【来自：T.J. Randall，客户成功副总裁，XebiaLabs】&lt;/p>
&lt;h3 id="5-自服务部署将成为主流">5. 自服务部署将成为主流&lt;/h3>
&lt;p>随着自动化部署已经成为企业的标准实践，随着组织逐渐地意识到可以将信息安全和合规性也融入到他们的交付流程中，在2019年，自助服务式部署会成为主流的工作实践。【来自：T.J. Randall，客户成功副总裁，XebiaLabs】&lt;/p>
&lt;h3 id="6-建立自己的devops能力度量组合">6. 建立自己的DevOps能力度量组合&lt;/h3>
&lt;p>随着DevOps的投资增加，管理层将需要更多的投资回报率证据。团队需要建立他们基于全局测量（不仅仅是单个团队或个人）和结果（具有速度和稳定性的软件交付）的组合来测量DevOps（DevOps Intelligence）的能力。【来自：Vincent Lussenburg，DevOps战略总监，XebiaLabs】&lt;/p>
&lt;h3 id="7-devsecops融入到devops流程中">7. DevSecOps融入到DevOps流程中&lt;/h3>
&lt;p>对信息安全“前置（左移）”的需求将会在DevOps实践中得到更好的理解和更有效的应用。在2018年，“前置（左移）”经常被滥用，被误以为会把软件的安全性责任推给开发人员。在2019年，DevSecOps将成为DevOps的另一个自然的选择，将安全性融入到流程中的每个阶段，并且所有人都对安全性有责任。【来自：Vincent Lussenburg, Director of DevOps Strategy, XebiaLabs】&lt;/p>
&lt;h2 id="g20group的5个预测">G20Group的5个预测&lt;/h2>
&lt;p>原文：https://www.go2group.com/blog/devops-trends-2019-our-top-five-predictions-for-the-year/&lt;/p>
&lt;p>&lt;img src="https://cdn.go2group.com/wp-content/uploads/2019/01/CC-173-devops-trendsV3.jpg"
loading="lazy"
alt="5个预测"
>&lt;/p>
&lt;p>由于文章比较长，下面是核心观点的概述。&lt;/p>
&lt;ol>
&lt;li>使用AI加速/优化的DevOps将开始被逐渐应用。基于AI的预测性可以被用在CI或者CD栋流水线过程中，确保交付流程的有效性。这个趋势将加速应用开发者和数据科学家之间的协作。&lt;/li>
&lt;li>容器化应用不在是新鲜事物了。DevOps和多云架构加速了容器相关的技术在大型企业中国的使用。越来越巨大的软件开发和部署规模也进一步提高了容器生产环境集群的规模和复杂性。Kubernets的广泛使用也进一步加速了应用容器化的进程。&lt;/li>
&lt;li>Functions-as-a-Service (FaaS) 将会崭露头角。随着越来越多的专业人士在生产环境中广泛的使用容器技术。相信FaaS也会逐渐被应用起来，它也比称之为无服务器计算。这种技术的实现包括：AWS Lambda、Google Cloud Functions, Microsoft Azure Functions, IBM 等。&lt;/li>
&lt;li>DevSecOps会变得更加重要。随着企业应用DevOps的范围逐渐扩大化，将安全性和合规性无缝的集成到DevOps转型过程中也得到了广泛的接受。主流的DevOps实践者会把安全性视为代码，安全团队会在DevOps工作流中和各种团队携手打造安全性。&lt;/li>
&lt;li>自动化将会依然非常重要。企业越来越意识到在软件开发周中提高响应速度、运维的可恢复性、更快的上市时间的重要性；这需要将软件开发和运维工作通过自动化更好的链接起来。组织在复杂的生态系统中扩大自动化的应用还是有些难度。&lt;/li>
&lt;/ol>
&lt;h2 id="来自veritis的10个预测">来自Veritis的10个预测&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/DevOps-top-10-Predictions-2019-768x1152.jpg"
loading="lazy"
alt="10个预测"
>&lt;/p>
&lt;p>原文： &lt;a class="link" href="https://www.veritis.com/blog/devops-trends-top-10-predictions-for-devops-in-2019/" target="_blank" rel="noopener"
>https://www.veritis.com/blog/devops-trends-top-10-predictions-for-devops-in-2019/&lt;/a>&lt;/p></description></item><item><title>产品管理遇上Devops</title><link>https://martinliu.cn/blog/%E4%BA%A7%E5%93%81%E7%AE%A1%E7%90%86%E9%81%87%E4%B8%8Adevops/</link><pubDate>Thu, 07 Mar 2019 12:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/%E4%BA%A7%E5%93%81%E7%AE%A1%E7%90%86%E9%81%87%E4%B8%8Adevops/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1551950710/bjxysnye.png" alt="Featured image of post 产品管理遇上Devops" />&lt;p>DevOps企业峰会是历史悠久的DevOps主题企业级峰会，近年来在北美的拉斯维加斯和欧洲的伦敦每年各举办一次。
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-50-17.jpg"
loading="lazy"
alt="2019-03-07_09-17-49"
>&lt;/p>
&lt;p>这个大会的官网：https://events.itrevolution.com/ 2019年的会议时间已经发布，感兴趣的可以参加。&lt;/p>
&lt;p>CSG公司连续多年参加DevOps企业峰会，本分享主题是CSG在2018年美国拉斯维加斯的峰会上的主旨演讲之一。本文是对这个演讲的视频回放的整理，该视频已经上传到了腾讯视频。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-50-44.jpg"
loading="lazy"
alt="2019-03-07_09-17-49"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="csg-international公司简介">CSG International公司简介&lt;/h2>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_09-17-49.jpg"
loading="lazy"
alt="2019-03-07_09-17-49"
>&lt;/p>
&lt;p>CSG是一个基于SaaS的客户支持和计费公司。CSG是美国最大的账单打印和呼叫中心公司。帮助他们的合作伙伴公司完成水电费、宽带费、通信费等相关业务的收款工作，并为最终客户提供热线电话支持。&lt;/p>
&lt;p>CSG的技术堆栈范围广泛，从Mainframe主机到Linux开放系统到AWS云服务，CSG认为如果正确的运用DevOps技术的话，技术堆栈并不是阻力和限制。&lt;/p>
&lt;p>CSG的DevOps旅程经历了如下几个阶段。&lt;/p>
&lt;h2 id="2012年-敏捷转型">2012年 敏捷转型&lt;/h2>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_09-31-46.jpg"
loading="lazy"
alt="2019-03-07_09-31-46"
>&lt;/p>
&lt;p>敏捷转型历经四年，进行了组织结构调整，在这个过程中关注点和亮点如下：&lt;/p>
&lt;ul>
&lt;li>应用精益思想消除了各种等待队列&lt;/li>
&lt;li>应用康威定律重组重组了团队&lt;/li>
&lt;li>重组团队之后形成跨职能团队，将设计团队，开发和测试团队融为一体&lt;/li>
&lt;li>实施持续集成技术，落地持续部署流水线作为业务开发的基础设施&lt;/li>
&lt;li>实施了测试自动化&lt;/li>
&lt;li>实施了共享的遥测数据，这就是今天所热议的可观察性&lt;/li>
&lt;li>将作业批量尺寸缩减为以前的一半&lt;/li>
&lt;li>成立了多个独立于研发团队的共享的运维团队【注意：运维还没有和研发团队融为一体，共享运维团队管理所有IT环境并和所有产品团队协作】&lt;/li>
&lt;/ul>
&lt;p>敏捷转型的效果：&lt;/p>
&lt;ol>
&lt;li>发布影响业务的事件数量下降（在固定的时间周期里统计由于发布导致的影响客户服务的事件数量）&lt;/li>
&lt;li>变更失败率下降&lt;/li>
&lt;/ol>
&lt;h2 id="2012-2015-敏捷转型和devops早期">2012-2015 敏捷转型和DevOps早期&lt;/h2>
&lt;p>在敏捷转型的持续集成的基础上，CSG实施了持续部署实践，持续部署被视为应用DevOps实践的标志性动作，将所有部署转为为可重复执行的自动化部署。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_09-46-07.jpg"
loading="lazy"
alt="2019-03-07_09-46-07"
>&lt;/p>
&lt;p>上图是运维工程师们在工作时段里进行日间部署的场景，但是平均每天进行15.1个部署，71个面向最终用户的特性发布。在部署期间，运维工程师们在信心满满的打着电动。由于每一个生产环境的部署都已经做过了大量的自动化测试，且在其它环境中至少部署过7遍了。&lt;/p>
&lt;h2 id="2016-反作用力和挣扎期">2016 反作用力和挣扎期&lt;/h2>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_09-57-30.jpg"
loading="lazy"
alt="2019-03-07_09-57-30"
>&lt;/p>
&lt;p>上图的情形应该很常见，CSG也经历了这个阶段。&lt;/p>
&lt;p>开发团队追逐：&lt;/p>
&lt;ul>
&lt;li>交付速度&lt;/li>
&lt;li>更好、更快的环境&lt;/li>
&lt;li>更好的服务请求工具&lt;/li>
&lt;li>憎恨变更请求队列（流程）&lt;/li>
&lt;/ul>
&lt;p>运维团队追逐：&lt;/p>
&lt;ul>
&lt;li>稳定性！&lt;/li>
&lt;li>高质量代码&lt;/li>
&lt;li>更敏捷的工具&lt;/li>
&lt;li>憎恨变更请求队列（流程）&lt;/li>
&lt;/ul>
&lt;p>开发和运维团队都厌恶的：&lt;/p>
&lt;ul>
&lt;li>变更管理流程&lt;/li>
&lt;li>发布管理流程&lt;/li>
&lt;li>生产环境的运维部门&lt;/li>
&lt;li>PMO项目经理&lt;/li>
&lt;/ul>
&lt;p>客户想要的是：“更快得到高质量的特性！”&lt;/p>
&lt;h2 id="2016-devops团队融合阶段">2016 DevOps团队融合阶段&lt;/h2>
&lt;p>大家一起反思这个问题：“我们为何不站在同一条战线上，一起追逐相同的目标？”&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_10-05-41.jpg"
loading="lazy"
alt="2019-03-07_10-05-41"
>&lt;/p>
&lt;p>设置共同（共享）目标：更快、更稳定和更安全！融为同一个团队，为了更好的服务客户而努力奋斗。&lt;/p>
&lt;h2 id="20162018-后devops时代">2016~2018 后DevOps时代&lt;/h2>
&lt;p>为了化解在的研发和运维之间的依然持续存的矛盾现象，在大家反思之后；进行了再次的团队组织结构调整，消除了所有共享的运维团队，将运维团队的工程师融入了各个研发团队。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_10-34-22.jpg"
loading="lazy"
alt="2019-03-07_10-34-22"
>&lt;/p>
&lt;p>CSG的DevOps转型阶段的重点：&lt;/p>
&lt;ul>
&lt;li>运用了不同于双模IT的模型，即”统模IT“，在DevOps实践面前，各种类型的IT架构都一视同仁&lt;/li>
&lt;li>转型后的开发团队统一负责产品的构建、测试、运行和服务质量&lt;/li>
&lt;li>下放变更管理委员会（CAB）职责到各个开发团队，成立本地化的CAB（详见ITIL的术语表）&lt;/li>
&lt;li>建立了群策群力的服务支持响应机制（参考精益思想的安灯拉绳），因此大幅度缩短了MTTR时间&lt;/li>
&lt;li>实施了反向布兰特操作，消除大量普遍存在的布兰特（这是一个比喻，详见《凤凰项目》的人物布兰特）&lt;/li>
&lt;li>建立整合的Backlog，将开发、测试和运维的工作统筹管理&lt;/li>
&lt;li>实施基础设施自动化&lt;/li>
&lt;li>将运维问题（目标不一致、反作用力、部门墙）视为工程实践问题：更好的工程实践，更少的苦活累活！&lt;/li>
&lt;/ul>
&lt;p>【注意】如上图所示，新增了一个度量指标：Inc/Mo 每月的事件数量（ITIL的术语），这是生产环境中每月发生的事件单的数量，数量的降低说明了生产环境的稳定性的提高。&lt;/p>
&lt;p>CSG在这个阶段中所引入的DevOps实践参考指南书籍是《DevOps Handbook》，中文版封面如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1524360305/devops-handboo-3d-500x500.jpg"
loading="lazy"
alt="DevOps Handbook"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://book.douban.com/subject/30186150/" target="_blank" rel="noopener"
>https://book.douban.com/subject/30186150/&lt;/a>&lt;/p>
&lt;p>在始于2016年的DevOps旅程中，CSG从改善负面指标阶段，步入了追逐正向业务价值目标的阶段。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_11-01-46.jpg"
loading="lazy"
alt="2019-03-07_11-01-46"
>&lt;/p>
&lt;p>CSG通过打敏捷开发、精益思想和DevOps实践的组合拳，实现了稳定性和业务的同步增长。&lt;/p>
&lt;ul>
&lt;li>从2012年到2018年业务订阅用户数增长了27%。&lt;/li>
&lt;li>生产系统的交易吞吐量（TPS每秒的交易数），增长了433%&lt;/li>
&lt;/ul>
&lt;h2 id="产品管理遇上devops的主旋律">产品管理遇上DevOps的主旋律&lt;/h2>
&lt;p>产品管理和DevOps之间的关系该如何协调和处理，在这个阶段里得到了定义。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_11-13-18.jpg"
loading="lazy"
alt="2019-03-07_11-13-18"
>&lt;/p>
&lt;p>整个集体应该遵从的三大主旋律：&lt;/p>
&lt;ol>
&lt;li>将策略连接落实到人，从而改善了产品管理和DevOp的关系，基于相同的业务诉求：实现了更好的价值产出&lt;/li>
&lt;li>IT不是是独立于业务之外：管理的应该是产品价值流，而非项目。&lt;/li>
&lt;li>运维问题是一个同时于与工程和产品都相关的问题&lt;/li>
&lt;/ol>
&lt;p>见上图，寻找划出的重点和关键词。&lt;/p>
&lt;p>出现了新的度量指标：&lt;/p>
&lt;ul>
&lt;li>Impact minutes ：业务恢复时间 MTRR&lt;/li>
&lt;li>Release on demand ： 特性按需发布比率&lt;/li>
&lt;li>eNPS ：员工对企业的点赞比率&lt;/li>
&lt;/ul>
&lt;p>以上数据的度量周期是从2017年至今的，影响这些指标的内因包括：&lt;/p>
&lt;ul>
&lt;li>精益领导力组合&lt;/li>
&lt;li>产品经理遇上DevOps&lt;/li>
&lt;/ul>
&lt;h2 id="产品管理为何要遇上devops">产品管理为何要遇上DevOps？&lt;/h2>
&lt;p>在CSG工作了19年之久，经历和目睹敏捷和DevOps转型全过程的项目经理，Brian Clark（VP Product management）的简单版答案：“业务成果”。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_11-32-23.jpg"
loading="lazy"
alt="2019-03-07_11-32-23"
>&lt;/p>
&lt;p>CSG的处于一个非常稳定的成熟市场，而且是市场的领导者；上游的电信运营商公司和宽带网络公司的业务都已经很难成长了。&lt;/p>
&lt;p>CSG所在行业的复合年均增长率约等于2%，CSG公司的复合年均增长率是3.92%。他们面临着如何保留高级技术人才的挑战。而在实施了DevOps实践之后，业务成果好转，新增了两个BBS企业客户。雇员的eNPS增长了400%，人员保有率大于95%，目标市场的业务占用率提高了。&lt;/p>
&lt;p>从2015开始产品经理和DevOps团队开始讨论“团队的精益领导力组合”，定义了组织级别的愿景：“将工作可视化，把我们的人员和策略链接在一起，驱动参与度、价值和兴奋度。”&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_11-59-38.jpg"
loading="lazy"
alt="2019-03-07_11-59-38"
>&lt;/p>
&lt;p>所谓的精益领导力组合如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_12-02-46.jpg"
loading="lazy"
alt="2019-03-07_12-02-46"
>&lt;/p>
&lt;p>主要有三部分组成：&lt;/p>
&lt;ol>
&lt;li>组合管理&lt;/li>
&lt;li>发布管理&lt;/li>
&lt;li>转型赋能&lt;/li>
&lt;/ol>
&lt;p>回顾一下CSG过去的三年，主要经历了6里程碑。
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-18-48.jpg"
loading="lazy"
alt="2019-03-07_14-18-48"
>&lt;/p>
&lt;h3 id="1-服务请求管理">1 服务请求管理&lt;/h3>
&lt;p>从梳理服务目录开始，将100多种IT服务梳理在一个服务目录中，需要这些服务的人通过服务请求并获得服务。以前这些服务工作交付所付出的大量运维性劳动是无法可视化和计量的。通过服务目录的不断完善，以前不可见的运维工作都可以察觉到，并可以计量和统计。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_12-11-29.jpg"
loading="lazy"
alt="2019-03-07_12-11-29"
>&lt;/p>
&lt;p>到2018年为止，统计数据表明：&lt;/p>
&lt;ul>
&lt;li>服务目录管理的服务条目数量是 620 个&lt;/li>
&lt;li>从服务目录创建并完成的服务请求单数量是 53000+ 个&lt;/li>
&lt;li>使用同一个服务目录增加了工作的可视化程度，并且还具有潜在的成长空间&lt;/li>
&lt;li>服务目录请求站点的访问量达到了 75000+ 次&lt;/li>
&lt;/ul>
&lt;p>服务目录的实施结果是可以被统计的，将这些数据呈现给了领导层团队；领导层随后决定增加了这些方面的投资，从而优化和消除了大量可重复的工作。这个阶段的成果也是非常突出的。举两个简单的例子如下：&lt;/p>
&lt;ol>
&lt;li>自动化了一个非常耗时的服务，该项服务每年需要消耗5000+人工时，这几乎是3个专职工程师一年的工作量。&lt;/li>
&lt;li>优化了一个通常需要耗时10天才能完成的服务，后来该项服务现可以在请求的当天就得以满足。&lt;/li>
&lt;/ol>
&lt;p>随着以上成果的逐渐扩大化，服务请求方和交付方都更加愿意和领导团队接触，并参与到等多的提议和计划中。这些成果足以值得让团队兴奋起来，下图是史诗一号团队在举行团建活动，以此来庆祝第一步的成功。【注：想获取兴奋度就喝起来！】&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_12-16-40.jpg"
loading="lazy"
alt="2019-03-07_12-16-40"
>&lt;/p>
&lt;h3 id="2-建立技术和产品组合规划室---tam-room">2 建立技术和产品组合规划室 - TAM Room&lt;/h3>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_12-57-06.jpg"
loading="lazy"
alt="2019-03-07_12-57-06"
>&lt;/p>
&lt;p>为了让项目执行过程和项目中的工作内容都更加可视化，建立了“技术和产品组合规划室”。在这个房间的墙上设立大型工作看板，将不同类型的工作用不同的颜色表示。这面墙展示了所有团队当前的工作内容，是产品和项目级别管理的全貌，任何事情如果不在这面墙上，团队不会对它耗费一秒钟。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_12-57-20.jpg"
loading="lazy"
alt="2019-03-07_12-57-20"
>&lt;/p>
&lt;ul>
&lt;li>蓝色： 安全相关&lt;/li>
&lt;li>红色：客户相关&lt;/li>
&lt;li>黄色：云计算相关&lt;/li>
&lt;li>绿色：技术相关&lt;/li>
&lt;li>橙色：项目管理&lt;/li>
&lt;/ul>
&lt;p>这些是史诗级别的工作，是经过客户优先级排序的工作。 接下来构建了十六个团队的团队级别看板，团队会把这些实施工作拿走到他们自己的看板上。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-01-47.jpg"
loading="lazy"
alt="2019-03-07_13-01-47"
>&lt;/p>
&lt;p>当团队工作在这个看板上之后，团队可以很好的处理计划外工作。如果有什么经理人员向团队提出其它工作的时候，团队可以回答“Yes”；然后请他看看当前的工作状态，说出可能的选项是什么？【注：讨论的结果很可能是，用Yes婉拒了计划外工作，或者请工作提出者交换他的进行中的工作。】&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-08-31.jpg"
loading="lazy"
alt="2019-03-07_13-08-31"
>&lt;/p>
&lt;p>TAP Room还是每个一个项目周期结束时，大家一起做回顾的场所，房间里提供了汉堡和热狗等午餐，团队成员用午餐会的形式交流各自的收获和想法。&lt;/p>
&lt;h3 id="3-向全员推广并提升参与度---各种坛子">3 向全员推广，并提升参与度 - 各种坛子&lt;/h3>
&lt;p>如何将以上的成功经验传播到整个组织里，如何让更多的人参与其中，并提升全员的参与度。CSG创建了各种坛子的想法。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-15-03.jpg"
loading="lazy"
alt="2019-03-07_13-15-03"
>&lt;/p>
&lt;p>每个坛子都有各自的负责人和执行周期。如Shark Tank是两周进行一次，如果任何人对产品和技术有谏言建议都会发到这里，负责人会统一收集和用不同的优先级排序。&lt;/p>
&lt;ul>
&lt;li>Shark Tank 组织战略级别的，由VP们管理&lt;/li>
&lt;li>Think Tank 产品组合级别的，由产品经理/负责人管理&lt;/li>
&lt;li>DO Tank Scrum团队级别，由团队的负责人管理&lt;/li>
&lt;/ul>
&lt;p>上面一行的三个坛子是把组织级别的业务战略直接贯彻和对齐到底（Engineer）方式，当然任何人也可以在各个层面上提出反馈建议，并实现了每个人的参与度的从下而上的反馈回路。&lt;/p>
&lt;p>下面一行的三个坛子和他们的组织架构相关，也分别有各种独立的定义和用法，所有坛子都是两周执行一次回顾和处理。&lt;/p>
&lt;h3 id="4-倡导价值驱动和交付">4 倡导价值驱动和交付&lt;/h3>
&lt;p>在这个阶段中，CSG不想仅仅止步于成功经验的传播和反馈，希望让更多人知道能从哪里，获得他们需要的信息和帮助，从而复制那些在组织级别已经取得成功的套路。&lt;/p>
&lt;p>CSG制作了视频短片，用阶段性回顾的方式，总结了他们所谓的参与度、有趣、有价值和有意义等概念，希望人多人能加入到史诗团队中。让人们觉得是和公司息息相关的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-33-37.jpg"
loading="lazy"
alt="2019-03-07_13-33-37"
>&lt;/p>
&lt;p>这个短片用产品周报发布的全公司，根据数据统计显示，有大约500人在发布的当天从头看到尾。使所有人都参与到价值交付中，并感受到激动。&lt;/p>
&lt;h3 id="5-产能洞察管理---capacity-insights">5 产能洞察管理 - Capacity Insights&lt;/h3>
&lt;p>CSG也和其它所有公司一样，每个团队都很忙，项目经理和交付的工程师团队也存在在感受不一致的情况。如下高压力对话也很常见。&lt;/p>
&lt;ul>
&lt;li>你们能做更多工作么？&lt;/li>
&lt;li>不能！&lt;/li>
&lt;li>怎么会啊！&lt;/li>
&lt;li>我们很忙！&lt;/li>
&lt;li>给我一个忙的证据！&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-52-11.jpg"
loading="lazy"
alt="2019-03-07_13-52-11"
>&lt;/p>
&lt;p>产能管理工具（Capacity Insights）的出现缓解了这个问题，首先，CSG把计划内的工作输入到这个工具里，并进行工作量的跟踪和记录。同时还把计划外的工作也纳入这个系统，进行统一的跟踪和记录。这里的数据在项目、产品和团队级别上被透明的分享和沟通，从此团队的高压力对话现象得到了大幅度的缓解，大家更有意愿进行合作了。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_13-53-16.jpg"
loading="lazy"
alt="2019-03-07_13-53-16"
>&lt;/p>
&lt;p>这些数据可以按照各种价值流的维度将耗费的工作时间（计划和实用）统计出来，并按照产品、团队和技术技能等各种维度进行钻去和统计。这样就可以把宝贵的产能合理的使用，实现了好钢用在刀刃上。&lt;/p>
&lt;h3 id="6-生活和工作平衡">6 生活和工作平衡&lt;/h3>
&lt;p>CSG不希望工程师团队周末加班，当然一周工作时间超长的情况也很常见，CSG希望他们能过上正常人的生活。领导层关注到这个问题后，开始实施一些措施。建立了产品迭代回顾的画廊，如下图所示。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-05-09.jpg"
loading="lazy"
alt="2019-03-07_14-05-09"
>&lt;/p>
&lt;p>在这个画廊上关注着一些数据的状态。&lt;/p>
&lt;ul>
&lt;li>31个团队的总工作时间是15000小时&lt;/li>
&lt;li>削减了25%的值守加班时间&lt;/li>
&lt;li>削减了100%的测试数据配置工作，用自动化的方法削减了相当于3个全职工程师的工作量&lt;/li>
&lt;li>用自动化的方式消除了某个业务流程确认环节90%的时间&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-14-16.jpg"
loading="lazy"
alt="2019-03-07_14-14-16"
>&lt;/p>
&lt;p>CSG的成功秘诀是人，这都仰仗于赋能的员工：开放、分享、参与和兴奋。&lt;/p>
&lt;h2 id="产品和项目的pk">产品和项目的PK&lt;/h2>
&lt;p>对于这个话题的总结如下。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-21-06.jpg"
loading="lazy"
alt="2019-03-07_14-21-06"
>&lt;/p>
&lt;ul>
&lt;li>部门墙（Queue）有碍于学习进步&lt;/li>
&lt;li>基于项目的团队管理有碍于学习进步&lt;/li>
&lt;li>基于产品的团队才可以精进成长&lt;/li>
&lt;/ul>
&lt;p>CSG公司在2017年以前的工作模式，产品和项目并存。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-25-21.jpg"
loading="lazy"
alt="2019-03-07_14-25-21"
>&lt;/p>
&lt;p>开发团队 - 产品工作&lt;/p>
&lt;ul>
&lt;li>基于业务需求的史诗 （最左侧的）&lt;/li>
&lt;li>基于发布节奏的工作&lt;/li>
&lt;li>管理产品代办工作&amp;amp;排序&lt;/li>
&lt;li>交付工作完成的解决方案&lt;/li>
&lt;/ul>
&lt;p>运维团队 - 项目工作&lt;/p>
&lt;ul>
&lt;li>处理临时、非计划的发布工作&lt;/li>
&lt;li>被各种会议驱动和中断&lt;/li>
&lt;li>接受研发发布过来的解决方案（临时和计划的）&lt;/li>
&lt;li>同时处理各种基础设施的IT项目（最右侧的）&lt;/li>
&lt;/ul>
&lt;p>当两者的工作节奏交织在一起的时候，就会产生各种冲突。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-32-34.jpg"
loading="lazy"
alt="2019-03-07_14-32-34"
>&lt;/p>
&lt;p>出现了各种明显的问题：&lt;/p>
&lt;ul>
&lt;li>双向的依赖关系&lt;/li>
&lt;li>多个任务工作时间计划相互撞车&lt;/li>
&lt;li>缺乏统一的依赖管理和产能规划，这进一步产生了大量进行中工作（WIP）&lt;/li>
&lt;li>项目制的工作模式导致研发在迫于发布周期的情况下，交付了质量很低的解决方案&lt;/li>
&lt;/ul>
&lt;p>CSG随后进行了基于价值流的产品条线的聚焦，将开发和运维团队的代办工作事项都整合到了统一的单独入口，从而进行统一的管理。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-40-40.jpg"
loading="lazy"
alt="2019-03-07_14-40-40"
>&lt;/p>
&lt;ul>
&lt;li>单一的工作入口管理可以更好的在统一的时间轴上进行优先级排序管理，并且能够实现所有工作的可视化和排序。&lt;/li>
&lt;li>设置不同的发布节奏，从2周到12周不等，还有特性的按需发布&lt;/li>
&lt;li>根据完成度、业务需求和耦合程度，不同工作任务选取不同的发布节奏&lt;/li>
&lt;li>进行工程上的重构：自动化、架构和运维即服务模式&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-46-45.jpg"
loading="lazy"
alt="2019-03-07_14-46-45"
>&lt;/p>
&lt;p>完全参考和接受了ThoughtWorks技术雷达提出的：应用产品管理的方式到内部平台。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-47-58.jpg"
loading="lazy"
alt="2019-03-07_14-47-58"
>&lt;/p>
&lt;p>运维团队的人也将IT工作转为产品交付的方式，指定专人专家管理内部的平台。安全运维被视为工程和产品问题，通过重构的工程方法优化平台。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_14-53-24.jpg"
loading="lazy"
alt="2019-03-07_14-53-24"
>&lt;/p>
&lt;p>基于产品/服务价值流交付的管理方式是多个迭代，往复循环的迭代，而不会是简单的停止于测试完毕的验收发布。&lt;/p>
&lt;p>配置管理、服务请求变更管理、遥测、监控管理、安全、事件问题管理和相应都是产品管理的一部分，这些运行态的工作是产品生命周期中不可或缺的。也不应该被其它孤立的外部团操作。&lt;/p>
&lt;p>因此服务持续性管理也变成为一种内置的持续的动作，而不是这个流程之外的独立事件。&lt;/p>
&lt;p>CSG提倡：运维是工程和产品的问题，在本图中也得到体现，运维工作是产品的运行时管理工作，也是包括在持续的产品开发迭代中，最好有一个统一的持久的团队负责。&lt;/p>
&lt;p>CSG举例说明了”运维是工程和产品的问题“；CSG的业务系统需要处理信用卡信息，因此需要满足PCI的合规需求。在这个业务需求的驱动下，运维团队花费了无数的安全审计时间（20000+小时）去满足合规的标准。在产品驱动的思维下，运维团队和安全专家合作开发了，实现PCI合规的配置管理工具。这些安全管理工具是基于Chef开发的，也在Chef的开发者大会上分享过，而且现在是一个开源的产品，任何人都可以下载使用。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-06-49.jpg"
loading="lazy"
alt="2019-03-07_15-06-49"
>&lt;/p>
&lt;p>通过以下的对比发现CSG在这个思维转型了以后所得到的收益。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-09-19.jpg"
loading="lazy"
alt="2019-03-07_15-09-19"
>&lt;/p>
&lt;p>CSG在跨价值流的工作可视化管理方面也取得了一定的收益。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-14-10.jpg"
loading="lazy"
alt="2019-03-07_15-14-10"
>&lt;/p>
&lt;p>以前各种不同工作分类的工作内容，上图每种颜色的方框就是一个分类，每个分类的工作都有各自不同的跟踪管理系统（工单系统）。在这种情况下如果跨价值流分析相关的工作内容，则非常困难，要依赖大量的手工统计和集成工作。统一的工作可视化无法实现。因此CSG使用Jira来统一管理和跟踪以上各种工作，从而得到准确和实时的视图。&lt;/p>
&lt;h2 id="2019年的目标">2019年的目标&lt;/h2>
&lt;p>CSG的2019年DevOps的发展目标和举措也很值得参考。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/2019-03-07_15-22-01.jpg"
loading="lazy"
alt="2019-03-07_15-22-01"
>&lt;/p>
&lt;ul>
&lt;li>Impact Minutes 服务受影响的时间 ： 4700分钟，实现年同步增长50%；计划实施系统的强壮性工程，落实人的可恢复性&lt;/li>
&lt;li>Release on Demond 按需发布 ： 希望最终是消除发布这个环节，或者是高于70%的按需发布比例；计划实施的举措是重构架构、自动化、解耦。&lt;/li>
&lt;li>eNPS 员工推荐率 ： 提升这个比例；计划实施的举措有精益领导力组合，链接到每个人，工作生活平衡。&lt;/li>
&lt;/ul></description></item><item><title>关于</title><link>https://martinliu.cn/about/</link><pubDate>Thu, 28 Feb 2019 00:00:00 +0000</pubDate><guid>https://martinliu.cn/about/</guid><description>&lt;img src="https://martinliu.cn/img/about.JPG" alt="Featured image of post 关于" />&lt;h2 id="个人简介">个人简介&lt;/h2>
&lt;p>Elastic 资深开发者布道师，中国 DevOps 社区创始人，《DevOps Handbook》和《The Site Reliability Workbook》译者；精通 DevOps/SRE/ITSM 等理论体系和相关实践等落地实现。致力于在全国范围内通过社区来推广 DevOps&amp;amp;SRE 的理念、技术和实践。&lt;/p>
&lt;h2 id="关注我">关注我&lt;/h2>
&lt;ul>
&lt;li>B 站 - DevOps 教练 &lt;a class="link" href="https://space.bilibili.com/477542716" target="_blank" rel="noopener"
>https://space.bilibili.com/477542716&lt;/a>&lt;/li>
&lt;li>Twitter - &lt;a class="link" href="https://twitter.com/martinliu" target="_blank" rel="noopener"
>@martinliu&lt;/a>&lt;/li>
&lt;li>LinkedIn - &lt;a class="link" href="https://www.linkedin.com/in/liuzheng/" target="_blank" rel="noopener"
>MartinLiu&lt;/a>&lt;/li>
&lt;li>邮箱 - &lt;a class="link" href="mailto:liu.martin@outlook.com" >liu.martin@outlook.com&lt;/a>&lt;/li>
&lt;li>微信公众号 - DevOps教练（MyDevOps）&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-05-11-DevOps-qrc-mydevops.jpg"
loading="lazy"
alt="微信公众号 - MyDevOps"
>&lt;/p>
&lt;h2 id="社区布道记录">社区布道记录&lt;/h2>
&lt;p>这里是即将发生和以前的部分社区分享。&lt;/p>
&lt;p>&lt;em>Upcoming Events&lt;/em>&lt;/p>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;p>&lt;em>Past Events&lt;/em>&lt;/p>
&lt;h3 id="2023">2023&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/dev-together-2022" target="_blank" rel="noopener"
>3 月 25 日 中国开发者生态峰会 - 北京 - 2023 - &lt;strong>《社区人必备的运营之道》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/gtxy5.html" target="_blank" rel="noopener"
>3 月 18 日 中国 DevOps 社区峰会 - 武汉 - 2023 - &lt;strong>《用AI加速度DevOps的实现步伐》&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2022">2022&lt;/h3>
&lt;blockquote>
&lt;p>倾情分享：双周线上直播活动 “DevOps 工具鉴宝” ，第一季开始于 4 月 15 日，在 B 站收看 10 集直播视频 &lt;a class="link" href="https://www.youtube.com/playlist?list=PLjF62SePsId5XwaVcmQRTn5SYtgOc61w6" target="_blank" rel="noopener"
>DevOps 工具鉴宝 - 播放清单&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1Lv4y1X7dY/" target="_blank" rel="noopener"
>12 月 22 日 DevOps 社区直播 “樱花峰会直通车”系列直播第1期：- &lt;strong>《剖析2022年领导们最关心的那些问题？》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1Sv4y1X77V/" target="_blank" rel="noopener"
>12 月 8 日 Red Hat 邀请 webinar - &lt;strong>《eBPF 在在SRE中的应用》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://conf.elasticsearch.cn/2022/schedule.html" target="_blank" rel="noopener"
>10 月 29 日 Elastic Dev Day China 2022 - 深圳 - &lt;strong>《面向未来的 Elastic Stack 数据摄入架构》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bilibili.com/video/BV1ca411N7yo" target="_blank" rel="noopener"
>8 月 11 日 Red Hat 邀请 webinar - &lt;strong>《Ansible自动化及在SRE中的实践》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/nuul5.html" target="_blank" rel="noopener"
>8 月 13 日 中国 DevOps 社区峰会 - 天津 - 2022 - &lt;strong>《APM分布式追踪不只是埋点》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://space.bilibili.com/370989874/channel/collectiondetail?sid=338624" target="_blank" rel="noopener"
>4 月 15 日 ~ 9 月 2 日； - &lt;strong>《DevOps工具鉴宝》第一季，共 10 集，系列线上直播活动&lt;/strong>&lt;/a> | &lt;a class="link" href="https://github.com/DevopsChina/lab.git" target="_blank" rel="noopener"
>GitHub 代码库&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2021">2021&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="hudongba.com/party/ufpe5.html" >12 月 4 日 中国 DevOps 社区峰会 - 深圳 - 2021 - &lt;strong>《用 OpenTelemetry 透明数字化系统的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="hudongba.com/party/0wrt5.html" >9 月 4 日 中国 DevOps 社区峰会 - 大连 - 2021 - &lt;strong>《用 OpenTelemetry 透明数字化系统的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cloud.tencent.com/developer/salon/live-1549" target="_blank" rel="noopener"
>8 月 26 日 腾讯云 实战工作坊 - &lt;strong>《Elastic Security 安全管理实操》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://coscup.org/2021/zh-TW/session/XL7QML" target="_blank" rel="noopener"
>7 月 31 日（周六-下午）COSCUP - &lt;strong>《谈谈开源的求生通道》&lt;/strong>&lt;/a> | &lt;a class="link" href="https://www.bilibili.com/video/BV1y64y1W7fu" target="_blank" rel="noopener"
>B 站&lt;/a> | &lt;a class="link" href="https://www.youtube.com/watch?v=5Ej6vR6hIzY" target="_blank" rel="noopener"
>YouTube&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/gde75.html" target="_blank" rel="noopener"
>7 月 31 日（周六-上午）阿里云 ACE×Elastic &lt;strong>可观测性工作坊/Meetup&lt;/strong> 北京同城会站&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.huodongxing.com/event/2604289049100" target="_blank" rel="noopener"
>7 月 9 日 中国 DevOps 社区武汉第 4 届 Meetup - &lt;strong>《Elastic O11y Workshop》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/gde75.html" target="_blank" rel="noopener"
>6 月 26 日（周六）中国 DevOps 社区沈阳首届 Meetup - &lt;strong>《SRE 提高服务质量和稳定性的套路》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/t9y75.html" target="_blank" rel="noopener"
>6 月 20 日（周日）中国 DevOps 社区北京第 11 届 Meetup - &lt;strong>《懂 SRE 么？直到你理解了 SLO 的原理》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://pages.segmentfault.com/dev-eco-2021" target="_blank" rel="noopener"
>6 月 5 日（周六）Dev Together 2021 &lt;strong>《从开源社区转身为千人级上市公司》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://martinliu.cn/blog/elastic-university-campus-intro/" target="_blank" rel="noopener"
>5 月 19 日（周三） 天津理工大学 - &lt;strong>《探究改变了整个行业的全球开源大潮》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.owasp.org.cn/OWASP_Events/owasp4e2d56fd56db5ddd533a57df5b8951686c999f99" target="_blank" rel="noopener"
>5 月 21 日（周五) OWASP China Conf - &lt;strong>《洞悉安全事态感知和预警平台最佳实践》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/gwb55.html" target="_blank" rel="noopener"
>5 月 22 日（周六）DevOps China Chengdu Meetup - &lt;strong>《Elastic Stack 可观测性工作坊》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://community.elastic.co/events/details/elastic-apj-virtual-presents-elastic-security-an-quan-guan-li-shi-zhan-gong-zuo-fang/" target="_blank" rel="noopener"
>3 月 31 日 Elastic Community - &lt;strong>《Elastic Security 安全管理实战工作坊》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://developer.aliyun.com/topic/esanniv3rd?utm_content=g_1000231789" target="_blank" rel="noopener"
>2 月 2 日 阿里云 Elasticsearch 生态&amp;amp;技术峰会 - &lt;strong>《如何规划和执行威胁狩猎》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://community.elastic.co/events/details/elastic-global-community-presents-community-conference-2021/" target="_blank" rel="noopener"
>2 月 27 日 Elastic Community 2021 - &lt;strong>《如何使用 Elastic Stack 规划和执行威胁狩猎》&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2020">2020&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/0h2wa.html" target="_blank" rel="noopener"
>12 月 19 日：中国 DevOps 社区峰会-北京站 — &lt;strong>《中国 DevOps 社区的现状和未来》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/0h2wa.html" target="_blank" rel="noopener"
>12 月 19 日：中国 DevOps 社区峰会-北京站 — &lt;strong>《SRE 提高服务的质量和稳定性的套路》Track&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/gq2wa.html" target="_blank" rel="noopener"
>11 月 21 日：中国 DevOps 社区峰会-成都站 — &lt;strong>《中国 DevOps 社区的现状和未来》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.phpconchina.com/" target="_blank" rel="noopener"
>10 月 18 日：PHPCon China 2020- &lt;strong>《SRE 如何提高服务的质量和稳定性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cloud.tencent.com/developer/salon/live-1304" target="_blank" rel="noopener"
>12 月 23 日：腾讯云+社区沙龙 online - &lt;strong>《Elasticsearch 应用监控管理平台搭建实战》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/4rl9a.html" target="_blank" rel="noopener"
>8 月 10 日：中国 DevOps 社区首届 — &lt;strong>《Pipeline Craft 流水线大赛 》Hackathon Organizer&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/kkcza.html/" target="_blank" rel="noopener"
>4 月 1 日：中国 DevOps 社区第 18 期线上直播— &lt;strong>《运维、开发和管理者们必备的 SRE 核心体系解读》&lt;/strong>&lt;/a> &lt;a class="link" href="https://www.bilibili.com/video/BV1ak4y1975Z" target="_blank" rel="noopener"
>B 站&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2019">2019&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="http://conf.elasticsearch.cn/2019/beijing/schedule.html" target="_blank" rel="noopener"
>12 月 7 日：Elastic DevDay 2019 - &lt;strong>《用 Elastic Stack 破解云原生的可观测性》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/js53a.html" target="_blank" rel="noopener"
>10 月 26 日：中国 DevOps 社区峰会-杭州 — &lt;strong>《中国 DevOps 社区的现状和规划》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.huodongxing.com/event/2508098665800" target="_blank" rel="noopener"
>10 月 24 日：云原生技术实践峰会 CNBPS — &lt;strong>《不只是日志，Elastic Stack 给你更多精彩》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/5451680" target="_blank" rel="noopener"
>10 月 20 日 ： PyCon2019 中国 Python 开发者大会- 深圳站 - &lt;strong>《 Google SRE 体系核心基础解读》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="bagevent.com/event/5293611" >9 月 11 日 ： PyCon2019 中国 Python 开发者大会- 上海站 - &lt;strong>《分层次构建应用系统的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://coscup.org/2019/en/programs/" target="_blank" rel="noopener"
>8 月 17 日 ： COSCUP 2019 2019 Taipei - &lt;strong>《破解云原生应用的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.phpconchina.com/2019" target="_blank" rel="noopener"
>8 月 11 日 ： PHPCon China 2019 Shanghai - &lt;strong>《破解云原生应用的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.phpconchina.com/2019" target="_blank" rel="noopener"
>8 月 4 日 ： TiD 质量竞争力大会 北京 - &lt;strong>《破解云原生应用的可观测性》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/lwina.html" target="_blank" rel="noopener"
>6 月 2 日 ： 中国 DevOps 社区重庆首届 Meetup - &lt;strong>《DevOps 工作三步法精讲》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/wjz2a.html" target="_blank" rel="noopener"
>5 月 25 日 ： 中国 DevOps 社区济南首届 Meetup - &lt;strong>《用 Jenkins 实施 CI/CD 工作坊》Workshop&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2018">2018&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.hudongba.com/party/24epn.html" target="_blank" rel="noopener"
>12 月 16 日：中国 DevOps 社区北京第 3 届 Meetup - &lt;strong>《中国 DevOpsDays 社区回顾》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/1797956?bag_track=bagevent" target="_blank" rel="noopener"
>11 月 3 日：DevOps Days Shenzhen 2018 - &lt;strong>《2018 DevOps 状态报告深度解读》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/1797956?bag_track=bagevent" target="_blank" rel="noopener"
>11 月 2 日：DevOps Days Shenzhen 2018 - &lt;strong>《DevOps 工作三步法》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://devopsdays.tw/2018/agenda.html" target="_blank" rel="noopener"
>9 月 12 日：DevOps Days Taipei 2018 - &lt;strong>《沒有度量就沒有管理 &amp;ndash;洞察 DevOps 能力成長模型》&lt;/strong>&lt;/a> | &lt;a class="link" href="https://s.itho.me/devopsdays/2018/0912tracka-5.pdf" target="_blank" rel="noopener"
>Slides&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/1770635" target="_blank" rel="noopener"
>9 月 9 日：中国 DevOps 社区北京第 2 届 Meetup - &lt;strong>《不应用 DevOps 能力成长模型，就不会成功！》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://msite.31huiyi.com/m/mobisite/zdyhtml/1368776152?menuId=1368776152&amp;amp;comId=365820979&amp;amp;lc=1&amp;amp;sui=0WNauKvp" target="_blank" rel="noopener"
>8 月 18 日：DevOps Days Shanghai 2018 - &lt;strong>《2018 DevOps 状态报告中文版发布》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://msite.31huiyi.com/m/mobisite/zdyhtml/1368776152?menuId=1368776152&amp;amp;comId=365820979&amp;amp;lc=1&amp;amp;sui=0WNauKvp" target="_blank" rel="noopener"
>8 月 17 日：DevOps Days Shanghai 2018 - &lt;strong>《Accelerate 加速度》高效 IT 组织演进图谱&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/1627132" target="_blank" rel="noopener"
>7 月 28 日：中国 DevOps 社区天津首届 Meetup - &lt;strong>《欢迎来到中国 DevOps 社区》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/1602498" target="_blank" rel="noopener"
>7 月 22 日：中国 DevOps 社区北京首届 Meetup - &lt;strong>《欢迎来到中国 DevOps 社区》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://event.31huiyi.com/1281765435/" target="_blank" rel="noopener"
>5 月 5 日： DevOps Days Beijing 2018 - &lt;strong>《怎样挑战 DevOps 实践之旅？》KEYNOTES&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2017">2017&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://devopsdays.tw/2017/sessions.html" target="_blank" rel="noopener"
>9 月 6 日：DevOps Days Taipei 2017 - &lt;strong>《DevOps 的核心理念和實踐》&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.bagevent.com/event/devopsdays-beijing2017" target="_blank" rel="noopener"
>3 月 18 日：DevOps Days Beijing 2017 - &lt;strong>OpenSpace Facilitator. Brought this internal community into China&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="翻译的书籍">翻译的书籍&lt;/h2>
&lt;p>我翻译的书籍。&lt;/p>
&lt;h3 id="devops-handbook-devops-实践指南">《DevOps Handbook》-《DevOps 实践指南》&lt;/h3>
&lt;p>翻译书籍 &lt;a class="link" href="https://itrevolution.com/book/the-devops-handbook/" target="_blank" rel="noopener"
>《DevOps Handbook》&lt;/a> 来自 &lt;em>IT Revolution Press&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-05-11-025310.jpg"
loading="lazy"
alt="DevOps Handbook"
>&lt;/p>
&lt;p>已出版，网上有售。&lt;/p>
&lt;ul>
&lt;li>京东：&lt;a class="link" href="https://item.jd.com/26848921955.html" target="_blank" rel="noopener"
>https://item.jd.com/26848921955.html&lt;/a>&lt;/li>
&lt;li>英文原版-亚马逊书店：&lt;a class="link" href="http://a.co/95lK7hC" target="_blank" rel="noopener"
>http://a.co/95lK7hC&lt;/a> &lt;em>Selling on Amazon&lt;/em>&lt;/li>
&lt;/ul>
&lt;h3 id="sre-workbook---sre-工作手册">《SRE Workbook》 - 《SRE 工作手册》&lt;/h3>
&lt;p>翻译书籍 《SRE Workbook》来自 O&amp;rsquo;Reilly Media&lt;/p>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-05-11-025343.jpg"
loading="lazy"
alt="SRE Workbook"
>&lt;/p>
&lt;p>已经出版，网上有售。&lt;/p>
&lt;ul>
&lt;li>京东：&lt;a class="link" href="https://item.jd.com/12983982.html" target="_blank" rel="noopener"
>https://item.jd.com/12983982.html&lt;/a>&lt;/li>
&lt;li>英文原版-亚马逊书店：&lt;a class="link" href="https://www.amazon.com/Site-Reliability-Workbook-Practical-Implement/dp/1492029505/" target="_blank" rel="noopener"
>https://www.amazon.com/Site-Reliability-Workbook-Practical-Implement/dp/1492029505/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="devops-paradox---devops-悖论">《DevOps Paradox》 - 《DevOps 悖论》&lt;/h3>
&lt;p>&lt;img src="https://elasticstack-1300734579.cos.ap-nanjing.myqcloud.com/2021-04-01-Screen%20Shot%202021-04-01%20at%208.53.23%20PM.jpg"
loading="lazy"
alt="DevOps Pradox"
>&lt;/p>
&lt;p>已经出版，网上有售。&lt;/p>
&lt;ul>
&lt;li>京东：&lt;a class="link" href="https://item.jd.com/13047191.html" target="_blank" rel="noopener"
>https://item.jd.com/13047191.html&lt;/a>&lt;/li>
&lt;li>英文原版-亚马逊书店：&lt;a class="link" href="https://www.amazon.com/DevOps-Paradox-truth-about-people-ebook/" target="_blank" rel="noopener"
>https://www.amazon.com/DevOps-Paradox-truth-about-people-ebook/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>即将出版：&lt;/p>
&lt;ul>
&lt;li>97 Things Every SRE Should Know&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://learning.oreilly.com/library/cover/9781492081487/250w/"
loading="lazy"
alt="97 Things Every SRE Should Know"
>&lt;/p>
&lt;ul>
&lt;li>Distributed Tracing in Practice&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://learning.oreilly.com/library/cover/9781492056621/250w/"
loading="lazy"
alt="Distributed Tracing in Practice"
>&lt;/p></description></item><item><title>成熟度模型已死</title><link>https://martinliu.cn/blog/%E6%88%90%E7%86%9F%E5%BA%A6%E6%A8%A1%E5%9E%8B%E5%B7%B2%E6%AD%BB/</link><pubDate>Wed, 27 Jun 2018 21:34:04 +0800</pubDate><guid>https://martinliu.cn/blog/%E6%88%90%E7%86%9F%E5%BA%A6%E6%A8%A1%E5%9E%8B%E5%B7%B2%E6%AD%BB/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1549271017/Anubis-Background-Download-Free.jpg" alt="Featured image of post 成熟度模型已死" />&lt;p>上一篇文章重要观点回顾：&lt;/p>
&lt;ul>
&lt;li>应用DevOps的企业不应该使用成熟度模型度量&lt;/li>
&lt;li>应用DevOps的不同企业/部门不会参考某个所谓标准&lt;/li>
&lt;li>应用DevOps的不同企业/部门应该参考5大类24项的能力成长模型，来度量其发展进度，在磨练这些能力的过程中，选择符合自身业务需求的，且优先级别高能力先发展。&lt;/li>
&lt;/ul>
&lt;h2 id="成熟度模型已死">成熟度模型已死&lt;/h2>
&lt;p>这个模型在各行各业都可能存在，而且可能是最容易被人接受的模型之一。对于很多新生的领域，如法炮制的套用这个模型合适么？无论合适与否，它还是会出现在DevOps的领域中。为了避免实践者试错，我们不得来分析一下这种模型的特点。&lt;/p>
&lt;h3 id="特征1">特征1&lt;/h3>
&lt;p>它总是阶梯式的，而且从来都是5个等级，人们经常戏称为Golden 5。常见的5级成熟度模型有下列几种。&lt;/p>
&lt;p>&lt;em>CMMI 能力成熟度模型集成&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://pic.baike.soso.com/p/20131203/20131203141932-427475281.jpg"
loading="lazy"
alt="CMMI"
>&lt;/p>
&lt;p>&lt;em>ITIL/ITSM的成熟度模型&lt;/em>&lt;/p>
&lt;p>&lt;img src="http://www.jp1.cn/image/h1/2_200644102151993.jpg"
loading="lazy"
alt="ITIL"
>&lt;/p>
&lt;p>&lt;em>IT与业务融合的成熟度&lt;/em> &lt;a class="link" href="http://www.cio.com.cn/eyan/1431.html" target="_blank" rel="noopener"
>http://www.cio.com.cn/eyan/1431.html&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://www.cio.com.cn/source/attachments/image/20120417/20120417164221_20236.jpg"
loading="lazy"
alt="ITIL"
>&lt;/p>
&lt;p>&lt;em>德勤网络安全合规成熟度示意图&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://www2.deloitte.com/content/dam/Deloitte/cn/Images/inline_images/serv-risk/cn-ra-cyberrisk-compliance-model-3.jpg/_jcr_content/renditions/cq5dam.web.700.350.desktop.jpeg"
loading="lazy"
alt="网络安全合规"
>&lt;/p>
&lt;p>&lt;em>持续交付流程成熟度&lt;/em>&lt;/p>
&lt;p>&lt;img src="http://www.ibm.com/developerworks/cn/rational/1402_zhaojing_urbancode1/image011.jpg"
loading="lazy"
alt="CD"
>&lt;/p>
&lt;p>如果你百度“成熟度模型”，还可以轻易地找到很多类似模型。客观的讲，这个模型是被广泛应用的神五级。&lt;/p>
&lt;p>这个模型对于任何使用的组织来说都是统一的，不会说对于有些企业是8级的，对于另外一些企业是10级的。&lt;/p>
&lt;p>这种模型的另外一个代名词是“XXX标准”，或者“XX行业标准”。&lt;/p>
&lt;h3 id="特征2">特征2&lt;/h3>
&lt;p>通常对于每个等级上还可以定义出3到7个不同的维度。维度的数量少则3个级别，多字7到10个维度；可以要在每一个级别的不同维度上进行评价。这些维度一旦确定下来，也通常是十年如一日的静止不变。&lt;/p>
&lt;p>只是一种纵横交叉的矩阵的模式，如以上的持续交付流程成熟度、德勤网络安全合规成熟度示意图和IT与业务融合的成熟度都是这样。&lt;/p>
&lt;p>维度和等级往往都是静态的，通常模型发布之后，在很长一段时间里，不会发生改变。&lt;/p>
&lt;h3 id="特征3">特征3&lt;/h3>
&lt;p>这些模型对于不同的组织而言，组织的目标都是一致而单纯的，即“通过/到达”某个级别。请你回忆一下以前的经历。一个软件开发组织经过一年的奋斗，他们通过了CMMI3级认证；第二年的时候，项目组一狠心，一跺脚一次性通过了5级认证。请问他们为什么一定要在第二年通过5级？在第三年里，相比以前，软件开发的质量提高了么？在第四年，有没有可能出现倒退的现象？如果你回答不了这些问题的话，可以尝试请教一个更资深一些的，工作10年以上的朋友或者同事。&lt;/p>
&lt;h2 id="成熟度模型的局限性">成熟度模型的局限性&lt;/h2>
&lt;p>根据以上的三个主要特征，这种模型的局限性大概有以下几个方面：&lt;/p>
&lt;p>每一个企业的自身条件、业务环境、资源约束都是不同的。让他们都对标一个统一的静态成熟度模型是不合适的。这就像是目前某些国家的教育体制一样。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload//3-levels.jpeg"
loading="lazy"
alt="3levels"
>&lt;/p>
&lt;p>IT行业每天都在发生着巨大的变化，这就是我么经常提到的乌卡时代，今年流行的技术，很快就会过时，明年也将出现新的、未知的技术领域。很多行业的特点就是，在不断反复的被颠覆。而这些成熟度模型通常是永恒不变的。&lt;/p>
&lt;p>成熟度模型通常是在微观上进行考察，对很多考察点做孤立的分析和评测。这样做只能度量到技术、工具或者流程本身的一些方面。而忽视了组织通过它们所获得的总体成果产出。举个例子一个企业在通过了CMMI5级之后，发现收入/利润比以前还下降了；解释CMMI到达顶级的企业，业务收入还退步了，这本来就是一件比较尴尬的事情。&lt;/p>
&lt;p>如果一个集团企业，在所有IT组织/部门中强推某种成熟度模型的话，还有可能出现停滞不前的博弈现象。某些组织可能会宁愿待在中间的某个不成熟等级，并不愿意快速的提升到最高等级。那样的话，他们将失去每年一定数量的，用于提高成熟度等级的资源和预算。从最大化局部利益的角度考虑，最高级的成熟度可能等于最低级的资源支持。&lt;/p>
&lt;p>最后，无论到达了那个等级的成熟度，这种明确而清晰的满足感，滋生出了锚定效应。这其实阻碍了组织持续的探索和尝试未知领域，组织因此学习的知识就会越来越少。甚至于出现能力的下滑和倒退。&lt;/p>
&lt;p>综上所述，在DevOps的领域里，成熟度模型和统一标准已经过时了，它不适合用于DevOps的度量；而且，纵观整个行业，国际上目前还没有那一个适用的DevOps成熟度模型被应用于任何组织。那么还有什么其他DevOps适用的模型？&lt;/p>
&lt;h2 id="devops能力成长模型">DevOps能力成长模型&lt;/h2>
&lt;p>这个模型是在《Accelerate-加速器》这本书里被提出的。相信大家对Nicole博士联合Puppet Lab发起的DevOps状态调查和年度报告并不陌生。这本书分析了DevOps状态报告四年的历史数据，书里所展示的内容，其实也正好是作者Nicole Forsgren博士对DevOps现状调研的第一个迭代的阶段性成果。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Accelerate.jpg"
loading="lazy"
alt="模型"
>&lt;/p>
&lt;p>这本书的目标是解密高效能组织的高明之处，以及背后的原因。从探寻影响组织绩效的因素为起点，经过了四年的不断调研，Nicole博士向我们展示了一个相对比较完整的，各种影响因素的关系网。特别说明的是：下图来自于《加速器》这本书，这个形态是经过4年演进出来的，我们无法猜测2018年Nicole博士究竟怎样地拓展了调研的范围；更无法猜测的是：在2018年的状态报告结果中，这幅图会变成什么样子？&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-cap-mod.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;p>Nicole博士总结出了DevOps能力的5大分类，包含的能力点有24项。&lt;/p>
&lt;h3 id="第一类持续交付">第一类：持续交付&lt;/h3>
&lt;ol>
&lt;li>对生产环境的所有工件进行版本控制&lt;/li>
&lt;li>运用自动化部署流程&lt;/li>
&lt;li>实施持续集成&lt;/li>
&lt;li>运用基于主干的开发方法&lt;/li>
&lt;li>实施测试自动化&lt;/li>
&lt;li>进行测试数据管理&lt;/li>
&lt;li>前置信息安全管理&lt;/li>
&lt;li>实施持续交付&lt;/li>
&lt;/ol>
&lt;h3 id="第二类系统架构">第二类：系统架构&lt;/h3>
&lt;ol>
&lt;li>应用松耦合的架构设计&lt;/li>
&lt;li>授权团队进行架构重构的决策&lt;/li>
&lt;/ol>
&lt;h3 id="第三类产品和流程">第三类：产品和流程&lt;/h3>
&lt;ol>
&lt;li>收集和实施客户反馈&lt;/li>
&lt;li>运用价值流模式可视化工作流&lt;/li>
&lt;li>运用小批量的工作模式&lt;/li>
&lt;li>培养和赋能团队进行试验&lt;/li>
&lt;/ol>
&lt;h3 id="第四类精益管理和监控">第四类：精益管理和监控&lt;/h3>
&lt;ol>
&lt;li>应用轻量变更审批流程&lt;/li>
&lt;li>业务决策得到从应用到基础架构的全堆栈支持&lt;/li>
&lt;li>前瞻性地监控系统的状况&lt;/li>
&lt;li>应用WIP来进行价值流的工作管理&lt;/li>
&lt;li>通过可视化来监控团队工作质量和进行沟通&lt;/li>
&lt;/ol>
&lt;h3 id="第五类企业文化">第五类：企业文化&lt;/h3>
&lt;ol>
&lt;li>发展并支持生机型企业文化&lt;/li>
&lt;li>鼓励和支持学习&lt;/li>
&lt;li>支持和辅助团队间的协作&lt;/li>
&lt;li>提供工作所需要的资源和工具&lt;/li>
&lt;li>支持和落实领导力转型&lt;/li>
&lt;/ol>
&lt;h2 id="devops能力成长模型的特点">DevOps能力成长模型的特点&lt;/h2>
&lt;p>首先，这个模型是基于4年以上的、科学的调查分析而来的。Nicole博士和全球最顶尖的DevOps公司，以及各种业内大咖，历经了多年的协作。其次，此模型是演变出来的，而且一定会持续更新。最后，分析一下这个模型的特点。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-cap-mod1.jpg"
loading="lazy"
alt="模型"
>&lt;/p>
&lt;ul>
&lt;li>它目标是适用于能力和起点本来就参差不齐的不同的组织/团队。&lt;/li>
&lt;li>它适用于每个团队在能力上优劣各不相同的情况。而且每个团队的业务使命和向下文也不相同。&lt;/li>
&lt;li>它使每个团队聚焦在各自不同的能力点上，发展和解决各不相同的约束点/弱点。&lt;/li>
&lt;li>以上能力模型来上游调查数据就是一个行业基线（基线也在不断变化中），不同的团队参考每一项能力的行业基线定义各自的下一步的发展目标。&lt;/li>
&lt;/ul>
&lt;h2 id="建议的度量套路">建议的度量套路&lt;/h2>
&lt;p>可以将DevOps能力成长模型作为企业应用DevOps的一个有效的度量工具。通过持续的度量，现状分析和改进，让DevOps的优化全局价值产出的特性加速企业客户价值的增长。这里简单描述一下建议的套路&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/outcome1.jpg"
loading="lazy"
alt="模型"
>&lt;/p>
&lt;ul>
&lt;li>度量关键产出：这些指标是衡量你的团队软件交付的好坏与否的一个高阶的度量。相关指标有：IT效能、前置时间、部署频率、MTTR、变更失败率、加班程度和部署痛点。&lt;/li>
&lt;li>能力驱动的改进：这些能力是你提升关键产出的抓手。由于你提高了一些能力，你在这些能力得到提升的同时，还能更快且可靠的交付软件。&lt;/li>
&lt;li>按优先级改进：通过能力模型的评估，你识别出了那些能力约束点/瓶颈，是它们在阻止你达到更高的技术阶段，然后确定那些能力需要先优先发展。&lt;/li>
&lt;/ul></description></item><item><title>参与2018年DevOps状态调查报告</title><link>https://martinliu.cn/blog/%E5%8F%82%E4%B8%8E2018%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A/</link><pubDate>Wed, 27 Jun 2018 00:09:21 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%8F%82%E4%B8%8E2018%E5%B9%B4devops%E7%8A%B6%E6%80%81%E8%B0%83%E6%9F%A5%E6%8A%A5%E5%91%8A/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/abstract-6.jpg" alt="Featured image of post 参与2018年DevOps状态调查报告" />&lt;p>听说这里有一个15分钟就能完成的DevOps调查问卷，有25位参与者或将得到总值为3200美元的亚马逊购物券。一年也就是这一次机会。问卷调查将在10天后就关闭。&lt;/p>
&lt;p>这是DevOps状态报告调查问卷的第七年。在过去的6年里，已经有两万七千多人参与了这项调查。这项调查已经获得了丰硕的成果，主要是帮助你了解在DevOps之旅上当前的进展。今年又扩展了调查的范围，再度加深了对DevOps之旅的调研。&lt;/p>
&lt;p>我已经帮你把问题的套路摸清楚了，其实问题都很清晰直白，很容易和你所在企业的DevOps状态做匹配。填写问卷调查也是一个学习的过程，可以用开放的心态去了解一下，调查报告对DevOps的观察角度都有哪些？&lt;/p>
&lt;p>对其中的部分问题做出了简要的说明，预祝你在参加这项全球性著名调查的过程中，有一个愉快的体验。&lt;/p>
&lt;h2 id="今年的看点">今年的看点&lt;/h2>
&lt;p>据说DevOps状态调查报告的一个最大的价值就是：在你的组织中，你可以用这些数据展示出DevOps的价值，从而取得管理层的支持，并启动DevOps项目。&lt;/p>
&lt;p>在今年的调查研究工作中，新加入的，对在企业中应用和推广DevOps有深度洞察的专家包括：&lt;/p>
&lt;ul>
&lt;li>Andi Mann, the chief technology advocate at Splunk and co-author of Visible Ops – Private Cloud and and The Innovative CIO.&lt;/li>
&lt;li>Michael Stahnke, a director of engineering at Puppet and the author of Pro OpenSSH.&lt;/li>
&lt;li>Alanna Brown, the director of product marketing at Puppet and creator of the first State of DevOps Report in 2013.&lt;/li>
&lt;/ul>
&lt;p>参加这项问卷调查将有25人会得到亚马逊购物券，价值 $100, $200 或 $500 ； 抽奖说明：&lt;/p>
&lt;ol>
&lt;li>$500 2 人&lt;/li>
&lt;li>$200 8 人&lt;/li>
&lt;li>$100 15 人&lt;/li>
&lt;/ol>
&lt;p>注：规则完整版 &lt;a class="link" href="https://puppet.com/2018-devops-survey-contest-rules" target="_blank" rel="noopener"
>https://puppet.com/2018-devops-survey-contest-rules&lt;/a>&lt;/p>
&lt;h2 id="参与此项调研报告">参与此项调研报告&lt;/h2>
&lt;p>每道问题选择了答案之后，会影响到后续所出现的问题，我选择了金融（含保险）行业的DevOps软件工程师的路径。&lt;/p>
&lt;p>这个调查的问题库非常强大，每一个问题的回答都在影响下一个问题的范围。有些问题是情景设定和分析题，会预设一个阶段（有可能是你还未达到的），在这种情况里作出你的判断和选择。&lt;/p>
&lt;p>翻墙之后网页刷新速度会更快一些。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/survery.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;h3 id="第一部分">第一部分&lt;/h3>
&lt;ol>
&lt;li>Where do you work? / 你在那个大洲工作？&lt;/li>
&lt;li>In which country do you work? / 在那个国家工作？&lt;/li>
&lt;li>What is the principal industry of your organization? / 你的组织是什么行业的？&lt;/li>
&lt;li>Which of the following best describes your title or role in your company? / 下面的各种头衔/角色那个和你最匹配？&lt;/li>
&lt;li>What department do you work in? / 你什么部门工作？&lt;/li>
&lt;li>And what team do you work on? / 你在什么团队工作？&lt;/li>
&lt;li>Which of the following describes your level of knowledge regarding your organization’s IT operations and software delivery? / 下面那一项最准确地描述了你的组织在IT运维和软件交付方面的知识程度？&lt;/li>
&lt;/ol>
&lt;h3 id="第二部分">第二部分&lt;/h3>
&lt;p>Many people say that there are four elements of DevOps that work together as enterprises evolve. They are:&lt;/p>
&lt;ul>
&lt;li>Culture 文化&lt;/li>
&lt;li>Automation 自动化&lt;/li>
&lt;li>Measurement 度量&lt;/li>
&lt;li>Sharing 分享&lt;/li>
&lt;/ul>
&lt;p>The next few questions will ask about each of these elements.&lt;/p>
&lt;p>这部分是对企业的CAMS调查的。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Where would you say you are at culture-wise, on your DevOps journey so far? / 在你目前的DevOps旅程中，DevOps文化存在于怎样的范围里？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Where would you say you are at automation-wise, on your DevOps journey so far? / 在你目前的DevOps旅程中，自动化的程度是怎样的？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Where would you say you are at measurement-wise, on your DevOps journey so far? Please select all that apply. / 在你目前的DevOps旅程中，在那些方面实施了度量？- 多选&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Where would you say you are at sharing-wise, on your DevOps journey so far? / 在你目前的DevOps旅程中，在分享方面是怎么做的？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>How frequently do each of these practices occur in your organization? / 下列实践在你的组织中发生的频率？从来没用过 ~ 总是在用 5级&lt;/p>
&lt;ul>
&lt;li>We balance lowering technical debt, with new feature work&lt;/li>
&lt;li>Configurations are managed by a configuration management tool&lt;/li>
&lt;li>A cross-functional review is done before implementation of a project&lt;/li>
&lt;li>Teams use continuous delivery&lt;/li>
&lt;li>Before starting a project, we establish concrete success criteria&lt;/li>
&lt;li>We create learning opportunities across teams (e.g., training, internal DevOps workshops, etc.)&lt;/li>
&lt;li>We expose data and services via APIs&lt;/li>
&lt;li>Success metrics for projects are visible&lt;/li>
&lt;li>DevOps initiatives are supported by senior leadership&lt;/li>
&lt;li>Teams use agile approaches across development and operations&lt;/li>
&lt;li>Developers are on-call for production issues&lt;/li>
&lt;li>Teams use continuous integration&lt;/li>
&lt;li>Source code is made available to other teams&lt;/li>
&lt;li>Experiences and lessons are shared externally (e.g., meetups / conferences, blog posts, etc.)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>How frequently were each of these practices used when you were first starting out with DevOps? / 在你的DevOps刚刚起步的阶段，下列实践的使用频率是怎样的？从来没用过 ~ 总是在用 5级&lt;/p>
&lt;ul>
&lt;li>Application configurations are in version control&lt;/li>
&lt;li>Infrastructure teams use version control&lt;/li>
&lt;li>Automate system configurations (e.g. operating system baselines)&lt;/li>
&lt;li>System configurations are in version control&lt;/li>
&lt;li>Automate provisioning (e.g. server, VM, cloud instances, etc.)&lt;/li>
&lt;li>Application development teams use version control&lt;/li>
&lt;li>Automate security policy configurations&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>How frequently were these practices used after you started to see some traction with DevOps? / 在你开始感受到DevOps的优势以后，下列实践的使用频率是怎样的？从来没用过 ~ 总是在用&lt;/p>
&lt;ul>
&lt;li>We reuse deployment patterns for building applications or services&lt;/li>
&lt;li>Monitoring and alerting are configurable by the team operating the service&lt;/li>
&lt;li>We deploy on a single standardized operating system&lt;/li>
&lt;li>We deploy on a set of standardized operating systems&lt;/li>
&lt;li>We build on a standardized set of technologies&lt;/li>
&lt;li>Configurations are managed by a configuration management tool&lt;/li>
&lt;li>We reuse testing patterns for building applications or services&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>How frequently were the following used while you were expanding DevOps practices? / 在你推广DevOps实践的过程中，下列实践的使用频率是怎样的？从来没用过 ~ 总是在用 5级&lt;/p>
&lt;ul>
&lt;li>We have post-incident reviews and share results&lt;/li>
&lt;li>Security teams are involved in technology design and deployment&lt;/li>
&lt;li>Teams contribute improvements to tooling provided by other teams&lt;/li>
&lt;li>We reuse testing patterns for building applications or services&lt;/li>
&lt;li>Individuals can do their work without manual approval from outside of their team&lt;/li>
&lt;li>We reuse deployment patterns for building applications or services&lt;/li>
&lt;li>Monitoring and alerting are configurable by team operating service&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>How frequently were these practices used while you were optimizing your DevOps practices? / 当你在优化DevOps实践的过程中，下列实践的使用频率是怎样的？从来没用过 ~ 总是在用 5级&lt;/p>
&lt;ul>
&lt;li>Infrastructure changes are tested before deploying to production&lt;/li>
&lt;li>Rearchitect applications based on business needs (e.g., reducing operational costs, ease of deployment, etc.)&lt;/li>
&lt;li>Individuals accomplish changes without significant wait times&lt;/li>
&lt;li>Monitoring and alerting are configurable by team operating service&lt;/li>
&lt;li>Teams contribute improvements to tooling provided by other teams&lt;/li>
&lt;li>Service changes can be made during business hours&lt;/li>
&lt;li>Incident responses are automated&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>How frequently were these practices used while you were enabling self-service? / 在你管理自助服务的情况下，下列实践的使用频率是怎样的？从来没用过 ~ 总是在用 5级&lt;/p>
&lt;ul>
&lt;li>Teams contribute improvements to tooling provided by other teams&lt;/li>
&lt;li>Resources (e.g., accounts, infrastructure, etc.) made available via self-service&lt;/li>
&lt;li>Logging configuration is deployed with the application or service&lt;/li>
&lt;li>Monitoring and alerting are configurable by team operating service&lt;/li>
&lt;li>App developers deploy testing environments on their own&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Which, if any, of the following processes or tools are “self-service” in your DevOps approach? Please select all that apply. / 在你的DevOps计划中，下列哪些流程或者工具会做成自助服务？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Which of the following organizational structures have you used in your DevOps journey? / 在你DevOps的旅程中，你曾经用过下列哪些组织结构？&lt;/p>
&lt;ul>
&lt;li>Cross-functional teams that are responsible for specific services or applications&lt;/li>
&lt;li>A centralized IT team and multiple application development teams&lt;/li>
&lt;li>A Site Reliability Engineering (SRE) team&lt;/li>
&lt;li>A service provider that provides DevOps capabilities (e.g. builds test environments, provides monitoring, etc.)&lt;/li>
&lt;li>A dedicated DevOps team&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Please tell us what kind of development your organization does. / 你的组织开发各种类型软件的比例是多少？5个问题填写百分比，凑够100&lt;/p>
&lt;ul>
&lt;li>We do custom development for internal users&lt;/li>
&lt;li>We do custom development for COTS (commercial off-the-shelf software)&lt;/li>
&lt;li>We manage COTS (commercial off-the-shelf software (e.g., upgrades)&lt;/li>
&lt;li>We do in-house development of custom applications for external users&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>If you could move the needle on one metric related to DevOps, what would it be? / 如果让你仅仅选择一个度量DevOps的指标，这个指标是什么？ - 描述题&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Just a few more questions to help us categorize your answers. / 下列问题帮助我们对你的组织进行分类。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>What figure best describes your company’s annual revenue in US$ equivalent? / 你们公司的年营业额是多少美元？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>What is the proportion of genders working on your team? / 你所在的团队男女比例？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Please tell us how you identify. / 请问告诉我们你认为自己是什么性别。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>What is your current annual salary in US dollars? / 你的年薪是多少美元？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Do you consider yourself to be part of a visible or invisible minority where you work? / 你认为自己工作是显耀的还是无足轻重（少数派）的？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Please tell us of what minority(ies) you consider yourself to be a member. Please select all that apply. / 请告诉我们你的这种无足轻重是指哪方面？-多选&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Would you like to receive an email with the report link when it is available? / 你是否希望收到这份报告的下载链接？&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="完毕">完毕&lt;/h3>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/survy.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;p>本文来源：https://puppet.com/blog/introducing-2018-state-devops-survey-new-research-focus&lt;/p>
&lt;p>调查问卷网址：https://polls.onresearch.net/DevOps/blog&lt;/p>
&lt;h2 id="后记">后记&lt;/h2>
&lt;p>DevOps圈子里的人都知道，这项问卷调查在IT行业里的知名度和权威性。它的目的在于：通过持续的研究DevOps在各个企业中应用的状态特征，定量的收集大量行业基础分析数据，这样所有的企业就有了一个可以参照的基线数据。更重要的是，它还将企业的绩效分成了高中低三个等级；对这些数据，用科学的分析方法，总结出了高绩效企业之所以高明的原因，将这些结论/假设/原因还在逐年推演和求证中。因此它形成了最具说服力的一些列结论。这些结论都展示在了历年来的DevOps状态报告中。&lt;/p>
&lt;p>今年 Nicole Forsgren博士，《Accelerate》一书的主要作者，用此书对多年来的DevOps状态分析做了一个总结。此书一出版就高居亚马逊畅销榜榜首，还被誉为DevOps界的科学。这本书为你展示了历年来的状态分析报告是怎么来的？调查的范围和方向是如何演进的？为什么会得出这样的分析结果？&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Accelerate.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;p>调查报告的分析结果是客观而科学的。而这本书向你展示了这些报告数据背后的How和Why。它提出了一个全新的主题“DevOps能力发展模型”；该书的一些结论也是非常具有颠覆性：&lt;/p>
&lt;ul>
&lt;li>应用DevOps的企业不应该使用成熟度模型度量&lt;/li>
&lt;li>应用DevOps的不同企业/部门不会参考某个共同标准&lt;/li>
&lt;li>应用DevOps的不同企业/部门应该参考5大类24项的能力成长模型，来度量其发展进度，在磨练这些能力的过程中，选择符合自身业务需求的，且优先级别高能力先发展。&lt;/li>
&lt;/ul>
&lt;p>下图是24项能力的分解表：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/nengli.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;p>我在这本刚发布的时候购买了电子版。在参加5月份的DevOpsDays大会北京站的深度培训“持续交付”课上，遇到了这个培训老师的Jez Humble先生，他也是本书的合著者之一。意外地获赠了一本他的签名实体书。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/my-acceleate.jpg"
loading="lazy"
alt="开始"
>&lt;/p>
&lt;p>在学习了一段时间以后，我总结和归纳了一些内容：关于对DevOps能力发展模型的详细剖析，对24项DevOps主要发展能力之间的关联关系的解读；这些内容将会在8月份上海的DevOpsDays大会上呈现。&lt;/p></description></item><item><title>从完美风暴说开去，直到DevOpsDays社区</title><link>https://martinliu.cn/blog/%E4%BB%8E%E5%AE%8C%E7%BE%8E%E9%A3%8E%E6%9A%B4%E8%AF%B4%E5%BC%80%E5%8E%BB%E7%9B%B4%E5%88%B0devopsdays%E7%A4%BE%E5%8C%BA/</link><pubDate>Sun, 20 May 2018 10:54:51 +0800</pubDate><guid>https://martinliu.cn/blog/%E4%BB%8E%E5%AE%8C%E7%BE%8E%E9%A3%8E%E6%9A%B4%E8%AF%B4%E5%BC%80%E5%8E%BB%E7%9B%B4%E5%88%B0devopsdays%E7%A4%BE%E5%8C%BA/</guid><description>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/v1526781579/Eye_Of_The_Storm_Hurricane_From_Space_freecomputerdesktopwallpaper_1600x900.jpg" alt="Featured image of post 从完美风暴说开去，直到DevOpsDays社区" />&lt;p>各种大会、各种喧嚣，你都看够了么？免费的，收费的，都与你有何相干？哪里是你自己的社区，哪里可以找到同类和导师？本文是我对社区的一点个人的思考，感兴趣的读一下。&lt;/p>
&lt;p>本文的标题图片是中国DevOpsDays社区志愿者招募的标题图片，这是NASA的一张完美风暴的航拍图片，暂时不欣赏这幅图的完美之处。让我来先讲讲它的出处，这幅图来自于樊登读书会App，源于他最近读到的一本书《谢谢你迟到》。&lt;/p>
&lt;p>我觉得书名和DevOps有些相关性，DevOps在IT行业中的兴起是最近9年的事，说来这是一段不长不短的时间。纵观最近几年的IT行业，这是一个从业人员的幸福感和优越感急剧下降的过程，是敏捷、精益、CMM和ITSM等管理等套路，在逐渐被人质疑的过程，是IT行业内的大厂纷纷走向没落的9年。DevOps并不是从无到有蹦出来的，它的姗姗来迟也并不具有任何的偶然性，相反它是各种管理实践分久必合的必然结果，它是一个各种最佳实践的聚合体，它是从敏捷社区发源，然后逐步融入了各种必要的元素，而且各种元素之间产生了化学反应后的化合物。&lt;/p>
&lt;p>我对社区的认识源于很久以前在大学中对Linux的喜爱，从哪里听说了开源社区这种事物。对开源软件社区的深刻理解是在加入Red Hat公司期间形成的。Red Hat公司创造了一种神奇的开放文化（见CEO Jim出版的Open Orgnazation一书），让曾经在哪里工作过的员工可以将自己的职业生涯清晰的化为：Red Hat阶段和非Red Hat两个阶段（所有其它公司都是和Red Hat迥异的，都是雷同的）。这不是我自己总结的，是今天早晨和一个公司同事聊出来的，我们都曾经在Red Hat工作过，不过在那段时间里我们并不认识。&lt;/p>
&lt;p>在Red Hat的时候，当你加入到某个开源项目的邮件讨论组的时候，你会很自豪的有一等公民的感觉。由于你发现你的同事在各种项目的讨论中频繁出现，他们的日常工作就是在开源社区中修复bug，提交feature。虽然我并不贡献代码，不过还是觉得占了“Red Hat是个活雷锋”的形象的光。Red Hat公司的工程师在开源社区中的贡献，是这种项目的助推剂和催化剂。&lt;/p>
&lt;p>当然也有人觉得Red Hat是商业开源而已，少了早年开源社区的那种乌托邦式的纯粹感，并不是一种无欲无求的奉献。但是时代还是要继续，而且是不断的变迁的。开源软件社区就是这样轻易的颠覆了软件世界的格局，纷纷倒闭和没落的昔日贵族们，他们不都是巨无霸级别的闭源殿堂么？&lt;/p>
&lt;p>开源软件的开放性和分享精神给了我非常大的影响，这加深了我对社区的认识。DevOpsDays社区是不同于开源软件社区的，我对他的感受和理解基于软件开源社区，但隐约感觉到它们是两种社区，应该是不同的类型，但是目前还说不清楚。&lt;/p>
&lt;p>用台风眼作为DevOpsDays社区的比喻是在我听樊登讲《谢谢你迟到》时想到的。听完之后，看了一下App里的此书的图文描述，发现这的确是我所需要的寓意，下面直接转述，不做解释。&lt;/p>
&lt;hr>
&lt;p>2.台风眼&lt;/p>
&lt;p>在台风来袭时，位于台风中心的台风眼反而是最安全、最风平浪静的。回到社区，找到自己熟悉的中心，就像是台风中的“台风眼”。&lt;/p>
&lt;p>台风眼也不是固定不动的，它能保持安稳的一大原因就是，它会应时而动。台风持续不断地移动，就像这个时代的脉搏，台风眼也随着它移动，保持自己始终处在有利的位置。&lt;/p>
&lt;p>台风眼就是我们每个人最好的老师。&lt;/p>
&lt;hr>
&lt;p>我现在所深度参与的是“DevOpsDays社区”，它的历史可以追溯到 #DevOps 这个词的诞生，它的全球广泛程度可以参考官网 &lt;a class="link" href="https://DevOpsDays.org" target="_blank" rel="noopener"
>https://DevOpsDays.org&lt;/a> ； 这也是我喜爱这个社区的两个原因。&lt;/p>
&lt;p>另外，我觉得DevOps本身对这个时代应该是很有价值的；此时此刻的深夜，我扫了一眼微信朋友圈，还是能看到“深夜、聚众、上线加夜班的团队”在上演着这不断重复的人间悲喜剧，看到他们相互的点赞、加油和鼓励；可是从DevOps的观点出发，我们其实可以冒出这样一句话：“其实还有一条更好的路”。&lt;/p>
&lt;p>虽然，有时候你觉得DevOps无处不在；但是，我个人深刻的意识到，其实IT行业中还有巨大数量的人，他们并不知道DevOps的存在。还有大量的人，个人掌握了DevOps的知识和实践，但是还是无法影响和改变周遭的人。还有大量的团队在迷迷糊糊地实施着DevOps。更有大量的公司在观望着DevOps。&lt;/p>
&lt;p>很显然，DevOps的推广和传播还是不够的，这是我觉得各种DevOps社区都应该意识到的一个事实。我们都有责任传播正确的理念和信息，切勿蹭着这个热点，而有不负责的传播着错误和误导的信息。所有博主、微信号和公司都应该自省。纷繁复杂的DevOps实践之间本来就已经存在着千丝万缕的联系，而它们的落地无不挑战和考验着所有的DevOps实践者们；只有在各自公司的业务场景里，运用科学系统的思维方式，经历相当长一段时间的实验阶段，才可能感知和捕捉到DevOps的好处和优势。在这个过程中，和同行的实践者坐而论道或将是一种很好的学习和提升的方式。而这也是DevOpsDays社区期望能为实践者们提供的。为此DevOpsDays社区需要做如下的工作，才能提供出以上的学习环境：&lt;/p>
&lt;ul>
&lt;li>线上线下的分享会&lt;/li>
&lt;li>线下的城市聚会&lt;/li>
&lt;li>举办区域的大会&lt;/li>
&lt;/ul>
&lt;p>这些活动的发生时需要一定数量的人力、物力和财力。如果我们想在国内覆盖更大数量的群体，必然需要更多数量的志愿者。如果没有坚实的志愿者群体，没有志愿者群体的奉献，任何社区可能都是难于发展和存在的。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>本文其实是写给我自己的和整个国内DevOps社区的，仅仅是简单地回顾了一下我个人的社区经历而已。不是想引导任何人来加入我们所发起的这个志愿者群体的。原因很简单：不到24小时，我们收到了近百人的报名申请。这让我们核心组织者措手不及。之前是发愁没有志愿者分担我们的劳动，而现在发愁的是如何与已经报名的人联系起来，我个人也没有管理如此数量志愿者群体的经验。最后希望我们可以快速的度过这个幸福难题；使志愿者们可以自组织地运作起来，让DevOpsDays社区为这个行业传播价值，让它在人和人之间创建有意义的链接。&lt;/p>
&lt;p>参与中国DevOpsDays社区的三种姿势：&lt;/p>
&lt;ul>
&lt;li>关注，从中学习所需要的知识；就这样静静的看着挺好。&lt;/li>
&lt;li>加入，分担一些志愿者工作，结交新朋友。&lt;/li>
&lt;li>分享，为这个社区注入新鲜的知识和经验，社区需要更多这样的人，需要有更多的人可以成长为分享者，分享也是一种更高阶的学习。&lt;/li>
&lt;/ul>
&lt;p>中国DevOpsDays社区的官网是： &lt;a class="link" href="http://ChinaDevOpsDays.org" target="_blank" rel="noopener"
>http://ChinaDevOpsDays.org&lt;/a>&lt;/p>
&lt;p>.&lt;/p></description></item><item><title>Kops on Aws</title><link>https://martinliu.cn/blog/kops-on-aws/</link><pubDate>Mon, 02 Apr 2018 00:22:44 +0800</pubDate><guid>https://martinliu.cn/blog/kops-on-aws/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/BingWallpaper-2018-03-17.jpg" alt="Featured image of post Kops on Aws" />&lt;p>kops这种方式是我找到的最佳的，最适合于培训课堂需要的安装方式，当然对有类似需求的人有帮助。&lt;/p>
&lt;h2 id="route53-dns配置">Route53 DNS配置&lt;/h2>
&lt;p>kops需要使用DNS服务，用主机名提供k8s的相关服务访问。配置的注意点：&lt;/p>
&lt;ul>
&lt;li>域名还是有必要有一个的，没有的话注册一个也不贵，以后用着也方便&lt;/li>
&lt;li>建议在aws的Route53里做一个二级域名，例如：k8s.devopscoach.org&lt;/li>
&lt;li>这个二级域名最好是能被正常公网解析的，为了便于直接访问集群里的服务&lt;/li>
&lt;li>用 dig NS k8s.devopscoach.org 可以能正常解析（Mac上是这个命令）&lt;/li>
&lt;/ul>
&lt;p>由于全球的域名同步会需要一些时间，因此可以先做这一步，用到的时候，可能就已经同步好了。&lt;/p>
&lt;p>kops会将所有主机的域名解析都自动化的添加A记录到这里。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/dns.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="安装工具准备">安装工具准备&lt;/h2>
&lt;p>需要安装的工具包括 kubectl, kops 和 AWS CLI 工具。kops需要调用 AWS CLI来创建所需要的资源。我觉得简单的方法是：在目标的Region里创建一台Amazon AMI的虚拟机，这样AWS CLI就不用装了，而且在云里的话，执行kops的时候，由于有一大堆资源创建更新的api调用，感觉速度比在本机快很多，而且还用担心断网。&lt;/p>
&lt;p>可以启动一台t2.micro规格的Amazon AMI即可，另外需要给这个实例配置如下IAM用户权限，在启动的时候选择合适的IAM Role。&lt;/p>
&lt;ul>
&lt;li>AmazonEC2FullAccess&lt;/li>
&lt;li>AmazonRoute53FullAccess&lt;/li>
&lt;li>AmazonS3FullAccess&lt;/li>
&lt;li>IAMFullAccess&lt;/li>
&lt;li>AmazonVPCFullAccess&lt;/li>
&lt;/ul>
&lt;p>这台虚拟机启动之后，安装kubectl和kops。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod +x kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mv kubectl /usr/local/bin/kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/kubernetes/kops/releases/download/1.8.0/kops-linux-amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod +x kops-linux-amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mv kops-linux-amd64 /usr/local/bin/kops
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>准备ssh登陆秘钥，用户ssh登录各个ec2实例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ ssh-keygen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter file in which to save the key (/home/ec2-user/.ssh/id_rsa):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter passphrase (empty for no passphrase):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your identification has been saved in /home/ec2-user/.ssh/id_rsa.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your public key has been saved in /home/ec2-user/.ssh/id_rsa.pub.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key fingerprint is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHA256:oSPZf85vNsC7l9z24umLJs4tQ6qDMCrWfqAVXGYoA34 ec2-user@ip-172-31-27-182
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key&amp;#39;s randomart image is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---[RSA 2048]----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|o . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|.o . + |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .+E+ . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .o o . . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + + S. |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| oo . o + |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .+o.. .o.+ o |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|oo .... .==.O.+. |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|o ... .o .*@+==+.|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----[SHA256]-----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建s3-bucket">创建S3 bucket&lt;/h2>
&lt;p>这是用来存储Kubernetes群集的配置信息的，kops在创建、运行、更新和管理它创建的群集过程中，没个Cluster的信息可以保存在bucket的一个目录中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ aws s3 mb s3://clusters.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make_bucket: clusters.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ export KOPS_STATE_STORE=s3://clusters.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建完成后，将其放入环境变量中待用。&lt;/p>
&lt;p>在集群安装完成之后，bucket里面的文件如下：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/s3.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="创建kubernetes-cluster">创建Kubernetes Cluster&lt;/h2>
&lt;p>命令行参数如下：&lt;/p>
&lt;ul>
&lt;li>kops create cluster //创建集群&lt;/li>
&lt;li>&amp;ndash;cloud=aws //使用aws&lt;/li>
&lt;li>&amp;ndash;zones=ap-northeast-1a //使用这个指定的zone&lt;/li>
&lt;li>&amp;ndash;name=dev.k8s.devopscoach.org //集群的名字&lt;/li>
&lt;li>&amp;ndash;dns-zone=k8s.devopscoach.org //集群所使用的DNS解析区&lt;/li>
&lt;li>&amp;ndash;dns public //对公可访问&lt;/li>
&lt;/ul>
&lt;p>命令的执行结果如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops create cluster --cloud=aws --zones=ap-northeast-1a --name=dev.k8s.devopscoach.org --dns-zone=k8s.devopscoach.org --dns public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:06.003257 30031 create_cluster.go:971] Using SSH public key: /home/ec2-user/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:07.132058 30031 subnets.go:184] Assigned CIDR 172.20.32.0/19 to subnet ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Previewing changes that will be made:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A new kops version is available: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Upgrading is recommended
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">More information: https://github.com/kubernetes/kops/blob/master/permalinks/upgrade_kops.md#1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:12.605297 30031 executor.go:91] Tasks: 0 done / 73 total; 31 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:13.546597 30031 executor.go:91] Tasks: 31 done / 73 total; 24 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----此处删除了n个字符------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPC/dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CIDR 172.20.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> EnableDNSHostnames true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> EnableDNSSupport true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Shared false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tags {Name: dev.k8s.devopscoach.org, KubernetesCluster: dev.k8s.devopscoach.org, kubernetes.io/cluster/dev.k8s.devopscoach.org: owned}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPCDHCPOptionsAssociation/dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPC name:dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DHCPOptions name:dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Must specify --yes to apply changes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cluster configuration has been created.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Suggestions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list clusters with: kops get cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit this cluster with: kops edit cluster dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit your node instance group: kops edit ig --name=dev.k8s.devopscoach.org nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit your master instance group: kops edit ig --name=dev.k8s.devopscoach.org master-ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finally configure your cluster with: kops update cluster dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>kops命令列出了所有需要建立的资源清单。而真实的开始资源创建，并搭建和配置Kubernetes集群还需要执行，以上输出中提示的最后一条命令: &lt;code>kops update cluster dev.k8s.devopscoach.org --yes &lt;/code>&lt;/p>
&lt;p>执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops update cluster dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A new kops version is available: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Upgrading is recommended
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">More information: https://github.com/kubernetes/kops/blob/master/permalinks/upgrade_kops.md#1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:02.482203 30077 executor.go:91] Tasks: 0 done / 73 total; 31 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:04.389402 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-aggregator-ca&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:04.628667 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;ca&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:07.291294 30077 executor.go:91] Tasks: 31 done / 73 total; 24 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.273293 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubelet-api&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.803612 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubelet&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.809131 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-scheduler&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.973826 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-proxy-client&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.317412 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kops&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.321177 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-aggregator&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.440919 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-controller-manager&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.630182 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubecfg&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:11.020560 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;master&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:11.040010 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-proxy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:12.698208 30077 executor.go:91] Tasks: 55 done / 73 total; 16 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:13.609559 30077 launchconfiguration.go:333] waiting for IAM instance profile &amp;#34;nodes.dev.k8s.devopscoach.org&amp;#34; to be ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:13.656221 30077 launchconfiguration.go:333] waiting for IAM instance profile &amp;#34;masters.dev.k8s.devopscoach.org&amp;#34; to be ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.156701 30077 executor.go:91] Tasks: 71 done / 73 total; 2 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.864262 30077 executor.go:91] Tasks: 73 done / 73 total; 0 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.864379 30077 dns.go:153] Pre-creating DNS records
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:26.454177 30077 update_cluster.go:248] Exporting kubecfg for cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kops has set your kubectl context to dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cluster is starting. It should be ready in a few minutes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Suggestions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * validate cluster: kops validate cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list nodes: kubectl get nodes --show-labels
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * ssh to the master: ssh -i ~/.ssh/id_rsa admin@api.dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The admin user is specific to Debian. If not using Debian please use the appropriate user based on your OS.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * read about installing addons: https://github.com/kubernetes/kops/blob/master/docs/addons.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上这套组合拳打出去之后，需要等几分钟才能完成Kubernetes集群的部署。&lt;/p>
&lt;p>在以上实例中创建的Ec2实例如下：&lt;/p>
&lt;ul>
&lt;li>master-ap-northeast-1a.masters.dev.k8s.devopscoach.org //m3.medium&lt;/li>
&lt;li>nodes.dev.k8s.devopscoach.org //t2.medium&lt;/li>
&lt;li>nodes.dev.k8s.devopscoach.org //t2.medium&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/ec2.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;p>也创建了两个ASG：&lt;/p>
&lt;ul>
&lt;li>一个是针对master的扩容规则&lt;/li>
&lt;li>另外一个是针对worker node的扩容规则&lt;/li>
&lt;/ul>
&lt;p>从扩容规则为空可以看出，它主要是用于定义集群规格的，而非自动化扩容的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/asg.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;p>在安装完成之后，用一下命令确认集群状态如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops validate cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cluster from kubectl context: dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Validating cluster dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSTANCE GROUPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME ROLE MACHINETYPE MIN MAX SUBNETS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master-ap-northeast-1a Master m3.medium 1 1 ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodes Node t2.medium 2 2 ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NODE STATUS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME ROLE READY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-38-48.ap-northeast-1.compute.internal master True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-45-235.ap-northeast-1.compute.internal node True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-63-157.ap-northeast-1.compute.internal node True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your cluster dev.k8s.devopscoach.org is ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get nodes --show-labels
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION LABELS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-38-48.ap-northeast-1.compute.internal Ready master 5m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=m3.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=master-ap-northeast-1a,kubernetes.io/hostname=ip-172-20-38-48.ap-northeast-1.compute.internal,kubernetes.io/role=master,node-role.kubernetes.io/master=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-45-235.ap-northeast-1.compute.internal Ready node 4m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=t2.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=nodes,kubernetes.io/hostname=ip-172-20-45-235.ap-northeast-1.compute.internal,kubernetes.io/role=node,node-role.kubernetes.io/node=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-63-157.ap-northeast-1.compute.internal Ready node 4m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=t2.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=nodes,kubernetes.io/hostname=ip-172-20-63-157.ap-northeast-1.compute.internal,kubernetes.io/role=node,node-role.kubernetes.io/node=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建并访问服务">创建并访问服务&lt;/h2>
&lt;p>如下所示的创建两副本的nginx部署，部署的命令 sample-nginx。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl run sample-nginx --image=nginx --replicas=2 --port=80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps &amp;#34;sample-nginx&amp;#34; created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx-7588757c8f-jvkjt 1/1 Running 0 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx-7588757c8f-zq8tj 1/1 Running 0 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get deployments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx 2 2 2 2 13s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后将这个部署暴露为服务，使用到Kubernetes的命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl expose deployment sample-nginx --port=80 --type=LoadBalancer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service &amp;#34;sample-nginx&amp;#34; exposed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get services -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes ClusterIP 100.64.0.1 &amp;lt;none&amp;gt; 443/TCP 10m &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx LoadBalancer 100.64.127.19 ae3a1ca9235d111e890d706038dd676b-392190656.ap-northeast-1.elb.amazonaws.com 80:30363/TCP 25s run=sample-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这条命令 &lt;code>ubectl expose deployment sample-nginx --port=80 --type=LoadBalancer &lt;/code> 会创建一个ELB并将，集群里容正在运行的 sample—nginx 服务注册到这个ELB，然后就可以访问浏览到Nginx的默认页面了。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/nginx.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="删除集群">删除集群&lt;/h2>
&lt;p>用一条命令就能删除以上所建立的Kubernetes集群。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">kops delete cluster --name=dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>容器化应用的设计原则</title><link>https://martinliu.cn/blog/%E5%AE%B9%E5%99%A8%E5%8C%96%E5%BA%94%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/</link><pubDate>Sat, 24 Mar 2018 20:51:01 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%AE%B9%E5%99%A8%E5%8C%96%E5%BA%94%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/BingWallpaper-2018-03-20.jpg" alt="Featured image of post 容器化应用的设计原则" />&lt;p>本文来自于Red Hat咨询顾问Bilgin Ibryam所编写的一篇白皮书，名为《PRINCIPLES OF CONTAINER-BASED APPLICATION DESIGN》。这篇文章在作者的Blog上发表后，作者的twitter被Kubernetes官方twitter转发。白皮书在Red Hat官网的下载地址：&lt;a class="link" href="https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper" target="_blank" rel="noopener"
>https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper&lt;/a> 文本是对这篇文章的学习和整理。&lt;/p>
&lt;p>先回顾经典的软件设计原则：&lt;/p>
&lt;ul>
&lt;li>保持简单，愚蠢（KISS）&lt;/li>
&lt;li>不要重复自己（DRY）&lt;/li>
&lt;li>你不会需要它 （YAGNI）&lt;/li>
&lt;li>关注点分离（SoC）&lt;/li>
&lt;li>Single responsibility, Open/closed, Liskov substitution, Interface segregation, Dependency inversion （SOLID）&lt;/li>
&lt;/ul>
&lt;p>然后是Red Hat的云原生容器设计原则：&lt;/p>
&lt;ul>
&lt;li>唯一关注性原则（SCP）&lt;/li>
&lt;li>高度可观测性原则（HOP）&lt;/li>
&lt;li>生命周期一致性原则（LCP）&lt;/li>
&lt;li>镜像不可变性原则（IIP）&lt;/li>
&lt;li>进程可处置性原则（PDP）&lt;/li>
&lt;li>自包含性原则（S-CP）&lt;/li>
&lt;li>运行时约束性原则（RCP）&lt;/li>
&lt;/ul>
&lt;p>很多组织都理解云原生的重要性和必要性，但是并不知道从哪里开始。那么请确保：云原生平台和容器化应用能无缝的运行在一起，并且具备抵御故障的能力，甚至在底层的基础架构出现宕机的时候，也能通过过弹性扩展的方式表现出可靠性。本文描述了容器化应用时需要遵循的基本准则，实施这些原则有助于使之与云原生平台Kubernetes更加适配。&lt;/p>
&lt;h2 id="唯一关注性原则-single-concern-principlescp">唯一关注性原则 SINGLE CONCERN PRINCIPLE（SCP）&lt;/h2>
&lt;p>在许多方面，唯一关注性原则与来自SOLID的SRP是类似的，它建议一个类应该只有一个责任。SRP背后的动机是每个责任是变更的一个轴心，一个类应该有，且也只有一个需要改变的理由。SCP原则中的“关注”一词强调关注是一种更高层次的抽象的责任，而且它更好地将范围描述为一个容器而不是一个类。虽然SRP的主要动机是变化原因的唯一性，而SCP的主要动机是容器镜像重用和可替换性。如果你创建一个解决单个问题的容器，并且以功能完整的方式来实现，不同应用程序中的容器镜像重用的可能性就会更高。&lt;/p>
&lt;p>因此，SCP原则规定每个集容器都应该解决一个问题，并做得很好。 实现这一点，通常比在面向对象的世界中实现SRP更容易，容器通常管理的一个单一的进程，大多数情况下一个进程解决一个问题。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/scp.png"
loading="lazy"
alt="scp 容器化应用的设计原则"
>&lt;/p>
&lt;p>如果你的容器化微服务需要解决多个问题，它可以使用这样的模式，将多个容器用sidecar和init-containers的模式合并成一个部署单元（pod），这样每个容器仍然是处理单个问题。同样，您可以替换处理同样问题的容器。 例如，将Web服务器容器或队列实现容器，更新为更具可扩展性的容器。&lt;/p>
&lt;h2 id="高度可观测性原则-high-observability-principlehop">高度可观测性原则 HIGH OBSERVABILITY PRINCIPLE（HOP）&lt;/h2>
&lt;p>容器提供了一种统一的方式来打包和运行应用程序，将它们视为一个黑盒子对象。 但任何旨在成为云原生公民的容器都必须提供API支持，要为运行时环境编写接口（API），以观察容器的健康状况和行为。 这是自动化容器更新和生命周期回收的基本先决条件和统一的方式，从而提高系统的弹性和用户体验。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/hop.png"
loading="lazy"
alt="hop 容器化应用的设计原则"
>&lt;/p>
&lt;p>实际上，您的容器化应用程序必须至少为其提供不同类型的健康检查的API&amp;ndash;活动和就绪等状态。更好的应用程序的行为则必须提供其他手段来观察容器化应用程序的状态。应用程序应该将重要事件记录到标准错误（STDERR）和标准输出（STDOUT）中，从而通过统一的日志聚合工具（诸如Fluentd和Logstash之类的工具）进行分析，并与跟踪和指标收集库相结合，例如OpenTracing，Prometheus等。&lt;/p>
&lt;p>将您的应用程序视为黑盒子，但实施所有必要的API以帮助平台对其进行观测，并以最佳方式管理您的应用程序。&lt;/p>
&lt;h2 id="生命周期一致性原则-life-cycle-conformance-principlelcp">生命周期一致性原则 LIFE-CYCLE CONFORMANCE PRINCIPLE（LCP）&lt;/h2>
&lt;p>HOP规定了你的容器提供供平台观测的API。 LCP则规定：您的应用程序有办法读取来自平台的事件。 此外，除了获得事件以外，容器还应该对这些事件相应地作出反应。这就是此原则名字由来。这几乎就像在应用程序通过一个“写入API”与平台进行交互。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/lcp.png"
loading="lazy"
alt="lcp 容器化应用的设计原则"
>&lt;/p>
&lt;p>来自管理平台的各种事件都是为了帮助您管理您的容器的生命周期的。决定处理哪些事件取决于您的应用程序 以及是否对这些事件做出反应。&lt;/p>
&lt;p>但有些事件比其他事件更重要。例如，任何需要一个干净的关闭进程，这就需要捕获信号：终止（SIGTERM）消息，并尽可能迅速关闭。 这是为了避免通过强制关闭信号：kill（SIGKILL），之后跟随一个SIGTERM。&lt;/p>
&lt;p>还有其他事件，例如PostStart和PreStop，可能对您的应用程序生命周期管理也非常重要。 例如，某些应用程序需要在服务之前进行预热请求和一些需要在关闭干净之前释放资源。&lt;/p>
&lt;h2 id="镜像不可变性原则-image-immutability-principleiip">镜像不可变性原则 IMAGE IMMUTABILITY PRINCIPLE（IIP）&lt;/h2>
&lt;p>IMAGE IMMUTABILITY PRINCIPLE（IIP）容器化的应用程序是不可变更的，镜像一旦完成了构建，预计在不同的环境中运行都不会改变。这意味着在因外部环境的不同，在需要的时候需要使用外部手法处理所依赖的外部配置数据，而不是每个环境修改或者构建不同的容器。而容器应用程序中的任何变更，都应该因此触发构建新的容器映像，并在所有环境中重用它。相同于这个原理的，不可变服务器和不可变基础架构的概念也很受欢迎，并且对于服务器/主机管理也是如此。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/iip.png"
loading="lazy"
alt="iip 容器化应用的设计原则"
>&lt;/p>
&lt;p>在遵循IIP原则的情况下，应该防止为不同的环境创建相似的容器镜像，要始终坚持为所有环境只配置一个容器映像。 这个原则允许在应用程序更新期间，采用自动回滚和前滚等做法，这是云原生自动化的重要方面。&lt;/p>
&lt;h2 id="进程可处置性原则-process-disposability-principlepdp">进程可处置性原则 PROCESS DISPOSABILITY PRINCIPLE（PDP）&lt;/h2>
&lt;p>迁移到容器应用程序的主要动机之一是：容器需要尽可能做到临时性，并做好在任何时候被另一个容器实例替换的准备。需要更换容器的原因有很多，比如：健康检查失败、缩容、应用程序将容器迁移到不同的主机，平台资源匮乏或其它的问题。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/pdp.png"
loading="lazy"
alt="pdp 容器化应用的设计原则"
>&lt;/p>
&lt;p>这意味着容器化的应用程序必须保持其状态为向外扩展的或分布式和冗余的。这也意味着应用程序应该快速启动和关闭，甚至为彻底的硬件故障做好准备。 实施这一原则的另一个有用的做法是创建小容器。 容器在云原生环境可以自动调度并在不同的主机上启动。较小的容器可以实现更快启动时间，因为在重新启动之前容器镜像需要被物理地复制到主机系统。&lt;/p>
&lt;h2 id="自包含性原则-self-containment-principles-cp">自包含性原则 SELF-CONTAINMENT PRINCIPLE（S-CP）&lt;/h2>
&lt;p>这个原则规定一个容器应该在构建时包含所有需要的东西。容器的存在应该仅仅依赖于Linux®内核，在并添加相关额外的库，在容器构建时加入它们。除了库之外，它还应该包含语言运行时，应用程序平台（如果需要），以及运行所需的其他依赖关系，等运行容器化应用所需要的诸如此类的东西。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/s-cp.png"
loading="lazy"
alt="s-cp 容器化应用的设计原则"
>&lt;/p>
&lt;p>唯一的例外是：由于不同环境之间差异，并且只能在运行时提供的配置; 例如，通过Kubernetes提供的ConfigMap。&lt;/p>
&lt;p>某些应用程序由多个容器组件组成。 例如，容器化的Web应用程序也可能需要数据库容器。 根据这个原则，并不建议合并两个容器。相反，它建议的是数据库容器只包含运行数据库所需的所有内容，Web应用程序容器只包含运行Web应用程序所需的所有内容，如Web服务器。 在运行时，Web应用程序容器将根据需要依赖于并访问数据库容器。&lt;/p>
&lt;h2 id="运行时约束性原则-runtime-confinement-principlercp">运行时约束性原则 RUNTIME CONFINEMENT PRINCIPLE（RCP）&lt;/h2>
&lt;p>S-CP从构建时的角度查看容器，并关注于生成的二进制文件及其内容。但是容器不仅仅是磁盘上一个只有尺寸大小的单一维度的黑盒子。 容器运行时有多个维度，例如内存使用维度，CPU使用维度等资源消耗维度。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/rcp.png"
loading="lazy"
alt="rcp 容器化应用的设计原则"
>&lt;/p>
&lt;p>这个RCP原则建议每个容器申报资源需求，并发送信息到平台。它应该分享容器的资源配置文件，从CPU，内存，网络，磁盘的角度声明。这影响到平台如何执行调度，自动扩展，容量 管理以及容器常规的服务级别协议（SLA）等。&lt;/p>
&lt;p>除了向平台声明容器的资源需求之外，还有一点也很重要， 应用被约束在使用所声明的资源需求内。如果应用程序对资源的使用保持在约束的范围内，则当资源匮乏发生时，平台不太可能将其终止和迁移。&lt;/p>
&lt;h2 id="结论">结论&lt;/h2>
&lt;p>云原生不仅仅是一种最终状态 - 它也是一种工作方式。 本份白皮书描述了一系列容器应用的基本原则，必须遵守才能成为优秀的云原生公民。&lt;/p>
&lt;p>除了这些原则之外，创建良好的容器应用程序还需要熟悉其他容器相关的最佳实践和技术。 尽管上述原则非常根本，适用于大多数用例，下面列出的最佳实践在应用和不应用的时候，则需要判断力。以下是一些与容器相关的更常见的最佳实践：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>镜像要尽可能的小&lt;/strong>。 通过清理临时文件，并避免安装不必要的软件包来构建小尺寸镜像。 这减少了容器的尺寸，构建时间和复制容器镜像的网络传输时间。&lt;/li>
&lt;li>&lt;strong>支持任意用户ID&lt;/strong>。 避免使用sudo命令或要求特定用户名运行你的容器。&lt;/li>
&lt;li>&lt;strong>标记重要的端口&lt;/strong>。 虽然可以在运行时指定端口号，然而使用EXPOSE命令在运行的时候指定，则可以让镜像的使用者更轻松。&lt;/li>
&lt;li>&lt;strong>为持久数据使用卷&lt;/strong>。 在容器摧毁之后还需要保存的容器数据的，必须将数据写入一个数据卷。&lt;/li>
&lt;li>&lt;strong>设置镜像元数据&lt;/strong>。 以标签和注释形式存在的镜像元数据可以使您的容器镜像更加实用，从而为使用您的容器的开发人员提供了更好的体验。&lt;/li>
&lt;li>&lt;strong>使主机和镜像同步&lt;/strong>。 一些容器应用需要容器在某些属性（如时间和机器ID）上与主机同步。&lt;/li>
&lt;/ul>
&lt;p>这里是指向各种模式和最佳实践的资源的链接，以帮助您能有效地实现上述目标：&lt;/p>
&lt;ul>
&lt;li>• &lt;a class="link" href="https://www.slideshare.net/luebken/container-patterns" target="_blank" rel="noopener"
>https://www.slideshare.net/luebken/container-patterns&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices" target="_blank" rel="noopener"
>https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="http://docs.projectatomic.io/container-best-practices" target="_blank" rel="noopener"
>http://docs.projectatomic.io/container-best-practices&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="https://docs.openshift.com/enterprise/3.0/creating_images/guidelines.html" target="_blank" rel="noopener"
>https://docs.openshift.com/enterprise/3.0/creating_images/guidelines.html&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="https://www.usenix.org/system/files/conference/hotcloud16/hotcloud16_burns.pdf" target="_blank" rel="noopener"
>https://www.usenix.org/system/files/conference/hotcloud16/hotcloud16_burns.pdf&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="https://leanpub.com/k8spatterns/" target="_blank" rel="noopener"
>https://leanpub.com/k8spatterns/&lt;/a>&lt;/li>
&lt;li>• &lt;a class="link" href="https://12factor.net" target="_blank" rel="noopener"
>https://12factor.net&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>7种DevOps工程师必备技能</title><link>https://martinliu.cn/blog/7%E7%A7%8Ddevops%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD/</link><pubDate>Sat, 24 Mar 2018 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/7%E7%A7%8Ddevops%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Nyala_ZH-CN13349334824_1920x1080.jpg" alt="Featured image of post 7种DevOps工程师必备技能" />&lt;p>使用DevOps的目的是改变和改善开发与IT运营之间的关系，倡导两个部门之间更好的沟通与协作。虽然这看起来有些简单，然后，DevOps工程师还需要做更多的工作，才能成功部署代码，并将Dev和Ops两个部分成功地绑定在一起。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218598197884.jpg"
loading="lazy"
alt="7种DevOps工程师必备技能"
>&lt;/p>
&lt;p>从应付DevOps压力的角度出发，DevOps工程师除了需要日常技能的基础，每个工程师都必须具备多种技能。DevOps工程师除了要对脚本和编码有着强烈的热情之外，还必须具有开放的思想和协作精神，才能成功地执行该过程。&lt;/p>
&lt;p>“DevOps教练”参考一些文献，已经为你设计了一个清单，列出了下面的7种必备技能，公司的DevOps工程师的招聘需求里，应该明确提出下列所有品质。&lt;/p>
&lt;h2 id="1-灵活性">1. 灵活性&lt;/h2>
&lt;p>编码是一个持续的过程，不断变化，总是需要更新。要成为一个成功而有效的DevOps工程师，理想的候选人必须有能力不断地开发新的系统，并将其集成到主干代码中。DevOps工程师必须具有灵活的工作技能并适应不断变化的代码。&lt;/p>
&lt;p>无论是集成、测试、发布还是部署，工程师都必须能够轻松地从一个软件构建领域迁移到另一个领域。例如，持续集成需要具备快速有效地管理变更的技术技能，并且能够在团队中协作，以保证每个人都朝着共同的目标努力。&lt;/p>
&lt;h2 id="2-安全技能">2. 安全技能&lt;/h2>
&lt;p>与许多其他所熟练的领域一样，安全始终是最重要的，尤其是在编码方面。黑客进入系统的一个简单方法是利用漏洞，破坏现有的系统并获取数据。
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218597269514.jpg"
loading="lazy"
alt="7种DevOps工程师必备技能"
>&lt;/p>
&lt;p>DevOps带来了更快的代码开发和部署周期，这意味着漏洞也比以前更容易引入代码。因此，工程师必须具备编写安全代码的技能，以保护应用程序免受不期望的攻击，此外还要确保系统针对常见的网络安全漏洞建立防御机制。&lt;/p>
&lt;p>DevOps工程师在受雇时必须具备安全技能，因为软件从部署一开始就内置了安全性(而不是在以后添加)是至关重要。如果从一开始就没有安全措施，那么黑客就有更多的机会通过网络注入破坏性代码。因此，在招聘下一位DevOps工程师时，确保安全性是技能列表中最重要的一项。&lt;/p>
&lt;h2 id="3-协作">3. 协作&lt;/h2>
&lt;p>对于一个成功的DevOps工程师来说，不具备八面玲珑的和周围打成一片的能力是不行的——协作实际上是DevOps概念的核心，它将软件开发和软件运维结合在一起。DevOps工程师必须具备团队合作的能力，在DevOps流程中协作提供了更多的跨职能的联动。&lt;/p>
&lt;h2 id="4-脚本编写技巧">4. 脚本编写技巧&lt;/h2>
&lt;p>尽管这一点听起来很显然，但任何开发人员都必须具备编写代码的高超技能。无论是JavaScript、Python、Perl还是Ruby，一个成功的开发工程师都必须能够编写代码。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218597150085.jpg"
loading="lazy"
alt="7种DevOps工程师必备技能"
>&lt;/p>
&lt;p>从编写手动代码到替换手动操作流程(如分配IP地址或DNS代码)，必须团队里必须具有能够编写这些代码的人员，这是完美的候选人应该能够做到的。&lt;/p>
&lt;h2 id="5-决策">5. 决策&lt;/h2>
&lt;p>一个优柔寡断的候选人不是你想要的业务开发工程师。一个成功DevOps工程师候选人将有能力自信而迅速地作出决定，即使是在繁忙的环境工作。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218598592359.jpg"
loading="lazy"
alt="7种DevOps工程师必备技能"
>&lt;/p>
&lt;p>代码不断变化的特性使得必须快速决定如何修复代码中任何不连贯的元素。果断性必须是雇用DevOps工程师时要考虑的一个因素，因为快速决策允许工程师保持快速开发和部署新编码更改的能力。&lt;/p>
&lt;h2 id="6-基础架构知识">6. 基础架构知识&lt;/h2>
&lt;p>脚本编写只是开发人员应具备的关键技能之一，仅次于云和基础架构的经验。工程师应该对基于数据中心和云基础架构的各种组件的工作方式有一定了解。这包括软件如何联网、并运行在虚拟网络上等要素。&lt;/p>
&lt;p>如果没有理解基础架构的能力，要成为全栈软件开发工程师可能会有些困难。整合基础架构技能将使有效的DevOps工程师能够使用最佳的平台，有效地设计和部署应用程序。还能提出优化建议。&lt;/p>
&lt;h2 id="7-软技能">7. 软技能&lt;/h2>
&lt;p>如上所述，当一名DevOps工程师不是一个人在工作，所以在这种情况下，任何未来的员工必须具备软技能和技术。在信任的前提下，DevOps文化使所有员工能够与流程进行沟通和理解，在需要的时候作出变化。&lt;/p>
&lt;p>当开发人员有效地相互沟通时，应用程序可以在比某些工作人员不在上下文中的情况里要短得多的时间内交付。以及更快的进入市场，良好的通信将导致更少的错误，从而降低成本并提高代码质量。&lt;/p></description></item><item><title>2018年必须认识到的6个DevOps趋势</title><link>https://martinliu.cn/blog/2018%E5%B9%B4%E5%BF%85%E9%A1%BB%E8%AE%A4%E8%AF%86%E5%88%B0%E7%9A%846%E4%B8%AAdevops%E8%B6%8B%E5%8A%BF/</link><pubDate>Fri, 23 Mar 2018 17:50:25 +0800</pubDate><guid>https://martinliu.cn/blog/2018%E5%B9%B4%E5%BF%85%E9%A1%BB%E8%AE%A4%E8%AF%86%E5%88%B0%E7%9A%846%E4%B8%AAdevops%E8%B6%8B%E5%8A%BF/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Decaying_Startrails_nimiaRM_165652_1080_HD_ZH-CN1933491271.jpg" alt="Featured image of post 2018年必须认识到的6个DevOps趋势" />&lt;p>DevOps已经出现了很长时间，我们中的很多人都认为它只是一个时髦词。现在我们知道这并不是一个神话。DevOps已经成为一个IT主流的焦点，并且在过去的几年里一直在重塑着软件世界。专家表示，DevOps将成为主流，2018年DevOps的人气将达到顶峰。&lt;/p>
&lt;p>下面是术语“DevOps”在Google趋势里的现状，以及对2018年预计增长的假设。
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15217987958903.png"
loading="lazy"
>&lt;/p>
&lt;p>谈到统计数据，从2015年到2016年，DevOps的应用企业数增加了约8%，预计2018年这一数字将大幅增长，如上所示。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15217988516530.png"
loading="lazy"
>&lt;/p>
&lt;p>你可以阅读&lt;a class="link" href="https://www.rightscale.com/blog/cloud-industry-insights/new-devops-trends-2016-state-cloud-survey" target="_blank" rel="noopener"
>RightScale&lt;/a>的整个报告。甚至&lt;a class="link" href="https://go-forrester.clclp.me/blogs/2018-the-year-of-enterprise-devops" target="_blank" rel="noopener"
>Forrester的报告&lt;/a>也明确提到2018年将是DevOps的一年。&lt;/p>
&lt;p>最近发表的关于DevOps的事实和统计数据的文章得到了DevOps爱好者的热烈响应，它只是表明许多技术布道者者对了解更多DevOps并在他们的组织中实施DevOps很感兴趣。&lt;/p>
&lt;p>今天，我们将看到以下事实将塑造DevOps的未来。&lt;/p>
&lt;h2 id="1-将重心从ci流水线移到devops装配线">1 将重心从CI流水线移到DevOps装配线&lt;/h2>
&lt;p>通过CI流水线可以显示应用程序从源代码管理到生产的完整可视化。你可以在一个统一的视图上看到一切。它不仅仅只关于CI，它更多是作为CD (连续交付)的基础；组织正在投入时间和精力来进一步了解自动化其完整的软件开发流程。2018年，第一大DevOps转变将是从单纯的CI流水线转变为&lt;a class="link" href="http://blog.shippable.com/the-difference-between-ci-pipelines-and-devops-assembly-lines-0" target="_blank" rel="noopener"
>DevOps的装配线&lt;/a>链接是Shippable关于装配线的描述。&lt;/p>
&lt;h2 id="2-自动化将成为主要关注点">2 自动化将成为主要关注点&lt;/h2>
&lt;p>在DevOps中，我们经常谈论自动化。如果可能，对服务器的零接触自动化将是未来的趋势。这并不意味着你必须自动化一切，但如果你必须这样做，那么你应该能够做到。了解DevOps循环的6个C，并确保在这些阶段之间应用自动化是关键，这将是2018年的主要目标。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15217988430927.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="3-测试人员需要学会编写代码">3 测试人员需要学会编写代码&lt;/h2>
&lt;p>在DevOps中，需要测试人员知道如何编写自动化脚本来测试各种情况。如果您是一名测试人员，如果在是否学习编码的问题上进退两难，那么我建议您学习编码。了解不同的DevOps工具和自动化脚本，在当今的软件开发中起着至关重要的作用，这将在2018年占据主导地位。&lt;/p>
&lt;p>如果测试人员不学习自己编写自动化测试脚本，他们将会灭亡。手动测试将在2018年过时，它将占用大量时间。自动化测试不仅可以提高效率，还可以确保功能更快地交付给市场。&lt;/p>
&lt;h2 id="4-微服务体系结构应用的增加">4 微服务体系结构应用的增加&lt;/h2>
&lt;p>DevOps和微服务最近正是天作之合。微服务是独立的实体，因此不会在出现问题时由于任何依赖关系而中断其他系统。微服务体系结构可帮助公司轻松进行部署和添加新功能。预计公司将转向微服务体系结构，以提高其运行时间和效率。不要因为别人采用了微服务体系结构就跟着他们走，点这个文章：&lt;a class="link" href="http://blog.shippable.com/why-you-should-adopt-microservices" target="_blank" rel="noopener"
>了解自己并理解为什么应该采用微服务体系结构&lt;/a>。&lt;/p>
&lt;h2 id="5-预计将有更多的公司选择企业版devops工具">5 预计将有更多的公司选择企业版DevOps工具&lt;/h2>
&lt;p>目前有许多公司仍然处于建造还是购买的两难境地。但是，我们建议您做您最擅长的事情，并根据您的要求购买工具。这不仅有助于您专注于自己的目标，而且通过完全依赖第三方平台来提高工作效率。许多公司现在都在寻求企业版本，以获得自己的DevOps基础架构，并确保安全性尽可能掌握在最佳人员手中。&lt;/p>
&lt;h2 id="6-kubernetes将会大行其道">6 KUBERNETES将会大行其道&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.upwork.com/hiring/for-clients/kubernetes-vs-openshift-vs-tectonic/" target="_blank" rel="noopener"
>Kubernetes&lt;/a>因其优异的功能性和易用性，从而成为增长最快的容器技术。kubernetes围绕它建立了一个伟大的开源社区。在全球范围内，许多首席信息官和技术人员都采用了Kubernetes，采用比例预计将在2018年进一步提升。&lt;/p>
&lt;p>最近，&lt;a class="link" href="https://events.linuxfoundation.org/events/kubecon-cloudnativecon-north-america-2018/" target="_blank" rel="noopener"
>在KubeCon + CloudberNativeCon北美&lt;/a>( 2017年12月6日至8日)之前，云计算基金会进行了一项调查，并分享了容器编排环境正在发生的变化和向Kubernetes的转变。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15218007889881.png"
loading="lazy"
>&lt;/p>
&lt;p>来源:容器业务流程环境正在更改。&lt;/p>
&lt;p>以上是将在2018年复现的DevOps的6个趋势。&lt;/p></description></item><item><title>2018值得关注的15个DevOps大会</title><link>https://martinliu.cn/blog/2018%E5%80%BC%E5%BE%97%E5%85%B3%E6%B3%A8%E7%9A%8415%E4%B8%AAdevops%E5%A4%A7%E4%BC%9A/</link><pubDate>Thu, 22 Mar 2018 08:30:13 +0800</pubDate><guid>https://martinliu.cn/blog/2018%E5%80%BC%E5%BE%97%E5%85%B3%E6%B3%A8%E7%9A%8415%E4%B8%AAdevops%E5%A4%A7%E4%BC%9A/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/carauari-brazil.png" alt="Featured image of post 2018值得关注的15个DevOps大会" />&lt;p>本文向你简要介绍2018年DevOps界的15大最重要的大会活动。DevOps的一个方面就是持续&amp;hellip;&amp;hellip;.参加大会学习！全球范围内看，基本上每个月都至少有一个我们值得重点关注的大会。我们不能奢望都你有机会参加，但是作为DevOps业内人士，如果你不了解这个大会的情况，你就Out了。&lt;/p>
&lt;p>这些大会中有些社偏技术的、有些是注重社交和体验；根据你的业务需求和学习目标，今年走出去参加最高端DevOps盛会的奢望可以有。不提前做功课，怎么能说服领导支持你呢？万一领导批准了呢？&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/15216787212180.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="1-cloud--devops-world">1. Cloud &amp;amp; DevOps World&lt;/h2>
&lt;p>June 12-14, London&lt;/p>
&lt;p>cloud&amp;amp;DevOps World是techxl 8的一部分，是一系列各种技术会议、网络机会和博览会的一部分。cloud&amp;amp;DevOps World涵盖云创新和管理微服务、DevOps、容器、无服务器体系结构和监管实践。云与云世界的一大亮点是，您可以通过展览的其他部分(如物联网和虚拟现实会议)看到云概念和云概念在发挥作用。&lt;/p>
&lt;p>与会者还可以向观众演示他们的云解决方案，并享受联网、交互式会话和讨论面板。在去年的展会上，有300多家参展商和15000多名与会者参加，使这成为业界最大的展会之一。&lt;/p>
&lt;h2 id="2-devops-enterprise-summit-does">2. DevOps Enterprise Summit (DOES)&lt;/h2>
&lt;p>June 25-26, London&lt;/p>
&lt;p>DevOps企业峰会针对的是参与DevOps革命的主要企业的高级经理。该大会深入探讨了各种重要的主题，一方面涉及技术和架构问题，另一方面涉及领导力挑战。DevOps Enterprise Summit的主题演讲、专题小组讨论、聊天室、社交圈区和展览大厅。&lt;/p>
&lt;p>伦敦活动的讲演者包括来自IBM、Puppet、微软和各行各业的资深人士。DOES是一项每年举办两次的活动，地点在美国和欧洲之间变化。上一次在旧金山举行的展览有1400多人参加。&lt;/p>
&lt;h2 id="3-oreilly-velocity-conference">3. O’Reilly Velocity Conference&lt;/h2>
&lt;p>June 11-14, San Jose&lt;/p>
&lt;p>Velocity会议是本列表上排名第三的活动，由O’Reilly Media欧莱利媒体公司举办，该公司是一家技术媒体公司，在各种技术领域举办了无数的展览。Velocity会议在讨论站点可靠性工程、基础架构(如代码)、混沌工程、自动化、连续交付、恢复能力和安全性时，吸引了web ops、系统工程师和开发专家。圣何塞展览(今年在不同城市实际上有三个Velocity会议)的演讲者包括来自微软、Netflix、亚马逊和谷歌的代表。&lt;/p>
&lt;h2 id="4-chefconf">4. ChefConf&lt;/h2>
&lt;p>May 22-25, Chicago&lt;/p>
&lt;p>ChefConf面向开发、自动化和法规遵从性感兴趣的管理员和开发人员。ChefConf关注处理整个应用程序开发和管理生命周期所需的策略和技能。本次活动侧重于实践和经验，以涵盖构建云应用程序、持续法规遵从性和广泛的自动化等活动。去年的ChefConf吸引了大约1，500名与会者，来自Chef和其他重要科技公司的演讲者。&lt;/p>
&lt;h2 id="5-continuous-lifecycle">5. Continuous Lifecycle&lt;/h2>
&lt;p>May 15-18, London&lt;/p>
&lt;p>Continuous Lifecycle每年在伦敦举行，主要集中在开发、容器化、连续交付和敏捷方面。这是一个为期三天的活动，包括会议和研讨会，与会者包括开发负责人、架构师、开发人员、CTO、工程师和工具/基础架构专家。每一个行业都有代表，从高技术的最高水平到制造企业。&lt;/p>
&lt;h2 id="6-devops-con">6. DevOps Con&lt;/h2>
&lt;p>May 28-31, Berlin&lt;/p>
&lt;p>你是德国人吗？就算你只能说有点德文，DevOps Con也是值得一游的。它可能被认为是一年中最重要的持续交付会议，在微服务、Docker、云计算和精益业务方面进行了出色的讨论。今年的演讲者包括优步、红帽和西门子的高级职员。DevOps Con演讲者使用德语和英语，让与会者忙于实际的研讨会、会议和主旨演讲。&lt;/p>
&lt;h2 id="7-devops-days">7. DevOps Days&lt;/h2>
&lt;p>今年DevOpsDays在国内举办三场：北京-5月，上海-8月，深圳-11月。&lt;/p>
&lt;p>如果你还不能参加一个DevOps Days会议，那你肯定是住在了月球上。从亚特兰大到苏黎世，DevOps日一年四季都在不断发生，一个月内有多达几十个大会活动，遍布全球。DevOps Days活动关注软件开发和IT基础架构运营，重点关注自动化、测试、安全性和组织文化。&lt;/p>
&lt;p>每场大会的地点都不尽相同，因此如果您有特定的感兴趣区域，请确保您注册了最感兴趣的城市，以便充分利用2018年DevOps的重大活动。DevOps Days甚至鼓励专业人士在大会上组织自己的日程。&lt;/p>
&lt;h2 id="8-dockercon">8. DockerCon&lt;/h2>
&lt;p>June 11-15, San Francisco&lt;/p>
&lt;p>Docker大会的演讲者人大多来Docker本身，这并不奇怪。然而，在过去的几年里，来自AWS、Puppet、Cisco和cloudBee的演讲者也逐渐加入。为期三天的会议探讨了分布式、基于容器的应用程序的未来，并提供了一个引人入胜的视角，看看领先公司目前是如何开发Docker平台和容器的。&lt;/p>
&lt;p>与会者将有机会参加技术演示、实验教程和主题演讲。上一届会议有5 000多人出席。&lt;/p>
&lt;h2 id="9-gartner-it-operations-strategies-and-solutions">9. Gartner IT Operations Strategies and Solutions&lt;/h2>
&lt;p>May 15-17, Orlando&lt;/p>
&lt;p>由于Gartner分析师的数量超过了您的能力范围，因此IT运营战略和解决方案展览是向真正了解DevOps行业全局的专家学习的绝佳途径。&lt;/p>
&lt;p>该活动非常适合IT运营管理、云运营和IT服务支持专业人员。今年展会的主题包括IT运营优化、开发与敏捷、云与自动化、新兴IT运营趋势和战略。&lt;/p>
&lt;h2 id="10-itdev-connections">10. IT/Dev Connections&lt;/h2>
&lt;p>Oct 15-18, Dallas&lt;/p>
&lt;p>IT/Dev Connections将自己描述为“反基调”会议。这意味着它集中于实践科目和培训，避免了供应商过多的营销。说到实际，IT/Dev Connections的组织者甚至有一个“出勤证明中心”。&lt;/p>
&lt;p>除了各种讲习班、小组讨论和网络活动外，该会议还值得一提的是其妇女参与技术午餐会。IT/Dev Connections分为五个方面，涉及云和数据中心、数据平台、业务智能、企业协作、管理、移动性、安全性和DevOps的会话超过250个。&lt;/p>
&lt;h2 id="11-jenkins-world">11. Jenkins World&lt;/h2>
&lt;p>September 16-19, San Francisco&lt;/p>
&lt;p>DevOps只是Jenkins World涵盖的主题之一，它还涉及社区、CloudBee和生态系统等不同领域。虽然这一活动更倾向于一个特定的工具集，但它仍然非常受欢迎，2017年的活动约有2，000人参加。过去的讲演者代表了诸如Docker、Red Hat和亚马逊网络服务等公司。&lt;/p>
&lt;h2 id="12-large-installation-system-administration-conference-lisa">12. Large Installation System Administration Conference (LISA)&lt;/h2>
&lt;p>October 29–31, Nashville&lt;/p>
&lt;p>LISA会议将自己标榜为“供应商中立”，以便将市场营销保持在最低限度。LISA由美国先进计算系统协会Usenix组织，每年在美国不同的城市举办。本次大会吸引了大量供应商和系统管理员，重点关注关键系统的设计、构建和维护，以及围绕体系结构、文化和工程的实际考虑。讲演者包括戴尔、Netflix、Facebook和fasty等公司的高级代表。&lt;/p>
&lt;h2 id="13-microsoft-ignite">13. Microsoft Ignite&lt;/h2>
&lt;p>September 24-28, Orlando&lt;/p>
&lt;p>这将是2018年DevOps所有活动的母亲，因为这个大会看起来将超过2017年的人数，将有超过24000人参加。事实上，微软于2014年开始将Ignite作为合并多个会议的一种方式，数字反映了这一点。预计Ignite将非常繁忙，因为它涉及700多个演讲。然而，并不是所有的事情都与微软有关，因为展会包括100多家供应商，他们都是展会和会议演示的一部分。&lt;/p>
&lt;h2 id="14-monitorama">14. Monitorama&lt;/h2>
&lt;p>June 4-6, Portland&lt;/p>
&lt;p>Monitorama是另一个特别的大会，它只限于关于软件和基础架构监控工具和技术的主题。它还主办了一次黑客马拉松活动。Monitorama是为数不多的只有一个主题的大会之一，这样与会者就可以专注于一个问题，避免FOMO体验。该大会自2013年以来一直在进行，观众人数限制在600人左右，因此尽早预订是个好主意。&lt;/p>
&lt;h2 id="15-puppetconf-2018">15. PuppetConf 2018&lt;/h2>
&lt;p>October 9-11, San Francisco&lt;/p>
&lt;p>Puppet是一种开源配置管理工具，它对DevOps、云管理、下一代基础架构、应用程序交付、安全性、法规遵从性和持续交付的影响非常重要。&lt;/p>
&lt;p>PuppetConf由100多位专家提供了80多个课程，是一个非常棒的学习体验，无论是初学者还是老兵。PuppetConf由IT主管参加，他们希望获得有关DevOps转换、云迁移和持续交付的建议。2017年活动的讲演者包括来自Twitter、Yelp、谷歌、销售人员和Slack的Puppet员工和专业人士。&lt;/p>
&lt;h2 id="后记">后记&lt;/h2>
&lt;p>本文的清单是15个比较出名的大会，我发起并动态更新的全球DevOps重要大会的日历，访问的地址在这里：&lt;a class="link" href="https://teamup.com/ks5kh2kcca4w6xva4y" target="_blank" rel="noopener"
>https://teamup.com/ks5kh2kcca4w6xva4y&lt;/a>&lt;/p>
&lt;p>目前整理的全球大会日程表见下图（持续更新中，请直接查看线上版本）：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Screen_Shot_2018-03-23_at_5.26.39_PM.png"
loading="lazy"
alt="p1"
>
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Screen_Shot_2018-03-23_at_5.26.52_PM.png"
loading="lazy"
alt="p2"
>
&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Screen_Shot_2018-03-23_at_5.27.25_PM.png"
loading="lazy"
alt="p3"
>&lt;/p>
&lt;p>最后一招：参加大会是为了学习先进思想和实践，这些大会是货真价实的真理发源地，在诸位参会学会了以后，回到公司，万一领导还是不理解，不支持怎么办？而且领导也不感冒参加这些大会。那么你可以在公司内部举办类似的大会，可以请外部的和尚来自己的庙里念经。这也是我们中国DevOpsDays核心组织者的一个想法，希望能够提供协助和支持，帮助所有传统企业早上走上上下一心的DevOps转型之旅。&lt;/p></description></item><item><title>基础架构的持续集成和应用部署</title><link>https://martinliu.cn/blog/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84%E7%9A%84%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%92%8C%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/</link><pubDate>Sat, 17 Mar 2018 10:50:57 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84%E7%9A%84%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%92%8C%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/coding-snippet.jpg" alt="Featured image of post 基础架构的持续集成和应用部署" />&lt;p>持续集成通常是针对应用而言的，可是基础架构的持续集成应该怎么做？基础架构的持续集成应该属于持续交付/部署的基础。贯串本文的一个问题，或者在阅读本文时，您应该不断地问自己这个问题：我们的应用部署流程是怎样的？&lt;/p>
&lt;p>在回答这个问题之前，我们先来回顾一下，目前几乎所有人正在使用的手工环境和资源交付流程。在源码被编译打包了以后，安装包文件被上传保存到了内部的某个文件服务器上。Ops团队的某个组/人被分配到工单，根据工单描述的需求，它在测试或者生产环境中开始工作：&lt;/p>
&lt;ul>
&lt;li>用图形界面进行虚拟机模板的手工克隆工作，或者由于没有相应的权限或者自助服务，不得不给虚拟化管理员发任务单，然后等待回复。&lt;/li>
&lt;li>获取用户名和密码手工登录服务器，有些企业还要是等待领导的审批，才能得到密码信封和所需要的访问密码。&lt;/li>
&lt;li>根据工单（变更单）里的描述和自己的经验对虚拟机的操作系统进行配置，在这个过程中，Ops往往可能还需和需求方进行不止一次的沟通，确认相关参数。&lt;/li>
&lt;li>手工的下载应用安装包，然后分别手工上传到目标的服务器，凭经验和工单信息部署应用，然后测试部署结果，可能是看下页面有没有正常显示，或者服务起没起.&lt;/li>
&lt;li>手工测试和确认这些虚拟机的服务和状态，凭经验觉得OK了以后，回复工单，关闭工单。&lt;/li>
&lt;/ul>
&lt;p>以上的工作场景，可能是Ops人员很常规的一天，或者是几天内的工作，当然在这个过程中，他们还需要参与一些救火行动；他们在这个过程中也可能会有疑问，也可能会对此工作结果不确定；但是，日常的工作经验告诉他，差不多了，关闭任务单要紧，还有好多项目催活呢！就这样，配置并不精确的虚拟机环境就交给了下游的需求方。&lt;/p>
&lt;p>以上工作过程的问题如下：&lt;/p>
&lt;ol>
&lt;li>工作周期长，速度慢。实际上工作周期拖延的越久，工作结果的质量就越差，而并不是我们想想中的慢工出细活。&lt;/li>
&lt;li>所有步骤都是纯手工操作，不仅费事费力，而且出错几率高，也几乎不可能无痛的回退。可能有人会说了，我们不需要那么快，我们也不是互联网公司；可是从精益思想的角度看，以上这些工作都属于对业务价值的交付贡献为零的工作；你可能是由于公司给你发着工资，才错误的感觉到，这项工作活动应该有它的价值。&lt;/li>
&lt;li>上游传递来的信息可能不全面，不准确，因此Ops很有可能造成错误配置，因此会返工。&lt;/li>
&lt;li>传递给下游的虚拟机很可能会在后续的部署过程中，由于应用需求的变化，而需要下游的人员对其重新配置，产生重复的劳动。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>手工部署的时间和代价 = 应的数量 X 应用版本数量 X 环境数量&lt;/p>
&lt;/blockquote>
&lt;p>对以上工作系统进行优化的原则：如果某一项活动的重复频率越高，那么对它进行优化，所产生的回报也会越明显；这里还要参考限制理论，优化的顺序要正确。&lt;/p>
&lt;p>我们从这个角度出发，就可以来设定基础架构持续集成和应用部署流程的改进目标了：&lt;/p>
&lt;ul>
&lt;li>减少总体人工工作时间和代价&lt;/li>
&lt;li>提高交付的速度、可靠性和频率&lt;/li>
&lt;li>能进行应用部署，能进行数据库Schema的更新&lt;/li>
&lt;li>能够实现部署流程的自服务，让任何需要部署应用的人能一键式部署任何版本&lt;/li>
&lt;/ul>
&lt;p>到了这里我们就必须将上述手工劳动，变为自动化的过程。因此，基础架构即代码IaC （Infrastructure as code）和相关的配置管理工具就会用到。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/delivery-Pipeline.png"
loading="lazy"
alt="delivery-Pipeline"
>&lt;/p>
&lt;p>上图是一个典型的持续交付流水线模型，在此我们对它的关注点如下：&lt;/p>
&lt;ul>
&lt;li>代码的变更被Jenkins自动化的构建（CI是基础），打包后的安装包被存储在Artifactory里，Artifactory里面还可以存储应用包的其它相关元数据，如测试结果，能否可以用于下一步部署的标签等等。&lt;/li>
&lt;li>Jenkins自动化的搭建所需要的环境，调用虚拟化或者公有云资源池的API，制备虚拟机资源，然后调用Chef完成对虚拟机的配置，完成应用包部署所需要的所有层次的配置。&lt;/li>
&lt;li>环境配置完成后，应用正常运行了，在相关的测试工具对部署后的环境做验收测试，Chef具有支持测试驱动的相关工具。&lt;/li>
&lt;/ul>
&lt;h2 id="基础架构的持续集成">基础架构的持续集成&lt;/h2>
&lt;p>为了实现完整的基础架构持续集成流程，以上持续交付流水线必须具备的能力和概念包括：分层的系统管理、基础架构即代码IaC、配置管理、Chef工具等。下面详细对它们进行描述。&lt;/p>
&lt;h3 id="分层的系统管理">分层的系统管理&lt;/h3>
&lt;p>系统管理的层次涉及到OS相关的三个层次。下面自下而上地简单描述一下。&lt;/p>
&lt;ol>
&lt;li>制备管理：涉及到虚拟化层，这一层是资源表达层，目前所有主流的虚拟化都支持标准的Rest API，包括VMWare、EC2和Nuanix等。大多数主流配置管理工具都具备用于虚拟机生命周期管理（从生成、到开机、到删除等）的API功能，能按需的获得任何数量、规模、网络和操作系统类型的部署环境。&lt;/li>
&lt;li>配置管理：在任何类型的操作系统里自动化的安装和配置软件包，将所有配置参数配置好以后，持续保持这些配置点的状态。对于简单应用，来说按配置参数启动服务即任务完成。&lt;/li>
&lt;li>应用编排管理：对于复杂的分布式系统，由于各个自服务之间存在着依赖关系，所有自服务之前需要互通一些配置参数才能实现，应用程序整体的正常运行，配置应用服务器的odbc数据库连接，配置web前端的ldap认证服务器等等。目前微服务所涉及的服务发现和路由，是应用编排必备的配套设施。&lt;/li>
&lt;/ol>
&lt;p>不同的DevOps配置管理工具也都力求能覆盖以上三个层次，但是他们所追求的方向，或者想解决的主要问题并不相同。因此各个工具之间功能上有重叠。&lt;/p>
&lt;p>因此在运用这些工具的时候，不仅要追求其卓越的功能，还要能意识到，并有意的在不同层面上做取舍。&lt;/p>
&lt;h3 id="基础架构即代码">基础架构即代码&lt;/h3>
&lt;p>IaC这个概念最早是被Chef这类工具提出并实现，它的基本想法就是让Ops人员象开发人员一样的，工作在基础架构的代码上，而不是面对着数十个图形和文字终端界面。使用类似于开发应用程序的方式，开发和管理基础架构环境，因此基础架构能通过API访问和操控是基础，目前所有主流的虚拟化/云计算平台都具备很好的API接口；可惜的是在传统的企业环境中，这些资源池的API功能几乎没有被用到。&lt;/p>
&lt;p>像开发应用代码一样的管理IT基础架构，基础架构的开发和管理也需要遵循与应用开发类似的原则，这些原则包括：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>一切从源代码开始&lt;/strong>:并对其进行严格的版本管理，要对基础架构变更，就需要对相应的代码进行变更和测试，最后发布这些代码。从而力求做到服务器的无人登录运维。&lt;/li>
&lt;li>&lt;strong>模块化设计&lt;/strong>:不同应用底层所使用的基础架构有着大量的相似之处，模块化的设计不仅意味着标准化，也意味着更少的重复代码。我所用过的Terraform、Chef和Puppet这三种工具，都具有高度的模块化特性。&lt;/li>
&lt;li>&lt;strong>抽象能力&lt;/strong>：能够使用不同的模块和参数对任何特征的应用进行建模，用IaC代码进行表达，基础架构的代码开发也就是借助这种抽象能力，将所有管理对象（配置管理项）具体化地描述为应用服务模型。编写出来的基础架构代码，不仅包含了所有对应用配置描述性的语义，而且还是能够被执行的代码，在IaC代码执行之后，你就得到了所期望的虚拟机、应用配置和应用服务。&lt;/li>
&lt;li>&lt;strong>可测试性&lt;/strong>：这是一个经常忽略的能力，而在了解之后，你会发现IaC也是编程语言，就是对基础架构进行高级的编程，而且IaC代码本身和它的运行结果都是可以测试的。在执行前对其语义语法测试，在运行以后对其运行结果测试。Chef在这方面表现的尤为突出。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/chef-logo.png"
loading="lazy"
alt="Chef"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/LogoTerraform.png"
loading="lazy"
alt="Terraform"
>&lt;/p>
&lt;h3 id="配置管理">配置管理&lt;/h3>
&lt;p>我可能是最早的一批进行ITIL配置管理实践，CMDB建设的这批人；我以前和甲方客户有着大量的关于配置管理和CMDB的对话，所经历过的项目也非常煎熬。而在DevOps场景下，感觉以前的经历也是很有意思的，只是我现在说到的CI，在没有特指的情况下，是持续集成的概念，还不是配置项了。&lt;/p>
&lt;blockquote>
&lt;p>Process for establishing and maintaining consistency of a product’s performance, functional and physical attributes with its requirements, design and operational
information throughout its life。&lt;/p>
&lt;/blockquote>
&lt;p>以上是配置管理在维基百科里的定义，它所表达的含义还是值得借鉴的；而如今很多人对DevOps的认识，还有人是建立在DevOps配置管理相关的工具上的。为了纠正这个错误观点，我们经常说：“天文学并不只是关于望远镜的。”&lt;/p>
&lt;p>配置管理工具中有很多是基于主机（OS）的管理工具，包括：CFEngine、Puppet、Chef、Salt和Ansible等。它们都具有基础架构即代码的相关原则和特征。都能实现：定义服务器的目标期望状态的能力，在每一次执行周期里，它们都进行状态检查，汇报当前状态和目标状态的偏差，在必要的时候也可以自动的执行必要的状态修复操作。&lt;/p>
&lt;p>Chef这种配置管理工具，使用了Ruby风格的DSL语言，使用者只需要用Chef代码表达”What“即可，而不需要明白”How“；”What“既是对目标配置状态的描述，使用者只需要将需求转换为Chef代码，然后用Chef客户端工具运行它即可。Chef的代码清晰，描述能力强大。在编码的时候遵循DSL规则，如果有必要的话也可以调用Ruby。&lt;/p>
&lt;p>Chef是客户端服务器的架构，安装了&lt;strong>Chef-client&lt;/strong>程序的节点可以注册到一个&lt;strong>Chef管理服务器&lt;/strong>里。&lt;/p>
&lt;p>Chef的开发人员（IaC编码者），在安装了用于和Chef服务器交互的名为&lt;strong>knife&lt;/strong>的工具，称之为&lt;strong>工作站&lt;/strong>的系统上开发基础架构代码。Chef使用大量内置的DSL资源（例如：package，service，file，directory等操作系统资源分类）对目标节点的配置进行建模，代码可以映射到内部的用来执行这些代码的各种&lt;strong>提供者&lt;/strong>上。&lt;/p>
&lt;p>所能实现的示例代码如下所示，下面是配置Linux操作系统中的Apache服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="s1">&amp;#39;httpd&amp;#39;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="ss">:install&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span> &lt;span class="s1">&amp;#39;httpd&amp;#39;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="ss">:enable&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:start&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下面是在Linux操作系统里配置 &lt;code>/a/b/c &lt;/code> 目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">directory&lt;/span> &lt;span class="s1">&amp;#39;/a/b/c&amp;#39;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">owner&lt;/span> &lt;span class="s1">&amp;#39;admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">group&lt;/span> &lt;span class="s1">&amp;#39;admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="s1">&amp;#39;0755&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="ss">:create&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursive&lt;/span> &lt;span class="kp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以下面就是 &lt;code>/a/b/c&lt;/code> 目录的配置结果状态：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$ls&lt;/span> ‐ld /a/b/c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-­‐xr-­‐x. &lt;span class="m">5&lt;/span> admin admin &lt;span class="m">4096&lt;/span> Feb &lt;span class="m">14&lt;/span> 11:22 /a/b/c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Chef其它的重要术语：&lt;/p>
&lt;ul>
&lt;li>recipe ：包含了一个或者对个资源描述定义（Chef预定义了文件、用户、软件包、服务等等资源，可以扩展开发自定义资源类）&lt;/li>
&lt;li>cookbook ：包含了一个或多个recipe配方&lt;/li>
&lt;li>data bag ：包含了一个或多个配置数据点(data bag item)，是JSON格式，一个cookbook食谱可以包含一个或者多个数据袋&lt;/li>
&lt;li>run list ：包含了一个或者多个cookbook食谱，可将其部署在被管理的node节点上&lt;/li>
&lt;li>role ：一组特定内容的run list运行清单构成了一个角色&lt;/li>
&lt;li>environments：同我们现在对环境的定义，并可以一一对应起来&lt;/li>
&lt;/ul>
&lt;p>Chef是偏主机配置管理的非常的Iac语言，它具有很丰富的扩展能力和生态系统。它有很好的扩展能力，很强的逻辑性，能够进行深度的表达和锻造。它和Terraform和Ansible都有较大差异。&lt;/p>
&lt;h2 id="部署流程设计">部署流程设计&lt;/h2>
&lt;p>将以上手工处理过程转换为自动化执行的、一键式触发或者自动触发的流程需要关注很多个要点。&lt;/p>
&lt;p>使用Chef部署自开发的应用程序，包括配置所依赖的操作系统配置和软件，以及自身所需的应用配置。可以使用Liquibase进行数据库的schema部署和更新。可以用Jenkins协调和组织所有工序的执行。使用Jenkins管理部署流程的感觉和用它执行CI是类似。&lt;/p>
&lt;p>从简单开始，尽量将一组彼此相关的、版本化的可部署物组织在一起发布，例如在一个发布集合中可以包含：UI、REST服务器、消息服务和数据库。尽量使用一条命令构建，使用一条命令部署。&lt;/p>
&lt;h3 id="cookbook设计类型">Cookbook设计类型&lt;/h3>
&lt;p>&lt;strong>Library Cookbook 库食谱&lt;/strong> ：这种类型的食谱涵盖了通用的、可重用的逻辑。例如所有配置基线，也可以是安全基线。例如：dns、ntp、主机登录提示、用户和组、禁用服务清单等等。开发扩展的自定义chef资源，用来部署自开发应用。&lt;/p>
&lt;p>&lt;strong>Application Cookbook 应用系统食谱&lt;/strong> ：在以上库食谱的基础上，为一个套应用系统开发一个Cookbook食谱，每个应用可是一个recipe配方，recipe配方使用自定义开发的Chef资源。这样就形成了非常轻量的代码库。&lt;/p>
&lt;p>&lt;strong>Data Bag 数据袋&lt;/strong>：包含了各种应用配置，例如：服务端口、JAVA_OPTS等等。一个应用系统Cookbook食谱对应一个数据袋，袋子里面包含了该应用在每一套环境里的相关所有配置点。&lt;/p>
&lt;p>上线一个应用的新版本意味着新版本IaC代码的更新和部署，大致的流程是：编辑Chef代码、推送到Chef管理服务器、在节点上运行Chef客户端程序执行部署动作。Chef服务器的版本始终和版本控制库里的Master主干保持一致，这同样意味着环境配置和Master主干代码保持一致。&lt;/p>
&lt;p>用Chef开发自定义应用资源的实例代码如下，这段代码表示了一个Java应用war包的部署。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/carbon.png"
loading="lazy"
alt="carbon"
>&lt;/p>
&lt;p>基于类似于以上的自定义资源类型，在必要的情况下，还可以对其开发Action（chef资源的操作），可能的操作定义有：&lt;/p>
&lt;ul>
&lt;li>从Artifactory服务器下载Java、Tomcat和WAR包。&lt;/li>
&lt;li>在标准的路径安装Java和Tomcat。&lt;/li>
&lt;li>创建和配置Tomcat容器&lt;/li>
&lt;li>在特定的容器里安装WAR包&lt;/li>
&lt;li>在主机上开防火墙端口&lt;/li>
&lt;li>生成应用属性文件&lt;/li>
&lt;li>启动Tomcat容器&lt;/li>
&lt;/ul>
&lt;p>Data Bag数据袋的实例代码结构如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;1.4.9&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;runtime&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;my-­app-­ui&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;java_opts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;-­‐Xmx2G -­‐XX:MaxPermSize=1024m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;app_config&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;db.url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;jdbc:postgresql://devdb:5432/myapp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;svc.foo.url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;http://devsvc:9000/foo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上是data_bags/my_app/DEV.json的定义，还可以有其它环境的定义data_bags/my_app/TEST.json和data_bags/my_app/PROD.json等。&lt;/p>
&lt;h2 id="人员角色">人员角色&lt;/h2>
&lt;p>基础架构的持续集成需要Dev和Ops的相互协作，才能做通，才能全面覆盖应用所需要的技术栈。&lt;/p>
&lt;p>&lt;strong>部署人员&lt;/strong> 更data_bag新数据袋和环境定义文件，触发生产环境部署的动作，调度chef-client客户端的运行，或者推送新版本的Chef代码更新。&lt;/p>
&lt;p>&lt;strong>技术负责人&lt;/strong> 维护应用系统Cookbook食谱。&lt;/p>
&lt;p>&lt;strong>框架开发人员&lt;/strong> 维护库Cookbook食谱，维护框架，持续改进流程。&lt;/p>
&lt;p>以上这三种角色，从上到下是从Ops到Dev的过渡。对于传统IT组织的架构，部署人员是Ops团队的，框架开发人员是Dev团队的。&lt;/p>
&lt;p>这三种角色都凑齐了，才能起到全套应用系统的整体建模和编码，而且每个角色都有负责的部分。技术负责人可能是来自Ops和Dev团队的技术大拿。他们对整体的正确性和完整性负责。&lt;/p>
&lt;p>目前也有Dev团队在其内部招聘运维研发的角色。这三种角色是基础架构即代码的层次结构和人员团队架构的对应，在实际工作中可以灵活应用；一方面覆盖所有技术层次，另外一方面引入所有必要的人员，是团队形成合力。&lt;/p>
&lt;p>如果不是本着将全套应用系统做全量的部署，以上任何角色做自己职责范围内的IaC自动化实践，其实效果是事倍功半的，或者机会只有技术学习和探索的价值。&lt;/p>
&lt;h2 id="构建cookbook">构建Cookbook&lt;/h2>
&lt;p>在开发了各种Cookbook之后，我们就需要对其进行持续测试，因此就需要使用Cookbook的持续构建流程。这个步骤就如同我们对应用程序的代码做CI一样。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/cookbook-build.png"
loading="lazy"
alt="cookbook-build"
>&lt;/p>
&lt;p>开发人员（程序员不是业务应用开发者的专业名词，这里指IaC开发者，可能来自任何团队）在Workstations工作站上开发Chef的Cookbook代码，将代码提交到GitHub上的Chef代码仓库。&lt;/p>
&lt;p>Jenkins的Master服务器会触发CI Job，调用Ruby Slave对Cookbook代码进行集成和测试，然后触发EC2临时实例的创建，将Cookbook在EC2实例中进行测试，使用Artifactory中存储的应用软件包部署应用。如果测试都通过了，就触发Release Job，它将Cookbook代码上传到Chef服务器，供所各种环境中的被管理节点使用。&lt;/p>
&lt;p>上图用EC2作为Chef代码的CI环境，可以替代的方案有Vagrant+虚拟化（Virtual Box或者kvm），或者使用其它虚拟机资源池，如Ovirt KVM、Xen、Nutanix。我实际测试过使用Terraform对接Nutanix资源池，虚拟机创建超级快，几乎是秒得的速度。现有的虚拟化资源池就是最方便的对接对象，需要了解一下API和对接工具即可。&lt;/p>
&lt;p>对于Jenkins构建服务器而言，每一套应用系统对应的Cookbook组/集合的测试和发布都会在同一个构建服务器上发生，一般情况下这个服务器也是这些应用的CI服务器；这个Jenkins服务器也是相关Cookbook的CI作业和发布作业的运行地点。这个服务器上会安装所需要的Ruby gem包，应该能访问到与Chef服务器链接所需要的秘钥；应该可以使用到创建EC2测试节点虚拟机的秘钥，或者说访问其他类型虚拟机资源池的用户名和密码。&lt;/p>
&lt;h3 id="cookbook-ci-job">Cookbook CI Job&lt;/h3>
&lt;p>Cookbook CI作业的触发条件是：当有新Chef代码被合并的时候。它会进静态代码扫码和测试工作，包括如下内容：&lt;/p>
&lt;ul>
&lt;li>使用json和gem的相关工具分析JSON的句法&lt;/li>
&lt;li>使用Tailor做Ruby的句法和风格扫描&lt;/li>
&lt;li>使用Knife做Chef代码的句法分析&lt;/li>
&lt;li>使用Foodctritic做Che代码的句法分析和正确性分析&lt;/li>
&lt;/ul>
&lt;p>Chef代码在测试虚拟机里的集成测试是本文的重点，集成测试工具使用Test Kitchen，这个工具有一系列和虚拟化/云环境对接的插件，如 kitchen-ec2插件等。能按需临时的创建用于集成测试的虚拟机，在测试完毕，得出了测试结果之后，就删除本作业所创建的临时虚拟机。&lt;/p>
&lt;p>在集成测试的生命周期过程中也可能创建多个测试虚拟机/EC2实例，这个过程使对应用系统里的所有组件进行仿真的、实际的安装包和服务部署，进行单节点或者多节点的全量应用系统部署。在每个节点上都执行Chef代码，在Chef对应用系统的配置和部署完成之后，在对运行中的应用进行验证测试，测试包括测试相关的服务端口是否能访问，返回结果是否正常等等，Chef是可以进行测试驱动开发的，因此可以写出较细致的测试代码，从而分析本Cookbook集成测试通过与否。在测试结束了以后（最好是10分钟左右或更短），删除所有测试的虚拟机资源。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/nutanix-logo.png"
loading="lazy"
alt="Nutanix"
>&lt;/p>
&lt;p>应该尽可能的优化这个集成测试，尽量缩短它的执行时间。可以创建专用的EC2-AMI/Nutanix/Kvm/VMWare操作系统镜像，预装所需要的Ruby环境和Chef工具。&lt;/p>
&lt;p>使用Chef Solo（不依赖chef服务器）执行Chef代码的测试，以免将临时节点也添加到了Chef服务器，同时也消除了Chef的客户端和服务器架构之间相互通讯的消耗，这个场景里其实没有使用Chef服务器的必要。使用一个名为CHEFDEV的伪环境来测试代码，而JSON文件里定义的真实环境则被保留用于正式生产环境。在创建EC2虚拟机的时候，给它们打上特定的标签，从而保持一定的可追踪性和环境的可维护性。&lt;/p>
&lt;h3 id="cookbook-release-job">Cookbook Release Job&lt;/h3>
&lt;p>这个作业的运行内容和CI Job基本一致的，而它是靠人为手工触发的，从Chef角度看，可以说：本文上述的所有描述，属于Chef风格的基础架构即代码程序的持续交付。本作业将测试成功的代码在GitHub/GitLab里打上标签，并且上传Cookbook的新版本到正式的Chef生产服务器上。&lt;/p>
&lt;p>可以想象经过多个Cookbook的build job之后，Cookbook的某个版本被发布到了生产环境中，用于环境的配置和应用的部署。本Job作业交付了IaC的开发结果到生产环境中的Chef管理服务器。&lt;/p>
&lt;p>其它IaC的基础架构持续及集成与本文描述的也应该是类似流程。&lt;/p>
&lt;h2 id="应用部署流程">应用部署流程&lt;/h2>
&lt;p>Cookbook的开发和集成完毕了以后，它的结果产物是一些列新版本的Cookbook代码，它们最终上传到Chef服务器。支持生产环境应用部署的Chef服务器与各种环境保持连接，包括测试、预发布和生产等等。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/app-deploy-process.png"
loading="lazy"
alt="app-deploy-process"
>&lt;/p>
&lt;p>在发布过程中所使用到的制品是从Artifactory中拉取的。下面简单说下这个架构中的关键点。&lt;/p>
&lt;p>&lt;strong>Jenkins部署服务器&lt;/strong> 这是专门用于各种部署工作的Jenkins Master服务器，它和上一个步骤里Cookbook的Build服务器是不同的。它的Slave应该满足这些需求：安装了所需要Ruby环境和gem包。安装了Chef工具，并且具有能更新Chef服务器的秘钥。具有能访问各种虚拟化环境中节点的SSH秘钥。&lt;/p>
&lt;p>&lt;strong>部署作业的类型&lt;/strong> 可以对于每一个应用组（一套应用系统）设置两个部署作业：在开发环境中的，用于开发人员使用的DEV部署作业；另外是运维人员所使用的Non-Dev部署作业。在实践过程中也能发展出其他类型。&lt;/p>
&lt;p>部署人员的工作流程：&lt;/p>
&lt;ol>
&lt;li>变更Chef相关代码和配置，包括：编辑应用的data bag配置数据点，有必要的话编辑环境文件，合并代码。&lt;/li>
&lt;li>然后在Jenkins部署服务器上执行作业。&lt;/li>
&lt;/ol>
&lt;p>通过以上的流程和工具，开发、测试和运维的相关人员，如果需要部署应用了，就可以用一键式的、自助式的部署模式，将任何应用应用系统通过一键式的方式自动化的部署到各种应用环境中。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/push-button-deploy.png"
loading="lazy"
alt="push-button-deploy"
>&lt;/p>
&lt;p>这样我们将大量各种角色人员都从事的、没有附加值的应用部署工作，彻底的消灭掉了，节省的时间可以用来做更多有意义的工作，Dev人员有更多时间编码、测试人员不需要等待时间、运维人员也降低的工作压力。&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>关于基础架构的持续集成，还有下列值得参考的原则：&lt;/p>
&lt;ul>
&lt;li>尽可能的标准化：包括技术、设计和流程等方面；要能够支持环境的规模化扩展，例外是可以的，但是要尽量避免。&lt;/li>
&lt;li>所有工具最好有API：避免在某个工具，在工具链上的任何环节的脱节。&lt;/li>
&lt;li>使用多种形式的沟通路径：这个实践需要用各种方式进行宣传和推广，包括：全员大会的主题分享、每个团队的启动会议、与开发人员的随时沟通，使用文档进行知识传播和沟通。&lt;/li>
&lt;li>保持乐观，尽量发现和找到那些志同道合的早期响应者，让他们和你站在一条战线上。&lt;/li>
&lt;/ul>
&lt;h2 id="引用">引用&lt;/h2>
&lt;h3 id="参考视频">参考视频&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=PQ6KTRgAeMU" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=PQ6KTRgAeMU
&lt;/a>&lt;/p>
&lt;h3 id="参考书籍">参考书籍&lt;/h3>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/book-infrastructure-as-code.png"
loading="lazy"
>&lt;/p>
&lt;hr></description></item><item><title>DevOps on Nutanix[Beta]</title><link>https://martinliu.cn/blog/devops-on-nutanixbeta/</link><pubDate>Mon, 26 Feb 2018 11:08:53 +0800</pubDate><guid>https://martinliu.cn/blog/devops-on-nutanixbeta/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/testdrive_background.jpg" alt="Featured image of post DevOps on Nutanix[Beta]" />&lt;p>Nutanix是什么？中文名字是路坦力，是我目前所在的公司；我负责运营商行业以及与云服务商的合作业务，解决客户在售前、架构和DevOps等方面的问题，我是Nutanix Calm产品的专家。&lt;/p>
&lt;p>之前也发过一些介绍Nutanix和超融合技术的文章，本文会是一篇持续更新的文章，我会把在Nutanix上开展超融合的方法，持续的更新在这里。&lt;/p>
&lt;p>本文上属于Beta版本，会持续更新，欢迎各种类型的反馈信息，发邮件到： &lt;a class="link" href="mailto:martin.liu@nutanix.com" >martin.liu@nutanix.com&lt;/a>&lt;/p>
&lt;p>变更日志：&lt;/p>
&lt;ul>
&lt;li>2018-2-26，发表了相关概况介绍性内容&lt;/li>
&lt;/ul>
&lt;h2 id="什么是devops">什么是DevOps？&lt;/h2>
&lt;blockquote>
&lt;p>我的定义：DevOps是为了将软件开发、运维和质量保证等部门紧密地协作和集成在一起，而运用的一组成熟的、相互融合在一起的最佳实践。它使人们能准时/及时地生产软件产品或服务，从而满足企业的某个业务目标，开发与运维工作将在一个统一的目标之下协同工作，它是对IT组织内部各个角色之间的相互依存关系的一种新的理解。这个实践集合主要包含了四种最佳实践，如下图所示：&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/q_auto:eco/devops-house.png"
loading="lazy"
alt="DevOps 定义"
>&lt;/p>
&lt;p>注意：上图里Nutanix的定位在持续交付，超融合平台能高速平滑的交付IT服务。&lt;/p>
&lt;p>来自网络的其它定义还有如下。&lt;/p>
&lt;blockquote>
&lt;p>定义2：You cannot buy DevOps and install it. DevOps is not just automation or infrastructure as code. DevOps is people following a process enabled by products to deliver value to end users. &amp;ndash; Donovan Brown, Microsoft DevOps Program Manager&lt;/p>
&lt;/blockquote>
&lt;p>以上出自：&lt;a class="link" href="http://www.donovanbrown.com/post/2015/09/01/what-is-devops" target="_blank" rel="noopener"
>Donovan&amp;rsquo;s blog post on &amp;ldquo;What is DevOps&amp;rdquo;.&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>定义3：DevOps（Development和Operations的组合词）是一种重视“软件开发人员（Dev）”和“IT运维技术人员（Ops）”之间沟通合作的文化、运动或惯例。透过自动化“软件交付”和“架构变更”的流程，来使得构建、测试、发布软件能够更加地快捷、频繁和可靠。&lt;/p>
&lt;/blockquote>
&lt;p>以上出自：&lt;a class="link" href="http://zh.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener"
>维基百科 Wikipedia - DevOps&lt;/a>&lt;/p>
&lt;h2 id="什么是hci-超融合基础架构">什么是HCI-超融合基础架构&lt;/h2>
&lt;p>我对超融合的定义：将计算、存储和网络这三种资源的至少两种融合在一起的技术就可以称之为超融合技术。Nutanix是将计算和存储融合在了一个系统只能，这里说的系统可以理解一个物理的机箱，并且在这个机箱里搭载了目前业内最通用的KVM虚拟化功能。Nutanix的超融合系统是开箱即用的IaaS平台，可以无节点数限制的水平扩展，能够支持服务器虚拟化、VDI、Oracle RAC等关键性数据库、企业核心业务系统、大数据和私有云等工作负载。在性能和功能上是专门为HCI而打造的。HCI技术正在颠覆着传统的三层架构技术堆栈（指的是：服务器-存储网络-集中存储）。&lt;/p>
&lt;p>Nutanix在2018年Gartner融合基础架构分析报告中，Nutanix在领导象限里遥遥领先。&lt;/p>
&lt;p>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/Gartner-report-2018.png"
loading="lazy"
alt="Gartner 报告"
>&lt;/p>
&lt;p>2018 年 2 月 9 日，北京 ——企业云计算领域的领先企业 Nutanix（纳斯达克：NTNX）今天宣布， Gartner 将 Nutanix 评为 2018 年 Gartner 超融合基础架构（HCI）魔力象限领导者。Nutanix 认为，此次跻身“领导者”象限有力印证了 Nutanix 在其率先开拓的市场上的领导地位，也充分彰显了公司致力于提供下一代企业云操作系统的愿景。&lt;/p>
&lt;p>随着越来越多的企业机构认识到超融合基础架构（HCI）的优势，企业基础设施正在经历根本性的转变。这些企业机构采用了一种新的架构设计，将网络规模技术和消费级设计相融合，实现“隐形基础设施”，从而使 IT 团队能将更多的时间投入到业务应用中。同时，这些企业机构还纷纷采取了能够利用多云基础设施和云服务的 IT 战略。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>Nutanix 认为，利用其企业云操作系统软件，用户不但能实现公有云的精简性、敏捷性以及部分 IT 消费收益，还能保障企业数据中心的高可控性与安全性。在融合了私有云、公有云和分布式云的统一 IT 操作环境下，Nutanix 企业云操作系统软件提供单点控制来管理任何云的基础设施与应用，从而为云运营商和采用云交付式服务及应用的用户提供统一、高性能、无缝的使用体验。&lt;/p>
&lt;p>关于Nutanix的更多视频，&lt;a class="link" href="http://i.youku.com/i/UMzM5NzI4MDg1Mg==?spm=a2hzp.8244740.0.0" target="_blank" rel="noopener"
>请访问Youku的频道。&lt;/a>&lt;/p>
&lt;h3 id="学习nutanix核心技术">学习Nutanix核心技术&lt;/h3>
&lt;p>关于Nutanix超融合系统的核心技术特性请访问：&lt;a class="link" href="http://nutanixbible.com/" target="_blank" rel="noopener"
>Nutanix 圣经&lt;/a>，圣经网站上有中文版本pdf下载，最近会有一次中文版的修订请关注。&lt;/p>
&lt;h3 id="试用nutanix产品">试用Nutanix产品&lt;/h3>
&lt;p>Nutanix提供免费的社区版本，对此感兴趣的人都可以下载和使用。使用这个版本，你能够在几个小时内，搭建起数量为1、3或者4个的物理服务器组成的Nutanix集群。&lt;/p>
&lt;p>关于如何安装和试用Nutanix CE版本的技术文档，访问我的Nutanix实验室文档站点：&lt;a class="link" href="https://nutanix.martinliu.cn/" target="_blank" rel="noopener"
>https://nutanix.martinliu.cn/&lt;/a>&lt;/p>
&lt;h2 id="使用nutanix-calm实现devops持续交付">使用Nutanix Calm实现DevOps持续交付&lt;/h2>
&lt;p>Nutanix是一种开箱即用的高性价比的虚拟化资源池，你可以用最小的时间成本完成大规模资源池的搭建和部署。而现实情况下：所有企业的虚拟化管理员的工作模式还是基于工单的手工VM模板克隆的方式。还没有人能将基于vm的业务系统做到自动化的持续交付。Nutanix Calm就是一项解决这个问题的技术。它是Nutanix超融合系统内置的一个功能，可以一键式的开启这项功能。&lt;/p>
&lt;p>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/WechatIMG224.jpeg"
loading="lazy"
alt="Nutanix Calm"
>&lt;/p>
&lt;p>Nutanix Calm的主要功能如下所示：&lt;/p>
&lt;ul>
&lt;li>应用生命周期管理：利用预定义的应用蓝图，全面地实现了传统型多层应用和流行的分布式服务的自动化运维，包括系统制备、扩缩容和资源释放等操作。应用蓝图将极大地简化了私有云和公有云的应用管理和运维。&lt;/li>
&lt;li>应用蓝图管理：将应用系统的所有组成部分（包括相关的虚拟机、配置和可执行程序）融入到了一个可视化的、操作直观的蓝图里，从而简化了企业应用的配置管理和日常运维。应用蓝图提升了基础架构团队的管理效率。IT团队再也不用像以前那样，在应用管理的日常工作上花费大量时间。&lt;/li>
&lt;li>Nutanix应用市场：应用蓝图可以在Nutanix 应用市场（Marketplace）里把应用直接发布给最终用户，使产品经理和开发人员能够持续交付产品，快速地供给应用，及时地满足IT服务请求。&lt;/li>
&lt;li>应用治理：Calm基于角色的访问控制机制可以限制用户的操作权限。此外，系统会集中地记录所有操作活动和变更，可以实现端到端的可追溯性，这些信息可以提供给安全团队，用来配合相关合规审核工作。&lt;/li>
&lt;li>混合云管理：能在混合云的架构里，自动化地制备应用，包括AWS公有云环境，能实现多层应用和分布式应用的弹性扩缩容。Calm能全局统计资源用量，让您对公有云的实际消费成本一目了然，方便您按照业需求和预算做出合理的决策。&lt;/li>
&lt;/ul>
&lt;p>Nutanix Calm的蓝图编辑器如下所示。&lt;/p>
&lt;p>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/blueprint.png"
loading="lazy"
alt="Nutanix Calm Blueprint"
>&lt;/p>
&lt;p>在我的&lt;a class="link" href="https://nutanix.martinliu.cn/" target="_blank" rel="noopener"
>Nutanix实验室：&lt;/a>文档站点里已经写了一些操作使用的方法和产品截图。如果您已经是Nutanix用户了，请参考和使用这些文档。如果你还不是的话，可以联系Nutanix试用这个产品。&lt;/p>
&lt;hr>
&lt;p>后续会持续更新这一部分，会根据DevOps的逻辑将Nutanix Calm的能力全面的展示出来，敬请期待。&lt;/p>
&lt;h2 id="使用nutanix实现完美的docker-datacenter体验">使用Nutanix实现完美的Docker Datacenter体验&lt;/h2>
&lt;p>CaaS on IaaS的简洁实现方式莫过于在Nutanix超融合平台上部署Docker Datacenter产品。其实Docker Datacenter还是一个很容易使用的Docker平台，易用性非常好，入门级Docker用户建议走这条路试试，毕竟K8s的学习曲线目前还比较陡峭。&lt;/p>
&lt;p>这个组合的免费试用方法：&lt;/p>
&lt;ol>
&lt;li>安装部署Nutanix CE（文档见Nutanix实验室）&lt;/li>
&lt;li>申请和下载Docker Datacenter的安装包和许可证文件（10个节点免费试用，30天到期了还可以无限次延续）&lt;/li>
&lt;li>在Nutanix上创建10个虚拟机用于部署Docker Datacenter&lt;/li>
&lt;li>安装部署Docker Datacenter （&lt;a class="link" href="https://nutanix.martinliu.cn/04-nucalm-advance/02-owncloud-dvp/" target="_blank" rel="noopener"
>文档见Nutanix实验室&lt;/a>）&lt;/li>
&lt;li>Enjoy it forever!&lt;/li>
&lt;/ol>
&lt;p>如果你使用4台物理服务器安装Nutanix CE，建议的服务器配置：2路20核 Intel XeonCPU，内存256，SSD 512GB一块，SAS HDD 4TB两块；这样形成的群集的总资源量：&lt;/p>
&lt;ul>
&lt;li>160个物理CPU核，一个物理核跑两个虚拟机的话，你可以跑320个虚拟机；当然内存够的情况下，你还可以尝试更高的整合比，如1个物理的核带5到10个虚拟机&lt;/li>
&lt;li>总存储空间为18TB，使用两副本存数据，你有9TB可用空间，打开去重压缩等功能的话你可以拥有更多的存储空间。&lt;/li>
&lt;li>2TB的SSD存储可以让你应付大量的热数据，所有热数据相当于使用了全闪存储一般。&lt;/li>
&lt;li>建议这些服务器使用10GB或更高速的以太网，以保证更优雅的性能&lt;/li>
&lt;li>不建议这个环境跑生产负载，记住不要把研发环境不算生产负载。&lt;/li>
&lt;li>如果需要生产级别的保障，请考虑使用费CE版本的正式Nutanix产品。&lt;/li>
&lt;/ul>
&lt;h2 id="使用nutanix-acs20实现完美的k8s体验">使用Nutanix ACS2.0实现完美的K8s体验&lt;/h2>
&lt;p>此产品预计18年发布，敬请期待。&lt;/p></description></item><item><title>Devops Handbook《DevOps实践指南》简介</title><link>https://martinliu.cn/blog/devops-handbookdevops%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97%E7%AE%80%E4%BB%8B/</link><pubDate>Sun, 25 Feb 2018 22:27:16 +0800</pubDate><guid>https://martinliu.cn/blog/devops-handbookdevops%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97%E7%AE%80%E4%BB%8B/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/IT_Revolution_press.png" alt="Featured image of post Devops Handbook《DevOps实践指南》简介" />&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/TMNS-book-review-DevOps-1.png"
loading="lazy"
alt="本文内容主要来源"
>&lt;/p>
&lt;p>企业如何通过DevOps实践提高盈利能力，改善工作文化，实现卓越的生产力目标。如今这些高绩效管理技术比以往的任何时候都要更加重要，由于这对于企业的商业竞争力而言是至关重的，数十年以来，技术组织的领导者们始终在努力地维持这IT系统的敏捷性、可靠性和安全性。然后惨痛的案例依然比比皆是&amp;ndash;不论是healthcare.gov的崩溃，持卡人数据的泄露；还是在云计算环境中大数据的丢失。&lt;/p>
&lt;p>然而，那些运用DevOps原则的高绩效企业（例如Google，Amazon，Facebook，Etsy和Netflix）则每天都可以在生产环境中成百上千次频繁地部署代码。那么DevOps理论、原则和实践到底是何等的殊胜呢？相信所有人在看了本书之后一定会得到答案。&lt;/p>
&lt;h2 id="通过数字看这本书">通过数字看这本书&lt;/h2>
&lt;h3 id="基础数据">基础数据&lt;/h3>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-handbook-by-number.png"
loading="lazy"
alt="本文内容主要来源"
>&lt;/p>
&lt;h3 id="原作者4人">原作者4人&lt;/h3>
&lt;p>Jene Kim是这本书的主要作者，他在出版了《凤凰项目》之后，开始与其他三位作者编写本书的。Jez Humble是《持续交付》的作者，是持续交付实践和概念的重要发起人。Patrick Debios是DevOpsDays大会的发起人，是他最早在Twiter是用 #DevOps 这个短标签的，是DevOps运动和社区的重要人物。John Willis是DevOps社区早期的推动者之一，曾任Docker公司生态系统发展总监。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/handbook-AUTHORS.png"
loading="lazy"
alt="authors"
>&lt;/p>
&lt;h3 id="译者4人">译者4人&lt;/h3>
&lt;p>在我和人民邮电出版社联系并进行试译之后，组织了翻译小组。王磊和马博文是我这几年结识的DevOps圈内的技术大拿；曾朝京是IT管理领域的资深专家，是我的前同事。王磊的著作有&lt;a class="link" href="https://www.amazon.cn/dp/B018SRCFI6/" target="_blank" rel="noopener"
>《微服务架构与实践》&lt;/a>；马博文翻译的书籍有&lt;a class="link" href="https://www.amazon.cn/dp/B01LWLRQF3/" target="_blank" rel="noopener"
>《DevOps 实践》&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-handbook-translator.png"
loading="lazy"
alt="translator"
>&lt;/p>
&lt;blockquote>
&lt;p>刘征，Nutanix路坦力资深架构师。Exin首批国内DevOps Master和DevOps Professional认证讲师。持有红帽RHCA认证和AWS高级架构师认证。谙熟企业数据中心的IT服务管理。目前致力于推广DevOps相关的理念和实践，在DevOps社区中积极地参与培训和研讨会等活动，DevOpsDays大会活动在中国的核心组织者。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>王磊，前ThoughtWorks首席咨询师，EXIN首批国内DevOps Master认证教练。较早倡导和实践微服务的先行者，著有国内首本微服务架构相关书籍《微服务架构与实践》一书。超过10年以上的软件行业经验，对服务化架构、持续交付以及DevOps转型等有丰富的实践经验，同时他也是西安DevOpsMeetup联合发起人，西安GDCR组织者，并译有《Ruby Gems开发实战》一书。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>马博文, 前ThoughtWorks 高级咨询师，AWS助理架构师。曾从事多年web开发和DevOps，熟悉持续交付，微服务。参与翻译《Scala编程实战》、《DevOps实践》等书，是西安DevOps Meetup活动的发起人。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>曾朝京，Micro Focus资深解决方案顾问，参加Exin首批国内Devops Master讲师认证培训。长期从事IT运维管理领域咨询工作，曾为能源、金融、航空运输、政府行业中的多个大型企业提供 IT 运维管理规划。目前致力于探索Devops理念在企业IT部门的实践。&lt;/p>
&lt;/blockquote>
&lt;p>翻译小组完成翻译，并提交给出版社的日期是2017年12月8日。&lt;/p>
&lt;h2 id="目录提前曝光">目录提前曝光&lt;/h2>
&lt;p>本书目前（本文的发布日期）正处于出版社编辑阶段。预计在五月份左右正式出版。下面是本书的目录。&lt;/p>
&lt;ul>
&lt;li>序言&lt;/li>
&lt;li>前言&lt;/li>
&lt;li>导言：展望DevOps新世界&lt;/li>
&lt;li>第一部分 三步工作法
&lt;ul>
&lt;li>第1章 敏捷、持续交付和三步法&lt;/li>
&lt;li>第2章 第一步，流动原则&lt;/li>
&lt;li>第3章 第二步，反馈原则&lt;/li>
&lt;li>第4章 第三步，持续学习与实验原则&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>第二部分 从何处开始
&lt;ul>
&lt;li>第5章 选择合适的价值流作为切入点&lt;/li>
&lt;li>第6章 理解、可视化和运用价值流&lt;/li>
&lt;li>第7章 参考康威定律设计组织结构&lt;/li>
&lt;li>第8章 将运维融入日常开发工作&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>第三部分 第一步：流的技术实践
&lt;ul>
&lt;li>第9章 为部署流水线奠定基础&lt;/li>
&lt;li>第10章 实现快速可靠的自动化测试&lt;/li>
&lt;li>第11章 应用和实践持续集成&lt;/li>
&lt;li>第12章 自动化和低风险发布&lt;/li>
&lt;li>第13章 降低发布风险的架构&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>第四部分 第二步：反馈的技术实践
&lt;ul>
&lt;li>第14章 建立能发现并解决问题的遥测系统&lt;/li>
&lt;li>第15章 分析遥测数据以更好地预测故障和实现目标&lt;/li>
&lt;li>第16章 应用反馈实现安全部署&lt;/li>
&lt;li>第17章 将假设驱动的开发和A/B测试融入日常工作&lt;/li>
&lt;li>第18章 建立评审和协作流程以提升当前工作的质量&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>第五部分 第三步：持续学习与实验的技术实践
&lt;ul>
&lt;li>第19章 将学习融入每天的工作中&lt;/li>
&lt;li>第20章 将局部经验转化为全局改进&lt;/li>
&lt;li>第21章 预留组织学习和改进的时间&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>第六部分 集成信息安全、变更管理和合规性的技术实践
&lt;ul>
&lt;li>第22章 将信息安全融入每个人的日常工作&lt;/li>
&lt;li>第23章 保护部署流水线&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>行动起来 - DevOps手册总结&lt;/li>
&lt;li>附录&lt;/li>
&lt;li>附加资源&lt;/li>
&lt;/ul>
&lt;p>以上目录标题有可能在出版社的编辑过程中会有所调整。不过已经可以看出其主要内容。&lt;/p>
&lt;h2 id="来自出版社-it-revolution-press-october-6-2016">来自出版社-IT Revolution Press (October 6, 2016)&lt;/h2>
&lt;p>&lt;img src="http://res.cloudinary.com/martinliu/image/upload/q_auto:eco/handbook-1.jpg"
loading="lazy"
alt="DevOps Handbook"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://itrevolution.com/book/the-devops-handbook/" target="_blank" rel="noopener"
>IT Revolution Press&lt;/a>是 &lt;em>DevOps Handbook&lt;/em> 一书的的出版社，位于美国的波特兰市。这本书的简体中文版的书名是《DevOps实践指南》，它是作者继《凤凰项目》之后的一个重大作品，它向你展示了如何将产品经理、开发、质量保证、IT运维和信息安全集成在一起，从而帮助你提升企业的竞争力并赢得市场；如何复制前人那些惊人的DevOps经验成果。&lt;/p>
&lt;p>那么《DevOps实践指南》是否适合你？本书的作者Gene Kim、Jez Humble、Patrick Debois和John Willis为那些希望对IT组织进行转型的人共同编写了此书；特别是为那些想通过DevOps实际进行重大的变革，从而提高生产力、盈利能力并赢得市场的人。这本书涉及DevOps转型的很多方面，是一本从规划到实操的全方位指南，同时它还介绍了DevOps的历史背景，支撑DevOps的各种原则，以及数十个DevOps案例研究。它还提供了各种最佳实践，能有助于组织团结团队一心，使他们实现共同目标，同时获得高层领导支持。&lt;/p>
&lt;p>《DevOps实践指南》深入地研究了DevOps的三个基本原则，现在我们称其为“DevOps工作三步法”，它们是流动、反馈、持续学习与实验”。 《DevOps实践指南》是Gene Kim继《凤凰项目》一书之后编写的，在那本书里也对“三步法”作了概括的描述，后来发展成为本书第一部分的重要内容。&lt;/p>
&lt;p>随着本书循序渐进地揭示DevOps工作三步法，读者将能够清晰的了解到，那些高绩效公司是如何利用这些原则取得成功的。希望任何大型组织也能够复制这些高绩效企业所使用过的成功经验，从而指导他们自己也进行一场成功的DevOps转型。本书用六个部分描述了详实的内容，其中包括：&lt;/p>
&lt;ul>
&lt;li>在五年时间里，4位合著者为本书投入了2000多小时的工作时间&lt;/li>
&lt;li>40多个DevOps案例研究，包括亚马逊，Etsy，Capital One，Google，Facebook，Intuit，Nationwide保险等等&lt;/li>
&lt;li>编写了长达400多页的DevOps实践指南、经验总结和工作指导。&lt;/li>
&lt;li>参考和使用来来自25,000多个数据收集点的DevOps相关数据。&lt;/li>
&lt;/ul>
&lt;p>《Phoenix项目》（英文版）已经售出35万本，2018年2月进行了第五次印刷。《DevOps实践指南》从DevOps的历史开始讲起，解释了它是怎样从数十年的相关联的知识体系中发展出来的，以及由此应运而生的相关技术、架构和文化实践。在为读者奠定了这些历史基础后，读者就能够深入了解三步工作法的原则了。读者将逐步对当今的DevOps相关理论和原则有更深入的理解。在本书的相关章节里介绍了各种具体原则和模式，以及如何将它们应用在实际的技术价值流中。&lt;/p>
&lt;p>我们很自豪的宣布 DevOps Handbook - 《DevOps实践指南》获得了2016年，年度DevOps最佳图书奖，详见：&lt;a class="link" href="https://devops.com/the-2016-devops-dozen-winners-announced/" target="_blank" rel="noopener"
>https://devops.com/the-2016-devops-dozen-winners-announced/&lt;/a>&lt;/p>
&lt;h2 id="在亚马逊书网上书店">在亚马逊书网上书店&lt;/h2>
&lt;p>本书的英文版本在亚马逊有三种格式：Kindle、纸质印刷版和有声书版本。这本书的排名和评价如下，下图的抓取时间是：2018-2-25。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/handbook-rank.png"
loading="lazy"
alt="排名"
>&lt;/p>
&lt;ul>
&lt;li>在信息管理分类里排名：7&lt;/li>
&lt;li>在流程和基础架构里排名：107&lt;/li>
&lt;li>在管理书籍里排名：111&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/handbook-reviews.png"
loading="lazy"
alt="书评"
>&lt;/p>
&lt;p>有85%的读者给本书了5星的评价。关于这本书在亚马逊的最新状态，&lt;a class="link" href="https://www.amazon.com/DevOps-Handbook-World-Class-Reliability-Organizations/dp/1942788002/ref=tmm_pap_swatch_0?_encoding=UTF8&amp;amp;qid=&amp;amp;sr=" target="_blank" rel="noopener"
>请点这里。&lt;/a>&lt;/p>
&lt;p>本书的日文版是在2017年6月在日本发布的，&lt;a class="link" href="http://amzn.asia/2Yqn47O" target="_blank" rel="noopener"
>详情见日本亚马逊网站&lt;/a>。&lt;/p>
&lt;h2 id="本书的使用方式">本书的使用方式&lt;/h2>
&lt;p>在上一篇文章《DevOps登山指南》里我分析和介绍了美国金融行业Nationwide保险公司的DevOps案例，&lt;a class="link" href="https://martinliu.cn/posts/devops-climbing-guide/" target="_blank" rel="noopener"
>原文点这里&lt;/a>。这家公司在实施DevOps的过程中将本书做为参考指南，所有DevOps团队通过每周一次的读书会的方式，持续地对照和改进自己的DevOps实践状态。他们总结出来的DevOps项目实施指南如下图所示：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-climbing-guide.jpg"
loading="lazy"
alt="DevOps登山指南手册"
>&lt;/p>
&lt;p>本图在Nationwide公司内部的使用场景如下：&lt;/p>
&lt;ol>
&lt;li>本图将DevOps实施核心团对指导产品开发团队（也可以说是业务团队、服务团队、这样的团队他们有200多个）取得的经验总结在一张纸上，供其它有实施DevOps想法的团队参考。&lt;/li>
&lt;li>该登山指南简化了对其它非DevOps团队的教育和指引。&lt;/li>
&lt;li>他们将DevOps的实施分成三个阶段，分别用大本营、北坡营地和顶峰作比喻。&lt;/li>
&lt;li>这三个阶段里的技术实践都来自于DevOps Handbook，通过他们的筛选和整理，并根据自己的经验做了分阶段的规划。&lt;/li>
&lt;/ol></description></item><item><title>DevOps工作三步法：第一步流动原则</title><link>https://martinliu.cn/blog/devops%E5%B7%A5%E4%BD%9C%E4%B8%89%E6%AD%A5%E6%B3%95%E7%AC%AC%E4%B8%80%E6%AD%A5%E6%B5%81%E5%8A%A8%E5%8E%9F%E5%88%99/</link><pubDate>Wed, 21 Feb 2018 23:10:01 +0800</pubDate><guid>https://martinliu.cn/blog/devops%E5%B7%A5%E4%BD%9C%E4%B8%89%E6%AD%A5%E6%B3%95%E7%AC%AC%E4%B8%80%E6%AD%A5%E6%B5%81%E5%8A%A8%E5%8E%9F%E5%88%99/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/IT_Revolution_press.png" alt="Featured image of post DevOps工作三步法：第一步流动原则" />&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/TMNS-book-review-DevOps-1.png"
loading="lazy"
alt="本文内容主要来源"
>&lt;/p>
&lt;p>本文内容主要来源于《DevOps Handbook》-DevOps实践指南，本文概述的原则是DevOps工作三步法的第一步，它的目标是先建立最底层的基础，即：DevOps技术实践和合理的应用架构；只有这样才能使工作快速而稳定地从开发端流动到运维端；与此同时还能保证不会给生产环境带来混乱，不会中断客户的服务。这就意味着需要降低在生产环境中部署和发布变更的风险。可以通过 &lt;em>持续交付&lt;/em> 的技术实践来实现这个目标。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/first_way.png"
loading="lazy"
alt="The first way flow"
>&lt;/p>
&lt;p>持续交付基于稳定的自动化部署流水线，团队能够使用自动化测试持续验证代码，确保代码始终处于可部署的状态，开发人员要保证每天都向主干提交代码，以及设计和实现有利于实施低发布风险的环境和软件架构。&lt;/p>
&lt;p>在流动原则的指导下，需要开展的重要的工作内容如下：&lt;/p>
&lt;ul>
&lt;li>奠定部署流水线的基础&lt;/li>
&lt;li>实现快速、可靠的自动化测试&lt;/li>
&lt;li>实现并实践持续集成和持续测试&lt;/li>
&lt;li>通过自动化、架构解耦等方式实现低风险发布&lt;/li>
&lt;/ul>
&lt;p>以上技术实践能够有效地缩短创建类生产环境的前置时间。同时，持续测试可以为所有团队成员提供快速的反馈，使小型团队能够安全、独立地开发、测试和向生产环境部署代码，从而将生产环境的部署和发布作为日常工作的一部分。&lt;/p>
&lt;p>此外，通过将QA人员和运维人员的任务集成到DevOps实施团队的日常工作中，能够减少救火、困境以及繁琐的重复劳动的发生，使团队成员的工作高效且充满乐趣。这不仅能提升团队的工作质量，还能提高组织的竞争力。&lt;/p>
&lt;p>流动原则相关的详细技术实践请参考请《DevOps实践指南》一书的第三部分，这部分包含第10章到第13章，一共描述了5个技术实践。&lt;/p>
&lt;p>在流动原则里我们强调的而是全局的目标而不是局部的目标，局部目标的例子如下所示：&lt;/p>
&lt;ul>
&lt;li>特性开发完成率&lt;/li>
&lt;li>测试发现/修复缺陷的比例&lt;/li>
&lt;li>运维的可用性指标&lt;/li>
&lt;/ul>
&lt;p>我们需要减少价值流中的工作交接的次数，由于当交接次数多到一定程度时，所有人就会彻底的迷失，无法回答工作的上下文联系是什么？也不清楚我们要解决的是什么问题？或者组织的全局目标是什么？&lt;/p>
&lt;h2 id="价值流的应用实例">价值流的应用实例&lt;/h2>
&lt;p>如果我们选择做DevOps转型的项目是棕地项目，我们就需要对当前的工作，进行细致的值流研讨和分析；需要画出当前的状态。如下图的示例所示（注：这是一个示例，你的棕地项目分析完之后并非如此）。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/VSM-As-Is.jpg"
loading="lazy"
alt="VSM as is"
>&lt;/p>
&lt;p>为了在实施DevOps的过程中持续的度量和改进，我们需要分析出当前价值流的核心定量指标：&lt;/p>
&lt;ol>
&lt;li>总计前置时间 = 求和价值流中每个工作步骤里的LT 【这个指标是DevOps项目的北极星】&lt;/li>
&lt;li>总计增值时间 = 求和值流中每个工作步骤里的VA&lt;/li>
&lt;li>完成且精确百分比 = 连乘值流中每个工作步骤的%C/A&lt;/li>
&lt;/ol>
&lt;p>如果是绿地项目，我们在第一个工作周里，价值流图是没有这些数值的。我们需要每天都在CI/CD流水线工具中采集相关数据，在每个人的日常工作中关注和记录相关数据，在第二周和后续的每一周里度量和分析以上指标，最好用仪表板展示工具，将这些数据实时地显示在所有项目组成员都可以轻松看到的位置。&lt;/p>
&lt;p>对这个价值流进行持续的优化，使它更高效的工作，并不断的进化和改进。如果是棕地项目，那么在分析完以上的机制流之后，可以定制新的进化版的价值流图，并按照新版本的价值流图重新开始项目的执行。如下图的示例所示（注：这是一个示例，你的棕地项目改进优化完之后并非如此）。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/VSM-To-Be.jpg"
loading="lazy"
alt="VSM as is"
>&lt;/p>
&lt;h2 id="优化和改进日常工作">优化和改进日常工作&lt;/h2>
&lt;h3 id="goldratt博士的约束理论toc">Goldratt博士的约束理论(TOC)&lt;/h3>
&lt;p>在实践运用流动原则的技术实践时，可以使用Goldratt博士给出的方法，随时识别并解决价值流中的约束点，这个五步法如下：&lt;/p>
&lt;ul>
&lt;li>识别系统的约束点。&lt;/li>
&lt;li>决定如何利用这个系统约束点。&lt;/li>
&lt;li>基于上述决定，考虑全局工作。&lt;/li>
&lt;li>改善系统的约束点。&lt;/li>
&lt;li>如果约束点已经突破了，请回到第一步，但要杜绝惯性导致的系统约束。&lt;/li>
&lt;/ul>
&lt;p>以上五步法是DevOps实施项目组日常工作的必备流程优化工具。&lt;/p>
&lt;h3 id="常见的4个约束点">常见的4个约束点&lt;/h3>
&lt;p>传统企业或者团队里最容易发生的约束点有一定的共性，一般可能会按照以下顺序逐个攻克和优化：&lt;/p>
&lt;ol>
&lt;li>环境搭建&lt;/li>
&lt;li>代码部署&lt;/li>
&lt;li>测试的准备和执行&lt;/li>
&lt;li>紧密耦合的架构&lt;/li>
&lt;/ol>
&lt;p>可以清楚的看到大多数约束点比较偏Ops这一侧，而攻克所有这些约束点需要Dev和Ops一起协作完成。&lt;/p>
&lt;h3 id="常见的9中浪费">常见的9中浪费&lt;/h3>
&lt;p>在DevOps工作团队里需要尽快能地避免以下浪费现象的发生：&lt;/p>
&lt;ul>
&lt;li>半成品&lt;/li>
&lt;li>额外/多余工序&lt;/li>
&lt;li>额外/多余功能&lt;/li>
&lt;li>任务切换&lt;/li>
&lt;li>等待&lt;/li>
&lt;li>移动&lt;/li>
&lt;li>缺陷&lt;/li>
&lt;li>非标准或手工操作&lt;/li>
&lt;li>填坑侠&lt;/li>
&lt;/ul>
&lt;p>以上浪费现象最早是从制造行业的精益管理中总结出来的，这些也是完全可以应用到技术价值流中，IT相关的工作能对每一条有很多痛点清晰的解读，你可以尝试在自己的工作环境中寻找以上所有浪费现象。&lt;/p>
&lt;h2 id="devops工作三步工作法-in凤凰项目">DevOps工作三步工作法 in《凤凰项目》&lt;/h2>
&lt;p>在本书中，我们阐述了这一基础原理，即所有开发运维模式都来自“三步工作法”，它旨在阐明指导开发运维的流程与实践的价值观与理念。&lt;/p>
&lt;p>**第一工作法 **是关于从开发到IT运维再到客户的整个自左向右的工作流。为了使流量最大化，我们需要小的批量规模和工作间隔，绝不让缺陷流向下游工作中心，并且不断为了整体目标（相对于开发功能完成率、测试发现/修复比率或运维有效性指标等局部目标）进行优化。&lt;/p>
&lt;p>必要的做法包括持续构建、集成以及部署，按需创建环境，严控半成品，以及构建起能够顺利变更的安全系统和组织。&lt;/p>
&lt;p>**第二工作法 **是关于价值流各阶段自右向左的快速持续反馈流，放大其效益以确保防止问题再次发生，或者更快地发现和修复问题。这样，我们就能在所需之处获取或嵌入知识，从源头上保证质量。&lt;/p>
&lt;p>“必要的做法包括：在部署管道中的构建和测试失败时“停止生产线”；日复一日地持续改进日常工作；创建快速的自动化测试套装软件，以确保代码总是处于可部署的状态；在开发和IT运维之间建立共同的目标和共同解决问题的机制；建立普遍的产品遥测技术，让每个人都能知道，代码和环境是否在按照设定的运行，以及是否达到了客户的目标。&lt;/p>
&lt;p>&lt;strong>第三工作法&lt;/strong> 是关于创造公司文化，该文化可带动两种风气的形成：不断尝试，这需要承担风险并从成功和失败中吸取经验教训；理解重复和练习是熟练掌握的前提。”&lt;/p>
&lt;p>“尝试和承担风险让我们能够不懈地改进工作系统，这经常要求我们去做一些与几十年来的做法大不相同的事。一旦出了问题，不断重复的日常操练赋予我们的技能和经验，令我们可以撤回至安全区域并恢复正常运作。&lt;/p>
&lt;p>必要的做法包括营造一种勇于创新、敢于冒险（相对于畏惧或盲目服从命令）以及高信任度（相对于低信任度和命令控制）的文化，把至少20%的开发和IT运维周期划拨给非功能性需求，并且不断鼓励进行改进。”&lt;/p>
&lt;p>From: [美] 金（Gene Kim ），[美] 贝尔（Kevin Behr），[美] 斯帕福德（George Spafford）. “凤凰项目一个IT运维的传奇故事.”。&lt;/p></description></item><item><title>DevOps登山指南</title><link>https://martinliu.cn/blog/devops%E7%99%BB%E5%B1%B1%E6%8C%87%E5%8D%97/</link><pubDate>Tue, 20 Feb 2018 00:34:09 +0800</pubDate><guid>https://martinliu.cn/blog/devops%E7%99%BB%E5%B1%B1%E6%8C%87%E5%8D%97/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/q_auto:eco/Evest.jpg" alt="Featured image of post DevOps登山指南" />&lt;p>美国金融行业Nationwide保险公司DevOps案例研究，来源DOES17 San Francisco，主题-DevOps Handbook Experiments in Accelerating Delivery&lt;/p>
&lt;p>全美互惠保险公司(Nationwide)美国公司。在2017年6月7日，《财富》2017年美国500强排行榜发布，全美互惠保险公司排名第68位。营业收入40074.1百万美元。&lt;/p>
&lt;p>这家公司是DevOps Handbook（DevOps实践指南）书中的案例研究之一。这是一家DevOps水平较高的企业，是DevOpsDays大会上分享嘉宾的常客，也是各个DevOps工具厂商（New Relic）经常邀请的案例分享嘉宾。他们也经常参加DevOps企业峰会，曾多次做过自己的DevOps应用状况案例分享。&lt;/p>
&lt;p>本文分析和整理了他们在2017年11月旧金山站DevOps企业峰会上他们的演讲，主题为《DevOps Handbook Experiments in Accelerating Delivery - Nationwide》（翻译：使用DevOps Handbook在加速开发交付的过程中的实验）&lt;/p>
&lt;p>本文根据这个演讲的YouTube视频整理而成。视频已经上传到腾讯视频，&lt;a class="link" href="https://v.qq.com/x/page/v0555haemus.html" target="_blank" rel="noopener"
>点这里观看该视频。&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="devops登山指南手册">DevOps登山指南手册&lt;/h2>
&lt;p>我在翻译DevOps Handbook的过程中，感觉书中所描述的这家公司的案例研究，并不像本演讲里所说的这样的精彩。&lt;/p>
&lt;p>而时光已经很快的流转到了将近2018年，他们的DevOps也经过了几年的发展，本文案例向我们展示了一个金融行业（我们往往认为不太容易实施DevOps的行业）企业，在很大的企业规模了，所取得的令人敬佩的成就。&lt;/p>
&lt;p>下面这张图是本文的精华，先给各位呈现出来。他们使用攀登珠穆朗玛峰做为比喻，对DevOps的实施做了生动的诠释。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-climbing-guide.jpg"
loading="lazy"
alt="DevOps登山指南手册"
>&lt;/p>
&lt;p>本图在Nationwide公司内部的使用场景如下：&lt;/p>
&lt;ol>
&lt;li>本图将DevOps实施核心团对指导产品开发团队（也可以说是业务团队、服务团队、这样的团队他们有200多个）取得的经验总结在一张纸上，供其它有实施DevOps想法的团队参考。&lt;/li>
&lt;li>该登山指南简化了对其它非DevOps团队的教育和指引。&lt;/li>
&lt;li>他们将DevOps的实施分成三个阶段，分别用大本营、北坡营地和顶峰作比喻。&lt;/li>
&lt;li>这三个阶段里的技术实践都来自于DevOps Handbook，通过他们的筛选和整理，并根据自己的经验做了分阶段的规划。&lt;/li>
&lt;/ol>
&lt;p>为了知其所以然，我们将继续向下发掘，详细了解这个案例分享所讲的主要内容。下面的内容也包含了我对他们的分析和评论，欲了解原始资料，请请参看我上传到腾讯的视频。&lt;/p>
&lt;hr>
&lt;h2 id="主题devops-handbook-在加速交付中的各种实验">主题：DevOps Handbook-在加速交付中的各种实验&lt;/h2>
&lt;p>分享者介绍。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-001.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>这个演讲距2018年2月也就是三个月，还算是很新鲜的一个案例。Cindy是DevOps团队中的核心人员之一，她的头衔是Director，角色是夏尔巴人（后面会详细解释这个比喻的含义），为业务产品组提供内部的DevOps咨询和辅导。Jim属于业务条线/BU的Dev这一侧，他是业务部门的解决方案架构师。&lt;/p>
&lt;h2 id="nationwide的核心价值保护对你最有价值的">Nationwide的核心价值：保护对你最有价值的&lt;/h2>
&lt;p>公司简介和状况。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-002.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>在很多险种上Nationwide都在业内排名第一名，包括：宠物保险、农场保险、公司寿险等等。&lt;/li>
&lt;li>这是一家有90年历史的老店&lt;/li>
&lt;li>汽车保险也行业排名第八（后面就是用这个业务为例，来佐证DevOps实施的效果）&lt;/li>
&lt;li>不光在财富500强企业排名68，还是财富所评选的前100个最佳的工作企业。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="nationwide-it的规模很大">Nationwide IT的规模很大&lt;/h2>
&lt;p>IT组织的特点和相关数据。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-003.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>IT组织庞大，结构复杂，业务条线众多&lt;/li>
&lt;li>在选择应用某个DevOps实践的时候，总是要考虑到规模因素，需要评估该实践是否能在200多个业务开发团队的规模上全面地推广和实施&lt;/li>
&lt;li>IT人员总数超过5100人，其中程序员和测试人员的数量超过2600人；在电脑世界的IT最佳工作地点的排行帮上位居第51名&lt;/li>
&lt;li>该公司有用200多个产品开发团队，他们服务于23个业务部门BU&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="nationwide-it的组织结构">Nationwide IT的组织结构&lt;/h2>
&lt;p>典型、复杂和庞大的组织结构&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-004.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>I&amp;amp;O是基础架构和操作运维团队，该组织不仅运维了所有的IT服务，还服务于所有的业务开发团队。&lt;/li>
&lt;li>多个共享服务团队提供企业级的共享服务，包括Scrum测试等传统开发服务，同时也为企业内部的DevOps实践提供技术咨询，他们支持所有类型的企业应用堆栈&lt;/li>
&lt;li>业务部门如前所述有23个，有200多个开发团队，Jim服务于金融业务BU&lt;/li>
&lt;li>该公司的架构模型近似于典型的Dev、QA和Ops架构；他们的Ops组织也是集中式的；如此复杂的架构带来了DevOps流水线的复杂度方面的挑战，为某个业务BU实施的持续交付流水线会横跨多个BU，有时候甚至需要三个BU的CIO级别领导一起来参与决策，这里也会出现项目投资方和项目决策方不统一的难题。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="从哪里开始">从哪里开始&lt;/h2>
&lt;p>应用DevOps的企业环境背景和定位。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-005.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>IT组织十年以来追求的战略目标：构建具有全球竞争力的内包式软件开发能力；为此而采用了不同的管理框架和实践，应用和开始的时间点也不同
&lt;ul>
&lt;li>Agile：敏捷软件开发是10年前就开始的，定位和目标是通过敏捷软件开发交付高质量的软件&lt;/li>
&lt;li>DevOps：今年加入了DevOps实践，定位是如何实现速度、效率和降低风险。&lt;/li>
&lt;li>Lean IT：定位是确保将IT管理的各种实践（包括以上的敏捷和DevOps）提升和推广到企业级规模。（他们认为在团队级别上任何敏捷和DevOps相关的实践都是很容易实现的，而企业级规模的推广是更高等级的管理，是不容易达到的）&lt;/li>
&lt;li>CMMI：使用行业规范的软件开发成熟度标准评价和考量自身的软件开发能力，为自身的不断提高提供标准参考。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>该公司DevOps实践是最晚开始应用的，其它的三个方面使用的历史比较长了，为了达成一个战略目标，需要4个战术层面实践的支持，这些战术的采用时期和定位不同；4个战术从不同的侧面支持了战略目标的实现。该企业也在Lean IT的论坛上分享和演讲过。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="从哪里开始续">从哪里开始（续）&lt;/h2>
&lt;p>应用DevOps的时间轨迹和历程，各个时期的关键词。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-006.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>2015-简化：DevOps小屋是入手DevOps实践时，最早使用过的参考框架；他们分析梳理了所有相关的方法论；工具方面专注在部署工具的改进上，所有产品线采用了IBM UrbanCode作为统一的部署工具；可是这个阶段接触的实践还是比较庞杂。&lt;/li>
&lt;li>2016-组织：在获得了高层领导的支持以后，他们同时在三个方向出击：软件开发模型、精益IT管理和供应链管理；在三个方面都直接提高和优化了DevOps的速度。&lt;/li>
&lt;li>2017-实验：在取得了天时地利人和之后，他们展开了所谓的“双模实验”的实践道路；从业务需求入手（规划了使用了MMP最小化可市场产品的概念），逐渐抛开了纷繁复杂的实践和方法论，他们开始聚焦在了“程序员体验”上，通过各种实验验证DevOps Handbook中描述的实践是如何影响并提升他们的。孵化和实验各种DevOps Handbook书里的实践。&lt;/li>
&lt;li>2018-促动：如何把相关的工具推广到200多个开发团队，如何引入Google的SRE模型，将交付流水线作为产品对待，在复杂的组织中，实施跨部门的流水线的挑战依旧不轻。&lt;/li>
&lt;li>该公司的DevOps实践道路是一步一个台阶的持续改进过程，经历了三年多时间，每个阶段的关键词代表了他们的成果和挑战。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops团队间的交互模型">DevOps团队间的交互模型&lt;/h2>
&lt;p>【重点】团队组织结构和交互方式。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-007.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>这是实验各种DevOps实践的团队组织模型，开展每项DevOps实践都遵循PDCA的持续改进方法。&lt;/li>
&lt;li>所有团队遵循着三个基础原则：1速度，江湖武功唯快不破，这是他们清醒而简单的唯一追求目标，成为检验所有优化改进的唯一验收标准和条件。2实践者之成功，他们做的并不是自顶向下的、政令式的强推，而是让参与DevOps实践的团队自己提出工作想法，自己来决定在哪里尝试改进能提升速度。3范围，从端到端的价值流全局看，既不推崇极左的做法，也不推崇极右的做法，他们将范围限定在，从一张工作卡片进入DevOps产品代办工作（Backlog）开始，直至将它的成果发布到生产环境中。&lt;/li>
&lt;li>实施“双模实验”团队的模型，两个团队都提出自己想做的实验想法，双方的工作内容都汇总到一个集中的DevOps产品代办工作队列中，每一项工作/卡片都是一项实验，每一项实验都由两个团队分别完成，A/B团队的做法和实现结果可能不同，这样也自然地应用到了A/B测试的模型。&lt;/li>
&lt;li>DevOps Leadership Team团队里是Cindy和Jim所在的团队（应该是一个虚拟团队组织），他们确保所有代办工作都遵循以上的三个基础原则，另外使用系统性思考来确保每种实验如果取得了成功，在推敲是否它能推广并应用到其它的200多个开发团队。&lt;/li>
&lt;li>DevOps平台团队辅助和优化双模实验团队的工作，例如双模团队可能都需要自动化变更流程（ITSM的管理范畴）的API，而这些工作就可以踢给平台团队做，平台团队负责设计实现这个API，并且保证它具有企业级规模的能力，然后交付双模团队使用即可。&lt;/li>
&lt;li>治理团队是由该公司的各个CIO级别的利益干系人组成的，上文说过某些复杂的DevOps持续交付流水线会跨三个以上的部门，这些BU的大佬会在这个团队中；他们在每个迭代都会出现在双模团队的工作现场，一起现场查看状况，现场解决问题。Jim认为他们亲自临场观察和了解实验工作的效果，远远比将实验成果作出PPT后再给他们去汇报的效果要好。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="epic史诗">EPIC史诗&lt;/h2>
&lt;p>【重点】DevOps团队根据Handbook为基础，提出了所有想实验的工作内容。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-008.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>开发团队从寻找什么拖慢了速度出发，寻找优化和改进工作内容的方法，在渐梳理和过滤以后，发现最后确定要做的工作都可以在Handbook中得到确认。甚至有些人在讨论某个工作条目的时候，能清晰的告诉大家可以参考Handbook书中的章节和页数。&lt;/li>
&lt;li>DevOps产品代办工作里的EPIC史诗工作必须是在Handbook书中能够出现和参考到的，如果不是的话，团队可能会对它表示质疑。&lt;/li>
&lt;li>这里Cindy简述了自动化测试这项工作的实验，故事是这样的：开发团队自己描述到，当前的Test Bed已经大到不可管理的程度，测试运行的时间太长了，因此不能保持测试的精简和有效性，这样的情况持续了一段时间以后，大家就失去了对自动化测试的信心。而且由于开发和测试人员不在同一个组织/团队里，团队之间必须进行工作交接（部门墙），导致了大量复测试案例的存在。他们的解决方法是，让开发和测试人员结对子，这样就减少了重复测试。当测试套件又变得精简和绿色了以后，大家又开始相信这些自动化测试了，之后大家对自动化测试的文化转变为：将自动化测试案例失败视为零容忍事件（失败的测试会导致全team的人停下来，并在1天内解决）。另外一个故事关于性能测试，性能测试是通过一个位于俄亥俄州的集中式性能测试团队做的，任何开发团队的申请时间是90天（被识别为最长时间的约束点），他们认为这个前置时间是无法接受的。解决方法是，将性测试脚本和运行权限交还给了开发团队，最后90天的性能周期被缩短为了2小时。&lt;/li>
&lt;li>DevOps团队和管理层对Handbook书里的实践内容达成了共识和一致，上下一致的参考书中这些业界已经验证过的实践，节省了决策和探索DevOps做法和套路的时间。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="开发者程序员体验十八般神兵利器大量的上下文切换">开发者/程序员体验：十八般神兵利器，大量的上下文切换&lt;/h2>
&lt;p>【重点】2017年的实践核心是“开发者/程序员体验”（程序员要“富养”）&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-009.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>在专注于开发者体验优化的过程中，应用了大量DevOps工具，最后发现如果开发者把它们都用一遍的话，要花好几个小时的时间。为了解决这个问题，他们体验了Rocket.Chat工具，开发者们对此工具提出了一致好评。&lt;/p>
&lt;p>为了让公司领导层支持增加这个工具，他们请领导们到现场亲自视察观看开发人员在使用了Rocket.Chat之后，优化的体验。领导们就这样决策增加的这个工具。&lt;/p>
&lt;hr>
&lt;h2 id="开发者程序员体验拥抱聊天机器人减少上下文切换">开发者/程序员体验：拥抱聊天机器人，减少上下文切换&lt;/h2>
&lt;p>优化后的开发者工具集如下所示。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-010.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>开发者直接面对的工具精简了很多，他们几乎只需要专注于写代码和处理代码的提交和PR即可。&lt;/li>
&lt;li>之前开发者如果需要部署代码，就需要手工的在UrbanCode里点击十几二十次鼠标，才能完成一次部署操作。&lt;/li>
&lt;li>在使用了聊天机器人之后，他们只需要对聊天机器人说：deploy；即可&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops登山指南">DevOps登山指南&lt;/h2>
&lt;p>通过这一页纸的手册，为新来的DevOps实践者提供了清晰的指导。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-011.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>攀登高山隐喻了这是一个艰难的旅程。&lt;/p>
&lt;hr>
&lt;h2 id="北极星---前置时间">北极星 - 前置时间&lt;/h2>
&lt;p>【重点】各项DevOps工作的唯一参考指标是“前置时间”（指南针）&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-012.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>选用这个指标的三个原因：&lt;/p>
&lt;ul>
&lt;li>这个指标可以在横向的200多个敏捷开发团队里实施；在纵向的组织级、部门级和团队级上，大家都能理解和认可这一指标，都能够掌握前置时间的计算和测量方法。缩短前置时间的目标是清晰的：及时要加快交付速度。&lt;/li>
&lt;li>各个开发团队可以自行选择优化前置时间的方法和路径，其实这鼓励了团队的创造性。&lt;/li>
&lt;li>对此指标的度量和持续改进，是可以按天实时进行的，同时还要保证实现部署的零宕机时间。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops登山用品地图和装备">DevOps登山用品：地图和装备&lt;/h2>
&lt;p>DevOps实践者基础的精神和物质需求。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-013.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;ul>
&lt;li>工具和DevOps实践直接相关&lt;/li>
&lt;li>每个工具都有其价值和应用场景（例如Rocket.Chat）&lt;/li>
&lt;li>DevOps Handbook（中文书名：DevOp实践指南）的作用是地图，每个DevOps实践团队都进行至少每周一次的读书俱乐部活动，每次都对书中具体的章节进行团队讨论和学习。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops的支持模型">DevOps的支持模型&lt;/h2>
&lt;p>DevOps支持团队的作用。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-014.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>为了满足企业级的支持规模，让水平参差不齐的200多个开发团队都能顺利应用DevOps实践，没有这个支持模型是不可能走远的。&lt;/p>
&lt;ul>
&lt;li>夏尔巴人团队的作用是支持和辅导DevOps实践团队，提升团队的思想意识观念和技能，帮助它们构建某些特定领域的工作能力。&lt;/li>
&lt;li>参与DevOps实践的开发团队必须自己登上山顶，哪怕是爬也是自己爬上去。绝不勉强，不想进步的团队就不要参与了。&lt;/li>
&lt;li>逐渐开展了沉浸式配对的支持模式，让低水平团队的人员在DevOps高水平团队中进行交叉培训，让他们现场看到相同的工作确实可以有不同的、更好的做法。&lt;/li>
&lt;li>他们进行每月一次的DevOps道场，在道场里DevOps技术顾问现场指导和帮助前来提高的团队。&lt;/li>
&lt;li>将流水线视为产品，流水线的管理确实也是他们的痛点之一。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="devops成功的那一刻">DevOps成功的那一刻&lt;/h2>
&lt;p>DevOps对业务有毛用？！&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/Grafmeyer_Jim_Payne_Cindy_DevOps_Handbook_Experiments_in_Accelerating_Delivery-page-015.jpg"
loading="lazy"
alt="Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery"
>&lt;/p>
&lt;p>这个故事是该公司刚开始品尝DevOps成功硕果的那一刻。飓风哈维（是2017年大西洋飓风季中的一个热带气旋。2017年8月25日，登陆美国德克萨斯州沿岸，时速130英里）导致车辆涉水险的申报数量剧增。业务部门的人处理这些车险事件的过程中意识到，他们的业务流程对这个险种的索赔并不友好，于是就来找到了IT部门，提出想要优化这个险种报案和索赔处理。&lt;/p>
&lt;p>这是第一次业务部门找上门来提出的业务需求，IT部门在当天就搞定的经历。业务人员和IT部门的人用了一个小时的时间讨论优化方案，决定去掉索赔流程里40%的多余步骤。IT部门开始设计和实施这个想法，决定需要变更多个应用，他们在当天里，在剩下的7个小时内就完成了这些业务需求的开发和测试，这些业务变更的生产环境部署工作是在工作时段进行的，变更在当天的营业时间结束前就上线了。他们始终以速度为先的实践原则在一年后，在这一天里得到了回报。以前需要至少90天的周期才能完成这样的变更，性能测试会就会占用一半以上的前置时间。而他们觉得这次在整个的设计、实施和部署过程中，其实并没有感到什么压力和风险。&lt;/p>
&lt;hr>
&lt;h2 id="后记">后记&lt;/h2>
&lt;p>本文的价值在于，向你展示一个有参考价值的DevOps案例。它的很多特征和成功之处都值得借鉴和思考。本文的文字主要来源于对视频中的叙述，其中也包含了大量我个人的观点和分析；&lt;a class="link" href="https://v.qq.com/x/page/v0555haemus.html" target="_blank" rel="noopener"
>欢迎读者在观看本案例视频后&lt;/a>，与我分享和讨论以上内容。&lt;/p></description></item><item><title>2017年底的回顾和展望</title><link>https://martinliu.cn/blog/2017%E5%B9%B4%E5%BA%95%E7%9A%84%E5%9B%9E%E9%A1%BE%E5%92%8C%E5%B1%95%E6%9C%9B/</link><pubDate>Mon, 12 Feb 2018 13:04:30 +0800</pubDate><guid>https://martinliu.cn/blog/2017%E5%B9%B4%E5%BA%95%E7%9A%84%E5%9B%9E%E9%A1%BE%E5%92%8C%E5%B1%95%E6%9C%9B/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/q_auto:eco/HongKongEye_ZH-CN12285832688_1920x1080.jpg" alt="Featured image of post 2017年底的回顾和展望" />&lt;p>农历年才是中国人意识里的年，狗年不到来，鸡年绝对还没有过完。在这几天里总有一些想要总结和展望的。一年的时间过的犹如白骥过隙一般，愈来愈加明显的感觉到各种岁月的痕迹。此刻所想到的一切只有缓慢和宁静，能否让这个世界缓慢和宁静下来。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1518534384/chinese-new-year_h.jpg"
loading="lazy"
alt="莲年有余"
>&lt;/p>
&lt;h2 id="盘点">盘点&lt;/h2>
&lt;p>想想去年这一年都做了什么事？都去过哪些地方？有哪些值得回忆的经历？&lt;/p>
&lt;h3 id="旅行">旅行&lt;/h3>
&lt;p>回顾一下才发现这一年去过不少地方，很多地方是第一次去。&lt;/p>
&lt;h4 id="1-日本春节">1-日本（春节）&lt;/h4>
&lt;p>去年的第一个旅行是在过年期间去日本的东京大阪之旅。首次去日本的总体感觉还是不错的，住的是Airbnb的家庭房间，位置和环境都非常好。游玩了福建狐狸大社、在奈良的东大寺喂小鹿、游玩了大阪的迪士尼，日本好玩好逛的地方真多。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/IMG_3489.jpg"
loading="lazy"
alt="鸭川跑步"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/shaorou.jpg"
loading="lazy"
alt="大阪的烧肉小店"
>&lt;/p>
&lt;p>不过印象最深的还是两件事：1）京都的鸭川河边跑步十公里；2）在大阪的烧肉店和朋友一起和热清酒。&lt;/p>
&lt;h3 id="2-吉隆坡三月">2-吉隆坡（三月）&lt;/h3>
&lt;p>这次是出差，公司在吉隆坡开会，顺便带了小孩一起去玩，赶在上小学之前能玩的机会不能放过。在这一周的行程里，不仅游览了市区主要的地方，还去珍拉丁湾的CloudMed故地重游了一下。&lt;/p>
&lt;h3 id="3-普吉岛的泼水节四月">3-普吉岛的泼水节（四月）&lt;/h3>
&lt;p>去普吉岛开会期间，碰巧赶上了泼水节。除了一头一尾的两天休闲时光之外，其它的三天会议时间，非常消耗精力和体力；完全是三天的黑客马拉松式的比赛式培训。代表中国团队上台做了项目汇报演讲，虽然有些超时，虽然没有拿到第一名，不过整个竞赛的体验还是很不错的。&lt;/p>
&lt;h3 id="4-拉斯维加斯和大峡谷之旅八月">4-拉斯维加斯和大峡谷之旅（八月）&lt;/h3>
&lt;p>这是出差去美国参加公司的年度启动大会。这是一次极致的旅行，在拉斯维加斯的几天会议过程中，和同事一起各种的购物和游览，给我的赌场之旅画上了圆满的句号。而精彩的部分在开完会之后，和同事们一起去大峡谷的游览。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/grand-canyon-np.jpg"
loading="lazy"
alt="大峡谷"
>&lt;/p>
&lt;p>我们住在大峡谷南缘的威廉姆斯小镇上，来过的人应该都知道这个小镇，对大峡谷南缘的主要景区进行了两进两出的深度游览。希望下次来的时候，可以从东部的羚羊峡谷北上，再次访问我的第一个美国旅行目的地：盐湖城（2006年）。&lt;/p>
&lt;h3 id="5-台北深度一周游8月">5-台北深度一周游（8月）&lt;/h3>
&lt;p>从美帝回来之后，接着去台北参加了DevOpsDays台北站的大会。趁着开会之余的时间和随行的朋友们一起游览了台北市和附近的不少地方。第一次去宝岛台湾，第一次在国外的城市参加DevOpsDays大会；参加这次大会有两项任务：1）作为国内专家团的邀请人，邀请了多位业内的DevOps大拿同去台北演讲；2）我的专题演讲是在第二天；真是圆满的一次旅行。台北的101大厦、故宫和诚品书店给我留下了深刻的印象。&lt;/p>
&lt;h3 id="devops">DevOps&lt;/h3>
&lt;p>这一年中除了工作之外，我主要的研究方向是在DevOps上。参加了两次DevOpsDays大会，完成了DevOps Handbook的翻译。&lt;/p>
&lt;h3 id="1-devopsdays北京">1-DevOpsDays北京&lt;/h3>
&lt;p>大会在三月十八日召开，这是在我拿到Exin DevOps Master自由讲师资质以后，所参加的最重要的一个DevOps大会。我也是很积极的参与在这次大会活动里，主持了OpenSpack开放空间环节。这个大会是DevOps社区比较正宗和原生的社区大会，我也是第一次见到了DevOps之父Patric先生。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/patric-and-me.jpg"
loading="lazy"
alt="与Patric合影"
>&lt;/p>
&lt;p>在这两天的大会活动中，我们都可以感觉到DevOps社区的火热，由于是DevOpsDays大会的首次来华；它的象征性更大于其它的任何意义。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/v1518416343/openspace.jpg"
loading="lazy"
alt="我主持OpenSpace"
>&lt;/p>
&lt;p>通过这次参与首届DevOpsDays大会活动，我感觉找到从技术和社区这两个方面而言，找到了和我匹配最佳的社区。我的工作经历是ITIL相关的IT管理背景的，技术方面接从事最多的是IT管理工具和云计算；而我也是开源技术社区的超级粉丝。&lt;/p>
&lt;h3 id="2-翻译-devops-handbook">2-翻译 DevOps Handbook&lt;/h3>
&lt;p>这是2017年内我投入巨大的一项工作，从来没有想到工作量是如此的惊人，即使是和其它三个朋友一起做；最后回顾一下，觉得工作量还是远远超出了我的想想。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/ituring.jpeg"
loading="lazy"
alt="278小时44分钟"
>&lt;/p>
&lt;p>出版社的线上书稿编辑系统里，有大部分工作时间的统计，经过了不计其数的起早贪黑以后，我的线上系统内工作时间定格在了：278小时44分钟；这份工作让我记忆犹新的是：周末送孩子去上课以后，我在星巴克度过的n多个上午；在交稿前的最后几次令人抓狂的集中修订。出版社审稿通过，编辑开始编辑审稿之后，看着三审作完之后的结果还是觉得分外激动的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/handbook-trello.jpeg"
loading="lazy"
alt="Kanban in trello"
>&lt;/p>
&lt;p>这本书的中文书名为《DevOps实践指南》，为这本书我建立了一个独立的推广站点：&lt;a class="link" href="https://handbook.martinliu.cn/" target="_blank" rel="noopener"
>https://handbook.martinliu.cn/&lt;/a>，站点里的术语表非常欢迎大家的引用和协作修订。&lt;/p>
&lt;h3 id="3-devops培训课">3-DevOps培训课&lt;/h3>
&lt;p>由于这一年中我几乎所有的业余时间和精力都花在Handbook的翻译上，因此接的课很少，甚至于还推掉了不少的课；在翻译完成之后，应该有时间在周末做这方面的培训了。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/devops-training.jpeg"
loading="lazy"
alt="Kanban in trello"
>&lt;/p>
&lt;p>培训课对我而言是我进行社区分享的一种形式，觉得很多知识和经验的体会，如果不通过什么渠道分享出来的话，始终会就觉得不尽兴，觉得白学了这些知识。也有可能是开源社区 &lt;em>开放和分享&lt;/em> 的毒中的太深了，哈哈！&lt;/p>
&lt;h2 id="展望">展望&lt;/h2>
&lt;p>虽然在感觉上2017年一晃就过去了，但是盘点之后发现，过得还是极度的充实和饱满的。觉得我的付出和辛苦还是很值得。&lt;/p>
&lt;p>在元旦之后我就确定了今年的总基调：停止开始，开始完成，继往开来，全面开挂。&lt;/p>
&lt;p>我在DevOps方面的经验完全能够利用到公司的产品和工作中，这一点实在是可遇而不可求的。随着公司对Nutanix Calm的重视，基于蓝图的应用全生命周期自动化运维，正渐渐的成为很多项目的需求。为此我也建了一个文档分享站点：&lt;a class="link" href="https://nutanix.martinliu.cn/" target="_blank" rel="noopener"
>https://nutanix.martinliu.cn/&lt;/a>；希望在新的一年里继续丰富和优化这些文档。在客户项目和合作伙伴培训的过程中能和更多人碰出DevOps火花。&lt;/p>
&lt;p>在旅行方面，18年可能会去欧洲，还没具体的计划。&lt;/p>
&lt;p>在新领域探索方面，18年已经开始了对区块链的了解和参与。&lt;/p>
&lt;p>在18年里作为&lt;a class="link" href="http://chinadevopsdays.org/organizing/" target="_blank" rel="noopener"
>中国DevOpsDays大会的核心组织者&lt;/a>，希望在5月北京站的大会上，和Handbook的作者一起发布中文版Handbook图书，并在DevOps社区里做更多的分享和贡献。&lt;/p></description></item><item><title>Container Orchestration Wars</title><link>https://martinliu.cn/blog/container-orchestration-wars/</link><pubDate>Fri, 12 Jan 2018 23:33:32 +0800</pubDate><guid>https://martinliu.cn/blog/container-orchestration-wars/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-11.jpg" alt="Featured image of post Container Orchestration Wars" />&lt;h1 id="容器编排器之战">容器编排器之战&lt;/h1>
&lt;p>K8s在2017年底为这场速战速决的站点话上了句号，结果是所有竞争对手都选择了增加对K8s的支持。在各自的编排器框架里内置了K8s。本文是根据Mesosphere公司的大拿Karl KARL ISENBERG在各种大会上分享过多次的一份演讲稿改版的。&lt;/p>
&lt;h2 id="karl-isenberg-是谁">KARL ISENBERG 是谁？&lt;/h2>
&lt;p>所在公司?&lt;/p>
&lt;ul>
&lt;li>Mesosphere（当前）&lt;/li>
&lt;li>Pivotal&lt;/li>
&lt;/ul>
&lt;p>做过的产品?&lt;/p>
&lt;ul>
&lt;li>DC/OS&lt;/li>
&lt;li>opensource&lt;/li>
&lt;li>CloudFoundry&lt;/li>
&lt;li>BOSH&lt;/li>
&lt;/ul>
&lt;p>联络信息：&lt;/p>
&lt;ul>
&lt;li>github.com/karlkfi&lt;/li>
&lt;li>twitter.com/karlkfi&lt;/li>
&lt;li>linkedin.com/in/karlkfi&lt;/li>
&lt;li>karl.isenberg.us&lt;/li>
&lt;/ul>
&lt;h2 id="基础架构的进化">基础架构的进化&lt;/h2>
&lt;p>传统的应用架构在逐渐向下面两种架构演变。&lt;/p>
&lt;h3 id="可扩展的单体应用架构">可扩展的单体应用架构&lt;/h3>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-12%20at%2011.42.23%20PM.png"
loading="lazy"
alt="Screen Shot 2018-01-12 at 11.42.23 P"
>&lt;/p>
&lt;p>关键词：&lt;/p>
&lt;ul>
&lt;li>Online 基于互联网&lt;/li>
&lt;li>Latency Routed 用户访问基于延迟路由&lt;/li>
&lt;li>Multi-Region 多区部署&lt;/li>
&lt;li>Load Balanced 负载均衡接入&lt;/li>
&lt;li>Multi-Zone 多个Zone&lt;/li>
&lt;li>Replicated 应用实例多副本&lt;/li>
&lt;li>Auto-Scaled 容量自动化收缩&lt;/li>
&lt;li>Data Replication 区内数据多副本&lt;/li>
&lt;li>Data Synchronization 跨区数据同步&lt;/li>
&lt;/ul>
&lt;h3 id="可扩展的微服务架构">可扩展的微服务架构&lt;/h3>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-12%20at%2011.50.47%20PM.png"
loading="lazy"
alt="Screen Shot 2018-01-12 at 11.50.47 P"
>&lt;/p>
&lt;p>上图出处：Wheel of Doom ，来自&lt;a class="link" href="https://sudo.hailoapp.com/services/2015/03/09/journey-into-a-microservice-world-part-3/" target="_blank" rel="noopener"
> A Journey into Microservices by Hailo&lt;/a>&lt;/p>
&lt;h3 id="应用裸金属服务器">应用+裸金属服务器&lt;/h3>
&lt;p>APPLICATION
PROVISIONING
ON
BARE METAL&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-12%20at%2011.54.26%20PM.png"
loading="lazy"
alt="Screen Shot 2018-01-12 at 11.54.26 P"
>&lt;/p>
&lt;h3 id="应用iaas">应用+IaaS&lt;/h3>
&lt;p>APPLICATION
PROVISIONING
ON
VIRTUAL INFRASTRUCTURE
PLATFORM
(IaaS)&lt;/p>
&lt;blockquote>
&lt;p>“Ultimately, utility cloud providers have
exposed how difficult it is to properly operate
data centers — and reminded all of us that the
ability to expertly operate infrastructure is
what really fuels the consumption of open
source infrastructure.”
&amp;ndash;Brian Stein (Rackspace VP - 2017)&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/images/Screen%20Shot%202018-01-12%20at%2011.58.36%20PM.png"
loading="lazy"
alt="Screen Shot 2018-01-12 at 11.58.36 P"
>&lt;/p>
&lt;h3 id="应用paasapaasiaas">应用+PaaS/aPaaS+IaaS&lt;/h3>
&lt;p>APPLICATION
PLATFORM
(PaaS / aPaaS)
ON
INFRASTRUCTURE
PLATFORM
(IaaS)&lt;/p>
&lt;blockquote>
&lt;p>“The goal of Cloud Foundry is to put more of the
controls back in the hands of developers so they can
self-provision, so there aren’t a lot of roadblocks in their way. But it gives a lot of guardrails.”
&amp;ndash; Chip Childers (Cloud Foundry Foundation CTO - 2017)
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%2012.03.37%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 12.03.37 A"
>&lt;/p>
&lt;/blockquote>
&lt;h3 id="容器编排器iaas">容器编排器+IaaS&lt;/h3>
&lt;p>CONTAINER
ORCHESTRATION
ON
INFRASTRUCTURE
PLATFORM
(IaaS)&lt;/p>
&lt;blockquote>
&lt;p>“&amp;hellip;traditional “PaaS” roles have now been
taken over by containers… The piece that is
left for PaaS is the part that was always the
most important part of PaaS in the first place,
and that’s the opinionated developer
experience.”
&amp;ndash;Brendan Burns (Kubernetes Cofounder - 2017)&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%2012.08.37%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 12.08.37 A"
>&lt;/p>
&lt;h3 id="caasiaas">CaaS+IaaS&lt;/h3>
&lt;p>CONTAINER
PLATFORM
(CaaS)
ON
INFRASTRUCTURE
PLATFORM
(IaaS)
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%2012.10.28%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 12.10.28 A"
>&lt;/p>
&lt;h3 id="caas裸金属服务器">CaaS+裸金属服务器&lt;/h3>
&lt;p>CONTAINER
PLATFORM
(CaaS)
ON
BARE METAL&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%2012.11.42%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 12.11.42 A"
>&lt;/p>
&lt;h3 id="faasiaas">FaaS+IaaS&lt;/h3>
&lt;p>FUNCTION
PLATFORM
(FaaS)
ON
INFRASTRUCTURE
PLATFORM
(IaaS)&lt;/p>
&lt;blockquote>
&lt;p>“If your PaaS can efficiently start instances in 20ms that run for half a second, then call it serverless.”
&amp;ndash;Adrian Cockcroft-(AWS VP - 2016)&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%2012.13.46%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 12.13.46 A"
>&lt;/p>
&lt;h3 id="faascaas">FaaS+CaaS&lt;/h3>
&lt;p>FUNCTION
PLATFORM
(FaaS)
ON
CONTAINER
PLATFORM
(CaaS)
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.43.06%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.43.06 A"
>&lt;/p>
&lt;h3 id="faascaasiaas">FaaS+CaaS+IaaS&lt;/h3>
&lt;p>FUNCTION PLATFORM
(FaaS)
ON
CONTAINER PLATFORM
(CaaS)
ON
INFRASTRUCTURE PLATFORM
(IaaS)&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.44.49%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.44.49 A"
>&lt;/p>
&lt;h2 id="平台频谱---platform-spectrum">平台频谱 - PLATFORM SPECTRUM&lt;/h2>
&lt;p>从左到右，资源的抽象程度不断提高；最左侧的弹性最高，最右侧的速率最高。
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.47.36%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.47.36 A"
>&lt;/p>
&lt;p>下图是不同类型里的厂商和软件。
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.48.19%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.48.19 A"
>&lt;/p>
&lt;h2 id="容器平台层次">容器平台层次&lt;/h2>
&lt;p>容器编排器的层次如下：
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.49.36%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.49.36 A"
>&lt;/p>
&lt;ul>
&lt;li>User workloads 用户工作负载&lt;/li>
&lt;li>Distributed container management 分布式容器管理&lt;/li>
&lt;li>Local container management 本地容器管理&lt;/li>
&lt;li>Container agnostic infrastructure 容器无关性基础架构&lt;/li>
&lt;/ul>
&lt;p>容器平台的层次如下：
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.51.23%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.51.23 A"
>&lt;/p>
&lt;p>CONTAINER PLATFORM&lt;/p>
&lt;ul>
&lt;li>User workloads 用户工作负载&lt;/li>
&lt;li>System management &amp;amp; service enablement 系统管理和服务管理&lt;/li>
&lt;li>Distributed container management 分布式容器管理&lt;/li>
&lt;li>Local container management 本地容器管理&lt;/li>
&lt;li>Container aware infrastructure 容器感知的基础架构&lt;/li>
&lt;li>Container agnostic infrastructure 容器无关的基础架构&lt;/li>
&lt;/ul>
&lt;p>分布式操作系统的层次如下：
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.52.52%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.52.52 A"
>&lt;/p>
&lt;h2 id="容器平台功能点">容器平台功能点&lt;/h2>
&lt;p>CONTAINER
PLATFORM
CAPABILITIES&lt;/p>
&lt;h3 id="运行态的能力">运行态的能力&lt;/h3>
&lt;p>1 容器&lt;/p>
&lt;ul>
&lt;li>Resource Isolation&lt;/li>
&lt;li>Resource Constraints&lt;/li>
&lt;li>Process Tree&lt;/li>
&lt;li>Environment Isolation&lt;/li>
&lt;li>Shell / Exec&lt;/li>
&lt;/ul>
&lt;p>2 镜像&lt;/p>
&lt;ul>
&lt;li>Build&lt;/li>
&lt;li>Layers&lt;/li>
&lt;li>Download&lt;/li>
&lt;li>Cache&lt;/li>
&lt;li>Publish&lt;/li>
&lt;li>Prune&lt;/li>
&lt;/ul>
&lt;p>3 网络&lt;/p>
&lt;ul>
&lt;li>Container&lt;/li>
&lt;li>Bridge&lt;/li>
&lt;li>Host&lt;/li>
&lt;li>Virtual&lt;/li>
&lt;li>Overlay&lt;/li>
&lt;li>Remote&lt;/li>
&lt;li>User-defined&lt;/li>
&lt;li>Port Mapping&lt;/li>
&lt;/ul>
&lt;p>4 数据卷&lt;/p>
&lt;ul>
&lt;li>Ephemeral&lt;/li>
&lt;li>Host&lt;/li>
&lt;li>Backup / Restore&lt;/li>
&lt;li>Copy In / Out&lt;/li>
&lt;li>Shared&lt;/li>
&lt;/ul>
&lt;h3 id="编排器的能力">编排器的能力&lt;/h3>
&lt;p>调度&lt;/p>
&lt;ul>
&lt;li>Placement&lt;/li>
&lt;li>Replication/Scaling&lt;/li>
&lt;li>Readiness Checking&lt;/li>
&lt;li>Resurrection&lt;/li>
&lt;li>Rescheduling&lt;/li>
&lt;li>Rolling Updates&lt;/li>
&lt;li>Collocation&lt;/li>
&lt;li>Daemons&lt;/li>
&lt;li>Cron Jobs&lt;/li>
&lt;/ul>
&lt;p>资源管理&lt;/p>
&lt;ul>
&lt;li>Memory&lt;/li>
&lt;li>CPU&lt;/li>
&lt;li>GPU&lt;/li>
&lt;li>Ephemeral Volumes&lt;/li>
&lt;li>Remote Persistent Volumes&lt;/li>
&lt;li>Local Persistent Volumes&lt;/li>
&lt;li>Ports&lt;/li>
&lt;li>IPs (per container)&lt;/li>
&lt;/ul>
&lt;p>服务管理&lt;/p>
&lt;ul>
&lt;li>Labels&lt;/li>
&lt;li>Groups/Namespaces&lt;/li>
&lt;li>Dependencies&lt;/li>
&lt;li>Load Balancing (L7)&lt;/li>
&lt;li>VIPs (L3/L4 LB)&lt;/li>
&lt;li>DNS&lt;/li>
&lt;li>DNS Proxy&lt;/li>
&lt;li>Secrets&lt;/li>
&lt;li>Config Mgmt&lt;/li>
&lt;/ul>
&lt;h3 id="运维方面的能力">运维方面的能力&lt;/h3>
&lt;p>管理&lt;/p>
&lt;ul>
&lt;li>GUI&lt;/li>
&lt;li>CLI&lt;/li>
&lt;li>Metrics API&lt;/li>
&lt;li>Logs API&lt;/li>
&lt;li>Events API&lt;/li>
&lt;li>Rolling Upgrades&lt;/li>
&lt;li>Backups &amp;amp; Restores&lt;/li>
&lt;/ul>
&lt;p>MULTI-INFRASTRUCTURE&lt;/p>
&lt;ul>
&lt;li>Multi-cloud&lt;/li>
&lt;li>Multi-zone&lt;/li>
&lt;li>Multi-region&lt;/li>
&lt;li>Hybrid-cloud&lt;/li>
&lt;li>Federation&lt;/li>
&lt;/ul>
&lt;p>系统服务&lt;/p>
&lt;ul>
&lt;li>Auto-Scaling&lt;/li>
&lt;li>Package Management&lt;/li>
&lt;li>Service Catalog&lt;/li>
&lt;li>Service Brokers&lt;/li>
&lt;li>Admin Proxy&lt;/li>
&lt;li>API Gateway&lt;/li>
&lt;/ul>
&lt;h3 id="平台的能力">平台的能力&lt;/h3>
&lt;p>容器网络&lt;/p>
&lt;ul>
&lt;li>Overlay&lt;/li>
&lt;li>Routing&lt;/li>
&lt;li>Network Address Translation (NAT)&lt;/li>
&lt;li>Firewalls&lt;/li>
&lt;li>Access Control Lists&lt;/li>
&lt;li>Quality of Service&lt;/li>
&lt;/ul>
&lt;p>容器存储&lt;/p>
&lt;ul>
&lt;li>Local Volumes&lt;/li>
&lt;li>Remote Volumes&lt;/li>
&lt;li>Block Storage&lt;/li>
&lt;li>File System Storage&lt;/li>
&lt;li>Object Storage&lt;/li>
&lt;/ul>
&lt;p>平台数据库&lt;/p>
&lt;ul>
&lt;li>Lock Service&lt;/li>
&lt;li>Key-Value Database&lt;/li>
&lt;li>Relational Database&lt;/li>
&lt;li>Time Series Database&lt;/li>
&lt;/ul>
&lt;p>安全&lt;/p>
&lt;ul>
&lt;li>User Accounts&lt;/li>
&lt;li>Service Accounts&lt;/li>
&lt;li>System/User Space&lt;/li>
&lt;li>E2E Encryption&lt;/li>
&lt;li>Non-root User Workloads&lt;/li>
&lt;li>Audit Logging&lt;/li>
&lt;li>Public Key Infrastructure&lt;/li>
&lt;li>Certifications&lt;/li>
&lt;/ul>
&lt;p>多租户&lt;/p>
&lt;ul>
&lt;li>User Groups&lt;/li>
&lt;li>Permissions&lt;/li>
&lt;li>RBAC&lt;/li>
&lt;li>ABAC&lt;/li>
&lt;li>Resource Sharing
&lt;ul>
&lt;li>FIFO&lt;/li>
&lt;li>Fair&lt;/li>
&lt;li>Quotas&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Branding&lt;/li>
&lt;li>Quality of Service&lt;/li>
&lt;/ul>
&lt;p>非功能需求&lt;/p>
&lt;p>稳定性&lt;/p>
&lt;ul>
&lt;li>Performance&lt;/li>
&lt;li>Responsiveness&lt;/li>
&lt;li>Efficiency&lt;/li>
&lt;/ul>
&lt;p>可用性&lt;/p>
&lt;ul>
&lt;li>Fault Tolerance&lt;/li>
&lt;li>Robustness,&lt;/li>
&lt;li>Reliability,&lt;/li>
&lt;li>Resilience,&lt;/li>
&lt;li>Disaster Recovery&lt;/li>
&lt;/ul>
&lt;p>灵活性&lt;/p>
&lt;ul>
&lt;li>Format Support,&lt;/li>
&lt;li>Interoperability,&lt;/li>
&lt;li>Extensibility,&lt;/li>
&lt;li>Container Runtimes&lt;/li>
&lt;/ul>
&lt;p>可用度&lt;/p>
&lt;ul>
&lt;li>Familiarity,&lt;/li>
&lt;li>Maintainability,&lt;/li>
&lt;li>Compatibility,&lt;/li>
&lt;li>Debuggability&lt;/li>
&lt;/ul>
&lt;p>可移植性&lt;/p>
&lt;ul>
&lt;li>Host OS,&lt;/li>
&lt;li>Cloud,&lt;/li>
&lt;li>Bare-Metal,&lt;/li>
&lt;li>Hybrid&lt;/li>
&lt;/ul>
&lt;p>安全性&lt;/p>
&lt;ul>
&lt;li>Encryption Quality,&lt;/li>
&lt;li>Vulnerability Process,&lt;/li>
&lt;li>Fast Patching,&lt;/li>
&lt;li>Backporting&lt;/li>
&lt;/ul>
&lt;h2 id="容器平台对比">容器平台对比&lt;/h2>
&lt;p>市场里的主要技术厂商如下。
&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.57.44%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.57.44 A"
>&lt;/p>
&lt;p>其它值得考虑的厂商如下。&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.58.36%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.58.36 A"
>&lt;/p>
&lt;p>下面的能力对比的时间点是 06/2017，这个时候K8s是否能胜出还是个悬念。&lt;/p>
&lt;h3 id="调度">调度&lt;/h3>
&lt;p>图示说明：&lt;/p>
&lt;ul>
&lt;li>绿勾：包含此能力&lt;/li>
&lt;li>横杠：New/External/Partial/Experimental&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%206.59.42%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 6.59.42 A"
>&lt;/p>
&lt;h3 id="资源管理">资源管理&lt;/h3>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%207.00.38%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 7.00.38 A"
>&lt;/p>
&lt;h3 id="服务管理">服务管理&lt;/h3>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/Screen%20Shot%202018-01-13%20at%207.01.16%20AM.png"
loading="lazy"
alt="Screen Shot 2018-01-13 at 7.01.16 A"
>&lt;/p>
&lt;h2 id="如何选择">如何选择&lt;/h2>
&lt;h3 id="第一阵营重量级">第一阵营：重量级&lt;/h3>
&lt;p>KUBERNETES&lt;/p>
&lt;ul>
&lt;li>Huge community&lt;/li>
&lt;li>Solid API&lt;/li>
&lt;li>Some assembly required&lt;/li>
&lt;li>Multitude of vendors/installers&lt;/li>
&lt;/ul>
&lt;p>OPENSHIFT&lt;/p>
&lt;ul>
&lt;li>Application platform based on Kubernetes&lt;/li>
&lt;li>Always trailing Kubernetes releases&lt;/li>
&lt;li>No assembly required&lt;/li>
&lt;li>Open core, enterprise platform&lt;/li>
&lt;/ul>
&lt;p>DC/OS&lt;/p>
&lt;ul>
&lt;li>Runs native applications (non-Docker)&lt;/li>
&lt;li>Specialized in data services&lt;/li>
&lt;li>Ambitious scope (on-prem AWS)&lt;/li>
&lt;li>No assembly required&lt;/li>
&lt;li>Open core, enterprise platform&lt;/li>
&lt;/ul>
&lt;p>DOCKER&lt;/p>
&lt;ul>
&lt;li>Huge community&lt;/li>
&lt;li>Fast moving API&lt;/li>
&lt;li>Integrated orchestration and runtime&lt;/li>
&lt;li>Recent pivot from runtime to orchestration&lt;/li>
&lt;li>Open core, enterprise platform&lt;/li>
&lt;/ul>
&lt;h3 id="第二阵营轻量级">第二阵营：轻量级&lt;/h3>
&lt;p>EC2 CONTAINER SERVICE (ECS)&lt;/p>
&lt;ul>
&lt;li>Hosted-only solution&lt;/li>
&lt;li>Tight integration with AWS services&lt;/li>
&lt;li>Closed platform&lt;/li>
&lt;/ul>
&lt;p>RANCHER CATTLE&lt;/p>
&lt;ul>
&lt;li>Gateway to Kubernetes, Mesos, and Docker&lt;/li>
&lt;li>Open platform, enterprise support&lt;/li>
&lt;/ul>
&lt;p>NOMAD&lt;/p>
&lt;ul>
&lt;li>Provisioner with orchestration features&lt;/li>
&lt;li>Runs native applications (non-Docker)&lt;/li>
&lt;li>Tight integration with Vault and Consul&lt;/li>
&lt;li>Some assembly required&lt;/li>
&lt;li>Open platform, enterprise support&lt;/li>
&lt;/ul>
&lt;p>KONTENA&lt;/p>
&lt;ul>
&lt;li>Simple to set up&lt;/li>
&lt;li>No assembly required&lt;/li>
&lt;li>Open core, enterprise platform&lt;/li>
&lt;/ul>
&lt;h3 id="karl个人的考察点">Karl个人的考察点？&lt;/h3>
&lt;ul>
&lt;li>Which is more important to you: &lt;strong>velocity or flexibility&lt;/strong>?&lt;/li>
&lt;li>Do you want an &lt;strong>opinionated&lt;/strong> application platform?&lt;/li>
&lt;li>Do you need to support &lt;strong>Big Data&lt;/strong> initiatives and pipelines?&lt;/li>
&lt;li>Do you want a &lt;strong>hosted&lt;/strong> solution?&lt;/li>
&lt;li>Are you willing to &lt;strong>build out your own integrations&lt;/strong>?&lt;/li>
&lt;li>Do you need &lt;strong>on-prem &amp;amp; hybrid&lt;/strong> capabilities?&lt;/li>
&lt;li>Do you want to avoid infrastructure &lt;strong>lock-in&lt;/strong>?&lt;/li>
&lt;li>Are you already invested in a specific infrastructure?&lt;/li>
&lt;li>Are you already invested in a specific operating system?&lt;/li>
&lt;li>Do you need **federation and multi-region **support?&lt;/li>
&lt;li>Do you want &lt;strong>multi-tenancy&lt;/strong> or is multi-instance good enough?&lt;/li>
&lt;li>How important are seamless automated &lt;strong>rolling upgrades&lt;/strong>?&lt;/li>
&lt;li>&lt;strong>How many nines&lt;/strong> do your customers need?&lt;/li>
&lt;li>How important is reverse compatibility &amp;amp; API &lt;strong>stability&lt;/strong>?&lt;/li>
&lt;li>Do you need to support &lt;strong>non-Docker workloads&lt;/strong>?&lt;/li>
&lt;/ul></description></item><item><title>将笔记本上的Hugo站点分享给局域网里的其他人</title><link>https://martinliu.cn/blog/%E5%B0%86%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E7%9A%84hugo%E7%AB%99%E7%82%B9%E5%88%86%E4%BA%AB%E7%BB%99%E5%B1%80%E5%9F%9F%E7%BD%91%E9%87%8C%E7%9A%84%E5%85%B6%E4%BB%96%E4%BA%BA/</link><pubDate>Thu, 04 Jan 2018 07:33:32 +0800</pubDate><guid>https://martinliu.cn/blog/%E5%B0%86%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E7%9A%84hugo%E7%AB%99%E7%82%B9%E5%88%86%E4%BA%AB%E7%BB%99%E5%B1%80%E5%9F%9F%E7%BD%91%E9%87%8C%E7%9A%84%E5%85%B6%E4%BB%96%E4%BA%BA/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-12.jpg" alt="Featured image of post 将笔记本上的Hugo站点分享给局域网里的其他人" />&lt;p>我的笔记本上有好几个 Hugo 做的静态的站点，有自己的个人 Blog，有公司产品的培训文档；其中的有些站点内容，有可能是不方便发布到 Internet 上，有可能是你的观众并没有条件访问 Internet，但是使大家同在一个局域网里是一个很现实很方便的做法。那么怎样以最小的代价实现这个需求呢？&lt;/p>
&lt;h2 id="选择-hugo-服务器启动参数">选择 Hugo 服务器启动参数&lt;/h2>
&lt;p>为了满足以上需求，在启动 Hugo 服务器的时候需要增加两个参数，如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">martin@bogon:source/martinliu-hugo ‹master*›$ hugo server --bind 192.168.1.107 --baseURL http://192.168.1.107/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Started building sites ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Built site for language en:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 draft content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 future content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 expired content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">387 regular pages created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1100 other pages created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0 non-page files copied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">668 paginator pages created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">509 tags created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">37 categories created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total in 922 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Watching for changes in /Users/martin/source/martinliu-hugo/{content,static,themes}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Serving pages from memory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Web Server is available at http://192.168.1.107:1313/ (bind address 192.168.1.107)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Press Ctrl+C to stop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>对以上参数的解释：&lt;/p>
&lt;ul>
&lt;li>&amp;ndash;bind 192.168.1.107 ：这个 192 的 IP 地址是笔记本目前局域网（Wifi）的地址，其他人需要和你同在这个局域网里，或者能够访问到这个网段的地址&lt;/li>
&lt;li>&amp;ndash;baseURL http://192.168.1.107/ ： 这会覆盖 Hugo 站点里根目录下配置文件里的 baseURL 参数，有可能配置文件中这个参数是类似于 &lt;a class="link" href="http://martinliu.cn/" target="_blank" rel="noopener"
>http://martinliu.cn/&lt;/a> ，如果不加这个参数的话网站上的相关图片会显示不出来。&lt;/li>
&lt;/ul>
&lt;h2 id="配置笔记本电脑的防火墙">配置笔记本电脑的防火墙&lt;/h2>
&lt;p>以 macOS 为例，当你启动了这个 Hugo 服务器的时候，你访问 Security &amp;amp; Privacy 配置的时候，选择 Firewall 标签的时候，会自动弹出一个对话框，询问是否允许 incoming 的网络连接到 hugo 的应用服务。点击允许即可，这样防火墙配置里就多了一条配置，如下图所示：&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/hugo-firewall-rule.jpeg"
loading="lazy"
alt="firewall"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Hugo 可以很方便的将本地站点分享给局域网里的其它人，只需要在启动的时候加上适当的参数，配置好本机的防火墙策略即可。&lt;/p></description></item><item><title>Kubecon 2017演讲稿和视频下载</title><link>https://martinliu.cn/blog/kubecon-2017%E6%BC%94%E8%AE%B2%E7%A8%BF%E5%92%8C%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/</link><pubDate>Wed, 03 Jan 2018 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/kubecon-2017%E6%BC%94%E8%AE%B2%E7%A8%BF%E5%92%8C%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-10.jpg" alt="Featured image of post Kubecon 2017演讲稿和视频下载" />&lt;p>Kubernetes 无疑当下最火热的技术之一，Google 公司围绕着它下了更大的一盘棋 CNCF。这是在国际寡头 IT 软件公司的统治局面渐渐退去之后，各种新鲜技术百花齐放了一段时间以后，再通过 CNCF 的形式又逐渐集中化起来的趋势。KubeCon 的人气很旺，演讲分享的人很多。&lt;/p>
&lt;p>最近一次的 KubeCon，2017 年在奥斯汀站的演讲稿和视频下载的清单已经发布出来了：&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/cloudyuga/kubecon17" target="_blank" rel="noopener"
>https://github.com/cloudyuga/kubecon17&lt;/a>&lt;/p>
&lt;p>我在 YouTube 里听了一部分视频，感觉确实有很多新鲜的工程实践经验的分享。下面分享一个觉得不错的实战案例分享。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15149407077880.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="box-公司分享持续交付实战经验">Box 公司分享持续交付实战经验&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/2341514940915_.pic_hd.jpg"
loading="lazy"
alt="2341514940915_.pic_hd"
>&lt;/p>
&lt;p>关于这个分享的看点：&lt;/p>
&lt;ul>
&lt;li>Box 公司全面实施 Kubernetes 的案例，涵盖了所有的环境：Dev、Staging 和 Prod&lt;/li>
&lt;li>遇到的挑战和问题共性强&lt;/li>
&lt;li>Jenkins 流水线+金丝雀部署+持续交付的组合&lt;/li>
&lt;li>解决问题的模式值得借鉴&lt;/li>
&lt;li>工具集里开发出来的核心组件已经开业分享在 Github 上&lt;/li>
&lt;/ul>
&lt;p>分享者经典语录：&lt;/p>
&lt;blockquote>
&lt;p>我们是软件工程师，我们不是坐在那按按钮的猴子！&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/images/2251514938283_.pic.jpg"
loading="lazy"
alt="2251514938283_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2261514938305_.pic.jpg"
loading="lazy"
alt="2261514938305_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2271514938328_.pic.jpg"
loading="lazy"
alt="2271514938328_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2281514938357_.pic.jpg"
loading="lazy"
alt="2281514938357_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2291514938389_.pic.jpg"
loading="lazy"
alt="2291514938389_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2301514938410_.pic.jpg"
loading="lazy"
alt="2301514938410_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2311514938432_.pic.jpg"
loading="lazy"
alt="2311514938432_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2321514938453_.pic.jpg"
loading="lazy"
alt="2321514938453_.pi"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/2331514938477_.pic.jpg"
loading="lazy"
alt="2331514938477_.pi"
>&lt;/p>
&lt;p>以上分享的持续交付方案里 kube-applier 的源代码分享：&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/box/kube-applier" target="_blank" rel="noopener"
>https://github.com/box/kube-applier&lt;/a>&lt;/p>
&lt;p>PS：非常敬佩这种开放和分享的工程式文化。很符合开源的精神，爱分享的人，不把东西分享出来的话可能会不爽。&lt;/p>
&lt;p>延伸阅读：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.box.com/blog/introducing-kube-applier-declarative-configuration-for-kubernetes/" target="_blank" rel="noopener"
>https://blog.box.com/blog/introducing-kube-applier-declarative-configuration-for-kubernetes/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.box.com/blog/kubernetes-box-microservices-maximum-velocity/" target="_blank" rel="noopener"
>https://blog.box.com/blog/kubernetes-box-microservices-maximum-velocity/
&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="观看以上演讲视频">观看以上演讲视频&lt;/h2>
&lt;!-- raw HTML omitted --></description></item><item><title>用跑步的方式启动2018年</title><link>https://martinliu.cn/blog/%E7%94%A8%E8%B7%91%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A82018%E5%B9%B4/</link><pubDate>Tue, 02 Jan 2018 15:57:54 +0800</pubDate><guid>https://martinliu.cn/blog/%E7%94%A8%E8%B7%91%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A82018%E5%B9%B4/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-11.jpg" alt="Featured image of post 用跑步的方式启动2018年" />&lt;h1 id="用跑步的方式启动2018年">用跑步的方式启动2018年&lt;/h1>
&lt;p>元旦这天早晨送女儿去中国儿童艺术剧院看剧，这正好是我跑步的大好时机。正好是一个大晴天，这样的蓝天岂能辜负。环绕故宫的路线是一根长了很久的草，今天总算可以拔除了。于是我从东华门开始往北，沿着逆时针方向开始跑。下面是这次的跑步路线图。&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/forbidden-city-tiananmenSQ.PNG"
loading="lazy"
alt="故宫天安门和天安门广场"
>&lt;/p>
&lt;h2 id="跑步路线评价">跑步路线评价&lt;/h2>
&lt;p>东华门一侧向北的路上，直到故宫西北角的角楼；刚开始游客和行人还不是很多，但是到了故宫博物院的北门，哪里的游客非常多，需要躲开行人往前跑；在10点以后的时间里，保证你想跑也跑不快，人确实是比较多的，而且正好赶上了元旦这一天。听说有9万人在天安门广场观看了升旗仪式。&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/north-west.jpg"
loading="lazy"
alt="故宫天安门和天安门广场"
>&lt;/p>
&lt;p>故宫的西侧南长街这条路是很窄的人行道，由于也是有不少游客，我后半程是机动车上和机动车流逆行了一段跑的，虽然有点危险，不过机动车开得都不快，也在明显的躲让这行人，跑后还是感觉还是不建议这么跑。&lt;/p>
&lt;p>到了长安街以后，我想从天安门广场门口跑过，也就是从天安门的西边跑到东边，结果发现其实西边和东边以及广场周边都是设置了安检，如果没有带身份证的话根本就走不过去。在天安门站西的安检门口排了5分钟队以后放弃了。接着过马路到路西想往东跑，结果也比警察截住赶走了。无奈只能继续往南跑，从人民大会堂西路，途径前门大街和正义路，又回到了长安街。还不死心，企图混过东侧的安检抵达天安门城楼下，未果。然后继续沿着南池子大街跑到了起点。&lt;/p>
&lt;ul>
&lt;li>如果没有带身份证，根本无法接近天安门城楼下和进入天安门广场以内&lt;/li>
&lt;li>如果在节假日里，安检排队的等候时间应该是是10到30分钟以上，根本不适合在跑步的过程中有安检的环节，不是么？&lt;/li>
&lt;li>整个一圈下来，觉得道路上主要是游客居多，如果是跑步圈地，圈名胜地标的想法，还可以跑，不是的话，还是去其它的跑步地点吧&lt;/li>
&lt;/ul>
&lt;h2 id="最后">最后&lt;/h2>
&lt;p>在东华门终点附近，排了两张故宫外侧的图片。&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/donghua-gate.jpg"
loading="lazy"
alt="东华门附近"
>&lt;/p>
&lt;p>&lt;img src="http://martinliu.qiniudn.com/images/dong-dan.jpg"
loading="lazy"
alt="东单方向"
>&lt;/p>
&lt;p>2018年必须是一个不平凡的一年，我将这一年的基调定义为：停止开始，开始结束，全面开挂！&lt;/p></description></item><item><title>2017DevOps企业峰会旧金山站</title><link>https://martinliu.cn/blog/2017devops%E4%BC%81%E4%B8%9A%E5%B3%B0%E4%BC%9A%E6%97%A7%E9%87%91%E5%B1%B1%E7%AB%99/</link><pubDate>Thu, 28 Dec 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/2017devops%E4%BC%81%E4%B8%9A%E5%B3%B0%E4%BC%9A%E6%97%A7%E9%87%91%E5%B1%B1%E7%AB%99/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-7.jpg" alt="Featured image of post 2017DevOps企业峰会旧金山站" />&lt;p>DevOps Enterprise Summit由美国的Gene Kim发起并举办的，他是两本流行书籍的作者：《凤凰项目》和《DevOps Handbook》（中文书名《DevOps实践指南》预计于2018年春季出版）。&lt;/p>
&lt;h2 id="大会简介">大会简介&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/does-logo.png"
loading="lazy"
alt="DOES Logo"
>&lt;/p>
&lt;p>下面是来自这个大会官网的简单介绍：&lt;/p>
&lt;blockquote>
&lt;p>DevOps Enterprise Summit is a conference for the leaders of large, complex organizations implementing DevOps principles and practices. The event programming emphasizes both evolving technical and architectural practices and the methods needed to lead widespread change efforts in large organizations. The goal is to give leaders the tools and practices they need to develop and deploy software faster and to win in the marketplace.&lt;/p>
&lt;/blockquote>
&lt;p>From:&lt;a class="link" href="https://events.itrevolution.com/us/" target="_blank" rel="noopener"
> https://events.itrevolution.com/us/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/DOES-2017-header-web.jpg"
loading="lazy"
alt="15048603211912"
>&lt;/p>
&lt;h2 id="推荐视频">推荐视频&lt;/h2>
&lt;p>最近我通过微信公众号分享过关于Seek公司DevOps转型的精彩视频。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="演讲稿目录">演讲稿目录&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>星期&lt;/th>
&lt;th>场次&lt;/th>
&lt;th>名称&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Rocha, Aloisio, Betting on DevOps- How NetEnt Transforms Online Gaming Delivery.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Wallgren, Andres, Architecting Your App and Your Pipeline for Continuous Delivery - 10 DO&amp;rsquo;s for Successful DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Mckay, Gary, From Mainframe to Microservices- How Somos Keeps Telcos and Us All Connected.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Pullen, Wesley, DevOps from Grassroots to Mainstream.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Esser, John, DevOps Transformation 2.0- From Ancestry.com to AdvancedMD - applying strategies for leading DevOps innovation.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Comtois, Pauly, Bringing DevOps to Product.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Raia, Alice, Overcoming 75 years of inertia in healthcare; a Top-down + bottoms-up DevOps Transformation.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Perret, Jennifer, Guckenheimer, Sam, The Skype Journey to 1ES and Cloud.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Grafmeyer, Jim, Payne, Cindy, DevOps Handbook Experiments in Accelerating Delivery.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Hering, Micro, What got you here, wont get you there - A story of transformations.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Dominica DeGrandis - DeGrandis_Nov 12.2017.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Olivier, Dawie, Agile:Dawie ruined my life.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Thrasher, Paula, Scaling DevOps Talent in a Large Enterprise.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Daththreya, Gnani, Shunmugasundaram, Sathiya, Continuous Chaos in DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Hockaday, Kurt, Turning the Battleship A Principled Approach to Driving Change in DoD IT.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Mayner, Steve, Transformational Leadership and DevOps - Beyond the Research.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Johnson, Suzette, Yeman, Robin, What Legacy government organizations need to advance the state of DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Nassello, Scott, Using DevOps to build your learning organization.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Morrison, Erica, Prugh, Scott, More Culture, More Engineering, Less Duct-Tape.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Aggarwal, Manish, Intel&amp;rsquo;s Journey to Build Quality In How QA and Test Automation Drive DevOps Transformation.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Priolo, Marc, Mastering the Three S’s for a Successful Pipeline-as-a-Service Strategy Standardization, Self-service, Scale.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Stroud, Robert, DevOps From Analyst Inquiry to Organizational Action.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Gruver, Gary, Starting and Scaling DevOps in the Enterprise.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Reed, J. Paul, Navigating the Software Delivery Minefield DevOps and the Art of Release Engineering.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Blank-Edelman, David, SRE For Enterprises.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Lackey, Zane, DevSecOps How to use DevOps to make you more secure.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Burgin, Andy Devops in a Data Warehouse Inside Out.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Nowak, Chris, Alliances, Data and Startup Mentality – How we Led Three Banks through DevOps Transformations.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Rinehart, Aaron, Wickett, James, DevOps and the Healthcare Giant.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Kolli, Rama, Supercharging PayPal’s application development to help democratize financial services.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Fong, Richard, Nir, Erez, From Dev Opps to DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Nielsen, Suzanne, Shewell, Sarah, Transformation at Scale, One Cup at a Time.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Finster, Bryan, Pendergraft, Brent, CD Solving the talent problem.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Edmundson, Jill, Musil, Jill, Service Request Management CSG&amp;rsquo;s Journey from Chaos to Clarity.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Magennis, Troy, Prioritization – 10 different techniques for choosing what to start next.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Owczarek, David, Best Practices for Availability.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Forsgren, Nicole, The key to high performance What the data says.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Matthew, Tisson, The Making of Amazon Prime Now.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Allspaw, John, How Your Systems Keep Running Day After Day - Resilience Engineering as DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tuesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Brady, Jennifer, Pal, Tapabrata, Better Governance – Banking on Continuous Delivery.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Morales, Marco, Process-as-Code Real-World Examples that Scale.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Lynn, Angelo, Best Practices for DevOps-Ready Infrastructure Management and Automation.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>McKnight, Ken,Data-Driven DevOps Taking Action!.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Doucet, Chris, Best Practices for Model Driven Approach to Application Release.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Sutton, Mark, BizDevOps Using KPIs to Unlock a Common Language.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Electric Cloud Track&lt;/td>
&lt;td>Schuller, Manuel, How Financial Services are Leveraging Legacy IT Investments When Transitioning to DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>England, Rob, Surviving DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Konno, Miki, Marks, Justin, User Feedback at the Speed of DevOps.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Finn, Ray, Singh, Aru, Service Ownership - Devops for Salesforce.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Hill, Chris, Context Switches in Software Engineering.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Wester, Julia, Taming the Chaos- Beyond the Quick Wins.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Kernaghan, Chris, Can you do Devops in SAP DOES.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Jelleda, Kishore, DevOps at Scale is a Hard Problem- Challenges, Insights and Lessons Learned.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Radcliffe, Rosalind, Two Amazing Mainframe DevOps Transformation Case Studies.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Shoup, Randy, Scaling Personalization- DevOps at Stitch Fix.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>DeArdo, Carmen, Kersten, Mik, The Case for Value Stream Architecture.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>Breakout Session&lt;/td>
&lt;td>Rizzo, David, Two Amazing Mainframe DevOps Transformation Case Studies.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Boecker, Scott, Forrester, Ron There is No Finish Line.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Clanton, Ross, Kumar, Nanda, Fear does not exist in the dojo - a devops journey with a competitive twist.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Smart, Jonathan, The Yin and Yang of Speed and Control.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Hendrickson, Elisabeth, Data and DevOps Breaking Down the Silos.pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wednesday&lt;/td>
&lt;td>General Session&lt;/td>
&lt;td>Dekker, Sindey, The human factor Inspiring the pursuit of success and averting drift into failure.pdf&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="演讲稿下载">演讲稿下载&lt;/h2>
&lt;p>我从官网的Dropbox网盘里下载了所有演讲稿，分享到了微云的网盘里。&lt;/p>
&lt;p>&lt;a class="link" href="https://share.weiyun.com/d4ae9b43e05419260648af74b2c98178" target="_blank" rel="noopener"
>点这里下载&lt;/a>
以上文件压缩包大将近700MB。&lt;/p>
&lt;p>也可以从GitHub看到这些分享的文件：&lt;a class="link" href="https://github.com/devopsenterprise/2017-San-Francisco" target="_blank" rel="noopener"
>https://github.com/devopsenterprise/2017-San-Francisco&lt;/a>&lt;/p>
&lt;p>同样的今年6月份在伦敦举行的欧洲场次的DevOps企业峰会的演讲稿下载地址在：&lt;a class="link" href="https://github.com/devopsenterprise/2017-london" target="_blank" rel="noopener"
>https://github.com/devopsenterprise/2017-london&lt;/a>&lt;/p></description></item><item><title>为Docker Swarm群集配置Nutanix持久存储</title><link>https://martinliu.cn/blog/%E4%B8%BAdocker-swarm%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AEnutanix%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/</link><pubDate>Thu, 02 Nov 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E4%B8%BAdocker-swarm%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AEnutanix%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-4.jpg" alt="Featured image of post 为Docker Swarm群集配置Nutanix持久存储" />&lt;p>本文介绍如何用Docker卷插件的方式，给Docker Swarm的群集挂载Nutanix存储。&lt;a class="link" href="https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in" target="_blank" rel="noopener"
>Nutanix Container Volume Plug-in &lt;/a>简称DVP，可以给容器提供数据持久化的功能。&lt;/p>
&lt;p>本文使用ownCloud网盘应用做功能测试。测试的过程如下，安装部署Docker Datacenter，配置好群集，在UCP的界面里调用DVP插件建持久的数据卷，建立ownCloud服务，部署和测试该服务。&lt;/p>
&lt;h2 id="nutanix-dvp-docker-volume-plug-in安装和配置">Nutanix DVP (Docker Volume Plug-in)安装和配置&lt;/h2>
&lt;p>这一部分描述DVP的安装部署过程，需要连接互联网；安装调试完毕之后，作虚拟机的镜像模板使用。这样Docker Swarm的其它节点也都不需要重复这个步骤了。&lt;/p>
&lt;p>本文使用的是Docker社区文档稳定版 17.03.1-ce ；本文使用的OS是CentOS 7.3。所Docker安装的版本如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 17.03.1-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.27
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.7.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: c6d412e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Mon Mar 27 17:05:44 2017
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 17.03.1-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.27 (minimum version 1.12)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.7.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: c6d412e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Mon Mar 27 17:05:44 2017
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# rpm -qa|grep docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-17.03.1.ce-1.el7.centos.x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-selinux-17.03.1.ce-1.el7.centos.noarch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本文使用的Docker 安装yum源如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# cat /etc/yum.repos.d/docker-ce.repo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-stable-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Stable - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-edge-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Edge - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/$basearch/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test-debuginfo]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - Debuginfo $basearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[docker-ce-test-source]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=Docker CE Test - Sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseurl=https://download.docker.com/linux/centos/7/source/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgcheck=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpgkey=https://download.docker.com/linux/centos/gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本机所使用的所有安装源如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# yum repolist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded plugins: fastestmirror
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loading mirror speeds from cached hostfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * base: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * epel: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * extras: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * updates: mirrors.aliyun.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repo id repo name status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">base/7/x86_64 CentOS-7 - Base - mirrors.aliyun.com 9,363
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-ce-stable/x86_64 Docker CE Stable - x86_64 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">epel/x86_64 Extra Packages for Enterprise Linux 7 - x86_64 11,808
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extras/7/x86_64 CentOS-7 - Extras - mirrors.aliyun.com 381
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">updates/7/x86_64 CentOS-7 - Updates - mirrors.aliyun.com 1,859
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repolist: 23,415
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装docker引擎，并启动服务，并校验服务状态。安装过程参考如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# yum install -y docker-ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl enable docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl start docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# systemctl status docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● docker.service - Docker Application Container Engine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active (running) since Tue 2017-06-20 20:30:49 CST; 19min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: https://docs.docker.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: 875 (dockerd)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/docker.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─ 875 /usr/bin/dockerd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─ 942 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-in...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─2008 docker-containerd-shim 0ca2346b6126de702fb4dda5f807c0a69a402eb643f15c142730277d0eb7bbcb /var/...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─0ca2346b6126de702fb4dda5f807c0a69a402eb643f15c142730277d0eb7bbcb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─2038 /usr/bin/python /code/main.py --prism-ip 10.68.69.22 --dataservices-ip 10.68.69.23 --prism-...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>到目前为止，Docker安装配置完成。&lt;/p>
&lt;p>下面开始安装DVP，安装和配置过程参考页面。&lt;/p>
&lt;p>&lt;a class="link" href="https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in" target="_blank" rel="noopener"
>https://store.docker.com/plugins/nutanix-dvp-docker-volume-plug-in&lt;/a>&lt;/p>
&lt;p>下面是给操作系统安装iscsi initiator服务的参考步骤：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yum install -y iscsi-initiator-utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemd-tmpfiles --create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl status iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● iscsid.service - Open-iSCSI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded (/usr/lib/systemd/system/iscsid.service; enabled; vendor preset: disabled)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active (running) since Tue 2017-06-20 20:30:46 CST; 24min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: man:iscsid(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> man:iscsiadm(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: 888 (iscsid)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/iscsid.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─882 /usr/sbin/iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─888 /usr/sbin/iscsid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Starting Open-iSCSI...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local iscsid[878]: iSCSI logger with pid=882 started!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Failed to read PID from file /var/run/iscsid.pid: Inva...ent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:46 centos7-temp.zenlab.local systemd[1]: Started Open-iSCSI.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun 20 20:30:47 centos7-temp.zenlab.local iscsid[882]: iSCSI daemon with pid=888 started!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hint: Some lines were ellipsized, use -l to show in full.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>解释一下DVP的工作原理是，它是让Docker主机通过iSCSI协议连接Nutanix的存储服务。DVP插件的配置里包含了连接存储服务和存储容器（这个容器是Nutanix的存储术语，非Docker说的容器）的相关信息。这样Docker主机上用该卷插件建立的数据卷都会指向Nutanix后台的存储容器中；数据通过iSCSI协议连接Nutanix存储服务的时候，就可以利用到Nutanix群集提供的负载均衡能力；当数据块写入Nutanix存储池的过程中和之后，就可以利用到到Nutanix存储容器所具备的其它重要特性：数据块2~3副本的高可靠性、冷热数据分成、压缩、去重、纠删码等；而且存储空间对于容器或者Docker Swarm里的服务都是透明和无限容量的。&lt;/p>
&lt;/blockquote>
&lt;p>现在做一些安装DVP的准备工作，询问Nutanix系统管理员下面信息：&lt;/p>
&lt;ul>
&lt;li>获得Prism 的IP&lt;/li>
&lt;li>获得Nutanix群集数据服务的IP，这个IP是群集上的虚拟服务IP&lt;/li>
&lt;li>获得群集的用户名和密码&lt;/li>
&lt;li>新建一个测试存储容器，获得容器名&lt;/li>
&lt;/ul>
&lt;p>参考下面的DVP安装命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker plugin install ntnx/nutanix_volume_plugin PRISM_IP=&amp;#34;10.68.69.22&amp;#34; DATASERVICES_IP=&amp;#34;10.68.69.23&amp;#34; PRISM_PASSWORD=&amp;#34;nutanix/4u&amp;#34; PRISM_USERNAME=&amp;#34;admin&amp;#34; DEFAULT_CONTAINER=&amp;#34;ddc-sc1&amp;#34; --alias nutanix
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上的命令执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker plugin install ntnx/nutanix_volume_plugin PRISM_IP=&amp;#34;10.68.69.22&amp;#34; DATASERVICES_IP=&amp;#34;10.68.69.23&amp;#34; PRISM_PASSWORD=&amp;#34;nutanix/4u&amp;#34; PRISM_USERNAME=&amp;#34;admin&amp;#34; DEFAULT_CONTAINER=&amp;#34;ddc-sc1&amp;#34; --alias nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plugin &amp;#34;ntnx/nutanix_volume_plugin&amp;#34; is requesting the following privileges:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - network: [host]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/dev]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/lib/modules]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/etc/iscsi]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/var/lock/iscsi]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mount: [/proc]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - allow-all-devices: [true]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - capabilities: [CAP_SYS_ADMIN CAP_SYS_PTRACE CAP_IPC_LOCK CAP_IPC_OWNER CAP_NET_ADMIN CAP_MKNOD CAP_SYS_MODULE]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Do you grant the above permissions? [y/N] y （输入y，按回车）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">latest: Pulling from ntnx/nutanix_volume_plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">be892c8cb64d: Download complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Digest: sha256:5a3730ffae077eb6ddc0c125620283d56852528b686cbe42f2f58696eab82c0d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: Downloaded newer image for ntnx/nutanix_volume_plugin:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installed plugin ntnx/nutanix_volume_plugin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确认VDP安装结果，这个插件应该是最新版、启动的状态，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker plugin ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ID NAME DESCRIPTION ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">f0e38fbc11b3 nutanix:latest Nutanix volume plugin for docker true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行下面的测试，确认DVP工作正常。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume create testvol -d nutanix:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DRIVER VOLUME NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix:latest testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>回到Nutanix的Prisum界面（主要的群集管理图形化界面）中查看Storage &amp;ndash;&amp;gt; table &amp;ndash;&amp;gt; Volume Group，应该能看到这个命令所创建的名为testvol的数据卷。如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%209.07.13%20PM.png"
loading="lazy"
>&lt;/p>
&lt;p>在命令行删除这个测试的卷。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume rm testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">testvol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]# docker volume ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DRIVER VOLUME NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@centos7-temp]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在回到Prisum界面中查看刚才看到的那个卷应该就消失了。到此为止所有节点的DVP部署配置工作就完毕了，并且确认docker服务和DVP功能都很正常。用 sys-unconfig 命令关机，把这个虚拟机在Prisum里面做一个快照备用，也可以在Nutanix的acli命令行里面把它做成一个基础镜像。&lt;/p>
&lt;p>我们已经理解和熟悉了DVP的基本操作，配置和部署，下面开始安装Docker Datacenter；Docker Datacenter的架构图如下所示：
&lt;img src="https://martinliu.cn/images/14979754711332.jpg"
loading="lazy"
>&lt;/p>
&lt;p>本文安装的架构是：&lt;/p>
&lt;ol>
&lt;li>一个 UCP manager 节点&lt;/li>
&lt;li>一个 DTR 节点&lt;/li>
&lt;li>两个 worker node 节点&lt;/li>
&lt;/ol>
&lt;p>在Nutanix的Prisum中用刚才制作的那个快照或者镜像模板，克隆/新建4个虚拟机。虚拟机的参考配置如下：&lt;/p>
&lt;ul>
&lt;li>2 vCPU&lt;/li>
&lt;li>4GB RAM&lt;/li>
&lt;li>50GB Disk&lt;/li>
&lt;/ul>
&lt;h2 id="安装ucpdocker-universal-control-plane节点">安装UCP（Docker Universal Control Plane）节点&lt;/h2>
&lt;p>在Nutanix的Prisum中从刚才新建的四个虚拟机中选择一个，Power on开机；ssh登录到操作系统内之后，设定主机名和IP地址。&lt;/p>
&lt;p>安装配置参考文档：https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/install-offline/#download-the-offline-package&lt;/p>
&lt;p>注意事项，提前下载好安装包，这个tar包里面包含了UCP需要的所有镜像，可以一次性导入到UCP的节点上。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://packages.docker.com/caas/ucp_images_2.1.4.tar.gz -O docker-datacenter.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; docker-datacenter.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>载入完毕后，可以看到如下镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@ucp-master ~]# docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-metrics 2.1.4 e3e24ef156bd 3 weeks ago 92.2 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-swarm 2.1.4 d8b51d6801e5 3 weeks ago 21 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-hrm 2.1.4 38a19323327d 3 weeks ago 14.8 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-etcd 2.1.4 9aa382502e19 3 weeks ago 38.5 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-controller 2.1.4 5a852aa3039e 3 weeks ago 28 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-dsinfo 2.1.4 66ee9368796a 3 weeks ago 159 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp 2.1.4 7a28dbfc44e4 3 weeks ago 19.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp latest 7a28dbfc44e4 3 weeks ago 19.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-cfssl 2.1.4 acdc1f147711 3 weeks ago 15.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-compose 2.1.4 25775e989077 3 weeks ago 32.9 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-auth-store 2.1.4 f27ad13dee6c 3 weeks ago 58.7 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-agent 2.1.4 d716a096c331 3 weeks ago 22.5 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker/ucp-auth 2.1.4 1f4739cd3c08 3 weeks ago 25.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@ucp-master ~]#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装UCP的命令参考如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run --rm -it --name ucp \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v /var/run/docker.sock:/var/run/docker.sock \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker/ucp:2.1.4 install \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --host-address 10.68.69.12 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --interactive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上命令中10.68.69.12是UCP主机的ip地址，建议UCP使用固定IP。以上命令完毕后用浏览器访问这个IP。&lt;/p>
&lt;p>参考以下文档，完成UCP的安装步骤，其中需要到Docker网站获得30天的试用版许可证文件。&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/" target="_blank" rel="noopener"
>https://docs.docker.com/datacenter/ucp/2.1/guides/admin/install/&lt;/a>&lt;/p>
&lt;p>能够正常登陆访问UCP之后，在首页下方点击 【Add Node】按钮，获得加其它节点到群集里的命令，参考命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker swarm join \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --token SWMTKN-1-1310ah7gzj9e7bk6a5yobo2qyiwf93ybrd29flkved1zqydd6i-7pir0884sag5pjofwzjq5o1um \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10.68.69.12:2377
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把以上命令记录在写字板中备用。&lt;/p>
&lt;h2 id="加3个节点到群集里">加3个节点到群集里&lt;/h2>
&lt;p>把剩下的三个虚拟机开机，进入操作系统后设定主机名和IP。其中的一个安装DTR（Docker镜像仓库）的节点建议使用固定IP。&lt;/p>
&lt;p>在每个操作系统里面用docker命令确认DVP是否正常。&lt;/p>
&lt;ul>
&lt;li>docker plugin ls&lt;/li>
&lt;li>docker volume ls&lt;/li>
&lt;li>systemctl status iscsid&lt;/li>
&lt;/ul>
&lt;p>下面就可以把上一步所记录命令在命令行里面执行以下，完毕之后回到UCP的界面中查看是否它们已经添加成功。如下图所示：
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%209.49.32%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 9.49.32 P"
>&lt;/p>
&lt;h2 id="安装dtr-docker镜像仓库">安装DTR-Docker镜像仓库&lt;/h2>
&lt;p>在UCP首页的下方，找到并点击 【Install DTR】的按钮，取得安装命令（记得从清单中选择固定IP地址的DTR主机）；在登录DTR主机的控制台里面输入这个命令，命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -it --rm \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker/dtr:2.2.5 install \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ucp-node 10.68.69.12 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ucp-insecure-tls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>DTR节点没有离线安装的整合包，它需要联网下载很多相关镜像，如果网络速度不是很快的话，下载和安装的过程需要至少半个小时，过程中还需要输入UCP的管理员，用户名和密码。&lt;/p>
&lt;p>参考文档如：
&lt;a class="link" href="https://docs.docker.com/datacenter/dtr/2.2/guides/admin/install/#step-3-install-dtr" target="_blank" rel="noopener"
>https://docs.docker.com/datacenter/dtr/2.2/guides/admin/install/#step-3-install-dtr&lt;/a>&lt;/p>
&lt;p>DTR正常工作了以后，登录建立一个名为owncloud的镜像库，点击【New Rrepository】输入owncloud。
在一个节点上下载owncloud镜像，添加新的tag，上传到这个镜像到镜像库里备用。参考命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker login dtr.zenlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull owncloud
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker tag owncloud:latest dtr.zenlab.local/admin/owncloud:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker push dtr.zenlab.local/admin/owncloud:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.10.13%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.10.13 P"
>&lt;/p>
&lt;p>注意：如果你的环境中没有DNS，就把dtr.zenlab.local换成DTR的IP地址。&lt;/p>
&lt;p>以上这个步骤主要是方便以后，反复使用和测试这个镜像的可能性，如果所有的节点都有高速的互联网链接，可以忽略以上步骤。&lt;/p>
&lt;h2 id="docker-swarm群集中使用dvp">Docker Swarm群集中使用DVP&lt;/h2>
&lt;p>这里使用UCP的图形化界面，在一个所有节点都配置和部署了VDP的群集上，给群集挂载外部Nutanix的数据卷。&lt;/p>
&lt;p>登录UCP主页，点击Resource，点击Volumes，点击 【Create Volume】，输入相关参数，如下图所示。图中的sizeMb=500000这个参数是制定VolumeGroup的大小，不设定这个参数的话，默认是10GB。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.22.24%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.22.24 A"
>&lt;/p>
&lt;p>在到Nutanix的Prism里面查看这个Volume Group是否存在。应该如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.23.32%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.23.32 A"
>&lt;/p>
&lt;h2 id="部署owncloud网盘服务">部署OwnCloud网盘服务&lt;/h2>
&lt;p>登录UCP主页，点击 Service ， 点击 【Create a Service】按钮；开始建立这个服务。输入服务名，镜像名；点击 【Next】按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.10%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.10 P"
>&lt;/p>
&lt;p>点击 【Next】按钮。进入 Resource页面，这里需要配置端口和数据卷。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.35%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.35 P"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.49.58%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.49.58 P"
>&lt;/p>
&lt;p>最后点击【Deploy Now】按钮。 部署完毕之后，显示这个服务的状态为正常。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-21%20at%2012.25.51%20AM.png"
loading="lazy"
alt="Screen Shot 2017-06-21 at 12.25.51 A"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.52.28%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.52.28 P"
>&lt;/p>
&lt;p>点击这个服务，到这个页面的最下方，找到右下角的发布端口的链接，点击后，就可以看到ownCloud的初始化配置页面了。
&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.53.24%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.53.24 P"
>&lt;/p>
&lt;p>输入管理员的用户名和密码，进入之后，上传一些图片，测试一下功能是否正常。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen%20Shot%202017-06-20%20at%2010.54.06%20PM.png"
loading="lazy"
alt="Screen Shot 2017-06-20 at 10.54.06 P"
>&lt;/p>
&lt;p>尝试一些Docker Datacenter的高级功能，如服务的高可用性；同时Nutanix的DVP在底层保障了数据的持久性和完全性。测试步骤如下：&lt;/p>
&lt;ol>
&lt;li>找到运行owncloud的容器，删除这个容器&lt;/li>
&lt;li>在服务页面查看owncloud服务的状态变化&lt;/li>
&lt;li>等ownCloud的状态恢复正常之后&lt;/li>
&lt;li>再次登录ownCloud页面&lt;/li>
&lt;li>查看和确认刚才上传的文件是否还在&lt;/li>
&lt;/ol>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Nutanix是一种融合和了计算、存储和虚拟化（内置KVM）的超融合平台。Nutanix DVP (Docker Volume Plug-in)可以让平台里的容器用上持久化存储服务。DVP不仅可以给单独虚拟机里的容器提供持久卷服务，还能给类似于Docker Swarm的其它容器编排平台提供持久化数据服务功能。我后续的文章还会分享路测试Kubernetes等其它平台。&lt;/p></description></item><item><title>Tips for Docker on Mac</title><link>https://martinliu.cn/blog/tips-for-docker-on-mac/</link><pubDate>Tue, 26 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/tips-for-docker-on-mac/</guid><description>&lt;img src="https://martinliu.cn/images/sandrali-3.JPG" alt="Featured image of post Tips for Docker on Mac" />&lt;h1 id="tips-for-docker-on-mac">Tips for Docker on Mac&lt;/h1>
&lt;p>在macOS上使用Docker很长时间了，本文总结一些我不想忘记的tips，方便自己反复使用的同时，也顺便总结分享一下，留下本文作为长期更新的备忘录。&lt;/p>
&lt;h2 id="搭建私有镜像库">搭建私有镜像库&lt;/h2>
&lt;p>运行一个本地镜像库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker run -d -p 5000:5000 --restart=always --name registry registry:2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这条命令会从docker hub 下载 registry:2 镜像，在本机运行一个镜像库服务。&lt;/p>
&lt;p>下载一个测试用的镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker pull ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>给这个镜像打上私有镜像库的标签&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker tag ubuntu:16.04 localhost:5000/ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>push这个测试镜像到本地的镜像库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker push localhost:5000/ubuntu:16.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这时候你会发现我的本地这样岂不是有了两份相同的镜像了，有这个必要么？是不是多余了？下面几个场景中会用到：&lt;/p>
&lt;p>当你用docker-machine在本机启动1个vm的时候，你运行任何docker run或者docker-compose up的时候你可能需要一个之前在本地就有的image，这是一种分享本机image给docker-machine vm的一种方式。&lt;/p>
&lt;p>当你用docker-machine在本机启动多个个vm的时候，你可能会把它们作出docker Swarm群集，当你在这个群集上启动一个服务的时候，docker compose文件中的镜像地址可以引用这个本地地址，引用地址类似这样 image: 192.168.99.1:5000/influxdb&lt;/p>
&lt;p>当你用 minikube start启动了一个minikube的vm的时候，你可能也需要本机的docker镜像，尤其是在你做demo的时候，这是最快的下载途径。
需要注意的是，以上三种情况都需要指定一下&amp;ndash;engine-insecure-registry 192.168.99.1:5000 这个参数。&lt;/p>
&lt;h2 id="自动化创建docker-swarm群集">自动化创建Docker Swarm群集&lt;/h2>
&lt;p>在我的文件目录中存放着这个脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cat create-swarm.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create manager --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent1 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent2 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create agent3 --engine-insecure-registry 192.168.99.1:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eval `docker-machine env manager`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker swarm init --advertise-addr `docker-machine ip manager`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent1 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent2 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh agent3 docker swarm join --token `docker swarm join-token -q worker` `docker-machine ip manager`:2377
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker node ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解释一下上面的代码：创建四个docker-machine vm，初始化swarm群集，把三个worker节点加入群集。这样四节点的群集就up and running了。&lt;/p>
&lt;p>清除以上群集虚拟机的命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine rm -y manager agent1 agent2 agent3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>关于DevOps 的那些事</title><link>https://martinliu.cn/blog/%E5%85%B3%E4%BA%8Edevops-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/</link><pubDate>Sat, 23 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E5%85%B3%E4%BA%8Edevops-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/</guid><description>&lt;img src="https://martinliu.cn/images/tf_5.jpg" alt="Featured image of post 关于DevOps 的那些事" />&lt;p>DevOps是孕育于敏捷社区，又反哺给整个IT技术行业的，是一次彻底而全面的技术和文化运动。本文从它的出处谈起，一直描述到当前国内的现状。最后总结了相关的核心技术和主要实践。&lt;/p>
&lt;h2 id="devops简史">DevOps简史&lt;/h2>
&lt;p>在2008年多伦多举办的敏捷大会（Velocity Conf 2008 ）上，Patrick DeBois 和AndrewClay Shafer 先生首次提议讨论“敏捷基础架构”这个话题。在第二年的敏捷大会上有一个具有里程碑的意义技术分享，来自Flickr公司《每天部署10次》的分享，它激发了随后Patrick DeBios在同年十月，在比利时的根特市举办的首届DevOpsDays活动，这个活动是两天的日程，为了大家方便在twitter上的传播，人们把DevOpsDays这个词简写为 “#DevOps” 。 此后，“DevOps”一词问世了，这个词所包含的理念和实践一时在越来越广大的人群中产生了共鸣，随后成为全球IT界在各种大会和论坛里热议和讨论的焦点话题，很多大型IT论坛也都开设出了DevOps专题讨论。这就是DevOps这个词的由来。DevOpsDays活动随后在Patrick DeBios等相关核心发起人的推动下，在全球范围内蓬勃发展了起来。2010年在美国山景城(Mountain View) 举办的DevOpsDays 活动中，Damon Edwards先生使用“CAMS”这个缩写，高度概括和诠释了DevOps，即文化（Culture）、自动化（Automation）、度量（Measurement or Metrics）和分享（Sharing）。随后Jez Humble先生将“L”精益 (Lean) 原则也加入其中，最终变成了CALMS。&lt;/p>
&lt;ul>
&lt;li>Culture（文化）- 是指拥抱变革，促进协作和沟通&lt;/li>
&lt;li>Automation（自动化）- 是指将人为干预的环节从价值链中消除&lt;/li>
&lt;li>Lean（精益）- 是指通过使用精益原则促使高频率循环周期&lt;/li>
&lt;li>Metrics（指标）- 是指衡量每一个环节，并通过数据来改进循环周期&lt;/li>
&lt;li>Sharing（分享）- 是指与他人开放分享成功与失败的经验，并在错误中不断学习改进&lt;/li>
&lt;/ul>
&lt;p>“CALMS”完全吻合Patrick DeBois先生所一向倡导的“DevOps is a human problem” (DevOps 是关于人的问题) 的理念 。&lt;/p>
&lt;h2 id="devopsdays活动的现状">DevOpsDays活动的现状&lt;/h2>
&lt;p>从DevOps概念的产生，到如今它在全球范围内的蔓延和认同，已经经历了9个年头的时间。它的火爆推广也伴随着IT行业的迅速变迁和发展，现在已经到了移动互联网时代的后半场，国内的信息化建设已经完成了很多年；如今各行各业的企业也都亟待完成全方位的数字化转型。IT信息技术的先进程度标志着一个企业的核心能力，任何一个成功的企业，敏捷高效的软件开发创新实力和IT管理综合能力不只是门面而已，而是实实在在的市场竞争能力。DevOps倡导打敏捷、持续交付和ITIL三种实践的组合拳，同时应用精益生产理念为基础的管理思想，这正在逐渐地被广泛的接受和认可。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/devopsdays-map.png"
loading="lazy"
alt="devopsdays-map"
>&lt;/p>
&lt;p>在过去的几年中，国内的各种IT大会也蓬勃发展，其中DevOps相关的专题和分会场也颇受人们的关注。各种云计算、运维等IT技术的社交媒体也都非常重视DevOps这个话题的分享。一个专属于DevOps社群的、国际性的、有影响力的DevOps大会正呼之欲出。在这样的时代背景下DevOpsDays大会北京站在2017年的3月18日来到中国，在同年的8月18日上海，还要举办DevOpsDays Shanghai站的大会。&lt;/p>
&lt;p>下面列举一些DevOpsDays大会的相关数据，&lt;!-- raw HTML omitted -->数据来源于DevOpsDays.org&lt;!-- raw HTML omitted --> 网站。从2009年到2016年，已经在全球的61个城市/国家成功地举办了117场。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/year.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/devops-citys.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>在谈这个话题前先看一下DevOps相关工具集的全貌，如下图所示：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/devops-tools.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/devops-v20.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/devops-house.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>（上图来源于：Exin DevOps白皮书）&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>切换到Ghost+七牛</title><link>https://martinliu.cn/blog/%E5%88%87%E6%8D%A2%E5%88%B0ghost-%E4%B8%83%E7%89%9B/</link><pubDate>Thu, 21 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E5%88%87%E6%8D%A2%E5%88%B0ghost-%E4%B8%83%E7%89%9B/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-12.jpg" alt="Featured image of post 切换到Ghost+七牛" />&lt;p>在经历了一个很长的周期之后，我的blog又回到了最原始的状态。很早以前学习网页开发的时候，用写字板编写html代码，后来是Asp，工作以后是用Blogspot，之后是WordPress，然后是Jekyll+github，现在是Ghost+七牛。&lt;/p>
&lt;p>4个拐点&lt;/p>
&lt;p>我的blog经历了四个转折点，下面稍微说下，为啥选择了某个平台，为啥后来又放弃了。&lt;/p>
&lt;ol>
&lt;li>
&lt;pre>&lt;code>免费博客平台：最初我试用了几个国内外免费的服务，最后发现Blogspot的体验要优于其他所有平台，而且具备一定的定制能力，还没有广告。然后就一直用到了Blogspot被墙的时候，那时候我还没有买域名。记得MSN的Space也用过，如果你没有用过MSN的话，当我没说这句话。总之免费blog空间的弊端就是，你码的字和图片是给别人的，不属于你自己，没有延续性。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>WordPress：是我用的时间最长的平台，它的好处是可以host在任何php虚拟空间和云主机上；优势就是功能强。曾经浪花费了大量的时间，在测试和感受各种插件和皮肤上。而且WP的搬家工作也容易，因此换了很多个空间，一共有多少个主机空间现在已经都忘了。放弃WP的原因：维护LAMP堆栈的工作量还是有的，即使在PHP的虚拟空间里，这个系统的优化工作还是持续不断的要做的，否则网站速度会很慢，而且时快时慢，网站的访问性能其实无法保证。因此在这个过程中必须使用CDN服务，七牛的wp插件是我用的最长时间的，因此我早期的blog的图片都在七牛上，它给我了一个备份和加速图片的福利。性能不稳定，页面打开速度慢是放弃它的主要原因。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>Jekyll+GitHub：选择这个组合，开始于我重度使用Github的时候。而且macOS上安装Jekyll这种静态blog程序很方便，捣鼓起来之后，就感觉比WP方便简单直接多了。发现这个方式非常轻量和简洁。而且Github.io的免费静态网站host服务还支持自定义域名。因此，我做了把之前所有WP的文章导出为MD格式文档的数据迁移工作。由于之前WP文章里的图，已近都存放在七牛里了，因此这次我做了一个出乎意料敏捷轻松的转身。使用过程中，逐渐发现了Jekyll的各种不足，界面和格式的定制工作还是有的，即使用几十刀买的皮肤都会让你用到难以忍受，毕竟不是想developer那样天天写代码，也逐渐感到Jekyll的简洁变成了简陋。代码定制的工作量和难度大是放弃它的主要原因。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>Ghost+七牛：其实早就瞄上Ghost了，可是一种没有下决心换。直到最近我开始把Ghost安装在Mac OS的笔记本电脑上，发现在本机编辑和维护文章资料，速度飞快，和以前WP在线编辑简直是天壤之别。如果Ghost应用跑在自己的笔记本电脑上的话，既可以离线工作，像之前用Jekyll+Github组合一样，也更可以不需要购买任何虚拟主机和空间了，在本机离线工作的速度和效率好，而且稳定太多了。 buster这个程序是这次切换到Ghost的催化剂，它可以把Ghost网站的全站导出成静态文件，线上就只需要一个CDN空间了。七牛的qshell工具可以方便地把本地的静态网站文件夹，同步到CDN的buckte存储中。切换到这个方案的原因是：网站变为纯静态网页，全站html/css和图片全面上CDN，配置全球加速网站域名，享用七牛的免费套餐。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;p>下面花一点篇幅介绍一下目前的blog环境细节。简单地说：目前是在笔记本上跑Ghost服务器，这样就省去了云主机和虚拟主机空间的需求，把ghost的站点导出为静态网页和图片，然后增量地上传到七牛的CDN上去。
Ghost本地安装&lt;/p>
&lt;p>我的操作系统是MacOS，用的是2017款MBP。&lt;/p>
&lt;p>先安装node.js，进入https://nodejs.org/en/ 在网站的首页上就可以下载到安装包，下载安装即可。也可以用 brew 安装。安装完了以后就获得了 npm 包管理程序。&lt;/p>
&lt;p>之后参考https://docs.ghost.org/v1.0.0/docs/install#pre-requisites 的文档安装 ghost-cli ； 然后用ghost的命令行来实现ghost程序的安装和升级。&lt;/p>
&lt;p>用ghost-cli安装ghost服务器的时候，要选择local的方式，它会使用sqllite作为数据库，这样做管理和维护Ghost应用栈的工作就都在本地了。&lt;/p>
&lt;p>ghost服务器的初始化 ghost install local 这个命令会问你几个问题，全都用默认即可。安装完之后就可以看到服务器运行的状态了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">martin@mbp ghost status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Process manager &amp;#39;systemd&amp;#39; will not run on this system, defaulting to &amp;#39;local&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ Name │ Location │ Version │ Status │ URL │ Port │ Process Manager │
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ localhost │ ~/source/ghost │ 1.8.7 │ running (production) │ http://martinliu.cn/ │ 2368 │ systemd │
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样就表明本地安装成功，访问 &lt;a class="link" href="http://martinliu.cn/ghost" target="_blank" rel="noopener"
>http://martinliu.cn/ghost&lt;/a> 建立管理员账户，登录以后，就可以在本地编辑和维护blog文章了。
Buster安装和使用&lt;/p>
&lt;p>Buster的安装也很简单，网上有很多安装使用攻略，此处忽略。我用下面的命令来把Ghost网站做导出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">buster generate --new-domain=martinliu.cn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在ghost的根目录下运行这个命令，就可以把本地的ghost网站都导出到一个名为static的目录里。可以直接在这个目录里打开这些html纯静态的网页，可以浏览和验证格式是否正常，一般不需要这样做，格式一般不会出错的。
配置七牛CDN&lt;/p>
&lt;p>七牛提供了本地的qshell，用于上传和同步文件到云端的存储里。安装过程文档见 &lt;a class="link" href="https://github.com/qiniu/qshell" target="_blank" rel="noopener"
>https://github.com/qiniu/qshell&lt;/a>&lt;/p>
&lt;p>我在ghost的根目录下，编辑了一个上传网站的配置文件upload.conf，内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;src_dir&amp;#34; : &amp;#34;/Users/martin/source/ghost/static&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;access_key&amp;#34; : &amp;#34;XXXXXXXkAA9TYrcDmQPBAAcB7&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;secret_key&amp;#34; : &amp;#34;XXXXXXXXXXXXXXXXXXXXXndwt&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;bucket&amp;#34; : &amp;#34;martinliu-cn&amp;#34;，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;ignore_dir&amp;#34; : false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;overwrite&amp;#34; : true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;check_exists&amp;#34; : true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;check_hash&amp;#34; : true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;rescan_local&amp;#34; : true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log_file&amp;#34; : &amp;#34;./upload.log&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log_level&amp;#34; : &amp;#34;info&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log_rotate&amp;#34; : 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log_stdout&amp;#34; : true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;file_type&amp;#34; : 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上这个配置很重要，它的目的是实现：&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code>增量上传
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>修改的文件覆盖上传
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>感谢七牛的工程师茅工，在我调试以上需求的时候，给我提供了及时的帮助。而且七牛的免费账户也可以开工单获取技术支持，支持的响应速度还不错。&lt;/p>
&lt;p>这样执行 qshell qupload 10 upload.conf 既可以完成一次上传同步工作，这个步骤是唯一需要在线操作的步骤。这条命令的输出结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/cloud/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/coding/index.html =&amp;gt; tag/coding/index.html [113/119, 95.0%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/coding/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/devops/index.html =&amp;gt; tag/devops/index.html [114/119, 95.8%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/devops/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/getting-started/index.html =&amp;gt; tag/getting-started/index.html [115/119, 96.6%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/getting-started/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/journey/index.html =&amp;gt; tag/journey/index.html [116/119, 97.5%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/journey/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/opensource/index.html =&amp;gt; tag/opensource/index.html [117/119, 98.3%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:21 [I] File `tag/opensource/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/tag/running/index.html =&amp;gt; tag/running/index.html [118/119, 99.2%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] File `tag/running/index.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uploading /Users/martin/source/ghost/static/test.html =&amp;gt; test.html [119/119, 100.0%] ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] File `test.html` exists in bucket, hash match, ignore this upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] -------------Upload Result--------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] Total: 119
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] Success: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] Failure: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] NotOverwrite: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] Skipped: 119
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] Duration: 36.533056019s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/09/25 00:00:22 [I] ----------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See upload log at path ./upload.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>七牛的域名配置如下图所示：
&lt;img src="https://martinliu.cn/images/Google-Chrome-5.jpg"
loading="lazy"
alt="Google-Chrome-5"
>&lt;/p>
&lt;h3 id="blog工作流">Blog工作流&lt;/h3>
&lt;p>下面就是我目前的blog工作流程说明。&lt;/p>
&lt;ul>
&lt;li>
&lt;pre>&lt;code>启动本地的ghost服务器，开始编辑和维护blog文章，如新写一篇blog；其实我也根本就不关这个服务器，感觉它也没有什么消耗。这样的话飞机上的无聊时间，可以彻底得到充分利用了。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>在本地发布和预览blog文章和内容，修订并定稿。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>运行Buster命令导出全站文章到本地。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>在想更新上线新内容的时候，在联网的情况下，运行qshell上传同步命令，把本地static文件夹和七牛上的存储bucket同步一下。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;p>至此我完成了从动态blog到纯静态blog的转型，现在网页html和图片文件全都在七牛的CDN里，而且域名 martinliu.cn 的访问配置成了全球加速。&lt;/p>
&lt;p>目前使用的是七牛的免费流量和空间套餐，套餐内的各种数量限制如下。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Screen-Shot-2017-09-23-at-11.21.57-AM.png"
loading="lazy"
alt="Screen-Shot-2017-09-23-at-11.21.57-A"
>&lt;/p>
&lt;p>目前的疑问是这个免费套餐是否够用，不知道这个羊毛多久会被我薅完。我会定期在本文跟新以上解决方案，在使用期间的各种配置细节变更，或者遇到的问题和解决方法。&lt;/p>
&lt;p>TO-Do&lt;/p>
&lt;pre>&lt;code>把static变成一个git库，以后配置Jenkins，基于它的变化，自动化触发后续的更新和上传动作
在上传前运行htlm和css文件的压缩工具（命令行执行），优化页面尺寸
在上传前运行图片的压缩工具（命令行执行），优化图片尺寸
在Ghost里加入评论功能
加入Google网站统计代码
测试Ghost网站备份和迁移过程，保证当前的ghost服务器崩溃了，数据不会丢失
&lt;/code>&lt;/pre></description></item><item><title>用Minikube体验单节点K8S</title><link>https://martinliu.cn/blog/%E7%94%A8minikube%E4%BD%93%E9%AA%8C%E5%8D%95%E8%8A%82%E7%82%B9k8s/</link><pubDate>Thu, 21 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E7%94%A8minikube%E4%BD%93%E9%AA%8C%E5%8D%95%E8%8A%82%E7%82%B9k8s/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-1.jpg" alt="Featured image of post 用Minikube体验单节点K8S" />&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/minikube-logo.png"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Usage:
minikube [command]&lt;/p>
&lt;p>Available Commands:
addons Modify minikube&amp;rsquo;s kubernetes addons
completion Outputs minikube shell completion for the given shell (bash)
config Modify minikube config
dashboard Opens/displays the kubernetes dashboard URL for your local cluster
delete Deletes a local kubernetes cluster
docker-env Sets up docker env variables; similar to &amp;lsquo;$(docker-machine env)&amp;rsquo;
get-k8s-versions Gets the list of available kubernetes versions available for minikube
ip Retrieves the IP address of the running cluster
logs Gets the logs of the running localkube instance, used for debugging minikube, not user code
mount Mounts the specified directory into minikube
profile Profile sets the current minikube profile
service Gets the kubernetes URL(s) for the specified service in your local cluster
ssh Log into or run a command on a machine with SSH; similar to &amp;lsquo;docker-machine ssh&amp;rsquo;
ssh-key Retrieve the ssh identity key path of the specified cluster
start Starts a local kubernetes cluster
status Gets the status of a local kubernetes cluster
stop Stops a running local kubernetes cluster
update-context Verify the IP address of the running cluster in kubeconfig.
version Print the version of minikube&lt;/p>
&lt;p>Flags:
&amp;ndash;alsologtostderr log to standard error as well as files
-b, &amp;ndash;bootstrapper string The name of the cluster bootstrapper that will set up the kubernetes cluster. (default &amp;ldquo;localkube&amp;rdquo;)
-h, &amp;ndash;help help for minikube
&amp;ndash;log_backtrace_at traceLocation when logging hits line file:N, emit a stack trace (default :0)
&amp;ndash;log_dir string If non-empty, write log files in this directory
&amp;ndash;loglevel int Log level (0 = DEBUG, 5 = FATAL) (default 1)
&amp;ndash;logtostderr log to standard error instead of files
-p, &amp;ndash;profile string The name of the minikube VM being used.
This can be modified to allow for multiple minikube instances to be run independently (default &amp;ldquo;minikube&amp;rdquo;)
&amp;ndash;stderrthreshold severity logs at or above this threshold go to stderr (default 2)
-v, &amp;ndash;v Level log level for V logs
&amp;ndash;vmodule moduleSpec comma-separated list of pattern=N settings for file-filtered logging&lt;/p>
&lt;p>Use &amp;ldquo;minikube [command] &amp;ndash;help&amp;rdquo; for more information about a command.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Starting local Kubernetes v1.7.5 cluster&amp;hellip;
Starting VM&amp;hellip;
Getting VM IP address&amp;hellip;
Moving files into cluster&amp;hellip;
Setting up certs&amp;hellip;
Connecting to cluster&amp;hellip;
Setting up kubeconfig&amp;hellip;
Starting cluster components&amp;hellip;
Kubectl is now configured to use the cluster.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h1 id="we-have-now-launched-an-echoserver-pod-but-we-have-to-wait-until-the-pod-is-up-before-curlingaccessing-it">We have now launched an echoserver pod but we have to wait until the pod is up before curling/accessing it&lt;/h1>
&lt;h1 id="via-the-exposed-service">via the exposed service.&lt;/h1>
&lt;h1 id="to-check-whether-the-pod-is-up-and-running-we-can-use-the-following">To check whether the pod is up and running we can use the following:&lt;/h1>
&lt;p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 ContainerCreating 0 3s&lt;/p>
&lt;h1 id="we-can-see-that-the-pod-is-still-being-created-from-the-containercreating-status">We can see that the pod is still being created from the ContainerCreating status&lt;/h1>
&lt;p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 Running 0 13s&lt;/p>
&lt;h1 id="we-can-see-that-the-pod-is-now-running-and-we-will-now-be-able-to-curl-it">We can see that the pod is now Running and we will now be able to curl it:&lt;/h1>
&lt;p>$ curl $(minikube service hello-minikube &amp;ndash;url)
CLIENT VALUES:
client_address=172.17.0.2
command=GET
real path=/
query=nil
request_version=1.1
request_uri=http://192.168.99.100:8080/&lt;/p>
&lt;p>SERVER VALUES:
server_version=nginx: 1.10.0 - lua: 10001&lt;/p>
&lt;p>HEADERS RECEIVED:
accept=&lt;em>/&lt;/em>
host=192.168.99.100:31721
user-agent=curl/7.54.0
BODY:
-no body in request-%
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>$ APISERVER=$(kubectl config view | grep https | cut -f 2- -d &amp;ldquo;:&amp;rdquo; | tr -d &amp;quot; &amp;ldquo;)&lt;/p>
&lt;p>$ curl $APISERVER &amp;ndash;header &amp;ldquo;Authorization: Bearer $TOKEN&amp;rdquo; &amp;ndash;insecure
{
&amp;ldquo;paths&amp;rdquo;: [
&amp;ldquo;/api&amp;rdquo;,
&amp;ldquo;/api/v1&amp;rdquo;,
&amp;ldquo;/apis&amp;rdquo;,
&amp;ldquo;/apis/&amp;rdquo;,
&amp;ldquo;/apis/admissionregistration.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/admissionregistration.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/apiextensions.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/apiextensions.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/apiregistration.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/apiregistration.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/apps&amp;rdquo;,
&amp;ldquo;/apis/apps/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/authentication.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/authorization.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/autoscaling&amp;rdquo;,
&amp;ldquo;/apis/autoscaling/v1&amp;rdquo;,
&amp;ldquo;/apis/autoscaling/v2alpha1&amp;rdquo;,
&amp;ldquo;/apis/batch&amp;rdquo;,
&amp;ldquo;/apis/batch/v1&amp;rdquo;,
&amp;ldquo;/apis/batch/v2alpha1&amp;rdquo;,
&amp;ldquo;/apis/certificates.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/certificates.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/extensions&amp;rdquo;,
&amp;ldquo;/apis/extensions/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/networking.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/networking.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/policy&amp;rdquo;,
&amp;ldquo;/apis/policy/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/rbac.authorization.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/apis/settings.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/settings.k8s.io/v1alpha1&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io/v1&amp;rdquo;,
&amp;ldquo;/apis/storage.k8s.io/v1beta1&amp;rdquo;,
&amp;ldquo;/healthz&amp;rdquo;,
&amp;ldquo;/healthz/autoregister-completion&amp;rdquo;,
&amp;ldquo;/healthz/ping&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/apiservice-registration-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/apiservice-status-available-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/bootstrap-controller&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/ca-registration&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/extensions/third-party-resources&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/generic-apiserver-start-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/kube-apiserver-autoregistration&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-apiextensions-controllers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-apiextensions-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-kube-aggregator-informers&amp;rdquo;,
&amp;ldquo;/healthz/poststarthook/start-kube-apiserver-informers&amp;rdquo;,
&amp;ldquo;/logs&amp;rdquo;,
&amp;ldquo;/metrics&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.json&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.pb-v1&amp;rdquo;,
&amp;ldquo;/swagger-2.0.0.pb-v1.gz&amp;rdquo;,
&amp;ldquo;/swagger.json&amp;rdquo;,
&amp;ldquo;/swaggerapi&amp;rdquo;,
&amp;ldquo;/ui&amp;rdquo;,
&amp;ldquo;/ui/&amp;rdquo;,
&amp;ldquo;/version&amp;rdquo;
]
}%&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/Overview---Kubernetes-Dashboard.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>奔跑在西安的城墙上</title><link>https://martinliu.cn/blog/%E5%A5%94%E8%B7%91%E5%9C%A8%E8%A5%BF%E5%AE%89%E7%9A%84%E5%9F%8E%E5%A2%99%E4%B8%8A/</link><pubDate>Tue, 12 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E5%A5%94%E8%B7%91%E5%9C%A8%E8%A5%BF%E5%AE%89%E7%9A%84%E5%9F%8E%E5%A2%99%E4%B8%8A/</guid><description>&lt;img src="https://martinliu.cn/images/city-wall_Fotor.jpg" alt="Featured image of post 奔跑在西安的城墙上" />&lt;p>来西安出差很多次了，每次都想绕城墙跑一圈，后来也不止一次看到其他朋友，要么绕城跑，要么在城墙上跑过；因此这根草也就越长越高，这次跑步的动力主要是拔草。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/xian-citywall.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>从上图可以看出，绕城一周的距离是13.49公里，西安的城墙东西方向长，所以是一个比较扁的长方形。我是下午7点钟开始跑的，如果稍微晚几分钟到西门的话，售票处就会关门，我就错过了此次城墙上奔跑的机会，门票是45元，可一天中多次上下城墙使用。幸亏我从酒店（城西的老喜来登酒店）骑着摩拜及时赶到。&lt;/p>
&lt;p>城墙上的地砖较硬度比较大，建议穿缓冲好的鞋。7点半以后，天就彻底黑了，城墙上没有路灯，我有四分之三的距离感觉是摸黑跑，虽然路面是清晰可见的，不过在路过上下斜坡和台阶的时候，还是要加倍小心，毕竟安全第一。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/running-citywall-xian.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>上图除了中间一张城墙砖的图片以外，其余的8张都是我用手机拍的。我想留下真实的时空的记忆。从左中的西门开始，我的路线是顺时针跑的，跑到北门，也就是上中的那张图，天就黑彻底了，完全失去了自然光。我在东南西北的城门都拍照了。在四个角楼也拍了。&lt;/p>
&lt;p>下图是在南门城墙上，往北拍的鼓楼，这个方向的路是西安城的中轴线，这个距离是城墙上离鼓楼最短的距离。也就是800左右的距离。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/WechatIMG39.jpeg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>这次跑步并非是纯粹的拔草之旅，城墙给我们的历史感和沧桑感是非常强烈的。在这个城墙上跑一圈，你大概能够回想起秦黄汉武的盛世，能够想到玄奘西天取经等经典历史片段。感觉朝拜华夏文明历史的意义大于跑步健身。不过也要感谢跑步的习惯，否则没有这么强烈的仪式感，自己的身体和精神也就不会有这么强烈的冲击。这样的文化之旅，的确值得强烈推荐给所有跑友。&lt;/p></description></item><item><title>台大校园游览跑</title><link>https://martinliu.cn/blog/%E5%8F%B0%E5%A4%A7%E6%A0%A1%E5%9B%AD%E6%B8%B8%E8%A7%88%E8%B7%91/</link><pubDate>Sat, 09 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E5%8F%B0%E5%A4%A7%E6%A0%A1%E5%9B%AD%E6%B8%B8%E8%A7%88%E8%B7%91/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-2.jpg" alt="Featured image of post 台大校园游览跑" />&lt;p>趁着参加DevOpsDays Taipei的机会晨跑台大校园。在台北的这几天总体感觉是非常好的，和很多大陆来的好朋友一起，愉快地玩耍了几天。只跑了这一次，算是前往台大打卡留念吧！&lt;/p>
&lt;p>下图算是台大的东门，校门并不是很大，可是进去之后，看到了纵贯南北的校内大路的时候，才会有豁然开朗的感觉。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_5657.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>下图就是中午的校园大道，两边高大的棕榈树凸显了亚热带海洋性气候的感觉。
&lt;img src="https://martinliu.cn/images/IMG_5660.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>下图是清晨的校园大道，时间大概是7点半左右，可以看到太阳已经很高了。
&lt;img src="https://martinliu.cn/images/IMG_5677.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>下图是这条大道的尽头，也就是台北国立大学的主教学楼。
&lt;img src="https://martinliu.cn/images/IMG_5681.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>下图是一栋比较新的教学楼，路两边依然是这种热带的树种
&lt;img src="https://martinliu.cn/images/IMG_5682.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>下图是这次的跑步地图，从Garmin网站上导出的数据文件，用过Google Earth查看截屏得到的图。
&lt;img src="https://martinliu.cn/images/Screen-Shot-2017-09-06-at-10.09.48-AM.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;p>从上图中可以看出我几乎走遍了这个学校的所有主干道，有些地方是教职工宿舍区，有些地方是施工封闭的路段，还由于太阳太晒了，所以并没有凑够10公里整数。
&lt;img src="https://martinliu.cn/images/ntu-running.jpg"
loading="lazy"
alt="year-map"
>&lt;/p>
&lt;h3 id="总结">总结&lt;/h3>
&lt;p>台大校园是台湾的最高学府之一，地位堪比国内的北大、清华和复旦，是台湾学术和科技交流活跃的地点，校内的免费wifi，无墙，而且下载速度在10m左右，网速比大陆快n倍。校园里路面平整，软硬适中，很适合跑步。校内的风景独特而优美，值得来游走一番。如果是北方的人，而且向我一样不是很耐热的，建议早点来，温度和日照强度都低一些。我跑的虽然不远，可是一路上一直是汗流浃背，建议带瓶水。本次跑步是我在台湾的首次跑步，台大校园路线已经进入了我的个人路线集。&lt;/p></description></item><item><title>Game of Cloud 对比三大主流公有云厂商</title><link>https://martinliu.cn/blog/game-of-cloud-%E5%AF%B9%E6%AF%94%E4%B8%89%E5%A4%A7%E4%B8%BB%E6%B5%81%E5%85%AC%E6%9C%89%E4%BA%91%E5%8E%82%E5%95%86/</link><pubDate>Thu, 07 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/game-of-cloud-%E5%AF%B9%E6%AF%94%E4%B8%89%E5%A4%A7%E4%B8%BB%E6%B5%81%E5%85%AC%E6%9C%89%E4%BA%91%E5%8E%82%E5%95%86/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-10.jpg" alt="Featured image of post Game of Cloud 对比三大主流公有云厂商" />&lt;p>在全球范围内，公有云发展的正如火如荼，对IT行业技术的发展产生了很大的影响，从私有云到公有云，到混合云，再到云原生应用和DevOps。这一连串的连锁，也反映出了最近10年来IT行业发展的主流趋势。&lt;/p>
&lt;h2 id="各种味道的云计算">各种味道的云计算&lt;/h2>
&lt;p>参考来源：&lt;a class="link" href="https://www.networkworld.com/article/3173056/cloud-computing/battle-of-the-clouds-amazon-web-services-vs-microsoft-azure-vs-google-cloud-platform.html?upd=1504859548812" target="_blank" rel="noopener"
>Battle of the clouds: Amazon Web Services vs. Microsoft Azure vs. Google Cloud Platform&lt;/a> 作者 Brandon Butler, Senior Editor, Network World ，FEB 22, 2017 12:42 PM PT Which flavor of IaaS public cloud has what you need?&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048603211912.jpg"
loading="lazy"
alt="15048603211912"
>&lt;/p>
&lt;p>对于行业观察者而言Amazon AWS是IaaS公有云市场里，不容争辩的领导者。而Azure正在逐渐缩小与AWS之间的差距，后来者GCP正大踏步的走来。&lt;/p>
&lt;p>根据Gartner对云厂商的深度评估，它分析了云厂商对企业工作负载的满足情况，AWS在最近的三年里，在234项功能对比中，保持着92%的满足度，Azure从75%上升到了88%。GCP也进入到了70%的程度。如下图所示：&lt;/p>
&lt;p>Gartner对IaaS厂商的评估
&lt;img src="https://martinliu.cn/images/15048608641706.jpg"
loading="lazy"
alt="15048608641706"
>&lt;/p>
&lt;p>重点看Required这一列的百分比。这些企业级功能被分类为三个级别：&lt;/p>
&lt;ol>
&lt;li>
&lt;pre>&lt;code>Required 必须具备的；
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>Preferred 最好能具备的；
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;pre>&lt;code>Optional：推荐具备的。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;h3 id="amazon-web-services">Amazon Web Services&lt;/h3>
&lt;p>AWS是IaaS公有云市场的缔造者，它在2006年发布了第一项云服务Simple Storage Service - S3；Gartner认为它是最成熟的公有云服务提供商，它的功能从广度和深度上，都能最广泛的，能覆盖各种使用场景。它的优缺点如下图所示：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048620083336.jpg"
loading="lazy"
alt="15048620083336"
>&lt;/p>
&lt;p>AWS的优缺点
优点 缺点
最大和最成熟的公有云IaaS厂商，具有最强大和多样性的功能集合，被Garter称为：最广泛使用场景里的”安全之选“ 尽管AWS的入门和上手是容易的，它还是需要专业人士的管理和驾驭。由于它的功能性的宽广，这会让用老用于也难于面对多种的实施方案，需要第三方的专业顾问帮忙。
市场里的思想领袖和创新者，不断推出各种IaaS的新特性，例如Lambda无服务计算平台 对于用户的时间和实施能力而言，AWS有时候创新速度太快了，用户的知识很快就会过时，需要他们持续地更新AWS功能和平台的知识。
AWS的云市场具有最广泛的第三方工具的选择。而且它的顾问和专家的人数也是最多的，他们可以帮助到AWS的用户。 AWS一直以来都不是追求高价格。用户在每次购买服务的时候都有不同折扣，有时候需要使用第三方的工具帮忙管理成本。&lt;/p>
&lt;p>从技术的角度看，AWS持续创新的速度和动力都是非常强大的，服务更新的频率和速度非常快，在某种程度上超过了客户的适应和学习的速度，增加了客户的学习成本。它的SLA的规定有时候过于繁琐的，例如：需要客户的工作负载必须跨两个AZ部署，这会增加客户的成本。刨除以上所有对于客户的挑战，Gartner依然称之为云计算使用的“安全之选”。&lt;/p>
&lt;h3 id="microsoft-azure">Microsoft Azure&lt;/h3>
&lt;p>微软Azure逐渐变成了//Application development platform as a service (PaaS)的PaaS平台，其实它可以提供包括IaaS、PaaS和SaaS等广泛的服务。微软Azure最大的优势可能是他广大的企业客户基础。很多客户已经把Office系统迁移到了Office 365 SaaS服务上了，微软继续给用户提供大量的IaaS使用折扣（点卡），鼓励用户上云。&lt;/p>
&lt;p>Azure从功能角度看不管是计算、存储，还是数据库和IoT等方面，都与AWS非常的接近和匹配。微软试图通过混合云的策略区别于AWS。因此它提供了Azure Stack私有云方案。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048652573559.jpg"
loading="lazy"
alt="15048652573559"
>&lt;/p>
&lt;p>Microsoft Azure的优势和劣势
优点 缺点
微软在构建Azure全球的数据中心基础设施方面和云功能开发上已经做出了巨大的投资。Gatner说Azure在IaaS公有云方面是”足够好了” 尽管Aure具有了大多数Gartner企业工作负载所需的功能，这些产品和API在某些情况下还不像它的友商AWS那样的成熟。
微软和几乎所有的大型企业具有长期和稳定的关系，在现有的企业协议EA里提供了非常具有吸引力的Azure的供给。 与Azure云集成的第三方公司的产品数量有限，相对于AWS，它的专家顾问社区也比较小。
微软Azure提供集成化的IaaS、PaaS和SaaS（Office 365）。Azure是已经多年投资于微软系列产品者的理想的选择。它的混合云的方案是很有吸引力的，包括Hyper-V，Windows Server，Active Direcitory， Visual Studio 和最近的Azure Stack。 在区域的设计中，Azure和AWS不同，它的Zone的概念和AWS不同，这会让工作负载的备份相对的稍微有点难。尽管在支持开源和非微软技术方面花费了大量的精力，微软公司任然不算是一个开源的领导者，而AWS和Google的云则是开源技术工作负载的一个更中立的选择。&lt;/p>
&lt;p>显然Azure最适合运行的是微软类型的工作负载，或者最适用于把已有的微软平台应用跑在公有云中。对于那些企业客户的EA，其中会包含一定数目的Azure点卡，不用可惜，用起来的话，Azure的使用还是比较经济的。&lt;/p>
&lt;p>Azure没有AZ的概念可谓是技术上的硬伤，比起AWS，这会导致跨区的备份略显麻烦一点。 业内Azure的专家和顾问还是相对较少。Gartner IaaS Magic Quadrant认为Azure对于大多数企业工作负载而言，已经是 足够用了“good enough”。&lt;/p>
&lt;h3 id="google-cloud-platform">Google Cloud Platform&lt;/h3>
&lt;p>GCP与Azure类似，开始于PaaS，然后扩展到IaaS。分析师认为它特别适合跑某些使用场景，包括容器、大数据和机器学习。GCP在全球范围的数据中心相对较少。&lt;/p>
&lt;p>Google也有类似于Office 365 的办公套件SaaS服务，是G Suite，它的价格策略是，用的人越多，单价越便宜。&lt;/p>
&lt;p>GCP还是在发展中的云计算，从功能上讲，根据Gartner的年度评估，GCP仅满足70%的必选功能。技术上的优势在于：Google是开源的大数据（Hadoop、 Spark 等）技术、机器学习技术（Tensorflow）和容器编排技术（Kubernetes），它在开发者社区里从来没有缺少过粉丝，它对技术发展的影响不可小觑，这些影响最终都可以通过吸引用户使用GCP来使Google收益，并把这些技术变现。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048666386599.jpg"
loading="lazy"
alt="15048666386599"
>&lt;/p>
&lt;p>Google Cloud Platform&lt;/p>
&lt;p>在2016年Google招聘了VMWare的联合创始人Diane Greene，这标志着它计划向企业级能力和市场挺进。
Game of Cloud 公有云的游戏&lt;/p>
&lt;p>分析师认为对于大多数云的用户来说，并不是做的“零和游戏”的选择，很多人使用多云的策略。多云管理平台厂商RightScale，对1000个用户的调查分析 可以看出，用户57%的应用在AWS上，34%的应用在Azure上，15%跑在GCP上。85%的 RightScale的用户使用多云的策略，可能是：公有云+私有云；或者公有云A+公有云B+？？。&lt;/p>
&lt;h2 id="硬碰硬功能对比">硬碰硬功能对比&lt;/h2>
&lt;h3 id="计算">计算&lt;/h3>
&lt;p>&lt;img src="https://martinliu.cn/images/15048779648996.png"
loading="lazy"
alt="15048779648996"
>&lt;/p>
&lt;p>AWS Azure GCP
EC2 云中的虚拟服务器 Virtual Machines 在几秒钟内预配好 Windows 和 Linux 虚拟机 Compute Engine: Run VMs on Google&amp;rsquo;s infrastructure
EC2 Container Service/Registry 运行和管理 Docker 容器，容器镜像仓库服务。 Service Fabric 在 Windows 或 Linux 上开发微服务和安排容器 Container Engineer: Container cluster, Workloads, Discovery&amp;amp;load balancing, Configuration, storage
Lightsail 启动和管理虚拟专有服务器 App Service 快速创建适用于 Web 和移动的强大云应用 Cloud Launcher: Cloud Launcher lets you quickly deploy software on Google Cloud Platform
Elastic Beanstalk 运行和管理 Web 应用 Cloud Services 创建高度可用且可无限缩放的云应用程序和 API App Engine: PaaS for apps and backends
Lambda 运行您的代码以响应事件 Functions 使用无服务器代码处理事件 Cloud Functions : Serverless Applications on Google’s Infrastructure
Batch 运行任意规模的批处理作业 Batch 云规模的作业计划和计算管理 无专门的服务，Google App Engine provides a Cron service. Using this service for scheduling and Google Cloud Pub/Sub for distributed messaging, you can build an application to reliably schedule tasks across a fleet of Compute Engine instances.
Auto Scaling 自动化弹性扩展 Virtual Machine Scale Sets 管理并扩展到数千台 Linux 和 Windows 虚拟机 Instance Groups: managed instance groups can automatically scale the number of instances in the group.&lt;/p>
&lt;p>从概念上讲，提供的虚拟机功能是没什么差别的，包括虚拟机的自动化扩容和缩容功能都是类似的。区别在于其他的相关功能上。&lt;/p>
&lt;p>AWS在Serverlesss架构方面的Lambda是最领先的，它有最丰富的云市场，能提供最丰富的第三方应用服务，通过Lightsail和云市场都可以一键式启动特定配置的预装应用虚拟机/虚拟机集合。&lt;/p>
&lt;p>Azure在发布Winddows客户端应用上是有优势的。在其它功能上基本上可以和AWS对齐。&lt;/p>
&lt;p>GCP的明显优势是GEK，K8S如日中天的热度刺激人么对其GKE和GCE的关注和使用。&lt;/p>
&lt;p>###全世界数据中心覆盖&lt;/p>
&lt;h4 id="aws-location-数据中心在全球的覆盖">AWS Location 数据中心在全球的覆盖&lt;/h4>
&lt;p>AWS Regions and Availability Zones&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048815252579.png"
loading="lazy"
alt="15048815252579"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://aws.amazon.com/about-aws/global-infrastructure/" target="_blank" rel="noopener"
>https://aws.amazon.com/about-aws/global-infrastructure/&lt;/a>&lt;/p>
&lt;p>已经开放的区和AZ：
US East
N. Virginia (6), Ohio (3)&lt;/p>
&lt;p>US West
N. California (3), Oregon (3)&lt;/p>
&lt;p>Asia Pacific
Mumbai (2), Seoul (2), Singapore (2), Sydney (3), Tokyo (3)&lt;/p>
&lt;p>Canada
Central (2)&lt;/p>
&lt;p>China
Beijing (2)&lt;/p>
&lt;p>Europe
Frankfurt (3), Ireland (3), London (2)&lt;/p>
&lt;p>South America
São Paulo (3)&lt;/p>
&lt;p>AWS GovCloud (US-West) (2)&lt;/p>
&lt;p>绿色的圈是要开放的区。&lt;/p>
&lt;p>China&lt;/p>
&lt;p>France&lt;/p>
&lt;p>Hong Kong&lt;/p>
&lt;p>Sweden&lt;/p>
&lt;p>AWS GovCloud (US-East)&lt;/p>
&lt;h4 id="azure-region">Azure Region&lt;/h4>
&lt;p>&lt;a class="link" href="https://azure.microsoft.com/en-us/regions/" target="_blank" rel="noopener"
>https://azure.microsoft.com/en-us/regions/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/15048814480576.png"
loading="lazy"
alt="15048814480576"
>&lt;/p>
&lt;p>蓝色三角的是要开放的区。&lt;/p>
&lt;h4 id="gcp-的-cloud-locations">GCP 的 Cloud Locations&lt;/h4>
&lt;p>&lt;a class="link" href="https://cloud.google.com/about/locations/" target="_blank" rel="noopener"
>https://cloud.google.com/about/locations/&lt;/a>
&lt;img src="https://martinliu.cn/images/15048816324535.png"
loading="lazy"
alt="15048816324535"
>&lt;/p>
&lt;p>蓝色的是要开放的区。&lt;/p>
&lt;p>GCP的另外一个卖点是它的全球高速光缆链接的网络。
&lt;img src="https://martinliu.cn/images/15048819181658.png"
loading="lazy"
alt="15048819181658"
>&lt;/p>
&lt;h3 id="存储服务">存储服务&lt;/h3>
&lt;p>参考来源： &lt;a class="link" href="https://www.networkworld.com/article/3191520/cloud-computing/deep-dive-on-aws-vs-azure-vs-google-cloud-storage-options.html" target="_blank" rel="noopener"
>https://www.networkworld.com/article/3191520/cloud-computing/deep-dive-on-aws-vs-azure-vs-google-cloud-storage-options.html&lt;/a>&lt;/p>
&lt;h4 id="块存储对比">块存储对比&lt;/h4>
&lt;p>&lt;img src="https://martinliu.cn/images/15048819776777.jpg"
loading="lazy"
alt="15048819776777"
>&lt;/p>
&lt;h4 id="对象存储">对象存储&lt;/h4>
&lt;p>&lt;img src="https://martinliu.cn/images/15048820049019.jpg"
loading="lazy"
alt="15048820049019"
>&lt;/p>
&lt;h4 id="文件存储">文件存储&lt;/h4>
&lt;p>&lt;img src="https://martinliu.cn/images/15048820280796.jpg"
loading="lazy"
alt="15048820280796"
>&lt;/p>
&lt;h2 id="game-of-clouds">Game of Clouds&lt;/h2>
&lt;p>AWS 2017 云市场应用排名&lt;/p>
&lt;p>From: &lt;a class="link" href="https://www.cloudendure.com/blog/aws-cloud-computing-map-game-of-clouds-2017" target="_blank" rel="noopener"
>https://www.cloudendure.com/blog/aws-cloud-computing-map-game-of-clouds-2017&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Game-of-Clouds-12.07.17.jpg"
loading="lazy"
alt="Game-of-Clouds-12.07.17"
>&lt;/p>
&lt;p>AWS的云市场反映出它强大的第三方伙伴和生态系统。&lt;/p>
&lt;p>&lt;strong>Azure Stack&lt;/strong>&lt;/p>
&lt;p>这是它区别于其它云的功能点，是可以在企业数据中心里部署的私有云IaaS平台。它与Azure公有云遥相呼应，为客户提供了混合云方案。&lt;/p>
&lt;p>本地运行 Azure 服务 根据你的需求正确组合云和本地部署来满足业务和技术要求。Azure 基础结构即服务 (IaaS) 传输远优于传统虚拟化。借助虚拟机规模集，新式工作负荷的真正自动扩展可实现快速部署。一致的 Azure 平台即服务 (PaaS) 功能将混合部署选择和可移植性引入云应用程序。因此，可在本地运行完全托管的 PaaS、无服务器计算、分布式微服务体系结构和容器管理。&lt;/p>
&lt;p>生成跨混合云环境的新式应用程序 Azure Stack 是 Azure 的扩展，将云计算的敏捷性和快节奏创新引入到本地环境。只有 Azure Stack 才能让你从组织的数据中心提供 Azure 服务，同时适度平衡灵活性和控制程度，实现真正一致性的混合云部署。&lt;/p>
&lt;p>利用一致的环境加速开发 无论应用是在 Azure 还是在 Azure Stack 上运行，开发人员都能以相同的方式生成和部署应用程序，从而实现工作效率最大化。一套工具 - 使用相同的应用程序模块、自助服务门户和由 Azure Resource Manager 启用的 API。常规 DevOps — 通过 Jenkins 和 Visual Studio Team Services 体验持续部署和集成，通过 Chef 和 Azure PowerShell DSC 扩展体验自动化。 开源 — 使用 Java、Python、Node.js、PHP、Docker 集成式容器、Mesosphere DC/OS 和 Cloud Foundry 等众多开源技术。&lt;/p></description></item><item><title>不一样的台北，不一样的感受</title><link>https://martinliu.cn/blog/%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E5%8F%B0%E5%8C%97%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E6%84%9F%E5%8F%97/</link><pubDate>Thu, 07 Sep 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E5%8F%B0%E5%8C%97%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84%E6%84%9F%E5%8F%97/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-11.jpg" alt="Featured image of post 不一样的台北，不一样的感受" />&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/yeliu-park.jpg"
loading="lazy"
alt="yeliu-park"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/qingtongqi.jpg"
loading="lazy"
alt="qingtongqi"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/ntu.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/szs.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>Las Vegas流水账-大峡谷篇</title><link>https://martinliu.cn/blog/las-vegas%E6%B5%81%E6%B0%B4%E8%B4%A6-%E5%A4%A7%E5%B3%A1%E8%B0%B7%E7%AF%87/</link><pubDate>Sun, 13 Aug 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/las-vegas%E6%B5%81%E6%B0%B4%E8%B4%A6-%E5%A4%A7%E5%B3%A1%E8%B0%B7%E7%AF%87/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-11.jpg" alt="Featured image of post Las Vegas流水账-大峡谷篇" />&lt;p>Las Vegas到大峡谷（Grand Canyon National Park）的距离并不遥远，但是离最佳风景观看点南峡（South RIM）还有大半天的路程。很值得去，绝对不会后悔。
行程&lt;/p>
&lt;p>我们走的路线和预先计划的稍微有些差异，主要是受了同时Danny的影响，他曾经自驾车在大峡谷玩过。根据他的建议，我们设计了大峡谷南峡的两日游。路线如下：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/las-grand-canyon-np.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>从拉斯维加斯出发–93号公路–40号公里–住在威廉斯小镇–64号公路–大峡谷国家公园（南峡）。本来计划先去游玩胡夫大坝、西峡（Eagle Point和Guano Point），之后晚上住在威廉斯小镇，第二天再去南峡一日游。西峡被Danny果断的否定了，他建议我们要在南峡的主景点多花时间；现在看来这个决定是对的。&lt;/p>
&lt;p>我们在10号早晨4点起床，出发前往大峡谷。在出门的第一个小时，里别导航搞得几乎是崩溃的。出现了几个状况：&lt;/p>
&lt;p>用iPad上的Google Map下载了三个州的离线地图是不好用的，甚至让iPad链接上国内手机热点的型号后，GPS定位还是不正常工作的（不知道是否是我的iPad的问题待查）。
用国内iPhone手机做以上相同的操作，问题是一样的。
用iPhone手机自带的苹果地图，能工作，可是由于没有离线地图，使用的时候略感延迟，也害怕使用过多的流量，因此还是放弃了。
大家各自用手机导航，有人的路线是南峡方向，有人是走北峡方向。在经过路口时大家意见不统一了，才意识到问题，大家都有中枪的感觉。
最后发现用国内手机，在来之前，在家下载好的三个州的Google Map离线地图是唯一好使的方案，在使用过程中可以完全不需要开数据网络，可以用飞行模式。
从拉斯维加斯市区到威廉斯小镇的酒店的路程大约是350公里，整个行程差不多花了5个小时左右（第一个小时忽略不计呵呵）。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Quality-inn.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>在酒店放下行李，checkin了以后，我们就奔向了大峡谷南峡的南门（东门才是正门），大约从酒店出发，又走了一个小时多才进入公园，车停在了Bright Angle附近的停车场。接着开始了一天的大峡谷之旅。
大峡谷-Day1&lt;/p>
&lt;p>我们按照Danny的建议先乘坐西线（橙色）的Bus，到达了西峡的最远端（Herimt Point），在哪里稍微观赏了一下后，正好是午餐实践，在哪里的零食店一人买了一个三明治吃。然后回程的Bus在第一个停靠点下车，开始了徒步5.9公里的观赏，也就是从第一个停车点走到第二个停车点，回程总共三个停车点。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/grand-canyon-d1.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>这一段路在大峡谷当中，景色算不上是最好的，可是这段路包括了Green Road这一段路。这一段路里包括了大峡谷里的所有主要种类的树木和植物。大量的信息展示牌上介绍着各种动植物的信息，在途中前后碰到了三只鹿，可以算是给徒步者的一个奖励，这几只鹿貌似并不把人类放在眼里，它们各自闲散地吃着树叶，只有在人特别靠近的时候，才不耐烦的走开。&lt;/p>
&lt;p>在路上碰见了不少骑自行车的人，他们很多是以家庭为单位了，三五成群的前后照应着向前行驶而去，有些人的车是自己带的，有些人是在公园里面租车骑行的。&lt;/p>
&lt;p>我们的徒步的路段是：Pima Point到Mojave Point。在Mojave Point看到了著名的、教科书般的、明显的6层、分层地质峡壁和讲解的展板。&lt;/p>
&lt;p>在我们正要回去的时候，我们眼睁睁的错过了一辆Bus。在等下一辆Bus到来的时候遭遇到突如其来的阵雨的袭击。这里的天气很多变，雨滴打在身上特别凉。不一会就把我的上身都打湿了，我只穿了短袖和短裤，所以很快就迫使我我不得不躲到了树下。第二辆Bus在20多分钟之后，终于来了，上车之后，在回程的路上，阵雨下的更大了，能挤上车，顿时感觉自己很幸运。&lt;/p>
&lt;p>在回到了Right Angel Lodge的停车场之后，想着Gary应该在温暖的车里等着我们呢！可是没想到车里没有人，此时从车站冒雨跑过来的三个人鞋子都湿透了，冷风嗖嗖的刮着。大家躲在一个酒店房间的屋檐下，打着哆嗦的等了几分钟，后来觉得这样不行，就各自四处寻找拿着车钥匙的Gary去了。&lt;/p>
&lt;p>我在Lookout Studio附近和Bright Angle Lodge的商店里面寻找Gary的同时，倒也算是另外一番游览；找了30分钟以后，觉得应该回车子看下了，回去后发现Gary已经和曾旭在车里了，赶紧上车喝水休息。等了一会吴东也回来了。这时候雨还在下，时间大约是下午3点多，我们大家一致觉得回酒店休息了，结束了第一天新的游玩。
晚餐&lt;/p>
&lt;p>回到了酒店之后，我们进了房间，我赶紧脱下深山湿漉漉的衣服和鞋子，洗了个热水澡，换上干净温暖的衣服，直接钻进了被窝，昏昏沉沉的休息了大约一个多小时，也正好到了饭点了，外面的雨星星点点的没有停。我们就开车去往镇上吃饭了。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/cafe66.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>我们先走进了一家美式当地的餐厅，发现菜单基本看不懂，就走人了。然后打算去吃一家意大利餐厅，发现等座位的人还是很多。后来我建议来这家 Cafe 66 Bar and Grill。这家是一家很地道的美式烧烤餐厅。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/dinner.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>我点的是上图的烤牛肉，其它人主要点的是下图的烤猪排。肉都烤的很嫩很香，几乎都吃不完就吃到顶了，大家饱餐一顿之后，回去妥妥的休息了。&lt;/p>
&lt;p>大峡谷-Day2&lt;/p>
&lt;p>第二天早晨起来大约是7点多，我睡的还行。大家去吃早餐，我泡了碗麦片牛奶、烤了两片土司、烤了一个圈圈面包、乘了一些炒鸡蛋和小香肠、倒了一杯橙汁，吃完了这些后吃了两个苹果。在这温暖的小店里，在一个没有任何赶路压力的行程上，我在这一周的行程当中，在此刻才算是真真的满血复活了。&lt;/p>
&lt;p>早餐后，我们就继续上路了。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/grand-canyon-d2.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>我们先把车停在了Visitor Center的停车场，然后从Mather Point走到了Yavapai Point and Geology Museum。一路上才发现好多大峡谷的明信片照片都是从这里取景拍摄的，这一段是大峡谷游览的必经之旅。&lt;/p>
&lt;p>然后我们驱车前往大峡谷南峡的最东头，也就是Desert View观景点，其实这个景点并不是东边的最后一个景点。我们在哪里看完之后，想一直往东开，看看到底还有什么景点。其实看到了不少的观景台，甚至于在密林中的头角硕大的鹿。最后走出了公园的东门，在往外开，才来到了公园的标识牌设立处。在往外开了几英里之后，就返回了。其实大家想起了再继续往北走180多公里就是著名的羚羊峡谷，Windows7桌面图片中出现过这个景点。可是行程来回要大约4个小时（370公里以上），在我的建议下大家还是忍痛放弃了这个景点。否则今天早晨应该还需要4点出发，回程晚上11点的飞机，想想当天还要赶飞机回家，其实压力还是有的。&lt;/p>
&lt;p>我们从公园外又兜了一圈回来之后，我们中途停在了Tusyan小镇上吃了午餐麦当劳，休息片刻之后继续上路了。路上我们加满油一下跑到了胡佛水坝，到了才知道最后一个游览是5点钟，虽然我已经尽力开快车赶路了，可是还是错过了。稍微浏览一下之后，接着回机场还车。然后座免费bus去机场了。晚上饭是吴东请客。大家在机场踏实的等了2个多小时就登机了。
小节&lt;/p>
&lt;p>这次出行美中不足的是：没有把徒步的装备带好，包括防晒、防雨措施；各种长短方便更换的速干衣裤，帽子等。还很重要的户外徒步的鞋子。&lt;/p>
&lt;p>在开车方面，三个司机的好处非常明显，这样大家分担着开非常有乐趣和安全。&lt;/p>
&lt;p>有可能的话大峡谷南峡的游览方向可以调整为，从东北方向南下过来，也就是羚羊峡谷的方向过来。这样的好处是，从公园东门进来之后，其实在Desert view之前有很多不错的路边的观景点，而且停车特别方便和顺手，这样的方式可以更充分的利用汽车的便利程度，多看了景点，还不累。&lt;/p>
&lt;p>Hoover Dam错过了，我还是觉得有些小小的遗憾的。因为这个地方就在路上，时间安排的合理的话，能够参加上他们的水坝游览，里里外外都看一遍，应该还是很不错的。毕竟很多影视剧都到此取过景。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/np-passport.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>总之这次拉斯维加斯之旅还是很棒的，除了去打枪射击的这一项没有Checked之外，其它的都算是完美收官了。这次入手了美国国家公园的Passport，用它来记录和收集所到过的国家公园的印章，以后可以统计一下，一共可以去几个了。&lt;/p></description></item><item><title>Las Vegas流水账-进城篇</title><link>https://martinliu.cn/blog/las-vegas%E6%B5%81%E6%B0%B4%E8%B4%A6-%E8%BF%9B%E5%9F%8E%E7%AF%87/</link><pubDate>Tue, 08 Aug 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/las-vegas%E6%B5%81%E6%B0%B4%E8%B4%A6-%E8%BF%9B%E5%9F%8E%E7%AF%87/</guid><description>&lt;img src="https://martinliu.cn/images/las-vegas-strip-at-night.jpg" alt="Featured image of post Las Vegas流水账-进城篇" />&lt;p>Las Vegas-拉斯维加斯，国人简称拉丝，美国人简称Vegas/威嘎斯。来过很多次美国，可是这个城市还是第一次造访，写个流水账记录一下。
航班&lt;/p>
&lt;p>这次来回都是韩国航空。从北京飞首尔转机直飞美国。这也是第一次乘坐韩国航空公司的飞机，第一次入境韩国。&lt;/p>
&lt;p>中午从北京出发的飞机晚点了30分钟后起飞了，在3点左右达到首尔机场，沿着指示标记，走向国际转机通道，经过安检后就进入了下图的首尔国际机场航站楼。&lt;/p>
&lt;p>这个航站楼还是很大的，里面有各种免税商店，包括化妆品、烟酒、食品和各种奢侈品。为了到此一游我也买了一副墨镜（Rudy意大利产），在此留个纪念；价格上比美亚可能要便宜20刀左右，而且还免税。基本上觉得还是划算的。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_5058.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>与其它城市的几位同事及其家属碰头以后，我们四处转了转，由于转机的时间比较长，大家相谈甚欢，还是相当的休闲和愉快的。在那一刻也非常同情另外一波从北京出发的同事们，他们的飞机出现了机械故障。&lt;/p>
&lt;p>大约七点多大家想找个地方吃点饭，结果由于机场的人超级多，想找个吃饭的地方，居然不能找到一个能让我们四五个人一起坐下的饭馆，随即放弃吃饭的想法，买了杯星巴克了事。在夕阳的余晖下，大家津津有味地听宇宙同学普及各种会员身份使用攻略和褥羊毛秘籍，不知不觉也到了登机时间了。登机后吃了两顿饭，看了一部电影，快到的时候睡了大约2小时，然后就准时的在当地时间周日下午5点到达了。然后大家商量之后，果断的打了一辆Uber，直奔拉丝的北奥特莱斯去也。
进城&lt;/p>
&lt;p>汽车载着我们穿过市区的主街道，往北走直奔奥特莱斯。
&lt;img src="https://martinliu.cn/images/IMG_5061.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>这个奥特莱斯还是蛮大的，在8点下班前，我不紧不慢的买了两双鞋和一件T恤，之后和同事们一起打出租车会到酒店。
&lt;img src="https://martinliu.cn/images/IMG_5063.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>到 Aria酒店 Checkin了之后，进房间放下行李箱，同事们一起去酒店的Pool Bar吃晚饭，具体说是一个欢迎酒会。其实也吃不上什么正式的晚餐。当天晚上还是有时差的感觉，到晚上3点才昏昏睡去，睡了4个小时。早晨起来感觉还行，起床后完成了会议登记，接着去吃早餐，早餐是我吃过的所有会务餐中最差的，不提了略过。接着进入开会的节奏。
&lt;img src="https://martinliu.cn/images/IMG_5066.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>大会开始&lt;/p>
&lt;p>开场主持人是加拿大的一个Sales，他的气势和技巧还是很专业的，据说粗口的风格是与HR和公司的VP们请示过的，不过的确达到了逗乐和暖场的目的。随着“镜子”舞团的暖场舞，视频上播放了公司大佬们录制的视频，hipop风格的逗乐视频。由于印度裔大佬们较多，我看下来有点宝莱坞的感觉，哈哈！
&lt;img src="https://martinliu.cn/images/IMG_5068.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>公司的大佬们悉数登场，各尽其职的讲述自己的部分。讲解了公司的市场前进和进入4B公司的计划。下午的各种session完了之后，晚餐也还是社交为主的，去了一个高尔夫训练场，大家基本也以聊天为主，至于晚餐么，我忽略不写了。
&lt;img src="https://martinliu.cn/images/las-grand-canyon-np.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;h3 id="night-walk">Night walk&lt;/h3>
&lt;p>晚餐之后和同事们一起来夜游Vegas的主大街夜景。从美高梅酒店走路到埃菲尔铁塔酒店，最后回房间休息。
&lt;img src="https://martinliu.cn/images/IMG_5077.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>横穿美高梅酒店赌场，感觉MGM的人气确实很旺，比其它酒店生意好。
&lt;img src="https://martinliu.cn/images/IMG_5083.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>经过自由女神像的纽约酒店赌场。
&lt;img src="https://martinliu.cn/images/IMG_5088.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>走到埃菲尔铁塔附近
&lt;img src="https://martinliu.cn/images/IMG_5109.jpg"
loading="lazy"
alt="szs"
>&lt;/p>
&lt;p>看完百樂宮酒店（Bellagio）的音乐喷泉后，走路回到酒店。&lt;/p>
&lt;p>考虑到最后两天去大峡谷的路程比较远，希望能早走，我取消了之前的租车订单后，又下单订车，提前了一天取车，而且取车的地方就选择了酒店楼下。这样时间就不紧张，而且取车更方便了。&lt;/p>
&lt;p>这就是此次拉斯维加斯之行的第一部分，航班安全顺利到达，进城后参加了一天平淡无奇的公司大会。大概领略了一下这个极致的城市。&lt;/p></description></item><item><title>互联网规模的超融合平台</title><link>https://martinliu.cn/blog/%E4%BA%92%E8%81%94%E7%BD%91%E8%A7%84%E6%A8%A1%E7%9A%84%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0/</link><pubDate>Mon, 20 Feb 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E4%BA%92%E8%81%94%E7%BD%91%E8%A7%84%E6%A8%A1%E7%9A%84%E8%B6%85%E8%9E%8D%E5%90%88%E5%B9%B3%E5%8F%B0/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-3.jpg" alt="Featured image of post 互联网规模的超融合平台" />&lt;p>nu.shool 牛学院系列以视频加文字的形式，向您展示Nutanix云平台的技术特性和细节。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/Tech_TopX-_Converged_Platform_mp4.png"
loading="lazy"
alt="Converged_Platform"
>&lt;/p>
&lt;p>本期视频是由《Nutanix圣经》的作者Steven Poitras，向您介绍Nutanix超融合系统架构。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://martinliu.cn/images/bible-top.png"
loading="lazy"
alt="bible"
>&lt;/p>
&lt;p>《Nutanix圣经》章节推荐。&lt;/p></description></item><item><title>2017年DevOps采用和趋势现状-信息图</title><link>https://martinliu.cn/blog/2017%E5%B9%B4devops%E9%87%87%E7%94%A8%E5%92%8C%E8%B6%8B%E5%8A%BF%E7%8E%B0%E7%8A%B6-%E4%BF%A1%E6%81%AF%E5%9B%BE/</link><pubDate>Sat, 11 Feb 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/2017%E5%B9%B4devops%E9%87%87%E7%94%A8%E5%92%8C%E8%B6%8B%E5%8A%BF%E7%8E%B0%E7%8A%B6-%E4%BF%A1%E6%81%AF%E5%9B%BE/</guid><description>&lt;img src="https://martinliu.cn/images/BingWallpaper-2017-02-10_Fotor.jpg" alt="Featured image of post 2017年DevOps采用和趋势现状-信息图" />&lt;p>&lt;img src="https://martinliu.cn/images/14868257964355.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在过去的一两年里DevOps持续升温，逐渐成为一场IT行业内的谁不可回避的运动。&lt;/p>
&lt;h2 id="devops-定义">DevOps 定义&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/1-X.jpg"
loading="lazy"
alt="1-X"
>&lt;/p>
&lt;p>我个人是一直以来反对给DevOps做一个名词解释样式的定义的。不过这种需求实在强大，摘抄几条供大家参考，上图是一种定义。&lt;/p>
&lt;blockquote>
&lt;p>定义2：You cannot buy DevOps and install it. DevOps is not just automation or infrastructure as code. DevOps is people following a process enabled by products to deliver value to end users. &amp;ndash; Donovan Brown, Microsoft DevOps Program Manager&lt;/p>
&lt;/blockquote>
&lt;p>以上出自：&lt;a class="link" href="http://www.donovanbrown.com/post/2015/09/01/what-is-devops" target="_blank" rel="noopener"
>Donovan&amp;rsquo;s blog post on &amp;ldquo;What is DevOps&amp;rdquo;.&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>定义3：DevOps（Development和Operations的组合词）是一种重视“软件开发人员（Dev）”和“IT运维技术人员（Ops）”之间沟通合作的文化、运动或惯例。透过自动化“软件交付”和“架构变更”的流程，来使得构建、测试、发布软件能够更加地快捷、频繁和可靠。&lt;/p>
&lt;/blockquote>
&lt;p>以上出自：&lt;a class="link" href="http://zh.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener"
>维基百科 Wikipedia - DevOps&lt;/a>&lt;/p>
&lt;h2 id="兴趣和搜索量">兴趣和搜索量&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/2.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>以上结果来自Google趋势，上图是从2004年到现在，一共13年的趋势图。下面再看一下最近五年的趋势详情。&lt;/p>
&lt;h3 id="最近5年的搜索趋势">最近5年的搜索趋势&lt;/h3>
&lt;p>&lt;img src="https://martinliu.cn/images/2-2.png"
loading="lazy"
alt="2-2"
>&lt;/p>
&lt;h3 id="国际关注度">国际关注度&lt;/h3>
&lt;p>&lt;img src="https://martinliu.cn/images/2-1.png"
loading="lazy"
alt="2-1"
>&lt;/p>
&lt;h3 id="相关话题和查询">相关话题和查询&lt;/h3>
&lt;p>&lt;img src="https://martinliu.cn/images/2-3.png"
loading="lazy"
alt="2-3"
>&lt;/p>
&lt;h2 id="关注者年龄和性别">关注者年龄和性别&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/3.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>上图年龄分布情况。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/4.jpg"
loading="lazy"
alt="4"
>
上图是性别分布情况。&lt;/p>
&lt;h2 id="devops应用状态">DevOps应用状态&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/5.jpg"
loading="lazy"
alt="5"
>&lt;/p>
&lt;ul>
&lt;li>正在应用的:从66%上升到74%&lt;/li>
&lt;li>没有应用的:从19%下降到16%&lt;/li>
&lt;li>不知道的：从15%下降到6%&lt;/li>
&lt;/ul>
&lt;h2 id="devops-checklist">DevOps Checklist&lt;/h2>
&lt;p>不管你做不做DevOps？不管你知不知道你是不是DevOps？不管你从哪个角度入手DevOps？看看这个清单中有几项和您相关，就知道你和DevOps的关系是否密切。
&lt;img src="https://martinliu.cn/images/6.jpg"
loading="lazy"
alt="6"
>&lt;/p>
&lt;p>检查清单如下：&lt;/p>
&lt;ul>
&lt;li>基础架构即代码&lt;/li>
&lt;li>每天多次部署
&lt;ul>
&lt;li>研发人员直接部署都生产环境&lt;/li>
&lt;li>研发和运维共同奋战在支持的一线&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>消除研发和运维的部门墙&lt;/li>
&lt;/ul>
&lt;h2 id="devops流程">DevOps流程&lt;/h2>
&lt;p>下面看看两种相关流程图。
&lt;img src="https://martinliu.cn/images/7.jpg"
loading="lazy"
alt="7"
>&lt;/p>
&lt;ul>
&lt;li>持续业务计划&lt;/li>
&lt;li>协作型软件开发&lt;/li>
&lt;li>持续测试&lt;/li>
&lt;li>持续发布和部署&lt;/li>
&lt;li>持续监控&lt;/li>
&lt;li>协作式客户反馈和优化&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/C_Success_with_enterprise_DevOps_CN_pdf.jpg"
loading="lazy"
alt="C_Success_with_enterprise_DevOps_CN_pdf"
>&lt;/p>
&lt;p>上图来源于《Exin DevOps Master 白皮书 - 企业DevOps的成功之路》 作者：Koichiro(Luke) Toda、Nobuyuki Mitsui、译者：刘颋，史鹏程；审校：EXIN，刘征&lt;/p>
&lt;ul>
&lt;li>计划&lt;/li>
&lt;li>需求&lt;/li>
&lt;li>设计&lt;/li>
&lt;li>开发&lt;/li>
&lt;li>部署&lt;/li>
&lt;li>运营&lt;/li>
&lt;li>终止&lt;/li>
&lt;/ul>
&lt;h2 id="7大devops-趋势">7大DevOps 趋势&lt;/h2>
&lt;ol>
&lt;li>DevOps将进入主流，并产生大量关注；因此2017年将成为“DevOps之年”。&lt;/li>
&lt;li>随着DevOps的推广，三个C：持续集成、持续部署和持续交付，将形成巨大的势头。&lt;/li>
&lt;li>即将产生越来越多新的DevOps自动化工具，这些工具改变了我们软件开发的方式。&lt;/li>
&lt;li>“容器化”也将引人注目（例如使用Docker容器）。&lt;/li>
&lt;li>许多软件公司将转向微服务架构。&lt;/li>
&lt;li>自动化测试和持续测试将变得更加普遍，且更加重要。&lt;/li>
&lt;li>必须拥有的工具和平台，包括Docker、AWS、GitHub和JIRA将在开发者社区更受欢迎。&lt;/li>
&lt;/ol>
&lt;p>本文参考来源：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://www.rightscale.com/blog/cloud-industry-insights/new-devops-trends-2016-state-cloud-survey" target="_blank" rel="noopener"
>http://www.rightscale.com/blog/cloud-industry-insights/new-devops-trends-2016-state-cloud-survey&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.storybase.com" target="_blank" rel="noopener"
>https://www.storybase.com&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://pt.slideshare.net/johnpviner/devops-be-careful-what-you-wish-for" target="_blank" rel="noopener"
>http://pt.slideshare.net/johnpviner/devops-be-careful-what-you-wish-for&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://en.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener"
>https://en.wikipedia.org/wiki/DevOps&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.Google.com" target="_blank" rel="noopener"
>http://www.Google.com&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Nutanix AHV（KVM）Windows虚拟机安装全攻略</title><link>https://martinliu.cn/blog/nutanix-ahvkvmwindows%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E5%85%A8%E6%94%BB%E7%95%A5/</link><pubDate>Sun, 29 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/nutanix-ahvkvmwindows%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E5%85%A8%E6%94%BB%E7%95%A5/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-5.jpg" alt="Featured image of post Nutanix AHV（KVM）Windows虚拟机安装全攻略" />&lt;h1 id="windows-虚拟机安装">Windows 虚拟机安装&lt;/h1>
&lt;p>Nutanix的AHV虚拟机是基于KVM的。本文件假设您使用和安装的是Nutanix社区版本的群集。在上面安装Windows虚拟机的步骤如下：&lt;/p>
&lt;ol>
&lt;li>下载操作系统安装光盘&lt;/li>
&lt;li>上传操作系统安装光盘到Nutanix群集 （安装Windows虚拟机需要 Fedora virtio 驱动）&lt;/li>
&lt;li>新建和配置虚拟机&lt;/li>
&lt;li>安装OS&lt;/li>
&lt;li>安装Nutanix Guest Tools （NGT）&lt;/li>
&lt;/ol>
&lt;p>下面用安装Windows 10举例，说明详细的安装步骤。&lt;/p>
&lt;h2 id="第一步下载操作系统-iso">第一步：下载操作系统 ISO&lt;/h2>
&lt;p>如果你需要下载 Ubuntu Desktop &lt;a class="link" href="https://www.ubuntu.com/desktop" target="_blank" rel="noopener"
>点这里&lt;/a>。&lt;/p>
&lt;p>从微软的TechNet Evaluation Center下载 &lt;a class="link" href="https://www.microsoft.com/en-us/evalcenter/" target="_blank" rel="noopener"
>Microsoft ISO&lt;/a> 注意，评估的服务器版只能使用180天，桌面版能使用90天。&lt;/p>
&lt;h2 id="第二步上传iso文件到nutanix群集">第二步：上传ISO文件到Nutanix群集&lt;/h2>
&lt;p>Nutanix群集上提供了镜像服务，可以存储几种格式的镜像：ISO格式的操作系统安装镜像，虚拟机的磁盘(如KVM格式等)。这些镜像文件可以被虚拟机通过挂载CD-ROM设备使用，或者直接克隆出虚拟机的磁盘。操作步骤如下。&lt;/p>
&lt;p>点击右上角的齿轮图标，选择image configuration
&lt;img src="https://martinliu.cn/images/14857476024029.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击 upload image按钮&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857476555578.jpg"
loading="lazy"
>&lt;/p>
&lt;p>界面字段解释：&lt;/p>
&lt;ul>
&lt;li>Name: 镜像文件的名字（用ISO来与磁盘镜像区分一下）&lt;/li>
&lt;li>Image Type: 选择 ISO&lt;/li>
&lt;li>Container: 选择用来存储ISO文件的容器&lt;/li>
&lt;li>Image Source: 选择上传文件作为镜像来源&lt;/li>
&lt;li>Save: 点击Save按钮可以看到上传的进度条。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/14857477053373.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在上传成功之后，镜像清单中显示刚才的镜像为 Active 状态。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857479049693.jpg"
loading="lazy"
>&lt;/p>
&lt;p>由于Nutanix的hypervisor是基于Linux KVM技术，它需要附加的Windows驱动，需要下载 Fedora Windows virtio 驱动。 下载地址如下：&lt;/p>
&lt;p>&lt;a class="link" href="https://fedoraproject.org/wiki/Windows_Virtio_Drivers" target="_blank" rel="noopener"
>https://fedoraproject.org/wiki/Windows_Virtio_Drivers&lt;/a>&lt;/p>
&lt;p>点击第三条 Direct download&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857480805485.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击 “Stable virtio-win iso” 下载最新的驱动 ISO 文件。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857481167991.jpg"
loading="lazy"
>&lt;/p>
&lt;p>下载到的文件名如：virtio-win-0.1.126.iso；重复上述Windows IOS文件上传的步骤，把这个文件上传到镜像服务中。&lt;/p>
&lt;p>Fedora 的开源版 VirtIO驱动和Nutanix的版本稍微有些不同。Nutanix的 VirtioIO驱动是经过数字签名的，能从Nutanix客户门户下载。由于Nutanix CE社区版是提供给所有人做体验测试的，因此这里使用的是开源版本的VirtioIO驱动，而不是Nutanix的官方版本的驱动。&lt;/p>
&lt;p>##第三步：创建和配置虚拟机&lt;/p>
&lt;p>我们已经准备好了Windows 10 ISO文件和 Fedora VirtIO驱动IOS文件，现在可以安装虚拟机了。步骤如下：&lt;/p>
&lt;p>点击 Home&amp;ndash;VM&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857485236059.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击右侧的 Create VM 按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857485706681.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在下面的页面中输入虚拟机的配置。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857486182975.jpg"
loading="lazy"
>
&lt;img src="https://martinliu.cn/images/14857486277811.jpg"
loading="lazy"
>&lt;/p>
&lt;p>主要配置介绍如下：
&lt;img src="https://martinliu.cn/images/14857486605678.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>Name: Win10Desktop 虚拟机的名称&lt;/li>
&lt;li>vCPUs: 2 两颗虚拟CPU&lt;/li>
&lt;li>Number of Cores per vCPU: 1&lt;/li>
&lt;li>Memory: 2GB (只是做测试的话，2GB可以了)&lt;/li>
&lt;/ul>
&lt;p>下面添加用于虚拟机挂载Windows 10 安装盘的 CDROM设备。删除默认的CDROM设备。
&lt;img src="https://martinliu.cn/images/14857489095951.jpg"
loading="lazy"
>&lt;/p>
&lt;p>由于偶尔安装Windows 10的时候默认的CDROM驱动器中Fedora Virtio驱动会显示不出来，因此删除默认的CDROM设备。&lt;/p>
&lt;p>添加vm系统安装的磁盘。点击添加磁盘，输入如下实例信息，得到一块40GB的SCSI磁盘用来安装Window 10操作系统。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857490738212.jpg"
loading="lazy"
>&lt;/p>
&lt;p>添加一个新的CDROM驱动盘，用来挂载 Windows 10 的ISO镜像文件，如下图所示。&lt;/p>
&lt;ul>
&lt;li>Type: CDROM 类型&lt;/li>
&lt;li>Operation: Clone from Image Service&lt;/li>
&lt;li>Bus Type: IDE 类型的应该是默认类型&lt;/li>
&lt;li>Image: 选择刚才上传的 Win10ISO&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/14857492195172.jpg"
loading="lazy"
>&lt;/p>
&lt;p>添加一个新的CDROM设备，用来挂载 Fedora Virtio驱动IOS文件，如下图所示。&lt;/p>
&lt;ul>
&lt;li>Type: CDROM 类型&lt;/li>
&lt;li>Operation: Clone from Image Service&lt;/li>
&lt;li>Bus Type: IDE&lt;/li>
&lt;li>Image: 选择 FedoraVirtISO&lt;/li>
&lt;/ul>
&lt;p>配置完成之后的磁盘配置布局如下。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857493954380.jpg"
loading="lazy"
>&lt;/p>
&lt;p>现在来添加网卡，点击下面的按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857494220235.jpg"
loading="lazy"
>&lt;/p>
&lt;p>使用默认的ID为0的网络，如下图所示。（此VLAN时之前建立好的）&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857494722709.jpg"
loading="lazy"
>&lt;/p>
&lt;p>现在所有配置都已经完成，点击 Save 保存按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857495029831.jpg"
loading="lazy"
>&lt;/p>
&lt;p>页面的状态栏会出现一个绿色的执行的提示，表示后天虚拟机正在创建中。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857495959115.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="第四步运行并安装虚拟机">第四步：运行并安装虚拟机&lt;/h2>
&lt;p>做如下操作来开启并运行虚拟机，进入Windows操作系统的安装过程。&lt;/p>
&lt;ol>
&lt;li>点击到 VM 视图&lt;/li>
&lt;li>点击 Table&lt;/li>
&lt;li>点击 Win10Desktop VM 刚才创建的虚拟机&lt;/li>
&lt;li>点击 Power on&lt;/li>
&lt;li>当 VM 启动了, 点击 Launch Console 进入控制台页面。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://martinliu.cn/images/14857496408859.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在Windows安装的界面，选择Custom ：高级安装选项。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857499695677.jpg"
loading="lazy"
>&lt;/p>
&lt;p>由于我们使用的 AHV 是KVM虚拟化，所以需要加载Virtio驱动。点击 Load Driver 按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857502423986.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击 Browse 浏览。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857502795932.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击并浏览驱动器 E： （这是之前我们挂载 Fedora Virtio ISO文件的CDROM）&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857503335113.jpg"
loading="lazy"
>&lt;/p>
&lt;p>浏览驱动盘到目录 vioscsi&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857504369501.jpg"
loading="lazy"
>&lt;/p>
&lt;p>选择 w10 目录&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857504579467.jpg"
loading="lazy"
>&lt;/p>
&lt;p>选择 amd64 目录，点击 ok&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857504816806.jpg"
loading="lazy"
>&lt;/p>
&lt;p>选择所显示出来的 Red Hat VirtIO SCSI 驱动，点击 Next&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857505411190.jpg"
loading="lazy"
>&lt;/p>
&lt;p>这样刚才创建的 40GB的磁盘就可以看到了，选择 Next&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14857506028586.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击了 Next 按钮之后， Windows 10 开始安装，这个过程大约是3~10分钟不等。最后就到了Windows的账户创建的环节。虽然现在Windows已经安装完成了，还需要进入Windows的设备管理器中查看一下，设备的状态。&lt;/p>
&lt;ul>
&lt;li>右击Windows的图标&lt;/li>
&lt;li>选择 Device Manager&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://martinliu.cn/images/14858815713785.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在设备官开启中，我们需要更新一下网卡设备的驱动。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858816384447.jpg"
loading="lazy"
>&lt;/p>
&lt;p>右击网卡设备，选择 Update Driver Software&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858816757065.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击 Browse，选择当前的 virtio-win-0.11 ，也就是 Fedora VirtIO 驱动的光驱设备，点击 Next&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858817470182.jpg"
loading="lazy"
>&lt;/p>
&lt;p>选中了合适的目录后，网卡设备的驱动安装正常了显示如下：&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858818602337.jpg"
loading="lazy"
>&lt;/p>
&lt;p>到目前为止，我们的Windows 10 虚拟机安装完毕了。&lt;/p>
&lt;h2 id="第五步-安装nutanix-guest-tools-ngt">第五步： 安装Nutanix Guest Tools （NGT）&lt;/h2>
&lt;p>Nutanix Guest Tools 可以实现自服务恢复和应用一致性快照功能，它需要Microsoft Volume Shadow Copy Services (VSS)服务的配合。下面来安装它。&lt;/p>
&lt;ol>
&lt;li>进入虚拟机的清单视图&lt;/li>
&lt;li>点击 Table&lt;/li>
&lt;li>点击选中刚才安装的Windows 10 虚拟机&lt;/li>
&lt;li>点击 Enable NGT （这个操作需要有一个空闲的CDROM设备，可以点击虚拟机的编辑，把之前的两个光驱中挂载的ISO盘退出一个）&lt;/li>
&lt;li>在后续的窗口中点击 Yes&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://martinliu.cn/images/14858821642374.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在网页上成功启用了NGT之后，进入Windows 10桌面的控制台页面。打开Windows的资源管理器，双击带有Nutanix图标的CDROM设备，进入该设备安装NGT软件。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858823586478.jpg"
loading="lazy"
>&lt;/p>
&lt;p>点击 Install 按钮。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14858823893756.jpg"
loading="lazy"
>&lt;/p>
&lt;p>跟随安装向导完成NGT的安装。安装完成之后，在Windows10中关机，在网页上编辑这个虚拟机的配置，删除多余的CDROM设备，之后在开机。至此Windows10虚拟机的安装过程全部完毕。&lt;/p>
&lt;p>扩展阅读：&lt;a class="link" href="http://martinliu.cn/2017/01/10/clone-ahv-vm-template/" target="_blank" rel="noopener"
>Nutanix AHV 虚拟机模板制作&lt;/a>&lt;/p></description></item><item><title>日本旅行-第一部分京都休闲游</title><link>https://martinliu.cn/blog/%E6%97%A5%E6%9C%AC%E6%97%85%E8%A1%8C-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E4%BA%AC%E9%83%BD%E4%BC%91%E9%97%B2%E6%B8%B8/</link><pubDate>Fri, 27 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/%E6%97%A5%E6%9C%AC%E6%97%85%E8%A1%8C-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E4%BA%AC%E9%83%BD%E4%BC%91%E9%97%B2%E6%B8%B8/</guid><description>&lt;img src="https://martinliu.cn/images/p014h7g3.jpg" alt="Featured image of post 日本旅行-第一部分京都休闲游" />&lt;p>这次并不是刻意安排来日本，为了和同学凑行程，意外来日本国一游。行程稍微有点周折，从北京&amp;ndash;威海&amp;ndash;大板西关&amp;ndash;京都&amp;ndash;大板&amp;ndash;大板西关&amp;ndash;北京。这个行程的缺点在于选择了同一个城市进出日本。本文讲讲京都的几天。&lt;/p>
&lt;h2 id="新京极">新京极&lt;/h2>
&lt;p>在京都期间都住在了锦市场北边的一个市场附近的一家Airbnb。其实从锦市场到新京极的几个街区中间是京都市中心附近。从住所往北一站就是京都市的市政厅。往北一站就是鸭川，这是一条从北到南穿过京都市区的河流，冬季河水特别浅。&lt;/p>
&lt;p>住所在市场旁边吃喝玩逛都非常方便。属于在居民楼中的一个商住楼。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3411.jpg"
loading="lazy"
alt="IMG_3411"
>&lt;/p>
&lt;p>由于这个区域靠近商业中心，因此楼下临街商业也很发达，大街小巷遍布着各种饭馆和小店，买什么的都有。各种类型的各式各样的小店。&lt;/p>
&lt;h2 id="伏见稻荷">伏见稻荷&lt;/h2>
&lt;p>这里是一座山伏见稻荷山所在，山上的这个神庙以它的狐狸大神最为有名。从下图可以看出，这座香火旺盛的主庙的屋脊还是有唐朝的感觉。即使是工作日也有很多人专门来这里朝拜。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3417.jpg"
loading="lazy"
alt="IMG_3417"
>&lt;/p>
&lt;p>除了在正门的主殿有人朝拜，还有山上的其它地方，凡是有人供奉的地方的石台上，都是有人书有供奉者的名字，或者是毛笔写的或者是石刻的。&lt;/p>
&lt;p>From &lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%BC%8F%E8%A6%8B%E7%A8%BB%E8%8D%B7%E5%A4%A7%E7%A4%BE" target="_blank" rel="noopener"
>wiki&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>伏见稻荷大社位于稻荷山的山麓，在传统上整个稻荷山的范围都被视为是神域（圣地）的范围。伏见稻荷大社主要是祀奉以宇迦之御魂大神为首的诸位稻荷神，自古以来就是农业与商业的神明，除此之外也配祀包括佐田彦大神、大宫能卖大神、田中大神与四大神等其他的神明。由于每年都有大量的香客前来神社祭拜求取农作丰收、生意兴隆、交通安全，使得该神社成为京都地区香火最盛的神社之一。另外，起源于江户时代的习俗，前来此地许愿的人们往往会捐款在神社境内竖立一座鸟居来表达对神明的敬意，使得伏见稻荷大社的范围内竖有数量惊人的大小鸟居，而以“千本鸟居”之名闻名日本全国乃至于海外。捐款竖立鸟居的单位包含个人、公司行号乃至于各地的商会组织，目前现存的鸟居，最早可以追溯到明治年间。
在神社的&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3414.jpg"
loading="lazy"
alt="IMG_3414"
>&lt;/p>
&lt;p>从右侧上山，到山顶后从左侧下山，如果走的快的话，两个小时左右可以玩完。这里可以看到日本所信奉的神的多样性。各种植物、动物和农业相关的东西比较多。&lt;/p>
&lt;p>我们走到半山腰的一个桔园时，有些迷路的感觉，觉得找不到路了。有一个出租车司机回家，把车停到了路边换鞋回家；看到我们似乎找不到路了，他回家后拿来一张地图给我们指路。由于日本的英语真的不通，他所以回家那地图来，大约至少用了他四十分钟的时间，拿着地图来告诉我们继续向前走就可以到山顶了。他说的所有话里面，就两个词可以听懂“Top”和“thirty minutes”；很感谢这个指路人。&lt;/p>
&lt;p>上顶上有一个能够俯瞰市区景色的地方，几排长椅上，人们一边看风景，一遍晒太阳，还是很休闲的。&lt;/p>
&lt;h2 id="奈良">奈良&lt;/h2>
&lt;p>奈良到京都不远。来这里大部分时间都放在了，带孩子喂鹿上了，基本没有怎么逛著名的东大寺。&lt;/p>
&lt;p>我们在路上换车的时候，做错了车，做了一辆特急的快车，结果需要补票花了1千多。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3430.jpg"
loading="lazy"
alt="IMG_3430"
>&lt;/p>
&lt;p>出了地铁站不远，就可以看到奈良公园的小鹿，一波一波的喂鹿，孩子总是能想出各种奇思妙想的喂法，基本一天没干别的。&lt;/p>
&lt;p>&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%B8%9C%E5%A4%A7%E5%AF%BA" target="_blank" rel="noopener"
>From Wiki&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>东大寺（日语：東大寺），位于日本奈良县奈良市杂司町，是华严宗大本山，南都七大寺之一，距今约有一千二百余年的历史。1998年作为“古都奈良的文化财”的一部分被列为世界文化遗产。
佛寺是728年由信奉佛教的圣武天皇建立的。东大寺是全国68所国分寺的总寺院。因为建在首都平城京以东，所以被称作东大寺。另外有西大寺。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3439.jpg"
loading="lazy"
alt="IMG_3439"
>&lt;/p>
&lt;p>最后到寺院里面转了一圈依然下班了。发现日本的景点都是在寺庙附近的；和各种大寺相关的公园非常多，有寺庙，就有公园，就有风景。&lt;/p>
&lt;h2 id="二条城">二条城&lt;/h2>
&lt;p>这个城是一个将军府，距离天皇住所不远。麻雀虽小五脏俱全，它内城和外城，有两层的护城河，城墙是很低的。&lt;/p>
&lt;p>&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E6%A2%9D%E5%9F%8E" target="_blank" rel="noopener"
>From wiki&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>二条城是一座位于日本京都府京都市中京区二条城町的城堡，建设于江户时代初期（1603年）。曾经是德川家康的寓所。位于京都市街的一座平城。1994年，被联合国教育科学文化组织列入世界遗产中的古都京都的文化财之一。狭义上，二条城，就是江户时代筑起的城池，但是在广义上，是指第十三代室町幕府将军足利义辉的居城、织田信长为十五代将军足利义昭建造的城池，1573年织田信长举兵将足利义昭放逐河内，此城便被焚毁，在其它地方另筑二条御所，之后献给皇太子。但是一般所提及的二条城，是德川家康筑城的二条城（朝廷则称之为二条亭）。1867年（庆应3年）第十五代将军德川庆喜，在二条城举行“大政奉还”仪式，将政权归还给了天皇，二条城因而闻名。1871年（明治4年） 二之丸御殿作为京都府厅舍。1873年（明治6年）除二之丸外归陆军省。1885年（明治18年）京都府的新厅舍完成移转新址后，二之丸御殿开始修理直到1892年（明治25年）。1893年（明治26年）到1894年（明治27年）将桂宫邸本丸移筑，始有本丸御殿。1915年（大正4年）大正天皇即位仪式大典于二之丸御殿举行，并开始增建南门二之丸御殿的附属建物。1939年，天皇又将之赐给宫内省，并于隔年更名为“元离宫二条城”，正式对外开放参观。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3441.jpg"
loading="lazy"
alt="IMG_3441"
>&lt;/p>
&lt;p>这是一个比较小规模的景点，出了地铁站，东门正在维修，绕到北门，顺序参观完了外城、内层和各种建筑。这座建筑也是重建的，大约有80多年的历史，曾经被焚毁；最近一次好像是被雷击失火。&lt;/p>
&lt;h2 id="鸭川">鸭川&lt;/h2>
&lt;p>我下图的跑步路线大约就是鸭川的主要部分。其中三条到5条的河岸左侧就是京都旧市井的所在，感觉像是北京的南锣鼓巷，不过原貌保护的更好一些。
&lt;img src="https://martinliu.cn/images/IMG_3493.jpg"
loading="lazy"
alt="IMG_3493"
>&lt;/p>
&lt;h2 id="炸猪排饭">炸猪排饭&lt;/h2>
&lt;p>日餐里面的食物和中餐是非常相似的，随便进一个店，都不用为吃啥发愁；有些饭馆是有日文、英语和中文菜单的。下图是一家专门做炸猪排饭的饭馆。这家饭馆主要做三总餐：炸猪排饭、红烧猪排饭和炸大虾饭。套餐的价格在900日元左右，量还是比较多的。我点了一杯扎啤配炸猪排饭味道非常好。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3494.jpg"
loading="lazy"
alt="炸猪排"
>&lt;/p>
&lt;p>这家餐厅吃了两次，感觉非常好，年长的老人在店里带领几个非常年轻的孩子们，把这家店搭理的井井有条。看着食物制作的每一个工序，感觉还是不错的。&lt;/p></description></item><item><title>Nutanix AHV 虚拟机模板制作</title><link>https://martinliu.cn/blog/nutanix-ahv-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C/</link><pubDate>Tue, 10 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/nutanix-ahv-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-10.jpg" alt="Featured image of post Nutanix AHV 虚拟机模板制作" />&lt;p>本文描述了AHV虚拟化的虚拟机模板的制作过程。首先使用ssh登录cvm，进入acropolis命令行。&lt;/p>
&lt;h2 id="找出模板对应的虚拟机">找出模板对应的虚拟机&lt;/h2>
&lt;p>使用 vm.disk_get 命令，按多次tab，显示虚拟机清单，复制模板机名称&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;acropolis&amp;gt; vm.disk_get vm-fedora25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ide.0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> addr {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bus: &amp;#34;ide&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cdrom: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> empty: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">scsi.0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> addr {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bus: &amp;#34;scsi&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_id: 4427
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> container_uuid: &amp;#34;9279ba2c-8e8d-4aea-b00f-410df5a18a23&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vmdisk_size: 10737418240
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vmdisk_uuid: &amp;#34;7476458e-7917-4df8-b830-a0df5a95dae9&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建模板镜像">创建模板镜像&lt;/h2>
&lt;p>使用从虚拟机磁盘克隆出镜像的命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;acropolis&amp;gt; image.create fedora25-Template clone_from_vmdisk=7476458e-7917-4df8-b830-a0df5a95dae9 image_type=kDiskImage annotation=&amp;#39;Fedora 25 Server Template&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fedora25-Template: complete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="模板测试">模板测试&lt;/h2>
&lt;p>登录Prism界面，点击镜像服务，确认清单中刚才创建的虚拟机模板镜像；进入vm页面，创建虚拟机，使用 fedora25-Template 镜像做磁盘&lt;/p></description></item><item><title>DevOps术语表</title><link>https://martinliu.cn/2017/01/07/devops-glossary/</link><pubDate>Sat, 07 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/07/devops-glossary/</guid><description>&lt;img src="https://martinliu.cn/images/pexels-photo.jpg" alt="Featured image of post DevOps术语表" />&lt;h2 id="简介">简介&lt;/h2>
&lt;p>这份术语表的旨在为DevOps实践者提供参考，在重要的专业术语上保持一致。最初的来源是《DevOps Handbook》英文版。译者在翻译的过程中，梳理和总结了一部分。Exin的DOP认证考试基于此书，考试样题也影响和参考了本术语表。本术语表是开放的，欢迎各界业内人士对其修订和增补。目标是形成一份较为完整和准确的参考资料。参与修订的方式见页脚。欢迎但不限于以下方面的专家参与评审和修订：&lt;/p>
&lt;ul>
&lt;li>敏捷开发&lt;/li>
&lt;li>精益/精益UX/精益创业&lt;/li>
&lt;li>丰田生产系统&lt;/li>
&lt;li>ITIL&lt;/li>
&lt;li>互联网公司&lt;/li>
&lt;li>传统企业&lt;/li>
&lt;/ul>
&lt;p>这个页面的另外一个存在：&lt;a class="link" href="https://handbook.martinliu.cn/glossary/" target="_blank" rel="noopener"
>https://handbook.martinliu.cn/glossary/&lt;/a>&lt;/p>
&lt;h2 id="变更日志">变更日志&lt;/h2>
&lt;ul>
&lt;li>2017年1月7日，在Martin‘s Blog和Github上发布了第一个版本。有几个人在Github上参与了修订（请参与者通过邮件或者其他方式告诉我，这里希望再次申明致谢。）&lt;/li>
&lt;li>2017年12月27日，参与修订的人包括卢梦纯（Exin）、刘征、张乐、Wang Jun和许峰。&lt;/li>
&lt;li>本网页当前接受繁体中文的增补，&lt;a class="link" href="https://github.com/DevOps-Handbook/DevOps-Handbook.github.io/graphs/contributors" target="_blank" rel="noopener"
>所有参与者名单&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="术语表">术语表&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>英文&lt;/th>
&lt;th>中文&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A/B Testing&lt;/td>
&lt;td>A/B测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Acceptance Stage&lt;/td>
&lt;td>验收阶段&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Acceptance Test-Driven Development (Atdd)&lt;/td>
&lt;td>验收测试驱动开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Acceptance Tests&lt;/td>
&lt;td>验收测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Accident&lt;/td>
&lt;td>事故&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Affinity&lt;/td>
&lt;td>亲和&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Agile&lt;/td>
&lt;td>敏捷&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Andon Cord&lt;/td>
&lt;td>安灯拉绳&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Anomaly Detection Techniques&lt;/td>
&lt;td>异常探测技术&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Antifragility&lt;/td>
&lt;td>抗脆弱性&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Application Deployment&lt;/td>
&lt;td>应用部署&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Artifact Management&lt;/td>
&lt;td>构件制品库管理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Artifacts&lt;/td>
&lt;td>制品&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Automated Tests&lt;/td>
&lt;td>自动化测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Automation&lt;/td>
&lt;td>自动化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Backlog&lt;/td>
&lt;td>待办事项列表&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Bad Apple Theory&lt;/td>
&lt;td>坏苹果理论&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Bad Paths&lt;/td>
&lt;td>失败路径&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Batch Sizes&lt;/td>
&lt;td>批次尺寸、批量大小&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blame&lt;/td>
&lt;td>责备&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blameless Post Mortem&lt;/td>
&lt;td>免责事后分析&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blamelessness&lt;/td>
&lt;td>免责&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blue-Green Deployment&lt;/td>
&lt;td>蓝绿部署&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blue-Green Deployment Pattern&lt;/td>
&lt;td>蓝绿部署模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Branching Strategy&lt;/td>
&lt;td>分支策略&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Brownfield&lt;/td>
&lt;td>棕地&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Build&lt;/td>
&lt;td>构建&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Business Value&lt;/td>
&lt;td>业务价值&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Canary Release&lt;/td>
&lt;td>金丝雀发布&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Canary Release Pattern&lt;/td>
&lt;td>金丝雀发布模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Card&lt;/td>
&lt;td>卡片&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Change Categories&lt;/td>
&lt;td>变更类别&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Change Schedules&lt;/td>
&lt;td>变更计划&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cloud Computing&lt;/td>
&lt;td>云计算&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cloud Configuration Files&lt;/td>
&lt;td>云配置文件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cluster Immune System Release Pattern&lt;/td>
&lt;td>集群免疫系统发布模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Code Branch&lt;/td>
&lt;td>代码分支&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Code Review Forms&lt;/td>
&lt;td>代码审查表&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Codified Nfr&lt;/td>
&lt;td>成文的非功能需求&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Collaboration&lt;/td>
&lt;td>协作&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Commit Stage&lt;/td>
&lt;td>提交阶段&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Commit Code&lt;/td>
&lt;td>提交代码&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Compliance Requirement&lt;/td>
&lt;td>合规性要求&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Compliance Checking&lt;/td>
&lt;td>合规性检查&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Compliancy Officer&lt;/td>
&lt;td>合规检测官&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Configuration Management&lt;/td>
&lt;td>配置管理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Container(S)&lt;/td>
&lt;td>容器&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Continuous Deployment&lt;/td>
&lt;td>持续部署&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Continuous Integration&lt;/td>
&lt;td>持续集成(CI)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Continuous Delivery&lt;/td>
&lt;td>持续交付(CD)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Conways Law&lt;/td>
&lt;td>康威定律&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cycle Time&lt;/td>
&lt;td>周期时间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Defect Tracking&lt;/td>
&lt;td>缺陷跟踪&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Definition Of Done (Dod)&lt;/td>
&lt;td>完成的定义&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Dev Rituals&lt;/td>
&lt;td>开发仪式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Developer&lt;/td>
&lt;td>开发人员&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Development&lt;/td>
&lt;td>开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Devops Transformation&lt;/td>
&lt;td>DevOps转型&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Downstream/Upstream&lt;/td>
&lt;td>下游/上游&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Downwards Spiral&lt;/td>
&lt;td>恶性循环&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>E-Mail Pass-Around&lt;/td>
&lt;td>电子邮件轮查&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Expand/Contract Pattern&lt;/td>
&lt;td>扩张/收缩模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Exploratory Test&lt;/td>
&lt;td>探索性测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Fast Feedback&lt;/td>
&lt;td>快速反馈&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feature&lt;/td>
&lt;td>特性&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feature Flag&lt;/td>
&lt;td>特性标志&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feature Toggles&lt;/td>
&lt;td>特性开关&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feedback/Feedback Loop&lt;/td>
&lt;td>反馈/反馈回路&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Feedforward/Feedforward Loop&lt;/td>
&lt;td>前馈/前馈回路&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Flow&lt;/td>
&lt;td>流&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Gated Commit&lt;/td>
&lt;td>门控提交&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Gaussian Distribution&lt;/td>
&lt;td>高斯分布&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Green Build&lt;/td>
&lt;td>绿色构建&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Greenfield&lt;/td>
&lt;td>绿地&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Handoff&lt;/td>
&lt;td>交接&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hand-Off Readiness Review&lt;/td>
&lt;td>交接就绪评审&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Happy Paths&lt;/td>
&lt;td>快乐路径&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hypothesis-Driven Development&lt;/td>
&lt;td>假设驱动开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Incident&lt;/td>
&lt;td>事件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Information Radiators&lt;/td>
&lt;td>信息辐射器&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Infosec&lt;/td>
&lt;td>信息安全&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Infrastructure Automation&lt;/td>
&lt;td>基础架构自动化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Infrastructure As Code&lt;/td>
&lt;td>基础设施即代码&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Integration Tests&lt;/td>
&lt;td>集成测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>I-Shaped, T-Shaped, E-Shaped&lt;/td>
&lt;td>I型，T型，E型&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Iteration&lt;/td>
&lt;td>迭代&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Itsm (It Service Management)&lt;/td>
&lt;td>IT服务管理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ji-Kotei-Kanketsu (Jkk)&lt;/td>
&lt;td>质量检查（JKK）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Just Culture&lt;/td>
&lt;td>公正文化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Just-In-Time (Jit)&lt;/td>
&lt;td>准时制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kaizen (In Lean)&lt;/td>
&lt;td>持续改善&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kaizen Blitz (Or Improvement Blitz)&lt;/td>
&lt;td>持续改善闪电战&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kanban&lt;/td>
&lt;td>看板&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kata&lt;/td>
&lt;td>Kata&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Large Batch Size Merge&lt;/td>
&lt;td>大批量合并&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Latent Defects&lt;/td>
&lt;td>潜在缺陷&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lauching Guidance&lt;/td>
&lt;td>发布指导&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch Readiness Review&lt;/td>
&lt;td>投产就绪评审&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lead Time&lt;/td>
&lt;td>前置时间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lean&lt;/td>
&lt;td>精益&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Learning Culture&lt;/td>
&lt;td>学习文化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Logging Levels&lt;/td>
&lt;td>日志级别&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Loosely Coupled Architecture&lt;/td>
&lt;td>松耦合架构&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Micro-Services&lt;/td>
&lt;td>微服务&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Minimum Viable Product&lt;/td>
&lt;td>最小化可行产品&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monitoring Framework&lt;/td>
&lt;td>监控框架&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monolithic Applications&lt;/td>
&lt;td>单体应用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Monolytics&lt;/td>
&lt;td>单体应用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Mttr&lt;/td>
&lt;td>平均恢复时间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Non-Functional Requirement (Nfr)&lt;/td>
&lt;td>非功能性需求&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Non-Functional Requirement (Nfr) Testing&lt;/td>
&lt;td>非功能需求测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>(Non) Ideal Testing Pyramid&lt;/td>
&lt;td>（非）理想测试金字塔模型&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One-Piece-Flow&lt;/td>
&lt;td>单件流&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Operations&lt;/td>
&lt;td>运维&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Operations Story&lt;/td>
&lt;td>运维故事&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ops Liaison&lt;/td>
&lt;td>运维联络人&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Organisational Typology Model&lt;/td>
&lt;td>组织结构模型&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Organization Archetypes&lt;/td>
&lt;td>组织原型&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Organizational Learning&lt;/td>
&lt;td>组织级学习&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Over-The-Shoulder&lt;/td>
&lt;td>观察者评审&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Packages&lt;/td>
&lt;td>包&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Pair Programming&lt;/td>
&lt;td>结对编程&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Peer Review&lt;/td>
&lt;td>同行评审&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Pilot&lt;/td>
&lt;td>试点&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Pipeline&lt;/td>
&lt;td>流水线&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Plan-Do-Check-Act Cycle (Pdca Cycle)&lt;/td>
&lt;td>计划-实施-检查-改进 （戴明环）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Post Mortems&lt;/td>
&lt;td>事后回顾&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Post-Mortem&lt;/td>
&lt;td>事后剖析&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Process Time&lt;/td>
&lt;td>处理时间&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Product Owner&lt;/td>
&lt;td>产品负责人&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Pull Request Process&lt;/td>
&lt;td>拉动请求流程&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Qa&lt;/td>
&lt;td>质量保证&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Reduce Batch Size&lt;/td>
&lt;td>降低批次尺寸&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Reduce Number Of Handoffs&lt;/td>
&lt;td>减少交接次数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Regression Test&lt;/td>
&lt;td>回归测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Release Branch&lt;/td>
&lt;td>发布分支&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Release Managers&lt;/td>
&lt;td>发布经理&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Release Patterns&lt;/td>
&lt;td>发布模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Retrospective&lt;/td>
&lt;td>回顾&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rhythm&lt;/td>
&lt;td>节奏&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Roll-Back&lt;/td>
&lt;td>回滚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sad Path&lt;/td>
&lt;td>悲伤路径&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Safety Culture&lt;/td>
&lt;td>安全文化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Safety Conditions&lt;/td>
&lt;td>安全条件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scaling&lt;/td>
&lt;td>规模化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scrum&lt;/td>
&lt;td>Scrum&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scrum Master&lt;/td>
&lt;td>Scrum Master&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Security Testing&lt;/td>
&lt;td>安全测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Self Service Capability&lt;/td>
&lt;td>自服务能力&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Service Deployment&lt;/td>
&lt;td>服务部署&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Service Level Agreement (Sla)&lt;/td>
&lt;td>服务级别协议(SLA)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Shared Goals&lt;/td>
&lt;td>共享目标&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Shared Operations Team (Sot)&lt;/td>
&lt;td>共享运维团队&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Shared Version Control&lt;/td>
&lt;td>共享版本控制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Single Repository&lt;/td>
&lt;td>单一存储库&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Smoke Testing&lt;/td>
&lt;td>冒烟测试&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sprint&lt;/td>
&lt;td>冲刺&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Staging&lt;/td>
&lt;td>Staging&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Staging Environments, Sit&lt;/td>
&lt;td>准生产环境&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Stakeholder&lt;/td>
&lt;td>利益干系人&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Standard Deviation&lt;/td>
&lt;td>标准差&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Standard Operations&lt;/td>
&lt;td>标准运维&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Static Code Analysis&lt;/td>
&lt;td>静态代码分析&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Swarm&lt;/td>
&lt;td>聚集、聚焦、会诊、围观（动词）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Swarming&lt;/td>
&lt;td>聚集&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>System Of Engagement (Soe)&lt;/td>
&lt;td>交互系统&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>System Of Records (Sor)&lt;/td>
&lt;td>记录系统&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Technical Debt&lt;/td>
&lt;td>技术债务&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Technology Adaption Curve&lt;/td>
&lt;td>技术适应曲线&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Technology Executives&lt;/td>
&lt;td>技术主管&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Telemetry&lt;/td>
&lt;td>遥测&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Test Coverage Analysis&lt;/td>
&lt;td>测试覆盖率分析&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Test Story&lt;/td>
&lt;td>测试故事&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Test-Driven Development&lt;/td>
&lt;td>测试驱动开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The Downward Spiral - Tds&lt;/td>
&lt;td>下行螺旋&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The Agile Manifesto&lt;/td>
&lt;td>敏捷宣言&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The Lean Movement&lt;/td>
&lt;td>精益运动&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The Simian Army: Chaos Gorilla, Chaos Kong, Conformity Monkey, Doctor Monkey, Janitor,Monkey, Latency Monkey, Security Monkey&lt;/td>
&lt;td>猿猴军团（可靠性监控服务），Chaos Gorilla（混沌大猩猩）， Chaos Kong（混沌金刚）, Conformity Monkey（一致性猴子）, Doctor Monkey（医生猴子）, Janitor Monkey（看门猴子）, Latency Monkey（延迟猴子）, Security Monkey（安全猴子）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The Three Ways&lt;/td>
&lt;td>三步工作法&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Theory Of Constraints&lt;/td>
&lt;td>约束理论&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ticketing System&lt;/td>
&lt;td>工单系统&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tightly-Coupled&lt;/td>
&lt;td>紧耦合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tool-Assisted Review&lt;/td>
&lt;td>工具辅助评审&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tools&lt;/td>
&lt;td>工具&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Toyota Production System (Tps)&lt;/td>
&lt;td>丰田生产系统&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Toyoto Kata&lt;/td>
&lt;td>丰田套路&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Transformation Team&lt;/td>
&lt;td>转型团队&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Trunk&lt;/td>
&lt;td>主干&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>User Story&lt;/td>
&lt;td>用户故事&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Value Stream Mapping&lt;/td>
&lt;td>价值流映射&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Value Stream&lt;/td>
&lt;td>价值流&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Velocity&lt;/td>
&lt;td>速率&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Version Control&lt;/td>
&lt;td>版本控制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Virtualized Environment&lt;/td>
&lt;td>虚拟化环境&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visible&lt;/td>
&lt;td>可视的&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visualisation&lt;/td>
&lt;td>可视化&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Waste&lt;/td>
&lt;td>浪费&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Waste Reduction&lt;/td>
&lt;td>减少浪费&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Waterfall&lt;/td>
&lt;td>瀑布式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wip (Work In Progress / Process)&lt;/td>
&lt;td>在制品&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Wip Limit&lt;/td>
&lt;td>在制品限制&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Work Center&lt;/td>
&lt;td>工作中心&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="参与修订说明">参与修订说明&lt;/h2>
&lt;p>请帮忙改进本术语表，请直接Fork本代码库，然后提交PR；或者发邮件到：liuzh66@gmail.com&lt;/p>
&lt;p>建议最好提供修订原文的简要说明和参考依据。&lt;/p>
&lt;p>GitHub操作注意事项：&lt;/p>
&lt;ul>
&lt;li>建议Fork整个repo做批量更新，小批量可以直接在github网页上提交&lt;/li>
&lt;li>请不要完全删除之前的翻译，可以把旧翻译划横线（使用markdown），在右边添加新的中文意思。&lt;/li>
&lt;/ul></description></item><item><title>Nutanix资源站点清单</title><link>https://martinliu.cn/2017/01/07/nutanix-resource-sites/</link><pubDate>Sat, 07 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/07/nutanix-resource-sites/</guid><description>&lt;img src="https://martinliu.cn/images/google-earth-view-6043.jpg" alt="Featured image of post Nutanix资源站点清单" />&lt;p>做Nutanix的那些不可不知道的资源网站，这里列出了常用的官方和非官方网站。&lt;/p>
&lt;h2 id="nutanix-官方站点">Nutanix 官方站点&lt;/h2>
&lt;h3 id="httpportalnutanixcom">&lt;a class="link" href="http://portal.nutanix.com/" target="_blank" rel="noopener"
>http://portal.nutanix.com/&lt;/a>&lt;/h3>
&lt;p>&lt;a class="link" href="http://portal.nutanix.com/" target="_blank" rel="noopener"
>http://portal.nutanix.com/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>在线文档&lt;/li>
&lt;li>在线技术支持，case查看和操作&lt;/li>
&lt;li>产品和补丁下载&lt;/li>
&lt;/ul>
&lt;h3 id="httpsnextnutanixcom">&lt;a class="link" href="https://next.nutanix.com/" target="_blank" rel="noopener"
>https://next.nutanix.com/&lt;/a>&lt;/h3>
&lt;p>&lt;a class="link" href="https://next.nutanix.com/" target="_blank" rel="noopener"
>https://next.nutanix.com/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>产品网上论坛和社区&lt;/li>
&lt;li>社区版论坛&lt;/li>
&lt;li>博客， Nutanix Connect Blog&lt;/li>
&lt;/ul>
&lt;h2 id="技术达人网站和博客">技术达人网站和博客&lt;/h2>
&lt;h3 id="myvirtualcloudnet-by-andre-leibovici">myvirtualcloud.net by Andre Leibovici&lt;/h3>
&lt;p>&lt;a class="link" href="http://myvirtualcloud.net/nutanix/" target="_blank" rel="noopener"
>http://myvirtualcloud.net/nutanix/&lt;/a>&lt;/p>
&lt;h3 id="virtual-life-style-by-joep-piscaer">Virtual life style by Joep Piscaer&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.virtuallifestyle.nl/" target="_blank" rel="noopener"
>https://www.virtuallifestyle.nl/&lt;/a>&lt;/p>
&lt;h3 id="the-nutanix-bible-by-steven-poitras">The Nutanix Bible by Steven Poitras&lt;/h3>
&lt;p>&lt;a class="link" href="http://nutanixbible.com/" target="_blank" rel="noopener"
>http://nutanixbible.com/&lt;/a>&lt;/p>
&lt;h3 id="marks-blog-by-mark-lavi">Mark&amp;rsquo;s Blog by Mark Lavi&lt;/h3>
&lt;p>&lt;a class="link" href="http://mlavi.github.io/" target="_blank" rel="noopener"
>http://mlavi.github.io/&lt;/a>&lt;/p>
&lt;h3 id="jeremy-sallee----nutanix-uifrontend-设计师">Jeremy Sallee - Nutanix UI/Frontend 设计师&lt;/h3>
&lt;p>&lt;a class="link" href="http://salleedesign.com/stuff/sdwip/home/" target="_blank" rel="noopener"
>http://salleedesign.com/stuff/sdwip/home/&lt;/a>&lt;/p>
&lt;p>想知道Prism是怎么设计出来的：&lt;a class="link" href="http://salleedesign.com/stuff/sdwip/blog/nutanix-case-study/" target="_blank" rel="noopener"
>点这里&lt;/a>&lt;/p>
&lt;h3 id="virtual-dennis-by-dennis-laube">Virtual Dennis by Dennis Laube&lt;/h3>
&lt;p>&lt;a class="link" href="http://www.virtualdennis.com/category/nutanix/" target="_blank" rel="noopener"
>http://www.virtualdennis.com/category/nutanix/&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://www.virtualdennis.com/importing-an-ovf-ova-into-nutanix-ahv-using-prism/" target="_blank" rel="noopener"
>如何ova格式的虚拟机导入Nutanix AHV&lt;/a> 镜像服务能够支持Web界面上传导入的格式包括：raw, vhd, vmdk, vdi, iso 和 qcow2 磁盘，导入为Disk后，即可用做模板&lt;/li>
&lt;li>&lt;a class="link" href="http://www.virtualdennis.com/nutanix-acropolis-hypervisor-ahv-create-an-image-service-template-from-an-existing-vm/" target="_blank" rel="noopener"
>如何在Nutanix中制作AHV虚拟机模板&lt;/a> 使用acli命令：vm.disk_get；image.create W2K12R2-Template clone_from_vmdisk=69df5abd-6570-4ce1-ba77-2d117c3df7e5 image_type=kDiskImage&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;h2 id="其他资源">其他资源&lt;/h2>
&lt;h3 id="nutanix-viso-图标下载">Nutanix viso 图标下载&lt;/h3>
&lt;p>&lt;a class="link" href="http://www.visiocafe.com/nutanix.htm" target="_blank" rel="noopener"
>http://www.visiocafe.com/nutanix.htm&lt;/a>&lt;/p></description></item><item><title>云计算时代的终结</title><link>https://martinliu.cn/2017/01/05/The-End-of-Cloud-Computing/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/05/The-End-of-Cloud-Computing/</guid><description>&lt;img src="https://martinliu.cn/images/MacawFlight_ROW10435257143_1920x1080.jpg" alt="Featured image of post 云计算时代的终结" />&lt;p>天下事分久必合，合久必分，移动互联网代表了现在的云计算时代，很多企业还正在朝这个方向发展呢！革命还没有成功，怎么这个时代就要结束了。来听听XenSource前CEO怎么给你解读边缘计算时代的到来。&lt;/p>
&lt;p>“I’m going to take you out to the edge to show you what the future looks like.” So begins a16z partner Peter Levine as he takes us on a “crazy” tour of the history and future of cloud computing — from the constant turns between centralized to distributed computing, and even to his “Forrest Gump rule” of investing in these shifts.&lt;/p>
&lt;p>But… how can we say cloud computing is coming to an “end” when it hasn’t even really started yet?? Because the edge — where self-driving cars and drones are really data centers with wheels or wings — is where it’s at. So where does machine learning in the enterprise come in? How does this change IT? As software programs the world, these are some of the shifts to look at…&lt;/p>
&lt;h2 id="视频在这里">视频在这里&lt;/h2>
&lt;p>在线观看。&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>Nutanix AOS 5.0 新版本新特性</title><link>https://martinliu.cn/2017/01/04/Nutanix-AOS-5.0/</link><pubDate>Wed, 04 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/04/Nutanix-AOS-5.0/</guid><description>&lt;img src="https://martinliu.cn/images/RoyalBarge_ROW9071716647_1920x1080.jpg" alt="Featured image of post Nutanix AOS 5.0 新版本新特性" />&lt;p>Nutanix AOS 5.0 是一个很重要的功能更新大版本，它一气儿带来了46项之多的新功能；在您安装或者测试这个版本&amp;gt; 之前，先通过本文快速了解一下这些更新，可能是更加节省时间的方法。&lt;/p>
&lt;h2 id="主要功能清单">主要功能清单&lt;/h2>
&lt;p>myvirtualcloud.net网站用了4个blog，讲了下面的36项新特性：&lt;/p>
&lt;ol>
&lt;li>Cisco UCS B-Series Blade Servers Support&lt;/li>
&lt;li>Acropolis Affinity and Anti-affinity&lt;/li>
&lt;li>Acropolis Dynamic Scheduling (DRS++)&lt;/li>
&lt;li>REST API 2.0 and 3.0&lt;/li>
&lt;li>Support for XenServer TechPreview&lt;/li>
&lt;li>Network Visualization&lt;/li>
&lt;li>What-if analysis for New workloads and Allocation-based forecasting&lt;/li>
&lt;li>Native Self-Service Portal&lt;/li>
&lt;li>Snapshots – Self Service Restore UI&lt;/li>
&lt;li>Network Partner Integration Framework&lt;/li>
&lt;li>Metro Availability Witness&lt;/li>
&lt;li>VM Flash Mode Improvements&lt;/li>
&lt;li>Acropolis File Services GA (ESXi and AHV)&lt;/li>
&lt;li>Acropolis Block Services (CHAP authentication)&lt;/li>
&lt;li>Oracle VM and Oracle Linux Certified for AHV&lt;/li>
&lt;li>SAP Netweaver stack Certified for AHV&lt;/li>
&lt;li>Prism Search Improvements (support for Boolean expressions)&lt;/li>
&lt;li>I/O Metrics Visualization&lt;/li>
&lt;li>1-Click Licensing&lt;/li>
&lt;li>LCM – Lifecycle Manager&lt;/li>
&lt;li>Additional Prism Improvements&lt;/li>
&lt;li>AHV Scale Improvements&lt;/li>
&lt;li>AHV CPU and Memory Hot Add (Tech Preview)&lt;/li>
&lt;li>Advanced Compression for Cold Data&lt;/li>
&lt;li>Acropolis Change Block Tracking (CBT) for Backup Vendors&lt;/li>
&lt;li>Predictable Performance with Autonomic QoS&lt;/li>
&lt;li>NCC 3.0 with Prism Integration&lt;/li>
&lt;li>1-Node Replication Target&lt;/li>
&lt;li>Improved Mixed Workload Support with QoS&lt;/li>
&lt;li>Simplified SATADOM Replacement Workflow&lt;/li>
&lt;li>Mixed Node Support with Adaptive Replica Selection&lt;/li>
&lt;li>Dynamically Decreased Erasure Coding Stripes – Node Removals&lt;/li>
&lt;li>Multi Metadata Disk Support for use available SSDs on the node for metadata&lt;/li>
&lt;li>Erasure Coding(EC) support for changing the Replication Factor (RF) on containers&lt;/li>
&lt;li>Inline Compression for OpLog&lt;/li>
&lt;li>Linux Kernel Upgrade&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;a class="link" href="http://myvirtualcloud.net/nutanix-5-0-features-overview-beyond-marketing-part-1/" target="_blank" rel="noopener"
>Nutanix 5.0 Features Overview (Beyond Marketing) – Part 1&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://myvirtualcloud.net/nutanix-5-0-features-overview-beyond-marketing-part-2/" target="_blank" rel="noopener"
>Nutanix 5.0 Features Overview (Beyond Marketing) – Part 2&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://myvirtualcloud.net/nutanix-5-0-features-overview-beyond-marketing-part-3/" target="_blank" rel="noopener"
>Nutanix 5.0 Features Overview (Beyond Marketing) – Part 3&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://myvirtualcloud.net/nutanix-5-0-features-overview-beyond-marketing-part-4/" target="_blank" rel="noopener"
>Nutanix 5.0 Features Overview (Beyond Marketing) – Part 4&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="nutanix官方blog新版本介绍">Nutanix官方Blog新版本介绍&lt;/h2>
&lt;p>Nutanix 官方Blog的新版本发布帖 &lt;a class="link" href="https://www.nutanix.com/2017/01/03/5-0-release/" target="_blank" rel="noopener"
>The 5.0 Release is Here&lt;/a>&lt;/p>
&lt;p>Nutanix AOS 5.0 is available now for you to download and will carry a huge payload of innovation across Acropolis – the data plane, Prism – the management plane and AHV – built-in hypervisor. Over the last couple of months we have spoken about different capabilities that will be part of this release. Before we get into details of the release, it is important to take a step back and understand how the core platform is evolving.&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14835396530706.png"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>These services are announced but will be generally available in a subsequent product release&lt;/li>
&lt;/ul>
&lt;p>To deliver on the vision of Enterprise Cloud and offer public cloud-like services within the datacenter, it is important for us to provide infrastructure services similar to what the public cloud offers. Different workloads have different infrastructure needs and it is important to provide services that can be “turned-on” and “turned-off” based on applications needs – all without having to touch the underlying physical infrastructure. This is exactly what AWS does and that is what we are working towards with our Enterprise Cloud Platform as well.&lt;/p>
&lt;p>Here is a comparison of some of these infrastructure services offered by AWS and Nutanix. The core tenets of the public cloud and the pay-as-you-grow economics are as applicable to Nutanix as it is to the public cloud.&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14835397395341.png"
loading="lazy"
>&lt;/p>
&lt;p>The 5.0 release adds new infrastructure services to the platform and enhances the ones that already exist; delivering greater flexibility and potential cost savings for IT organizations of all sizes. With over 45 new capabilities in the software and hundreds of feature enhancements, this release is definitely a huge milestone for us.&lt;/p>
&lt;p>While it is impossible for us to cover all the capabilities in detail in one single blog, let me attempt to do a quick walk through of the ones we think you will love!&lt;/p>
&lt;h3 id="acropolis--data-plane-enhancements">Acropolis – Data Plane Enhancements&lt;/h3>
&lt;p>&lt;strong>Acropolis File Services (AFS)Generally Available:&lt;/strong> AFS is a natively built file storage service that eliminates the need for standalone NAS solutions. This capability was in Tech Preview for the past several months and is generally available with the 5.0 release. With AFS, customers can consolidate their virtual machines and the file data they rely on within the same cluster. AFS will work on ESXi and AHV hypervisors for a wide variety of use cases such as user-profiles, home directories, archives and more. You can learn more about this capability in this blog. Here is a quick summary &lt;a class="link" href="https://next.nutanix.com/t5/Nutanix-Connect-Blog/Ten-Things-you-need-to-know-about-Nutanix-Acropolis-File/ba-p/14524" target="_blank" rel="noopener"
>blog on AFS.&lt;/a>&lt;/p>
&lt;p>&lt;strong>Acropolis Block Services (ABS) Enhancements:&lt;/strong> ABS, like AFS, is natively built to expose storage to non-virtualized workloads. This capability was introduced in the 4.7 release. We have significantly enhanced ABS in 5.0 with support for dynamic load balancing and flash pinning for better performance, improved security through CHAP for safer client-server conversations and online resizing for higher availability. Additionally, Oracle joins the list of certified workloads on ABS. Here is a quick summary &lt;a class="link" href="http://next.nutanix.com/t5/Nutanix-Connect-Blog/Ten-Things-you-need-to-know-about-Nutanix-Acropolis-Block/ba-p/14969" target="_blank" rel="noopener"
>blog on ABS.&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14835399454618.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>Metro Availability Witness:&lt;/strong> Metro Availability is Nutanix’s synchronous replication solution for DR. Metro Availability Witness is a light-weight service that will be able to run anywhere to enable automatic failover from one site to another without service disruption by monitoring the status of both sites.&lt;/p>
&lt;p>&lt;strong>Compression Enhancements:&lt;/strong> The compression algorithm used for capacity optimization has significantly improved in the 5.0 release resulting in more efficient data compression. Additionally, on All-flash systems, compression will be turned on by default. With compression, deduplication, erasure coding and other native capacity optimization capabilities, customers can achieve up to 4:1 savings (depending on data type).&lt;/p>
&lt;p>&lt;strong>Single-node Replication Target:&lt;/strong> One of the common asks from Remote and Branch office/SMB customers was to have a single-node backup/replication target for smaller deployments of Nutanix. This enables customers to use native backup capabilities and replicate data to a storage heavy node of Nutanix that can be on the same site or a different remote site. With 5.0, this is possible with the single Nutanix node having ~40TB of raw capacity and act as a destination for backup/snapshot data.&lt;/p>
&lt;h3 id="ahv--hypervisor-enhancements">AHV – Hypervisor Enhancements&lt;/h3>
&lt;p>AHV, the native hypervisor solution from Nutanix, continues to grow leaps and bounds with several customers standardizing on AHV for all workloads. We have continued to add newer capabilities with every release of the product. 5.0 is no different and adds a couple of very important capabilities.&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14835400613035.png"
loading="lazy"
alt="New AHV capabilities over the last few releases"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14835400780807.png"
loading="lazy"
alt="AHV Adoption over the last several quarters"
>&lt;/p>
&lt;p>&lt;strong>AHV Affinity Rules:&lt;/strong> Workloads such as Microsoft SQL or Oracle are often attached to a specific node for licensing, security or HW configuration related reasons. With affinity rules, virtual machines can now be “pinned” to a specific host or a set of hosts. Additionally AHV will also support VM VM anti-affinity rules to try ensure that specific VMs are never on the same host together.&lt;/p>
&lt;p>&lt;strong>Acropolis Dynamic Scheduling (ADS):&lt;/strong> AHV has supported intelligent initial placement for a while now to make sure VMs are placed on the most optimal hosts when they are initially deployed. With ADS, the hypervisor can detect CPU, memory and storage controller hotspots and can move deployed VMs to a host that is ideal suited. Legacy hypervisor solutions factor in CPU and memory alone while making similar decisions. But with AHV, the VM placement algorithms will also factor in storage resources as well as storage controller bottlenecks before making a decision.&lt;/p>
&lt;p>&lt;strong>CPU/Memory Hot Add:&lt;/strong> With this capability, administrators can add vCPU and memory to a running VM without any service impact. As applications evolve, it is important to dynamically adjust resources assigned to them so that there is no performance impact for the end user. This is what the hot add feature will enable. In the 5.0 release, this feature will be available in Tech preview and is expected to be generally available in a subsequent release.&lt;/p>
&lt;p>With these capabilities, AHV is ready for all your production workloads and there is very little reason as to why any virtualized workload cannot be run on Nutanix and on AHV. Nutanix customers are already standardizing on AHV and are seeing significant savings in the overall cost of ownership across their entire infrastructure stack.&lt;/p>
&lt;h3 id="prism--management-plane-enhancements">Prism – Management Plane Enhancements&lt;/h3>
&lt;p>Over the last year Prism has evolved into a product suite of its own – with Prism Starter and Prism Pro, customers now have an option of choosing a one-click infrastructure management solution or a one-click infra management and operations management solution based on their needs.&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/img/14835402328470.png"
loading="lazy"
alt="5.0 brings enhancements to both Prism Starter and Prism Pro."
>&lt;/p>
&lt;p>&lt;strong>Prism Self-Service:&lt;/strong> Self-service will bring the goodness of AWS to enterprise datacenters. With this new capability, end-users can login to Prism with their own AD credentials and deploy and monitor applications whenever they want, based on Admin set policies. This removes common friction around developers and end users having to rely on IT admins for common tasks. Instead, administrators just assign resources for specific users or AD groups and end users have complete independence to perform actions that he/she is allowed to do. Here is a quick blog that summarizes this capability.&lt;/p>
&lt;p>&lt;strong>Network Visualization:&lt;/strong> This is another key capability that is part of Prism. With Network Visualization, administrators will be able to get an end-to-end operational view of the infrastructure all the way down to the networking layer. With views that provide insight into how virtual machines are connected to the host, NICs, the top of rack switches, the VLANs they are part of as well as the health of these connections, administrators will be able to get all the information they want about their infrastructure in a single screen, without having to rely on separate tools. This will help isolating and fixing common networking issues that result in application downtimes.&lt;/p>
&lt;p>&lt;strong>ESXi Management:&lt;/strong> The simplicity of VM management with Prism will extend to ESXi as well with this release – common VM operations that customers relied on vCenter for will be performed from within Prism. One of the common asks from customers was to not go back and forth to vCenter and instead consolidate all operations on Prism. In the first release as part of 5.0, Prism will enable administrators to perform common VM operations such as VM create, update, delete, clone etc. from within Prism. Combining VM operations and the rich monitoring and analytics, vCenter is only needed for less common maintenance and configuration tasks. With the hypervisor becoming commodity, end users get greater simplicity at the management layer.&lt;/p>
&lt;p>&lt;strong>Just-in-time Capacity Forecasting (available in Prism Pro):&lt;/strong> This is probably one of the most important additions to Prism. Just-in-time forecasting will enable IT to stay ahead of the game by modeling and understanding infrastructure needs based on application requirements even before applications are deployed. This way, IT not only understands application-centric capacity usage patterns and what can be done to optimize existing capacity, they can also plan their infrastructure needs for the future and deploy infrastructure if and only when they need them at “byte” sized granularity all based on recommendations from Prism.&lt;/p>
&lt;p>&lt;strong>Search Enhancements (Available in Prism Pro):&lt;/strong> One of the core aspects to delivering a personalized and consumer-grade management experience is to enable administrators to perform actions the same way they would do it in their personal lives. Prism Search, a Google like search engine, was introduced earlier this year so that administrators can perform all administrative actions through a simple search query. With support for Boolean expressions, saved searches, auto correct, synonyms based search and more, the 5.0 release will take Prism Search to a whole new level. As an example, administrators can type in “vm iops &amp;lt;1500” and quickly see all the VMs across all the sites that have IOPS less than 1500.&lt;/p>
&lt;p>有用链接：&lt;/p>
&lt;ul>
&lt;li>西瓜哥的微信文章介绍了部分上面的更新 &lt;a class="link" href="https://mp.weixin.qq.com/s?__biz=MjM5NDQyNDQ0Mw==&amp;amp;mid=2652388531&amp;amp;idx=1&amp;amp;sn=44f49e138cbebe8f1a70cb36e7ebaf89&amp;amp;chksm=bd6b6fa78a1ce6b1a38eac1e4c308fe884c002dec40c7af0c73b6b274302af02f99fa9b5f613&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0104VgmkmVpxE0kSlIgn7V89&amp;amp;key=b43a3af60b96e11efa7e8bf122519516151d18bab4ca2fa3f7cf1902edfb954a06c0633b1df245e14db446d84260e066f2d9ec85061191375b314c56d2d7b962c9727f37051f72a5010ca075676292b8&amp;amp;ascene=0&amp;amp;uin=ODYyMzEyOTQw&amp;amp;devicetype=iMac&amp;#43;MacBookPro13%2C1&amp;#43;OSX&amp;#43;OSX&amp;#43;10.12.2&amp;#43;build%2816C67%29&amp;amp;version=12010210&amp;amp;nettype=WIFI&amp;amp;fontScale=100&amp;amp;pass_ticket=V632gZ8yDTJQ9PL42foZMyhmNQ%2BjF8QFSkTj2plVSn7%2FT1HC452ubIAxwDppYh%2BA" target="_blank" rel="noopener"
>点这里。&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://portal.nutanix.com/#/page/docs/details?targetId=Release-Notes-Acr-v50:Release-Notes-Acr-v50" target="_blank" rel="noopener"
>Acropolis 5.0 release notes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://portal.nutanix.com/#/page/docs/details?targetId=Release-Notes-NCC-v3:rel-Release-Notes-NCC-v30.html" target="_blank" rel="noopener"
>Nutanix Cluster Check 3.0 release notes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://portal.nutanix.com/#/page/static/supportTools" target="_blank" rel="noopener"
>Nutanix Cluster Check 3.0 download&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://portal.nutanix.com/#/page/docs/details?targetId=Release-Notes-Prism-Central-v50:rel-Release-Notes-Prism-Central-v50.html" target="_blank" rel="noopener"
>PRISM Central 5.0 release notes&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DevOps书单</title><link>https://martinliu.cn/2017/01/03/devops-booklist/</link><pubDate>Tue, 03 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/03/devops-booklist/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/pexels-photo.jpg" alt="Featured image of post DevOps书单" />&lt;p>学习DevOps应该会使用到的书籍清单。&lt;/p>
&lt;p>我在豆瓣建立了一个书单，欢迎在豆瓣给我留言，评论和建议。&lt;a class="link" href="https://www.douban.com/doulist/46341810/" target="_blank" rel="noopener"
>豆瓣书单点这里。&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-25.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-22-24.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-19-21.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-16-18.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-13-15.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-10-12.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-7-9.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-4-6.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/booklist-1-3.png"
loading="lazy"
alt="DevOps书单"
>&lt;/p>
&lt;hr>
&lt;p>本清单来自于《DevOps Handbook》书中提到的书，更新到第五本；《看板方法》、《精益思想》、《Implementing Lean Software Development: From Concept to Cash》、《第五项修炼:学习型组织的艺术与实践》、《探索吧!深入理解探索式软件测试》&lt;/p>
&lt;h2 id="看板方法-科技企業漸進變革成功之道">《看板方法-科技企業漸進變革成功之道》&lt;/h2>
&lt;p>转自：&lt;a class="link" href="https://ruddyblog.wordpress.com/2014/09/30/%E7%9C%8B%E6%9D%BF%E6%96%B9%E6%B3%95-%E7%A7%91%E6%8A%80%E4%BC%81%E6%A5%AD%E6%BC%B8%E9%80%B2%E8%AE%8A%E9%9D%A9%E6%88%90%E5%8A%9F%E4%B9%8B%E9%81%93/" target="_blank" rel="noopener"
> Rubbyblog.wordpress.com&lt;/a>/images/&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/kanban-book.png"
loading="lazy"
alt="kanban-book"
>&lt;/p>
&lt;p>今天要介紹看板方法的由來， 上面這本書是由看板方法之父 David J. Anderson 於: 2010年 4月所著。簡字版是 2014 年2月出版。這篇文章在我上 TechDays 課程時就想登出來了，想把好書介紹給大家。但由於台灣的書商都沒有進口，所以一直等到我拿到第一批書後，肯定大家可以在坊間買到書時才把他登出來。原文書名: Kanban: Successful Evolutionary Change for Your Technology Business.&lt;/p>
&lt;p>看板方法：它是敏捷陣營中實施起來阻力最小，生產力又能大幅提升、前置時間大幅下降，而可預測性又絕佳的敏捷解決方案之一。好神奇喔 … 哈哈! 確實如此，所以我才會這麼急切的推薦給大家。另一個原因是Kanban Method 現在在美國正熱烈風行中，而我們現在開始追正是時候。為此放下了許多手上正在做的工作(包括一本 Scrum的教本)，努力開始推廣希望大家能受用。首先說明: 為何他推廣起來阻力最小?&lt;/p>
&lt;p>※ 實施起來阻力最小:&lt;/p>
&lt;p>因為David J. Anderson 本身是一個微軟的 PM出身，他跟大家一樣知道變革會讓許多人害怕，人們會認為自己的技術是否落伍了，開始擔心害怕變革會對自己的工作事業帶來不利，這種恐懼常常會帶來一種莫名的對立，因此在還沒開始變革之前就已經採取抵制的態度了。所以他創始的看板方法選擇從哪裡開始實施呢? 就從現在既有的流程開始。由工作者本身最熟悉的地方開始。起步的秘訣是甚麼呢? 是精實精神中從豐田系統中學來的原則，先從不浪費開始，作法: 在識別浪費後消除浪費。&lt;/p>
&lt;p>※ 如何能讓生產力大幅提升?&lt;/p>
&lt;p>由審視既有流程，依據 Little’s law的最大產出方法，接著找出阻礙最大產能的瓶頸所在，然後正視這個造成瓶頸的問題，把它顯現在看板上面，讓大家一起站在看板前面討論如何解決它，解決之後再持續進行改善的作業。&lt;/p>
&lt;p>※ 前置時間大幅下降&lt;/p>
&lt;p>過去我們都以為唯有透過良好的規劃及配合才能夠讓前置作業時間下降，但豐田企業的及時(Just In Time)備料讓庫存降至最低，讓半成品減至最少改變了工作流程的前置時間(Lead time)，因此得到大幅下降。&lt;/p>
&lt;p>看板還是看板方法 (Kanban or Kanban Method) 英文叫 Kanban，上網去搜尋會得到一大堆有關製造業的看板資料。所以請使用 Kanban Method去搜尋，因此中文就該叫做「看板方法」。簡體版的作者有用心在翻譯因此翻對了，值得買來閱讀。全書分成四部分:&lt;/p>
&lt;p>※ 第一部分；導讀: 作者說出他的想法，以及創作看板方法的原由。&lt;/p>
&lt;p>※ 第二部分；談使用看板方法的好處: 這裡有他個人做顧問時的經驗談，值得仔細閱讀。&lt;/p>
&lt;p>※ 第三部分；開始談實施看板方法的步驟了。(由六到十五章，好長又夠完整)&lt;/p>
&lt;p>※ 第四部分；談持續改進。在這裡你終於可以感受到精實軟體開發對作者的影響，以及作者由經濟學的角度來看精實軟體開發的第一原則: 消除浪費。&lt;/p>
&lt;p>接下來我就不在多說了，請讀者自己去看吧!(透漏一下，為了共襄盛舉，我正在寫一本有關精實開發的書，內容除了看板方法之外會大幅談到精實軟體開發，在這裡不想打廣告，因此書名就等出版後再說了!)&lt;/p>
&lt;h2 id="精益思想白金版">精益思想(白金版)&lt;/h2>
&lt;p>这本书在亚马逊中国有售：&lt;a class="link" href="https://www.amazon.cn/%e7%b2%be%e7%9b%8a%e6%80%9d%e6%83%b3-%e8%a9%b9%e5%a7%86%e6%96%afP-%e6%b2%83%e9%ba%a6%e5%85%8b" target="_blank" rel="noopener"
>https://www.amazon.cn/精益思想-詹姆斯P-沃麦克&lt;/a>
&lt;img src="https://martinliu.cn/images/14836204523398.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>简介&lt;/strong>&lt;/p>
&lt;p>《精益思想》于1996年秋季首次出版，历经20年，畅 销十多个国家，累计销量上百万册。本书的成功在于它对精益生产方式做了最 好的总结，为读者提供了精益的核心原则，实地考察了美国、德国、日本若干具有代表性的大小企业推行精益的实际情况和心得，为准备跨入精益之门和进一步学习、实施精益的人提供了最 好的指南，从而成为精益方面的经典著作。&lt;/p>
&lt;p>&lt;strong>基本信息&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">出版社: 机械工业出版社; 第1版 (2015年8月1日)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">外文书名: Lean Thinking ：Banish Waste and Create Wealth in Your Corporation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">丛书名: 精益思想丛书
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">平装: 365页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">语种： 简体中文
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">开本: 16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN: 7111510712, 9787111510710
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">条形码: 9787111510710
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品尺寸: 24 x 17.4 x 1.8 cm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品重量: 621 g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">品牌: 机械工业出版社
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ASIN: B0142EC7AA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">用户评分: 平均4.5 星 浏览全部评论 (82 条商品评论)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">亚马逊热销商品排名: 图书商品里排第7,694名
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="implementing-lean-software-development-from-concept-to-cash">Implementing Lean Software Development: From Concept to Cash&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14837758468347.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="基本信息">基本信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">出版社: Addison-Wesley Professional; 1 (2009年10月31日)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">丛书名: Addison-Wesley Signature Series (Beck)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">平装: 312页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">语种： 英语
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN: 0321620704
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">条形码: 9780321620705
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品尺寸: 17.5 x 1.8 x 22.9 cm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品重量: 499 g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">品牌: Pearson
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ASIN: 0321620704
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">用户评分: 分享我的评价
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">亚马逊热销商品排名: 图书商品里排第1,441,726名 (查看图书商品销售排行榜)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第64位 - 图书 &amp;gt; 进口原版书 &amp;gt; Computers &amp;amp; Technology（计算机与科技） &amp;gt; Business &amp;amp; Management（商业与管理） &amp;gt; Project Management
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第393位 - 图书 &amp;gt; 进口原版书 &amp;gt; Computers &amp;amp; Technology（计算机与科技） &amp;gt; Programming（编程） &amp;gt; Software Design, Testing &amp;amp; Engineering &amp;gt; Software Development
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="作者简介">作者简介&lt;/h3>
&lt;p>Mary Poppendieck has led teams implementing various solutions ranging from enterprise supply chain management to digital media. Mary is the president of Poppendieck LLC, which specializes in bringing lean techniques to software development.&lt;/p>
&lt;p>Tom Poppendieck, an enterprise analyst, architect, and agile process mentor, currently assists organizations in applying lean principles and tools to software development processes. The Poppendiecks are authors of Lean Software Development, winner of the 2004 Jolt Software Development Productivity Award, and Implementing Lean Software Development (both from Addison-Wesley).&lt;/p>
&lt;h2 id="the-fifth-discipline-the-art--practice-of-the-learning-organization">The Fifth Discipline: The Art &amp;amp; Practice of The Learning Organization&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14840700653952.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14840700772382.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="基本信息--第五项修炼学习型组织的艺术与实践">基本信息 第五项修炼：学习型组织的艺术与实践&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">出版社: 中信出版社; 第1版 (2009年10月1日)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">外文书名: The Fifth Discipline:The Art &amp;amp; Practice of The Learning Organization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">平装: 455页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">语种： 简体中文
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">开本: 16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN: 7508616820, 9787508616827
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">条形码: 9787508616827
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品尺寸: 22.8 x 17 x 2.8 cm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品重量: 739 g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">品牌: 中信出版股份有限公司
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ASIN: B002QMKJ4C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">用户评分: 平均4.5 星 浏览全部评论 (322 条商品评论)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">亚马逊热销商品排名: 图书商品里排第1,333名 (查看图书商品销售排行榜)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第6位 - 图书 &amp;gt; 经济管理 &amp;gt; 管理学理论与方法论 &amp;gt; 管理学基础理论
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第17位 - 图书 &amp;gt; 经济管理 &amp;gt; 企业经营与管理 &amp;gt; 管理指南
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第617位 - 图书 &amp;gt; 在线试读
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="编辑推荐">编辑推荐&lt;/h3>
&lt;p>《第五项修炼:学习型组织的艺术与实践(新世纪全新扩充修订版)》由当代最杰出的新管理大师彼得•圣吉撰写的著作，被誉为21世纪的管理圣经、20世纪屈指可数的几本管理经典、世界上影响最深远的管理书籍之一，并被《哈佛商业评论》评为过去75年具有影响力的管理类图书，还荣获世界企业学会荣誉的开拓者奖！
进入21世纪以来，全球经济的迅猛发展，使得全球企业管理趋势、管理理念也顺应发生了巨大的变化，作为新世纪全新扩充修订版，《第五项修炼:学习型组织的艺术与实践(新世纪全新扩充修订版)》其背后是15年来把原书理念付诸实践的经验和案例。圣吉明确指出，从长远来看，你的组织可持续的竞争优势，就是比对手更好更快的学习能力。15年前，许多《第五项修炼》的核心理念都曾显得很激进。但这些理念的许多应用方法，后来已经被融入到人们观察世界的方式中，也被整合到人们的管理实践中；《第五项修炼:学习型组织的艺术与实践(新世纪全新扩充修订版)》对前一版进行了全面修订，新版书中的领导力案例故事揭示了这些经历。并增添了新的内容：实践中的反思，为企业、个人读者更准确理解最新管理理念，对学习型组织进行了有效的反思，对建设学习型组织所面临的新疑惑提供了新的思维。&lt;/p>
&lt;h3 id="名人推荐">名人推荐&lt;/h3>
&lt;p>流行的管理体系很摧残人……教育界、工商界和政府机构的管理层的任务，应该是使系统最优化……彼得·圣吉的著作《第五项修炼》是帮助开始这项工作的好书，它让我学到了许多东西。
——爱德华·戴明博士，全面质量管理运动(TQM）的先驱。&lt;/p>
&lt;h3 id="媒体推荐">媒体推荐&lt;/h3>
&lt;p>《第五项修炼》是过去75年来最有影响力的管理学著作之一。
——《哈佛商业评论》
圣吉的这本著作已经是一本不折不扣的管理学经典。
——《波士顿环球报》&lt;/p>
&lt;h3 id="作者简介-1">作者简介&lt;/h3>
&lt;p>作者：（美国）彼得•圣吉 译者：张成林&lt;/p>
&lt;p>彼得•圣吉博士（Dr.Peter M. Senge），麻省理工学院斯隆管理学院的高级教授讲师，国际组织学习学会（SoL）和索奥中国（SoL China）的创始主席。除《第五项修炼》之外，他还与人合著了《第五项修炼实践篇》（1994）、《变革之舞》（1999）、《学习型学校》（Schools that Learn, 2000）、《体悟当下》（Presence, 2004），以及最近出版的《必要的革命》（The Necessary Revolution, 2008）等著作。圣吉被誉为最富创新精神的世界级管理学和领导学思想大师之一。他早年毕业于斯坦福大学工程专业，并获得麻省理工社会系统模型硕士和管理学博士，现家居美国马萨诸塞州。&lt;/p>
&lt;h2 id="explore-it-reduce-risk-and-increase-confidence-with-exploratory-testing">Explore It!: Reduce Risk and Increase Confidence with Exploratory Testing&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14841498198916.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/14841498461381.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="探索吧深入理解探索式软件测试">探索吧!深入理解探索式软件测试&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">出版社: 机械工业出版社; 第1版 (2014年1月1日)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">外文书名: Explore It! Reduce Risk and Increase Confidence with Exploratory Testing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">丛书名: 软件工程技术丛书
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">平装: 151页
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">语种： 简体中文
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">开本: 16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN: 9787111451587
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">条形码: 9787111451587
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品尺寸: 24.2 x 16.8 x 0.8 cm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">商品重量: 281 g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">品牌: 机械工业出版社
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ASIN: B00IHQBQZC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑推荐
《探索吧!深入理解探索式软件测试》给出实用性很强的理念，可用于探索从典型GUI场景到测试软件需求的一切，还包括如何探索低层级代码的建议。此书不只是给软件测试人员看的，对软件管理人员、开发人员也具有重大意义。&lt;/p>
&lt;p>名人推荐
“Elisabeth开创了将探索式测试应用于敏捷开发的先河，并推动它不断演进，使其成为了一种主流实践。”
——Ward Cunnningham wiki概念的发明者 设计模式和敏捷软件方法的先驱之一&lt;/p>
&lt;p>“这是我看到的最佳书籍之一。优良的测试设计源自优良的测试思路，这本书里满是各种优秀的测试思路，辅以故事情节烘托，涎玉沫珠。”
——Alan Page 微软公司Principal SDEI《微软的软件测试之道》作者&lt;/p>
&lt;h2 id="the-field-guide-to-understanding-human-error">The Field Guide to Understanding &amp;lsquo;Human Error‘&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14842313763902.jpg"
loading="lazy"
>&lt;/p>
&lt;p>This latest edition of The Field Guide to Understanding ‘Human Error&amp;rsquo; will help you understand how to move beyond &amp;lsquo;human error&amp;rsquo;; how to understand accidents; how to do better investigations; how to understand and improve your safety work. You will be invited to think creatively and differently about the safety issues you and your organization face. In each, you will find possibilities for a new language, for different concepts, and for new leverage points to influence your own thinking and practice, as well as that of your colleagues and organization.&lt;/p>
&lt;h3 id="product-details">Product Details&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">File Size: 3149 KB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Print Length: 247 pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Publisher: Ashgate; 3 edition (December 28, 2014)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Publication Date: December 28, 2014
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sold by: Amazon Digital Services LLC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Language: English
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ASIN: B00Q8XCSFI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Text-to-Speech: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Ray:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Not Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Word Wise: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Lending: Not Enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="about-the-author">About the Author&lt;/h3>
&lt;p>Sidney Dekker (PhD Ohio State University, USA, 1996) is currently professor at Griffith University in Brisbane, Australia, where he runs the Safety Science Innovation Lab. He is also Professor (Hon.) of psychology at The University of Queensland, and Professor (Hon.) of human factors and patient safety at the Royal Children&amp;rsquo;s Hospital in Brisbane. Previously, Sidney was Professor of human factors and system safety at Lund University in Sweden. After becoming full professor, he learned to fly the Boeing 737, working part-time as an airline pilot out of Copenhagen. Sidney is the best-selling author of a multitude of human factors and safety books, including, most recently, Safety Differently (2014), Second Victim (2013), Just Culture (2012), Drift into Failure (2011), and Patient Safety (2011).&lt;/p>
&lt;h2 id="lean-it-enabling-and-sustaining-your-lean-transformation">Lean IT: Enabling and Sustaining Your Lean Transformation&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14844093662859.jpg"
loading="lazy"
>&lt;/p>
&lt;p>###Review&lt;/p>
&lt;p>This book will have a permanent place in my bookshelf. In my ten-year study of high performing IT organizations, I’ve found that businesses rely on IT far more than they think. The impacts of poor flow from application development into IT operations can be devastating: ever increasing cycle times and amounts of rework, and an ever increasing amount of heroics required in IT operations to preserve the illusion of stability and reliability.
―Gene Kim, Chief Technology Officer, Tripwire, Inc.&lt;/p>
&lt;p>There has never been a more critical time to improve how IT integrates with the global business enterprise. This book provides an unprecedented look at the role that Lean will play in making this revolutionary shift and the critical steps for sustained success.
―Steve Castellanos, Lean Enterprise Director; Nike, Inc.&lt;/p>
&lt;p>Twenty years from now the firms which dominate their industries will have fully embraced lean strategies throughout their IT organizations. Ten years from now those organizations will have started pulling ahead of their competitors as the result of lean IT. Today this book will show those organizations the path they need to start out on. Will your organization be one of them?
―Scott W. Ambler, Chief Methodologist for Agile and Lean, IBM Rational&lt;/p>
&lt;p>&amp;hellip; goes both wide and deep in its exploration of Lean … a great survival manual for those needing nimble and adaptive systems.
―Dr. David Labby, MD, PhD, Medical Director and Director of Clinical Support and Innovation, CareOregon&lt;/p>
&lt;p>This book makes a major contribution in an often-ignored but much-needed area. It ranges over a huge area – including excellent cases – that will bring IT professionals into the Lean fold but will also enable Lean managers to reach out to IT.
―John Bicheno, Program Director MS in Lean Operations, Cardiff University&lt;/p>
&lt;p>… a comprehensive view into the world of Lean IT, a must read!
―Dave Wilson, Quality Management, Oregon Health &amp;amp; Science University&lt;/p>
&lt;p>###About the Author&lt;/p>
&lt;p>Steve Bell, CFPIM brings over twenty years&amp;rsquo; experience in finance, operations management and information systems. He is the author of Lean Enterprise Systems, Using IT for Continuous Improvement. (2006)&lt;/p>
&lt;p>Mike Orzen, CMA, CFPIM, PMP delivers a unique blend of IT, operations management, Lean, Six Sigma, and project management. With a BA from Stanford University in economics and an MBA from the University of Oregon, Mike has been consulting, coaching, and teaching for over 20 years.&lt;/p>
&lt;p>Steve and Mike are faculty members of the Lean Enterprise Institute. Together, the authors combine their experience in information systems and process improvement to share their lessons learned.&lt;/p>
&lt;h3 id="product-details-1">Product Details&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Hardcover: 370 pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Publisher: Productivity Press; 1 edition (September 14, 2010)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Language: English
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-10: 1439817561
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-13: 978-1439817568
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Product Dimensions: 6.1 x 1 x 9 inches
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Shipping Weight: 1.4 pounds (View shipping rates and policies)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Average Customer Review: 4.9 out of 5 stars See all reviews (20 customer reviews)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Amazon Best Sellers Rank: #129,956 in Books (See Top 100 in Books)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="true-north-discover-your-authentic-leadership">True North: Discover Your Authentic Leadership&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14844095698595.jpg"
loading="lazy"
>&lt;/p>
&lt;p>###Review&lt;/p>
&lt;p>&amp;ldquo;With great clarity and insight, Bill George and Peter Sims make a persuasive argument that the journey toward authentic leadership—that finding and pursuing your own True North&amp;ndash;is the key to leadership in all fields, whether in business, government, or the nonprofit arena.&amp;rdquo;
—From the Foreword by David Gergen&lt;/p>
&lt;p>&amp;ldquo;In True North, Bill George once again provides a roadmap for leadership in the 21st Century. The future belongs to leaders who want to win, without ever losing track of their own values. We live in a day when the best people can work anywhere. They will follow only authenticity—a person who leads with passion and purpose.&amp;rdquo;
—Jeff Immelt, CEO, General Electric&lt;/p>
&lt;p>&amp;ldquo;True North is an awe-inspiring gift to the world. The 125 men and women whose leadership journeys are so beautifully rendered in this book show us that we can have enormous impact without compromising our values—indeed, that we are more successful when we stay true to our ideals. Every aspiring leader (or leader who aspires to become even better) will draw strength and wisdom from this wonderful book.&amp;rdquo;
—Rosabeth Moss Kanter, Harvard Business School professor and best-selling author of Confidence: How Winning Streaks &amp;amp; Losing Streaks Begin &amp;amp; End&lt;/p>
&lt;p>&amp;ldquo;True North is about the power of authentic leadership. Great leaders are defined by a sense of passion and purpose and by a profound desire to make a difference. Anyone can find their own True North, if you care deeply and love what you do. This book is a wonderful roadmap for how to get started on the journey.&amp;rdquo;
—Andrea Jung, chairman and CEO, Avon Products, Inc.&lt;/p>
&lt;p>&amp;ldquo;If you want to move your leadership in the right direction, read True North. Drawing on the personal stories of some of the world’s most effective leaders, the book shows that you become a successful leader when you stay on course with your highest self.&amp;rdquo;
—Ken Blanchard, coauthor of The One Minute Manager® and Leading at a Higher Level&lt;/p>
&lt;p>&amp;ldquo;True North provides a new leadership paradigm and a window into the stories and approaches of dozens of our nation’s best leaders. It is an inspirational, invaluable source of guidance for those who want to make a significant impact.&amp;rdquo;
—Wendy Kopp, president and founder of Teach for America&lt;/p>
&lt;p>&amp;ldquo;True North reveals just how powerful authentic leadership can be and, best of all, how to achieve it.&amp;rdquo;
—Warren Bennis&lt;/p>
&lt;h3 id="product-details-2">Product Details&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Hardcover: 251 pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Publisher: Jossey-Bass; 1 edition (March 9, 2007)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Language: English
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-10: 0787987514
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-13: 978-0787987510
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Product Dimensions: 6.3 x 1 x 9.4 inches
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Shipping Weight: 1 pounds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Average Customer Review: 4.5 out of 5 stars See all reviews (129 customer reviews)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Amazon Best Sellers Rank: #17,250 in Books (See Top 100 in Books)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="gemba-walks">Gemba Walks&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/images/14844099928904.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="editorial-reviews">Editorial Reviews&lt;/h3>
&lt;p>In 12 new essays, ranging from the provocative to the practical and written specially for the second edition of Gemba Walks author and management expert Jim Womack reflects on the past 30 years of lean, and assesses the current state of lean today.
He also shares thoughts on how lean thinking and practice can continue to make the world a better place by gaining traction in areas such as government and healthcare, provides practical guidance for how leaders everywhere can realize the full benefits of a lean management system, and shares hope for continued improvement on the path to better work and more value.
Over the past 30 years, Womack has developed a method of going to visit the gemba at countless companies and keenly observing how people work together to create value. He has shared his thoughts and discoveries from these visits with the lean community through a monthly letter. With Gemba Walks second edition, Womack has selected and re-organized his key letters, as well as written 12 new essays.
Gemba Walks shares his insights on topics ranging from the application of specific tools, to the role of management in sustaining lean, as well as the long-term prospects for this fundamental new way of creating value. Reading this book will reveal to readers a range of lean principles, as well as the basis for the critical lean practice of: go see, ask why, and show respect.
Womack explains:
• whatever happened to Toyota and what happens next to lean?
• how lean got its name 25 years ago; a special essay co-authored by Jim and John Krafcik, president and CEO, Hyundai Motors America
• work, management, and leadership &amp;ndash; what is the real work of the lean leader?
• don’t offshore or reshore –leanshore
• why companies need fewer heroes and more farmers (who work daily to improve the processes and systems needed for perfect work and who take the time and effort to produce long-term improvement)
• how “good” people who work in “bad” processes become as “bad” as the process itself
• how the real practice of showing respect comes down to helping workers frame and solve their own problems
• how the short-term gains from lean tools can be translated to enduring change from lean management.
• how the lean manager has a “restless desire to continually rethink the organization’s problems, probe their root causes, and lead experiments to test the best currently known countermeasures”
By sharing his personal path of discovery, Womack sheds new light on the continued adoption and development of the most important new business system of the past fifty years. His journey will provide courage and inspiration for every lean practitioner today.&lt;/p>
&lt;p>###Product Details&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Paperback: 311 pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Publisher: Lean Enterprise Institute, Inc.; 2nd ed. edition (January 1, 2013)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Language: English
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-10: 193410938X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ISBN-13: 978-1934109380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Product Dimensions: 6 x 1 x 8.9 inches
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Shipping Weight: 1.6 pounds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Average Customer Review: 3.7 out of 5 stars See all reviews (10 customer reviews)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Amazon Best Sellers Rank: #357,633 in Books (See Top 100 in Books)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 11799 in Books &amp;gt; Textbooks &amp;gt; Business &amp;amp; Finance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 39798 in Books &amp;gt; Business &amp;amp; Money
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Continuous Delivery: Reliable Software Releases Through Build, Test, and Deployment Automation&lt;/p>
&lt;p>持续交付：发布可靠软件的系统方法&lt;/p>
&lt;p>&lt;a class="link" href="http://item.jd.com/10843669.html" target="_blank" rel="noopener"
>http://item.jd.com/10843669.html&lt;/a>&lt;/p>
&lt;p>Eric J.Evans在《领域驱动设计》一书中&lt;/p>
&lt;p>**Domain Driven Design by Eric J. Evans.&lt;/p>
&lt;p>《Architecture and Patterns for IT Service Management, Resource Planning, and Governance: Making Shoes for the Cobbler’s Children, observes》&lt;/p>
&lt;p>正如Steven j. Spear在他的书《The High-Velocity Edge》&lt;/p>
&lt;p>1984年由Eliyahu M. Goldratt博士写的《目标：简单而有效的常识管理》。&lt;/p>
&lt;p>2009年，Mike Rother编写了《丰田套路：转变我们对领导力与管理的认知》（&lt;em>Toyota Kata: Managing People for Improvement, Adaptiveness and Superior Results&lt;/em>）&lt;/p>
&lt;p>Value Stream Mapping: How to Visualize Work and Align Leadership for Organizational Transformation&lt;/p>
&lt;p>(英语) 精装 – 2013年12月16日
Karen Martin (作者), Mike Osterling (作者)&lt;/p>
&lt;p>&lt;a class="link" href="https://www.amazon.com/dp/B00EHIEJLM/ref=dp-kindle-redirect?_encoding=UTF8&amp;amp;btkr=1" target="_blank" rel="noopener"
>https://www.amazon.com/dp/B00EHIEJLM/ref=dp-kindle-redirect?_encoding=UTF8&amp;btkr=1&lt;/a>&lt;/p>
&lt;p>In the book Implementing Lean Software Development: From Concept to Cash, Mary and Tom Poppendieck describe waste and hardship in the software development stream as anything that causes delay for the customer, such as activities that can be bypassed without affecting the result.&lt;/p>
&lt;p>“点名、责备和羞辱”模式是Sydney Dekker博士批评的坏苹果理论的一部分，在他的书《The Field Guide to Understanding Human Error》里有深入讨论。&lt;/p>
&lt;p>《Gemba Walks》的作者Jim Womack描述了领导者和前线工作者之间必须发生的互补工作关系和相互尊重。根据Womack的说法，这种关系是必要的，因为谁都无法单独解决问题 - 领导者并不会足够的贴近一线工作，这是解决任何问题所需要的，而前线工作者也没有更广的组织背景的认知或权&lt;/p>
&lt;p>After the near-death experience of eBay in the late 1990s, Marty Cagan, author of Inspired: How To Create Products Customers Love, the seminal book on product design and management, codified the following lesson:&lt;/p>
&lt;p>界定上下文(Bounded contexts)是Eric J.Evans在《领域驱动设计》一书中提出的概念。其思路是开发人员能够理解和更新服务的代码，而不需要知道其关联服务（peers）的内部逻辑。同时，服务间严格通过API协作，不共享数据结构、数据库Schema或内部的对象。界定上下文确保服务间职责的划分，并具有良好定义的接口，同时也提高了可测试性。&lt;/p>
&lt;p>Scrumisanagiledevelopmentmethodology,describedas“aflexible,holisticproductdevel- opment strategy where a development team works as a unit to reach a common goal.” It was first fully described by Ken Schwaber and Mike Beedle in the book Agile Software Development with Scrum. In this book, we use the term “agile development” or “iterative development” to encompass the various techniques used by special methodologies such as Agile and Scrum.&lt;/p></description></item><item><title>HPE 分兵两路进军超融合市场</title><link>https://martinliu.cn/2017/01/03/HPE%20%E5%88%86%E5%85%B5%E4%B8%A4%E8%B7%AF%E8%BF%9B%E5%86%9B%E8%B6%85%E8%9E%8D%E5%90%88%E5%B8%82%E5%9C%BA/</link><pubDate>Tue, 03 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/03/HPE%20%E5%88%86%E5%85%B5%E4%B8%A4%E8%B7%AF%E8%BF%9B%E5%86%9B%E8%B6%85%E8%9E%8D%E5%90%88%E5%B8%82%E5%9C%BA/</guid><description>&lt;img src="https://martinliu.cn/images/WinterOwls_Hokkaido_shutterstock_7934020_FF_768_HD_ZH-CN898513788.jpg" alt="Featured image of post HPE 分兵两路进军超融合市场" />&lt;p>关于HP超融合产品家族的变迁简史和相关评论，本文转自 HC 250? HC 380? What are they actually for?。&lt;/p>
&lt;p>转帖：《HC 250? HC 380? What are they actually for?》
&lt;a class="link" href="http://www.theregister.co.uk/2016/12/05/the_state_of_hpes_hyperconverged_play/" target="_blank" rel="noopener"
>http://www.theregister.co.uk/2016/12/05/the_state_of_hpes_hyperconverged_play/
&lt;/a>&lt;/p>
&lt;p>HP/HPE 超融合产品线发展如下图所示
&lt;img src="https://martinliu.cn/img/hpe_hyperconverged_product_progression.jpg"
loading="lazy"
alt="HP/HPE hyper-converged product lines progression"
>&lt;/p>
&lt;h3 id="comment">+Comment&lt;/h3>
&lt;p>The positioning of these two hyper-converged systems is confusing. We observe that the physically larger and vSphere-only HC 380, with its brand number larger than the HC 250, is for use by operators requiring operational simplicity, whereas the physically smaller and denser HC 250 is for more complicated operations in both vSphere and Hyper-V environments, yet it covers ROBO needs where customers don&amp;rsquo;t have skilled IT staff.&lt;/p>
&lt;p>Getting some ProLiant DL380 brand goodness in the HC 380 name, Apollo supercomputer brand messages in the HC 250 name, and not yet providing HCOE v2 to the HC 250, has provided confusing brand positioning.&lt;/p>
&lt;p>It also seems that both systems should support Hyper-V and HCOE v2. That would make customers&amp;rsquo; lives simpler. The HC 380 should have its scale-out limit go past 16 nodes. Thirty-two would be good and then it would match the non-standard and non-recommended 32-node limit of the HC 250. ®&lt;/p>
&lt;h2 id="nutanix-exec-cisco-hpe-vmware-cant-provide-aws-like-experience-for-hyper-converged-market">Nutanix Exec: Cisco, HPE, VMware Can&amp;rsquo;t Provide AWS-Like Experience For Hyper-Converged Market&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.crn.com/news/data-center/300083025/nutanix-exec-cisco-hpe-vmware-cant-provide-aws-like-experience-for-hyper-converged-market.htm" target="_blank" rel="noopener"
>http://www.crn.com/news/data-center/300083025/nutanix-exec-cisco-hpe-vmware-cant-provide-aws-like-experience-for-hyper-converged-market.htm&lt;/a>&lt;/p>
&lt;p>One of Nutanix&amp;rsquo;s top executives said Cisco, Hewlett Packard Enterprise and VMware cannot provide a best-in-class experience for their hyper-converged products since they don&amp;rsquo;t own the entire software stack.&lt;/p>
&lt;p>&amp;ldquo;Everybody and their dog is in this space right now,&amp;rdquo; said Sunil Potti, Nutanix&amp;rsquo;s chief product and development officer. &amp;ldquo;But unless you are owning most of the stack, you can&amp;rsquo;t provide that full experience with a single click.&amp;rdquo;&lt;/p>
&lt;p>Potti told attendees of the Raymond James Technology Investors Conference on Monday that up until 18 months ago, much of the market felt that hyper-converged infrastructure – which combines compute, storage, networking and virtualization on server hardware - could be a good product, but questioned whether it would support all use cases.&lt;/p>
&lt;p>But as end users became more adamant about having hyper-converged architectures deployed for their new workloads, Potti said the space has gone from being the exclusive domain of smaller IT vendors to attracting some of the biggest names in IT.&lt;/p>
&lt;p>And while Potti said the big guys bring a lot of go-to-market muscle to the table, some of them don&amp;rsquo;t seem to grasp the importance of providing totally seamless functionality.&lt;/p>
&lt;p>&amp;ldquo;Some of them are very formidable, but some of them are also sleeping giants because they are growing old,&amp;rdquo; Potti said at the conference at the Westin New York Grand Central. &amp;ldquo;You can&amp;rsquo;t just take a Nokia phone, slap on Windows and say &amp;lsquo;I won the smartphone war.&amp;rsquo; There&amp;rsquo;s a reason why those things didn&amp;rsquo;t work.&amp;rdquo;&lt;/p>
&lt;p>Potti pointed to the example of Cisco&amp;rsquo;s hyper-converged offering, which he said competes with VMware&amp;rsquo;s products, but is also dependent on VMware to properly function.&lt;/p>
&lt;p>&amp;ldquo;None of them have their own virtualization experience,&amp;rdquo; Potti said. &amp;ldquo;When you go to Amazon, you don&amp;rsquo;t go buy VMWare for Amazon. It&amp;rsquo;s built in.&amp;rdquo;&lt;/p>
&lt;p>A Cisco spokesman said its customers prefer having a hyperconverged product that integrates with existing converged infrastructure and traditional storage rather than having to create another infrastructure silo. More than 600 organizations have adopted Cisco&amp;rsquo;s HyperFlex since it was launched a few months ago, the spokesman said.&lt;/p>
&lt;p>Paul Miller, VP of marketing for HPE&amp;rsquo;s converged data center infrastructure group, said HPE&amp;rsquo;s new hyperconverged offering is as easy as public cloud, allowing users adjust VMs from their cell phones with just a few clicks. And unlike the hyperconverged-only vendors, Miller said HPE&amp;rsquo;s hyperconverged offering won&amp;rsquo;t become and IT island since it can be managed across a large footprint of infrastructure.&lt;/p>
&lt;p>VMware did not respond to a request for comment.&lt;/p>
&lt;p>Potti said Nutanix, in contrast, evolved beyond simply being a storage technology company four years ago when it started building its own hypervisor and virtualization tools. As a result, Potti said, Nutanix has completely re-imagined how the software stack is built from the ground up.&lt;/p>
&lt;p>&amp;ldquo;Nutanix is a platform player,&amp;rdquo; Potti said. &amp;ldquo;It&amp;rsquo;s not a product player … If you don&amp;rsquo;t provide the full stack, you can&amp;rsquo;t provide that Amazon-like experience.&amp;rdquo;&lt;/p>
&lt;p>Nutanix&amp;rsquo;s prime objective is providing an AWS-like experience in the data center, Potti said, and the company isn&amp;rsquo;t trying to replicate the hyper-converged offerings Cisco and VMware are bringing to market.&lt;/p>
&lt;p>The rising adoption of AWS and other public cloud services over the past five or six years has been tremendously helpful for Nutanix since many end users have already worked through departmental feuds and have grown accustomed to consuming a one-click service across the entire company, Potti said.&lt;/p>
&lt;p>&amp;ldquo;It has emotionally built a cognitive bias toward an architecture like this,&amp;rdquo; Potti said. &amp;ldquo;We are looking to provide an Amazon-like experience for the global enterprise.&amp;rdquo;&lt;/p></description></item><item><title>Nutanix CE All In One</title><link>https://martinliu.cn/2017/01/02/Nutanix-CE-all-in-one/</link><pubDate>Mon, 02 Jan 2017 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2017/01/02/Nutanix-CE-all-in-one/</guid><description>&lt;img src="https://martinliu.cn/images/HongKongEye_ZH-CN12285832688_1920x1080.jpg" alt="Featured image of post Nutanix CE All In One" />&lt;p>Nutanix CE是Nutanix社区版软件的简称，它是Nutanix企业版产品的功能精简集合，是体验和测试Nutanix技术的很方便的途径。&lt;/p>
&lt;h2 id="nutanix-community-edition-社区版简介">Nutanix Community Edition 社区版简介&lt;/h2>
&lt;p>&lt;img src="https://martinliu.cn/img/Community_Edition_-_Nutanix.png"
loading="lazy"
alt="Nutanix CE"
>&lt;/p>
&lt;p>这个产品目前的位置在 &lt;a class="link" href="https://www.nutanix.com/products/community-edition/" target="_blank" rel="noopener"
>https://www.nutanix.com/products/community-edition/&lt;/a>；目前这个页面还没有中文化，下面简单介绍以下。&lt;/p>
&lt;ul>
&lt;li>Feature Rich Software 它是一个功能丰富的软件&lt;/li>
&lt;li>Broad Hardware Support &amp;amp; Available On-demand 很丰富的硬件支持，在网上可以按需体验&lt;/li>
&lt;li>Zero Cost 零成本&lt;/li>
&lt;/ul>
&lt;p>用Nutanix CE社区版体验，体验超融合技术的三个步骤。&lt;/p>
&lt;ol>
&lt;li>注册 ： 这次Nutanix社区，下载安装镜像&lt;/li>
&lt;li>部署 ： 在你的服务器上部署，或者在Ravello上在线开启体验；&lt;a class="link" href="https://www.youtube.com/watch?v=xKtQRp6dcAc" target="_blank" rel="noopener"
>官方安装部署视频点这里&lt;/a>&lt;/li>
&lt;li>玩耍 ： 安装完之后就可以开心地玩耍了，有问题请移步 &lt;a class="link" href="http://next.nutanix.com/t5/Discussion-Forum/bd-p/Discussion" target="_blank" rel="noopener"
>社区版论坛&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>用物理机安装和体验的几点注意事项如下：&lt;/p>
&lt;ul>
&lt;li>物理机安装支持1，3，4个节点的部署；推荐内存在32GB以上；由于版本CE 2016.12.22的CVM的内存需求是24GB，由于加入了自服务门户功能；建议使用SSD硬盘，最好能混搭一些普通硬盘。&lt;/li>
&lt;li>安装后的首次启动需要系统能链接互联网，否则CVM会启动不了，首次启动成功之后就不用再联网了&lt;/li>
&lt;li>用虚拟机安装，请注意本机的内存，和给虚拟机分配的内存，网上也有修改对内存和CPU限制修改的脚本&lt;/li>
&lt;/ul>
&lt;p>产品在社区里的文档页面： &lt;a class="link" href="http://next.nutanix.com/t5/Discussion-Forum/Download-Nutanix-CE-Docs-and-Guides/m-p/16442#U16442" target="_blank" rel="noopener"
>点这里&lt;/a>&lt;/p>
&lt;h2 id="参考配置">参考配置&lt;/h2>
&lt;p>Intel NUC 最新版一台，i7处理器，两条16GB内存，两条512GB硬盘。它的好处是便携；然而内存还是有限，不能跑多少个虚拟机。&lt;/p>
&lt;h2 id="相关文档">相关文档&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="http://huanwenli.blog.51cto.com/2848240/1749083" target="_blank" rel="noopener"
>在VMware Workstation上安装Nutanix CE&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.nextech.space/nextech/2016/06/nutanix-community-edition%E5%AE%89%E8%A3%85%E5%9C%A8vsphere%E7%8E%AF%E5%A2%83%E4%B8%AD/" target="_blank" rel="noopener"
>Nutanix Community Edition安装在vSphere环境中&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.onlyeric.com/2016/05/13/%E6%B5%85%E5%B0%9D%E8%B6%85%E8%9E%8D%E5%90%88%E4%B9%8BNutanix-%E4%B8%8A-%E4%BB%8B%E7%BB%8D%E7%AF%87/" target="_blank" rel="noopener"
>浅尝超融合之Nutanix(上)介绍篇&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.onlyeric.com/2016/05/15/%E6%B5%85%E5%B0%9D%E8%B6%85%E8%9E%8D%E5%90%88%E4%B9%8BNutanix-%E4%B8%8B-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E7%AF%87/" target="_blank" rel="noopener"
>浅尝超融合之Nutanix(下)安装篇&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.dockerinfo.net/1865.html" target="_blank" rel="noopener"
>Nutanix超”容”合之ACS Acropolis Container Service(下)实战篇01&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.dockerinfo.net/1867.html" target="_blank" rel="noopener"
>Nutanix超”容”合之ACS Docker Volume Plugin的使用和数据持久化测试&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://nutanix.club/" target="_blank" rel="noopener"
>http://nutanix.club/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://nutanixbible.com/" target="_blank" rel="noopener"
>Nutanix圣经&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>美国西岸旧金山之行</title><link>https://martinliu.cn/2016/12/31/west-coast-SFO/</link><pubDate>Sat, 31 Dec 2016 00:00:00 +0000</pubDate><guid>https://martinliu.cn/2016/12/31/west-coast-SFO/</guid><description>&lt;img src="https://martinliu.cn/images/sfan-gate-park.jpg" alt="Featured image of post 美国西岸旧金山之行" />&lt;p>这次旅行的目的地是硅谷腹地圣何塞，工作了一周之后，周末在旧金山简单游玩了一下。&lt;/p>
&lt;h2 id="交通">交通&lt;/h2>
&lt;p>从北京到硅谷（圣何塞）有了海航直飞的飞机还是很方便的，在淡季的时候票价也不错。如果你的目的地就在圣何塞市附近的话，乘坐这个航班无疑是最佳的选择。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2754.jpg"
loading="lazy"
alt="IMG_2754"
>&lt;/p>
&lt;p>我是星期天从北京出发的，飞机经过了11个多小时的飞行后，抵达圣何塞的时间是：同一天的上午。由于机场离我住的酒店太近了，我就经历了人生第一次，从机场走路去酒店入住。&lt;/p>
&lt;p>我在圣何塞待了大约5天，公司和酒店离的非常近，而且公司每天的餐食足够让人忘记去找饭馆吃饭这回事，这也是我首次出差这么不计较吃饭这回事。&lt;/p>
&lt;p>值得一提的是，一天和一位华人同事聊天，得知他家附近有OUTLETS，当时就说您那天下班回家，求顺道带去。第二天我如约坐上了这位同事的宝马和他一同经历了一次，硅谷人的下班。没想到的不到五点，在从圣何塞去往东湾的路上就非常的堵了，正常情况下40分钟的路程走了快两个小时。不过好在我近半年多创业公司的经理起了大用处，有很多谈资，对于这位硅谷的资深前辈来说也非常有兴趣。&lt;/p>
&lt;p>乘坐Uber替代租车是我本次出行最明智的选择，Uber选择拼车，如果和您同程的话，交通费用会非常的便宜。我的几次必要的打车经历都是用Uber解决的。只是最后一天回家的时候，到时出了状况，由于前一天晚上Uber升级，导致需要密码登录，而我的那个备用手机又没有带，最后只能请房东打了一辆正常的Yellow CAB出租车。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2837.jpg"
loading="lazy"
alt="IMG_2837"
>&lt;/p>
&lt;p>乘坐Uber从圣何塞到旧金山市区的那一趟，让我在周五的下午再次领略了硅谷的堵车，足足走了3个多小时。从此我再也不觉得帝都是世界上唯一的堵车严重的城市了。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3106.jpg"
loading="lazy"
alt="IMG_3106"
>&lt;/p>
&lt;p>我在旧金山期间的交通是乘坐公交电车，价格便宜又方便；不过也部分依靠了这个红色旅游巴士，两天45刀的价格倒也不便宜；买票的原因主要是，当我暴走至金门大桥的北岸的时候，觉得好像再也不能走回头路，而且附近并没有方便的公共交通工具。因此就上车了，不过对于第一天的市区游也是增色不少，一下子就让我对三藩市的整个情况摸了个七七八八，对第二天的行程非常有帮助。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3099.jpg"
loading="lazy"
alt="IMG_3099"
>&lt;/p>
&lt;p>上图就是三藩市有名的叮当单车，其实就是有轨电车，由于保留了怀旧的车厢，因此一下子就成为了一个游客必选的项目。如果不是我买了CITY TOUR的票，我肯定也会去体验一把。&lt;/p>
&lt;h2 id="公司">公司&lt;/h2>
&lt;p>Nutanix是我工作十几年来所加入的一家最年轻的公司，这家公司在16年9月刚刚IPO，公司只有六七年的时间，超融合架构这块独特的市场空间可以说是他们创造的。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2757.jpg"
loading="lazy"
alt="IMG_2757"
>&lt;/p>
&lt;p>公司目前还在一栋很平常的办公楼中，由于人员扩张的比较快，左侧的那栋楼也几层入住了。公司的文化还保留了比较浓的创业公司的气质，这么说是由于，公司的中高层大部分已经被来自于：VMWare、EMC、NetApp、Dell、HP等大公司的职业经理人们占据了，公司的执行层面上是不折不扣的职业经理人负责的路线，几天的培训下来，感觉所有的人都赶紧十足，大家对市场和机遇的感受和我们之前经历的所有公司都是不同的。很多本次一起来的同事中，有的是已经有一两年的Nutanix产品经验的，有的已经入职了半年左右的；相比之下我是第二周上班的新丁，在几天的培训过程中，我也是只有沉默的份。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2790.jpg"
loading="lazy"
alt="IMG_2790"
>
两个大冰箱，左边其实还有一个冰箱一个冰柜，里面都是各种饮料和食品。
&lt;img src="https://martinliu.cn/images/IMG_2791.jpg"
loading="lazy"
alt="IMG_2791"
>
这些小货架上是零食和水果。这间屋子有人搭理，会及时补充缺少了的食品。这几天的培训管两餐，在加上这些零食和补给，基本上晚餐不吃也行了。到下班的时候，可以看见有人在这些货架和冰箱里自然地往背包里装东西，后来的两天里面我晚餐基本没有出去，和很快学会这种行为也很有关，晚餐不吃的另外一个原因是时差。这次我经理了前所未有的严重的时差，几乎每天下午6点左右就困得快要昏倒，到凌晨3点左右肯定是清醒的。当然这些食品肯定比不上一线的互联网公司，可是也基本上赶超了我之前所经理过的所有的传统公司的情况。工作相关的内容就此打住。&lt;/p>
&lt;h2 id="游玩">游玩&lt;/h2>
&lt;p>我住在了教会区的一个非常安静的民宅里面，是租的Airbnb的房间。房间的外形如下所示。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3234.jpg"
loading="lazy"
alt="IMG_3234"
>&lt;/p>
&lt;p>家里也非常整洁、宽敞和温馨。这家附近有公交车，30分钟可以到达渔人码头所在的北滩。我第一天的路线基本上是从渔人码头沿着海边不行到进门桥下，上桥，从桥上不行到桥的北岸，最CITY TOUR红色双层BUS，回城区，然后横穿过金门公园内部的一部分，在回到联合广场。之后我有步行到了三藩市的China Town吃饭。一天的暴走下来，其实对这个城市的感觉还是非常不错的。有几个可圈可点之处：&lt;/p>
&lt;ul>
&lt;li>特色景点比较多，这里不一一枚举，都是大家耳熟能详的&lt;/li>
&lt;li>城市地形高低起伏，建筑物各具特色，错落有致，绝无前篇一律的感觉。&lt;/li>
&lt;li>城市的色彩丰富，特别是那些个精彩的墙壁彩绘&lt;/li>
&lt;/ul>
&lt;h3 id="金门大桥">金门大桥&lt;/h3>
&lt;p>随拍的几张图片如下。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2992.jpg"
loading="lazy"
alt="IMG_2992"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2979.jpg"
loading="lazy"
alt="IMG_2979"
>&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2939.jpg"
loading="lazy"
alt="IMG_2939"
>&lt;/p>
&lt;p>慕名上桥走一圈的游客还是蛮多的。距离对于我这样的暴走一组来说，也没啥强度。可以感谢的是苍天有眼，让我在这抑郁、寒冷的冬季，让我待了一周已经对天气绝望的心境再次激活。后来要走的几天里，天天是艳阳高照万里无云。&lt;/p>
&lt;h3 id="其他景点">其他景点&lt;/h3>
&lt;p>渔老人码头比我想象中的小，而且由于并非捕鱼的季节，有赶上是寒冷的冬天，真的也就是觉得是到此一游，没有看到什么特殊的地方。
&lt;img src="https://martinliu.cn/images/IMG_3116.jpg"
loading="lazy"
alt="IMG_3116"
>&lt;/p>
&lt;p>China Town的墙壁彩绘，不像是人随手为之，而这样质量的墙壁彩绘在三藩市还有很多很多。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3085.jpg"
loading="lazy"
alt="IMG_3085"
>&lt;/p>
&lt;p>金门公园是我这个跑步爱好者的毕竟之地，由于本次身体状态不佳，没有跑在这个公园里面；而是从东门到西门的暴走了一趟。公园的面积其实和纽约的中央公园差不多，也就是从东到西大约5公里左右。&lt;/p>
&lt;p>公园里面被分成了很多不同的区域，正值周末各种狗友、航模、跑步、飞碟、航模等等的爱好者聚集在自己的区域里面消遣着周末时光。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3200.jpg"
loading="lazy"
alt="IMG_3200"
>&lt;/p>
&lt;p>走到了三藩市西侧的海边，面朝大海的位置离注明的悬崖屋餐厅不远，我可以清晰的看到那个餐厅的建筑物。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_3211.jpg"
loading="lazy"
alt="IMG_3211"
>&lt;/p>
&lt;h3 id="斯坦福">斯坦福&lt;/h3>
&lt;p>对于我来说各个著名的大学有很深的吸引力，想想这所大学和硅谷的IT行业是有多麽重要和紧密的联系。&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/images/IMG_2819.jpg"
loading="lazy"
alt="IMG_2819"
>&lt;/p>
&lt;p>上图是校园里著名的教堂，是一座美丽而古典的建筑，是校园的心脏。来这里游览应该从南边的正面进入，直接走到这个教堂，然后在看其他的部分。&lt;/p>
&lt;h2 id="美食">美食&lt;/h2>
&lt;p>酸面包算是渔人码头景点的美食之一，性价比很高。
&lt;img src="https://martinliu.cn/images/IMG_3125.jpg"
loading="lazy"
alt="IMG_3125"
>&lt;/p>
&lt;p>面包产自下面这家店。
&lt;img src="https://martinliu.cn/images/IMG_3174.jpg"
loading="lazy"
alt="IMG_3174"
>&lt;/p>
&lt;p>最后的一次正餐，选择了北滩海景叫做Dinner的餐厅，主要吃个海景；餐食炸鱼陪薯条。
&lt;img src="https://martinliu.cn/images/IMG_3233.jpg"
loading="lazy"
alt="IMG_3233"
>&lt;/p>
&lt;p>压轴的是这个早餐，点名叫“8 AM”；三藩市早餐分类在点评网站上排第五。吐司三吃。
&lt;img src="https://martinliu.cn/images/IMG_2847.jpg"
loading="lazy"
alt="IMG_2847"
>&lt;/p></description></item><item><title>EXIN DevOps Master 认证考试</title><link>https://martinliu.cn/2016/11/07/exin-devops-master-e8aea4e8af81e88083e8af95/</link><pubDate>Mon, 07 Nov 2016 15:19:08 +0000</pubDate><guid>https://martinliu.cn/2016/11/07/exin-devops-master-e8aea4e8af81e88083e8af95/</guid><description>&lt;p>DevOps 这个词在去年参加红帽全球用户大会的时候就深深吸引了我，实际上哪个会上 Docker 容器的概念要比 DevOps 还火爆。Docker／openshift 相关的 session 都尝尝是爆满的。从那里开始我逐渐感觉到了开源容器技术的强大和吸引力。&lt;/p>
&lt;p>从红帽开始 OpenShift 的考试就是我在完成 RHCA 红帽认证架构师之后的一个心结，至今也没有完成。不过这根草我早晚是要拔掉的。主要是由于 OpenShift 是 Docker ＋ kubernetes 的组合；是如今企业级 PaaS 容器平台的主要技术路线。总之离开红帽是如此的仓促，说实话这也是我职业生涯中的一个不小的遗憾。当时确实觉得 kubernetes 的命令行操作不是很方便，而且在 OpenShift 并没有降低这个门槛，也即是说在 OpenShift 里面还是要有一定的工作量和技能的要求在编写 kubernetes 的 yml 文件上。在这一点上，及时我熟练掌握了 Rancher 之后，同样发现编写 compose file 也是难以逃避的。在推广一步，大部分 Docker PaaS 平台也都是这样，很多产品也是在界面上提供一个文本输入框，让人输入容器服务定义文件的内容。&lt;/p>
&lt;p>在最近的半年中，我的所有技术研究都集中在 Docker 和其服务编排技术上。与很多用户做过技术交流，PoC 测试，有些单子也落地。总结后，有些结果让我感叹。国内的所有企业不区分规模和行业，其实他们对国内原生的创业公司是欢迎的，由于这些公司提供的是国产软件和技术服务。在 Docker 这个火热的领域中，已经有 20 多家国内创业公司，我想所有的公司也都已经接受到了这一点的福利了。外国软件通常给人的感觉是：不是国产软件（不要小看国内公司对国产软件的诉求），纯英文操作界面和文档，可能的水土不服，高昂的软件价格和服务费，如果技术太新的化很可能厂商也不具备足够的技术实力和服务力量。&lt;/p>
&lt;p>经过了一些 Docker 容器项目之后，可以断言的是容器市场的火爆和它的技术优势是直接相关的。容器化之后的应用可以通过服务编排工具快速地部署／更新、弹性地伸缩和使用资源，优化其传统应用运维的若干缺陷。容器的轻量和 just enough 的隔离技术让资源池的管理更加简单，利用率大幅度提升，这对研发部门的环境管理是不小的提升，使 CI 的过程更加高效和经济。Docker 对微服务的支持也深深地诱惑了所有开发者，做系统微服务实施开发者能想到的实施技术大多数会是容器。&lt;/p>
&lt;p>以上容器的优势和特性使得国内的这些项目落地和实施的可能性进一步提高，甚至很多项目的速度远远超预期；按照我多年的经验看，一个软件技术型的项目，用户纠结半年到一年以上是很正常的。可能也跟国内企业包容本土化软件公司，追捧新潮技术直接相关；我观察到的一些项目，在 2 ～ 4 个月内落单的屡见不鲜。有些试点的 DevOps 咨询项目也落地很快。&lt;/p>
&lt;p>这些项目都殊途同归地指向了 DevOps 这个关键词，这让我不得不从去年开始就关注和学习这个最佳实践。当然，我对 DevOps 的前途非常看好，因此当我听说业内出现了相关认证考试之后，我毫不犹豫地报名参加了。经过 2 个多月的缜密的准备，我终于幸运地一次通过了这个考试。考试获得了两个证书。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/EXIN-DevOps-Master-Cert-Martin-Liu.jpg"
loading="lazy"
alt="exin-devops-master-cert-martin-liu"
> DevOps Master&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/certificate-devops-freelance-trainer-Liu-Zheng.jpg"
loading="lazy"
alt="DevOps Master 认证自由讲师"
> DevOps Master 认证自由讲师&lt;/p>
&lt;p>我参加的是讲师认证培训 TTT，很高兴能成为 Exin 在国内的首批 5 个认证人员之一。在准备这个考试的过程中我学习了一些书籍，现在还在深度学习的书有两本。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/14678659256890.jpg"
loading="lazy"
alt="14678659256890"
>&lt;/p>
&lt;p>我完成了这本黑皮书的读书笔记，很遗憾的是，我发现它的最新版，把封面改成了白底的了，我不能在叫它黑皮书／黑宝书了。这本书我起码看了两遍；目前正在调试它的书中的代码，代码中的营养还是很高的，计划尽快把所有代码调试通过；从而完成我许下多次的线上分享本书的诺言。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/14749866044733.jpg"
loading="lazy"
alt="14749866044733"
>&lt;/p>
&lt;p>这本书被我称为 CD 红皮书／红宝书。本书早在 10 年就出版了，也就是说比 Docker 早好多年。他给我最大的印象就是，作者每一页上似乎都在介绍这做事情的原则和规矩是什么？我一点也不夸张，他对 CD 的介绍，就是通过讲解一系列在项目上的经验总结。对作者这种级别的经验，和写书的房子只能用一个词总结“服”。这本书太干，我至今还没有消化完。他让我看到了解决发布和变更风险的终极解决方案，没有一次性解决问题的部署／配置／发布工具，有的是历练和打磨了千万次的持续部署流水线；隐约地觉得没用入手的企业都会慢慢跟上的。&lt;/p>
&lt;p>以上是我对 DevOps 的阶段性总结，跨度有半年之久。这半年中我逐渐看清了我的主要兴趣点，抛除所有其他主题，目前剩下的就是：云计算和 DevOps。一方面觉得年纪不饶人，不能可能在和年轻人拼精力、体力和创意；我的背景和经验都让我感觉，在这两个话题上，我还是有很多年的经验和技术积累和总结的。云计算是（公有云＋私有云）未来企业 IT 基础架构的走向；DevOps 是目前看比较正确的运作实践。一个便技术，一个便管理，正好完整覆盖了我的经验；在其对应的开源技术这个分支里，我想它们都还有这很多的为探索和研究的项目。&lt;/p></description></item><item><title>DevOps 的起点-入手微型数据中心</title><link>https://martinliu.cn/2016/07/01/devops-in-a-box/</link><pubDate>Fri, 01 Jul 2016 03:11:10 +0000</pubDate><guid>https://martinliu.cn/2016/07/01/devops-in-a-box/</guid><description>&lt;h2 id="测试环境说明">测试环境说明&lt;/h2>
&lt;p>我的笔记本电脑的环境描述如下。&lt;/p>
&lt;h3 id="os">OS&lt;/h3>
&lt;p>MacBook Pro 2011 版， 2.3 GHz Intel Core i5， 8GB DDR3， 256 GB SSD。 OS X EI Capitan version 10.11.5&lt;/p>
&lt;h3 id="docker">Docker&lt;/h3>
&lt;p>Docker for Mac Version 1.12.0-rc2-beta17 (build: 9779)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: 906eacd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Fri Jun 17 20:35:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: darwin/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: a7119de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Wed Jun 29 10:03:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-machine version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine version 0.8.0-rc1, build fffa6c9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents [9:38:31]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-compose version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose version 1.8.0-rc1, build 9bf6bc6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-py version: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPython version: 2.7.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OpenSSL version: OpenSSL 1.0.2h 3 May 2016
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>VirtualBox version 5.0.22r108108&lt;/p>
&lt;h3 id="本机下载的-docker-镜像">本机下载的 Docker 镜像&lt;/h3>
&lt;p>/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-v1.0.1.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-instance-v0.8.1.tar&lt;/p>
&lt;p>~/Downloads/habitat-docker-registry.bintray.io-studio.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-server-stable.tar&lt;/p>
&lt;p>我本机还有一个 Docker Registry 的 vm，这里面提供了我需要积累以后用的镜像存储，想象一下你在飞机上的时候去哪里拉取镜像 ：）&lt;/p>
&lt;h3 id="本机下载的代码">本机下载的代码&lt;/h3>
&lt;p>&lt;a class="link" href="https://github.com/habitat-sh/habitat-example-plans" target="_blank" rel="noopener"
>https://github.com/habitat-sh/habitat-example-plans&lt;/a> &lt;a class="link" href="https://github.com/janeczku/habitat-plans" target="_blank" rel="noopener"
>https://github.com/janeczku/habitat-plans&lt;/a> &lt;a class="link" href="https://github.com/chrisurwin/may2016-demo" target="_blank" rel="noopener"
>https://github.com/chrisurwin/may2016-demo&lt;/a> &lt;a class="link" href="https://github.com/docker/example-voting-app" target="_blank" rel="noopener"
>https://github.com/docker/example-voting-app&lt;/a>&lt;/p>
&lt;p>注意以上代码可能需要修改才能在本机调试成功。&lt;/p>
&lt;h2 id="创建-rancher-服务器">创建 Rancher 服务器&lt;/h2>
&lt;h3 id="生成虚拟机">生成虚拟机&lt;/h3>
&lt;p>用 docker-machine 创建 rancher 服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine create rancher --driver virtualbox --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;8000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso &amp;amp;&amp;amp; eval $(docker-machine env rancher)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="导入-rancher-服务器镜像">导入 Rancher 服务器镜像&lt;/h3>
&lt;p>用 docker-machine ls 应该看到 rancher 这个节点打了星号。否则 docker 命令会执行失败或者错误。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-server-stable.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --restart=always --name rancher-srv -p 8080:8080 rancher/server:stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs -f rancher-srv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 rancher 服务器的 ip 地址。 docker-machine ip rancher&lt;/p>
&lt;p>用浏览器打开 Rancher 服务器的登录页面。 open http://Rancher_Server_IP:8080&lt;/p>
&lt;p>下面是一些如何让虚拟机保持固定 IP 和 rancher 容器存储的数据持久存在的代码，我没有测试成功，留下大家一起搞，成功了，给我一个回复。另外还有关于稿 jekins 和 mirror 的代码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo &amp;#34;ifconfig eth1 192.168.99.60 netmask 255.255.255.0 broadcast 192.168.99.255 up&amp;#34; | docker-machine ssh node1 sudo tee /var/lib/boot2docker/bootsync.sh &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine regenerate-certs node1 -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine ssh ndoe1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mkdir /mnt/sda1/var/lib/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker@node1:/mnt/sda1/var/lib/boot2docker$ cat bootsync.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ifconfig eth1 192.168.99.60 netmask 255.255.255.0 broadcast 192.168.99.255 up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mkdir /mnt/sda1/var/lib/rancher/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ln -s /mnt/sda1/var/lib/rancher/ /var/lib/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/jenkins.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --name jekins --privileged -p 9001:8080 -v /var/lib/docker/:/var/lib/docker/ -v /var/run/docker.sock:/var/run/docker.sock -v /usr/bin/docker:/usr/bin/docker -v /lib64/libdevmapper.so.1.02:/usr/lib/libdevmapper.so.1.02 --label io.rancher.container.network=true jenkins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create mirror --driver virtualbox --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;8000&amp;#34; --virtualbox-memory &amp;#34;512&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/boot2docker.iso
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/registry.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d -p 80:5000 --restart=always --name registry registry:2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="容器运行节点-rancher-agent-节点">容器运行节点 Rancher Agent 节点&lt;/h2>
&lt;h3 id="创建-node1-虚拟机">创建 node1 虚拟机&lt;/h3>
&lt;p>使用 docker-machine 命令创建容器运行节点。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-machine create node1 --driver virtualbox --engine-insecure-registry 192.168.99.20:5000 --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;80000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine create node2 --driver virtualbox --engine-insecure-registry 192.168.99.20:5000 --virtualbox-cpu-count &amp;#34;1&amp;#34; --virtualbox-disk-size &amp;#34;80000&amp;#34; --virtualbox-memory &amp;#34;1024&amp;#34; --virtualbox-boot2docker-url=https://martinliu.cn/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 node1 或者 node2 测试运行一个容器，使用 mirror 中的 busybox 镜像。如果你的笔记本内存小于 8GB 的话，node2 就别搞了。一个 node 也够用了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull 192.168.99.20:5000/busybox:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker run 一下这个镜像，验证 node1 工作正常。&lt;/p>
&lt;h3 id="加载-rancher-agent-的镜像">加载 Rancher Agent 的镜像&lt;/h3>
&lt;p>确保 node1 是 docker-machine ls 中打星号的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-agent-v1.0.1.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/rancher-all/rancher-agent-instance-v0.8.1.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker load &amp;lt; ~/Downloads/habitat-docker-registry.bintray.io-studio.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你翻墙下载回来的 habitat-docker-registry.bintray.io/studio 镜像可能需要打标签，否则回头 hab 命令执行失败。 先用 docer images 看下是否所有 image 的标签信息正确。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker tag fc27342e5e0e habitat-docker-registry.bintray.io/studio:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加-node1-节点到-rancher-server">添加 node1 节点到 Rancher Server。&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.0.1 http://192.168.99.100:8080/v1/scripts/33B68ED65CEF18F6D7BD:1466694000000:lug2KswoXOOQV4d09ZNMGTphVs0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>现在在 Hosts 页面上应该能看到该刚创建的节点。在页面上创建一个最小化的容器（如 busybox），来拉起 Network Agent 容器。&lt;/p>
&lt;h2 id="调试-habitat-的测试程序">调试 habitat 的测试程序&lt;/h2>
&lt;p>参考的文档 &lt;a class="link" href="https://www.habitat.sh/tutorials/" target="_blank" rel="noopener"
>https://www.habitat.sh/tutorials/&lt;/a> 记得一定要把这一组文章先看完，在去调试它的代码，不懂这些基本概念的话，后面对了错了都不知道该怎么搞。&lt;/p>
&lt;p>前置条件，翻墙下载 habitat studio 的 docker image 镜像，load 到 node1 上，下面的所有测试都是在 node1 上完成的。&lt;/p>
&lt;h3 id="安装-hab">安装 hab&lt;/h3>
&lt;p>habitat 的程序只有一个可执行程序， 目前支持 mac 和 linux 版本。下载地址： &lt;a class="link" href="https://www.habitat.sh/docs/get-habitat" target="_blank" rel="noopener"
>https://www.habitat.sh/docs/get-habitat&lt;/a> 就是一个 tag 包，解压缩后放到 shell 的 PATH 里面就安装完了。&lt;/p>
&lt;h3 id="配置-hab-cli">配置 hab cli&lt;/h3>
&lt;p>运行 hab setup&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">martin&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">=================&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Welcome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Let&lt;/span>&lt;span class="s1">&amp;#39;s get started.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Every package in Habitat belongs to an origin, which indicates the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> person or organization responsible for maintaining that package. Each
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin also has a key used to cryptographically sign packages in that
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Selecting a default origin tells package building operations such as
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="s1">&amp;#39; what key should be used to sign the packages produced.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> If you do not set a default origin now, you will have to tell package
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> building commands each time what origin to use.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> For more information on origins and how they are used in building
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> packages, please consult the docs at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> https://www.habitat.sh/docs/build-packages-overview/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin? [Yes/no/quit] yes 这里输入 yes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Enter the name of your origin. If you plan to publish your packages
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> publicly, we recommend that you select one that is not already in use on
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> the Habitat build service found at https://app.habitat.sh/.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> You already have a default origin set up as `martin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这是用来做&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">包签名和加密用的标识，在代码里面会用到。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">installed&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Great&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">work&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">While&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">them&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">doing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">allows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">collaborate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">community&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">In&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">addition&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">perform&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">continuous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">uses&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">authentication&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">help&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">articles&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">creating&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Otherwise&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">information&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">documentation&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overview&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">Set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这个&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">需要自己去&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">里面生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tool&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">will&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">optionally&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">usage&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="s1">&amp;#39;s Google Analytics account. This is a strictly opt-in activity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> and no tracking will occur unless you respond affirmatively to the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> question below.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> We collect this data to help improve Habitat&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">experience&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">know&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tasks&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">performing&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">which&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ones&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">having&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">trouble&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mistyping&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">arguments&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">To&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">see&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">what&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kinds&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymized&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">our&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">here&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">»&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Opting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">☑&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Creating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OPTED_OUT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">★&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">opted&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">salute&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">same&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Complete&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">That&lt;/span>&lt;span class="s1">&amp;#39;s all for now. Thanks for using Habitat!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">martin@localhost ~/Documents $
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该注意的都写到上面的代码里面了。这个配置的结果在这里&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cat ~/.hab/etc/cli.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth_token = &amp;#34;martin-github-token&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">origin = &amp;#34;martin&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="调试-habitat-demo-应用">调试 Habitat demo 应用&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/habitat-sh/habitat-example-plans
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入到 mytutorialapp 目录，修改 plan.sh 的 第二行代码，我改后的代码是&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pkg_origin=martin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>martin 是我在 hab cli 里面配置的 origin。&lt;/p>
&lt;p>其实下面的测试就执行了两个 hab 的命令，都是在 hab studi 的 shell 里面执行的，这个 shell 其实就是一个 studio 容器的 shell。&lt;/p>
&lt;p>在运行下面的命令，确保你是和 node1 正常通讯的，下面我用 default 节点做演示。做完的演示环境我已经删除了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker-machine ls NAME ACTIVE DRIVER STATE URL SWARM DOCKER ERRORS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default - virtualbox Running tcp://192.168.99.100:2376 v1.11.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常的意思是执行所有 docker 命令不报错。&lt;/p>
&lt;h3 id="build-habitat-demo-代码">build habitat demo 代码&lt;/h3>
&lt;p>进入到代码的 plan.sh 的目录 执行 hab studio enter 命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">martin&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">localhost&lt;/span> &lt;span class="err">~&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">habitat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plans&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">$&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">studio&lt;/span> &lt;span class="nx">enter&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="err">±&lt;/span>&lt;span class="nx">master&lt;/span> &lt;span class="err">●●&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Importing&lt;/span> &lt;span class="nx">martin&lt;/span> &lt;span class="nx">secret&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Importing&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">standard&lt;/span> &lt;span class="nx">input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Imported&lt;/span> &lt;span class="nx">secret&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20160630040241.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Entering&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Exported&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">HAB_ORIGIN&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">martin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">:&lt;/span> &lt;span class="nx">Loading&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Plan&lt;/span> &lt;span class="nx">loaded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span> &lt;span class="nx">setup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">HAB_BIN&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">installs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">signing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">hashing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Resolving&lt;/span> &lt;span class="nx">dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.44&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">6.44&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">457.82&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">============================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">575.13&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="nx">Cached&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Resolved&lt;/span> &lt;span class="nx">dependency&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232259&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3.42&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075613&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">binutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.25.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064534&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">coreutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075329&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064523&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">findutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.4.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080341&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gawk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.1.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075739&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">grep&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075540&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080637&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sed&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075228&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">unzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081414&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wget&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.16.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081342&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">acl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.2.52&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075215&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">attr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.4.47&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075207&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">less&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">481&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libcap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075226&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libidn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.32&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ncurses&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075116&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pcre&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.38&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075520&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mkdir&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">created&lt;/span> &lt;span class="nx">directory&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//s3-us-west-2.amazonaws.com/mytutorialapp/mytutorialapp-0.1.0.tar.gz&amp;#39; to &amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span> &lt;span class="mo">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//s3-us-west-2.amazonaws.com/mytutorialapp/mytutorialapp-0.1.0.tar.gz
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Resolving&lt;/span> &lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mf">54.231.184.216&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Connecting&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="p">)|&lt;/span>&lt;span class="mf">54.231.184.216&lt;/span>&lt;span class="p">|:&lt;/span>&lt;span class="mf">443.&lt;/span>&lt;span class="p">..&lt;/span> &lt;span class="nx">connected&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">HTTP&lt;/span> &lt;span class="nx">request&lt;/span> &lt;span class="nx">sent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">awaiting&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="nx">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1041&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="nx">K&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">gzip&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Saving&lt;/span> &lt;span class="nx">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">==================================================&lt;/span>&lt;span class="p">=&amp;gt;]&lt;/span> &lt;span class="mf">1.02&lt;/span>&lt;span class="nx">K&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span> &lt;span class="mo">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">32.1&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">saved&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Downloaded&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Verifying&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Checksum&lt;/span> &lt;span class="nx">verified&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Clean&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Unpacking&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">environment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">PREFIX&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">LD_RUN_PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">CFLAGS&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">I&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">include&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Setting&lt;/span> &lt;span class="nx">LDFLAGS&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">L&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Preparing&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Building&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">npm&lt;/span> &lt;span class="nx">WARN&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.0&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">repository&lt;/span> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">npm&lt;/span> &lt;span class="nx">WARN&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.0&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">README&lt;/span> &lt;span class="nx">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nconf&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.8.4&lt;/span> &lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.3.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="nx">async&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.5.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">└──&lt;/span> &lt;span class="nx">yargs&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.32.0&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">decamelize&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">camelcase&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">window&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">size&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1.4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y18n&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">locale&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cliui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">width&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0.1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Installing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">忽略了好几百行输出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">simple&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">simple&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span>&lt;span class="sc">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sc">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="sc">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sc">&amp;#39;&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nconf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Writing&lt;/span> &lt;span class="nx">configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Writing&lt;/span> &lt;span class="nx">service&lt;/span> &lt;span class="nx">management&lt;/span> &lt;span class="nx">scripts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Stripping&lt;/span> &lt;span class="nx">unneeded&lt;/span> &lt;span class="nx">symbols&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">binaries&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">libraries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">manifest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Building&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="nx">blake2b&lt;/span> &lt;span class="nx">hashes&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">all&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="kn">package&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="nx">signed&lt;/span> &lt;span class="nx">metadata&lt;/span> &lt;span class="nx">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="nx">mytutorialapp_blake2bsums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="nx">mytutorialapp_blake2bsums&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Signed&lt;/span> &lt;span class="nx">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">FILES&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Generating&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">artifact&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Removing&lt;/span> &lt;span class="nx">leading&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">member&lt;/span> &lt;span class="nx">names&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">tar&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">100&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">121.4&lt;/span> &lt;span class="nx">KiB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">900.0&lt;/span> &lt;span class="nx">KiB&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mf">0.135&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">xz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="nx">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">xz&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Signed&lt;/span> &lt;span class="nx">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">build&lt;/span> &lt;span class="nx">cleanup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="nx">Cache&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">Path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Artifact&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">Report&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">last_build&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">env&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">SHA256&lt;/span> &lt;span class="nx">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Blake2b&lt;/span> &lt;span class="nx">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">I&lt;/span> &lt;span class="nx">love&lt;/span> &lt;span class="nx">it&lt;/span> &lt;span class="nx">when&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">plan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span> &lt;span class="nx">comes&lt;/span> &lt;span class="nx">together&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nx">m3s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>检查结果，在代码的目录中可以看的 result 目录，关注一下这个目录，关键看 build 命令的最后一段。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mytutorialapp: hab-plan-build cleanup mytutorialapp: mytutorialapp: Source Cache: /hab/cache/src/mytutorialapp-0.1.0 mytutorialapp: Installed Path: /hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725 mytutorialapp: Artifact: /src/results/martin-mytutorialapp-0.1.0-20160701022725-x86_64-linux.hart mytutorialapp: Build Report: /src/results/last_build.env mytutorialapp: SHA256 Checksum: d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d mytutorialapp: Blake2b Checksum: fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706 mytutorialapp: mytutorialapp: I love it when a plan.sh comes together. mytutorialapp: mytutorialapp: Build time: 1m3s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="昨晚分享的高潮部分-habitat-导出-docker-image">昨晚分享的高潮部分, habitat 导出 docker image&lt;/h3>
&lt;p>其实就是一条命令，在 habitat Studio 中执行 导出命令 hab pkg export docker martin/mytutorialapp&lt;/p>
&lt;p>导出 docker 镜像的过程和 build 的过程一样，都可能会失败；由于它需要到网上下载所需要的代码，下载所需要的 habitat 模块，core/ 开头的都是 habitat 出品的核心的模块，他们的想法基本也是说把所有的可能用到的模块都做封装，成为自己的 pkg 格式的内容。然后在用他们的 Habitat 服务来解析、部署和运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">pkg&lt;/span> &lt;span class="nx">export&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Creating&lt;/span> &lt;span class="nx">Studio&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">rootfs&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">baseimage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">local&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span> &lt;span class="nx">via&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.23&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.23&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">500.60&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="nx">B&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">============================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">378.76&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="nx">Cached&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="nx">origin&lt;/span> &lt;span class="nx">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">510.89&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">510.89&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">89.61&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">141.05&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">141.05&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">349.94&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04.20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">132.32&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">132.32&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">370.21&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04.20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">584.98&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">584.98&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">340.75&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">187.96&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">187.96&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">200.27&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.10&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.10&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">518.78&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">247.38&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">247.38&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">468.42&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">73.06&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">73.06&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">315.44&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2.8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="nx">Downloading&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.54&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">1.54&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">======================================================================&lt;/span>&lt;span class="p">=]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">563.90&lt;/span> &lt;span class="nx">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="nx">Installed&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span> &lt;span class="nx">complete&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">hab&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">bash&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">bash&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="nx">Symlinking&lt;/span> &lt;span class="nx">sh&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span> &lt;span class="nx">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="nx">Binary&lt;/span> &lt;span class="nx">sh&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="nx">symlinked&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Sending&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">context&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">Docker&lt;/span> &lt;span class="nx">daemon&lt;/span> &lt;span class="mf">194.3&lt;/span> &lt;span class="nx">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">FROM&lt;/span> &lt;span class="nx">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ENV&lt;/span> &lt;span class="nx">export&lt;/span> &lt;span class="nx">PATH&lt;/span>&lt;span class="p">=:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0.2&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24.2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="nx">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="nx">f33585a25ae&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="nx">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="nx">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">c0cf3715cbcf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="nx">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ADD&lt;/span> &lt;span class="nx">rootfs&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">d2691da93ccf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="nx">aa80e97ea57&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">VOLUME&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">bd8888453939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="nx">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">EXPOSE&lt;/span> &lt;span class="mi">9631&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="nx">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">256&lt;/span>&lt;span class="nx">a04cd0fe2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="nx">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">ENTRYPOINT&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="nx">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">d7bdec08530e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="nx">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Step&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nx">CMD&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="nx">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nx">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Removing&lt;/span> &lt;span class="nx">intermediate&lt;/span> &lt;span class="nx">container&lt;/span> &lt;span class="nx">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Successfully&lt;/span> &lt;span class="nx">built&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nx">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 docker 镜像是否存在。推出 studio 容器，运行 docker images&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[5][default:/src:0]# exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents/GitHub/habitat-example-plans/mytutorialapp $ docker images [±master ●●]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp 0.1.0-20160701024401 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp latest 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="运行这个-demo">运行这个 demo&lt;/h3>
&lt;p>在命令行运行&lt;/p>
&lt;p>$ docker run -it -p 8080:8080 martin/mytutorialapp&lt;/p>
&lt;p>用浏览器打开 node1 的 ip 8080 端口，应该可以看到 hello world 页面。&lt;/p>
&lt;p>在 rancher web 页面添加测试&lt;/p>
&lt;h3 id="在-rancher-中上架这个-demo">在 rancher 中上架这个 demo&lt;/h3>
&lt;p>&lt;a class="link" href="https://github.com/martinliu/hab-catalog" target="_blank" rel="noopener"
>https://github.com/martinliu/hab-catalog&lt;/a> 以上代码是半成品，欢迎协助完成。&lt;/p>
&lt;h3 id="测试-rancher-官方的-redis-demo">测试 Rancher 官方的 redis demo&lt;/h3>
&lt;p>参考文章 &lt;a class="link" href="http://rancher.com/using-habitat-to-create-rancher-catalog-templates/" target="_blank" rel="noopener"
>http://rancher.com/using-habitat-to-create-rancher-catalog-templates/&lt;/a> 它的 demo 和上架的目录都可以正常测试通过，但是服务运行不起来，报主机名错误，redis 节点的群集建立不起来。&lt;/p>
&lt;p>如果您修复了，请回复贴出代码位置。&lt;/p>
&lt;h2 id="福利调试-docker-官方投票应用">福利：调试 docker 官方投票应用&lt;/h2>
&lt;p>下载投票实例程序。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/martinliu/example-voting-app.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入该程序的目录，修改所有 image 的来源镜像库，修改为指向本地的 mirror 服务器。 1. result/tests/Dcokerfile -&amp;gt; FROM 192.168.99.20:5000/node 2. result/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/node:5.11.0-slim 3. vote/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/python:2.7-alpine 4. worker/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/microsoft/dotnet:1.0.0-preview1 5. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/redis:alpine 6. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/postgres:9.4&lt;/p>
&lt;p>由于以上应用在构建的过程中需要在线安装各种软件包，最好先翻墙，确认你有足够稳定的国外的互联网访问，建议翻墙到美国，然后在执行项目的构建命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ping facebook.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=0 ttl=79 time=4187.066 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=1 ttl=79 time=3186.904 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=2 ttl=79 time=2515.415 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=6 ttl=79 time=296.457 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=7 ttl=79 time=410.215 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- facebook.com ping statistics ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">8 packets transmitted, 5 packets received, 37.5% packet loss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">round-trip min/avg/max/stddev = 296.457/2119.211/4187.066/1537.275 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上结果表明，翻墙成功，以上结果显示翻墙的效果比较差，延迟和丢包都比较严重，可能到只构建的时候下载软件包失败。&lt;/p>
&lt;p>构建完毕之后，可以检查一下是否生产了目标镜像文件，如果输出如下所示，则表明本次本地的项目集成构建成功。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_result latest 9bb4126b0905 5 minutes ago 225.8 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_worker latest 292396a5aba4 6 minutes ago 644.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_vote latest 28052191beea 10 minutes ago 68.31 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在当前 node1 节点上做本地的集成结果的功能测试，用 docker-compose 启动这个项目。先检查 compose 文件，然后运行 up。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;6379&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">py&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2.0&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Attaching&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00000000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">bit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-```&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">```&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.,&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">was&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">shut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">down&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39; , .-` | `, ) Running in standalone mode
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | |`-._`-...-` __...-.``-._|&amp;#39;&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;| Port: 6379
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._ `._ / _.-&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; | http://redis.io
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">db_1 | LOG: MultiXact member wraparound protections are now enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; |
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-.__.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># Server started, Redis version 3.2.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &amp;#39;vm.overcommit_memory = 1&amp;#39; to /etc/sysctl.conf and then reboot or run the command &amp;#39;sysctl vm.overcommit_memory=1&amp;#39; for this to take effect.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">autovacuum&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">launcher&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &amp;#39;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&amp;#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">6379&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Press&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CTRL&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Restarting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">stat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">any&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">time&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">rs&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">watching&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">listening&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">139&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">254&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">286&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">worker_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Found&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bodyParser&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">individual&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urlencoded&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">middlewares&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">67&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">undefined&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">provide&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">option&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">105&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Connected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器测试 vote 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/voting-1.jpg"
loading="lazy"
alt="voting"
>&lt;/p>
&lt;p>打开浏览器测试 result 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5001
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/result-1.jpg"
loading="lazy"
alt="result"
>&lt;/p>
&lt;p>在 Rancher 的 hosts 界面中应该看到这些运行的容器。 &lt;img src="http://yzd.io/images/voting-in-rancher-1.jpg"
loading="lazy"
alt="voting-in-ranche"
>&lt;/p>
&lt;p>至此所有关于应用构建和功能测试的过程完成，按 ctl + c 结束 docker-compose up 的运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">^CGracefully stopping... (press Ctrl+C again to force)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_worker_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_result_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_vote_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_db_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_redis_1 ... done
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>用 Docker 构建 Serverless 应用</title><link>https://martinliu.cn/2016/06/22/building-serverless-apps-docker/</link><pubDate>Wed, 22 Jun 2016 16:22:51 +0000</pubDate><guid>https://martinliu.cn/2016/06/22/building-serverless-apps-docker/</guid><description>&lt;h2 id="martin-解读-serverless">Martin 解读 Serverless&lt;/h2>
&lt;p>Serverless 不意味着没有服务器，而是从应用可以在一个抽象层上忽略它的存在，而只关注在功能实现上和自身的请求处理上；每一个功能实现在不是单纯的业务逻辑处理的代码，相反每个功能调用具有了 server 的特质，进化成为了一个具有自省、自知和自治的工作负载单元；他们更像是能够衍生出其它新功能单元的生物体。这样整个 Serverless 应用架构之内，每个生命可以衍生下去，子子孙孙无穷匮也。&lt;/p>
&lt;p>本文编译了：&lt;a class="link" href="https://blog.docker.com/2016/06/building-serverless-apps-with-docker/" target="_blank" rel="noopener"
>https://blog.docker.com/2016/06/building-serverless-apps-with-docker/&lt;/a>  一下是正文内容。&lt;/p>
&lt;p>处在这技术日新月异的时代里，新的技术浪潮经常对当前的技术产生着威胁和颠覆。在编写应用的时候我们目前经常谈论到“Serverless”技术。它的核心思想是把应用作为一系列的功能/function 来部署，这些功能在需要的时候被按需部署。服务器管理应该是不需要去操心的事情，所有功能被按需调用，被运行在群集之上。&lt;/p>
&lt;p>但是 Serverless 里不意味着没有 Docker，事实上 ”Docker 就是 Serverless”。你可以用 Docker 来容器化这些功能，然后按需地运行在 Swarm 群集上。Serverless 是一种构建分布式计算的应用的方法，而 Docker 是完美的构建和运行他们的平台。&lt;/p>
&lt;h2 id="从-server-到-serverless">从 Server 到 Serverless&lt;/h2>
&lt;p>那么我们如何来编写 Serverless 的应用？让我们先看下这个例子：&lt;a class="link" href="https://github.com/docker/example-voting-app" target="_blank" rel="noopener"
>“一个有 5 个子服务组成的投票应用”&lt;/a>：&lt;/p>
&lt;p>&lt;img src="https://media.licdn.com/mpr/mpr/shrinknp_800_800/AAEAAQAAAAAAAAlaAAAAJGI5NTZjMjRkLTRkNmYtNDEyOC04OTNiLTBmY2I5M2QyOTZiMQ.png"
loading="lazy"
>&lt;/p>
&lt;p>它的结构如下：&lt;/p>
&lt;ul>
&lt;li>两个 web 前端&lt;/li>
&lt;li>一个后台的处理投票的 worker 服务&lt;/li>
&lt;li>一个处理投票的消息队列&lt;/li>
&lt;li>一个数据库&lt;/li>
&lt;/ul>
&lt;p>那个后台处理投票的进程是非常容易成为转换为 Serverless 架构的目标。在投票应用内，我们可以运行一点类似于下面的代码，来执行后台任务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import dockerrun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client = dockerrun.from_env()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.run(&amp;#34;bfirsh/serverless-record-vote-task&amp;#34;, [voter_id, vote], detach=True)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Worker 和消息队列能用按需在 Swarm 上运行的容器来替换，并自动地按需扩容。&lt;/p>
&lt;p>我们甚至可以消除掉 web 前端。我们可以这么做：用 Docker 容器来相应每一个 HTTP 请求，每个 HTTP 请求都用一个自生长的跑着轻量 HTTP 服务器的容器来处理。之前使用的是长时间持续运行的 HTTP 服务器，现在变成了具有 HTTP 相应和处理能力的按需跑起来的容器，而且他们能自动地扩容来支持所有访问请求。&lt;/p>
&lt;p>我们新的架构大概如下图所示：&lt;/p>
&lt;p>&lt;img src="https://media.licdn.com/mpr/mpr/shrinknp_800_800/AAEAAQAAAAAAAAjOAAAAJGQyYTVhZTFiLTRkZWQtNDE0Yi1iMzRkLWU4OWU5NjExZDc2OQ.png"
loading="lazy"
>&lt;/p>
&lt;p>其中红色的方块是需持续长期运行的服务，而绿色方块成了按需被调用的 Docker 容器。这样这个应用变成了只有少数几个需要被管理的 long-running 服务，在相应请求的时候使用原生的 Swarm 扩容能力，处理能力的上限是 Swarm 群集的上限。&lt;/p>
&lt;h2 id="具体如何实现">具体如何实现&lt;/h2>
&lt;p>这里有三个有用的技巧，可以在你的程序中使用：&lt;/p>
&lt;ol>
&lt;li>把你代码中的 function 作为按需拉起的 Docker 容器&lt;/li>
&lt;li>使用 Swarm 在群集上运行这些容器&lt;/li>
&lt;li>从容器里面运行这些功能容器，绕过了一个 Docker API socket&lt;/li>
&lt;/ol>
&lt;p>使用以上技术的组合，程序执行负载发生的可能性将和您如何架构你的应用相关。运行后台任务就是一个非常适合的例子，但是整个应用中的其它工作负载也是有可能的，例如：&lt;/p>
&lt;ul>
&lt;li>考虑到延迟，用启动一个容器来服务所有用户的 HTTP 请求可能是不现实的。可是你可以写一个内置的负载均衡逻辑，让它知道何时需要主动地自动扩容 Web 前端自身，通过在 Swarm 群集上运行更多 web 处理容器。&lt;/li>
&lt;li>一个 MongoDB 容器可以在 Swarm 上成为一个具有自省能力的架构，它能自动地运行出正确数量的 shard 和 replica 容器。&lt;/li>
&lt;/ul>
&lt;h2 id="接下来">接下来&lt;/h2>
&lt;p>我们已经得到了这些激进的新工具，用做构建应用的抽象层，我们隐约看到了如何深入下去的可能性。我们依然像长时间以来在一堆服务器上构建应用一样，而以后可以来利用 Swarm 能按需地在基础架构里的任何地方执行功能代码的能力。&lt;/p>
&lt;p>希望这些能够给您一些如何构建应用的新思路，但是我们还需要你们的帮助。我们已经有的是一些构建 Serverless 应用的基础功能，然而他们依然不是很完备，我们需要更好的工具、库、样例程序，文档等等。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/bfirsh/serverless-docker" target="_blank" rel="noopener"
>这个 Github 库有一些工具、库、代码和文章的链接。&lt;/a>基于此，如果您想学习更多的话，请共享任何相关的链接，这样我们可以开始协作在一起。&lt;/p>
&lt;p>大家一起来搞，并祝 hacking 愉快！&lt;/p></description></item><item><title>DockerCon 2016 D2 超萌码头酷黑客 大会圆满闭幕</title><link>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</link><pubDate>Wed, 22 Jun 2016 02:35:39 +0000</pubDate><guid>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</guid><description>&lt;p>Closing General Session 的主题是 Moby Dock‘s Cool Hacks ； 从字面意思上看，这个主题的意思是“超萌码头酷黑客”的意思。我已经看到了关于最后一天开幕主题演讲的评论，说是“剑指商业”什么的；而我认为 Docker 从开始的第一天，无论它是否开源，它都是为了商业利益而已。话在说回到开源，Docker 只是完美的应用了开源软件这种实践而已；而且 docker 把开源这种模式应用的如此成功，并在商业上也如此让人眼红和侧目，这也算是开源软件商业化登峰造极的一种极端性个案。个人认为开源无疑是在软件行业中做出爆款技术当之无愧的首选的实践方式。我在红帽碰到很多参与开源十几二十年的老黑客，他们不乏会表达关于开源纯洁性沦丧的抱怨；我对此也非常理解和认同。而我更认同开源可以对软件技术带来无比活力的这个积极的方面。&lt;/p>
&lt;p>言归正传，小编我还是“模拟现场”播报一下大会闭幕主题演讲的盛况。这是大会的结束的 session，现场的人数明显的少于第一天开幕式的人。在十几分钟内，人们稀稀拉拉的进入了会场。会场中的座位大约还有一部分空位。美女 Mano 和 黑客 Kristie 作为主要演讲人上台。美女上台后先用手机自拍了几下。两个人开始宣布，Docker 大会之后举行为期一个月的黑客大赛，这是我们的传统，Docker 大会虽然今天会结束，而 docer 黑客大赛将从今天开始。我们来请大家欣赏三个非常酷的黑客项目演示。&lt;/p>
&lt;p>本次大会的录音点这里  &lt;a class="link" href="http://www.ximalaya.com/32280565/sound/17388272" target="_blank" rel="noopener"
>http://www.ximalaya.com/32280565/sound/17388272&lt;/a>&lt;/p>
&lt;h2 id="黑客演示-1微服务自毁平台">黑客演示 1：微服务自毁平台&lt;/h2>
&lt;p>Jeff 登场。Jeff 开始讲述微服务的故事，我们都在试图让基础架构做到冗余，容所有的服务都冗余，让群集能够自愈；但是故障，断网，宕机还是会发生。我们所做的这些真的能够保证业务不宕机么，服务不终端么？你怎么能确认这一点？因此回归到故障的发生上吧？如果服务要出故障，请让它有规律的发生。请程序猿和 ops 都投入到故障处理的战斗中，以此为契机来优化和改造应用，让应用变的更加强壮。我们都听说过混乱猴子，而 Jeff 团队正式帮人们构建一堆这样的工具的人。&lt;/p>
&lt;p>有一个思路是：如何让我的系统的服务出故障，如何主动的在系统中注入故障。我们需要一种特殊的编排工具来在系统中模拟和触发故障的发生。我用容器做工具平台来触发故障注入的动作。当然这个故障是在容器架构的微服务系统中触发这个动作。&lt;/p>
&lt;p>Jeff 开始做这个  Demo。说：如果你的”网络没有故障，天下太平。“其实这很无聊的说，有木有？有木有？我现在开始用工具来注入 网络延迟的网络故障吧！ 。用一个基于策略的工具。配置一个网络故障模拟的策略，故障什么时间发生，发生多久。这里设计一个每 10 秒钟注入一次网络延迟故障提高到 600ms 的故障。然后配置故障影响的范围，这里使用 Docker 的 lable 来做故障发生节点的选择的条件。符合标签的系统将受到这次故障影响。我们的这个故障模拟编排系统，帮您提前体验故障的发生。现在你看故障发生了，从这些容器里面 ping google 的网络延迟比之前大多了， 目前延迟到了 600ms。希望你们能开始体验和使用这个而工具。&lt;/p>
&lt;h2 id="黑客演示-2serverless-架构的应用不是梦">黑客演示 2：Serverless 架构的应用不是梦&lt;/h2>
&lt;p>Ben 是大家在 Docker 大会喜闻乐见的一个黑客，他经常给做 demo 和 session。他绝对符合超萌的标准。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/40906-1.jpeg"
loading="lazy"
alt="40906 (1)"
>&lt;/p>
&lt;p>Ben 开讲，Serverless 是如何做的？ben 认为 Serverless 是一种全新的应用编程的思路，而 docer 可以很好的支持这种思路，并实现和执行这种思路。docer 群集可以让 Serverless 引用按需执行，并让该应用的底层变得资源冗余并路由可达。ben 开始演示   他的几张 slides， 说 Sererless == docker 这个概念。本开始讲解：如何用 Serverless 架构来实现投票应用的改造。如何把这个 5 个服务模块的纯粹容器微服务系统转换为 serverless 架构的应用。开始修改源代码，把发入队列的票，变成一个处理投票的容，把 http 服务器变成一个 CGIHander（）服务；但是  nodejs  不支持 CGIhander，肿么办？我用 perl 重写了这部分，为毛用 perl，被忘了它乃是古董级的黑客神器的好不好，呵呵！改造完之后的系统架构如下。架构是把处理 postgresql 意外的模块都重写了。数据库保留在最下层。这种 Serverless 重构实践遵从的原则如下。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/2-1.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>三个原则翻译一下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>把每个模块的核心功能打包，并作为容器来运行。解读：这意味着把所有服务模块组重构，把每个服务模块中的核心功能代码作为一个在容器里面跑的对象。这里其实牵扯到很深的业务重构和应用重构，程序猿或将抛弃以前的代码，甚至以前所习惯使用的程序开发堆栈。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>把这些容器用 Docker 的 Swarm 跑起来。解读：docker 原生的 Swarm 编排能力将为您的应用提供，功能的运行，workload 的分布，服务的冗余，服务的路由等等支持；这样的架构能支持到 Serverless 的应用的模型。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>从容器中去运行其它容器。解读：容器编排平台或将不是容器生命起源的唯一起点，容器里面的应用可能可以决定系统中需要滋生出什么样的容器，当然说的是需要实现和运行什么功能的容器。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>好了，目前为止，ben 的心的应用重构完成，还是用 docker-compose up 启动了改造之后的应用。现在看到了这个 serverless 的应用工作正常。&lt;/p>
&lt;p>Ben 说：我们在这 demo 了 serverless  应用的改造的过程，可以看到 docker 是如何支持这种应用架构的。你可以打包 web front 为服务，它自动的在 Swarm 群集上无限延展这个服务。成为分布式计算的架构。还可以打包微服务的其它应用模块为 Serverless 应用架构。欢迎大家 参与到我的 Serverless github 项目中，和我一起互动，把 Serverless 在 docker 上的应用搞起来。&lt;a class="link" href="https://github.com/bfirsh/serverless-docker" target="_blank" rel="noopener"
>https://github.com/bfirsh/serverless-docker&lt;/a>  这里包括了以上演示的应用。&lt;/p>
&lt;h2 id="黑客演示-3在线更新的无人机">黑客演示 3：在线更新的无人机&lt;/h2>
&lt;p>这个团队做 in the air update 无人机实时演示。无人机其实是树莓派加他们的 docker 软件系统。这是一个嵌入式系统的设计。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/3-1.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/4.jpg"
loading="lazy"
alt="4"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/5.jpg"
loading="lazy"
alt="5"
>&lt;/p>
&lt;p>实时新旧系统的切换秘密在这里。新版的容器会先运行起来，新系统用一个队列来接收旧系统的数据，这些数据是新旧系统交接的必要的数据，系统会判断需要多长时间，需要收集那些数据来完成这个交接的过程。直到旧系统到新系统的割接完毕。&lt;/p>
&lt;p>程序猿开始更新 v1 的代码，加入了摄像头实时视频功能。更新提交了 v2 的镜像文件。在下图可以实时的监视到无人机的状态。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.jpg"
loading="lazy"
alt="6"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/1-1.jpg"
loading="lazy"
alt="1"
>&lt;/p>
&lt;p>无人机在在线更新软件中。并没有掉地上哈哈哈！&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.1.jpg"
loading="lazy"
alt="6.1"
>&lt;/p>
&lt;p>右下角是新版本软件的摄像头把大会现场的视频拍摄，并实时传递到控制台的效果。此图上面的那个图，中间凸起震荡的那个块是无人机软件升级实时更新的过程。&lt;/p>
&lt;p>本黑科技演示完毕。&lt;/p>
&lt;h2 id="hackathon-黑客大赛启动">hackathon 黑客大赛启动&lt;/h2>
&lt;p>主此人再次上台启动了黑客大赛。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/7.jpg"
loading="lazy"
alt="7"
>&lt;/p>
&lt;p>为期一个月的 hackathon 正式开始。&lt;/p>
&lt;h2 id="最后看点">最后看点&lt;/h2>
&lt;p>CEO CTO 上台感谢赞助商。所罗门开始讲黑客骚扰现象。号召大家通过&lt;a class="link" href="http://hackharassment.com" target="_blank" rel="noopener"
> http://hackharassment.com&lt;/a> 网站来抵制中现象。&lt;/p>
&lt;p>Bump UP 是通过手环实现的，人们的手环彼此碰撞会在系统中增加一个点数。宣布了碰撞点数最多的前 5 名，感谢他们在本次大会中，积极的和其它人互动和沟通，请他们去领奖。所罗门号召所有现场的人再次相互碰撞手环，系统系统的点数增加到两百万。来解锁 Docker 奖学金基金。很快大家碰撞起来。奖学金解锁。&lt;/p>
&lt;p>感谢进三千名的社区 贡献者，感谢 docker 的员工。所有人发来的自拍形成了一个西雅图拼图。最后大会圆满结束。&lt;/p>
&lt;p>看到最后的才能做最后的评论。这更感觉是一个黑客大会，引入了 docker 对社会的责任感的概念。商业财富越大的人社会责任感应该更多。更像是黑客公司商业成功之后，继续创新，并开始践行自己的社会责任的大会。大会并没有结束，黑客大赛在接下来的一个月里将在全球各地延续。&lt;/p></description></item><item><title>DockerCon 2016 D1 Keynote</title><link>https://martinliu.cn/2016/06/20/dockercon-2016-d1-keynote/</link><pubDate>Mon, 20 Jun 2016 19:30:33 +0000</pubDate><guid>https://martinliu.cn/2016/06/20/dockercon-2016-d1-keynote/</guid><description>&lt;p>看点：开场乌龟引起了喵星人大战，首次有吉祥物开启的科技盛会。 和往常一样 CEO 和 CTO 挑大梁将首日 keynote。 所罗门提出了 Docker 技术发展的三个核心方向和着眼点，并在每个方向上做了新技术发布。 1. 开发者体验提升， 正式发布 Docker for Mac/Windws 2. 编排能力的提升，正式发布 Docker 1.12 ，其中有四项能力提升；这是要废掉所有其他编排器的节奏啊~ 3. 运维体验提升，正式发布 beta.docker.com ；这是和公有云深度结合的产品，分为 AWS 和 Azure 两个模块。 一共有三个实景演示，都没有出现问题，演示很成功。&lt;/p>
&lt;h2 id="现场录音">现场录音&lt;/h2>
&lt;p>点上面的播放键，播放整场录音。请注意中间的数秒钟乃至数十秒的中断是正常，请快进收听。&lt;/p>
&lt;h2 id="开场">开场&lt;/h2>
&lt;p>屏幕上出现了乌龟开始做 demo，运行了一个容器。 猫咪大战，混乱了，猫星人入侵了。猫叫~~乱作一团··· 发生了什么？ dockercon16 吹起了号角。 乌龟再次出现在电脑上，运行了另外一个容器惊喜，这次是美妙的音乐。 调皮的乌龟折腾完了之后，主题曲想起来。4000 多人的场子，大家很期待。&lt;/p>
&lt;h2 id="ceo-ben-golub-演讲">CEO Ben Golub 演讲&lt;/h2>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/2.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>Ben Golub CEO 出场。 Today we are all docker blue. 欢迎所有人。 我们和前两年的不同，我们发布了 1.0 等等。 谈了很多 Docker 取得的成就。 感谢和表扬了社区。 感谢 2900+贡献者。 社区的状态动态，每周超过 300 PR，三分之二来自 Docker 公司之外。 docker meetup 的状况， 250+城市举行，125K 人参加聚会。 内容构建方面，docker hub 上有 460K 个应用，到目前为止有 4.1B 此镜像下载。 感谢 docker 的生态社区。 讲述了这两年的使用场景的变化。Docker 逐渐成为了企业级的应用。 所有穿着红色衣服的起立，他们是 Dockr 公司的员工，感谢他们，请鼓掌。 感谢今年的赞助商。 向 Demo Gods 致敬，给神献上祭品，保证后续的演示顺利。 we pray to the old codes and the new.&lt;/p>
&lt;h2 id="cto-所罗门演讲">CTO 所罗门演讲&lt;/h2>
&lt;p>所罗门出场。 我去，4000 多人在场，我老爸也在家看我视频直播。 很荣欣大家来参加，感谢大家来参会。 谁参加过 DockerCon14？ 我们要开始做很多的 demo 在会议过程中。 最精彩的部分是，我们来自全球各个行业的不同层面，多样性简直是不可思议。原因是：Programming is changing the world. 我们在一起的原因是：Docker 是编程创新的助力工具。 We’re building Docker incrementally, in the open. 最好的工具目前看不是那些软件工具巨人的公司提供的，而是来自社区和群众的创新，是你们指引着我们构建了愈来愈多的工具。 社区告诉我们几个方面需要努力。&lt;/p>
&lt;h3 id="1-开发者体验">1 开发者体验&lt;/h3>
&lt;p>构建最好的工具，这个工具需要有这些特质：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>get out of the way;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>adopt to you；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>make the powerful simple&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>我们努力地践行着这些理念。 Docker for Mac/Windows 将是最无缝的开发者体验。 Making things easy is really hard. 我们在寻找最佳的系统工程师，我们收购了 Unikernel 公司。 在移动游戏行业里面找到最佳的设计者。&lt;/p>
&lt;h3 id="第一个演示--docker-for-mac">第一个演示 – Docker for Mac&lt;/h3>
&lt;p>演示者登台。 我是个开发者，今天第一天上班。 安装了 Docker for Mac 打开这个应用，启动它。 克隆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone viting-app
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker-compose up
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开投票应用的两个 web 界面。 我不知道这个应用是什么，但是一个命令就启动了所有 5 个服务。 我发现了程序的 bug。 是否我第一天上班就能修复它？ 分析了一下程序架构图。 查看 docker-compose.yml 文件。 找到了一个 debug 显示的的那一行。 在代码中加入了 live debug 的断点。 开始 review 代码，发现了奇怪的地方。 找到了 git 上的代码，增加了评论，提出源码结果计算方法有问题。 现在删除了有问题的哪一行代码。 删除了断点。 用 live debug 的方式修复代码。 回到程序界面，发现 bug 没了。 做 git commit 提交修正后的代码。 查看了该应用在 staging 环境的情况，发现也有相同的结果计算的问题。 进入该环境的 Docker Cloud 界面，看到了这个运行环境。 查看 result 服务的构建策略是自动构建。 Docker Cloud 自动接收了新的代码，Staging 环境的构建完成并通过了测试脚本，程序正常了。 查看云里的 Staging 环境的 bug 也被除掉了。demo 结束。&lt;/p>
&lt;h3 id="splice-的-cto-matt-案例分享">Splice 的 CTO Matt 案例分享&lt;/h3>
&lt;p>Splice 的 CTO Matt；我们做的是个音乐服务的技术，我们构建的服务像是给音乐人用的 github。 每天都有人上传上很多 TB 的音乐数据。 我们在 Mac 上开发，在 Linux 上部署。 我们使用多种数据存储。 Docker 让我们保持多种环境的一致，降低了 debug 的时间。 所有的程序运行在容器中。 我们一天更新线上的业务 20 多次。 Developer 的第一天工作就能为业务提供价值。 我们使用 Docker for Mac。&lt;/p>
&lt;h3 id="2-orchestration-编排能力">2 Orchestration 编排能力&lt;/h3>
&lt;p>我们听到很多 happy user 的故事。 感谢所有 7 万多 Docker for Mac beta 的反馈参与者。 我宣布 Docker for Mac/Widnwos beta 完全开放下载。 很多人告诉我们需要在 Orchestration 上更加努力。 它在 ship 方面提供支持，能发布你整个的应用，让你不再关心单个的容器。 Orchestration 是个技术活，只有专家才能干。很少人能做这个工作。 可是用户怎么能即不出现手头人才短缺，又不被某些厂商在这方面给技术锁定呢？ 更好的方法是什么？ Docker 1.12 将内置编排功能。 最佳的编排技术将是 Docker 自己。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/3.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>我们先提前介绍一些它的新功能。&lt;/p>
&lt;ul>
&lt;li>Swarm mode&lt;/li>
&lt;li>Cryptographic node identity&lt;/li>
&lt;li>Docker Service API&lt;/li>
&lt;li>Build-in Routing Mesh&lt;/li>
&lt;/ul>
&lt;p>非常简单的演示，你就明白了。 欢迎第三个 编排的演示 Docker 1.12 技术。&lt;/p>
&lt;h3 id="第二个演示--docker-swarm-功能演示">第二个演示 – docker swarm 功能演示&lt;/h3>
&lt;p>两个人上场。 用一个新的机器，上面只安装了 docker。 有三个节点。 第一个节点上初始化群集 docker swarm init 第二个节点上加入群集 docker swarm join 在第三个节点上加入群集 docker swarm join 三节点的群集建立完成。&lt;/p>
&lt;p>为毛它没有让输入任何安全的信息和选项，这就对了，我们有内置的 PKI 安全通讯机制。 所有节点都有自己的身份标识。密钥定期自动变化。所有通讯都可以追述到发起者的身份。&lt;/p>
&lt;p>你们都懂 docker run 子命令。 docker service 命令是新来的子命令。 service 的定义是将要维持服务的状态。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service create --name voting-app -p 5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>所有的服务只启动了一个容器，分布在三个节点上。&lt;/p>
&lt;p>看到投票应用页面显示了。&lt;/p>
&lt;p>浏览器访问了第一个节点的 ip:5000 ，然后第二个节点的 ip:5000 端口，发现实际上访问到了第一个节点上的的容器。这就是新的容器路由的功能。所有的节点访问这个服务的端口，都可以路由到该服务的容器里。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service scale 6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>现在扩容服务的容器。 每次刷新页面，页面上容器的 ID 都在变，这是群集内置的 round robin 负载均衡策略，把访问分发到所有容器。这就是内置的负载均衡功能。&lt;/p>
&lt;p>我们升级这个 app 吧。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>演示容器镜像文件的更新 选择另外一个 tag 的镜像来升级 现在我们可以对电影投票了&lt;/p>
&lt;p>滚动升级可以支持 加上一次升级 2 个容器的升级选项，因此它现在是做两个一次的服务容器升级，直到所有容器都升级结束。&lt;/p>
&lt;p>我们说的自愈功能是说，能让应用可以在机器宕机的时候，业务也不中断。 请把有两个容器的 node3 关机。 调度器现在自动在 node2 上长出刚才运行在 node3 上的那两个容器。保持 6 个容器的服务配置。&lt;/p>
&lt;p>演示成功，并没有出问题。&lt;/p>
&lt;h3 id="zenly-的创始人案例分享">Zenly 的创始人案例分享&lt;/h3>
&lt;p>所罗门高兴的再次上台。 这说明我们的祭品生效了，演示没有出毛问题。 docker 1.12 在几周后就发布，Docker for Mac beta 版本上现在就有这些功能。你们这些已经安装的现在就可以尝试这些功能。 我们自由的扩容业务应用，而服务速度不受到影响。 在大规模的关键业务中的部署才是目标。我们请 Zenly 的兄弟们上台。&lt;/p>
&lt;p>Zenly 的人喝了两杯祭品的冰咖啡上台了。 我们有 1M 用户，是最近的三个月内获得的。 500M events/day 一共才 6 engineers 我们运行业务在云上。 我们现在把部分业务迁移回自己的物理机。 我们在 10 台物理机上运行部分业务。 部分运行在 GCE 上。 我们感觉按需扩容很爽。&lt;/p>
&lt;h3 id="3-运维体验">3 运维体验&lt;/h3>
&lt;p>我们谈到开发者体验，业务编排。 群众还告诉我们“Ops experience” 运维体验是需要关注第三个侧面。 Docker 应该深度和云基础架构集成。&lt;/p>
&lt;h4 id="betadockercom-发布">beta.docker.com 发布&lt;/h4>
&lt;p>我宣布 beta.docker.com 发布。包括 docker for aws 和 docker for Azure 是最原生的 AWS 和 Azure 体验。是和云基础架构最深的集成。 现在可以用 AWS CloudFormation 来部署 Swarm 群集。 可以自动配置所有的负载均衡端口等配置。&lt;/p>
&lt;h4 id="wwwdockercomdab-发布">&lt;a class="link" href="https://www.docker.com/dab" target="_blank" rel="noopener"
>www.docker.com/dab&lt;/a> 发布&lt;/h4>
&lt;p>&lt;a class="link" href="https://www.docker.com/dab" target="_blank" rel="noopener"
>www.docker.com/dab&lt;/a> 是新的可移植多容器应用打包格式。 这是新的 ops 体验。是让 developer 和 Ops 更容易工作在一起的方案。&lt;/p>
&lt;h3 id="第三个演示--云运维体验">第三个演示 – 云运维体验&lt;/h3>
&lt;p>Developer：我想赶紧回家。我还需要赶紧交货。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker compose bundle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>产生了一个.dab 文件，齐活了。 把应用的 .dab 文件给 Ops 即可。 Ops：你的应用是 docker 的么？ 额的个神啊！ 我喜欢在 AWS 上用 Docker。 看我新建 Stack 的 AWS 向导，这里可以配置了一个新的 docker swarm 群集。 看我这有一个已经部署了 100 节点的群集。 所有网络、存储、负载均衡都不用手动配置。 复制 这个网址。 在 Mac 电脑的 shell 粘贴 ，后点击回车。 我们进入了命令行 docker for aws 的特殊的 shell 我能看的所有群集和主机的状态 把你的 .dab 文件给我，就欧了~ 用 USB copy 给你。 把文件 copy 给了 Ops scp .dab 文件到 swarm 群集中。 在进入 shell ls 能看的这个文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker deploy voting-app xxx.dab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>看这些所有服务都运行了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker service ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service update -p 80:80 voting-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service update -p 8080:8080 result-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker service scale
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>扩容这些服务的容器数量 打开浏览器确认应用部署结果，找到 ELB 的配置，配置已经自动生成了。 浏览器中访问 ELB 的 80 端口上看的投票页面 在 ELB 的 8080 端口看的结果页面 这下应用部署完毕。 原来你的 Ops 工作怎么这么简单啊！！ I got go home ~~~&lt;/p>
&lt;h2 id="结束">结束&lt;/h2>
&lt;p>所罗门感谢大家，所请访问 docker.com/getdocker 有需要的尽管说。 请在这几天内，尽量多的告诉我们，你们的需求和使用场景。 请告诉我们 what we build next ! thank you very much ！！&lt;/p>
&lt;h2 id="注意">注意&lt;/h2>
&lt;p>我是 Maritn Liu 为您播报本次大会的各种信息，对以上内容有任何问题和疑问请加我微信咨询，我的微信号是 martinliu_cn ，这篇文章也会在我的微信公众号（aws-faq）和 ”刀客微播报“上发布。以上会议记录中所有命令的操作并不是准确的演示者输入，尽量参考这些命令来想想其可能的参数和语法，如果你安装了最新版本的 Docker for Mac 可以自己试一下。&lt;/p></description></item><item><title>下一代应用为中心的平台 OpenShift</title><link>https://martinliu.cn/2016/01/12/e4b88be4b880e4bba3e5ba94e794a8e4b8bae4b8ade5bf83e79a84e5b9b3e58fb0-openshift/</link><pubDate>Tue, 12 Jan 2016 04:05:46 +0000</pubDate><guid>https://martinliu.cn/2016/01/12/e4b88be4b880e4bba3e5ba94e794a8e4b8bae4b8ade5bf83e79a84e5b9b3e58fb0-openshift/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-8.jpg" alt="Featured image of post 下一代应用为中心的平台 OpenShift" />&lt;p>&lt;a class="link" href="https://vimeo.com/151465422" target="_blank" rel="noopener"
>Amadeus uses next-generation containerized application platform with OpenShift&lt;/a> from &lt;a class="link" href="https://vimeo.com/martinliu" target="_blank" rel="noopener"
>Martin&lt;/a> on &lt;a class="link" href="https://vimeo.com" target="_blank" rel="noopener"
>Vimeo&lt;/a>.&lt;/p>
&lt;p>以上视频来源于：&lt;a class="link" href="https://blog.openshift.com/openshift-3-amadeus-red-hat-summit-session-recording-recap/" target="_blank" rel="noopener"
>https://blog.openshift.com/openshift-3-amadeus-red-hat-summit-session-recording-recap/&lt;/a>&lt;/p></description></item><item><title>用 Jekyll + Github 建立静态站点</title><link>https://martinliu.cn/2016/01/10/e794a8-jekyll-github-e5bbbae7ab8be99d99e68081e7ab99e782b9/</link><pubDate>Sun, 10 Jan 2016 01:01:25 +0000</pubDate><guid>https://martinliu.cn/2016/01/10/e794a8-jekyll-github-e5bbbae7ab8be99d99e68081e7ab99e782b9/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-6.jpg" alt="Featured image of post 用 Jekyll + Github 建立静态站点" />&lt;h2 id="新建库">新建库&lt;/h2>
&lt;p>建立一个用户名开头的库，如我的 github 用户名是 martinliu， 新建的库的名字为 martinliu.github.io ; 这个库将是存放 web 页面的。包括该域名下的站点的所有相关页码代码文件和相关 css,图片等文件。&lt;/p>
&lt;h2 id="更新并上传新库">更新并上传新库&lt;/h2>
&lt;p>参考的命令如下：&lt;/p>
&lt;p>[bash]
git clone &lt;a class="link" href="https://github.com/martinliu/martinliu.github.io" target="_blank" rel="noopener"
>https://github.com/martinliu/martinliu.github.io&lt;/a>
cd martinliu.github.io
echo &amp;ldquo;Martin Liu&amp;rsquo;s Github Homepage&amp;rdquo; &amp;gt; index.html
git add &amp;ndash;all
git commit -m &amp;ldquo;Initial commit&amp;rdquo;
git push -u origin master
[/bash]&lt;/p>
&lt;p>打开浏览器测试你的网站，访问网址： &lt;a class="link" href="http://martinliu.github.io" target="_blank" rel="noopener"
>http://martinliu.github.io&lt;/a> ， 你已经可以看到你的初始化页码了。&lt;/p>
&lt;h2 id="jekyll-博客系统">Jekyll 博客系统&lt;/h2>
&lt;p>Github 网站上推荐使用 Jekyll 创建和管理这个博客系统。它是支持 Markdown 语法，不需要使用数据库，纯文本的静态网站和博客系统。使用它可以建立和管理一个风格美观，容易管理的网站，生成的网页可以上传到以上生成的网站库中。&lt;/p>
&lt;h2 id="安装-jekyll-系统">安装 Jekyll 系统&lt;/h2>
&lt;p>我的测试系统：Fedora 23。操作步骤如下。
安装依赖的包和 ruby 环境&lt;/p>
&lt;p>[bash]
dnf install ruby  ruby-devel gem gcc libffi redhat-rpm-config
[/bash]&lt;/p>
&lt;p>更用国内的 rubygem 源
[bash]
gem source -r &lt;a class="link" href="https://rubygems.org/" target="_blank" rel="noopener"
>https://rubygems.org/&lt;/a>
gem source -a &lt;a class="link" href="http://mirrors.aliyun.com/rubygems/" target="_blank" rel="noopener"
>http://mirrors.aliyun.com/rubygems/&lt;/a>
gem update &amp;ndash;system&lt;/p>
&lt;p>gem install jekyll
[/bash]&lt;/p>
&lt;p>##本地测试 jekyll 站点
进入克隆到本地的库，并创建 jekyll 站点。&lt;/p>
&lt;p>[bash]
cd martinliu.github.io
rm index.html&lt;/p>
&lt;p>jekyll new .
New jekyll site installed in /root/martinliu.github.io.
[root@demo-w540 martinliu.github.io]# ls
about.md     css       _includes   _layouts  _sass
_config.yml  feed.xml  index.html  _posts
[root@demo-w540 martinliu.github.io]# jekyll server
Configuration file: /root/martinliu.github.io/_config.yml
Source: /root/martinliu.github.io
Destination: /root/martinliu.github.io/_site
Incremental build: disabled. Enable with &amp;ndash;incremental
Generating&amp;hellip;
done in 0.205 seconds.
Auto-regeneration: enabled for &amp;lsquo;/root/martinliu.github.io&amp;rsquo;
Configuration file: /root/martinliu.github.io/_config.yml
Server address: http://127.0.0.1:4000/
Server running&amp;hellip; press ctrl-c to stop.
[/bash]&lt;/p>
&lt;p>编辑站点的相关文件，测试成功之后，在上传到 github 上，然可到 maritnliu.github.io 上检查和本地的显示效果是否相同。&lt;/p></description></item><item><title>My Arduino Project status</title><link>https://martinliu.cn/2016/01/04/my-arduino-project-status/</link><pubDate>Mon, 04 Jan 2016 16:00:59 +0000</pubDate><guid>https://martinliu.cn/2016/01/04/my-arduino-project-status/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-10.jpg" alt="Featured image of post My Arduino Project status" />&lt;h2 id="source-code-on-github">Source code on github&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/martinliu/ArduinoProjects" target="_blank" rel="noopener"
>https://github.com/martinliu/ArduinoProjects&lt;/a>&lt;/p>
&lt;h2 id="project-2-sos-led">Project 2 SOS led&lt;/h2>
&lt;p>&lt;a class="link" href="https://vimeo.com/150682641" target="_blank" rel="noopener"
>S.O.S LED device&lt;/a> from &lt;a class="link" href="https://vimeo.com/martinliu" target="_blank" rel="noopener"
>Martin&lt;/a> on &lt;a class="link" href="https://vimeo.com" target="_blank" rel="noopener"
>Vimeo&lt;/a>.&lt;/p>
&lt;h2 id="project-2-blink-led">Project 2 blink led&lt;/h2>
&lt;p>&lt;a class="link" href="https://vimeo.com/150473587" target="_blank" rel="noopener"
>Arduino Project 1 blink LED&lt;/a> from &lt;a class="link" href="https://vimeo.com/martinliu" target="_blank" rel="noopener"
>Martin&lt;/a> on &lt;a class="link" href="https://vimeo.com" target="_blank" rel="noopener"
>Vimeo&lt;/a>.&lt;/p></description></item><item><title>vimeo video sharing vs youku.com</title><link>https://martinliu.cn/2016/01/01/vimeo-video-sharing-vs-youku-com/</link><pubDate>Fri, 01 Jan 2016 14:21:11 +0000</pubDate><guid>https://martinliu.cn/2016/01/01/vimeo-video-sharing-vs-youku-com/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-12.jpg" alt="Featured image of post vimeo video sharing vs youku.com" />&lt;p>vimeo 的特别域名没想到还给我留着的 &lt;a class="link" href="http://vimeo.com/martinliu" target="_blank" rel="noopener"
>http://vimeo.com/martinliu&lt;/a> 从国内访问和上传视频是有问题的，需要用 vpn 才能正常访问，vimeo 能共享到 Wordpress 上的 video 是没有视频的，播放的时候稍微有点卡；就算是稍微卡一点，也比 youku 视频前后的广告好，以后计划转战 vimeo 发布视频了。&lt;/p></description></item><item><title>IoT 是怎么被黑的？</title><link>https://martinliu.cn/2015/12/29/iot-e698afe6808ee4b988e8a2abe9bb91e79a84/</link><pubDate>Tue, 29 Dec 2015 04:06:28 +0000</pubDate><guid>https://martinliu.cn/2015/12/29/iot-e698afe6808ee4b988e8a2abe9bb91e79a84/</guid><description>&lt;img src="https://martinliu.cn/images/abstract-3.jpg" alt="Featured image of post IoT 是怎么被黑的？" />&lt;p>IoT 有公众的立场，也有厂商的算盘。微软的动作是比较快得，2015 年春季就发布了 IoT 战略，其他厂商 IBM，Amazon 等等也都有各自的布局。在硬件厂商这一次侧，Raspberry 则占据了比较显眼的位置；确实也吸引了比较多的眼球。它从 2013 年起一气出了很多型号的板子。回忆起来，当时除了记得 SoC 技术是价格非常便宜的，并没有太多关注这种硬件相关的东西。直到昨天我入手 Raspberry 2 model B 后，大致玩了一下，我隐约的感觉，今天谈到的 IoT 和以往确实不同了；这或许是” 范在型智能可互联网 “ 时代的到来，智能和 wifi 的植入是 maker 们欲罢不能的一件事情，在商业上是必要的卖点和噱头，是用户现实的和潜在的需求；可联网和可连接互联网，绝对是两个层面上的概念；封闭的信息孤岛式的网络已经无法通过自身实现其信息的价值，信息价值的实现必须通过与互联网的链接和互动来实现。联网意味着链接互联网，在哪里信息的融合和分析再反馈回到真实世界中，并完成某种动作，在这个闭环中，真实世界被投射到虚拟世界中去，然后再得到一个预期的反馈，计算机信息处理和控制在过程中起到了推动作用，真实世界中的人或者物对它的一个反馈使之所有抽象而似乎无形的信息技术和互联网实现了存在的价值；这是一种虚拟现实世界和人类主动且有意识地互动。&lt;/p>
&lt;p>扯远了，在某东购买的树莓板是这个这样的，如下图：&lt;/p>
&lt;p>&lt;a class="link" href="https://en.wikipedia.org/wiki/Raspberry_Pi" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/12/my-pi.jpg"
loading="lazy"
alt="my-pi"
>&lt;/a>&lt;/p>
&lt;p>它链接外部世界的方式就是通过板子上面的三个接口，下侧比较明显的排针，中上侧白色竖着的，和中右侧的两个白色排线插头。这些主要是链接传感器用的。另外还包括板载的 4 个 USB 口，USB 口也可以接外设和 Wifi 模块。当然还有网线插口。&lt;/p>
&lt;p>这是 Raspberry 的 2 代 B 型版，它的特点是计算处理能力是比较强劲的。感觉做控制中心比较合适，如智能家庭的总控制中心。它还可以和 Arduino 组合起来，Arduino 的处理能力较低，可以通过它作为外部传感器的 hub，单纯的做信息收集，和动作指令的执行（发出继电器开关的开合信号等）。就某种单一具体的 IoT 功能的实现，Raspberry 和 Arduino 没有太大的差异。但是在构建复杂系统的时候，把两者结合起来的设计还是多见的。接下来，我可能会去把 Amazon 上的那个 Arduino 开发套装买回来，这样就配齐了，当然 Raspberry A 型板也可以入。&lt;/p>
&lt;p>如果你把所有的东西都连接到互联网了，那么安全性怎么保证？今天在http://www.wired.com 网站上看到的头条就是《How &lt;a class="link" href="http://www.wired.com/2015/12/2015-the-year-the-internet-of-things-got-hacked/" target="_blank" rel="noopener"
>IoT got hacked &lt;/a>》看完后，不得不倒吸一口凉气。不过安全总是在任何时间点、场合拿出来，可以吓死人的东西。不 hack 出一些值得被人黑的东西来，那你还能做出什么更有意义的事情呢。以上就是本次树莓派入手记录贴。&lt;/p></description></item><item><title>超人组成的团队还是超级团队</title><link>https://martinliu.cn/2015/10/12/e8b685e4babae7bb84e68890e79a84e59ba2e9989fe8bf98e698afe8b685e7baa7e59ba2e9989f/</link><pubDate>Mon, 12 Oct 2015 06:33:12 +0000</pubDate><guid>https://martinliu.cn/2015/10/12/e8b685e4babae7bb84e68890e79a84e59ba2e9989fe8bf98e698afe8b685e7baa7e59ba2e9989f/</guid><description>&lt;h3 id="建议所有管理者都可以反思一下是否需要-supper-chicken-团队先看下这个视频">建议所有管理者都可以反思一下：是否需要 supper chicken 团队。先看下这个视频。&lt;/h3>
&lt;p>&lt;a class="link" href="http://video-subtitle.tedcdn.com/talk/podcast/2015W/None/MargaretHeffernan_2015W-480p-zh-tw.mp4" target="_blank" rel="noopener"
>http://video-subtitle.tedcdn.com/talk/podcast/2015W/None/MargaretHeffernan_2015W-480p-zh-tw.mp4&lt;/a>&lt;/p>
&lt;h3 id="about-the-book">About the book&lt;/h3>
&lt;p>&lt;img src="https://tedcdnpi-a.akamaihd.net/r/pb-assets.tedcdn.com/system/baubles/files/000/002/439/original/TEDBook_heffernan_cover.jpg?w=320"
loading="lazy"
alt="TED Book: Beyond Measure"
>&lt;/p>
&lt;p>In this wise and witty guide to creating strong company culture, business leader Margaret Heffernan lays the groundwork for a new kind of thinking: Organizations can create seismic shifts by making deceptively small changes.&lt;/p>
&lt;p>Far beyond a prescriptive list, this book spills over with fascinating anecdotes from organizations around the world. Heffernan reveals the surprisingly small changes any organization can make: how to empower every person as a leader: how to open channels as a real, active listening; the important of cutting back hours (and also leaning into crunch time); why leaving the office does wonders for your working brain; how conflict works as an essential tool for creative thinking; why companies that actively solicit involvement beyond their walls are so much more effective; how simple activities strengthen social capital between workers.&lt;/p>
&lt;p>Packed with compelling stories and startling statistics, Heffernan takes readers on a tour across the globe. Drawing from her years of experience as a business leader and ultimately proving that it&amp;rsquo;s often the small changes that make the greatest, most lasting impact.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;blockquote>
&lt;p>This book is aimed at everyone — from the CEO to the janitor — who wants a better place to work. It looks at the accumulation of small, everyday thoughts and habits that generate and sustain culture: ways of speaking, listening, arguing, thinking, seeing. These aren’t multimillion dollar, multi-year programs; these are small steps that anyone can take at any time, the small steps that mark the beginning of big change.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;/blockquote>
&lt;hr>
&lt;h3 id="press-and-reviews">Press and reviews&lt;/h3>
&lt;p>Read a Q&amp;amp;A with Margaret on &lt;em>Huffington Post&lt;/em>: &lt;a class="link" href="http://www.huffingtonpost.com/lynn-parramore/americas-competition-feti_b_7504540.html" target="_blank" rel="noopener"
>&amp;ldquo;America&amp;rsquo;s Competition Fetish Kills Creativity and Produces Human Sheep&amp;rdquo;&lt;/a>&lt;/p>
&lt;p>An illustrated excerpt from &lt;em>Beyond Measure&lt;/em> on MEDIUM: &lt;a class="link" href="https://medium.com/@M_Heffernan/small-steps-to-huge-change-a8f86d414ed9" target="_blank" rel="noopener"
>&amp;ldquo;Small Steps to Huge Change&amp;rdquo;&lt;/a>&lt;/p>
&lt;p>Read what &lt;em>TIME&lt;/em> has to say about &lt;em>Beyond Measure&lt;/em>: &lt;a class="link" href="http://time.com/3851826/financial-reform/" target="_blank" rel="noopener"
>&amp;ldquo;The Real Way to Fix Finance Once and for All&amp;rdquo;&lt;/a>&lt;/p>
&lt;p>A great synopsis of &lt;em>Beyond Measure&lt;/em> in &lt;em>Tech Cocktail&lt;/em>: &lt;a class="link" href="http://tech.co/team-margaret-heffernan-social-capital-2015-05" target="_blank" rel="noopener"
>&amp;ldquo;What Makes Some Teams Better than Others&amp;rdquo;&lt;/a>&lt;/p>
&lt;p>Read a wonderful review in &lt;em>The Globe and Mail&lt;/em>: &lt;a class="link" href="http://www.theglobeandmail.com/report-on-business/careers/management/corporate-culture-the-secret-sauce-of-success/article26091012/" target="_blank" rel="noopener"
>&amp;ldquo;Corporate culture the &amp;lsquo;secret sauce&amp;rsquo; of success&amp;rdquo;&lt;/a>&lt;/p>
&lt;hr>
&lt;h3 id="about-the-author">About the author&lt;/h3>
&lt;p>&lt;a class="link" href="http://www.ted.com/speakers/margaret_heffernan" target="_blank" rel="noopener"
>&lt;strong>Margaret Heffernan&lt;/strong>&lt;/a> is an entrepreneur, chief executive, and author. She was born in Texas, raised in Holland, and educated at Cambridge University. She worked for the BBC producing television and radio programs and also developed interactive multimedia products with Peter Lynch, Tom Peters, Standard &amp;amp; Poors, and The Learning Company. She has served as Chief Executive Officer for InfoMation Corporation, ZineZone Corporation, and iCAST Corporation. Her book, &lt;em>Willful Blindness&lt;/em>, was named one of the best business books of the decade by the &lt;em>Financial Times&lt;/em>, and her most recent book, &lt;em>A Bigger Prize&lt;/em> won the Transmission Prize in 2015. She blogs for the &lt;em>Huffington Post&lt;/em> and Inc.com.&lt;/p>
&lt;p>&lt;img src="https://tedcdnpi-a.akamaihd.net/r/pb-assets.tedcdn.com/system/baubles/files/000/002/443/original/tedbook_heffernan_headshot.jpg?1428423786?w=320"
loading="lazy"
alt="TED Book author: Margaret Heffernan"
>&lt;/p></description></item><item><title>Wordpress 创始人英年早逝-结肠癌</title><link>https://martinliu.cn/2015/09/30/wordpress-e5889be5a78be4babae88bb1e5b9b4e697a9e9809d-e7bb93e882a0e7998c/</link><pubDate>Wed, 30 Sep 2015 12:45:29 +0000</pubDate><guid>https://martinliu.cn/2015/09/30/wordpress-e5889be5a78be4babae88bb1e5b9b4e697a9e9809d-e7bb93e882a0e7998c/</guid><description>&lt;p>今天看到这条让人哀伤的新闻，真是感觉很难过。我是一个多年的 Wordpress 用户，本博客也是 wordpress 些的，而且记录多年的文章。wordpress 是一个能让人很着迷的程序。它是一个&lt;strong>GPLv2&lt;/strong>的开源软件。对我来说有一件事情是始终在于之斗争的，这就是“测试/更换 wordpress 的 Theme 和插件”；不夸张的说，当一个不需要编写一丁点 css/php 代码的人也能够完美地控制一个网站的功能和外表的时候，你会觉得渐渐的忽视了这个网站软件本身，你会被一下子陷入到，那浩如烟海的与之共生的生态系统所开发的免费资源中。wordpress 具备了开源软件的一个核心特质“提供开放的平台，让周边的开发者和设计师能通过扩展开发来够推动它的用户社区的发展和繁荣”。 以 wordpress 为核心的周边生态系统有：功能插件、theme 设计、SOE 咨询、网店功能等等；以上这些养活了互联网上无数的个体或者公司；给无数的网站设计爱好者提供了创造和互动的机会。虽然，我最近对 blog 软件的注意力渐渐地转向了 ghost，但是本站必将持续使用 wordpress，会继续一如既往地关注它可能会给用户带来的惊喜，长期使用和关注一个开源软件的体验是无法替代的，是欲罢不能的。仅此献给 Alex King，希望他的灵魂能升入天堂，一路走好。&lt;/p>
&lt;p>Alex King 是 wordpress 的创始人之一，他的个人 blog 停止于 2015-8-24 日的一篇自己关于他的病情的文章，到目前为止有 142 个回复。&lt;a class="link" href="http://alexking.org/about" target="_blank" rel="noopener"
>http://alexking.org/about   &lt;/a> 这个页面是他的自述页面。&lt;/p></description></item><item><title>Ghost 博客</title><link>https://martinliu.cn/2015/09/27/ghost-e58d9ae5aea2/</link><pubDate>Sun, 27 Sep 2015 15:03:12 +0000</pubDate><guid>https://martinliu.cn/2015/09/27/ghost-e58d9ae5aea2/</guid><description>&lt;p>话说本站也经历过很多变迁，使用的系统主要经历如下：google 的 blogspot （正式开始写 blog 的第一篇子在那，后来被墙）&amp;ndash;&amp;gt; 某共享 wordpress 平台（免费，名字已经几乎忘记了）&amp;ndash;&amp;gt; 免费国外 VPS 主机 wordpress (主机的 ip 很不靠谱，经常被墙) &amp;ndash;&amp;gt; 国外付费 VPS wordpress + 国内 CDN，现在这样一直快三四年了。&lt;/p>
&lt;p>Wordpress 用了这么多年下来，真是觉得什么都可以做了，其中有一段时间也捣鼓过一阵子 Drupal，但是还是觉得不如 wordpress 好使，它的功能非常成熟；themes 和 plugin 的生态系统非常成熟；价格在 30 ～ 50$的 themes 我也是买过几个了；可是最后还是维持在了当前这个 free theme 。&lt;/p>
&lt;p>Ghost 给我的感觉就是简洁、干净和快速。&lt;a class="link" href="http://hidocker.io" target="_blank" rel="noopener"
>http://hidocker.io &lt;/a>打建的过程中更是让我彻底的感觉到它的这些特点。它依赖的 nodejs 和 ngnix 两个包都只有几 MB 大小，它的安装包也很小。因此安装和配置也非常的简单，数量了 10 分钟之内就完成安装配置。使用了 ghost 两天之后，客观地讲它还是比较初级阶段，很多扩展和的定义都必须修改代码，这可能就会把恐惧修改代码的大批人拒之门外；甚至于安装新的 theme 这样的工作也是在 linux 的 shell 里面完成的。&lt;/p>
&lt;p>之后我会发布一篇详细的安装文档到 &lt;a class="link" href="http://www.aws-faq.com/" target="_blank" rel="noopener"
>http://www.aws-faq.com/&lt;/a> 上，点这里  &lt;a class="link" href="http://www.aws-faq.com/aws-ec2/ghost-%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE.html" target="_blank" rel="noopener"
>http://www.aws-faq.com/aws-ec2/ghost-%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE.html&lt;/a>&lt;/p></description></item><item><title>Atomic Host 原子主机最简测试</title><link>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</link><pubDate>Sat, 18 Jul 2015 13:29:45 +0000</pubDate><guid>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</guid><description>&lt;h2 id="环境准备">环境准备&lt;/h2>
&lt;p>本文使用笔记本电脑+KVM 虚拟化进行以下的测试过程，当然也可以用其它的操作系统加虚拟化软件的组合，测试机需要满足以下的条件：
测试虚拟机的建议配置 1C/2GB/10GB
虚拟机使用的网络需要能连接到互联网
虚拟机需要能加载光盘 iso 文件
可以执行起停虚拟机操作，能通过控制它登陆来做初始化配置&lt;/p>
&lt;p>本文测试机是 Lenovo T440s 笔记本电脑，安装的操作系统是 Fedora 22，使用 KVM 虚拟化，用 Virt-Manager 做 GUI 图形管理工具。建立了一个 NAT 的静态虚拟网络，虚拟机可以使用该网络来从互联网下载需要的文件包。&lt;/p>
&lt;p>下载 Fedora Atomic Host 虚拟机文件；下载页面： &lt;a class="link" href="http://www.projectatomic.io/download/" target="_blank" rel="noopener"
>http://www.projectatomic.io/download/&lt;/a> 点击绿色的下载按钮。下载 qcow2 格式的 Atomic Host 虚拟机文件。复制下载的文件到虚拟机运行的存储目录中，文件名可以是 master.qcow2，新测试虚拟机会基于它创建。&lt;/p>
&lt;p>在通过这个虚拟机模版文件生成测试机前，需要准备一个 init.iso 的文件，用来初始化测试机的主机名和初始用户密码。&lt;/p>
&lt;p>[bash]
[root@martin-fedora vm]# cat meta-data
instance-id: master
local-hostname: master.xenlab.com
[root@martin-fedora vm]# cat user-data
#cloud-config
password: smartvm
ssh_pwauth: True
chpasswd: { expire: False }
[root@martin-fedora vm]# genisoimage -output init.iso -volid cidata -joliet -rock user-data meta-data
I: -input-charset not specified, using utf-8 (detected in locale settings)
Total translation table size: 0
Total rockridge attributes bytes: 331
Total directory bytes: 0
Path table size(bytes): 10
Max brk space used 0
183 extents written (0 MB)
[/bash]&lt;/p>
&lt;p>以上的两个配置文件 meta-data 和 user-data，最后使用 genisoimage 命令生成出文件 init.iso。至此，Atomic Host 测试机的运行镜像文件和初始化配置文件都准备好了。&lt;/p>
&lt;h2 id="创建-atomic-host-测试虚拟机">创建 Atomic host 测试虚拟机&lt;/h2>
&lt;p>使用虚拟化的管理工具基于准备好的镜像文件（master.qcow2）创建测新的试虚拟机。在首次启动前，还需要添加光驱设备，指定光驱设备在启动时加载上文中创建的 init.iso 配置参数文件。
首次在虚拟管理工具上启动新创建的 Atomic Host 测试虚拟机，查看整个的启动过程。由于本文的测试网络不是 DHCP 的，因此测试机在启动后，还需要登陆虚拟机控制台，使用默认账户，用户名：fedora 用户，fedora 的密码在前面的配置文件中已经指定。静态 IP 地址参考的配置文件如下：&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=&amp;ldquo;eth0&amp;rdquo;
BOOTPROTO=&amp;ldquo;static&amp;rdquo;
ONBOOT=&amp;ldquo;yes&amp;rdquo;
TYPE=&amp;ldquo;Ethernet&amp;rdquo;
PERSISTENT_DHCLIENT=&amp;ldquo;yes&amp;rdquo;
IPADDR=192.168.10.42
NETMASK=255.255.255.0
BROADCAST=192.168.10.255
NETWORK=192.168.10.0
GATEWAY=192.168.10.1&lt;/p>
&lt;p>[fedora@master ~]$ cat /etc/resolv.conf&lt;/p>
&lt;h1 id="generated-by-networkmanager">Generated by NetworkManager&lt;/h1>
&lt;p>search xenlab.com
nameserver 192.168.10.1
nameserver 8.8.8.8
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>至此，Atomic Host 测试虚拟机初始化安装完毕。&lt;/p>
&lt;h2 id="atomic-host-基本操作">Atomic Host 基本操作&lt;/h2>
&lt;p>登陆 Atomic Host 测试虚拟机 master 之后首先需要测试是否能和互联网连接，ping 外部的网址，看是否能够正常解析。由于后面很多相关测试都需要从联网下载内容。
用 ssh 工具登陆之后，看下它：
[bash]
[fedora@master ~]$ cat /etc/redhat-release
Fedora release 22 (Twenty Two)
[fedora@master ~]$ uname -a
Linux master.xenlab.com 4.0.4-301.fc22.x86_64 #1 SMP Thu May 21 13:10:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[fedora@master ~]$ dnf
bash: dnf: command not found
[fedora@master ~]$ yum
bash: yum: command not found
[/bash]&lt;/p>
&lt;p>根据以上显示发现它貌似就是一个 Fedora 22 的服务器，不过默认没有 dnf, yum 包管理工具，不过有 rpm。查询一下这个系统上有什么默认安装的软件包：根据 rpm -qa 结果显示，Atomic Host 虚拟机默认安装了 324 个软件包。下面初步尝试一下 Atomic Host 操作系统更新和管理的主要命令 atomic / rpm-ostree&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic
usage: atomic [-h] {host,info,install,run,uninstall,update} &amp;hellip;&lt;/p>
&lt;p>Atomic Management Tool&lt;/p>
&lt;p>positional arguments:
{host,info,install,run,uninstall,update}
commands
host execute Atomic host commands
info display label information about an image
install execute container image install method
run execute container image run method
uninstall execute container image uninstall method
update pull latest container image from repository&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$ sudo rpm-ostree
Usage:
rpm-ostree [OPTION&amp;hellip;] COMMAND&lt;/p>
&lt;p>Builtin Commands:
compose
upgrade
rebase
rollback
status
db&lt;/p>
&lt;p>Help Options:
-h, &amp;ndash;help Show help options&lt;/p>
&lt;p>Application Options:
&amp;ndash;version Print version information and exit&lt;/p>
&lt;p>error: No command specified&lt;/p>
&lt;p>[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[fedora@master ~]$ sudo rpm-ostree status
[fedora@master ~]$ sudo atomic host
usage: atomic host [-h] {rollback,status,upgrade} &amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>positional arguments:
{rollback,status,upgrade}
host commands
rollback switch to alternate tree at boot
status list information about all deployments
upgrade upgrade to the latest Atomic tree if one is available&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>下面使用 atomic host upgrade 来升级这个系统，使它运行在最新的补丁和版本下。这个过程需要下载 180+MB 的升级包，这个过程无法断点续传，但是可以任意中断。再次运行该命令后，可以重新从头下载，直到下载成功。下载成功并升级成功以后，重起操作系统。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host upgrade
Updating from: fedora-atomic:fedora-atomic/f22/x86_64/docker-host&lt;/p>
&lt;p>0 metadata, 5051 content objects fetched; 183267 KiB transferred in 330 seconds
Copying /etc changes: 25 modified, 0 removed, 41 added
Transaction complete; bootconfig swap: yes deployment count change: 1
Changed:
avahi-autoipd-0.6.31-31.fc22.x86_64
avahi-libs-0.6.31-31.fc22.x86_64
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
tcpdump-14:4.7.4-2.fc22.x86_64
tzdata-2015e-1.fc22.noarch
udisks2-2.1.6-1.fc22.x86_64
Removed:
docker-storage-setup-0.0.4-2.fc22.noarch
pciutils-libs-3.3.0-1.fc22.x86_64
Added:
docker-selinux-1.7.0-6.git74e7a7a.fc22.x86_64
iptables-services-1.4.21-14.fc22.x86_64
kubernetes-master-0.20.0-0.3.git835eded.fc22.x86_64
kubernetes-node-0.20.0-0.3.git835eded.fc22.x86_64
python-pip-6.0.8-1.fc22.noarch
python-setuptools-17.1.1-3.fc22.noarch
Upgrade prepared for next boot; run &amp;ldquo;systemctl reboot&amp;rdquo; to start a reboot
[/bash]&lt;/p>
&lt;p>在 reboot 之后，这个系统就可以投入使用了。在启动的 GRUB 菜单上可以看到出现两个条目，默认进入最新的这个系统版本。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-07-15 23:33:20 22.61 db540a53ba fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[/bash]&lt;/li>
&lt;/ul>
&lt;p>进入系统之后，我们看到上面这个命令输出，目前 Atomic Host 的操作系统有了两个版本，该系统可以从最新的系统回退或者回滚到旧的版本。可以认为它同时具有多个可以前后切换的操作系统版本。&lt;/p>
&lt;p>在一个 Atomic Host 上有两种软件交付方式：
rpm-ostree 管理部署和升级 host 系统自身的软件
Linux 容器（目前 Docker）提供很多容器来跑各种软件应用服务&lt;/p>
&lt;h2 id="运行第一个-docker-镜像">运行第一个 Docker 镜像&lt;/h2>
&lt;p>现在测试的是 Atomic Host 自身的管理工具，传统的 Linux 系统中，这个软件是用 rpm 包和系统服务的方式，被安装到被管理节点的，可是我们下面使用容器的技术来部署，也达到相同的管理功能。Cockpit 是之前介绍过的一款系统管理工具，兼具对 docker 的管理功能，它可以 Docker image 的形式被下载，并且运行在本机的一个专有权限（提权）的容器中。它可以作为 Atomic Host 的主机管理工具，对 Linix 系统管理不熟练的人可以使用这个图形工具，查看和监控系统的状态，并且可以管理容器中 Image。下面是安装和运行这个特殊功能容器的命令。&lt;/p>
&lt;p>[bash]
[fedora@a1 etc]$ sudo atomic run cockpit/ws
/usr/bin/docker run -d &amp;ndash;privileged &amp;ndash;pid=host -v /:/host cockpit/ws /container/atomic-run &amp;ndash;local-ssh
efd3cbbad8452ff394e1d1a0c309870634207538597ba0cead26d790510e7a5e
[/bash]&lt;/p>
&lt;p>上面这条命令执行完后，就可以在笔记本电脑的浏览器，输入网址，来访问这个工具，如： https://192.168.10.41:9090 登陆的用户名和密码是 Atomic Host 的 fedora 和它的密码。&lt;/p>
&lt;h2 id="hw-实战篇">HW 实战篇&lt;/h2>
&lt;p>不错 HW 就是 Hello World！它太有名了，掠过对它的介绍。现在可以让 docker 命令出场了。在命令行中不加任何参数，看下它的默认输出。输出一下它的版本信息。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker version
Client version: 1.7.0.fc22
Client API version: 1.19
Package Version (client): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (client): go1.4.2
Git commit (client): 74e7a7a/1.7.0
OS/Arch (client): linux/amd64
Server version: 1.7.0.fc22
Server API version: 1.19
Package Version (server): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (server): go1.4.2
Git commit (server): 74e7a7a/1.7.0
OS/Arch (server): linux/amd64
[/bash]&lt;/p>
&lt;p>下面的实战内容是和过程如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>下载 fedora image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 httpd image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 HW 主页&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建并测试 HW 网站&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>具体的命令执行过程如下：&lt;/p>
&lt;h1 id="dependencies-resolved">[bash]
[fedora@master ~]$ sudo docker run -i -t fedora bash
Unable to find image &amp;lsquo;fedora:latest&amp;rsquo; locally
latest: Pulling from docker.io/fedora
ded7cd95e059: Already exists
48ecf305d2cf: Already exists
docker.io/fedora:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.
Digest: sha256:10ba981a70632d7764c21deae25c6521db6d39730e1dd8caff90719013858a7b
Status: Downloaded newer image for docker.io/fedora:latest
[root@f1c79aa4c931 /]# dnf update -y
Fedora 22 - x86_64 608 kB/s | 41 MB 01:09
Fedora 22 - x86_64 - Updates 439 kB/s | 12 MB 00:27
Last metadata expiration check performed 0:00:19 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.&lt;/h1>
&lt;h1 id="package-arch-version-repository-size">Package Arch Version Repository Size&lt;/h1>
&lt;p>Installing:
python-pip noarch 6.0.8-1.fc22 fedora 1.7 M
python-setuptools noarch 17.1.1-3.fc22 updates 425 k
Upgrading:
bash x86_64 4.3.39-4.fc22 updates 1.6 M&lt;/p>
&lt;p>&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.&lt;/p>
&lt;h1 id="transaction-summary">Transaction Summary&lt;/h1>
&lt;p>Install 2 Packages
Upgrade 59 Packages
Total download size: 48 M
Downloading Packages:
(1/61): python-pip-6.0.8-1.fc22.noarch.rpm 434 kB/s | 1.7 MB 00:03
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
Installed:
python-pip.noarch 6.0.8-1.fc22 python-setuptools.noarch 17.1.1-3.fc22&lt;/p>
&lt;p>Upgraded:
bash.x86_64 4.3.39-4.fc22 bash-completion.noarch 1:2.1-7.20150513git1950590.fc22
coreutils.x86_64 8.23-10.fc22 curl.x86_64 7.40.0-5.fc22
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..
systemd.x86_64 219-19.fc22 systemd-libs.x86_64 219-19.fc22
tzdata.noarch 2015e-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]#
[/bash]
上面的过程下载和启动了一个 fedora，然后更新系统到最新的包，为安装 Web 服务器打好了基础。&lt;/p>
&lt;h1 id="dependencies-resolved-1">[bash]
[root@f1c79aa4c931 /]# dnf install -y &lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
Last metadata expiration check performed 0:06:11 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.&lt;/h1>
&lt;h1 id="package-arch-version-repository-size-1">Package Arch Version Repository Size&lt;/h1>
&lt;p>Installing:
apr x86_64 1.5.1-3.fc22 fedora 111 k
apr-util x86_64 1.5.4-1.fc22 fedora 96 k
fedora-logos-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> noarch 22.0.0-1.fc22 fedora 33 k
&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> x86_64 2.4.12-1.fc22 fedora 1.2 M
&lt;a class="link" href="httpd-filesystem" target="_blank" rel="noopener"
>httpd-filesystem&lt;/a> noarch 2.4.12-1.fc22 fedora 24 k
&lt;a class="link" href="httpd-tools" target="_blank" rel="noopener"
>httpd-tools&lt;/a> x86_64 2.4.12-1.fc22 fedora 87 k
mailcap noarch 2.1.44-1.fc22 fedora 36 k&lt;/p>
&lt;h1 id="transaction-summary-1">Transaction Summary&lt;/h1>
&lt;p>Install 7 Packages&lt;/p>
&lt;p>Total download size: 1.6 M
Installed size: 4.4 M
Downloading Packages:
(1/7): apr-1.5.1-3.fc22.x86_64.rpm 128 kB/s | 111 kB 00:00
(2/7): apr-util-1.5.4-1.fc22.x86_64.rpm 100 kB/s | 96 kB 00:00
(3/7): &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch.rpm&lt;/a> 123 kB/s | 24 kB 00:00
(4/7): mailcap-2.1.44-1.fc22.noarch.rpm 123 kB/s | 36 kB 00:00
(5/7): &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64.rpm&lt;/a> 185 kB/s | 87 kB 00:00
(6/7): fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch.rpm&lt;/a> 151 kB/s | 33 kB 00:00
(7/7): &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64.rpm&lt;/a> 363 kB/s | 1.2 MB 00:03&lt;/p>
&lt;hr>
&lt;p>Total 264 kB/s | 1.6 MB 00:06
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
Installing : apr-1.5.1-3.fc22.x86_64 1/7
warning: Unable to get systemd shutdown inhibition lock
Installing : apr-util-1.5.4-1.fc22.x86_64 2/7
Installing : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 3/7
Installing : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 4/7
Installing : mailcap-2.1.44-1.fc22.noarch 5/7
Installing : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 6/7
Installing : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 7/7
Verifying : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 1/7
Verifying : apr-1.5.1-3.fc22.x86_64 2/7
Verifying : apr-util-1.5.4-1.fc22.x86_64 3/7
Verifying : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 4/7
Verifying : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 5/7
Verifying : mailcap-2.1.44-1.fc22.noarch 6/7
Verifying : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 7/7&lt;/p>
&lt;p>Installed:
apr.x86_64 1.5.1-3.fc22 apr-util.x86_64 1.5.4-1.fc22 fedora-logos-&lt;a class="link" href="httpd.noarch" target="_blank" rel="noopener"
>httpd.noarch&lt;/a> 22.0.0-1.fc22 &lt;a class="link" href="httpd.x86_64" target="_blank" rel="noopener"
>httpd.x86_64&lt;/a> 2.4.12-1.fc22
&lt;a class="link" href="httpd-filesystem.noarch" target="_blank" rel="noopener"
>httpd-filesystem.noarch&lt;/a> 2.4.12-1.fc22 &lt;a class="link" href="httpd-tools.x86_64" target="_blank" rel="noopener"
>httpd-tools.x86_64&lt;/a> 2.4.12-1.fc22 mailcap.noarch 2.1.44-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]# exit
exit
[fedora@master ~]$
[/bash]
上面在一个互动的 Bash 里面完成了 httpd 的安装，exit 命令之后，容器会停止运行，可以把这个停下来的镜像文件用下面的命令提交到本地的 image 库中。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker ps -a
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
f1c79aa4c931 fedora &amp;ldquo;bash&amp;rdquo; 17 minutes ago Exited (130) 3 minutes ago desperate_franklin
[fedora@master ~]$ sudo docker commit f1c79aa4c931 fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
c77c91fd4af681e736afc2ec76fc316732e25f52f6f3dd8aa97c973f28c55eb2
[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 25 seconds ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB
[/bash]&lt;/p>
&lt;p>第一个名为 “fedora-httpd” 的就是刚才安装完毕之后，停止的 docker image，用 commit 提交到本第的库中待用。下面开始准备网站的内容，其实只有一个主页，上只有一句话“HW”&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ pwd
/home/fedora
[fedora@master ~]$ vi index.html
[fedora@master ~]$ cat index.html
Hello World!
[fedora@master ~]$ tar -cf mysite.tar index.html
[fedora@a1 ~]$ ls
Dockerfile index.html mysite mysite.tar
[fedora@master ~]$ vi Dockerfile
[fedora@master ~]$ cat Dockerfile
FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
MAINTAINER MartinLiu&lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>&lt;/p>
&lt;h1 id="add-the-tar-file-of-the-web-site">Add the tar file of the web site&lt;/h1>
&lt;p>ADD mysite.tar /tmp/&lt;/p>
&lt;h1 id="docker-automatically-extracted-so-move-files-to-web-directory">Docker automatically extracted. So move files to web directory&lt;/h1>
&lt;p>RUN cp /tmp/index.html /var/www/html&lt;/p>
&lt;p>EXPOSE 80&lt;/p>
&lt;p>ENTRYPOINT [ &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&amp;rdquo;&lt;/a> ]
CMD [ &amp;ldquo;-D&amp;rdquo;, &amp;ldquo;FOREGROUND&amp;rdquo; ]
[/bash]&lt;/p>
&lt;p>上面这段命令中最重要的是 Dockerfiler 文件，这个文件的语法还有很多，以上是一个最简化的例子。使用它可构建一个具有静态页面内容的网站。下面开始构建这个网站的 Docker image。&lt;/p>
&lt;p>[bash]
[fedora@a1 ~]$ sudo docker build -rm -t mysite .
Warning: &amp;lsquo;-rm&amp;rsquo; is deprecated, it will be replaced by &amp;lsquo;&amp;ndash;rm&amp;rsquo; soon. See usage.
Sending build context to Docker daemon 31.74 kB
Sending build context to Docker daemon
Step 0 : FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; 05ce6f68d3f2
Step 1 : MAINTAINER A D Ministator email: &lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>
&amp;mdash;&amp;gt; Running in 7ee99e26ab76
&amp;mdash;&amp;gt; 03cc8c0deff1
Removing intermediate container 7ee99e26ab76
Step 2 : ADD mysite.tar /tmp/
&amp;mdash;&amp;gt; 52abfb1966ad
Removing intermediate container e6c20f7ca5ed
Step 3 : RUN mv /tmp/* /var/www/html
&amp;mdash;&amp;gt; Running in ef455353caff
&amp;mdash;&amp;gt; 6e24f9a9ea6f
Removing intermediate container ef455353caff
Step 4 : EXPOSE 80
&amp;mdash;&amp;gt; Running in 252b59576b54
&amp;mdash;&amp;gt; 7dd7c049c9d2
Removing intermediate container 252b59576b54
Step 5 : ENTRYPOINT /usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; Running in 572c3dafa53a
&amp;mdash;&amp;gt; fa01c160e081
Removing intermediate container 572c3dafa53a
Step 6 : CMD -D FOREGROUND
&amp;mdash;&amp;gt; Running in b133650a6e18
&amp;mdash;&amp;gt; f828e1847160
Removing intermediate container b133650a6e18
Successfully built f828e1847160&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
mysite latest 1bd6d7c1970f 45 seconds ago 605.7 MB
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 18 minutes ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker run -d -P mysite
6122ac7d4dff6cc73c4abc1523ac5dd02606c90d4e42da64823942d787694c1f
[fedora@master ~]$ sudo docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
6122ac7d4dff mysite &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> -D 37 seconds ago Up 35 seconds 0.0.0.0:32768-&amp;gt;80/tcp evil_bardeen
e5032443ab69 cockpit/ws &amp;ldquo;/container/atomic-r 16 minutes ago Up 16 minutes stoic_sammet
[fedora@master ~]$ curl localhost:32768
Hello World!
[/bash]&lt;/p>
&lt;p>在最后的命令行输出中，成功的看到了 Hello World!的出现。用的是 curl 的命令行 web 浏览器。&lt;/p></description></item><item><title>红帽媒体日</title><link>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</link><pubDate>Tue, 14 Jul 2015 14:20:24 +0000</pubDate><guid>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</guid><description>&lt;p>本次演讲用了大约 25 分钟，超时了大约 5 分钟多，但是其中有些观点还是没有叙述的很倒位。只能算是我的一种理解和解读，希望对道场的媒体朋友们对认识红帽公司有帮助。&lt;/p>
&lt;p>演讲源版 slide 和录音在这个网页上： &lt;a class="link" href="http://investors.redhat.com/events.cfm" target="_blank" rel="noopener"
>http://investors.redhat.com/events.cfm&lt;/a> 的这部分：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Jun 24, 2015&lt;/p>
&lt;p>10:30 AM - 1:00 PM ET&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Red Hat Analyst Day&lt;/p>
&lt;p>&lt;a class="link" href="http://edge.media-server.com/m/p/mhayc7rh" target="_blank" rel="noopener"
> Listen to webcast &lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/common/download/download.cfm?companyid=RHAT&amp;amp;fileid=838366&amp;amp;filekey=633328A1-EAD6-471D-9934-C43F4CDC5666&amp;amp;filename=RH_Summit_Analyst_Day_FINAL.pdf" target="_blank" rel="noopener"
>View Presentation&lt;/a>&lt;/p>
&lt;p>12.2 MB&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/events.cfm#" target="_blank" rel="noopener"
>Add to Briefcase&lt;/a>&lt;/p>
&lt;p>View Additional Information&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>Ovirt 服务器虚拟化测试</title><link>https://martinliu.cn/2015/07/12/ovirt-e69c8de58aa1e599a8e8999ae68b9fe58c96e6b58be8af95/</link><pubDate>Sun, 12 Jul 2015 11:16:44 +0000</pubDate><guid>https://martinliu.cn/2015/07/12/ovirt-e69c8de58aa1e599a8e8999ae68b9fe58c96e6b58be8af95/</guid><description>&lt;p>本文安装和测试的软件是 Ovirt+KVM 的服务器虚拟化，这两个项目是红帽 RHEVM+KVM 服务器虚拟化的上游社区产品。可以通过这个文档清晰的了解到红帽服务器虚拟化产品的大体功能，基本特点。本测试文档使用的是 Centos7+社区 yum 源；因此是最新的 ovirt 和 kvm 的功能。如果是正式的企业级需求测试，请使用光纤或者传统存储，从而达到和 vmware 等商业产品最好的类比测试。尽量避免使用嵌套 kvm 虚拟化的方式，除非您很熟悉 Linux，使用两个笔记本是最简单的测试环境。&lt;/p>
&lt;p>下图是 Ovirt 服务器的详细架构图。其中的 ovirt-engine 是本文安装和部署的部分，是用一个 centos7 的虚拟机安装的。Host1 也是用一个 centos7 的虚拟机安装的。半年之前我也配置过一次嵌套 kvm，根本是一头雾水，而且还没有成功，不过这次的配置过程却这么简单容易，就正常工作了。希望简单一点的人，可以把 Host1 用物理机来安装，也会节省很多时间。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_53901&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;512&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/ovirt-512px-Architecture.png"
loading="lazy"
alt="ovirt 架构图"
> ovirt 架构图[/caption]&lt;/p>
&lt;h2 id="kvm-嵌套虚拟化准备">KVM 嵌套虚拟化准备&lt;/h2>
&lt;p>在测试 KVM 服务器虚拟化的过程中，如果您能有独立的物理机跑 Hypervisor，那么您可以忽略本节。至今进入 ovirt 的安装。  下面的测试的物理机是 Lenovo T440s 笔记本，运行的 Fedora 22 操作系统，使用 KVM manager 做虚拟机的管理工具。本次测试用到两个虚拟机：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ovirt: 运行服务器虚拟化的管理机 ovirt，这个程序类似于 vmware 的 vcenter。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ovirt-host : 用来被 ovirt 管理的 hypervisor；使用 kvm 嵌套 kvm 的方式，来跑虚拟机。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>确认本机的服务器虚拟机 CPU Bios 配置正常。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>egrep -c &amp;lsquo;(vmx|svm)&amp;rsquo; /proc/cpuinfo
4&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>本机是 i5 的 CPU，双核开启超线程，显示为 4。还没有启用嵌套 KVM 的虚拟机，需要新建下面这个配置文件，操作系统不同，可能稍微不同，下面是以 Fedora 22 为例。&lt;/p>
&lt;p>vi /etc/modprobe.d/kvm-nested.conf
编辑以上文件，增加下面这行参数即可
options kvm_intel nested=1&lt;/p>
&lt;p>运行下面的命令，为操作系统内核加載此功能。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>modprobe -r kvm_intel # unload
modprobe kvm_intel # reload again&lt;/p>
&lt;p>cat /sys/module/kvm_intel/parameters/nested
Y&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>用上面最后的 cat 的命令确认嵌套功能启用正常，看到的是 Y 即可。&lt;/p>
&lt;p>查看本机虚拟化的 Cpu 相关参数。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@martin-fedora vm]# virsh capabilities | egrep &amp;ldquo;/model|/vendor&amp;rdquo;
&lt;!-- raw HTML omitted -->Westmere&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->Intel&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->none&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->dac&lt;!-- raw HTML omitted -->
[root@martin-fedora vm]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>到此，物理机的相关准备工作完成。下面使用 Martin&amp;rsquo;s Perfect CentOS7 模板新建一个 2C/4Gd 的虚拟机 ovirt-host; 用这个虚拟机作为跑虚拟机的 hypervisor 把建立好的虚拟机先别开机，需要对它的配置做修改。编辑 ovirt-host 虚拟机的配置，给这个嵌套的 KVM hypervisor 增加和物理机相同的 cpu 属性。&lt;/p>
&lt;p>virsh edit ovirt-host&lt;/p>
&lt;p>本嵌套 kvm 的虚拟机 cpu 参数如下，如果测试的物理机使用非 i5 的 CPU， 实际的配置参数应该和下面不同。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>保存配置，启动这个虚拟机，配置好主机名和网络 ip 地址。安装 ovirt yum 源。做 yum update 之后，reboot 待用。&lt;/p>
&lt;p>[bash]
yum -y update
yum install &lt;a class="link" href="http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm" target="_blank" rel="noopener"
>http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm&lt;/a>&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="安装-ovirt-服务器虚拟化管理机">安装 ovirt 服务器虚拟化管理机&lt;/h2>
&lt;p>使用 Martin&amp;rsquo;s Perfect CentOS7 模板新建一个 1C/4G 的虚拟机 ovirt；这个虚拟机上还需要配置 NFS 服务器，用来做 跑虚拟机的共享存储和用于存储 iso 光盘的存储。&lt;/p>
&lt;p>安装和配置 NFS 的过程如下：&lt;/p>
&lt;h1 id="安装-nfs-服务相关的包">安装 nfs 服务相关的包&lt;/h1>
&lt;p>yum install -y nfs-utils&lt;/p>
&lt;h1 id="创建存储目录">创建存储目录&lt;/h1>
&lt;p>mkdir -p /srv/ovirt/{iso,export,sata}
chown -R vdsm:kvm /srv/ovirt/
chmod -R 770 /srv/ovirt/&lt;/p>
&lt;p>编辑 nfs 配置文件 /ect/exports ， 加入下面三行。&lt;/p>
&lt;p>/srv/ovirt/iso 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/srv/ovirt/export 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/srv/ovirt/sata 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)&lt;/p>
&lt;p>由于 centos 7 的 nfs 默认是 v4，这和 ovirt 不兼容，需要修改配置文件改为 v3， 编辑 /etc/nfsmount.conf 加入下面两个参数。&lt;/p>
&lt;p>Defaultvers=3
Nfsvers=3&lt;/p>
&lt;p>#重启动 nfs 服务器 ，设置开机启动服务
systemctl start rpcbind.service &amp;amp;&amp;amp; systemctl enable rpcbind.service
systemctl start nfs-server.service &amp;amp;&amp;amp; systemctl enable nfs-server.service&lt;/p>
&lt;p>下面开始安装 ovirt 服务器。&lt;/p>
&lt;p>yum -y update
yum install &lt;a class="link" href="http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm" target="_blank" rel="noopener"
>http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm&lt;/a>
yum -y install ovirt-engine&lt;/p>
&lt;p>安装完后，用 engine-setup 命令配置和部署 ovirt 服务器。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@ovirt ~]# engine-setup
[ INFO ] Stage: Initializing
[ INFO ] Stage: Environment setup
Configuration files: [&amp;rsquo;/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf&amp;rsquo;, &amp;lsquo;/etc/ovirt-engine-setup.conf.d/10-packaging.conf&amp;rsquo;]
Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20150711225251-f9k7an.log
Version: otopi-1.3.2 (otopi-1.3.2-1.el7.centos)
[ INFO ] Stage: Environment packages setup
[ INFO ] Yum Downloading: ovirt-3.5-patternfly1-noarch-epel/x86_64 (0%)
[ INFO ] Stage: Programs detection
[ INFO ] Stage: Environment setup
[ INFO ] Stage: Environment customization&lt;/p>
&lt;p>&amp;ndash;== PRODUCT OPTIONS ==&amp;ndash;&lt;/p>
&lt;p>Configure Engine on this host (Yes, No) [Yes]: #回车，选择 Yes
Configure WebSocket Proxy on this host (Yes, No) [Yes]: #回车，选择 Yes&lt;/p>
&lt;p>&amp;ndash;== PACKAGES ==&amp;ndash;&lt;/p>
&lt;p>[ INFO ] Checking for product updates&amp;hellip;
[ INFO ] No product updates found&lt;/p>
&lt;p>&amp;ndash;== ALL IN ONE CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>&amp;ndash;== NETWORK CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Setup can automatically configure the firewall on this system.
Note: automatic configuration of the firewall may overwrite current settings.
Do you want Setup to configure the firewall? (Yes, No) [Yes]: No #选择 no，由于本机的服务没有安装防火墙
Host fully qualified DNS name of this server [unknown.prolexic.com]: ovirt.xenlab.com #回车继续&lt;/p>
&lt;p>&amp;ndash;== DATABASE CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Where is the Engine database located? (Local, Remote) [Local]: #回车，选择 Local 继续
Setup can configure the local postgresql server automatically for the engine to run. This may conflict with existing applications.
Would you like Setup to automatically configure postgresql and create Engine database, or prefer to perform that manually? (Automatic, Manual) [Automatic]: #回车，选择 继续&lt;/p>
&lt;p>&amp;ndash;== OVIRT ENGINE CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Engine admin password:
Confirm engine admin password:
[WARNING] Password is weak: it is based on a dictionary word
Use weak password? (Yes, No) [No]: yes
Application mode (Virt, Gluster, Both) [Both]: #回车，选择 Both 继续&lt;/p>
&lt;p>&amp;ndash;== PKI CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Organization name for certificate [xenlab.com]:&lt;/p>
&lt;p>&amp;ndash;== APACHE CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Setup can configure the default page of the web server to present the application home page. This may conflict with existing applications.
Do you wish to set the application as the default page of the web server? (Yes, No) [Yes]:
Setup can configure apache to use SSL using a certificate issued from the internal CA.
Do you wish Setup to configure that, or prefer to perform that manually? (Automatic, Manual) [Automatic]:&lt;/p>
&lt;p>&amp;ndash;== SYSTEM CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>Configure an NFS share on this server to be used as an ISO Domain? (Yes, No) [Yes]: no # 选择 no，本测试手工配置 NFS，不需要安装程序配置。 继续&lt;/p>
&lt;p>&amp;ndash;== MISC CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>&amp;ndash;== END OF CONFIGURATION ==&amp;ndash;&lt;/p>
&lt;p>[ INFO ] Stage: Setup validation
[WARNING] Cannot validate host name settings, reason: resolved host does not match any of the local addresses
[WARNING] Less than 16384MB of memory is available&lt;/p>
&lt;p>&amp;ndash;== CONFIGURATION PREVIEW ==&amp;ndash;&lt;/p>
&lt;p>Application mode : both
Update Firewall : False
Host FQDN : ovirt.xenlab.com
Engine database name : engine
Engine database secured connection : False
Engine database host : localhost
Engine database user name : engine
Engine database host name validation : False
Engine database port : 5432
Engine installation : True
PKI organization : xenlab.com
Configure local Engine database : True
Set application as default page : True
Configure Apache SSL : True
Configure WebSocket Proxy : True
Engine Host FQDN : ovirt.xenlab.com&lt;/p>
&lt;p>Please confirm installation settings (OK, Cancel) [OK]: #回车，选择 OK 继续
[ INFO ] Stage: Transaction setup
[ INFO ] Stopping engine service
[ INFO ] Stopping ovirt-fence-kdump-listener service
[ INFO ] Stopping websocket-proxy service
[ INFO ] Stage: Misc configuration
[ INFO ] Stage: Package installation
[ INFO ] Stage: Misc configuration
[ INFO ] Initializing PostgreSQL
[ INFO ] Creating PostgreSQL &amp;rsquo;engine&amp;rsquo; database
[ INFO ] Configuring PostgreSQL
[ INFO ] Creating/refreshing Engine database schema
[ INFO ] Creating CA
[ INFO ] Configuring WebSocket Proxy
[ INFO ] Generating post install configuration file &amp;lsquo;/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf&amp;rsquo;
[ INFO ] Stage: Transaction commit
[ INFO ] Stage: Closing up&lt;/p>
&lt;p>&amp;ndash;== SUMMARY ==&amp;ndash;&lt;/p>
&lt;p>[WARNING] Less than 16384MB of memory is available
SSH fingerprint: DF:FF:42:14:80:35:E2:7D:68:3A:1F:83:65:6E:89:EA
Internal CA 99:17:7A:42:D0:9D:D7:33:DE:C3:3E:07:EE:15:5D:01:28:63:4A:BF
Web access is enabled at:
&lt;a class="link" href="http://ovirt.xenlab.com:80/ovirt-engine" target="_blank" rel="noopener"
>http://ovirt.xenlab.com:80/ovirt-engine&lt;/a>
&lt;a class="link" href="https://ovirt.xenlab.com:443/ovirt-engine" target="_blank" rel="noopener"
>https://ovirt.xenlab.com:443/ovirt-engine&lt;/a>
Please use the user &amp;ldquo;admin&amp;rdquo; and password specified in order to login
In order to configure firewalld, copy the files from
/etc/ovirt-engine/firewalld to /etc/firewalld/services
and execute the following commands:
firewall-cmd -service ovirt-postgres
firewall-cmd -service ovirt-https
firewall-cmd -service ovirt-fence-kdump-listener
firewall-cmd -service ovirt-websocket-proxy
firewall-cmd -service ovirt-http
The following network ports should be opened:
tcp:443
tcp:5432
tcp:6100
tcp:80
udp:7410
An example of the required configuration for iptables can be found at:
/etc/ovirt-engine/iptables.example&lt;/p>
&lt;p>&amp;ndash;== END OF SUMMARY ==&amp;ndash;&lt;/p>
&lt;p>[ INFO ] Starting engine service
[ INFO ] Restarting httpd
[ INFO ] Stage: Clean up
Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20150711225251-f9k7an.log
[ INFO ] Generating answer file &amp;lsquo;/var/lib/ovirt-engine/setup/answers/20150711225734-setup.conf&amp;rsquo;
[ INFO ] Stage: Pre-termination
[ INFO ] Stage: Termination
[ INFO ] Execution of setup completed successfully&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>安装成功，用浏览器，访问 ovirt 服务器 IP 地址使用 admin / 密码 登陆管理员控制台，第一次比较慢，验证安装是否完全成功。&lt;/p>
&lt;p>使用命令确认 nfs
[root@ovirt ~]# showmount -e
Export list for ovirt.xenlab.com:
/srv/ovirt/sata 192.168.10.0/24
/srv/ovirt/export 192.168.10.0/24
/srv/ovirt/iso 192.168.10.0/24&lt;/p>
&lt;p>在 ovirt 服务器中添加这三个存储，然后在命令和中确认 iso 存储已经可用。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@ovirt ~]# engine-iso-uploader list
Please provide the REST API password for the admin@internal oVirt Engine user (CTRL+D to abort):
ISO Storage Domain Name | Datacenter | ISO Domain Status
ovirt-iso | Default | active&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>把需要安装的光盘镜像文件，先复制到 ovirt 服务器上，然后传入 iso 存储。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[martin@martin-fedora iso]$ scp CentOS-7-x86_64-Minimal-1503-01.iso &lt;a class="link" href="mailto:root@192.168.10.25" >root@192.168.10.25&lt;/a>:/root/
The authenticity of host &amp;lsquo;192.168.10.25 (192.168.10.25)&amp;rsquo; can&amp;rsquo;t be established.
ECDSA key fingerprint is SHA256:KMGYLWZu14ZKaUwizIORgQ598Bpc0PKzNWF0qop2VAQ.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &amp;lsquo;192.168.10.25&amp;rsquo; (ECDSA) to the list of known hosts.
&lt;a class="link" href="mailto:root@192.168.10.25" >root@192.168.10.25&lt;/a>&amp;rsquo;s password:
CentOS-7-x86_64-Minimal-1503-01.iso 100% 636MB 90.9MB/s 00:07
[martin@martin-fedora iso]$&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>用这个命令上传光盘。
engine-iso-uploader upload -i ovirt-iso /root/CentOS-7-x86_64-Minimal-1503-01.iso&lt;/p>
&lt;p>之后就可以在控制台中创建虚拟机了。在 Web 界面上安装虚拟机，是需要安装客户的程序的，在 Fedora 22 笔记本中安装它们。
yum install spice-xpi virt-viewer&lt;/p>
&lt;p>点击新创建的虚拟机，启动之后，选择控制台，打开后，开始系统安装。&lt;/p>
&lt;h2 id="参考文档">参考文档&lt;/h2>
&lt;p>本文没有做截图，是由于以下参考文档都有相关截图和步骤说明；因此，在使用本文档的过程中，一定要同时打开这几篇文档。&lt;/p>
&lt;p>&lt;a class="link" href="http://www.ovirt.org/Quick_Start_Guide#Install_oVirt_Engine_.28Fedora.29%60" target="_blank" rel="noopener"
>http://www.ovirt.org/Quick&lt;em>Start_Guide#Install_oVirt_Engine&lt;/em>.28Fedora.29%60&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://jensd.be/?p=550" target="_blank" rel="noopener"
>http://jensd.be/?p=550&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://xrsa.net/2015/02/04/installing-ovirt-3-5-on-centos-7-hosted-engine/" target="_blank" rel="noopener"
>https://xrsa.net/2015/02/04/installing-ovirt-3-5-on-centos-7-hosted-engine/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://www.server-world.info/en/note?os=Fedora_22&amp;amp;p=kvm&amp;amp;f=8" target="_blank" rel="noopener"
>http://www.server-world.info/en/note?os=Fedora_22&amp;amp;p=kvm&amp;amp;f=8&lt;/a>&lt;/p></description></item><item><title>Boston 和 NYC 的 运动日志</title><link>https://martinliu.cn/2015/07/09/boston-nyc-running-log/</link><pubDate>Thu, 09 Jul 2015 15:42:07 +0000</pubDate><guid>https://martinliu.cn/2015/07/09/boston-nyc-running-log/</guid><description>&lt;p>很高兴能有机会跑在波士顿的一些地方，还骑行了两次。基本上也了解了这个城市，熟悉了运动的地形，领略了城市的风光，感受了这个城市的运动文化和气息。纽约的行程安排的它紧凑了，导致就跑了一次中央公园，给以后留下很多探索的空白。&lt;/p>
&lt;h2 id="波士顿的跑步">波士顿的跑步&lt;/h2>
&lt;h3 id="第一跑---12-公里">第一跑 - 12 公里&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_8/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_8-576x1024.jpg"
loading="lazy"
alt="0709_8"
>&lt;/a>&lt;/p>
&lt;p>推辞了饭局的夜跑，跑步过程中被阵雨浇透，找错了回来的桥，路程没有记录完整。&lt;/p>
&lt;h3 id="第二跑---8-公里">第二跑 - 8 公里&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_9/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_9-576x1024.jpg"
loading="lazy"
alt="0709_9"
>&lt;/a>&lt;/p>
&lt;p>本想跑的比前一次更远，结果起晚了，跑了 8 公里就被晒的不行，汗狂出，提前失去斗志，返回。这时感觉还是有跑友会更好些。&lt;/p>
&lt;h3 id="第三跑---10-公里">第三跑 - 10 公里&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_10/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_10-576x1024.jpg"
loading="lazy"
alt="0709_10"
>&lt;/a>&lt;/p>
&lt;p>陪同事满跑 10K，在一个海湾处，居然海湾是闭合的，跑了三圈，其实那个 Castle Island Park 有点意思，可惜没有进去。&lt;/p>
&lt;h3 id="第四跑---10-公里">第四跑 - 10 公里&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_11/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_11-576x1024.jpg"
loading="lazy"
alt="0709_11"
>&lt;/a>&lt;/p>
&lt;p>领略了市内最繁华的街道，最美的市中心公园，跑过了 林阴道，再次重温河边的感觉，这是下午下班后的跑步，不管你是什么时间，什么地点跑，基本上到处都是跑步的人。&lt;/p>
&lt;h2 id="波士顿骑行">波士顿骑行&lt;/h2>
&lt;h3 id="第一次--464-km">第一次   46.4 km&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/screenshot_2015-06-25-21-45-21/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/Screenshot_2015-06-25-21-45-21-576x1024.jpeg"
loading="lazy"
alt="Screenshot_2015-06-25-21-45-21"
>&lt;/a>&lt;/p>
&lt;p>自行车租金是 25 刀，下午开完会发现其它两个同伴时差严重，因此我独自骑行出去。骑行的方向其实是波士顿马拉松延伸的方向，只是那个路线是要在公路上的，车多没法骑行那个赛道，骑车出去闲逛，也超过了一个全马的距离，基本上把哈佛和 MIT 逛清楚了。&lt;/p>
&lt;h3 id="第二次-217-km">第二次 21.7 km&lt;/h3>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_12/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_12-576x1024.jpg"
loading="lazy"
alt="0709_12"
>&lt;/a>&lt;/p>
&lt;p>第二次，本来不想去，可是需要给伙伴去带路，就带他们走了一遍昨天的路，让他们也浏览了我看过的景点。&lt;/p>
&lt;h2 id="纽约跑步---中央公园-10km">纽约跑步 - 中央公园 10KM&lt;/h2>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-log/0709_14/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/0709_14-576x1024.jpg"
loading="lazy"
alt="0709_14"
>&lt;/a>&lt;/p>
&lt;p>中央公园打卡跑过，很满意的得到了这个路线，公园里里面的运动氛围很强，爽跑一圈。&lt;/p></description></item><item><title>首次美国东海岸之旅</title><link>https://martinliu.cn/2015/07/09/e9a696e6aca1e7be8ee59bbde4b89ce6b5b7e5b2b8e4b98be69785/</link><pubDate>Thu, 09 Jul 2015 14:31:15 +0000</pubDate><guid>https://martinliu.cn/2015/07/09/e9a696e6aca1e7be8ee59bbde4b89ce6b5b7e5b2b8e4b98be69785/</guid><description>&lt;h2 id="行程">行程&lt;/h2>
&lt;p>在波士顿的住宿是非常完美的体验。先住了两天剑桥的 LeMeridien（SPG）；由于 6 月是我的生日，因此酒店给我加了早餐，使用 IBM 的企业代码订房确实便宜了一大块。剩下几天住的 Westin Waterfront，和另外一个 SPG 白金卡同事同住，由于是白金卡，所以直接就给升级到套房了，当然附赠免费早餐；今房间一看，很大的两间房间，各自独立的电视和洗手间。&lt;/p>
&lt;p>说下在美国第一次做长途 BUS 的感受，我是在网上定的票。从波士顿到纽约 4 个多小时的路程，28$的价格。由于我记错了时间，同事开车送我去车站后，我看了票后，才惊醒，到达候车室的时候，我的那班车已经开车 15 分钟了。车票是电子邮件中的二维码。我问车站的工作人员，他说你需要去 standby 下一班车，下一班车要过 1 小时后发车，我到了那边 standby 的队列中。心里真是有点没谱，如果那个车上没有空位的话，我就残了。还好，开始上车时第一批是买了那班车票的人；第二批是 standby 的人，还好有空座位。最后一波是需要副现金上车，而没有买票的人，那部分人好像话了 50 多刀。在开车的过程中没有停车，车上居然有卫生间，就在车的尾部，我也用了一下，确实很方便，很干净。到了纽约之后，一下车我就走向最近地铁站开始了我的纽约之行。&lt;/p>
&lt;h2 id="波士顿">波士顿&lt;/h2>
&lt;p>波士顿有美国的雅典之称，到处透露着历史感，街道相当干净，气温体感非常舒服。这是一个运动的城市每年的波士顿马拉松比赛不知道吸引了多少人，作为一个跑步爱好者，我到此地也算是朝圣之旅了。到的第二天，就有 BAA 的 10 公里的比赛，我看到了才意识到，应该提前报名，说不定可以参加上呢！&lt;/p>
&lt;p>在波士顿我跑了三次。第一次本想早晨跑，提前规划好的路线，可是早晨下雨，没有跑成。结果晚上回来后，同事拉我去配客户吃饭，没去，夜跑了十二公里。在跑的中间下雨了，是阵雨，淋了我 20 多分钟，浑身湿透了，快回到酒店的时候雨停了。回来查跑步轨迹一看，还是跑错了路线，返回的桥还是选择错了，回程的路线基本正确。第二次跑步是早晨晨跑，起的有点晚，还是在查尔斯河边和前一次一样，这次看到了很多早晨练习划船的人，非常多的人在河上划着各种船，有些是有教练指导的，有些是自己联系的。第三次是和同事一起，在海边找了一个港口的地方，港口恰好是环形封闭的，跑了 3 圈，10 公里。第四次是开晚会去跑步，在市中心的酒店跑到城市中心公园，有跑回查尔斯河，然后返回，返回过程中遇到上坡下坡，一个人有点累，10 公里做罢。回程一边找路一边欣赏城市，也算是把波士顿城区看了仔细。剩下两次运动是骑行，这里骑行的人也很多。自己骑了一次，和同事一起骑行一次，一共 50 公里。顺便欣赏了哈佛和 MIT 学校的校园。&lt;/p>
&lt;p>波士顿的龙虾不可以不提，吃了三次，后两次在同一家吃的，这家专门做龙虾，吃的非常过瘾。&lt;/p>
&lt;h2 id="纽约">纽约&lt;/h2>
&lt;p>在纽约我住在 airbnb 的一个民宅里，主人是个南美小国的人，他没有工作；估计也是租来的房子，然后转祖一间卧室做房东，airbnb 算是让他也有钱赚，有生计了。这个公寓里中央公园很近，我去中央公园跑了一次，感觉非常好，那里有浓厚的运动气息，各种人在里面跑步，骑车，散步，骝狗。两次穿过中央公园都有看到跑步比赛。我买了一张 5 天的地铁票，算是用足了。去了很多景点，感受到了大纽约的感觉。现在感觉纽约一周可以逛的差不多，4 天根本不够。我最完美的两天是大都会博物馆和自由女神/爱丽丝岛。大都会博物馆里面我足足泡了一天，停没电了 3 个讲解器；直到人闭馆赶人，我才走，看了四分之三不到。真是有点走马观花，很多没有看仔细。自由女神像其实可以注册一下，就能够登到它的身体里，到达头部，从眼睛往外看，我也是去了才知道。爱丽丝岛值的仔细看，它是美国移民博物馆，看了它，彻底颠覆了我对美国移民的看法。&lt;/p>
&lt;p>时间有限，工作太忙，就这个流水帐，算是总结一下这次美国东岸之旅吧！&lt;/p>
&lt;h2 id="图片">图片&lt;/h2>
&lt;p>以下图片都是手机拍摄。&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53844,53845,53846,53847,53848,53849,53850,53851,53852,53853,53854,53855,53856,53857,53858,53859,53860,53861,53862,53863,53871,53865,53866,53867,53868,53869,53870,53873,53874,53877,53876,53875,53878&amp;rdquo;]&lt;/p></description></item><item><title>icinga2 企业级功能评测1</title><link>https://martinliu.cn/2015/07/09/icinga2-e4bc81e4b89ae7baa7e58a9fe883bde8af84e6b58b1/</link><pubDate>Thu, 09 Jul 2015 08:44:43 +0000</pubDate><guid>https://martinliu.cn/2015/07/09/icinga2-e4bc81e4b89ae7baa7e58a9fe883bde8af84e6b58b1/</guid><description>&lt;h2 id="icingaweb-2-用户权限管理">Icingaweb 2 用户权限管理&lt;/h2>
&lt;p>icingaweb 2 是诸多 GUI 中最新的一种，也有替代其它之前所有 GUI 的趋势，目前看还比较新，只有最基本的功能。登陆 Web 界面的用户，用户和组的信息可以使用自己的数据库存储或者配置文件存储，也可以使用外部的 LDAP 集成，使用 php-ldap 模块集成外部的 LDAP/MS AD 服务器。
具有完整的 RBAC 模式; User -&amp;gt; Group -&amp;gt; Role = Permission Set（操作 action） + monitoring/filter/objects(范围 scope)&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-group/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/Icinga-Web-create-group-1024x659.png"
loading="lazy"
alt="Icinga Web - create group"
>&lt;/a> &lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-role/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/Icinga-Web-create-role-1024x659.png"
loading="lazy"
alt="Icinga Web - create role"
>&lt;/a> &lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-create-user/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/Icinga-Web-create-user-1024x659.png"
loading="lazy"
alt="Icinga Web - create user"
>&lt;/a> &lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-web-assign-user-to-group/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/Icinga-Web-assign-user-to-group-1024x659.png"
loading="lazy"
alt="Icinga Web - assign user to group"
>&lt;/a>&lt;/p>
&lt;h2 id="icinga2-的联系人和联系人组">Icinga2 的联系人和联系人组&lt;/h2>
&lt;p>在 icinga2 服务器端，在配置文件中定义了组和用户，他们在 Web GUI 界面上叫做 Contacts / Contactgroups 。&lt;/p>
&lt;p>[bash]
[root@icinga2-test conf.d]# cat users.conf
/**&lt;/p>
&lt;ul>
&lt;li>The example user &amp;lsquo;icingaadmin&amp;rsquo; and the example&lt;/li>
&lt;li>group &amp;lsquo;icingaadmins&amp;rsquo;.
*/&lt;/li>
&lt;/ul>
&lt;p>object User &amp;ldquo;icingaadmin&amp;rdquo; {
import &amp;ldquo;generic-user&amp;rdquo;&lt;/p>
&lt;p>display_name = &amp;ldquo;Icinga 2 Admin&amp;rdquo;
groups = [ &amp;ldquo;icingaadmins&amp;rdquo; ]&lt;/p>
&lt;p>email = &amp;ldquo;&lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>&amp;rdquo;
}&lt;/p>
&lt;p>object UserGroup &amp;ldquo;icingaadmins&amp;rdquo; {
display_name = &amp;ldquo;Icinga 2 Admin Group&amp;rdquo;
}
[/bash]&lt;/p>
&lt;p>User / UserGruop 是 Icinga 出发通知的对象，定义在这个配置文件中，使用规则把他们和监控对象（host/service/等）关联起来，在通知规则中实现不同的通知策略。如发邮件等。&lt;/p>
&lt;h2 id="icinga2-的-ha-和分布式架构">Icinga2 的 HA 和分布式架构&lt;/h2>
&lt;p>&lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-cluster/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/icinga-cluster-1024x288.png"
loading="lazy"
alt="icinga-cluster"
>&lt;/a>&lt;/p>
&lt;p>icinga2 的 Cluster 是通过多个运行的实例配置在一起的，有这样几个特性：实例之间使用 SSL 的加密通信；彼此之间是双向连接；用 Zone 来分隔不同租户的配置域；基于 Hash 的负载分配；系统的各种功能组件由 Cluster 来管理其分布。它可以实现某个节点宕机后的自动分布监控数据采集命令在其它节点上的执行。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/icinga2-%e4%bc%81%e4%b8%9a%e7%ba%a7%e5%8a%9f%e8%83%bd%e8%af%84%e6%b5%8b1/icinga-zone/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/icinga-zone-1024x712.png"
loading="lazy"
alt="icinga-zone"
>&lt;/a>&lt;/p>
&lt;p>icinga2 Client 是远程执行的一种节点，它和 Cluster 中的所有节点形成群集，在数据中心的其它网段或者地点采集本地的监控状态数据，然后把结果传送回上级的 Cluster 群集节点。icinga2 可以通过配置向导完成远程 client/Satellite 卫星节点的配置。它们之间的通行是基于证书的 TLS 加密，这个证书可以借用 puppet 的证书。远程 Client/Satellite 节点可以运行在三种模式下：具有本地监控配置，没有本地监控配置，靠上级群集发送监控配置。&lt;/p>
&lt;p>其它企业级功能在后续文章中继续评测，您可以通过下面的评论，来提出您所关注的待评测功能。&lt;/p></description></item><item><title>Red Hat Summit之Paul的开源逻辑思维</title><link>https://martinliu.cn/2015/07/01/red-hat-summite4b98bpaule79a84e5bc80e6ba90e980bbe8be91e6809de7bbb4/</link><pubDate>Wed, 01 Jul 2015 06:52:00 +0000</pubDate><guid>https://martinliu.cn/2015/07/01/red-hat-summite4b98bpaule79a84e5bc80e6ba90e980bbe8be91e6809de7bbb4/</guid><description>&lt;p>应用为王，操作系统是心跳。从整个行业的角度，而不只是操作系统和某种工具的角度看，行业已经发生了重大的变化。下面是一些例证。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>VMWare 几年前说操作系统已死，可是最近却发布了 Linux 操作系统的容器技术的产品线。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>微软也把它的一些技术开源了，并且在这些方面取得了一些它们认为可喜的进展。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>IDC 的调查显示，数据中心的操作系统目前是两个主要选择：Linux 和 Windows。以上说明了：开源不再是非主流，而进入了数据中心主流技术，企业现在开发的应用将不得不在两种操作系统中做出选择。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_53819&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;800&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/cormier_keynote_800px.jpg"
loading="lazy"
alt="cormier_keynote_800px"
>](&lt;a class="link" href="http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/cormier_keynote_800px/" target="_blank" rel="noopener"
>http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/cormier_keynote_800px/&lt;/a>) Keynote 笔记[/caption]&lt;/p>
&lt;p>从这个角度出发，Red Hat 的使命才刚过开始，它中在用 Linux 和相关开源技术来变革整个企业数据中心的技术堆栈；从基础架构一直到应用开发。&lt;/p>
&lt;p>为何开源技术当今如此之火热？开源技术正在解决和处理现实社会中那些最复杂的业务问题。为什么会这样？驱动因素是什么？是动态变化的企业业务需求。&lt;/p>
&lt;p>开源技术最擅长的是快速地创新，这成为了企业技术创新和业务变革的动力，IT 也逐渐因此从成本中心转变为价值和创新中心。&lt;/p>
&lt;p>开源不仅仅只是看到源代码，更重要的：它是自由开放的平台，是分享的平台，它萌生了持续不断的创新，一个创新基于另外一个创新之上，一环接一环地扩散开来，根本停不下来。 这意味着技术问题能够被更快、更好地解决；而不是丢给私有软件技术厂商们各自独自解决，企业最等来消费他们的产品。&lt;/p>
&lt;p>Linux 是计算供给层，毫无疑问云计算和软件定义存储都基于它。它不能叫做一个 Linux 社区，而是一组相关的社区项目协作在一起共同创新，这样才带来了企业可以使用的高性能稳定的操作系统；这样 Red Hat 才有可能给企业带来企业级 Linux 操作系统。&lt;/p>
&lt;p>KVM 是计算的虚拟化抽象层，VMWare 最先进入这一企业市场，它试图用封闭的管理层和锁定的模式来控制这个市场，从而控制客户。Red Hat 的使命是：为企业提供了 Linux 操作系统和至上的开放虚拟化技术；企业可以在这个层面消费开源开放虚拟化技术，并做出备份的方案选择。&lt;/p>
&lt;p>没有 Linux 和开放虚拟化云计算就不存在。公有云提供商使用这些技术构建了共有云服务。可是企业不想让自己的业务运行在防火墙之外，因此 OpenStack 项目应运而生。它让企业构建私有云成为可能。Red Hat 在 OpenStack 上面所有的贡献都 100%的提交到社区，成为主流代码的一部分；从而 OpenStack 能够运行在 Red Hat Linux 和 KVM 之上，这使得 Red Hat 巨大的 Linux 生态系统的价值服务与 OpenStack 领域；企业能够借此放心地在 OpenStack 构建的私有云，并运行企业重要的业务。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/paul-keynote.jpg"
loading="lazy"
alt="paul-keynote"
>在开源的开发框架里，开发人员可以有更多、更新的开发语言、开发工具、库和社区的支持，这使他们能更快地解决业务问题。这些框架首先被广泛应用于互联网行业公司。Red Hat 基于 JBoss 社区为企业提供了企业级的应用服务器、集成工具、规则引擎和丰富的开发语言。让企业级应用能像互联网公司一样地使用开放应用所需的开发框架和开发平台。相比私有技术公司用了四十多年达到目前的程度，开源领域的快速创新用十几年就做到了，发展速度比私有软件快很多。&lt;/p>
&lt;p>现在看到了基础架构和开发框架都极大地受到了开源技术的影响、冲击和变革。运维和开发之间亟待出现一种融合技术，来改善目前的互为孤岛的现状。这种联系将使开源技术为他们带来最大的共同价值。&lt;/p>
&lt;p>容器技术实际上在操作系统中存在了很多年了，只是最近才被引入开源领域；它的出现将确实会改善孤岛问题，为开发人员解决了应用在各种混合的计算和存储平台之间的可移植性、一致性和敏捷性等问题。&lt;/p>
&lt;p>开发和运维之间的割裂还导致了业务创新的迟钝，这个问题已经持续存在很多很多年了。因此 Red Hat 发布了 Red Hat Atomic Enterprise Platform。让企业应用可以安全地在各种形式的计算平台上一致地运行。Red Hat 发布了 OpenShift v3 ，它是一些列容器的自动化调度和部署管理工具集合，并包含全套的开放应用开发框架平台。它能帮助企业基于容器技术发展出新一代的混合应用。&lt;/p>
&lt;p>为何企业 IT 技术会有这些变革？为何这些变革会发生？其实还是企业不得不快速地响应业务的变化，企业不得不使用 IT 技术来创造出更多的价值，应用开发不得不跟上需求变化的脚步，基础架构的运作和运维再也不允许我们手工地安装一台服务器，频繁地去手动更改网口跳线。企业必须面对和适应动态的业务变化，不光要从开发层面，同时从运维层面。&lt;/p>
&lt;p>企业需要构建和重写无状态的业务应用，并使用软件定义存储来解决传统存储的空间不能无限扩容的问题。Gluster 和 Ceph 在这方面已经日臻成熟，并或将去替换私有的传统存储技术。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/devops-in-practice/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/DevOps-in-practice-1024x574.png"
loading="lazy"
alt="DevOps-in-practice"
>&lt;/a>&lt;/p>
&lt;p>企业应用 DevOps 是一种趋势，它不是一个理论，而是一种实践。Red Hat 的全线企业级开源技术平台已经做好了准备，企业现在就可以开始 DevOps 实践之旅。&lt;/p>
&lt;p>开源和闭源之战将不可逆转地持续下去，Red Hat 将持续守护开源阵营。私有软件技术不愿意看到逐渐开放的变化，他们不希望开放，不愿意去分享；Pual 坚信开放不仅仅是看到代码而已，而是与之共生，是开放的软件开发流程，是基于开放代码上的不断创新活动。这是一场宏大的战役，开源逐渐开始在一些战斗中取胜，待到明年此时，或将看到开源是如何在企业 IT 基础架构上全面获胜的。&lt;/p>
&lt;p>本演讲的官方 Blog 报道：&lt;a class="link" href="http://summitblog.redhat.com/2015/06/24/paul-cormier-announces-new-products-and-technologies-at-red-hat-summit/" target="_blank" rel="noopener"
>http://summitblog.redhat.com/2015/06/24/paul-cormier-announces-new-products-and-technologies-at-red-hat-summit/&lt;/a>&lt;/p>
&lt;p>下面是演讲实况视频。&lt;/p></description></item><item><title>Boston Running #1 Charles River</title><link>https://martinliu.cn/2015/06/21/boston-running-1-charles-river/</link><pubDate>Sun, 21 Jun 2015 08:15:46 +0000</pubDate><guid>https://martinliu.cn/2015/06/21/boston-running-1-charles-river/</guid><description>&lt;p>时差如期而至，现在时本地时间清晨 3：40，我还是一点睡意也没用，百无聊赖中计划一下明天的跑步路线。根据 Boston 的 Garmin 的热力地图，我观察了一下 Clarles 河附近的跑步路线，看着很不错。计划明天早晨跑右侧的这一部分。如下图所示。
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/boston-charles-river-right-side.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/boston-charles-river-right-side-1024x559.jpg"
loading="lazy"
alt="boston-charles-river-right-side"
>&lt;/a>&lt;/p>
&lt;p>这部分是 Charles 河入海口的这个部分。从酒店出门大概的路线如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>从酒店 右拐 到 Sidney St + Massachusetts Ave， 在右拐一直到河边&lt;/p>
&lt;/li>
&lt;li>
&lt;p>到河边的桥头，右拐顺河边向东跑，一直跑到头&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在 Longfellow bridge 桥下，顺着 Edwin H Land Blvd 穿过该桥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>延河边来到 Museum of science 前，左拐，绕 Lechmere Canal Park，来到科学博物馆门前的路&lt;/p>
&lt;/li>
&lt;li>
&lt;p>经过 Charles 大坝这条路，到河的南岸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在 State Police 警察局门口右拐到河边，眼查尔斯河滨大道一直往西跑&lt;/p>
&lt;/li>
&lt;li>
&lt;p>经过 Boston University Bridge，继续向前跑&lt;/p>
&lt;/li>
&lt;li>
&lt;p>经过 Western Ave Bridge 继续向前跑&lt;/p>
&lt;/li>
&lt;li>
&lt;p>到了 John W. Weeks Bridge 上桥过河，到达河对岸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>进入 Dewolfe St， 到 Arrow St 右拐&lt;/p>
&lt;/li>
&lt;li>
&lt;p>跑回 Massachusetts Ave, 沿着街道一直跑回去&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>跑步的实际路线图和数据贴图如下。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/boston-running-1-charles-river/psb-2/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/psb.jpeg"
loading="lazy"
alt="psb"
>&lt;/a>&lt;/p></description></item><item><title>icinga2 监控工具评测</title><link>https://martinliu.cn/2015/06/18/icinga2-e79b91e68ea7e5b7a5e585b7e8af84e6b58b/</link><pubDate>Thu, 18 Jun 2015 14:14:51 +0000</pubDate><guid>https://martinliu.cn/2015/06/18/icinga2-e79b91e68ea7e5b7a5e585b7e8af84e6b58b/</guid><description>&lt;p>本来想写一个安装手册，可是安装完成之后发现其实非常简单，最后就把题目改为评测了。本文也不是全面的评测文章，关于它的能力和功能，待后续了解的深入了在继续更新本文。&lt;/p>
&lt;h2 id="icinga2-架构分析">icinga2 架构分析&lt;/h2>
&lt;p>请下载和查看这个 icinga2 官方的文档：[su_button url=&amp;ldquo;http://pan.baidu.com/s/1qW3JkJE&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; background=&amp;quot;#cccc00&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: cubes&amp;rdquo;]下载点这里[/su_button]&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/Selection_001.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/Selection_001-1024x542.png"
loading="lazy"
alt="Selection_001"
>&lt;/a>&lt;/p>
&lt;p>为什么用 icinga，原因如下：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: eye&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>Nagios 的架构不能扩展&lt;/li>
&lt;li>增加模块是比较困难的&lt;/li>
&lt;li>不是群集和分布式监控架构&lt;/li>
&lt;li>安全性相对糟糕&lt;/li>
&lt;li>配置功能有限&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;h2 id="安装配置">安装配置&lt;/h2>
&lt;p>icinga2 的安装可以说非常简洁，基本上配置好 yum 源，几条命令就装万了，而且就可以用了。只是在 web 界面选择和配置上稍微有点麻烦，它目前有三个可以安装配置的界面：classic, icinga-web, icinga-web2； classic 太老了，不具有极其强烈的怀旧情节，就别碰了。建议生产环境中还是使用 icinga-web；web2 太新了，很多集成的项目的都还没有做好，还比较初级，功能不完善。&lt;/p>
&lt;p>&lt;del>待续&lt;/del>~~&lt;/p></description></item><item><title>在 RHEL 7 上安装 Foreman 1.8</title><link>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</link><pubDate>Tue, 16 Jun 2015 16:25:34 +0000</pubDate><guid>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</guid><description>&lt;p>首先安装 RHEL7 使用光盘安装最小化系统，安装完成之后，关闭防火墙和 SELinux（为了测试方便），配置主机名为 FQDN 格式，如 fm1.8.xenlab.com； 加本机的主机名解析到/etc/hosts 文集中。之后注册到 RHN。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 ~]# subscription-manager register
[root@fm18 ~]# subscription-manager attach  &amp;ndash;auto
[root@fm18 ~]# subscription-manager repos &amp;ndash;disable=&amp;quot;*&amp;quot;
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-optional-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-server-rhscl-7-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-rpms
[root@fm18 ~]# rpm -ivh &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum clean all
[root@fm18 ~]# yum makecache
[root@fm18 ~]# yum update -y
[root@fm18 ~]# reboot
[root@fm18 ~]# yum install foreman-installer&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>安装 foreman-installer 可能会出现的错误是 ruby 包依赖的问题，导致这个问题的原因可能有：网速太满导致的 yum meta-data 失效，国外的 epel 源下载失败等。解决方法是：使用国内较快的 epel 源，在安装 foreman-installer 前，清除 yum 缓存，重新建立 yum 原数据缓存。&lt;/p>
&lt;p>我的测试机的 yum 源配置如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# yum repolist
Loaded plugins: fastestmirror, product-id, subscription-manager
Loading mirror speeds from cached hostfile&lt;/p>
&lt;ul>
&lt;li>epel: mirrors.neusoft.edu.cn
repo id repo name status
epel/x86_64 Extra Packages for Enterprise Linux 7 - x86_64 8,076
foreman/x86_64 Foreman 1.8 379
foreman-plugins/x86_64 Foreman plugins 1.8 199
puppetlabs-deps/x86_64 Puppet Labs Dependencies El 7 - x86_64 17
puppetlabs-products/x86_64 Puppet Labs Products El 7 - x86_64 175
rhel-7-server-optional-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server - Optional (RPMs) 5,832
rhel-7-server-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server (RPMs) 7,036
rhel-server-rhscl-7-rpms/7Server/x86_64 Red Hat Software Collections RPMs for Red Hat Enterprise Linux 7 Server 3,596
repolist: 25,310
[root@fm18 yum.repos.d]# cat /etc/yum.repos.d/epel.repo
[epel]
name=Extra Packages for Enterprise Linux 7 - $basearch
baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=1
gpgcheck=1
gpgkey=https://fedoraproject.org/static/352C64E5.txt&lt;/li>
&lt;/ul>
&lt;p>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
[epel-debuginfo]
name=Extra Packages for Enterprise Linux 7 - $basearch - Debug
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/$basearch/debug
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1&lt;/p>
&lt;p>[epel-source]
name=Extra Packages for Enterprise Linux 7 - $basearch - Source
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/SRPMS
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上应该是安装 foreman-installer 宝过的攻略了。接下来该安装 foreman 的各个组建和插件了。使用 foreman-installer -i 发现是个不错的方法。还可以顺便了解一下当前 foreman 版本的各个主要功能项，如下所示：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# foreman-installer -i
Welcome to the Foreman installer!&lt;/p>
&lt;hr>
&lt;p>This wizard will gather all required information. You can change any parameter
to your needs.&lt;/p>
&lt;p>Ready to start? (y/n) y&lt;/p>
&lt;p>Main Config Menu&lt;/p>
&lt;ol>
&lt;li>[✓] Configure foreman&lt;/li>
&lt;li>[✓] Configure foreman_cli&lt;/li>
&lt;li>[✗] Configure foreman_compute_ec2&lt;/li>
&lt;li>[✗] Configure foreman_compute_gce&lt;/li>
&lt;li>[✓] Configure foreman_compute_libvirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_openstack&lt;/li>
&lt;li>[✓] Configure foreman_compute_ovirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_rackspace&lt;/li>
&lt;li>[✗] Configure foreman_compute_vmware&lt;/li>
&lt;li>[✓] Configure foreman_plugin_bootdisk&lt;/li>
&lt;li>[✗] Configure foreman_plugin_chef&lt;/li>
&lt;li>[✓] Configure foreman_plugin_default_hostgroup&lt;/li>
&lt;li>[✗] Configure foreman_plugin_digitalocean&lt;/li>
&lt;li>[✓] Configure foreman_plugin_discovery&lt;/li>
&lt;li>[✗] Configure foreman_plugin_docker&lt;/li>
&lt;li>[✗] Configure foreman_plugin_hooks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_plugin_ovirt_provision&lt;/li>
&lt;li>[✗] Configure foreman_plugin_puppetdb&lt;/li>
&lt;li>[✗] Configure foreman_plugin_salt&lt;/li>
&lt;li>[✓] Configure foreman_plugin_setup&lt;/li>
&lt;li>[✓] Configure foreman_plugin_tasks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_templates&lt;/li>
&lt;li>[✓] Configure foreman_proxy&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_abrt&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_chef&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_pulp&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_salt&lt;/li>
&lt;li>[✓] Configure puppet&lt;/li>
&lt;li>Display current config&lt;/li>
&lt;li>Save and run&lt;/li>
&lt;li>Cancel run without Saving
Choose an option from the menu&amp;hellip;&lt;/li>
&lt;/ol>
&lt;p>[root@fm18 yum.repos.d]# puppet agent &amp;ndash;test
Info: Retrieving pluginfacts
Info: Retrieving plugin
Info: Caching catalog for fm18.xenlab.com
Info: Applying configuration version &amp;lsquo;1434466089&amp;rsquo;
Notice: Finished catalog run in 0.21 seconds
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>输入数字即可进入每个选项打开和关闭这个功能和服务，这个是对 foreman 的功能配置管理，不光是首次安装可以使用，以后的服务器功能变更也可以这么作，这个对我这样不感冒 answerfile 的人来说甚好。如果是首次安装，可以什么都不选择，来一个说装就装的默认安装也不错。安装完全成功之后，就会显示登陆网址和 管理与密码等信息。用初始的 admin 密码登陆后，修改密码，你的全新的 foreman 就安装成功了。注意在，运行 foreman-installer 过程中是需要联网的，安装过程会按照需求，下载所需要的组建包，例如数据库和 web 服务器等等其它必须的包。登陆后界面如下：&lt;/p>
&lt;p>[gallery size=&amp;ldquo;medium&amp;rdquo; link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53781,53782,53783&amp;rdquo;]&lt;/p>
&lt;p>接下来需要作配置自动化的测试了，我做了一个录像，通过一个简单的示例来说明，如何在 foreman 中测试 pupput module。过程中我使用一个最简单的 /etc/motd 文件的配置的类。演示的内容涉及：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: check-square&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>安装 puppet module 到生产环境中&lt;/p>
&lt;/li>
&lt;li>
&lt;p>导入并且定制 puppet 类的功能&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试和验证 puppet 类是否工作正常&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>视频下载：[su_button url=&amp;ldquo;http://pan.baidu.com/s/1ntpBXfN&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; background=&amp;quot;#cccccc&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]下载在这里[/su_button]&lt;/p>
&lt;p>本文参考文档：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="http://theforeman.org/manuals/1.8/index.htm" target="_blank" rel="noopener"
>http://theforeman.org/manuals/1.8/index.htm&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://itgeeker.net/centos-7-epel-china-mirror-repository/" target="_blank" rel="noopener"
>http://itgeeker.net/centos-7-epel-china-mirror-repository/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>用 powertop 给笔记本电脑省电</title><link>https://martinliu.cn/2015/06/13/e794a8-powertop-e7bb99e7ac94e8aeb0e69cace794b5e88491e79c81e794b5/</link><pubDate>Sat, 13 Jun 2015 14:27:17 +0000</pubDate><guid>https://martinliu.cn/2015/06/13/e794a8-powertop-e7bb99e7ac94e8aeb0e69cace794b5e88491e79c81e794b5/</guid><description>&lt;p>如何安装：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>sudo dnf install powertop&lt;/p>
&lt;p>sudo powertop&lt;/p>
&lt;p>sudo systemctl start powertop.service&lt;/p>
&lt;p>sudo systemctl enable powertop.service&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53761,53762,53763,53764,53765&amp;rdquo;]&lt;/p>
&lt;p>使用 Tab 和 shift + tab 键在以上屏幕直接切换。&lt;/p>
&lt;p>我发现我主要使用 Tunables 这个 tab 来找出可以安全关闭的设备服务。以上测试是在我目前的 Fedora 22 on Lenovo T440s 上作的。&lt;/p>
&lt;p>本文参考：&lt;a class="link" href="http://fedoramagazine.org/saving-laptop-power-with-powertop/" target="_blank" rel="noopener"
>http://fedoramagazine.org/saving-laptop-power-with-powertop/&lt;/a>&lt;/p></description></item><item><title>在CentOS 7上安装部署Katello2.2</title><link>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</link><pubDate>Sun, 07 Jun 2015 16:35:05 +0000</pubDate><guid>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</guid><description>&lt;p>Katello 的系统架构如下图：&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/katello-arch-diagram.png"
loading="lazy"
alt="katello-arch-diagram"
>&lt;/p>
&lt;p>Katell 系统是一个复合型开源项目，是 Pulp, Candlepin 和 Foreman 的组合。Foreman 默认使用 Puppet 作配置管理。&lt;/p>
&lt;p>它的安装文档见官方手册：&lt;a class="link" href="http://www.katello.org/docs/2.2/installation/index.html" target="_blank" rel="noopener"
>http://www.katello.org/docs/2.2/installation/index.html&lt;/a>&lt;/p>
&lt;p>为了简化安装，请下在本站提供的 CentOS7 完美安装模板。使用它来创建一个虚拟机，6GB 内存，2VCPU；网络上为了方便，请在 virt-manger 中新建如下所示的网络。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/QEMU-KVM-Connection-Details_006.png"
loading="lazy"
alt="QEMU-KVM Connection Details_006"
>&lt;/p>
&lt;p>虚拟机启动之后，确保 host 能正常联网。启动刚才创建的虚拟机，配置好 IP，ping 外网网站，确保它能正常联网即可。其它安装命令如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>yum -y localinstall &lt;a class="link" href="http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm" target="_blank" rel="noopener"
>http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&lt;/a>
yum -y install foreman-release-scl&lt;/p>
&lt;p>yum -y install katello&lt;/p>
&lt;p>katello-installer -v &lt;br>
&amp;ndash;foreman-admin-username admin &lt;br>
&amp;ndash;foreman-admin-password smartvm &lt;br>
&amp;ndash;capsule-dns true &lt;br>
&amp;ndash;capsule-dns-interface eth0 &lt;br>
&amp;ndash;capsule-dns-zone xenlab.com &lt;br>
&amp;ndash;capsule-dns-forwarders 192.168.10.1 &lt;br>
&amp;ndash;capsule-dns-reverse 10.168.192.in-addr.arpa &lt;br>
&amp;ndash;capsule-dhcp true &lt;br>
&amp;ndash;capsule-dhcp-interface eth0 &lt;br>
&amp;ndash;capsule-dhcp-range &amp;ldquo;192.168.10.100 192.168.10.240&amp;rdquo; &lt;br>
&amp;ndash;capsule-dhcp-gateway 192.168.10.1 &lt;br>
&amp;ndash;capsule-dhcp-nameservers 192.168.10.10 &lt;br>
&amp;ndash;capsule-tftp true &lt;br>
&amp;ndash;capsule-tftp-servername $(hostname) &lt;br>
&amp;ndash;capsule-puppet true &lt;br>
&amp;ndash;capsule-puppetca true&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上的安装命令如果成功，katello 服务器将具有一下功能：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Foreman 服务器：用于自动化网络安装 linux 系统&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Puppet Master 服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Repos 管理服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DNS，DHCP，PXE 服务器&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>安装成功之后，使用默认的用户名和密码就可以登陆了。&lt;/p></description></item><item><title>安装完美 CentOS7 虚拟机模板</title><link>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</link><pubDate>Fri, 05 Jun 2015 15:44:52 +0000</pubDate><guid>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</guid><description>&lt;h2 id="初始化安装">初始化安装&lt;/h2>
&lt;p>下载最新版 CentOS7 DVD 选择 mini 安装。&lt;/p>
&lt;h2 id="网络配置">网络配置&lt;/h2>
&lt;p>安装过程中设置了静态网络地址，如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0
TYPE=Ethernet
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=no
NAME=eth0
DEVICE=eth0
ONBOOT=yes
DNS1=192.168.10.1
DOMAIN=xenlab.com
IPADDR=192.168.10.8
PREFIX=24
GATEWAY=192.168.10.1
UUID=5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="软件包">软件包&lt;/h2>
&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>yum install wget &lt;a class="link" href="http://itgeeker.net/tag/telnet/" target="_blank" rel="noopener"
>telnet&lt;/a> perl perl-devel net-tools kernel-devel&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install vim-enhanced.x86_64&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum -y install git&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install acpid&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install tree&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install ntp&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install unzip&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="repo-软件更新源">Repo 软件更新源&lt;/h2>
&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>初始化安装，添加了个几个国内的源&lt;/p>
&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;p>rpm -Uvh &lt;a class="link" href="http://rpms.famillecollet.com/enterprise/remi-release-7.rpm" target="_blank" rel="noopener"
>http://rpms.famillecollet.com/enterprise/remi-release-7.rpm&lt;/a>&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>/etc/yum.repo/bk/dvd.repo ；这个是在用 KVM 虚拟机挂 ISO 文件光驱的时候用的，到时候 mount /dev/cdrom /media/dvd , 把该文件方的夫目录中即可使用 iso 文件中的 repos&lt;/p>
&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;p>当前的软件源如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp ~]# yum repolist
Loaded plugins: fastestmirror
Repository base is listed more than once in the configuration
Repository updates is listed more than once in the configuration
Repository extras is listed more than once in the configuration
Repository centosplus is listed more than once in the configuration
Loading mirror speeds from cached hostfile&lt;/p>
&lt;ul>
&lt;li>base: mirrors.163.com&lt;/li>
&lt;li>epel: mirrors.neusoft.edu.cn&lt;/li>
&lt;li>extras: mirrors.btte.net&lt;/li>
&lt;li>remi-safe: remi.kazukioishi.net&lt;/li>
&lt;li>updates: mirrors.btte.net
repo id                                 repo name                                                                          status
base/7/x86_64                           CentOS-7 - Base                                                                    8,652
epel/x86_64                             Extra Packages for Enterprise Linux 7 - x86_64                                     8,022
extras/7/x86_64                         CentOS-7 - Extras                                                                    128
remi-safe                               Safe Remi&amp;rsquo;s RPM repository for Enterprise Linux 7 - x86_64                           123
updates/7/x86_64                        CentOS-7 - Updates                                                                   609
repolist: 17,534
[root@centos7-tmp ~]#&lt;/li>
&lt;/ul>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="系统服务配置">系统服务配置&lt;/h2>
&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>关闭 SELinux&lt;/p>
&lt;/li>
&lt;li>
&lt;p>关闭 NetworkManager&lt;/p>
&lt;/li>
&lt;li>
&lt;p>关闭 FirewallD&lt;/p>
&lt;/li>
&lt;li>
&lt;p>systemctl enable acpid.service&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开启 truned-adm virtual-guest 服务模式&lt;/p>
&lt;/li>
&lt;li>
&lt;p>systemctl enable ntpd&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp tuned]# tuned-adm  list
Cannot talk to Tuned daemon via DBus.
Available profiles:&lt;/p>
&lt;ul>
&lt;li>balanced&lt;/li>
&lt;li>blog&lt;/li>
&lt;li>latency-performance&lt;/li>
&lt;li>network-latency&lt;/li>
&lt;li>network-throughput&lt;/li>
&lt;li>powersave&lt;/li>
&lt;li>throughput-performance&lt;/li>
&lt;li>virtual-guest&lt;/li>
&lt;li>virtual-host
Cannot talk to Tuned daemon via DBus.
It seems that tuned daemon is not running, preset profile is not activated.
Preset profile: virtual-guest&lt;/li>
&lt;/ul>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="模板文件封装">模板文件封装&lt;/h2>
&lt;p>用 sys-unconfig 关机。用 virt-sysprep,  virt-sparsify 去除不必要信息，压缩。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@martin-fedora vm]# ll -h
total 12G
-rw-r&amp;ndash;r&amp;ndash;  1 qemu qemu  81G Jun  5 22:36 centos7-tmp.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  5 22:34 centos7-tmp.qcow2.bk
-rw-r&amp;ndash;r&amp;ndash;  1 root root 2.9G Jun  5 07:56 rhel66-clone-1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 1.6G Jun  3 15:01 rhel66-clone.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  3 13:03 rhel66.qcow2
-rw-r&amp;ndash;r&amp;ndash;. 1 root root  81G Jun  1 00:59 rhel71.qcow2
[root@martin-fedora vm]# export TMPDIR=/home/martin
[root@martin-fedora vm]# virt-sparsify &amp;ndash;compress centos7-tmp.qcow2 centos7-tmp-v1.qcow2
Input disk virtual size = 85899345920 bytes (80.0G)
Create overlay file in /home/martin to protect source disk &amp;hellip;
Examine source disk &amp;hellip;
Fill free space in /dev/centos/root with zero &amp;hellip;
100% ⟦▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒⟧ 00:00
Clearing Linux swap on /dev/centos/swap &amp;hellip;
100% ⟦▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒⟧ 00:00
Fill free space in /dev/sda1 with zero &amp;hellip;
Fill free space in volgroup centos with zero &amp;hellip;
Copy to destination and make sparse &amp;hellip;&lt;/p>
&lt;p>Sparsify operation completed with no errors.  Before deleting the old disk,
carefully check that the target disk boots and works correctly.
[root@martin-fedora vm]# ll -h
total 12G
-rw-r&amp;ndash;r&amp;ndash;  1 qemu qemu  81G Jun  5 22:36 centos7-tmp.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  5 22:34 centos7-tmp.qcow2.bk
-rw-r&amp;ndash;r&amp;ndash;  1 root root 520M Jun  5 23:11 centos7-tmp-v1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 2.9G Jun  5 07:56 rhel66-clone-1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 1.6G Jun  3 15:01 rhel66-clone.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  3 13:03 rhel66.qcow2
-rw-r&amp;ndash;r&amp;ndash;. 1 root root  81G Jun  1 00:59 rhel71.qcow2&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="yum-update--y">yum update -y&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>2015-07-10 : Done yum updated. 删除了不需要的 Kernel，安装了 unzip, 修改启动过程为直接文字启动。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>2015-11.15: update kernel to 7.1, set old kernel 1: package-cleanup &amp;ndash;oldkernels &amp;ndash;count=1&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="使用方法">使用方法&lt;/h2>
&lt;p>root 密码 martinliu.cn 开机后记得一定要先修改。&lt;/p>
&lt;p>百度网盘下载地址 [su_button url=&amp;ldquo;http://pan.baidu.com/s/1pJurap9&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: codepen&amp;rdquo;]centos7-tmp-v7[/su_button]&lt;/p></description></item><item><title>Achilles的脚后跟</title><link>https://martinliu.cn/2015/06/04/achillese79a84e8849ae5908ee8b79f/</link><pubDate>Thu, 04 Jun 2015 05:15:53 +0000</pubDate><guid>https://martinliu.cn/2015/06/04/achillese79a84e8849ae5908ee8b79f/</guid><description>&lt;p>今天是红帽服务团队深圳 Bootcamp 的最后一天，我是最后一个 session 的演讲者，讲的内容是补丁管理，这是个老生常谈的话题，看看我怎么构思和解读的。&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/Patch-Management.pdf&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;2&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]PPT 下载在这里[/su_button]&lt;/p>
&lt;p>主要思路还是把目前的相关知识梳理一边。特别是借鉴了公司安全大师 Shawn 的一些内容。&lt;/p>
&lt;h2 id="玩好防塔游戏">玩好防塔游戏&lt;/h2>
&lt;p>把操作系统的该打的补丁都打好，避免已知漏洞的暴露。&lt;/p>
&lt;h2 id="做好安全加固">做好安全加固&lt;/h2>
&lt;p>修补 Achilles 的脚后跟，是说把安全配置基线落实到系统中，并行成为长效保持机制。&lt;/p>
&lt;p>其实这些还是和配置管理有关和 CMDB 有关，真是老生常谈呵呵&lt;/p></description></item><item><title>Fedora 22 使用体验不错</title><link>https://martinliu.cn/2015/05/28/fedora-22-e4bdbfe794a8e4bd93e9aa8ce4b88de99499/</link><pubDate>Thu, 28 May 2015 16:02:23 +0000</pubDate><guid>https://martinliu.cn/2015/05/28/fedora-22-e4bdbfe794a8e4bd93e9aa8ce4b88de99499/</guid><description>&lt;p>下面是随手的几个截图。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/ss01.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/ss01-1024x576.jpg"
loading="lazy"
alt="ss01"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/ss02.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/ss02-1024x576.jpg"
loading="lazy"
alt="ss02"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/2015-05-28-23-28-49-%e7%9a%84%e5%b1%8f%e5%b9%95%e6%88%aa%e5%9b%be1.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/2015-05-28-23-28-49-%e7%9a%84%e5%b1%8f%e5%b9%95%e6%88%aa%e5%9b%be1-1024x576.png"
loading="lazy"
alt="2015-05-28 23-28-49 的屏幕截图"
>&lt;/a>&lt;/p>
&lt;p>一部分 F22 新功能评测在这里&lt;a class="link" href="http://fedoramagazine.org/whats-new-fedora-22-workstation/" target="_blank" rel="noopener"
> http://fedoramagazine.org/whats-new-fedora-22-workstation/&lt;/a>&lt;/p></description></item><item><title>我已经很久没用ppt了</title><link>https://martinliu.cn/2015/05/24/e68891e5b7b2e7bb8fe5be88e4b985e6b2a1e794a8ppte4ba86/</link><pubDate>Sun, 24 May 2015 15:08:31 +0000</pubDate><guid>https://martinliu.cn/2015/05/24/e68891e5b7b2e7bb8fe5be88e4b985e6b2a1e794a8ppte4ba86/</guid><description>&lt;p>Kenote 的在我的工作中已经完全替代 PPT 了。其实我的电脑上还有 LiberOffice，不过要编写什么 ppt，还是必须要使用 Keynote，这可能就是所谓的由奢入俭难吧，哈哈！&lt;/p>
&lt;p>通常做完的 Slides，还需要导出成 ppt 和 pdf 格式，然后上传到网盘上，一般在讲完当天，就最好能通过微信把下载链接发给用户。想想十多年来也做了至少上万页的 ppt，可恶的事工作性质其实还没有太大变化。&lt;/p>
&lt;p>现在看着这个课程，有点想法是：是否有必要把自己的重要的 ppt 也录制成课程，做系列的播出。没准也能卖出几千份哈哈&lt;/p></description></item><item><title>Fedora 22 将于5月26日发布</title><link>https://martinliu.cn/2015/05/24/fedora-22-e5b086e4ba8e5e69c8826e697a5e58f91e5b883/</link><pubDate>Sun, 24 May 2015 08:37:06 +0000</pubDate><guid>https://martinliu.cn/2015/05/24/fedora-22-e5b086e4ba8e5e69c8826e697a5e58f91e5b883/</guid><description>&lt;p>No Content Found&lt;/p></description></item><item><title>RedHat互联网平台解决方案</title><link>https://martinliu.cn/2015/05/17/redhate4ba92e88194e7bd91e5b9b3e58fb0e8a7a3e586b3e696b9e6a188/</link><pubDate>Sun, 17 May 2015 06:29:33 +0000</pubDate><guid>https://martinliu.cn/2015/05/17/redhate4ba92e88194e7bd91e5b9b3e58fb0e8a7a3e586b3e696b9e6a188/</guid><description>&lt;p>ppt 点这里下载：[su_button target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;2&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]下载[/su_button]&lt;/p>
&lt;p>参考文档：
AS 深圳 2014 演讲 PPT 最终稿   &lt;a class="link" href="http://pan.baidu.com/s/1i3KQFRJ" target="_blank" rel="noopener"
>http://pan.baidu.com/s/1i3KQFRJ&lt;/a>
QCon 北京 2015（PPT） &lt;a class="link" href="http://pan.baidu.com/s/1sj2t1yl" target="_blank" rel="noopener"
>http://pan.baidu.com/s/1sj2t1yl&lt;/a>
这两个目录里面干货还是不少，可以下载了慢慢看。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/redhat-sulution.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/redhat-sulution.jpg"
loading="lazy"
alt="redhat-sulution"
>&lt;/a>&lt;/p>
&lt;p>学习了一写文档后，逐渐对互联网公司的架构挑战需求和现状有了一些了解。下面先聊下这方面的一些理解。&lt;/p>
&lt;h1 id="中国规模交易量">中国规模交易量&lt;/h1>
&lt;p>什么叫中国规模交易量，以淘宝 2014-11-11 双十一当天的数据举例：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: rocket&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>交易创建     80000 笔/秒&lt;/li>
&lt;li>支付     38000 笔/秒&lt;/li>
&lt;li>24 小时完成交易额 571 亿元人民币 // 93 亿美元&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>乍一看这个数字可能没什么感觉，可以比较一下美国的情况。全美所有的传统商场在“黑色星期五”一天的销售也仅为 91 亿美元，即使加上网络销售的 24 亿美元也比天猫“双十一”多不了太多。也就是说，美国黑五当天全网的电商是中国淘宝/天猫一家的四分之一。&lt;/p>
&lt;p>因此中国人口基数大，网民数量大，假如您能激起大众的兴趣的话，你是不缺访问量的。对于意外的大规模的峰值访问量的处理，如果系统架构和应用没有提前经过特别的架构调整、优化；用膝盖都能想到系统挂掉、基础架构崩溃、交易数据出错是必然的事情。&lt;/p>
&lt;p>理解到这个潜在的风险、需求和调整，我们所有设计和从事 IT 基础架构技术服务的人，可以想想，不向前看，不向 BAT 学习，不站在他们的肩膀上设计和调整自己的应用的话。想保证系统平安，除非业务是失败的业务（没有流量），否则没有平安可言。&lt;/p>
&lt;h1 id="架构特点">架构特点&lt;/h1>
&lt;p>且不说马云家系统已经多么牛叉，我们看下京东的架构，我们也可以看到其架构设计在两个维度都非常清晰到位。业务架构维度上尽可能的松耦合，所有业务单元分解清晰，貌似莫名的遵循了分布式架构的要求；这样每个业务单元都可以对 IT 资源的消耗联动，弹性的供给必要的业务处理能力。IT 架构维度上分解为三个层次：应用架构、数据架构、基础架构。基本上 JD 的这个 PPT 改变了我对这个企业的印象。从我的职业经验告诉我，这份 PPT 中规中矩，比较专业，堪称教科书式的架构设计。相对马云家的架构师的 PPT 图画的比较豪放，风格不同。JD 这份 PPT 下载在这里。&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://pan.baidu.com/s/1o6MI0t0&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;2&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]AS 深圳 2014 京东架构设计-吴博[/su_button]&lt;/p>
&lt;p>除了分层细致设计业务架构之外，我们还能看到，电商公司多使用多数据中心多活的模式并发处理海量交易量，每个数据中心都可以处理全业务，都能在灾备和并行处理上一石二鸟。这和我们高贵的传统企业不同，他们往往可以实现同城双中心运行，异地数据中心往往是灾备中心；有些灾备切换并不是全业务的切换，有些灾备中只用于灾备切换演练，并不真的运行业务；有些异地灾备中心也会和主数据中心中的一部分业务做周期性的切换运行。这些高贵的客户往往把核心的数据放在主机上，这在他们想扩展到 3 个或者更多个数据中心的时候，略显尴尬；新增的数据中心也要配置一套新主机系统么？新的主机上数据和应用怎样快速迁移过来？需要多长时间？数据同步的和其他两个数据中心一致么？这些问题的回答都不简单？主机硬件固然是贵？但是所有问题都解决周全的话，可能更贵。&lt;/p>
&lt;p>全新的纯 X86 的架构就在面前，BAT 已经证明了它和开源技术组合在一起就是多快好省的架构。因此，IT 架构的转型也成了必然选择。试想转型之后的机房，每个机架都是标准化的工作单元，它可能是几种类型：纯物理机计算节点、纯虚拟机计算节点（服务器虚拟化或者 OpenStack 等）、纯物理机存储节点（软件定义存储）；或运行容器的物理机或者虚拟机。另外机架上的网络设备和核心网络设备必然有他们自己的设计。这是我的一个猜测，有机会还需要和 BAT 的人多了解。&lt;/p>
&lt;h1 id="开源技术">开源技术&lt;/h1>
&lt;p>BAT 用到的开源技术真的是不甚枚举，也没有必要逐一分析。基本上各个领域里从开发堆栈、到架构堆栈和运维管理堆栈；各个方面的前几位的项目都有实践和应用。&lt;/p>
&lt;h1 id="红帽">红帽&lt;/h1>
&lt;p>那么红帽的互联网平台解决方案是什么？红帽的定位是基础架构技术厂商，因此红帽的全套技术框架就是它的互联网解决方案。如下图所示。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png"
loading="lazy"
alt="Red-Hat-open-hybrid-cloud-1000x563_0"
>&lt;/a>&lt;/p>
&lt;p>有些产品模块需要稍微说明一下，方便和开源项目对应起来。&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: linux&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>Red Hat Storage server / ICE : Gluster, Ceph&lt;/li>
&lt;li>Red Hat Enterprise Linux : Fedora Linux&lt;/li>
&lt;li>RHEV-M : Ovirt - 服务器虚拟化&lt;/li>
&lt;li>RHELOSP ： OpenStack 企业版 IaaS 平台&lt;/li>
&lt;li>OpenShift ：OpenShift 社区&lt;/li>
&lt;li>JBoss : JBoss 社区&lt;/li>
&lt;li>Satellite ： Puppet + Foreman 等等其它配置管理工具&lt;/li>
&lt;li>CloudForms ：CloudForms 社区 - 混合云管理&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>红帽的技术支持范围还包括很多操作系统内的功能组件，包括：HA-Proxy，LVS，MySQL 等等。在技术面的广度上，并不限于以上框架图。不过那幅图是全堆栈的最简易的展示。&lt;/p></description></item><item><title>OpenStack Enterprise Ready</title><link>https://martinliu.cn/2015/05/14/openstack-enterprise-ready/</link><pubDate>Thu, 14 May 2015 16:36:27 +0000</pubDate><guid>https://martinliu.cn/2015/05/14/openstack-enterprise-ready/</guid><description>&lt;h2 id="不是好不好而是用不用">不是好不好，而是用不用？&lt;/h2>
&lt;p>要说 OpenStack 的优点，技术人员能说出一堆词汇，如开源、弹性、稳定、可扩展、迅速搭建私有云、对硬件要求不高、解耦、能快速扩展新业务等等。但实际应用的案例为何这么少。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>国内传统企业用的少，互联网公司用了不少了，创业公司捣鼓 OpenStack 部署公有云服务的业务也不少了，总体看 OpenStack 水平高的人不在数量巨大的传统企业里，当前人员也不存在这个流向，更重要的是传统企业没有合适的在 OpenStack 上跑的 workload。因此少。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>一个数据是，这两年计划部署 OpenStack 的企业为 84%，可见大多数企业仍观望。这问题出在哪里？&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>原因同上。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>技术仍旧是问题。OpenStack 的问题是半年快速迭代，发布新产品，速度太快，老版本跟不上。理论上，新版本向下兼容。但在一些版本较大改动，加入新的功能时，如果企业已经深度应用了旧版本，可能面临技术无法升级，或者需要重度开发的问题。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>开发改动大么？那些地方大改动了？深度开发的部分是什么组件？是遵循了向下一个版本兼容的原则了么？代码提交会社区了么？OpenStack 社区版升级了，企业就一定要升级旧的版本么？什么情况下升级版本？什么情况下打补丁知道么？OpenStack 是云操作系统，我们看到的常见的开发场景是：界面友好度的调整、虚拟机功能的增强、辅助管理功能的增加等等。如果基于某个版本把这些附加功能开发出来了，其实业务需求清晰和随后调整不大的话，其实是可以用一定时间的。升级有两个原因：修复 bug，增加新版本的功能。我见过创业公司把之前开发的东西一次一次废掉重来的情况，主要原因还是他们首先不能提交代码会社区，其次开发的东西不是外挂式和主框架松耦合的。企业面对开发是谨慎的，往往不会在投入大量功能评估后，在清晰的需求下二次开发。二次开发做的多得还是想做 OpenStack 生意的创业公司，而传统企业的这些金主客户，我感觉他们还真没有这个需求和闲工夫。因此开发重，不能平滑进入下一代新版本不是用的少和不用的原因。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>另外与企业规模有关。多大企业需要使用 OpenStack，需要部署在哪些生产环境，是否是全面替代，还是迁移，包括从 VMware 迁移到 OpenStack，或者是新应用局部部署 OpenStack？这些不考虑清楚，没办法应用。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>这是一个很普遍的误区，太多人这么想了。从 VMWare 迁移到 OpenStack 真的这么重要么？真的存在这个场景了？服务器虚拟化和 OpenStack 是两种同类型的基础架构技术。服务器虚拟化跑传统的有状态应用；OpenStack 跑需要弹性扩展的无状态应用。有状态应用不适合跑在 OpenStack 上。也不太可能不做任何改变就能适应 OpenStack 环境。企业的无状态应用少，但这是一个发展过程和阶段。原因在于无状态应用和合适在 OpenStack 上跑得 workload 太少了。企业目前的应用 workload 是因，OpenStack 部署少是果。不存在 OpenStack 替代服务器虚拟化的事情，他俩会并存很长时间，不是非黑即白的替代逻辑。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>当前看，对企业应用需求的评估太少，大多是 IT 产业（厂商）一头热，鼓吹 OpenStack 太好，反而令人生疑。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>说的好就怀疑了？这里说的应用需求评估有两方面。或者两个理解方向。这里可能是说 OpenStack 功能性方面，客观的讲，当一个技术在风口上的时候，说好话的多，这是客观规律，多年前服务器虚拟化也这样，现在热度低了，它再发新版本大家连个搭理的功夫都没有了，也没有啥评测文章出来，这都是自然规律。OpenStack 也有失去热捧的那天，我最近看了一些基于它创业的技术型公司也都在反思和总结经验中。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;h2 id="怎么用谁来带头">怎么用，谁来带头？&lt;/h2>
&lt;p>当前案例也有，如电信运营商阿尔卡特朗讯（名字太长，以后会不会再加上西门子诺基亚）、诺基亚、西班牙电信；汽车领域宝马汽车、银行企业西班牙 BBVA、传媒领域时代华纳有线等。这些企业具有标杆意义，不具有示范效应。企业规模不一样，生产环境不同，这是最大的不同。这些案例最明显的是以信息为核心资源的企业，IT 系统建设较为完善和复杂，有意愿、有钱尝试新的 IT 技术。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>规模、环境、以信息为核心资源、IT 成熟、有意愿、有钱；这些都不能说成是中外企业 IT 的差异，也完全和是否用 OpenStack 无关的因素。我朝存在大量的传统大型企业，都已经排名全球 100 强了，很多是我们的客户。它们的市值比以上公司大得多。举个例子：CCB 的市值是 2015 年 4 月 30 日 - 成交量 4.88 亿股 市值 18,151.51 亿；宝马的市值是 2012 年 12 月 宝马市值增至奔驰两倍 达 3700 亿元；这么高大上制造型企业，连 CCB 的零头都不如。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>总体看，当前应用较多的是 IT 产公司（包括互联网公司），国内互联网公司如去哪儿、携程等公司都有应用。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>传统的金融部门呢，我国核心的制造企业呢？可能本人孤陋寡闻，如果多一些传统企业的案例会好一些。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>做过 OpenStack 测试的，验证过功能的很多，包括我以前了解的 CloudStack 的测试和评估也很多。金融行业企业它们都懂 OpenStack，甚至有些做定制开发的也有。这些作者可能确实看不到。他们已经准备好了，时间到了，无状态的合适的 workload 出现了，OpenStack 这种东西自然就上去了，根本不用急着看案例。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;h2 id="这么多企业如何选择">这么多企业如何选择？&lt;/h2>
&lt;p>每个厂商说完 OpenStack 的好处之后，必然要说自己公司长处，这对用户来说，容易困扰：市面上一堆的 IT 企业，该如何选择？比如中国，传统 IT 企业几乎都有 OpenStack 的团队，如红帽、HP、戴尔、IBM、华为等；还有些初创企业如 AWcloud 、99cloud 等，也是不容忽视的力量。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>企业自己的 OpenStack 专业团队还真不多见，现在传统企业还没有合适 workload 就养一堆 OpenStack 工程师是罕见的。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>红帽说自己的优点是，在开源方面具有优势，懂底层的代码，而像 HP 这样的公司，自己写了 Unix 代码，比较封闭等。它强调的是开源。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>红帽就是做开源的，无需强调开源了好么？这也不是红帽的优势。红帽在 OpenStack 上做的工作和他在 RHEL 上的工作、和在 JBoss，在 Ceph，在其他任何产品上做的工作和优势没有任何差异，就是“提供企业支持”，提供长生命周期的企业支持。懂底层代码的人很多很多，红帽其中的一部分。而从公司层面，提供商业化发行版，并且对其发出的每个版本做长生命周期的企业支持和服务，是很少的公司可以做的。这是红帽的优势。作者对开源业务模式欠了解。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>当然，像华为这种公司也可以强调是软硬件通吃，更能提供整体的解决方案。像联想这种公司，可以强调资金实力和技术实力，以及对行业的理解能力。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>不评价。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>都有道理，如果要选择，还是选择资金实力、历史悠久的公司可能靠谱一些。有些初创企业在技术上领先，但它们的首要问题是活下来，才能保障 3~5 年的服务期。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>OpenStack 的全方位长期的核心级别技术服务是很重要的。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;h2 id="运维之后是否被绑定-it-公司">运维之后，是否被绑定 IT 公司？&lt;/h2>
&lt;p>企业要上 OpenStack，最缺的是技术人，而不是钱、技术等问题。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>市场上 OpenStack 人员不少了，真的有岗位出来，肯出钱，从业者不成问题。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>着重说明的是，OpenStack 不是产品，只是架构。所以，在开源社区开发的各类版本，只有在“封装”之后才可以使用。一般的企业不具备这种技术实力，所以需要 IT 公司帮助实施、运维、开发等工作。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>封装之后可用是个普遍的错误观点，纯属于界面看着难受不改就不用的想法。选择合适的发行版，附加有能力的公司来做架构设计和实施，虚拟机就可以跑起来了，就可以上线了。不做定制开发就用了的也大有人在。我也问过一个云计算创业的公司，你们用的什么版本？回答是我们选择了一个版本就是部署了，碰到 bug 我们自己的研发就看代码搞定了。它们关注的事提供虚拟机给客户，这才是业务。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>极端的情况，假如企业用了 A 公司提供的某个版本的产品，A 公司忽然倒闭或者技术实力跟不上，无法后续运维，B 公司接手是否可行？理论上可以，由于代码开源，B 公司可以直接读 A 公司开发过的产品；但实际操作，要看系统规模的大小，以及复杂度。毕竟，当前是推广阶段，这种实施失败的案例极少。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>要看开发的是什么？有代码就可以维护的。规模大小和复杂是无法接手的因素么？他俩加一起也不能就直接推出接不上手吧？在这种场景下，现实项目的操作实践是，抛弃 A 公司做的，B 公司再从头做一遍。看到的项目案例也是这样。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;h2 id="中国企业的贡献有多大">中国企业的贡献有多大？&lt;/h2>
&lt;p>如果只从基金会来看，中国企业仍旧没有进入核心层。基金会的白金会员只有 8 个名额，AT&amp;amp;T、惠普、IBM、Inetl、Rackspace、Red Hat 和 SUSE 等，每年缴纳 50 万美金的费用。除非有企业退出，否则不可能进入。在最新的 Kilo 版本中，按照贡献代码数来计算，中国企业贡献最多的几位是华为、99Cloud、Awcloud、Kylin Cloud（为啥都叫 Cloud）；尤其是华为，代码贡献是 2681，远超其他公司。有嘉宾解释这个排名时说，华为人也太多了，别家都是初创企业，比不了。这种大公司一旦下决心布局，立即显示出整体的优势，举个例子，如联想在 2015 年 1 月加入基金会，3 月就正式成为企业代码贡献者，以它的战略和技术背景来看，绝对是 2015 年黑马。当然，初创公司的专注度、贴身的服务能力、快速的反应能力，也是大公司比不了的，各有所长。中国企业在这一轮技术升级中，几乎都抓住了好机会。接下来要比战略和市场行动了，其实是一场长跑。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>国人对 OpenStack 的贡献多少？和企业是否用 OpenStack 也没有必要的联系。OpenStack 的出现，也不是给企业 IT 带来整体升级的机会。现实看 OpenStack 只是一种基础架构技术而已。它和传统的服务器虚拟化技术是同层面的东西。只是它带有更多的和网络存储技术的相关性；特别是在网络、存储相关的技术上确实颠覆传统技术的势头十足。但是这只是现象。实际变了么？&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;h2 id="后续问题是什么">后续问题是什么？&lt;/h2>
&lt;p>总体感觉，OpenStack 已经过了市场炒作期，完胜其他三个开源架构；但处于普及期，尚未真正进入大规模的应用阶段。有技术原因，也有市场原因，还有厂商推广原因。比如技术，每一个版本的功能是否有较大提升，在新技术之间的快速迭代和平衡问题，怎么做好开源的商业化问题，又不能受控于几家核心的企业？在打包后的产品中，怎么解决各个厂商分化的问题？&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>纠结下一个版本新功能的人，属于根本不知道自己当前需要使用 OpenStack 什么功能的人。上游大厂的利益划分和最终对用户的影响并不大。各个厂商提供的功能和模块往往是不冲突的，即使是是重叠了，对用户也是好事。OpenStack 架构最大的好处就在于，它是分布式架构，任何一个用户不可能用足它的全功能场景。常规跑虚拟机的场景用到了 OpenStack 的全套功能的很小一部分。当然 OpenStack 社区虽然没把用户的利益完全放在第一位，对用户来说，用户是由自由选择其中的任何功能组件的，就是搭积木而已。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>比如市场，对于企业来说，如何选择合适的机会应用，这考量 IT 企业对 OpenStack 的全面评估以及对自己业务的评估，而不仅仅站在 IT 的角度看技术发展。其实，最考验的是 IT 厂商的交付能力、运维能力以及服务能力，这才是最关键的。没有交付能力的 IT 厂商，你再吹捧 OpenStack 的好处，那也是别人家的，也是圈子内的，和你没有一毛钱关系。用户要的是效率，是业务的可靠性和连续性，是 IT 的扩展性和精简、敏捷、高效，不站在用户角度推广 OpenStack 的厂商就是耍流氓。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>红帽本身来讲看的还是发布的发行版是否足够稳定，是否修复了足够的 bug，是否在安装部署方面有提升。其它交付和运维等等是周边生态系统公司的范围。红帽对 OpenStack 社区的重要价值，还在于向社区提交 bug 修复，这些 bug 很多都是红帽客户碰到的。一旦提交成功了，未来版本中基本就没有这个问题了。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>真实情况是，云计算还没有真正普及，怎么谈 OpenStack 的应用呢？&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>敢问云计算怎么才算是真正普及？OpenStack 也不是填饱肚子的最后一个馒头。云计算相关技术发展的还不够快么？君不见容器如日中天么？那天人们谈云计算，不谈 OpenStack 的可能都有，OpenStack 只是云计算发展过程中的一个场景而已。&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>比如推广，要接地气，要说人话，不能自说自话，一厢情愿的说自己好。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>凡是开这种会，没人说自己不好的对么？&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>在饭桌上听来的段子。在香港 OpenStack 峰会中，某企业也学其他厂商发帽子，由于企业 LOGO 是绿色的，它发的竟然是“绿帽子”。还有一家企业，觉得要贴合中国元素，在展台挂上了灯笼。不过是“白灯笼”，不是红灯笼。可想而知，这两排慎人的白灯笼，距离用户有多远就滚多远吧。&lt;/p>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>。。。。。！！！！&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>原文微信：&lt;a class="link" href="http://mp.weixin.qq.com/s?__biz=MjM5MzYwMTE5OQ==&amp;amp;mid=205642335&amp;amp;idx=1&amp;amp;sn=abc8da56bfa748c895a6f7e61ee70d7c&amp;amp;scene=1&amp;amp;key=1936e2bc22c2ceb550a9ed47d35d37ac6649fc2fd92aedfaeae9a37f83c1bc9a01d8c07369a095226703791790b8081a&amp;amp;ascene=0&amp;amp;uin=ODYyMzEyOTQw&amp;amp;devicetype=iMac&amp;#43;MacBookPro8%2C1&amp;#43;OSX&amp;#43;OSX&amp;#43;10.10.3&amp;#43;build%2814D136%29&amp;amp;version=11020012&amp;amp;pass_ticket=9113SDOfWN%2BqnP3yogS7%2FwP2x2VDHEgF3ksia4%2Bbngq1OKnK1y4ajPkfu8mgg8MO" target="_blank" rel="noopener"
>http://mp.weixin.qq.com/s?__biz=MjM5MzYwMTE5OQ==&amp;amp;mid=205642335&amp;amp;idx=1&amp;amp;sn=abc8da56bfa748c895a6f7e61ee70d7c&amp;amp;scene=1&amp;amp;key=1936e2bc22c2ceb550a9ed47d35d37ac6649fc2fd92aedfaeae9a37f83c1bc9a01d8c07369a095226703791790b8081a&amp;amp;ascene=0&amp;amp;uin=ODYyMzEyOTQw&amp;amp;devicetype=iMac+MacBookPro8%2C1+OSX+OSX+10.10.3+build%2814D136%29&amp;amp;version=11020012&amp;amp;pass_ticket=9113SDOfWN%2BqnP3yogS7%2FwP2x2VDHEgF3ksia4%2Bbngq1OKnK1y4ajPkfu8mgg8MO&lt;/a>&lt;/p></description></item><item><title>Import CloudForms into rhevm</title><link>https://martinliu.cn/2015/03/30/import-cloudforms-into-rhevm/</link><pubDate>Mon, 30 Mar 2015 03:13:47 +0000</pubDate><guid>https://martinliu.cn/2015/03/30/import-cloudforms-into-rhevm/</guid><description>&lt;p>[bash]
[root@rhevm03 export]# cat /etc/exports
/var/lib/exports/iso _(rw)
/export/rhev_import_export_disk _(rw,sync,no_subtree_check,all_squash,anonuid=36,anongid=36)
/export/template *(rw,sync,no_subtree_check,all_squash,anonuid=36,anongid=36)&lt;/p>
&lt;h1 id="rootrhevm03-export-engine-image-uploader--n-cfme5351--e-export-nfs-rhevm--v--m-upload-tmpcfme-rhevm-53-51x86_64rhevmova">[root@rhevm03 export]# engine-image-uploader -N cfme5351 -e export-nfs-rhevm -v -m upload /tmp/cfme-rhevm-5.3-51.x86_64.rhevm.ova&lt;/h1>
&lt;p>[/bash]&lt;/p>
&lt;p>然后从 Web Console 上导入这个模板，创建一个目标规格的虚拟机。&lt;/p></description></item><item><title>Practical Linux Infrastructure</title><link>https://martinliu.cn/2015/03/29/practical-linux-infrastructure/</link><pubDate>Sun, 29 Mar 2015 14:10:37 +0000</pubDate><guid>https://martinliu.cn/2015/03/29/practical-linux-infrastructure/</guid><description>&lt;p>&lt;img src="http://ecx.images-amazon.com/images/I/51mcZ%2BD9AsL._SL500_PIsitb-sticker-arrow-big,TopRight,35,-73_OU01_SS75_SS75_.jpg"
loading="lazy"
alt="Practical Linux Infrastructure by Syed Ali"
>&lt;/p>
&lt;p>&lt;strong>Practical Linux Infrastructure&lt;/strong>
by Syed Ali
&lt;strong>Link:&lt;/strong> &lt;a class="link" href="http://amzn.com/148420512X" target="_blank" rel="noopener"
>http://amzn.com/148420512X&lt;/a>&lt;/p>
&lt;p>[gallery size=&amp;ldquo;medium&amp;rdquo; ids=&amp;ldquo;53654,53655&amp;rdquo;]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>CI/CD 要自动化尽可能多的测试案例，从而对代码获得更多的信心。另外，它还要执行一个完整的软件系统的 build，并确保 checked in 的代码并不会搞坏其它东西。任何失败，开发人员都不得不去调查原因。有这样的一些软件可以帮助实施 CI/CD 的 pipeline：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Jenkins (&lt;a class="link" href="http://jenkins-ci.org" target="_blank" rel="noopener"
>http://jenkins-ci.org&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CruiseControl (&lt;a class="link" href="http://cruisecontrol.sourceforge.net" target="_blank" rel="noopener"
>http://cruisecontrol.sourceforge.net&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Buildbot (&lt;a class="link" href="http://buildbot.net" target="_blank" rel="noopener"
>http://buildbot.net&lt;/a>)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>公有云解决方案比私有云方案是不是更贵还是便宜，这取决于企业的规模。&lt;/p></description></item><item><title>wordpress update</title><link>https://martinliu.cn/2015/03/29/wordpress-update/</link><pubDate>Sun, 29 Mar 2015 13:40:16 +0000</pubDate><guid>https://martinliu.cn/2015/03/29/wordpress-update/</guid><description>&lt;p>在本网站的网页永久链接结构性调整了之后，本以为搜索引擎更新会是一个缓慢的过程，今天去 bing 和 baidu 一看，简单翻了若干页之后，发现已经全部更新完毕了。而且搜索 ： site:martinliu.cn 返回结果的顺序也和以前不一样了。貌似旧文章比较靠前，不过顺序无所谓，只要指向的链接完全 OK 就可以了。&lt;/p></description></item><item><title>服务器虚拟化 RHEV</title><link>https://martinliu.cn/2015/03/27/e69c8de58aa1e599a8e8999ae68b9fe58c96-rhev/</link><pubDate>Fri, 27 Mar 2015 02:11:40 +0000</pubDate><guid>https://martinliu.cn/2015/03/27/e69c8de58aa1e599a8e8999ae68b9fe58c96-rhev/</guid><description>&lt;p>服务器虚拟在我的 lab 中是必选项，管理控制器端 RHEVM 安装在主服务的一个虚拟机里面。在主服务器上使用 targetcli 做了一个 iscsi 的共享存储。使用这个命令可以方便的实现 iscsi 设备。把最终的存储文件放在了 SSD 盘上的一个 100GB 的瘦制备文件上。
[bash]
╭─root@w540 ~
╰─$ targetcli
targetcli shell version 2.1.fb37
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type &amp;lsquo;help&amp;rsquo;.&lt;/p>
&lt;p>/&amp;gt; ls
o- / &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [&amp;hellip;]
o- backstores &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [&amp;hellip;]
| o- block &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 0]
| o- fileio &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 1]
| | o- iscsi1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [/root/iscsi01.img (100.0GiB) write-back activated]
| o- pscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 0]
| o- ramdisk &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Storage Objects: 0]
o- iscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 1]
| o- iqn.2003-01.org.linux-iscsi.w540.x8664:sn.82939fa1cd49 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [TPGs: 1]
| o- tpg1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [no-gen-acls, no-auth]
| o- acls &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [ACLs: 0]
| o- luns &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [LUNs: 1]
| | o- lun0 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [fileio/iscsi1 (/root/iscsi01.img)]
| o- portals &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Portals: 1]
| o- 0.0.0.0:3260 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [OK]
o- loopback &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 0]
/&amp;gt;
[/bash]&lt;/p>
&lt;p>以上 iscsi 的存储配置参考：&lt;a class="link" href="https://access.redhat.com/solutions/894163" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/894163&lt;/a>&lt;/p>
&lt;p>如果需要让所有的节点都能无障碍访问 iscsi 存储，就需要把 acl 设置为允许所有节点访问。使用下面这个命令&lt;/p>
&lt;p>[bash]
/&amp;gt; iscsi/iqn.2003-01.org.setup.lun.test/tpg1/ set attribute authentication=0 demo_mode_write_protect=0 generate_node_acls=1 cache_dynamic_acls=1&lt;/p>
&lt;p>Parameter demo_mode_write_protect is now &amp;lsquo;0&amp;rsquo;.&lt;/p>
&lt;p>Parameter authentication is now &amp;lsquo;0&amp;rsquo;.&lt;/p>
&lt;p>Parameter generate_node_acls is now &amp;lsquo;1&amp;rsquo;.&lt;/p>
&lt;p>Parameter cache_dynamic_acls is now &amp;lsquo;1&amp;rsquo;.&lt;/p>
&lt;p>/&amp;gt; ls&lt;/p>
&lt;p>o- / &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [&amp;hellip;]&lt;/p>
&lt;p>o- backstores &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [&amp;hellip;]&lt;/p>
&lt;p>| o- block &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 0]&lt;/p>
&lt;p>| o- fileio &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Storage Objects: 0]&lt;/p>
&lt;p>| o- pscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 0]&lt;/p>
&lt;p>| o- ramdisk &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 1]&lt;/p>
&lt;p>| o- test1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [nullio (100.0MiB) activated]&lt;/p>
&lt;p>o- iscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Targets: 1]&lt;/p>
&lt;p>| o- iqn.2003-01.org.setup.lun.test &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [TPGs: 1]&lt;/p>
&lt;p>| o- tpg1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [gen-acls, no-auth]&lt;/p>
&lt;p>| o- acls &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [ACLs: 0]&lt;/p>
&lt;p>| o- luns &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [LUNs: 1]&lt;/p>
&lt;p>| | o- lun0 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [ramdisk/test1]&lt;/p>
&lt;p>| o- portals &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Portals: 1]&lt;/p>
&lt;p>| o- 12.12.12.1:3260 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [iser]&lt;/p>
&lt;p>o- loopback &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Targets: 0]&lt;/p>
&lt;p>o- srpt &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 0]&lt;/p>
&lt;p>/&amp;gt; saveconfig&lt;/p>
&lt;p>Last 10 configs saved in /etc/target/backup.&lt;/p>
&lt;p>Configuration saved to /etc/target/saveconfig.json&lt;/p>
&lt;p>/&amp;gt; exit&lt;/p>
&lt;p>Global pref auto_save_on_exit=true&lt;/p>
&lt;p>Last 10 configs saved in /etc/target/backup.&lt;/p>
&lt;p>Configuration saved to /etc/target/saveconfig.json
[/bash]&lt;/p>
&lt;p>RHEVM 的安装过程非常简洁，基本用 Satellite 配置了一下它所需要的 repos，做好视图，然后就推送给了一个 kvm 虚拟机，使用 pxe 安装好之后就行了。&lt;/p>
&lt;p>RHEVM 需要的 repos 和基本的安装命令：
[bash]&lt;/p>
&lt;h1 id="subscription-manager-repos---enablerhel-6-server-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rpms&lt;/h1>
&lt;h1 id="subscription-manager-repos---enablerhel-6-server-supplementary-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-supplementary-rpms&lt;/h1>
&lt;h1 id="subscription-manager-repos---enablerhel-6-server-rhevm-35-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rhevm-3.5-rpms&lt;/h1>
&lt;h1 id="subscription-manager-repos---enablejb-eap-6-for-rhel-6-server-rpms">subscription-manager repos &amp;ndash;enable=jb-eap-6-for-rhel-6-server-rpms&lt;/h1>
&lt;h1 id="subscription-manager-repos---enablerhel-6-server-rhevh-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rhevh-rpms&lt;/h1>
&lt;h1 id="yum-install-rhevm-rhevm-dwh-rhevm-reports">yum install rhevm rhevm-dwh rhevm-reports&lt;/h1>
&lt;h1 id="engine-setup">engine-setup&lt;/h1>
&lt;p>[/bash]&lt;/p>
&lt;p>回答完 engine-setup 的所有问题就可以登录风格统一的黑底色的 RHEM 界面了。实际上有三个登录界面：用户的，管理员，和报表的。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-web-admin.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-web-admin-520x293.jpg"
loading="lazy"
alt="rhevm-web-admin"
>&lt;/a>&lt;/p>
&lt;p>下面需要安装跑虚拟机的 Hypervisor 了，RHEV 的 Hypervisor 有两种，一种是精简话的裁剪 rhel 版本叫做 RHEVH（偏向 vshpere 的做法），还有一种就是 rhel 的标准版，然后安装 Hypervisor 相关的包（偏向 OpenStack 的做法）。下面我会安装第二种做法。目的是：我有两台相同配置的计算节点，我希望把动态的变更他们的功能；一会做 RHEV 虚拟机的演示，一会做 OpenStack nova 的演示。&lt;/p>
&lt;p>用了一个组合视图安装了这两个服务器虚拟化节点。组合视图里如下所示：
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhev-view-compose.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhev-view-compose-520x286.jpg"
loading="lazy"
alt="rhev-view-compose"
>&lt;/a>
如上图所示：1）视图 1 是基础的 RHEL 操作系统 repo；2）视图 2 是 RHEV 相关的 repos 视图，其中包括了安装 RHEVM 和 host 的所有需要的 repo。考激活秘钥控制每个 repo 的默认是否开启，它们对安装后的 os 可见，但是默认并不是开启的，因此，我设置 rhevm 和 jboss 为默认关闭的，由于安装 rhev host 的情况比较多，需要安装 rhevm 的话，可以手动 enable 这需要的 repos 即可。&lt;/p>
&lt;p>安装和配置完存储之后的 RHEVM 控制台：
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-hosts.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-hosts-520x286.jpg"
loading="lazy"
alt="rhevm-hosts"
>&lt;/a>&lt;/p>
&lt;p>目前由于没有安装 OpenStack 环境，所以没有 Glance 服务，因此 iso 镜像只能暂时放在了 dis06 的一个服务器虚拟化 Hypervisor 节点上，目前是临时的方案，回头一定把 iso 放到 Glance 服务上 host。&lt;/p>
&lt;p>下面上传一个 iso 之后就可以创建虚拟机了。
[bash]
[root@rhevm03 ~]# engine-iso-uploader &amp;ndash;iso-domain=iso-dis06 upload /tmp/turnkey-jenkins-13.0-wheezy-amd64.iso
Please provide the REST API password for the admin@internal oVirt Engine user (CTRL+D to abort):
Uploading, please wait&amp;hellip;
ERROR: mount.nfs: Connection timed out&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>由于这个命令上传不成功，也不想排错了；到目前这个状态其实就可以在 Satellite 里面使用 RHEV 的资源提供者的方式来安装虚拟机了，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-1.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-1-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-1"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 1：通过 New Host 设置相关参数。选择 Deploy on 为 rhevm03（rhevm），这个配置让 sat6 去联系 RHEVM，rhevm 的配置信息必须提前输入到 sat6 中。然后还要在 sat6 中设置虚拟机的三种规格，就是 Computer profile 中的选项，这个选项确定了 cpu，ram，磁盘和网络等信息。剩下的就是最重要的 Lifecycle Evn 和 Puppet Env 了，这两个选项确定把系统安装为标准的 rhel6 的核心最小化安装。当然可以一次性完成某种应用的全套安装和配置。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-2.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-2-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-2"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 2：通过 Virtual Machine 参数可以看到 1，2，3 都来自标准的规格配置，如果需要手动修改的话，可以在这里修改，这里可以看到默认的存储是 w540-iscsi-lun0 这个之前在 RHEVM 里面配置好的 iscsi 存储。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-3.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-3-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-3"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 3：点击提交之后，sat6 就开始了实时创建 rhev 虚拟机的过程，sat6 使用 REST API 告诉 RHEVM 这些信息，然后 RHEVM 再确定使用哪个 Hypervisor 来建立并运行虚拟机。&lt;/p>
&lt;p>问题来了：如果需要在 RHEV 资源池里建立 n 个相同配置的虚拟机，管理员该如何操作？&lt;/p>
&lt;p>在 sat6 里面，管理员重复以上操作，当然需要手动操作 n 次。这样是不是很麻烦，确实很麻烦！！如何解决？这就需要一种能够实现 Orchestration 功能的工具来做，也就是自动化编排工具。这种工具最好是统一的能够跨异构资源池的，能够满足如下需求：今天企业可能是纯的 vshpere 的虚拟化环境，接下来企业有可能引入其他服务器虚拟化资源池技术，如：RHEV，Hyper-V；在以后还可能引入 OpenStack 资源池。那么这种自动化编排工具和底层的类似 satellite6 的（标准化部署工具）必须形成一个统一的平台来操作所有异构的资源池。也就是说：在 Orchestration 工具中统一管理异构资源池，并配合标准化部署工具，实现 workload 的标准化自动化部署。红帽的 Orchestration 工具是 CloudForms。它能够对接业内所有流行的资源池，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-cloud-provides.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-cloud-provides-520x292.jpg"
loading="lazy"
alt="cfme-cloud-provides"
>&lt;/a> &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-infra-provides.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-infra-provides-520x293.jpg"
loading="lazy"
alt="cfme-infra-provides"
>&lt;/a>&lt;/p>
&lt;p>上图是 Satellite 的上层 Orchestration 的能力，底层必须还有标准化的部署工具支持，也就是 Satellite6，它对以上基础架构类型的支持情况，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/satellite6-provider.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/satellite6-provider-520x286.jpg"
loading="lazy"
alt="satellite6-provider"
>&lt;/a>&lt;/p>
&lt;p>使用 CloudForms 做上层 Orchestration 的调度，必须依赖于底层的 workload 的标准化，标准化到什么程度，从虚拟机供给的角度可以参考 Amazon AWS 的 EC2 的实际案例。如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/ec2-types.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/ec2-types-520x258.jpg"
loading="lazy"
alt="ec2-types"
>&lt;/a>&lt;/p>
&lt;p>AWS 服务的我曾研究过一点，上图的全图下载点这里 &amp;ndash;&amp;gt; &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/aws-%e6%9c%8d%e5%8a%a1-%e8%84%91%e5%9b%be.pdf" target="_blank" rel="noopener"
>aws-服务-脑图&lt;/a>&lt;/p>
&lt;p>以上所有是 Martin&amp;rsquo;s Lab 的搭建的一部分，下周可能去一个银行客户演示。需要做的优化还很多，请关注后续更新。&lt;/p></description></item><item><title>入手 zsh 和 oh-my-zsh</title><link>https://martinliu.cn/2015/03/23/e585a5e6898b-zsh-e5928c-oh-my-zsh/</link><pubDate>Mon, 23 Mar 2015 02:47:45 +0000</pubDate><guid>https://martinliu.cn/2015/03/23/e585a5e6898b-zsh-e5928c-oh-my-zsh/</guid><description>&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/zsh.gif"
loading="lazy"
alt="zsh"
>&lt;/p>
&lt;p>安装 zsh 在任何系统上几乎都是差不多。Zsh 是一款功能强大的交互式 shell，与 Bash 相比，Zsh 下面几点表现令人印象深刻：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>自动补全&lt;/p>
&lt;/li>
&lt;li>
&lt;p>拼写纠错&lt;/p>
&lt;/li>
&lt;li>
&lt;p>定制性强&lt;/p>
&lt;/li>
&lt;li>
&lt;p>美观的命令提示符（这点吸引力最大）&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;p>相信你安装之后，对上面几点会有更加真切的感受！&lt;/p>
&lt;p>下面是 RHEL 7 上的安装过程。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@w540]~# yum install git
[root@w540]~# curl -L &lt;a class="link" href="https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh" target="_blank" rel="noopener"
>https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh&lt;/a> | sh
[root@w540]~# cat .zshrc&lt;/p>
&lt;h1 id="path-to-your-oh-my-zsh-installation">Path to your oh-my-zsh installation.&lt;/h1>
&lt;p>export ZSH=/root/.oh-my-zsh&lt;/p>
&lt;h1 id="set-name-of-the-theme-to-load">Set name of the theme to load.&lt;/h1>
&lt;h1 id="look-in-oh-my-zshthemes">Look in ~/.oh-my-zsh/themes/&lt;/h1>
&lt;h1 id="optionally-if-you-set-this-to-random-itll-load-a-random-theme-each">Optionally, if you set this to &amp;ldquo;random&amp;rdquo;, it&amp;rsquo;ll load a random theme each&lt;/h1>
&lt;h1 id="time-that-oh-my-zsh-is-loaded">time that oh-my-zsh is loaded.&lt;/h1>
&lt;p>#ZSH_THEME=&amp;ldquo;robbyrussell&amp;rdquo;
ZSH_THEME=&amp;ldquo;bira&amp;rdquo; # 后面的文字都省略，我就修改了这个文件的这一个参数，bira 的提示符感觉比较新颖和实用
[root@w540]~# zsh
╭─root@w540 ~
╰─$ ls
anaconda-ks.cfg Desktop Documents Downloads initial-setup-ks.cfg ist Music Pictures Public Templates Videos
╭─root@w540 ~
╰─$
[/bash]&lt;/p>
&lt;p>下面是装完之后的截图，以后我的测试机的默认 shell 应该都是这个样子了：）&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhel7-zsh-ohmyzsh.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhel7-zsh-ohmyzsh.jpg"
loading="lazy"
alt="rhel7-zsh-ohmyzsh"
>&lt;/a>&lt;/p>
&lt;p>zsh 的功能还是比较强大的，然后再加上 ohmyzsh 这套配置参数文件和工具插件，shell 下地工作效率应该可以提高了。下面是一下参考网站：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>oh-my-zsh 入手中文参考：&lt;a class="link" href="http://tuhaihe.com/2013/05/17/oh-my-zsh.html" target="_blank" rel="noopener"
>http://tuhaihe.com/2013/05/17/oh-my-zsh.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>oh-my-zsh 官网（作者认为这是他此生做的最有意义的一件事）：&lt;a class="link" href="http://ohmyz.sh/" target="_blank" rel="noopener"
>http://ohmyz.sh/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>zsh 官网：&lt;a class="link" href="http://www.zsh.org/" target="_blank" rel="noopener"
>http://www.zsh.org/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;p>Mac OS X 用户则建议实用 iTerm2 来替换原声的 terminal。下载 item2 在这里：&lt;a class="link" href="http://iterm2.com/" target="_blank" rel="noopener"
>http://iterm2.com/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/iterm2-logo.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/iterm2-logo.jpg"
loading="lazy"
alt="iterm2-logo"
>&lt;/a>&lt;/p></description></item><item><title>Impact Mapping</title><link>https://martinliu.cn/2015/03/20/impact-mapping/</link><pubDate>Fri, 20 Mar 2015 02:22:16 +0000</pubDate><guid>https://martinliu.cn/2015/03/20/impact-mapping/</guid><description>&lt;p>这种方法论的东西很久不感冒了，可是这次耐心看了一下，确实有温故而知新的作用，有点意思，特此推荐一下。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/impact-mapping.jpg"
loading="lazy"
alt="impact-mapping"
>&lt;/p>
&lt;p>这个方法论的网站在：&lt;a class="link" href="http://www.impactmapping.org/" target="_blank" rel="noopener"
>http://www.impactmapping.org/&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/impact-mapping-1.jpg"
loading="lazy"
alt="impact-mapping-1"
>&lt;/p>
&lt;p>上图是此方法分析的思路。网上搜索了一下，多看到很多介绍敏捷方法的网站在推荐。下图是次方法的宣传海报。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/poster_im_print_1500.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/poster_im_print_1500-1024x673.jpg"
loading="lazy"
alt="poster_im_print_1500"
>&lt;/a>&lt;/p>
&lt;p>这里还从 YouTube 上搬运回来一个视频，可以参考一下。&lt;/p></description></item><item><title>如何参与 Project Atomic</title><link>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</link><pubDate>Thu, 19 Mar 2015 03:23:37 +0000</pubDate><guid>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</guid><description>&lt;h2 id="关于-project-atomic-项目">关于 Project Atomic 项目&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/secure-containers.png"
loading="lazy"
alt="secure-containers"
>&lt;/a>&lt;/p>
&lt;p>Project Atomic 项目相关的开源技术组件如下：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://kernel.org/" target="_blank" rel="noopener"
>linux kernel&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/" target="_blank" rel="noopener"
>systemd&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://wiki.gnome.org/Projects/OSTree" target="_blank" rel="noopener"
>OSTree&lt;/a> and &lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>rpm-ostree&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.docker.io/" target="_blank" rel="noopener"
>Docker&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/GoogleCloudPlatform/kubernetes" target="_blank" rel="noopener"
>kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>Fedora&lt;/a> and &lt;a class="link" href="http://wiki.centos.org/Cloud" target="_blank" rel="noopener"
>CentOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;p>该项目的网站在： &lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>http://www.projectatomic.io/&lt;/a>&lt;/p>
&lt;h2 id="加入-project-atomic-邮件列表">加入 Project Atomic   邮件列表&lt;/h2>
&lt;p>项目一般性讨论： &lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic&lt;/a>&lt;/p>
&lt;p>项目开发者：&lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic-devel" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic-devel&lt;/a>&lt;/p>
&lt;p>项目版本发布更新：https://lists.projectatomic.io/mailman/listinfo/atomic-announce&lt;/p>
&lt;p>填写自己的邮箱后，别忘了在邮箱里收信，并且确认。如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg"
loading="lazy"
alt="atomic-dev-mail-list"
>&lt;/a>&lt;/p>
&lt;h2 id="问-project-atomic-问题和讨论">问   Project Atomic 问题和讨论&lt;/h2>
&lt;p>&lt;a class="link" href="http://ask.projectatomic.io/en/questions/" target="_blank" rel="noopener"
>http://ask.projectatomic.io/en/questions/  这里是&lt;/a>项目的论坛可以在这里提问和帮助其他人。&lt;/p>
&lt;h2 id="了解-project-atomic-代码">了解  Project Atomic 代码&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/projectatomic/" target="_blank" rel="noopener"
>https://github.com/projectatomic/&lt;/a> 项目的代码在 Github 网站上可以看到，如果你 watch 这个项目的话，可以收到所有开发者对该项目的所有代码更新等活动。&lt;/p></description></item><item><title>FY16 Sales SKO Marco</title><link>https://martinliu.cn/2015/03/17/fy16-sales-sko-marco/</link><pubDate>Tue, 17 Mar 2015 13:23:32 +0000</pubDate><guid>https://martinliu.cn/2015/03/17/fy16-sales-sko-marco/</guid><description>&lt;p>FY16 Sales SKO Marco: 正像所有公司做的模式是一样的，红帽的销售启动大会在澳门开始了。澳门是个让人腻味的地方，每天早晨的集体晨跑成了一个亮点。小小的慢跑群正在成长中。&lt;/p></description></item><item><title>走进学校分享开源</title><link>https://martinliu.cn/2015/03/12/e8b5b0e8bf9be5ada6e6a0a1e58886e4baabe5bc80e6ba90/</link><pubDate>Thu, 12 Mar 2015 12:05:14 +0000</pubDate><guid>https://martinliu.cn/2015/03/12/e8b5b0e8bf9be5ada6e6a0a1e58886e4baabe5bc80e6ba90/</guid><description>&lt;p>今天走入了天津市大学软件学院，和同学们分享了我对开源软件的一些看法和经历；很多同学对如何成为架构师感兴趣。全程学生们没有玩手机和睡觉的，感觉效果应该还不错。ppt 在这里&amp;ndash;&amp;gt;《&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/%e5%bc%80%e6%ba%90%e8%bd%af%e4%bb%b6%e4%b9%8b%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84%e5%b8%88%e7%af%87.pdf" target="_blank" rel="noopener"
>开源软件之系统架构师篇》&lt;/a>可惜对其中一个同学的回答后来想着欠妥 :(&lt;/p></description></item><item><title>对blog做了结构性调整</title><link>https://martinliu.cn/2015/03/10/e5afb9bloge5819ae4ba86e7bb93e69e84e680a7e8b083e695b4/</link><pubDate>Tue, 10 Mar 2015 15:47:16 +0000</pubDate><guid>https://martinliu.cn/2015/03/10/e5afb9bloge5819ae4ba86e7bb93e69e84e680a7e8b083e695b4/</guid><description>&lt;p>对 blog 做了结构性调整：把永久网址链接简化到只有文章标题；省略了之前带有复杂的分类层级的部分；之前想更多地加入关键字的想法，目前看真的想太多了。Blog 还是要越简单，越简洁越好。就像我目前的 Theme 一样，除去了浮夸和花哨的修饰，专注内容，专注文章质量。&lt;/p></description></item><item><title>安全地简化了网页永久链接</title><link>https://martinliu.cn/2015/03/10/e5ae89e585a8e79a84e7ae80e58c96e4ba86e7bd91e9a1b5e79a84e6b0b8e4b985e993bee68ea5/</link><pubDate>Tue, 10 Mar 2015 15:29:36 +0000</pubDate><guid>https://martinliu.cn/2015/03/10/e5ae89e585a8e79a84e7ae80e58c96e4ba86e7bd91e9a1b5e79a84e6b0b8e4b985e993bee68ea5/</guid><description>&lt;p>网页的 永久链接 的配置是在：Settings &amp;ndash;&amp;gt; Permalink Settings； 通过这个设置把 Wordpress 默认的代码型网页网址 &lt;a class="link" href="http://martinliu.cn/?p=123" target="_blank" rel="noopener"
>http://martinliu.cn/?p=123&lt;/a> 变成了 搜索引擎更友好，而且人也更容易懂的网址。例如我目前的：http://martinliu.cn/文章标题/&lt;/p>
&lt;p>我之前的永久链接其实已经改过好多次了，期间多次是由于更新网站分类结构，还有是由于看了多篇纠结的 wordpress SOE 文章导致。前几次修改都是很粗暴的直接修改，并没有顾忌到对以前搜索引擎的已经抓取的网页做保护。这次我必须对当前已经纳入搜索引擎的网页做保护了，毕竟文章现在比较多了，非常有必要对搜索引擎用户做保护。&lt;/p>
&lt;p>本次修改主要参考了文章是：&lt;a class="link" href="http://www.wpexplorer.com/change-permalinks-wordpress/" target="_blank" rel="noopener"
>A Simple Guide to Changing Your Permalinks Without Breaking Your WordPress Website&lt;/a> 此文推荐了一个简洁的方法，使用插件： Simple 301 Redirects&lt;/p>
&lt;p>安装和激活插件后，我的配置过程如下。首先，更新永久链接到新的设置。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/customer-structure.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/customer-structure-520x286.jpg"
loading="lazy"
alt="customer-structure"
>&lt;/a>&lt;/p>
&lt;p>然后再去 Simple 301 Redirects 的配置做如下修改：(插件有 bug，最后配置网址是 /%postname%/  .html 了发现 301 重定向不成功。)&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/301.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/301.jpg"
loading="lazy"
alt="301"
>&lt;/a>&lt;/p>
&lt;p>最后到搜索引擎里面看下是否所有的已有抓取的网页都可以正常访问。在搜索引擎中搜索： site:martinliu.cn&lt;/p>
&lt;p>&lt;a class="link" href="http://cn.bing.com/search?q=site%3Amartinliu.cn" target="_blank" rel="noopener"
>bing 搜搜结果点这里 &lt;/a>在结果页面上点击任何一个文章，文章应该被正确加载出来了。&lt;/p></description></item><item><title>一下午讲了两场</title><link>https://martinliu.cn/2015/03/10/e4b880e4b88be58d88e8aeb2e4ba86e4b8a4e59cba/</link><pubDate>Tue, 10 Mar 2015 14:37:18 +0000</pubDate><guid>https://martinliu.cn/2015/03/10/e4b880e4b88be58d88e8aeb2e4ba86e4b8a4e59cba/</guid><description>&lt;p>一下午讲了两场：头一场给两个渠道部门和总代的两位老大；后一场讲给曙光的产品经理。讲的我满头汗，感觉思路非常清晰，越来越清晰了，数据中心的基础架构如果转型到开放架构，那么需要的是什么？是一套综合的方案体系。是一套自动化高效的运管体系。&lt;/p></description></item><item><title>天将雄师</title><link>https://martinliu.cn/2015/03/10/e5a4a9e5b086e99b84e5b888/</link><pubDate>Tue, 10 Mar 2015 10:56:31 +0000</pubDate><guid>https://martinliu.cn/2015/03/10/e5a4a9e5b086e99b84e5b888/</guid><description>&lt;p>《天将雄师》豆瓣上评分很低的电影，才 6 分多；我看到的却很享受，是我不正常，还是世界不正常了：）&lt;/p></description></item><item><title>新MacBook是个怎样的选择 ？</title><link>https://martinliu.cn/2015/03/10/e696b0macbooke698afe4b8aae6808ee6a0b7e98089e68ba9/</link><pubDate>Tue, 10 Mar 2015 02:34:45 +0000</pubDate><guid>https://martinliu.cn/2015/03/10/e696b0macbooke698afe4b8aae6808ee6a0b7e98089e68ba9/</guid><description>&lt;p>MacBook 和 Macbook Pro 的$1299 相同价位的配置。&lt;a class="link" href="http://www.apple.com/mac/compare/results/?product1=macbook&amp;amp;product2=macbook-pro-retina-13" target="_blank" rel="noopener"
>http://www.apple.com/mac/compare/results/?product1=macbook&amp;amp;product2=macbook-pro-retina-13&lt;/a>&lt;/p>
&lt;p>不难看出这两个本子，基本就是针对两种不同类型的人群。选择 Macbook 意味着纯文档处理类型的人；选择 Macbook Pro 意味着需要更强处理和运算能力的技术人员。颜色上新增了银灰和土豪金。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/overview_colors_large.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/overview_colors_large-520x316.jpg"
loading="lazy"
alt="overview_colors_large"
>&lt;/a>&lt;/p>
&lt;p>看后我觉得我会选择，土豪金的 Macbook，哈哈哈哈~需要考察一下实物才能做这个最后的决定。下面是 Apple 官网上关于 MacBook 的设计视频广告，我看完后感觉，电脑作为商品来讲，做广告到这个份上，也就快到头了。&lt;/p></description></item><item><title>martin's lab build day 1</title><link>https://martinliu.cn/2015/03/08/martins-lab-build-day-1/</link><pubDate>Sun, 08 Mar 2015 15:49:44 +0000</pubDate><guid>https://martinliu.cn/2015/03/08/martins-lab-build-day-1/</guid><description>&lt;p>本来不能算是 day1，由于 day1 早就开始了，不过作为第一个 post 发布出的记录，还是叫它 day1 吧，后续会逐步更新我的进展。&lt;/p></description></item><item><title>Martin's lab 主服务器搭建</title><link>https://martinliu.cn/2015/03/08/e4b8bbe69c8de58aa1e599a8e690ade5bbba/</link><pubDate>Sun, 08 Mar 2015 15:42:01 +0000</pubDate><guid>https://martinliu.cn/2015/03/08/e4b8bbe69c8de58aa1e599a8e690ade5bbba/</guid><description>&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png"
loading="lazy"
alt="Red-Hat-open-hybrid-cloud-1000x563_0"
>&lt;/p>
&lt;p>上图是红帽产品和技术架构的全貌。来源是：&lt;a class="link" href="http://www.redhat.com/en/technologies/cloud-computing" target="_blank" rel="noopener"
>http://www.redhat.com/en/technologies/cloud-computing&lt;/a> 这张图我用在了我的首次给公司内部的全体销售培训上。由于我是 IT 管理背景的，因此我很习惯从云管理层往下看云引擎的各个层面。但是管理层产品，其实是后来整合纳入的。红帽起家的旗舰产品还是在底层的 RHEL。总之，我想在一个 Lab 里面实现以上所有的部分，所谓实现是让其每个部分都能在运行在假象的一个有意义的业务场景里。还好，红帽的产品全都是基于 x86 平台的，因此我用几个笔记本，再加上我家里的这台 HP MicroServer G8 服务器应该能够全部部署出来。&lt;/p>
&lt;p>做这样的一个 lab 还是要一定的规划和设计的，这些初步的规划和设计都在我的本子里手写的，就不在这里敲字了，随后我会抽空上几张图。&lt;/p>
&lt;h2 id="主服务器基本配置">主服务器基本配置&lt;/h2>
&lt;p>硬件：Lenovo W540 CPU Intel i7, RAM 32 GB, SSD 512GB, HD 1TB&lt;/p>
&lt;p>OS : RHEL 7.1&lt;/p>
&lt;p>订阅是红帽公司的业务模式，也是红帽认为最自豪的部分，红帽相信可以成为开源技术和用户之间的催化剂，它不断参与最优秀的开源技术创新，并为其用户提供最强有利的技术服务和支持。红帽技术员工可以申请一个红帽雇员订阅。我的订阅可以在网上查到如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/employee-sub.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/employee-sub-520x295.png"
loading="lazy"
alt="employee-sub"
>&lt;/a>&lt;/p>
&lt;p>红帽的服务必须是基于订阅的每一个节点（物理、虚拟）都需要有有效的订阅，否则红帽的支持服务不能生效。对于一个已经成功注册到红帽官网，并且状态正常的服务器，应该显示如下的注册状态：&lt;/p>
&lt;p>[bash]
[root@w540 ~]# subscription-manager list&lt;/p>
&lt;p>+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+
安装的产品状态
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+
产品名称： Red Hat Enterprise Linux Server
产品 ID： 69
版本： 7.0
构架： x86_64
状态： 已订阅
状态详情：
开始： 2014 年 09 月 09 日
结束： 2015 年 12 月 08 日
[/bash]&lt;/p>
&lt;p>红帽员工订阅意味着所有红帽产品。&lt;/p>
&lt;h2 id="基本服务配置">基本服务配置&lt;/h2>
&lt;h3 id="kvm">KVM&lt;/h3>
&lt;p>KVM 的上手还真比我想象的速度要慢一些，起码比我用 XenServer 的经历更加纠结一些。总之现在可以彻底的忘记其它任何的选项，KVM 可以满足我的所有需求了。由于主服务器有 512SSD + 32GB RAM + 8 vCPU，所以我打算把产品里的所有管理控制节点 VM 都部署在这个机器上。预计有 10 个左右的虚拟机。
安装配置方面这里就不赘述了。只把困扰我许久的几个网络配置贴出来，供参考。&lt;/p>
&lt;p>网桥 0 的功能是为所有虚拟机提供外网链接，使他们和主机一样直通主机所物理链接的局域网。
[bash]
[root@w540 ~]# cat /etc/sysconfig/network-scripts/ifcfg-br0
DEVICE=br0
ONBOOT=yes
TYPE=Bridge
BOOTPROTO=none
STP=on
DELAY=0
DNS1=192.168.0.1
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
DNS2=4.4.4.4
IPADDR=192.168.0.5
PREFIX=24
GATEWAY=192.168.0.1
NM_CONTROLLED=no
[/bash]&lt;/p>
&lt;p>主机原本的一块物理网卡的配置，由于增加了这个网桥，需求更新如下：
[bash]
[root@w540 ~]# cat /etc/sysconfig/network-scripts/ifcfg-enp0s25
DEVICE=enp0s25
ONBOOT=yes
BRIDGE=br0
NM_CONTROLLED=no
BOOTPROTO=none
[/bash]&lt;/p>
&lt;p>kvm 这块处理这个折腾我很久的 br0 之外，其它的功能看起来还不错，运行在 SSD 上的虚拟机也启动和运行速度飞快。&lt;/p>
&lt;h3 id="repo-服务器">Repo 服务器&lt;/h3>
&lt;p>Repos 是红帽软件仓库的简称。它具体指每个订阅内所有软件频道里面下载出来的软件包目录。下载到的某个软件包频道的 repos 目录中是一堆的 rpm 包文件，这样的目录可以制作成本地 Repos 服务器，能够提供给所有 LAN 里 RHEL OS 用来做软件的安装和升级用。
用主服务器上 1TB 的慢速普通盘来保存这些下载的 repos，安装 http 服务器，把它共享给本 lab 的 lan 中。具体的几个参考脚本如下。&lt;/p>
&lt;p>在把本服务器注册到红帽网站之后，他会默认 attach 一堆可能不需要的 repos，因此我的做法是先关闭掉所有的默认开启，然后再开启我所需要并且关注的东西。
[bash]
[root@w540 repos]# subscription-manager repos &amp;ndash;disable=&amp;quot;*&amp;quot;
[/bash]
以上命令的结果会反问，所有的被关闭的 repos。下面许开启我当前需求的 repos。
[bash]
[root@w540 repos]# cat rhel7-enable.sh
subscription-manager repos &amp;ndash;enable=rhel-7-server-extras-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-optional-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-ha-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=jb-eap-6-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rt-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-server-rhscl-7-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhn-tools-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-5.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhevh-rpms
subscription-manager repos &amp;ndash;enable=rhel-atomic-host-rpms
subscription-manager repos &amp;ndash;enable=rhel-rs-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-optional-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhev-mgmt-agent-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-6.0-installer-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rh-common-rpms
subscription-manager repos &amp;ndash;enable=jb-eap-6.3-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-optional-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-supplementary-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-optional-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-optional-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-6.0-rpms
subscription-manager repos &amp;ndash;enable=jb-ews-2-for-rhel-7-server-rpms
[/bash]&lt;/p>
&lt;p>接下来可以用命令来从红帽 CDN 同步下载每个 Repos 里面的软件包。
[bash]
[root@w540 rhel70]# cat sync.sh
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-satellite-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-extras-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rhevh-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-satellite-capsule-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-5.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rhev-mgmt-agent-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-atomic-host-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-optional-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-rs-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rh-common-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-server-rhscl-7-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-6.0-installer-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=jb-eap-6.3-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-ha-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-supplementary-rpms &amp;ndash;download_path=/data/Repos/rhel70/
[/bash]&lt;/p>
&lt;p>安装 httpd 的过程就不叙述了，下面就贴一个本机的配置文件。
[bash]
Alias /repos &amp;ldquo;/data/repos&amp;rdquo;
&amp;lt;Directory &amp;ldquo;/data/repos&amp;rdquo;&amp;gt;
Options None
AllowOverride None
Order allow,deny
Allow from all
Require all granted&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>最后，在任何需要的机器上本地 repos 源的配置文件可以类似如下：
[bash]
[root@sat6-leb yum.repos.d]# ls
rhel70.repo
[root@sat6-leb yum.repos.d]# cat rhel70.repo
[rhel-7-server-rpms]
name=rhel-7-server-rpms
baseurl=http://192.168.0.5/repos/rhel70/rhel-7-server-rpms/
gpgcheck=0
enable=1&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>当然，我的目标是以后这个 lab 网内所有的机器都需要受到 satellite 6 服务器的管理和控制，并不需要在每个服务器上手动的去安装和管理 repos 内容和订阅。下面分阶段安装各种控制器节点的时候，在详细说明如何使用 satellite 6 做种子服务器生出所有的其他节点。这里的 repo 服务器还是作为最初的种子服务器，它使安装 satellite 6 服务器的源。也是作为 lab 中对于 satellite6 的一个备份选项。&lt;/p>
&lt;h3 id="nfs-服务器">NFS 服务器&lt;/h3>
&lt;p>本机的存储空间比较大，可以作为慢速 NFS 共享存储和 ISO 镜像文件服务器使用，因此，安装 nfs 服务器之后，就可以把本地的满速普通硬盘使用 nfs 的方式共享到 lab 内网了。配置文件参考如下：
[bash]
[root@w540 ~]# cat /etc/exports
/data/nfs 192.168.0.&lt;em>(rw,async)
/data/iso 192.168.0.&lt;/em>(rw,async)
/home/test 192.168.0.&lt;em>(rw,async)
[root@w540 ~]# showmount -e localhost
Export list for localhost:
/home/test 192.168.0.&lt;/em>
/data/iso 192.168.0._
/data/nfs 192.168.0._
[root@w540 ~]#
[/bash]&lt;/p>
&lt;h3 id="ntp-服务器">NTP 服务器&lt;/h3>
&lt;p>根据红帽知识库文档，选择本机这个物理服务器作为 lab 内网的时钟服务器，所有的虚拟机和其他物理机都和他同步时钟。最终的配置还没有确定。随后更新靠谱的可以供参考的配置&lt;/p></description></item><item><title>Flake it till you make it</title><link>https://martinliu.cn/blog/flake-it-till-you-make-it/</link><pubDate>Thu, 26 Feb 2015 00:00:00 +0000</pubDate><guid>https://martinliu.cn/blog/flake-it-till-you-make-it/</guid><description>&lt;img src="https://martinliu.cn/img/path.jpg" alt="Featured image of post Flake it till you make it" />&lt;p>Under what circumstances should we step off a path? When is it essential that we finish what we start? If I bought a bag of peanuts and had an allergic reaction, no one would fault me if I threw it out. If I ended a relationship with a woman who hit me, no one would say that I had a commitment problem. But if I walk away from a seemingly secure route because my soul has other ideas, I am a flake?&lt;/p>
&lt;p>The truth is that no one else can definitively know the path we are here to walk. It’s tempting to listen—many of us long for the omnipotent other—but unless they are genuine psychic intuitives, they can’t know. All others can know is their own truth, and if they’ve actually done the work to excavate it, they will have the good sense to know that they cannot genuinely know anyone else’s. Only soul knows the path it is here to walk. Since you are the only one living in your temple, only you can know its scriptures and interpretive structure.&lt;/p>
&lt;p>At the heart of the struggle are two very different ideas of success—survival-driven and soul-driven. For survivalists, success is security, pragmatism, power over others. Success is the absence of material suffering, the nourishing of the soul be damned. It is an odd and ironic thing that most of the material power in our world often resides in the hands of younger souls. Still working in the egoic and material realms, they love the sensations of power and focus most of their energy on accumulation. Older souls tend not to be as materially driven. They have already played the worldly game in previous lives and they search for more subtle shades of meaning in this one—authentication rather than accumulation. They are often ignored by the culture at large, although they really are the truest warriors.&lt;/p>
&lt;p>A soulful notion of success rests on the actualization of our innate image. Success is simply the completion of a soul step, however unsightly it may be. We have finished what we started when the lesson is learned. What a fear-based culture calls a wonderful opportunity may be fruitless and misguided for the soul. Staying in a passionless relationship may satisfy our need for comfort, but it may stifle the soul. Becoming a famous lawyer is only worthwhile if the soul demands it. It is an essential failure if you are called to be a monastic this time around. If you need to explore and abandon ten careers in order to stretch your soul toward its innate image, then so be it. Flake it till you make it.&lt;/p></description></item><item><title>你还在为失去服务器感到焦虑？</title><link>https://martinliu.cn/2015/02/15/e4bda0e8bf98e59ca8e4b8bae5a4b1e58ebbe69c8de58aa1e599a8e6849fe588b0e784a6e89991efbc9f/</link><pubDate>Sun, 15 Feb 2015 13:14:59 +0000</pubDate><guid>https://martinliu.cn/2015/02/15/e4bda0e8bf98e59ca8e4b8bae5a4b1e58ebbe69c8de58aa1e599a8e6849fe588b0e784a6e89991efbc9f/</guid><description>&lt;p>我耐心看了以下这篇文章&lt;a class="link" href="http://www.serverwatch.com/server-trends/aws-lambda-debuts-for-running-code-in-the-cloud.html" target="_blank" rel="noopener"
>《AWS Lambda Debuts for Running Code in the Cloud 》&lt;/a>。我还没有来得及去测试一下这个服务，我只是对它感到新奇。有了它，业务应用可能就只需要 Dev 了，而不需要 Ops 了；更不用提什么 DevOps 了。当然这个观点稍微有点极端了。它的确实现了：程序代码可以基于事件在 AWS 的各种服务中运行。看完了那片文章我也没有察觉到它底层到底使用的是什么技术。只是说 AWS 再次走到了共有云服务的最前端。&lt;/p>
&lt;p>传统的共有云服务里，大家还停留在虚拟机提供，网络隔离的认识阶段。数据库服务、大数据服务、配套的程序部署和管理监控服务，对于一般性的共有云提供商，也不尽完全。曾经和作共有云的人聊过，他们觉得：传统企业数据中心的拥有着和管理这依然有巨大的纠结“失去对服务器的管控，就会有事业的风险”。因此，可见对服务器的管理是多么的重要。但是，如果你拥有了服务器的控制，并坐拥巨大的私有云建设的资金，那么您能如何很快交付出靠谱的云服务呢？说实话，目前私有云的建设很缓慢，也就是作个大批量的服务器虚拟化。IaaS 的建设案例还很少，即使有人说他们建成了新一代的云平台，近看一下大多还仅仅是增强版的虚拟机提供。当然这个虚拟机的提供是基本功，做不好这一客其它的云服务也面谈。我们详细观察以下 AWS，它大量的服务，像是 RDS，LB，Auto Scaling 等等功能，无处不见 AWS EC2 的扎实功底和无限变化。&lt;/p>
&lt;p>国内的广大用户，已经选择了私有云了；越大的企业，越有条件大赶快上云建设。只是却是道路艰辛，图省事的有钱人，可以上全套 V 公司的云计算，却是它的吸引力、炫耀力和安慰力都是无法阻挡的。底层上的技术的引用是至关重要的，越省事的套件，等同于越少的弹性和自由度，等同于更少的自由发挥的空间，和更少的创造。AWS 是基于 Xen 的服务器虚拟化技术，和一堆的其他开源技术。入手这条路解决了启动费用高的问题，带来了无限的创新和发展自由空间。他们不需要商业化软件或者产品么，例如，AWS 是重要的 Citrix netscaler 用户。&lt;/p></description></item><item><title>AWS 服务索引地图</title><link>https://martinliu.cn/2015/02/11/aws-e69c8de58aa1e7b4a2e5bc95e59cb0e59bbe/</link><pubDate>Wed, 11 Feb 2015 14:41:22 +0000</pubDate><guid>https://martinliu.cn/2015/02/11/aws-e69c8de58aa1e7b4a2e5bc95e59cb0e59bbe/</guid><description>&lt;p>以上图片用 FreeMind 软件生成，下载英文版原图点击这里：&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-service-map.mm_.zip" target="_blank" rel="noopener"
>aws-service-map.mm&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-service-map.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-service-map-1024x710.jpeg"
loading="lazy"
alt="aws-service-map"
>&lt;/a>&lt;/p>
&lt;p>下载中文版 PDF 全图点击这里：&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-%e6%9c%8d%e5%8a%a1-%e8%84%91%e5%9b%be.pdf" target="_blank" rel="noopener"
>aws-服务-脑图&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-%e6%9c%8d%e5%8a%a1-%e8%84%91%e5%9b%be.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/aws-%e6%9c%8d%e5%8a%a1-%e8%84%91%e5%9b%be-1024x446.jpeg"
loading="lazy"
alt="aws-服务-脑图"
>&lt;/a>&lt;/p></description></item><item><title>2014 Red Hat Summit- Paul Cormier, Red Hat keynote</title><link>https://martinliu.cn/2015/02/09/2014-red-hat-summit-paul-cormier-red-hat-keynote/</link><pubDate>Mon, 09 Feb 2015 05:24:15 +0000</pubDate><guid>https://martinliu.cn/2015/02/09/2014-red-hat-summit-paul-cormier-red-hat-keynote/</guid><description>&lt;p>2014 Red Hat Summit- Paul Cormier, Red Hat keynote&lt;/p></description></item><item><title>饥饿游戏3：嘲笑鸟(上) The Hunger Games: Mockingjay - Part 1 (2014)</title><link>https://martinliu.cn/2015/02/08/e9a5a5e9a5bfe6b8b8e6888f3efbc9ae598b2e7ac91e9b89fe4b88a-hunger-games-mockingjay-part-1-2014/</link><pubDate>Sun, 08 Feb 2015 14:47:40 +0000</pubDate><guid>https://martinliu.cn/2015/02/08/e9a5a5e9a5bfe6b8b8e6888f3efbc9ae598b2e7ac91e9b89fe4b88a-hunger-games-mockingjay-part-1-2014/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/p2199467907.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/02/p2199467907.jpg"
loading="lazy"
alt="p2199467907"
>&lt;/a>&lt;/p>
&lt;p>是我很久没有看电影的原因么，总之看了还是觉得不错的。可是豆瓣的评分颇低，无所谓他人怎么看了，我自己娱乐好了就行。下一部想看的是《unbreak》&lt;/p>
&lt;p>导演: &lt;a class="link" href="http://movie.douban.com/celebrity/1000242/" target="_blank" rel="noopener"
>弗朗西斯·劳伦斯&lt;/a>
编剧: &lt;a class="link" href="http://movie.douban.com/celebrity/1017969/" target="_blank" rel="noopener"
>丹尼·斯特朗&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1041402/" target="_blank" rel="noopener"
>彼得·克莱格&lt;/a>
主演: &lt;a class="link" href="http://movie.douban.com/celebrity/1022616/" target="_blank" rel="noopener"
>詹妮弗·劳伦斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1053556/" target="_blank" rel="noopener"
>乔什·哈切森&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1012478/" target="_blank" rel="noopener"
>利亚姆·海姆斯沃斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1053560/" target="_blank" rel="noopener"
>伍迪·哈里森&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1010556/" target="_blank" rel="noopener"
>唐纳德·萨瑟兰&lt;/a> /  更多&amp;hellip;
类型:  剧情  /  动作  /  科幻  /  冒险
制片国家/地区:  美国
语言:  英语
上映日期: 2015-02-08(中国大陆) / 2014-11-21(美国)
片长: 123 分钟
又名:  饥饿游戏：自由幻梦 I(台) / 饥饿游戏终极篇：自由幻梦 1(港) / 饥饿游戏 3：自由幻梦(上) / 饥饿游戏：自由梦幻(上) / 饥饿游戏 第三部(上) / 嘲笑鸟(上) / Seashore
IMDb 链接: &lt;a class="link" href="http://www.imdb.com/title/tt1951265" target="_blank" rel="noopener"
>tt1951265&lt;/a>&lt;/p></description></item><item><title>2014年AWS服务更新总结</title><link>https://martinliu.cn/2015/02/08/2014e5b9b4awse69c8de58aa1e69bb4e696b0e680bbe7bb93/</link><pubDate>Sun, 08 Feb 2015 14:24:33 +0000</pubDate><guid>https://martinliu.cn/2015/02/08/2014e5b9b4awse69c8de58aa1e69bb4e696b0e680bbe7bb93/</guid><description>&lt;p>从去年新增的服务中可以看出，其中多半是管理和基础服务类型的更新。因此，我感觉这也预示着，公有云技术的领头羊的发展也上到一定的成熟度上了。相比而言，企业私有云的建设还是纠结在几个症结上：选择私有云平台软件难，选择部署实施的落地工具和服务难，市场上相关的人才难找，大多出人连试点的经验还没还有获得，云应用-无状态应用踪影难觅。这些事实下，我看到了私有云建设的广阔服务前景，特别是企业服务这块。感觉有技术的实力派大牛们，应该趁着国产化软件的浪潮，踏踏实施做两年企业级产品，踏踏试试走下企业服务的路。别惦记着风头的那些钱，别惦记着做个公有云服务出来走出国门走向世界。我朝企业不差钱的主，土豪的企业有的事。毕竟近水楼台先得月。&lt;/p>
&lt;p>有一段时间没有关注 AWS 了，下面是在 &lt;a class="link" href="http://aws-faq.com" target="_blank" rel="noopener"
>aws-faq.com &lt;/a>发的新贴。顺便梳理了一下过去一年的更新情况，&lt;/p>
&lt;p>&lt;a class="link" href="http://www.aws-faq.com/featured/aws-%e6%9c%8d%e5%8a%a12015%e5%b9%b4%e5%bc%80%e5%b9%b4%e6%9c%89%e5%95%a5%e6%9b%b4%e6%96%b0.html" target="_blank" rel="noopener"
>http://www.aws-faq.com/featured/aws-服务 2015 年开年有啥更新.html&lt;/a>&lt;/p>
&lt;p>AWS 在去年新增了 6 个服务，整体的更新和服务升级的频率是一周一次；也就是说他们发布新版本的频率是每周一次，当然这是有网上发布信息为依推理出来的；感觉一周很可能超过一次。他们的电商也其它业务的发布评论，很可能就更高了。&lt;/p>
&lt;p>AWS 的公有云服务的技术成熟度和领先度我感觉是第一名的。它激发和促进了整个行业的发展。对私有云的促进和很明显。OpenStack 的更新是半年一个新版本。其参考和兼容 AWS 服务是很明显的。它可以很大的满足于企业自建云服务的需求。&lt;/p></description></item><item><title>AWS-FAQ post - AWS 一月有什么动态?</title><link>https://martinliu.cn/2015/02/07/aws-faq-post-aws-e4b880e69c88e69c89e4bb80e4b988e58aa8e68081/</link><pubDate>Sat, 07 Feb 2015 15:07:42 +0000</pubDate><guid>https://martinliu.cn/2015/02/07/aws-faq-post-aws-e4b880e69c88e69c89e4bb80e4b988e58aa8e68081/</guid><description>&lt;p>AWS-FAQ post - AWS 一月有什么动态?&lt;/p>
&lt;p>&lt;a class="link" href="http://www.aws-faq.com/blog/aws-blog/aws-%E4%B8%8A%E5%91%A8%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88-2015-%E5%B9%B41%E6%9C%88.html" target="_blank" rel="noopener"
>http://www.aws-faq.com/blog/aws-blog/aws-%E4%B8%8A%E5%91%A8%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88-2015-%E5%B9%B41%E6%9C%88.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>AWS 邮件服务的推出还是比较有趣，虽然很晚推出这个服务，但是还是推出了&lt;/li>
&lt;li>__ 总之 1 月的动静不大&lt;/li>
&lt;/ul></description></item><item><title>提交提交了一个BZ</title><link>https://martinliu.cn/2015/02/02/e68f90e4baa4e68f90e4baa4e4ba86e4b880e4b8aabz/</link><pubDate>Mon, 02 Feb 2015 15:40:52 +0000</pubDate><guid>https://martinliu.cn/2015/02/02/e68f90e4baa4e68f90e4baa4e4ba86e4b880e4b8aabz/</guid><description>&lt;p>用 163 邮箱注册了http://bugzilla.redhat.com/ ; 提交了一个 satellite 的 bug。&lt;/p></description></item><item><title>Fedora 21 Server测试 - Cockpit篇</title><link>https://martinliu.cn/2015/01/27/fedora-21-server-e6b58be8af95-cockpite7af87/</link><pubDate>Tue, 27 Jan 2015 16:22:18 +0000</pubDate><guid>https://martinliu.cn/2015/01/27/fedora-21-server-e6b58be8af95-cockpite7af87/</guid><description>&lt;p>先上几张 Fedora 21 server 安装的截图。&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53424,53425,53426,53427&amp;rdquo;]&lt;/p>
&lt;p>新的配色还是不错的，重点看第三张图，虽然不全，已经基本上看出 F21 服务器版的软件包了。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-28-001822.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-28-001822-1024x686.png"
loading="lazy"
alt="Screenshot from 2015-01-28 00:18:22"
>&lt;/a>&lt;/p>
&lt;p>安装之后发现确实 Cockpit 的界面已经可以登陆了，是黑色的风格。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-27-235218.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-27-235218-1024x625.png"
loading="lazy"
alt="Screenshot from 2015-01-27 23:52:18"
>&lt;/a>&lt;/p>
&lt;p>在继续安装和探索之前，我有装了一个默认选项的 f21 server ，想通过这个节点的节目添加后统一管理。&lt;/p>
&lt;p>[gallery columns=&amp;ldquo;1&amp;rdquo; size=&amp;ldquo;large&amp;rdquo; ids=&amp;ldquo;53433,53434,53435,53436,53437,53438,53439,53440,53441,53442,53443,53444,53445,53446,53447,53448&amp;rdquo;]&lt;/p>
&lt;p>我感觉有了这个工具，新手们可以轻松第完成大部分 Linux 系统的维护工作了。&lt;/p>
&lt;p>如果你点击了启用 docker , eth0 的网络配置会丢失，会被 docker 那走作网桥，给他的 image 用作网关。这个测试最好是虚拟机多网卡。&lt;/p></description></item><item><title>Fedora 22 有何值得期待</title><link>https://martinliu.cn/2015/01/26/fedora-22-e69c89e4bd95e580bce5be97e69c9fe5be85/</link><pubDate>Mon, 26 Jan 2015 14:26:12 +0000</pubDate><guid>https://martinliu.cn/2015/01/26/fedora-22-e69c89e4bd95e580bce5be97e69c9fe5be85/</guid><description>&lt;p>我使用这新安装的 F21，连接着公司阿姆斯特丹的 VPN，流畅的使用 Firefox ， Chrome 上网，在没有墙的世界里顺利传行着。重返 Linux 世界，想起来很久没有用 windows 桌面了，渐渐适应和熟悉这感觉，且有些怀旧。&lt;/p>
&lt;p>之前 Fedora 是没有太多的体验，用的最多的是 opensuse + kde 桌面的组合。目前，看到 fedora magazine 上很多更新，感觉真的是发展的太快了。 http://fedoramagazine.org/see-whats-coming-in-fedora-22-workstation/ 看了下这个帖子，上面说 F22 的提升包括：更长的电池寿命、gnome Wayland 更多改进、开始应用 bundle 的开发、更好的第三方应用支持、提升 Terminal、改善开发工具等等。查看更多细节：&lt;a class="link" href="http://blogs.gnome.org/uraeus/2015/01/19/planning-for-fedora-workstation-22/" target="_blank" rel="noopener"
>Christian’s blog pos&lt;/a>t&lt;/p></description></item><item><title>再次入手Linux - Fedora 21</title><link>https://martinliu.cn/2015/01/25/e5868de6aca1e585a5e6898blinux-fedora-21/</link><pubDate>Sun, 25 Jan 2015 10:10:09 +0000</pubDate><guid>https://martinliu.cn/2015/01/25/e5868de6aca1e585a5e6898blinux-fedora-21/</guid><description>&lt;p>再次安装桌面版的 Linux 操作系统 ，并打算作为主要的工作平台。已经是 fedora 21，需要新贴纸了。&lt;/p>
&lt;p>接下来作的：http://www.linuxidc.com/Linux/2015-01/111481.htm&lt;/p>
&lt;p>剩余没做的是按照搜狗输入法。&lt;/p></description></item><item><title>虚拟机根分区扩容</title><link>https://martinliu.cn/2015/01/21/e8999ae68b9fe69cbae6a0b9e58886e58cbae689a9e5aeb9/</link><pubDate>Wed, 21 Jan 2015 15:46:31 +0000</pubDate><guid>https://martinliu.cn/2015/01/21/e8999ae68b9fe69cbae6a0b9e58886e58cbae689a9e5aeb9/</guid><description>&lt;p>我的 Satellite 虚拟机下载了所有常用的 repo，100GB 的磁盘空间都占满了，无奈必须扩容，否则没法用了。&lt;/p>
&lt;p>扩容的前提条件正好满足：根分区在最后一个分区。&lt;/p>
&lt;p>由于是 kvm 的虚拟机，所以首先需要扩大硬盘文件的大小： qemu-img resize my.img +100G 。&lt;/p>
&lt;p>下面去操作系统里扩容。先要用 fdisk 删除根分区。记录初始的其实点。然后用 n 命令新建分区，输入原始其实点位置，回车默认接受结束点的最后一个位置。w 存盘。&lt;/p>
&lt;p>reboot 系统，起来之后用命令扩容分区： resize2fs /dev/vda2 ； 在线扩容需要等一段时间，100GB 的空间初始化在我的普通磁盘上做了 5 分钟左右。在此 reboot 机器，起来之后在看 df -kh 发现已经增加了 100GB 了，接下来再也不用担心类似情况了。&lt;/p></description></item><item><title>RHEL 性能 提升方法和工具</title><link>https://martinliu.cn/2015/01/10/rhel-e680a7e883bd-e68f90e58d87e696b9e6b395e5928ce5b7a5e585b7/</link><pubDate>Sat, 10 Jan 2015 16:42:29 +0000</pubDate><guid>https://martinliu.cn/2015/01/10/rhel-e680a7e883bd-e68f90e58d87e696b9e6b395e5928ce5b7a5e585b7/</guid><description>&lt;p>RHEL 7 中已经引入了比较完备的性能优化、调整和监控的工具。对于我这个监控背景的人来说，不具体看下，实在忍不住。&lt;/p>
&lt;p>首先，从这篇 KB 学起来把。&lt;a class="link" href="https://access.redhat.com/articles/785283" target="_blank" rel="noopener"
> https://access.redhat.com/articles/785283&lt;/a>&lt;/p>
&lt;p>RHEL 下性能调优的工具有三种。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Performance Co-Pilot&lt;/p>
&lt;/li>
&lt;li>
&lt;p>TUNA&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Tuned&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>下面依次简单说下这几个工具。&lt;/p>
&lt;h1 id="performance-co-pilot-监控工具"> Performance Co-Pilot 监控工具&lt;/h1>
&lt;p>[caption id=&amp;ldquo;attachment_53397&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;1000&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000449-1000x630.png"
loading="lazy"
alt="PCP Charts - Overview View"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000449.png" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000449.png&lt;/a>) PCP Charts - Overview View[/caption]&lt;/p>
&lt;p>PCP 是一个工具集，它分为两个部分：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>PCP Collectors ： 性能指标数据采集器，它可以从系统内核或者其他数据源来持续的采集数据。是由几个系统服务组成。 These are the parts of PCP that collect and extract performance data from various sources, e.g. the operating system kernel.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PCP Monitors ：性能参数集中查看和监控的图形界面。它可以同时连接多台服务器。These  are the parts of PCP that display data collected from hosts (or archives) that have the PCP Collector installed.  Many monitor tools are available as part of the core PCP release, whileother (typically graphical) monitoring tools are available separately in the  PCP  GUI package.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>极简实施测试方法：&lt;/p>
&lt;ol>
&lt;li>安装 pcp 的相关软件包（在需要被监控的机器上安装 pcp 即可，在需要使用图形界面查看的机器上安装 pcp-gui）&lt;/li>
&lt;/ol>
&lt;p>$ yum install pcp pcp-gui&lt;/p>
&lt;ol start="2">
&lt;li>启用数据收集器的服务（在需要被监控的机器上运行这些服务，在监控的周期完成之后，可以考虑关闭这些服务）&lt;/li>
&lt;/ol>
&lt;p>$ chkconfig pmcd on; service pmcd start
$ chkconfig pmie on; service pmie start
$ chkconfig pmlogger on; service pmlogger start&lt;/p>
&lt;ol start="3">
&lt;li>查看监控到的图形：&lt;/li>
&lt;/ol>
&lt;ol>
&lt;li>
&lt;p>在 pcp-gui 主机的 host 文件中加入被监控主机的地址解析&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在 RHEL 7 桌面的程序中，找到并运行 PCP Charts 程序&lt;/p>
&lt;/li>
&lt;li>
&lt;p>它默认就是连接到本机，因此加入我们需要查看的性能参数图形即可。点击 open view ，选择 overview 视图即可。当然，它内置的监控视图还有很多，当然如果你希望，还可以把远程的服务器性能实时状态（点击新建视图）视图也加入进来。其它视图如下图所示。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>[caption id=&amp;ldquo;attachment_53396&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;520&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000611-520x306.png"
loading="lazy"
alt="内置视图"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000611.png" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-11-000611.png&lt;/a>) 内置监控视图[/caption]&lt;/p>
&lt;p>更多信息求助   man PCPIntro documentation.&lt;/p>
&lt;p>主要适用场景：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>在 RHEL 下作应用或者操作系统的性能测试或调优，如果不需要或者没有必要使用第三方工具的话，它应该是首选。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对生产系统性能做瓶颈定位，用它可以收集和追踪系统一段时间（一天、一周、一个月）的各种性能参数的表现情况，收集下来的数据可以作单点的或者横向的分析。它能够收集的参数还是相当全面的。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>PCP 的目的是了解系统的实时的性能状态，为性能调优找到方向和目标。也可以作为日常性能监控的工具之一，为性能派错提供一臂之力。&lt;/p>
&lt;h1 id="tuna">TUNA&lt;/h1>
&lt;p>TUNA 则适合于复杂性能参数的调整，能对很多 kernel 和网络的性能参数在图形界面中配置，对于一次性要修改 n 个文件的深度复杂性能调优，它可以是一个提高工作效率的利器。而且，如果是某种性能参模版，可以用它作配置的导入导出。这一便于工程师，面对一对类似系统做重复的手工劳动。&lt;/p>
&lt;p>[gallery size=&amp;ldquo;mobile&amp;rdquo; link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53398,53399,53400&amp;rdquo;]&lt;/p>
&lt;p>极简实施测试方法：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Install the necessary packages:
$ yum install tuna&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Start the tuning application
$ tuna&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>For more information, please see the man tuna documentation&lt;/p>
&lt;p>主要适用场景：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>高效深度调优&lt;/p>
&lt;/li>
&lt;li>
&lt;p>工作在范围比较大的性能参数上&lt;/p>
&lt;/li>
&lt;li>
&lt;p>需要保存并且一致地实施这些参数配置到其它机器上&lt;/p>
&lt;/li>
&lt;li>
&lt;p>希望使用图形界面操作&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="tuned">TUNED&lt;/h1>
&lt;p>写了一堆文字了，现在我才开始我需要作的正事。我的需求是：优化一台物理的测试机的性能。我希望用最少的时间，直接让系统进入针对 kvm 虚拟机性能优化的基础优化状态（性能优化基线）。目前我还没有时间关心所有的性能参数细节，我只想快速完成这件事。方法如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>安装 tuned
$ yum install tuned&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用 tuned-adm 选择并加载
$ tuned-adm list
Available profiles:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>balanced&lt;/li>
&lt;li>blog&lt;/li>
&lt;li>latency-performance&lt;/li>
&lt;li>powersave&lt;/li>
&lt;li>sap&lt;/li>
&lt;li>throughput-performance&lt;/li>
&lt;li>virtual-guest&lt;/li>
&lt;li>virtual-host
Current active profile: balanced&lt;/li>
&lt;/ul>
&lt;p>tuned-adm profile  virtual-host      // 最重要的就是这个命令，让操作系统优化成虚拟机 host 服务器的性能优化调整基线&lt;/p>
&lt;p>上面这条命令其实就是我写本文的目的。打完这条命令，我可以洗洗睡了。如果你还睡不着，可以看下下面这个文章。&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7-Beta/html-single/Performance_Tuning_Guide/#_tuned_adm" target="_blank" rel="noopener"
>Red Hat Enterprise Linux 7.0 - Performance Tuning Guide - 3.7. tuned-adm&lt;/a>&lt;/p>
&lt;h1 id="性能-提升方法">  性能 提升方法&lt;/h1>
&lt;p>性能调优有几个方面需要考量。工具方面，需要选择一个合适的工具集，需要这个工具集能够统一的覆盖所有需要管理和调优的操作系统类型和版本；目的在于能够得到所有系统的基于统一工具的性能快照（当前的状态基线）；流程方面，需要建立性能调优和持续性能改进的流程。它应该和 ITIL 里的可用性管理和容量管理关联起来。性能提升的流程应该有一下几个活动：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>目标选择：选择当前环境性能基线快照目标的对象服务器，选择尽可能要典型、全面、量要够。针对采样对象，作统一的性能参数收集，选择必选和候选的性能参数指标。指标要选的有目的和有特点。目标采样对象可能会慢慢的扩大到更多的对象。目标采集的性能参数也需要，每次都 review，可以作有必要的调整。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>性能参数收集：最好在相同的时间段内收集一定时长的性能参数。建议使用一种统一的工具，这样可以更好第做横向对比。实在不行，可以对同一种操作系统使用一种工具。当然采集工具的数量越少越好，越多工作量越大，分析报表的成本越高。这个阶段 RHEL 上可以使用 PCP。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立性能调优目标：每一种业务应用或者某一类系统的基本性能诉求可能是一致的，把收集回来的数据，做分析整理和加工，对比历史的、业内标准的或者同行业的参考数据。得出本次性能参数调整的目标参数集。不同类型的系统，目标调整的参数集应该是不同的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>实施性能优化参数：手工的或者用自动化工具来在目标系统中实时系统参数调整。当然，建议提前做测试，保证不会影响业务正常运行，也可以使用分批分拨实施的方法。建议的方法如下，a)使用自动化配置管理工具，如 puppet 或类似方案，把参数调整模版用 puppet 的模块来表达，并持续改进，发布最新的版本到目标 host group 上去即可。b）使用手工的方式实施，这里可用用到 tuna 工具。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>调优结果分析：再次收集一个周期的性能数据。对比这些数据和第二步骤中的数据。分析和记录本次调优的成败和总结。找出提升的部分，无提升的步骤。为下次调优做些后续的注意事项。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以上活动应该在 IT Service mnager 的负责下定期执行。目标就是提升系统性能和效率，确保每个业务都能运行在最高的性能，为系统的容量管理和性能管理给出可靠的参考数据。&lt;/p>
&lt;p>最后，tuned 并没有写在上面的流程中，并不是说它没有到。它其实应该被用在每个操作系统实例安装和初始化的阶段。它提供的是红帽为 RHEL 推荐的最基础的性能调优参数建议，是性能调优基线的基线。实施方法很简单，在系统初始化的 post action 中加入这个条目，针对不同类型的系统激活一个合适的 profile 即可。&lt;/p>
&lt;p>性能 提升不是一蹴而就的，而是一个长期的过程。可以使用 PDAC 的思想，扎实的走好以上建议流程。使用自动化运维工具和必要的数据分析工具加速以上流程。&lt;/p></description></item><item><title>KVM Virt-Manager 实用参考手册</title><link>https://martinliu.cn/2015/01/06/kvm-virt-manager-e5ae9ee794a8e58f82e88083e6898be5868c/</link><pubDate>Tue, 06 Jan 2015 15:55:02 +0000</pubDate><guid>https://martinliu.cn/2015/01/06/kvm-virt-manager-e5ae9ee794a8e58f82e88083e6898be5868c/</guid><description>&lt;h1 id="关于-virt-manager">关于 virt manager&lt;/h1>
&lt;p>Virt Manager 是一个不错的 kvm 虚拟机管理工具，能够方便地管理虚拟机。我的测试机目前已经完全转向 RHEL7 上跑 KVM 虚拟机，通过 virt-manager 去管理的方案。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/topbar_logo.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/topbar_logo.png"
loading="lazy"
alt="topbar_logo"
>&lt;/a>&lt;/p>
&lt;p>安装 virt-manager：yum install -y virt-* ； 装完之后重新启动机器即可使用。&lt;/p>
&lt;h1 id="建议初始配置">建议初始配置&lt;/h1>
&lt;p>安装完后有几个环境的配置推荐可以做一下。&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/virt-manager-kvm-1/Screenshot-from-2015-01-06-193413.png"
loading="lazy"
alt="点击New Volume"
>&lt;/p>
&lt;p>Storage Pool ： 一个默认的 + 两个自建的&lt;/p>
&lt;ul>
&lt;li>Default ：这是 virt-manager 安装时默认创建的，它和操作系统在同一个卷上，我的测试机使用 SSD 卷，因此我所有虚拟机都会使用这个卷，这样速度比较快&lt;/li>
&lt;li>hd ：这是测试机上普通磁盘的一个目录，目的是把那些不需要快速 IO 的虚拟机跑着这里，节省 SSD 的磁盘空间&lt;/li>
&lt;li>iso ：这是普通磁盘上的 iso 文件目录，单独挂在这是为了，使用方便&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/virt-manager-kvm-1/Screenshot-from-2015-01-06-210927.png"
loading="lazy"
alt="自建的内外1"
>&lt;/p>
&lt;p>虚拟网络 （一个默认+两个新建）&lt;/p>
&lt;ul>
&lt;li>default ： 这个是安装了 virt-manager + kvm 之后就有的，是用 NAT 的方式，带 dhcp，默认虚拟机可以连接物理机所在的外围&lt;/li>
&lt;li>virbr1/virbr2 ：是我根据自己的需要建立的，只能和 host 物理机通讯，无 dhcp&lt;/li>
&lt;/ul>
&lt;p>我最近做 OpenStack 的实践，OpenStack 需要最好隔离的几个网络跑不同的数据，因此 virbr1/2 正好符合 OpenStack 的测试需求。另外我在物理机的操作系统上搭建了 yum 源服务器，因此任何一个虚拟机都可以通过 http 访问我放在物理机上的 repo 目录，我只需要更新这些 repos 目录里面的 rpm 包的内容，我的 lab 环境中的所有虚拟机（不管是在何网络）都可以使用到最新的系统更新包和软件包了。这样大大提高了虚拟机里面软件测试的效率，所有虚拟机像是在本地安装 rpm 软件包一样，再也不需要联网下载，我只需要每周去公司联网同步一下这些目录即可。&lt;/p>
&lt;p>有了以上配置之后，就可以高效工作了，效率感觉比 vmware workstation 要高，速度快稳定。下面是虚拟机创建的流程，里面有些我的推荐做法。&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/nextgen-attach_to_post/preview/id--53382"
loading="lazy"
>&lt;/p>
&lt;p>本想看下，virt-install 的使用方式，感觉那个参数太多，容易敲错，还是界面比较容易上手，而且出错的机会不高。&lt;/p>
&lt;h1 id="命令行常用操作指南持续更新中">命令行常用操作指南（持续更新中）&lt;/h1>
&lt;p>virt-manager 主要操作还是在命令行比较高效，特别是下面的这些操作，在使用过程中，比较多用，用的多了感觉比 GUI 操作方式效率高多了。&lt;/p>
&lt;p>virt-manager 的命令行功能调用有两种方式：&lt;/p>
&lt;ul>
&lt;li>直接 virsh 回车 ，之后就进入了 virsh # 的一个专门的 shell，help 就能看的里面支持的所有命令&lt;/li>
&lt;li>在普通 shell 下 直接 virsh &amp;lt;操作命令&amp;gt; &amp;lt;参数&amp;gt;，&lt;/li>
&lt;/ul>
&lt;p>这两个方式的调用没有差异，感觉全凭个人的操作习惯。&lt;/p>
&lt;p>下面是一些常用的虚拟机管理功能命令参数和实例。&lt;/p>
&lt;p>开启一个虚拟机&lt;/p>
&lt;p>virsh # start server8-a&lt;/p>
&lt;p>查看所有虚拟机(on and off)&lt;/p>
&lt;p>virsh list &amp;ndash;all&lt;/p>
&lt;p>关闭一个虚拟机&lt;/p>
&lt;p>virsh # shutdown server8-a&lt;/p>
&lt;p>对一个虚拟机作一个快照&lt;/p>
&lt;p>snapshot-create-as server8-a flat-os &amp;ldquo;before customization&amp;rdquo;&lt;/p>
&lt;p>查看虚拟的所有快照&lt;/p>
&lt;p>snapshot-list server8-a&lt;/p>
&lt;p>返回到之前的一个 snapshot&lt;/p>
&lt;p>virsh # snapshot-revert  &amp;ndash;domain server8-a flat-os&lt;/p>
&lt;p>克隆一个虚拟机到新文件（用于模板的复制创建新 vm，或者 vm 的备份）&lt;br>
[root@w540 Desktop]# virt-clone -o rhel70-tmp -n rhel70-tmp-clone -f /data/vm/cloned-new-vm.img&lt;br>
Cloning rhel7-tmp.img                                                                             | 195 GB  00:00:03     &lt;br>
Clone &amp;lsquo;rhel70-tmp-clone&amp;rsquo; created successfully.&lt;/p></description></item><item><title>wget 下载大文件-断点续传</title><link>https://martinliu.cn/2014/12/24/wget-e4b88be8bdbde5a4a7e69687e4bbb6-e696ade782b9e7bbade4bca0/</link><pubDate>Wed, 24 Dec 2014 01:43:03 +0000</pubDate><guid>https://martinliu.cn/2014/12/24/wget-e4b88be8bdbde5a4a7e69687e4bbb6-e696ade782b9e7bbade4bca0/</guid><description>&lt;p>举例如下：&lt;/p>
&lt;p>wget -c -b -t 0 -O CentOS-7.0-1406-x86_64-Everything.iso  &lt;a class="link" href="http://mirrors.sohu.com/centos/7/isos/x86_64/CentOS-7.0-1406-x86_64-Everything.iso" target="_blank" rel="noopener"
>http://mirrors.sohu.com/centos/7/isos/x86_64/CentOS-7.0-1406-x86_64-Everything.iso&lt;/a> -o centos.log&lt;/p>
&lt;p>下载一个 7GB 的 DVD 文件，能够断点续传，能够把状态写入 centos.log 文件中。具体参数说明如下：&lt;/p>
&lt;p>[su_table]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>本文参考：&lt;a class="link" href="http://blog.chinaunix.net/uid-14735472-id-111049.html" target="_blank" rel="noopener"
>http://blog.chinaunix.net/uid-14735472-id-111049.html&lt;/a>&lt;/p></description></item><item><title>Workshop: Creating a Docker management environment</title><link>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</link><pubDate>Thu, 04 Dec 2014 02:46:04 +0000</pubDate><guid>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</guid><description>&lt;p>Red Hat APAC Tech Exchange, Macau&lt;/p>
&lt;p>Day 3 - 4 December 2014   &amp;ndash;  Track C&lt;/p>
&lt;h2 id="command-to-run">Command to Run&lt;/h2>
&lt;p>bash &amp;lt;(curl -sSL &lt;a class="link" href="https://bit.ly/get-fabric8" target="_blank" rel="noopener"
>https://bit.ly/get-fabric8&lt;/a>) -k&lt;/p>
&lt;h2 id="document-to-read">Document to read&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.docker.com/installation/" target="_blank" rel="noopener"
>https://docs.docker.com/installation/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://fabric8.io/v2/index.html" target="_blank" rel="noopener"
>http://fabric8.io/v2/index.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/fabric8io/quickstarts" target="_blank" rel="noopener"
>https://github.com/fabric8io/quickstarts&lt;/a>&lt;/p>
&lt;p>My document: &lt;a class="link" href="https://access.redhat.com/articles/881893" target="_blank" rel="noopener"
>https://access.redhat.com/articles/881893&lt;/a>&lt;/p>
&lt;h2 id="blogs">Blogs&lt;/h2>
&lt;p>&lt;a class="link" href="http://rawlingsj.blogspot.com/" target="_blank" rel="noopener"
>http://rawlingsj.blogspot.com/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://macstrac.blogspot.co.uk/" target="_blank" rel="noopener"
>http://macstrac.blogspot.co.uk/&lt;/a>&lt;/p></description></item><item><title>workshop redhat storage and splunk</title><link>https://martinliu.cn/2014/12/04/workshop-redhat-storage-splunk/</link><pubDate>Thu, 04 Dec 2014 02:34:03 +0000</pubDate><guid>https://martinliu.cn/2014/12/04/workshop-redhat-storage-splunk/</guid><description>&lt;h2 id="instance-details">Instance Details&lt;/h2>
&lt;p>Replace userX with your user id. For example, user1 &amp;ndash;&amp;gt; user 30&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h3 id="on-your-laptop">On your laptop&lt;/h3>
&lt;p>cd ~/.ssh
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub&lt;/a>
chmod 600 rhte-splunk-lab
chmod 644 rhte-splunk-lab.pub&lt;/p>
&lt;p>ssh -i ~/.ssh/rhte-splunk-lab -l ec2-user gw-userX.apac.red&lt;/p>
&lt;h3 id="on-all-rhs-nodes">On all RHS Nodes&lt;/h3>
&lt;p>sudo su -
subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-6-server-rpms &amp;ndash;enable rhs-3-for-rhel-6-server-rpms &amp;ndash;enable rhel-scalefs-for-rhel-6-server-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>cat /etc/redhat-* # should say Red Hat Enterprise Linux 6.6 (Santiago) and Red Hat Storage 3.0 Update 2&lt;/p>
&lt;p>/sbin/service glusterd restart&lt;/p>
&lt;h3 id="on-rhs-01">On RHS-01&lt;/h3>
&lt;p>gluster peer probe rhs-02.userX.apac.red
gluster peer probe rhs-03.userX.apac.red
gluster peer probe rhs-04.userX.apac.red&lt;/p>
&lt;p>gluster pool list&lt;/p>
&lt;p>gluster volume create splunk replica 2 rhs-01.userX.apac.red:/srv/brick1/splunk rhs-02.userX.apac.red:/srv/brick1/splunk rhs-03.userX.apac.red:/srv/brick1/splunk rhs-04.userX.apac.red:/srv/brick1/splunk&lt;/p>
&lt;p>gluster volume set splunk storage.owner-uid 1001
gluster volume set splunk storage.owner-gid 1001
gluster volume set splunk user.nfs disable&lt;/p>
&lt;p>gluster volume start splunk&lt;/p>
&lt;p>gluster volume info
gluster volume status&lt;/p>
&lt;h3 id="on-splunk-master-and-splunk-search-nodes">On Splunk Master and Splunk Search Nodes&lt;/h3>
&lt;p>subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-7-server-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;h3 id="on-all-splunk-nodes">On all Splunk Nodes&lt;/h3>
&lt;p>subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-7-server-rpms &amp;ndash;enable rhel-7-server-openstack-5.0-rpms &amp;ndash;enable rhel-7-server-rh-common-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>yum -y install wget lvm2&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;p>/bin/systemctl start lvm2-lvmetad.service
/bin/systemctl start lvm2-monitor.service&lt;/p>
&lt;p>pvcreate &amp;ndash;dataalignment 1024k /dev/xvdb1
vgcreate splunkdb /dev/xvdb1
/sbin/lvcreate -a y -l 100%VG -n splunkdb splunkdb
mkfs.xfs -i size=512 /dev/mapper/splunkdb-splunkdb&lt;/p>
&lt;h3 id="on-all-splunk-nodes-1">On all Splunk Nodes&lt;/h3>
&lt;p>echo -e &lt;code>blkid /dev/mapper/splunkdb-splunkdb | cut -d &amp;quot; &amp;quot; -f 2&lt;/code>&amp;quot;\t/opt/\txfs\tdefaults,inode64,noatime\t0\t0&amp;quot; &amp;raquo; /etc/fstab
mount /opt&lt;/p>
&lt;p>yum -y localinstall splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/p>
&lt;p>echo -e &amp;ldquo;splunk\t\tsoft\tnofile\t10240&amp;rdquo; &amp;raquo; /etc/security/limits.conf
echo -e &amp;ldquo;splunk\t\thard\tnofile\t20480&amp;rdquo; &amp;raquo; /etc/security/limits.conf&lt;/p>
&lt;h3 id="on-splunk-master-and-splunk-search">On Splunk Master and Splunk Search&lt;/h3>
&lt;p>cd /lib/systemd/system
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;p>sed -i.bak &amp;lsquo;/^After|^Requires/d&amp;rsquo; splunkd.service
sed -i.bak &amp;lsquo;/Description/a After=network.target local-fs.target&amp;rsquo; splunkd.service
systemctl daemon-reload
systemctl enable splunkd.service
systemctl start splunkd.service&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;
q
y
systemctl restart splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;&lt;/p>
&lt;h3 id="on-splunk-peer-nodes">On Splunk Peer Nodes&lt;/h3>
&lt;p>yum install -y glusterfs-fuse python-httplib2 attr&lt;/p>
&lt;p>mkdir /mnt/glusterfs
echo -e &amp;ldquo;rhs-01.userX.apac.red:/splunk\t\t/mnt/glusterfs\t\tglusterfs\t\tdefaults,_netdev,backup-volfile-servers=rhs02.userX.apac.red:rhs-03.userX.apac.red:rhs-04.userX.apac.red\t0\t0&amp;rdquo; &amp;raquo; /etc/fstab
mount /mnt/glusterfs&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;mkdir -p /opt/splunk/var/lib/splunk/glusterfs&amp;rsquo;
runuser -l splunk -c &amp;lsquo;mkdir -p /mnt/glusterfs/$(hostname -s)&amp;rsquo;&lt;/p>
&lt;p>cd /lib/systemd/system
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd-pre.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd-pre.service&lt;/a>
systemctl enable splunkd-pre.service
systemctl start splunkd-pre.service&lt;/p>
&lt;p>echo OPTIMISTIC_ABOUT_FILE_LOCKING = 1 &amp;raquo; /opt/splunk/etc/splunk-launch.conf&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service&lt;/a>
systemctl daemon-reload
systemctl enable splunkd.service
systemctl start splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;
q
y
systemctl start splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;&lt;/p>
&lt;p>cd /opt/splunk/bin
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.py" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.py&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.sh" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.sh&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsLinkChecker.py" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsLinkChecker.py&lt;/a>&lt;/p>
&lt;p>chown splunk:splunk/rhs*&lt;/p>
&lt;h3 id="on-gw-userxapacred">on gw-userX.apac.red&lt;/h3>
&lt;p>iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8001 -j DNAT &amp;ndash;to-destination 10.100.0.211:8000
iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8002 -j DNAT &amp;ndash;to-destination 10.100.0.212:8000
iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8003 -j DNAT &amp;ndash;to-destination 10.100.0.213:8000&lt;/p>
&lt;h3 id="web-gui-on-splunk-master-httpsplunkuserxapacred8000">Web GUI on Splunk Master (&lt;a class="link" href="http://splunk.userX.apac.red:8000/" target="_blank" rel="noopener"
>http://splunk.userX.apac.red:8000/&lt;/a>)&lt;/h3>
&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Replication Factor 3
Search Factor 2
Enable Clustering - accept until restart and hit ok&lt;/p>
&lt;h3 id="on-each">on each&lt;/h3>
&lt;p>Web GUI on Splunk Peer 01 (&lt;a class="link" href="http://gw-userX.apac.red:8001/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8001/&lt;/a>)
Web GUI on Splunk Peer 02 (&lt;a class="link" href="http://gw-userX.apac.red:8002/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8002/&lt;/a>)
Web GUI on Splunk Peer 03 (&lt;a class="link" href="http://gw-userX.apac.red:8003/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8003/&lt;/a>)&lt;/p>
&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Enable Clustering
Type - Peer
host = &lt;a class="link" href="https://splunkmaster.userX.apac.red" target="_blank" rel="noopener"
>https://splunkmaster.userX.apac.red&lt;/a>
port 8089
replication port 8090&lt;/p>
&lt;h3 id="web-gui-on-splunk-search-httpsearchuserxapacred8000">Web GUI on Splunk Search (&lt;a class="link" href="http://search.userX.apac.red:8000/" target="_blank" rel="noopener"
>http://search.userX.apac.red:8000/&lt;/a>)&lt;/h3>
&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Enable Clustering
Type - Search
host = &lt;a class="link" href="https://splunkmaster.userX.apac.red" target="_blank" rel="noopener"
>https://splunkmaster.userX.apac.red&lt;/a>
port 8089
replication port 8090&lt;/p>
&lt;h3 id="on-splunk-master-node">on Splunk Master Node&lt;/h3>
&lt;p>cd /opt/splunk/etc/master-apps/_cluster/local directory
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/indexes.conf" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/indexes.conf&lt;/a>
runuser -l splunk -c &amp;lsquo;splunk apply cluster-bundle &amp;ndash;answer-yes&amp;rsquo;
admin
password
runuser -l splunk -c &amp;lsquo;splunk show cluster-bundle-status&amp;rsquo;&lt;/p>
&lt;h3 id="on-each-node">On each Node&lt;/h3>
&lt;p>runuser -l splunk -c &amp;lsquo;splunk search &amp;ldquo;| rest /services/data/indexes | table title, homePath, coldPath&amp;rdquo;&amp;rsquo;|grep demo
&amp;lt; look for $SPLUNKDB/glusterfs/demo/colddb&lt;/p>
&lt;h3 id="on-splunk-master-node-1">on Splunk Master Node&lt;/h3>
&lt;p>su - ec2-user&lt;/p>
&lt;p>cd ~/.ssh
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub&lt;/a>
chmod 600 rhte-splunk-lab
chmod 644 rhte-splunk-lab.pub&lt;/p>
&lt;p>cd /tmp
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/eventgen.tar.gz" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/eventgen.tar.gz&lt;/a>
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-01.userX.apac.red:eventgen.tar.gz
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-02.userX.apac.red:eventgen.tar.gz
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-03.userX.apac.red:eventgen.tar.gz&lt;/p>
&lt;h3 id="on-each-peer-node">On each Peer Node&lt;/h3>
&lt;p>cd /opt/splunk
mv ~ec2-user/eventgen.tar.gz /opt/splunk
chown splunk:splunk eventgen.tar.gz
runuser -l splunk -c &amp;lsquo;splunk install app /opt/splunk/eventgen.tar.gz&amp;rsquo;
runuser -l splunk -c &amp;lsquo;splunk restart&amp;rsquo;&lt;/p>
&lt;p>cd /opt/splunk/etc/apps/eventgen/samples
cp sample.tutorial1 demo_data
sed -i.bak s/main/demo/g demo_data
cd /opt/splunk/etc/apps/eventgen/local
cp ../README/eventgen.conf.tutorial1 eventgen.conf
sed -i.bak &amp;rsquo;s/main/demo/g;s/sample.tutorial1/demo_data/g&amp;rsquo; eventgen.conf&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;splunk restart&amp;rsquo;&lt;/p>
&lt;p>Log into WebUI on Splunk Master
search &amp;ldquo;index = demo&amp;rdquo;
timeframe = realtime &amp;gt; 5 minutes&lt;/p>
&lt;p>check /opt/splunk/var/lib/splunk/demo/db&lt;/p></description></item><item><title>KK 失控 观后感 之前三章</title><link>https://martinliu.cn/2014/12/02/kk-e5a4b1e68ea7-e8a782e5908ee6849f-e4b98be5898de4b889e7aba0/</link><pubDate>Tue, 02 Dec 2014 16:01:07 +0000</pubDate><guid>https://martinliu.cn/2014/12/02/kk-e5a4b1e68ea7-e8a782e5908ee6849f-e4b98be5898de4b889e7aba0/</guid><description>&lt;h1 id="第一章-人造与天生">第一章 人造与天生&lt;/h1>
&lt;h2 id="11-新生物文明">1.1 新生物文明&lt;/h2>
&lt;p>生物的工程化和机器的生物化，这个词出现在我脑海中，并且通过描述一个生动的实际的实验。对生物系统的机器化和机器系统的生物化做对比和类比。开篇就乐观的去迎接新生物文明。&lt;/p>
&lt;h2 id="12-活系统只胜利">1.2 活系统只胜利&lt;/h2>
&lt;p>放生学的成果会促进或活系统向更高阶的智能程度进化，使之机器智能具有自我维持的能力&lt;/p>
&lt;h2 id="13-学会向我们的创造物低头">1.3 学会向我们的创造物低头&lt;/h2>
&lt;p>用非常感性的方式道出了人造物的未来和前景；人造物终究会具有生物的特性，能自活、有适应力和创造力，最后人们失去对他们的控制，并与之对等相处。&lt;/p>
&lt;p>&lt;strong>总体看，第一章在说人造智能的前景和方向，机器和生物特性相互融合是发展的方向。其中也有一丁点环保的意思，人还要保护生态的完整性，人需要想生物界学习的太多了。&lt;/strong>&lt;/p>
&lt;h1 id="第二章-蜂群思维">第二章 蜂群思维&lt;/h1>
&lt;h2 id="21-蜜蜂指导分布式管理">2.1 蜜蜂指导：分布式管理&lt;/h2>
&lt;p>用蜂群的而神秘性和特征，以及人们历史上对他的认识和研究，提出：它是分散和高度统一的矛盾复合体是，是一个非常极端的模式，这种模式可能是人造智能机器最佳的智能神经模式，分布式管理是统一、集中、集权是管理的反面。分布式管理模式是分布式系统的灵魂之一。&lt;/p>
&lt;h2 id="22-群氓的集体智慧">2.2 群氓的集体智慧&lt;/h2>
&lt;p>群氓其实具有高级智慧的可能性和存在性，证明了群体中，简单个低级交互叠加之后可以产生对群体的复杂控制，这种群策群力的抉择能力是单个个体所无感知的，但是确实发生在整个群体上，并有效地扑朔迷离的控制这超多数量简单个体所组织的庞大蜂群。&lt;/p>
&lt;h2 id="23-非均质的看不见的手">2.3 非均质的看不见的手&lt;/h2>
&lt;p>本想客观记录，不想在本文中投入任何感性，禁不住还是想表扬一下翻译者；这种神人实在不多，把这些晦涩难懂的跨界巨大的文章，翻译到这个程度真是值得赞赏，从行文和用词上，真非常达意、恰当和易懂。&lt;/p>
&lt;p>涌现这个概念提出了，它使蜂群和蚁群的操控模式的共性；是非线性的存在；不想人、或者高级生物的意识、是按时间连续的，它是蜂群的另外一个，看似无用、无聊和没有意义的特征之一。继续分析蜂群的奥妙中。&lt;/p>
&lt;h2 id="24-认知行为的分散记忆">2.4 认知行为的分散记忆&lt;/h2>
&lt;p>类比人的智慧模式，人也潜在的具有上面的蜂群的那些特征。&lt;/p>
&lt;h2 id="25-从量变到质变">2.5 从量变到质变&lt;/h2>
&lt;p>简单、相同类事件的大量发生可带来一个必然的结果，这是预测说，也是反馈性控制的根基定律。把它和具有涌现型意识的事物管理在一起后，就形成了智能控制了，也就是，让机器有所为，有所不为的行为控制，这就到了一种高度的自发的智能程度。它是一种自发的智慧，他们积累和叠加后经过质变，就失控了，而这种状态就是更高的智能程度“意识”；现在看到机器能够令人恐惧的一面了。&lt;/p>
&lt;h2 id="26-群集的利与弊">2.6 群集的利与弊&lt;/h2>
&lt;p>群集就是分布式并行的网络结构，或者是内部组成逻辑，或者是机体组织方式。总结分析了具有这种内质的活系统，在理论上应该具有的特点和优势。&lt;/p>
&lt;h2 id="27-网络是二十一世纪的目标">2.7 网络是二十一世纪的目标&lt;/h2>
&lt;p>蜂群思维的应用不容易，他需要人们的自我否定，而人是很难去颠覆已有的常识；本文用互联网网络证明了蜂群的事实存在性。&lt;/p>
&lt;p>&lt;strong>这一章的干货真的不少，其中的活系统是关键词。它应该是本书的精华之一。&lt;/strong>&lt;/p>
&lt;h1 id="第三章-有心智的机器">第三章 有心智的机器&lt;/h1>
&lt;h2 id="31-取悦身体的机器">3.1 取悦身体的机器&lt;/h2>
&lt;p>第一遍读，真不理解作者在扯什么无聊的闲篇充篇幅。再一看其实不是，这一章是循序渐进的描述和论证方法，逻辑上有点严谨的。本节说的是那种最弱智的简单人造机器，已经开始讲述智能机器人了，是智能生物的实施和实践。用真实案例证明它的价值。单体的智能机体的生产。&lt;/p>
&lt;h2 id="32-快速廉价失控">3.2 快速、廉价、失控&lt;/h2>
&lt;p>简单躯体和简单思维逻辑的组合，是可以实现出非常游泳的个体，这些个体如果能就具有群体的包容架构特性，他们将可能出自治的可能性，注意是群体上体现出的自治性，如果可以实现群体的自治，这样包容架构的简单机体在整体上，具有了群级别的共享的智能，它可能反过来在控制到群的个体的行为。&lt;/p>
&lt;h2 id="33-众愚成智">3.3 众愚成智&lt;/h2>
&lt;p>平行彼此对等关联，上下级结构的相互影响。不同层级上德简单任务群体之间可以按，上下级的方式组合起来。各个群体之间，彼此各异，又相互作用，在这种局面下可以形成“集体层面统一的智慧”。这样的微混沌状态中蕴藏着“群体才具备的统一智慧”；群体&amp;ndash;&amp;gt;个体行为&amp;ndash;&amp;gt;聚合作用&amp;ndash;&amp;gt;混沌态&amp;ndash;&amp;gt;整体统一反应&amp;ndash;&amp;gt;智慧（智慧可能抬高了，可以是智能）&lt;/p>
&lt;h2 id="34-嵌套层级的优点">3.4 嵌套层级的优点&lt;/h2>
&lt;p>分布模式下的控制理论。自上而下的模式理论上都是行不通的，简单局部的控制能组合出可以运作的系统；用杂耍抛球机器人的实现，证明了这种方式的可行性和价值；这样做出的有意识地控制，就能产生智能的行为，并可自行地正常运作下去。&lt;/p>
&lt;h2 id="35-利用现实世界的反馈实现交流">3.5 利用现实世界的反馈实现交流&lt;/h2>
&lt;p>中央大脑的从上之下的控制模式下，让机器去模拟人脑对外界的感知，产生唯一真实地外界参考模型，不断更新修正脑中的外部世界模型，之后有中央大脑决定行为方式，同时保持不同部分的正常控制的思路，非常符合常识。但其实是不可用的模式。颠覆人们的常识好像是 KK 的习惯。而行的后，根据结果的正确判断，产生出下一步的动作，这种现实反馈得出的控制行为，可以让机器求生成功。也就是机器能够生存了，看到了把，有更进一步了。&lt;/p>
&lt;h2 id="36-无躯体则无意识">3.6 无躯体则无意识&lt;/h2>
&lt;p>躯体&amp;ndash;&amp;gt;行为&amp;ndash;&amp;gt;感知&amp;ndash;&amp;gt;基于规则的控制=意识。这个推导出了，意识要依托与躯体存在。行为规则下控制躯体成为意识；基于经验反馈的感知后控制行为，这种是高级的控制模式，是智能。这和我看的另外一本书有相关，《人性论》说道人性的三个层次：1 基于意识和经验的知性；2 理性；3 德性。它也是从物理现实世界到精神道德层面的逐层递进。&lt;/p>
&lt;h2 id="37-心智躯体的黑盲性精神错乱">3.7 心智/躯体的黑盲性精神错乱&lt;/h2>
&lt;p>本书跨界确实大，用医学上的临床案例证明意识和躯体的共存性和非孤立存在性，说明心智和躯体的高度一致性。人的躯体是心智的奴隶，我也有一个例子证明：某人一大神晚上睡不着，说打坐一个小时后，心智平静，方的安睡。心智甚至可以达到自我毁灭、毁灭躯体的地步。智附着于躯体，智能可以人造产生，而且人造智能可以有强大的威力。&lt;/p>
&lt;h1 id="总结">总结&lt;/h1>
&lt;p>前三章我在分机上一气呵成做完意识读书笔记，感觉它结构式论述万兆；失控后可产生出智慧的控制；失控和意识控制是完美的矛盾统一，是极低智慧个体聚合融合为群体后，简单控制量变到质变之后，产生出人造智能，群体架构分布式处理管理的躯体成了智能机器。从理论上这种机器智能是可以实施的。&lt;/p></description></item><item><title>明天澳门见</title><link>https://martinliu.cn/2014/12/01/e6988ee5a4a9e6beb3e997a8e8a781/</link><pubDate>Mon, 01 Dec 2014 16:14:51 +0000</pubDate><guid>https://martinliu.cn/2014/12/01/e6988ee5a4a9e6beb3e997a8e8a781/</guid><description>&lt;p>[caption id=&amp;ldquo;attachment_53304&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;802&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/12/10407649_10152796900375816_4259586778690078611_n-e1417451217310.png"
loading="lazy"
alt="10407649_10152796900375816_4259586778690078611_n"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/12/10407649_10152796900375816_4259586778690078611_n-e1417451217310.png" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/12/10407649_10152796900375816_4259586778690078611_n-e1417451217310.png&lt;/a>) If there is anything you need, I won&amp;rsquo;t be far away.[/caption]&lt;/p>
&lt;p>半年了，第一次出差，赶上公司开大会，Apac 整个技术部门的人都汇聚一堂，这是一个 geek 的盛会。期待的看点还是很多的。更有周三超过百人的 geek running。周末会绕道香港，在转机去新加坡，在哪有一周的产品培训。这趟洗肺之旅，不知道能够创下多少公里的跑步里程，我已经按耐不住，脚底板发痒了。&lt;/p>
&lt;p>悲催的我明天才能够拿到港澳签注，因此只能乘坐下午 4 点的航班，到晚上才能到澳门。比其他所有人的到达时间，整整晚了一天。由于签注还没到手，还有一点点忐忑，毕竟我的程三张机票都出好了。但愿明天顺利出发。&lt;/p></description></item><item><title>虚拟桌面 之我见</title><link>https://martinliu.cn/2014/11/23/e8999ae68b9fe6a18ce99da2-e4b98be68891e8a781/</link><pubDate>Sun, 23 Nov 2014 10:16:23 +0000</pubDate><guid>https://martinliu.cn/2014/11/23/e8999ae68b9fe6a18ce99da2-e4b98be68891e8a781/</guid><description>&lt;h1 id="虚拟桌面-的业务价值">虚拟桌面 的业务价值&lt;/h1>
&lt;p>虚拟应用产生在虚拟桌面之前，虚拟应用是一种和 VPN 类似的原创访问方法。它其实最初实现的是图形 GUI 的远程访问，注意不是文字终端。它和 VPN 具有本质的区别，在于虚拟桌面是“终端不留数据/秘”的；这个它性拜它的传输协议所赐，虚拟桌面传输的主要是图像信息和键鼠指令。它的另外一个特性是“维护渐变”，在终端上维护近似于零（除了安装和配置虚拟桌面连接客户端程序外）；在服务器端应用升级和维护简单，主要是通过升级和更新一堆的 Windows 操作系统来实现。因此，主要的业务价值有两点：1）数据安全；2）维护简单。基于这些价值取向，它可以很好地胜任一下业务场景：
[su_list icon=&amp;ldquo;icon: flag&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>多网隔离、集中上网、运维/外包/审计人员访问管理&lt;/li>
&lt;li>前端操作环境和后端业务数据的分离&lt;/li>
&lt;li>呼叫中心、处理中心和窗口柜员&lt;/li>
&lt;li>移动办公、BYOD&lt;/li>
&lt;li>安全研发、协作研发&lt;/li>
&lt;li>3D 虚拟桌面&lt;/li>
&lt;li>等等等等&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>业务价值很精练，业务场景太多这里就不赘述。&lt;/p>
&lt;h1 id="关键技术点">关键技术点&lt;/h1>
&lt;p>下面是虚拟桌面/应用的基本原理架构图。
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/11/xen.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/11/xen-520x229.png"
loading="lazy"
alt="xen"
>&lt;/a>
通过上图可以对虚拟桌面的技术架构一目了然。虚拟桌面基础架构就是在数据中心里面部署的一堆 Windows 虚拟机，核心就在于让远程用户可以操作使用这些虚拟机里面的应用或者这些虚拟机桌面。鉴于此，核心技术主要有两个方面：Windows 操作系统虚拟机的集中发布更新和管理；远程访问协议和所有终端管控策略。&lt;/p>
&lt;h2 id="windows-虚拟机的发布和更新">Windows 虚拟机的发布和更新&lt;/h2>
&lt;p>Windows 的虚拟机有两种：Server 和 Desktop；虚拟应用技术主要是利用 Windows Server 操作系统天然的多用户性质，实现一份安装程序的多用户同时使用。虚拟桌面是复制 n 个预装应用的 Desktop 桌面操作系统来实现 n 个用户的使用。&lt;/p>
&lt;h3 id="1虚拟机克隆">1）虚拟机克隆&lt;/h3>
&lt;p>使用服务器虚拟化技术可以方便地从 OS 模板中克隆出 n 个虚拟机，它的挑战在于：&lt;/p>
&lt;ul>
&lt;li>创建和更新的速度要快，特别是在虚拟机数量大的情况下&lt;/li>
&lt;li>可否永久保持用户的个人数据，更新操作不会清空旧的个人数据&lt;/li>
&lt;li>存储空间要节省&lt;/li>
&lt;/ul>
&lt;h3 id="2stream-os-流化操作系统">2）Stream OS 流化操作系统&lt;/h3>
&lt;p>这种方案是一种古老而容易被人遗忘的技术。就是很久很久以前的无盘工作站的思路。虚拟机或者物理机以网络启动的方法获得一个运行的 Windows 操作系统。所有的操作系统启动镜像都在服务器端统一管理，一种镜像可以对应启动 n 可操作系统，这些操作系统目前多以虚拟机的形式存在。它的特点&lt;/p>
&lt;ul>
&lt;li>虚拟机对磁盘的消耗非常小，磁盘是写缓存和用户数据。它的大小可以是 0 或者几个 GB。&lt;/li>
&lt;li>创建的速度快&lt;/li>
&lt;li>大批量虚拟机启动过程对网络有一定的压力，一般需要使用隔离的万兆网&lt;/li>
&lt;li>同样有个人数据保持的问题&lt;/li>
&lt;li>更新速度非常快，所有的操作系统在母盘更新后，需要重启来更新&lt;/li>
&lt;/ul>
&lt;p>不管用什么方式集中管理虚拟机，总之桌面虚拟化是要同时玩转这几个球水晶球。&lt;/p>
&lt;ul>
&lt;li>存储成本和性能&lt;/li>
&lt;li>操作系统更新和个人数据保持&lt;/li>
&lt;li>虚拟应用和虚拟桌面的混搭&lt;/li>
&lt;li>虚拟机发布更新方式的混搭&lt;/li>
&lt;/ul>
&lt;h2 id="远程访问协议">远程访问协议&lt;/h2>
&lt;p>远程访问协议哪家强，可以公允的说还是 Citrix ICA 强。本文不是评测访问协议，只是点到为止。远程 GUI 界面发的虚拟访问方式一共有以下几种：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: flask&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>Citrix ICA/ HDX ICA : Citriix 的发家的技术，具有网络适应性强可用于广域网，后台管控策略精细，用户体验高等特点。&lt;/li>
&lt;li>PCoIP ：最早适用于非虚拟桌面领域的，后来和 VMWare 和 Teradici 共同研发之后用在了 VDI 的访问上。&lt;/li>
&lt;li>RDP ：Windows Server 操作系统自带的远程桌面访问协议，不管你用还是不用它就在那里，它的技术日趋成熟，体验越来越好，不容忽视，从 MS 许可证的角度讲，任何一个虚拟桌面就需要购买微软的虚拟桌面 windows 许可证。&lt;/li>
&lt;li>SPICE ：它是一个开源的协议，可以和 KVM 配合实现 Windows 和 Linux 的远程桌面范围，自身的成熟度和完整度都一般。由于代码的开放性，有使之在某些公司手里成为可造之材。&lt;/li>
&lt;li>其它 ：国内主要的方式是类似于破解 RDP 的形式，基于 RDP 做一些改进和优化。&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>总之一句话“优秀的访问协议”是好的虚拟桌面的天然基因，但它并不是虚拟桌面的全部。几个核心的考察指标包括：&lt;/p>
&lt;ul>
&lt;li>是否支持集中管理：在一个集中的管理服务器上实现对虚拟机、用户、访问终端等等的集中统一管理。&lt;/li>
&lt;li>管理的颗粒度：你不清楚的话，就到厂商的管理控制台上数数就行&lt;/li>
&lt;li>带宽消耗：带宽消耗和视觉效果 100%是成反比的，节省带宽就以为这降低显示效果，但是还要要求不降低操作灵敏度的情况下，是否支持 WAN。这些看似矛盾的因素就是要在一个共同体里同时寻找。&lt;/li>
&lt;li>客户端设备兼容：是否任何有计算能力有显示输出的设备都可以操作。主要是设备的类型和操作系统。&lt;/li>
&lt;/ul>
&lt;h2 id="服务器虚拟化技术">服务器虚拟化技术&lt;/h2>
&lt;p>没有服务器虚拟化似乎不成虚拟桌面项目。它是运行虚拟机的载体。选择的范围主要几家：vSphere，XenServer、Hyper-V 和 KVM。可以说他们和虚拟桌面是强相关的有一定的兼容性制约。如果不差钱，那么直接买最贵的。如果非常清晰自己的业务需求，则可以推导出自己合适的技术。&lt;/p>
&lt;h2 id="网络技术">网络技术&lt;/h2>
&lt;p>一个完美的虚拟桌面基础架构需要实现数据中心 100%的包裹，需要实现外网设备统一的访问入口。说的更形象一点：虚拟桌面平台的虚拟机操作环境可以成为数据中心企业数据的传输终点，所有用户和数据的交互都在这里发生，数据是否能继续它的旅程传输出去，是受到策略的控制。外部客户访问这个入口，入口想一扇门，打开它用户就能够访问到自己的所有的应用和桌面，这扇门对外只开放一个端口，它起到了远程访问协议的代理服务器的功能，它把虚拟桌面基础架构中成百上千的 IP 地址的访问都终结掉，给防火墙策略的制定减轻了压力，实为容易忽视的关键技术点。&lt;/p>
&lt;h1 id="项目的成败">项目的成败&lt;/h1>
&lt;p>毫不夸张的讲，能给你把大规模虚拟桌面项目做成功的人才对你有真爱。大规模虚拟桌面项目太复杂，实施难度大，成本高，这是业内的共识。对于大的组织，业务需求的梳理和确认需要有厂商引导，在这个过程中最尖锐的问题会在与：1）应用的兼容性；2）外设的兼容性。目前的 Windows 应用并非天然能够在虚拟机里面运行的，特别是在有负载外设需要通过远程协议链接的时候，更是如此。让企业修改应用是一个非常头痛的事情；选择修改应用，使之更适用于虚拟化环境，从长远看是明智的选择，并非企业的让步。而逼着厂商来适应一个糟糕的，或者本不该出现在虚拟桌面环境中的应用，即使是花了很大的代价实现了，也是投入和产出及不划算的。&lt;/p>
&lt;p>成本结构的烦恼，宏观的看成本中排名前几位是：存储、服务器、软件许可。也就是说桌面虚拟化厂商玩命的在硬件厂商打工。如何节省存储和服务器成本，方法可以是：减少虚拟机的资源消耗量。注意有些情况下是在不极大降低虚拟的数量上来做的，这就不得不去细看一下虚拟机的制备方法上，各家的优势了。方法也可以是：调整 VDI 和虚拟应用使用的比例。&lt;/p>
&lt;p>实施的过程不仅是搭建和测试，更要命的时用户的接受程度。在有些地方是需要强推，在某些情况下是要把技术问题留给厂商解决。一切都在于实施成本的平衡，没有一帆风顺的实施。实施的过程也是不断积累运维经验的过程，企业需要做好学习和提高的准备，这个球也不好接住。&lt;/p>
&lt;h1 id="总结">总结&lt;/h1>
&lt;p>桌面虚拟化和应用虚拟化是两个不同的技术。在一个项目和客户里，可能是两种不同的技术路线，在很多情况下也是混合使用的。它们构成了“企业应用交付基础架构”，这个基础架构在数据中心里地地位和网络设备、服务器、存储、数据库等等是相同的。只是它处在一个比较特殊的位置。很多人可能还不能理解到这一层。&lt;/p>
&lt;p>从 ITSM 的角度看，它提供了一种 IT 服务。用户通过它可以安全高效地使用各种企业业务应用和数据。企业可以用应用交付基础架构，轻松地把业务系统部署到任何的工作场所；并得到更好地数据安全性的保证，更快速地交付各种业务（甚至所有内网应用）给最终用户（不管他们身在何处）。&lt;/p></description></item><item><title>偶遇一个不错主题</title><link>https://martinliu.cn/2014/11/22/e581b6e98187e4b880e4b8aae4b88de99499e4b8bbe9a298/</link><pubDate>Sat, 22 Nov 2014 16:38:28 +0000</pubDate><guid>https://martinliu.cn/2014/11/22/e581b6e98187e4b880e4b8aae4b88de99499e4b8bbe9a298/</guid><description>&lt;p>无意中找到一个新的 Wordpress 主题 Mustang Lite 作者为&lt;a class="link" href="http://www.webmandesign.eu/" target="_blank" rel="noopener"
>WebMan&lt;/a>。安装完之后觉得非常满意，本来这是一个多用途很复杂的主题现在让我给彻底精简了。感觉比较简洁，简洁的主题是我的最爱。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/11/screenshot-mustang-16x9.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/11/screenshot-mustang-16x9-520x289.png"
loading="lazy"
alt="screenshot-mustang-16x9"
>&lt;/a>&lt;/p>
&lt;p>Wordpress 也升级到最新版本&lt;/p></description></item><item><title>跑步不能停</title><link>https://martinliu.cn/2014/11/18/e8b791e6ada5e4b88de883bde5819c/</link><pubDate>Tue, 18 Nov 2014 15:28:47 +0000</pubDate><guid>https://martinliu.cn/2014/11/18/e8b791e6ada5e4b88de883bde5819c/</guid><description>&lt;p>在最近一段时间里面，兴趣和心情持续承受着巨大的挑战。一边是亘古不变的哪些发愁的思绪，一边是潮水般涌来的新事物；还有不断的适应和调整。总之心神俱疲的感觉越来越重，是该进入正常运行态了，该恢复状态了，跑步不能中断，业精于勤！跑起来！&lt;/p></description></item><item><title>硬件就绪可开工了</title><link>https://martinliu.cn/2014/11/18/e7a1ace4bbb6e5b0b1e7bbaae58fafe5bc80e5b7a5e4ba86/</link><pubDate>Tue, 18 Nov 2014 15:16:50 +0000</pubDate><guid>https://martinliu.cn/2014/11/18/e7a1ace4bbb6e5b0b1e7bbaae58fafe5bc80e5b7a5e4ba86/</guid><description>&lt;p>昨天晚上折腾了很晚，结果扩展的 8GB 内存条死活和系统不兼容，导致 ESXi 安装卡在内存检查哪里。在京东上直接退货，然后订货 HP 专用内存条。今天下午新条子火速送达。装上后系统在也卡了。ESXi 安装顺利完成。下载了 vClient 后，导入了几个常用 ISO，安装好了 RHEL6 和 7 的模板机。接下来可以开始方案的研究了。由于这台服务器有着巨大的折腾的空间，未来的硬件升级 whish list 包括：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: heart-o&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>增加 SSD 磁盘，加速 IO 密集的虚拟机&lt;/li>
&lt;li>增加到 16GB 内存，可惜不能上 32GB，短板，相当的短&lt;/li>
&lt;li>增加新的硬盘，当前的 1TB 用完后，还有三个盘位&lt;/li>
&lt;li>升级 CPU 到 Xeon e1256l v2，据说性能可以提升三倍，逻辑 CPU 数可以到 8 颗&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>开源的东西还好，基本上都是结构简洁的居多，我可能从配置管理相关的技术开始搞起来，如 Formen，Puppet；再到 Ceph&amp;amp;gluster 等存储应用，再到 OpenStack 这样较复杂的应用。&lt;/p></description></item><item><title>我的11.11采购</title><link>https://martinliu.cn/2014/11/13/e68891e79a8411-11e98787e8b4ad/</link><pubDate>Thu, 13 Nov 2014 16:29:38 +0000</pubDate><guid>https://martinliu.cn/2014/11/13/e68891e79a8411-11e98787e8b4ad/</guid><description>&lt;p>难以置信我在 11.11 这一天也出手了。在过去的一年多里，烧过了跑步装备，烧过了跑步 GPS 手表之后；在光棍节那天，我毅然开始搭建 home lab 了。一直不想把家里也搞成工作的场所，但是来自大学时代攒机的冲动在此刻颠覆了我。&lt;/p>
&lt;p>这台主机仅仅是个开端，它只是一个空机箱，只有主板、CPU 和 2GB 内存。以后什么都需要扩展。在网上看了几篇讨论 DIY 这款机器的帖子之后，果断在京东上下单了。下单的价格是 2799，感觉目前这应该是全网最低价。另外还采购的配件有一条 8GB 的 HP 服务器用内存条，一块 1TB 的硬盘。另外，我也单独为 lab 开了一个页面，点击左侧链接就可以过去，以后关于对它的折腾都会记录在那边。&lt;/p>
&lt;p>TO Do list：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: check-circle&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>收货后组装开机&lt;/li>
&lt;li>购买 2.5 寸硬盘托架，加装入家里过剩的笔记本硬盘一块，在光驱位置附近。&lt;/li>
&lt;li>安装 vmware EXSi 在 2.5 寸的盘上&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p></description></item><item><title>迷宫行者 The Maze Runner</title><link>https://martinliu.cn/2014/11/05/e8bfb7e5aeabe8a18ce88085-maze-runner/</link><pubDate>Wed, 05 Nov 2014 07:41:56 +0000</pubDate><guid>https://martinliu.cn/2014/11/05/e8bfb7e5aeabe8a18ce88085-maze-runner/</guid><description>&lt;p>在没有计划下，在偶然的空闲中，在一个大清早，居然看上电影了，不得不记录一下，为了最近疲惫的身心，为了留下一丁点的记忆和回味，为了首都这宝贵的蓝天。电影比较好看，最近思虑过甚，无力评论，且留下豆瓣链接。&lt;/p>
&lt;p>&lt;a class="link" href="http://movie.douban.com/subject/21349345/photos?type=R" target="_blank" rel="noopener"
> &lt;img src="http://img5.douban.com/view/movie_poster_cover/spst/public/p2201485029.jpg"
loading="lazy"
alt="The Maze Runner"
> &lt;/a>&lt;/p>
&lt;p>导演: &lt;a class="link" href="http://movie.douban.com/celebrity/1332723/" target="_blank" rel="noopener"
>韦斯·鲍尔&lt;/a>
编剧: &lt;a class="link" href="http://movie.douban.com/celebrity/1333683/" target="_blank" rel="noopener"
>诺亚·奥本海姆&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1040351/" target="_blank" rel="noopener"
>格兰特·迈尔斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1342902/" target="_blank" rel="noopener"
>T·S·诺林&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333681/" target="_blank" rel="noopener"
>詹姆斯·达什纳&lt;/a>
主演: &lt;a class="link" href="http://movie.douban.com/celebrity/1314963/" target="_blank" rel="noopener"
>迪伦·欧布莱恩&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1194285/" target="_blank" rel="noopener"
>阿梅尔·艾米恩&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333684/" target="_blank" rel="noopener"
>李基弘&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333686/" target="_blank" rel="noopener"
>布雷克·库珀&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1016669/" target="_blank" rel="noopener"
>托马斯·桑斯特&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1004692/" target="_blank" rel="noopener"
>威尔·保尔特&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333688/" target="_blank" rel="noopener"
>德克斯特·达登&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1031178/" target="_blank" rel="noopener"
>卡雅·斯考达里奥&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1191404/" target="_blank" rel="noopener"
>克里斯·谢菲尔德&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333689/" target="_blank" rel="noopener"
>乔·阿德勒&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333691/" target="_blank" rel="noopener"
>亚历山大·弗洛里斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1273668/" target="_blank" rel="noopener"
>雅各布·拉提摩尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333690/" target="_blank" rel="noopener"
>兰德尔·D·坎宁安&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1013791/" target="_blank" rel="noopener"
>派翠西娅·克拉克森&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1333685/" target="_blank" rel="noopener"
>唐·麦克马纳斯&lt;/a>
类型: 动作 / 科幻 / 悬疑 / 惊悚
官方网站: &lt;a class="link" href="http://themazerunnermovie.com" target="_blank" rel="noopener"
>themazerunnermovie.com&lt;/a>
制片国家/地区: 美国 / 加拿大 / 英国
语言: 英语
上映日期: 2014-10-28(中国大陆) / 2014-09-19(美国)
片长: 113 分钟
又名: 迷宫行者
IMDb 链接: &lt;a class="link" href="http://www.imdb.com/title/tt1790864" target="_blank" rel="noopener"
>tt1790864&lt;/a>&lt;/p></description></item><item><title>备战 北马</title><link>https://martinliu.cn/2014/09/21/e5a487e68898-e58c97e9a9ac/</link><pubDate>Sun, 21 Sep 2014 16:01:51 +0000</pubDate><guid>https://martinliu.cn/2014/09/21/e5a487e68898-e58c97e9a9ac/</guid><description>&lt;p>北马 是我今年的目标，是第一次挑战 42.195 千米，是第一次搞 全马。备战的训练计划就差一个月的十几次训练，目前的状态，感觉还是“不踏实”。主要有几个方面，目前的两次长距离训练，一次 28 公里，一次 30 公里，跑下来，都是咬牙跑完最后的将近 10K。问题主要有：越往后感觉体力越不是很足，渐渐的会感到信心的缺失，渐渐的会感到脚底板和脚趾的疲劳和疼痛，这会传导至小腿到膝盖，特别是右膝盖，在 15k 以后总会感到有点不舒服。貌似右膝盖倒成了我最严重的挑战了，如果它老人家出了问题，就麻烦了。我可不想半途而废，更不想跑完后，让人抬着回家。心中只想着：能 5 小时内无伤痛顺利完赛。目前确定每天早晨起来锻炼，观察双腿的和膝盖的情况，非训练日在小区快走，一定要磨合出稳定发挥状态的感觉。&lt;/p></description></item><item><title>Start over from RHEL</title><link>https://martinliu.cn/2014/09/21/start-rhel/</link><pubDate>Sun, 21 Sep 2014 15:40:15 +0000</pubDate><guid>https://martinliu.cn/2014/09/21/start-rhel/</guid><description>&lt;p>RHEL 7 是一个划时代的版本，比 6 有很多的重大改变，特别是系统底层的管理这块，很多命令集都发生了变化。对我而言需要在一个新的平台上提升 linux 的技能，还是很凑巧的事情。逐渐感觉到红帽从操作系统层面，向上往云的方向，向下往软件定义的 XXX 方向，横向直接积压其它服务器虚拟化技术的势头逐渐明显。传统数据中心转型在即，整个技术堆栈需要重新定义和规划；创新型小公司不断挑战传统巨头厂商的地位，市场在重新定义和分化，仿佛这是进入战国时代的节奏。&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>评测 Forerunner 220</title><link>https://martinliu.cn/2014/09/12/got-new-garmin-forerunner-220/</link><pubDate>Fri, 12 Sep 2014 15:32:36 +0000</pubDate><guid>https://martinliu.cn/2014/09/12/got-new-garmin-forerunner-220/</guid><description>&lt;p>随着北马的临近，备战的训练也越来越重要，由于始终没有试过 30K 的距离，逐渐对长距离感到焦虑，因此放弃了 My Ascis 以距离为目标的训练计划，转投 Garmin 训练计划中的&lt;a class="link" href="http://www.garmin.com/uk/training" target="_blank" rel="noopener"
>全马训练计划&lt;/a>。Garmin 的计划中多是以时间为导向的，以跑步强度为训练内容，例如 EasyRun 30 分钟；Threshold Run 6 分钟，恢复跑 2 分钟，重复四次。&lt;/p>
&lt;h2 id="forerunner-220-开箱测试">forerunner 220 开箱测试&lt;/h2>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_1.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_1.png"
loading="lazy"
alt="Snip20140912_1"
>&lt;/a>&lt;/p>
&lt;p>开箱之后，手表本身有 70%多的电，上手到公司门口，试试搜星的速度，在原地不动的情况下，由于是首次搜星，而且需要在搜星的过程中同步设置手表时钟。基本上花了大约 3~5 分钟的时间。公司门口在有十几层高的楼宇，应该会影响大搜星的速度。下面是绕公司楼一周的路线图。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_3.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_3.png"
loading="lazy"
alt="Snip20140912_3"
>&lt;/a>&lt;/p>
&lt;p>从图中可以看到路线的左下角还是有一定的偏差。&lt;/p>
&lt;h2 id="手表数据上传">手表数据上传&lt;/h2>
&lt;h3 id="garmin-express">Garmin Express&lt;/h3>
&lt;p>Garmin Connect 的网站奇慢无比，主要是由于，该网址里使用了 google font，由于 google 的服务被墙，导致页面加载 google 字体需要长时间的等待，直到超时之后才会显示页面的内容。&lt;/p>
&lt;p>有了 Garmin Express 这个客户端程序就可以避免使用网站了。而且它能自动检查手表的链接状态，USB 口一旦插上设备，不管手表里面有几条记录，基本上，几秒钟就能够同步完成。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140818_1.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140818_1-1024x739.png"
loading="lazy"
alt="Snip20140818_1"
>&lt;/a> &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140818_2.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140818_2.png"
loading="lazy"
alt="Snip20140818_2"
>&lt;/a>&lt;/p>
&lt;p>这个应用更是设备软件更新的神器，这个版本比以前的版本好太多了，同步数据在也不用发愁了。&lt;/p>
&lt;h3 id="手机蓝牙同步">手机蓝牙同步&lt;/h3>
&lt;p>Forerunner 220 可以和手机通过蓝牙通信，只要手表和手机配对成功之后，手机上的 Garmin Connect App 立刻开始数据同步。同步到 app 的数据直接上传到网站上。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/pair-mobile.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/pair-mobile-200x300.png"
loading="lazy"
alt="pair-mobile"
>&lt;/a> &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/auto-upload-activity.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/auto-upload-activity-200x300.png"
loading="lazy"
alt="auto-upload-activity"
>&lt;/a>&lt;/p>
&lt;p>这种方式是空前的爽，根本不需要使用电脑，也不需要在链接什么 USB 联线。上传完毕之后在稍微编辑一下标题、路线和分类，基本上这个记录下次在网页上看就非常有意义了。&lt;/p>
&lt;h2 id="执行网站上的训练计划">执行网站上的训练计划&lt;/h2>
&lt;p>首先，需要在 Garmin Connect 网站里面选择一个训练计划，激活训练计划的时候需要设定开始和结束时间，不管时间长短，它都会按照训练目标，自动设定每天的训练内容。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_4.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_4-1024x566.png"
loading="lazy"
alt="全马训练计划"
>&lt;/a>&lt;/p>
&lt;p>有了这个计划之后，就可以在日历上看到实际上每天的训练安排了；如果愿意的话应该可以同时安排多个训练计划，训练计划可以一个接一个排满全年。加入一年跑两个全马，或者多个的话，就可以提前一次性安排好一年的训练计划。&lt;/p>
&lt;p>在日历页面里，点击发送到设备，网页就会调用 Garmin Express，Garmin Express 打开之后，它就会把网站日历上的所有训练计划条目都下载到手表里面。下载完毕之后，就可以在手表的 Training - Training Calendar 里面上下浏览每天的训练条目了。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_2.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_2-1024x566.png"
loading="lazy"
alt="Snip20140912_2"
>&lt;/a>&lt;/p>
&lt;h2 id="执行一项计划的训练内容">执行一项计划的训练内容&lt;/h2>
&lt;p>按照网站上的安排，我今天的训练内容如下：&lt;/p>
&lt;p>W11D5a-Easy Run 2 Steps&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Run 30:00&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Coll Down&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>选中 Do Workout，点击红色按键，表滴的一声，并且震动一下，示意可以跑步了。跑步的过程中，屏幕上有四种模式的切换：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: play&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>训练屏幕，由于是 30 分钟的 Easy Run，因此屏幕上就项内容，上面是配速，下面是 30 分钟的倒计时时钟。&lt;/li>
&lt;li>数据屏幕 1 显示的三四条跑步数据自己可以定制。&lt;/li>
&lt;li>数据屏幕 2  显示的三四条跑步数据自己可以定制。&lt;/li>
&lt;li>默认的电子表时钟屏幕&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>三十分钟快到的时候，手表滴滴的在最后 5 秒倒计时提示，在最后一秒中，手表开始振动一次，示意这个训练内容完成了。然后手表会显示，开始 Cool Down，until press lap button。 我在操场里放松走了一圈，倒走了 800 米后，按 lap 键，手表就示意本项训练内容完成，示意保存该活动记录。&lt;/p>
&lt;h2 id="跑间歇跑-intervals">跑间歇跑 Intervals&lt;/h2>
&lt;p>总感觉到跑完上面的 30 分钟 Easy Run 不过瘾，随后测试手表中默认带一个间歇表训练：4*1km ； 1：00 rest。点击开始这个计划之后，手表的第一个屏幕显示的是配速和距离，在距离快完成的最后 5 秒钟，手表开始滴滴的示意，最后一秒钟，手表振动，并且提示 Rest 1 分钟，接着手表开始一分钟倒计时，就这样，周而复始 4 次。&lt;/p>
&lt;h2 id="后记">后记&lt;/h2>
&lt;p>搜星速度没有预想的那么快，但是在操场上确实够快，不过比 Rorerunner 10 的速度快多了。连接之前买的 200 多的心率带，没有成功，并不像网上说的：随便那一条就可以配对成功。不过用了一段时间心率带后，现在想想，真的是个鸡肋功能，有一条即可，需要测了，连接手机测几次即可。这也是我下决心买 220 无心率带版本的原因。分析下来，620 比 220 多的那些数据和功能，都是通过心率分析出来的；由于现在我彻底不关系心率了，因此，所有和心率相关的东西都变得苍白了。就这样我只用了一个小时就下单 220 了。在天猫 Garmin 专卖店 1390 下单，居然不到 24 小时就收到货了。顺丰真是神速，24 小时内就把货从杭州送达。价格方面赶上暑假减价 100。&lt;a class="link" href="http://detail.tmall.com/item.htm?id=37128865969" target="_blank" rel="noopener"
>http://detail.tmall.com/item.htm?id=37128865969&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_5.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/Snip20140912_5.png"
loading="lazy"
alt="Snip20140912_5"
>&lt;/a>&lt;/p></description></item><item><title>意外旧机换新机</title><link>https://martinliu.cn/2014/09/06/e6848fe5a496e4b8ade697a7e69cbae68da2e696b0e69cba/</link><pubDate>Sat, 06 Sep 2014 11:22:45 +0000</pubDate><guid>https://martinliu.cn/2014/09/06/e6848fe5a496e4b8ade697a7e69cbae68da2e696b0e69cba/</guid><description>&lt;p>刚发到手的机器是一台无奈的就机器，没想到没有过一周的时间，IT 说研发那边居然多出了一台新机木有人用，说可以给我；收到的新机是一个未拆封的纸箱。我热泪盈眶的对 IT 说“你是一个好人”。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/t440s.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/09/t440s.jpg"
loading="lazy"
alt="t440s"
>&lt;/a>&lt;/p>
&lt;p>这个机器基本上介于普通笔记本和超基本之间，重量很轻，比较赞赏的地方有两点：240GB 的 SSD 硬盘，安装的 fedora20 启动速度果断迅速，一般 10 秒内就可以输入密码了；显示平面的分辨率是 1920*1080，看完这个屏幕后，在看我的老款 MacBook Pro 的低分屏，感觉差距很大。&lt;/p></description></item><item><title>本博客再次更新样式</title><link>https://martinliu.cn/2014/09/06/e69cace58d9ae5aea2e5868de6aca1e69bb4e696b0e6a0b7e5bc8f/</link><pubDate>Sat, 06 Sep 2014 10:24:01 +0000</pubDate><guid>https://martinliu.cn/2014/09/06/e69cace58d9ae5aea2e5868de6aca1e69bb4e696b0e6a0b7e5bc8f/</guid><description>&lt;p>这次把样式更新为   Editor（by &lt;a class="link" href="https://array.is/" target="_blank" rel="noopener"
>Array&lt;/a>）。选择这个主题的原因有几点。&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: smile-o&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>Editor 是一个简约风格的主题，这种轻量级主题即简洁大方，速度快，可谓鱼和熊掌能够兼得。&lt;/li>
&lt;li>Feature image 是特大的 1000*625，最近两年特别喜欢这个样式，而且这个图片既可以在 list 中现实也可以在 single post 中显示。&lt;/li>
&lt;li>目前看和 CDN 插件不冲突&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>这就是使用免费主题的优势，随时更换心情，想换就换。&lt;/p></description></item><item><title>八月份跑步回顾</title><link>https://martinliu.cn/2014/09/06/e585abe69c88e4bbbde8b791e6ada5e59b9ee9a1be/</link><pubDate>Sat, 06 Sep 2014 02:13:18 +0000</pubDate><guid>https://martinliu.cn/2014/09/06/e585abe69c88e4bbbde8b791e6ada5e59b9ee9a1be/</guid><description>&lt;p>二零一四年八月我跑步距离总计超过一百八十公里，创造个人月跑新纪录！&lt;/p>
&lt;p>这个月多次跑 20 公里，一次超过 10 公里也比较多，总跑步天数也多。值得纪念一下。希望今年能够顺利完成一次全马。&lt;/p></description></item><item><title>避暑 崇礼 海沱 延庆 2 日游</title><link>https://martinliu.cn/2014/08/04/e981bfe69a91-e5b487e7a4bc-e6b5b7e6b2b1-e5bbb6e5ba86-2-e697a5e6b8b8/</link><pubDate>Mon, 04 Aug 2014 09:40:59 +0000</pubDate><guid>https://martinliu.cn/2014/08/04/e981bfe69a91-e5b487e7a4bc-e6b5b7e6b2b1-e5bbb6e5ba86-2-e697a5e6b8b8/</guid><description>&lt;p>3 伏天的雾霾让人无奈，只好逃离北京去避暑。第一站崇礼。崇礼的距离不算近，但是最让人感到欲哭无泪的还是拥堵的八达岭高速，堵的真实让人走投无路啊！没有最堵只有更堵，让逃离帝都的人在出京路上非常糟心。交通在出了北京界后，就仿佛进入了另外一个世界，天也是蓝的，路是畅通的。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0576.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0576-1024x768.jpg"
loading="lazy"
alt="IMG_0576"
>&lt;/a>&lt;/p>
&lt;p>上图为崇礼聚龙滑雪场的雪道。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0585.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0585-1024x768.jpg"
loading="lazy"
alt="IMG_0585"
>&lt;/a>&lt;/p>
&lt;p>上图是草原天路的大风车。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0587.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0587-1024x768.jpg"
loading="lazy"
alt="IMG_0587"
>&lt;/a>&lt;/p>
&lt;p>上图是草原天路的草甸，非常多的野花。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0588.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0588-1024x768.jpg"
loading="lazy"
alt="IMG_0588"
>&lt;/a>&lt;/p>
&lt;p>上图是草原天路上露营的装备，发挥了重要的作用，让野餐不在面包+香肠。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0597.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0597-1024x298.jpg"
loading="lazy"
alt="IMG_0597"
>&lt;/a>&lt;/p>
&lt;p>上图是路过海沱，绵绵高山峡谷景色非常迷人。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0600.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0600-1024x768.jpg"
loading="lazy"
alt="IMG_0600"
>&lt;/a>&lt;/p>
&lt;p>延庆柳沟豆腐宴，看着不错，口味一般，可以管饱，哈哈哈！&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0601.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/08/IMG_0601-1024x307.jpg"
loading="lazy"
alt="IMG_0601"
>&lt;/a>&lt;/p>
&lt;p>延庆的色素菊花田本帖子本来可以很长，太忙了，到此为止吧。&lt;/p></description></item><item><title>西安出差</title><link>https://martinliu.cn/2014/07/11/e8a5bfe5ae89e587bae5b7ae/</link><pubDate>Fri, 11 Jul 2014 17:51:48 +0000</pubDate><guid>https://martinliu.cn/2014/07/11/e8a5bfe5ae89e587bae5b7ae/</guid><description>&lt;p>周四中午去，晚上加班到 12 点多；周五下午和 CIO 会议，晚上回北京到家 11：30 多，想睡觉，失眠睡不着中。&lt;/p></description></item><item><title>周末跑步</title><link>https://martinliu.cn/2014/07/06/e591a8e69cabe8b791e6ada5/</link><pubDate>Sun, 06 Jul 2014 14:34:28 +0000</pubDate><guid>https://martinliu.cn/2014/07/06/e591a8e69cabe8b791e6ada5/</guid><description>&lt;p>周六奥森 6.22 公里，天气太热，没有能坚持到北园一圈。&lt;/p>
&lt;p>周日北工大 7.12 公里，天气依然很热，空气污染重，坚持了 45 分钟，&lt;/p>
&lt;p>正式备战北马的节奏么？不是，还是锻炼身体最重要。&lt;/p></description></item><item><title>美国骗局 American Hustle (2013)</title><link>https://martinliu.cn/2014/07/05/e7be8ee59bbde9aa97e5b180-american-hustle-2013/</link><pubDate>Sat, 05 Jul 2014 15:39:20 +0000</pubDate><guid>https://martinliu.cn/2014/07/05/e7be8ee59bbde9aa97e5b180-american-hustle-2013/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/1403098.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/1403098.jpg"
loading="lazy"
alt="1403098"
>&lt;/a>&lt;/p>
&lt;p>导演: &lt;a class="link" href="http://movie.douban.com/celebrity/1022739/" target="_blank" rel="noopener"
>大卫·欧·拉塞尔&lt;/a>&lt;br>
编剧: &lt;a class="link" href="http://movie.douban.com/celebrity/1323406/" target="_blank" rel="noopener"
>埃里克·辛格尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1022739/" target="_blank" rel="noopener"
>大卫·欧·拉塞尔&lt;/a>&lt;br>
主演: &lt;a class="link" href="http://movie.douban.com/celebrity/1005773/" target="_blank" rel="noopener"
>克里斯蒂安·贝尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1013757/" target="_blank" rel="noopener"
>布莱德利·库珀&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1022563/" target="_blank" rel="noopener"
>艾米·亚当斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1013770/" target="_blank" rel="noopener"
>杰瑞米·雷纳&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1022616/" target="_blank" rel="noopener"
>詹妮弗·劳伦斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1049602/" target="_blank" rel="noopener"
>路易·C·K&lt;/a>/ &lt;a class="link" href="http://movie.douban.com/celebrity/1036445/" target="_blank" rel="noopener"
>杰克·休斯顿&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1131634/" target="_blank" rel="noopener"
>迈克尔·佩纳&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1165173/" target="_blank" rel="noopener"
>谢伊·惠格姆&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1009310/" target="_blank" rel="noopener"
>亚历桑德罗·尼沃拉&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1144396/" target="_blank" rel="noopener"
>伊丽莎白·霍尔姆&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1000541/" target="_blank" rel="noopener"
>保罗·赫尔曼&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1010660/" target="_blank" rel="noopener"
>萨伊德·塔格马奥&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1337321/" target="_blank" rel="noopener"
>马修·拉塞尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1337322/" target="_blank" rel="noopener"
>托马斯·马修&lt;/a>&lt;br>
类型:  剧情  /  犯罪&lt;br>
官方网站: &lt;a class="link" href="http://www.americanhustle-movie.com/" target="_blank" rel="noopener"
>www.americanhustle-movie.com&lt;/a>&lt;br>
制片国家/地区:  美国&lt;br>
语言:  英语 / 阿拉伯语&lt;br>
上映日期: 2014-07-04(中国大陆) / 2013-12-20(美国)&lt;br>
片长: 103 分钟(中国大陆) / 138 分钟(美国)&lt;br>
又名:  瞒天大布局(台) / 骗海豪情(港) / 人人都是骗子 / American Bullshit&lt;br>
IMDb 链接: &lt;a class="link" href="http://www.imdb.com/title/tt1800241" target="_blank" rel="noopener"
>tt1800241&lt;/a>&lt;/p>
&lt;p>[su_quote]观后感：社会题材的东西感觉越来越喜欢了，相信还会看第二遍，情节非常好看，给周末增色不少！[/su_quote]&lt;/p></description></item><item><title>衡水湖 马拉松</title><link>https://martinliu.cn/2014/07/05/e8a1a1e6b0b4e6b996-e9a9ace68b89e69dbe/</link><pubDate>Sat, 05 Jul 2014 15:25:02 +0000</pubDate><guid>https://martinliu.cn/2014/07/05/e8a1a1e6b0b4e6b996-e9a9ace68b89e69dbe/</guid><description>&lt;p>和同事们在群里面那么一聊，本着以赛代练的方针，备战北马正式开始，报名 衡水湖 马拉松，首次全马居然在衡水湖，想不到啊！想不到！&lt;/p></description></item><item><title>MacBook Air 这个性价比值得入手了</title><link>https://martinliu.cn/2014/07/02/macbook-air-e8bf99e4b8aae680a7e4bbb7e6af94e580bce5be97e585a5e6898be4ba86/</link><pubDate>Wed, 02 Jul 2014 07:35:34 +0000</pubDate><guid>https://martinliu.cn/2014/07/02/macbook-air-e8bf99e4b8aae680a7e4bbb7e6af94e580bce5be97e585a5e6898be4ba86/</guid><description>&lt;h2 id="当前的电脑">当前的电脑&lt;/h2>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/%e5%85%b3%e4%ba%8e%e6%9c%ac%e6%9c%ba.jpg"
loading="lazy"
alt="关于本机"
>&lt;/p>
&lt;p>我现在用的 MacBook Pro 是 3 年前买的，更新到 8GB 内存，500GB 普通硬盘，不得不说，除了充电器两头电线用到掉皮，里面的电线裸露之外，这台电脑还是我用过的做长时间，并且性能和质感保持最佳的电脑。这是一台 BYOD 的设备。&lt;/p>
&lt;h2 id="想入手的-macbook-air">想入手的 MacBook Air&lt;/h2>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/Snip20140702_1.png"
loading="lazy"
alt="Snip20140702_1"
>&lt;/p>
&lt;p>刚才在苹果香港 store 看了一下，觉得 MacBook Air 性价比应该合适入手了：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: rocket&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>最吸引我的地方还是超级本的轻薄，背包可以轻很多了。&lt;/li>
&lt;li>MacBook Pro 还是扩展性和性能更佳的，但是作为日常办公来说，而且越来越不可能在这样的电脑上跑多个虚拟机的重测试环境。但是新版的 MacBook 还是比 air 重不少。&lt;/li>
&lt;li>CPU：双核 i7 1.7 说实话，还是比较低的，但是，想到耗电和发热，也必须忍受这个短板。&lt;/li>
&lt;li>RAM：8GB 内存，和我目前的情况一样，按我现在的使用水平，3GB 以上的可用内存是常态，因此及时是要做测试，跑三个内存 1GB 的虚拟机也应该是没有问题的；要是慢的话 CPU 应该是瓶颈。目前没有试过。&lt;/li>
&lt;li>存储：256 GB 对于一般用户来说可能不够。可以参考下图我的分析。如果能合理的把多媒体文件导出到家用 NAS 的话，应该没有问题。&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;h2 id="关于存储">关于存储&lt;/h2>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/%e5%85%b3%e4%ba%8e%e6%9c%ac%e6%9c%ba-2.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/%e5%85%b3%e4%ba%8e%e6%9c%ac%e6%9c%ba-2.jpg"
loading="lazy"
alt="关于本机 2"
>&lt;/a>&lt;/p>
&lt;p>我的多媒体文件在整个硬盘上占到将近一半，甚至超过了操作系统和应用软件和数据文件的总和。因此加入我买新本的话，上面应该不会导入这么大批的文件，照片什么的应该会用这台老机器存储。这台机器上的空间，应该至少还能用两年。但是，估计以后就全都导入到云里面了，百度云基本上都是给 TB 基本的可用空间。&lt;/p></description></item><item><title>mac mini</title><link>https://martinliu.cn/2014/07/02/mac-mini/</link><pubDate>Wed, 02 Jul 2014 07:16:05 +0000</pubDate><guid>https://martinliu.cn/2014/07/02/mac-mini/</guid><description>&lt;p>坐等 Mac Mini 的最新版本在秋季发布，还需要忍耐一个燥热的夏季，等不急了！这个机器适合用在 Lab 测试机。&lt;/p></description></item><item><title>武昌会议三次慢跑</title><link>https://martinliu.cn/2014/07/01/e6ada6e6988ce4bc9ae8aeaee4b889e6aca1e685a2e8b791/</link><pubDate>Tue, 01 Jul 2014 16:37:47 +0000</pubDate><guid>https://martinliu.cn/2014/07/01/e6ada6e6988ce4bc9ae8aeaee4b889e6aca1e685a2e8b791/</guid><description>&lt;p>在东湖公园里面跑步绝对是一种享受，跑一圈大约是 7 公里左右。我这三天的会议跑了三条路线。&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: rocket&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>东湖宾馆 ，其实是故意跑进去的，虽然入口都是武警站岗，还是从一个工地跑了进去，最后翻墙出来，看到墙头就有摄像头，狂汗~~~&lt;/li>
&lt;li>武汉大学，正门湖边，路不好，跑了 4 公里，返回，往返 8k。&lt;/li>
&lt;li>东湖公园，风景优美、跑步的道路舒适、不枉此行，快速跑了 6k&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/Snip20140701_74.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/07/Snip20140701_74.png"
loading="lazy"
alt="Snip20140701_74"
>&lt;/a>&lt;/p></description></item><item><title>浸泡式开会</title><link>https://martinliu.cn/2014/06/29/e6b5b8e6b3a1e5bc8fe5bc80e4bc9a/</link><pubDate>Sun, 29 Jun 2014 16:02:00 +0000</pubDate><guid>https://martinliu.cn/2014/06/29/e6b5b8e6b3a1e5bc8fe5bc80e4bc9a/</guid><description>&lt;p>武昌会议第二天，两天重复不换台，重复着：起床、跑步、吃饭、开会、吃饭、开会、吃饭。。。。。。。。
手机被上收到会议桌最前方，没有 break，不需使用手机。
电脑必须关掉，所有记录只能用纸和笔。&lt;/p></description></item><item><title>无奈出差</title><link>https://martinliu.cn/2014/06/27/e697a0e5a588e587bae5b7ae/</link><pubDate>Fri, 27 Jun 2014 15:52:58 +0000</pubDate><guid>https://martinliu.cn/2014/06/27/e697a0e5a588e587bae5b7ae/</guid><description>&lt;p>今天是实在不应该出差！！&lt;/p></description></item><item><title>武汉 会议</title><link>https://martinliu.cn/2014/06/27/e6ada6e6b189-e4bc9ae8aeae/</link><pubDate>Fri, 27 Jun 2014 15:46:16 +0000</pubDate><guid>https://martinliu.cn/2014/06/27/e6ada6e6b189-e4bc9ae8aeae/</guid><description>&lt;p>今天是非常特殊的一天，发生了一件另外无奈的事情。真是不想在这天也出差，但是还要它是旅程；用了一个半小时才从三环爬到了西站。上车后，高铁 4 个小时准时的把我送到了武汉。&lt;/p>
&lt;p>到了酒店后，由于这里就在东湖旁边，因此先去跑一圈是最重要的。
&lt;a class="link" href="http://martinliu.cn/blog/travel/%e6%ad%a6%e6%b1%89-%e4%bc%9a%e8%ae%ae/attachment/img_0330/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0330-169x300.jpg"
loading="lazy"
alt="IMG_0330"
>&lt;/a>
跑的过程中才知道，这里是著名的毛泽东下榻过的东湖宾馆。做讨厌的是，湖边被商业包裹着，没法入内。最终从一个工地进入，出来时就麻烦了，不想大摇大摆的，从被卫兵拒绝的门口跑出来，后来翻墙出来了。
洗过澡后，和同时们一起去吃饭了。
&lt;a class="link" href="http://martinliu.cn/blog/travel/%e6%ad%a6%e6%b1%89-%e4%bc%9a%e8%ae%ae/attachment/img_0331/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0331-225x300.jpg"
loading="lazy"
alt="IMG_0331"
>&lt;/a> &lt;a class="link" href="http://martinliu.cn/blog/travel/%e6%ad%a6%e6%b1%89-%e4%bc%9a%e8%ae%ae/attachment/img_0332/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0332-300x225.jpg"
loading="lazy"
alt="IMG_0332"
>&lt;/a>
这是同事推荐的一家，非常火爆的店，6 点半到店，排了一个多小时对，终于可以上桌了。
&lt;a class="link" href="http://martinliu.cn/blog/travel/%e6%ad%a6%e6%b1%89-%e4%bc%9a%e8%ae%ae/attachment/img_0333/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0333-1024x768.jpg"
loading="lazy"
alt="IMG_0333"
>&lt;/a> &lt;a class="link" href="http://martinliu.cn/blog/travel/%e6%ad%a6%e6%b1%89-%e4%bc%9a%e8%ae%ae/attachment/img_0335/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0335-1024x768.jpg"
loading="lazy"
alt="IMG_0335"
>&lt;/a>
口味太赞了，性价比超级高，我现在敲键盘的手指还有油闷大虾的香味。吃了很多，喝啤酒聊天，非常完美的一餐。&lt;/p></description></item><item><title>电波表 对时技巧</title><link>https://martinliu.cn/2014/06/25/e794b5e6b3a2e8a1a8-e5afb9e697b6e68a80e5b7a7/</link><pubDate>Wed, 25 Jun 2014 06:14:41 +0000</pubDate><guid>https://martinliu.cn/2014/06/25/e794b5e6b3a2e8a1a8-e5afb9e697b6e68a80e5b7a7/</guid><description>&lt;p>首先，确保自己所在的地点位于接受范围以内。如北京距离河南在距离商丘 1000 公里以内的范围，因此能够正常接受电波。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/blog/life/%e7%94%b5%e6%b3%a2%e8%a1%a8-%e5%af%b9%e6%97%b6%e6%8a%80%e5%b7%a7/attachment/imgb64a6feezik6zj/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/imgb64a6feezik6zj.jpg"
loading="lazy"
alt="imgb64a6feezik6zj"
>&lt;/a>&lt;/p>
&lt;p>如果，出差去到其他国家的话，可以参考下面的电波发射点地图。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/multiband6.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/multiband6.jpg"
loading="lazy"
alt="multiband6"
>&lt;/a>&lt;/p>
&lt;p>然后，就是手动或者自动对时了。手表需要放在非隔离的空间中，不能在一个没有窗户的房间。&lt;/p>
&lt;p>最后，我最近天天晚上 1 点左右手工对时，电波接收正常。&lt;/p></description></item><item><title>天津 短暂出差</title><link>https://martinliu.cn/2014/06/25/e5a4a9e6b4a5-e79fade69a82e587bae5b7ae/</link><pubDate>Wed, 25 Jun 2014 04:47:28 +0000</pubDate><guid>https://martinliu.cn/2014/06/25/e5a4a9e6b4a5-e79fade69a82e587bae5b7ae/</guid><description>&lt;p>昨天中午去天津，下午完事了就会北京。经过天津站前广场，稍微观察了一下，这次发现天津站修的如此的高大上，广场非常的宽敞，河岸的风景也十分的靓丽。就是车站里面的秩序还是不行，售票厅里的自助售票机是坏的，进站派长队等着检查身份证和安检。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/jt3-e1403671411274.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/jt3-e1403671411274-768x1024.jpg"
loading="lazy"
alt="jt3"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/jt1.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/jt1-1024x319.jpg"
loading="lazy"
alt="jt1"
>&lt;/a>&lt;/p>
&lt;p>一位移民海外的长者看了我发的这几个照片，好奇的问道：天朝是不缺高达上的，就是差环境了，等环境治理好了，会考虑回去养老。&lt;/p></description></item><item><title>纯美和邪恶的相互转化-Maleficent</title><link>https://martinliu.cn/2014/06/23/e7baafe7be8ee5928ce982aae681b6e79a84e79bb8e4ba92e8bdace58c96-maleficent/</link><pubDate>Mon, 23 Jun 2014 07:29:48 +0000</pubDate><guid>https://martinliu.cn/2014/06/23/e7baafe7be8ee5928ce982aae681b6e79a84e79bb8e4ba92e8bdace58c96-maleficent/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/p2185413955.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/p2185413955-1024x576.jpg"
loading="lazy"
alt="p2185413955"
>&lt;/a>&lt;/p>
&lt;p>导演: &lt;a class="link" href="http://movie.douban.com/celebrity/1298560/" target="_blank" rel="noopener"
>罗伯特·斯特罗姆伯格&lt;/a>&lt;br>
编剧: &lt;a class="link" href="http://movie.douban.com/celebrity/1023174/" target="_blank" rel="noopener"
>保罗·迪尼&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1324713/" target="_blank" rel="noopener"
>琳达·伍尔芙顿&lt;/a>&lt;br>
主演: &lt;a class="link" href="http://movie.douban.com/celebrity/1054447/" target="_blank" rel="noopener"
>安吉丽娜·朱莉&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1025133/" target="_blank" rel="noopener"
>艾尔·范宁&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1036300/" target="_blank" rel="noopener"
>沙尔托·科普雷&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1032219/" target="_blank" rel="noopener"
>莱丝利·曼维尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1013856/" target="_blank" rel="noopener"
>伊梅尔达·斯汤顿&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1274500/" target="_blank" rel="noopener"
>朱诺·坦普尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1013934/" target="_blank" rel="noopener"
>萨姆·赖利&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1325896/" target="_blank" rel="noopener"
>布伦顿·思韦茨&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1078956/" target="_blank" rel="noopener"
>肯内斯·库兰汉姆&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1340296/" target="_blank" rel="noopener"
>莎拉·弗林德&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1337555/" target="_blank" rel="noopener"
>汉娜·纽&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1340299/" target="_blank" rel="noopener"
>伊莎贝尔·莫洛伊&lt;/a> /&lt;a class="link" href="http://movie.douban.com/celebrity/1340298/" target="_blank" rel="noopener"
>迈克尔·希金斯&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1261575/" target="_blank" rel="noopener"
>艾拉·珀内尔&lt;/a> / &lt;a class="link" href="http://movie.douban.com/celebrity/1340297/" target="_blank" rel="noopener"
>杰克逊·比尤斯&lt;/a>&lt;br>
类型:  动作  /  爱情  /  奇幻  /  冒险&lt;br>
官方网站: &lt;a class="link" href="http://movies.disney.com/maleficent" target="_blank" rel="noopener"
>movies.disney.com/maleficent&lt;/a>&lt;br>
制片国家/地区:  美国&lt;br>
语言:  英语&lt;br>
上映日期: 2014-06-20(中国大陆) / 2014-05-30(美国)&lt;br>
片长: 98 分钟(中国大陆) / 97 分钟(美国)&lt;br>
又名:  黑魔后：沉睡魔咒(港) / 梅尔菲森特 / 玛琳菲森 / 黑法魔女 / 睡美人外传&lt;br>
IMDb 链接: &lt;a class="link" href="http://www.imdb.com/title/tt1587310" target="_blank" rel="noopener"
>tt1587310&lt;/a>&lt;/p>
&lt;p>[su_quote]怀揣着一颗童心体味一个纯美的童话世界，童话世界中存在这亦正亦邪，存在着邪恶和纯美的动态变化，最终正义战胜了邪恶，世界恢复到美丽的平衡中！我给它 7 颗星。[/su_quote]&lt;/p></description></item><item><title>CASIO G-SHOCK GW-6900 太阳能六局电波</title><link>https://martinliu.cn/2014/06/21/casio-g-shock-gw-6900e5a4aae998b3e883bde585ade5b180e794b5e6b3a2/</link><pubDate>Sat, 21 Jun 2014 12:29:31 +0000</pubDate><guid>https://martinliu.cn/2014/06/21/casio-g-shock-gw-6900e5a4aae998b3e883bde585ade5b180e794b5e6b3a2/</guid><description>&lt;p>在京东入手 GW-6900 这块 6 局电波表。主要的吸引我的就是六局电波功能，其它的太阳能、防水等等其它功能都是浮云，可惜的是目前还没有手动接受电波成功过。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/6900.jpg"
loading="lazy"
alt="6900"
>&lt;/p>
&lt;p>GW-6900 表的样子就是如上图，比较经典的三眼设计。网上评价说：表盘偏大不适合手腕细者、表颜色发亮。到手拆箱试戴后，这两个疑虑都统统打消了。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0262.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/IMG_0262-1024x768.jpg"
loading="lazy"
alt="IMG_0262"
>&lt;/a>&lt;/p>
&lt;p>GW-6900 手动电波对时还没有成功，等待晚上自动对时了。&lt;/p>
&lt;p>总体觉得这块表比较适合生活休闲佩戴，在一些非高大上的工作场合也适合。&lt;/p>
&lt;p>从工作的角度看，它内置的 48 世界城市时钟也很有用，特别是第二时钟功能，按右上键直接调出最关心的其它时区时间，操作非常方便。要是找其它某个时区的时间，也就多点几就能看到。&lt;/p>
&lt;p>官方介绍：&lt;a class="link" href="http://www.casio.com.cn/wat/g-shock/GW-6900-1/index.html" target="_blank" rel="noopener"
>http://www.casio.com.cn/wat/g-shock/GW-6900-1/index.html&lt;/a>&lt;/p>
&lt;p>操作手册：&lt;a class="link" href="http://www.casio.com.cn/resource/files/support/wat/support/book/3179.pdf" target="_blank" rel="noopener"
>http://www.casio.com.cn/resource/files/support/wat/support/book/3179.pdf&lt;/a>&lt;/p></description></item><item><title>推荐Podcast - 一个人的书房</title><link>https://martinliu.cn/2014/06/16/e68ea8e88d90-e4b880e4b8aae4babae79a84e4b9a6e688bf-podcast/</link><pubDate>Mon, 16 Jun 2014 09:27:33 +0000</pubDate><guid>https://martinliu.cn/2014/06/16/e68ea8e88d90-e4b880e4b8aae4babae79a84e4b9a6e688bf-podcast/</guid><description>&lt;p>当静下心来读书成为一个奢望，我们还是能通过其它的方式来亲近书籍，感受另外一种听书的方式。推荐下面这个听书 Podcast，他们读的书还是挺吸引人的。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52878&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;967&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/Snip20140616_7.png"
loading="lazy"
alt="一个人的书房"
> 一个人的书房[/caption]&lt;/p>
&lt;p>他们的书单：《搭车去柏林》《巨流河》《断舍离》《流波上的舞》《追风筝的人》《安妮日记》《冬牧场》《生死的幻觉》《梦里花落知多少》&lt;/p>
&lt;p>iPhone 上收听地址：&lt;a class="link" href="https://itunes.apple.com/cn/podcast/yi-ge-ren-de-shu-fang/id612325017?mt=2#" target="_blank" rel="noopener"
>https://itunes.apple.com/cn/podcast/yi-ge-ren-de-shu-fang/id612325017?mt=2#&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/06/podcast-576x1024.png"
loading="lazy"
alt="podcast"
>&lt;/p></description></item><item><title>第三个马年</title><link>https://martinliu.cn/2014/06/16/e7acace4b889e4b8aae9a9ace5b9b4/</link><pubDate>Mon, 16 Jun 2014 08:30:51 +0000</pubDate><guid>https://martinliu.cn/2014/06/16/e7acace4b889e4b8aae9a9ace5b9b4/</guid><description>&lt;p>这是一个特殊的日子，所有的事情高高低低、起起落落；在一波又一波中挫折着，前行着！&lt;/p></description></item><item><title>该睡觉了</title><link>https://martinliu.cn/2014/06/15/e8afa5e79da1e8a789e4ba86/</link><pubDate>Sun, 15 Jun 2014 19:01:04 +0000</pubDate><guid>https://martinliu.cn/2014/06/15/e8afa5e79da1e8a789e4ba86/</guid><description>&lt;p>免费主题  The Night Watch + 七牛 CDN 给力，最终网页绝大多数能够非常快速打开，今天到为止了。&lt;/p></description></item><item><title>没完没了</title><link>https://martinliu.cn/2014/06/15/e6b2a1e5ae8ce6b2a1e4ba86/</link><pubDate>Sun, 15 Jun 2014 18:58:00 +0000</pubDate><guid>https://martinliu.cn/2014/06/15/e6b2a1e5ae8ce6b2a1e4ba86/</guid><description>&lt;p>实践证明我曾经买的所有的 blog theme 都不适合我，最后还是回到了免费主题上，非商用 blog，付费主题慎用，除非你的定力很好，不好折腾。&lt;/p></description></item><item><title>回归到最简洁的状态</title><link>https://martinliu.cn/2014/06/15/e59b9ee5bd92e588b0e69c80e7ae80e6b481e79a84e78ab6e68081/</link><pubDate>Sun, 15 Jun 2014 18:12:21 +0000</pubDate><guid>https://martinliu.cn/2014/06/15/e59b9ee5bd92e588b0e69c80e7ae80e6b481e79a84e78ab6e68081/</guid><description>&lt;p>一个 bolg 要经过多少次折腾和重定义，我已经不记得是第几次晚上换主题换到 2 点才睡觉了。要说我为什么？我不过是把其它人熬夜看足球的精力用在了一项觉得有意思的事情上。&lt;/p>
&lt;p>本次更新主要是，更改一下此 blog 的方向，以后发布的内容将不会在有技术帖，原来的技术贴依然欢迎留言和讨论；今后的风格是简洁风格，多以生活内容为主。&lt;/p></description></item><item><title>于Citrix 25周年的故事 Imagination Innovation Growth</title><link>https://martinliu.cn/2014/02/10/e4ba8ecitrix-25e591a8e5b9b4e79a84e69585e4ba8b-imagination-innovation-growth/</link><pubDate>Mon, 10 Feb 2014 11:09:21 +0000</pubDate><guid>https://martinliu.cn/2014/02/10/e4ba8ecitrix-25e591a8e5b9b4e79a84e69585e4ba8b-imagination-innovation-growth/</guid><description>&lt;p>[video width=&amp;ldquo;640&amp;rdquo; height=&amp;ldquo;360&amp;rdquo; mp4=&amp;ldquo;http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/The-Citrix-Story-25-Years-of-Imagination-Innovation-and-Growth.mp4&amp;rdquo;][/video]&lt;/p>
&lt;p>以上视频从 YouTube 转载。是 Citrix 给自己的拍摄的生日礼物。真正的 25 岁生日那天在今年四月份。下面是维基百科上对 Citrix 的介绍。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这个短片拍的是挺有意思的，可以让你快速得回顾一下这个公司的历史。&lt;/p></description></item><item><title>开源服务器的时代真到了？</title><link>https://martinliu.cn/2014/02/08/e5bc80e6ba90e69c8de58aa1e599a8e79a84e697b6e4bba3e79c9fe588b0e4ba86efbc9f/</link><pubDate>Sat, 08 Feb 2014 03:17:37 +0000</pubDate><guid>https://martinliu.cn/2014/02/08/e5bc80e6ba90e69c8de58aa1e599a8e79a84e697b6e4bba3e79c9fe588b0e4ba86efbc9f/</guid><description>&lt;p>今天广为关注的的新闻末过 Facebook 的单人管理上万服务器。上网看了一下此新闻的出处：&lt;a class="link" href="http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/" target="_blank" rel="noopener"
>http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/ &lt;/a> 本文的描述如下：Delfina Eberly, Director of Data Center Operations, Facebook, presented the Tuesday morning keynote about optimizing data center operations. In terms of hardware, Facebook, because it runs such an enormous volume of servers, focuses on serviceability, including starting from the ground up by influencing server design to ensure easiest and least time consuming methods to repair equipment in the data hall.&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/eberly2.jpg"
loading="lazy"
alt="eberly2"
>&lt;/p>
&lt;p>她是 Facebook 公司的数据中心运营总监，在昨天早晨发表了关于如何优化数据中心运维的演讲。从硬件方面看，为了满足它们巨大的用量，她们不得不把精力完全放到硬件的服务提供性上，说白了“黑猫，白猫，能捉到耗子的就是好猫”，因此她们被逼去自己从服务器硬件设计开始构造自己的数据中心神殿。为什么说是被逼的，你可以想象：加入 IBM，DELL，HP 之流的 sales 推门进去，告诉她们你们买我们的服务器吧，保证好用！可能在她们也买得起，但是绝对用不起，用不起是由于：服务器的采购，供货，修复，维保，这一切都靠供应商的话，从时间和效率上将 Facebook 觉得耗不起。一旦依赖了供应商，自己就必然失去了主导权，多了一重羁绊，无法满足 facebook 这样公司的高速成长。一切创新其实都是被逼出来的。&lt;/p>
&lt;p>这让我感兴趣 Mark 最近在搞些啥，我简单转发两个我看到并感兴趣的网站。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;a class="link" href="http://Internet.org" target="_blank" rel="noopener"
>Internet.org &lt;/a> 这个网站上最抢眼的还是首页最上端的那个视频，很可惜国内用户看不到 youtub，我在这里把 Mark 的这个视频在我的网站上转贴一下。&lt;/p>
&lt;p>[video width=&amp;ldquo;640&amp;rdquo; height=&amp;ldquo;360&amp;rdquo; mp4=&amp;ldquo;http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/Making-the-Internet-Affordable.mp4&amp;rdquo;][/video]&lt;/p>
&lt;p>这个视频主要是 Mark 亲自现身说法说如何让上网成本更低，争取能做到让全世界更多的人民上网的宏大理想。听完之后，这不能不让我和今天的另外的一个新闻“facebook 收购 &lt;a class="link" href="http://www.onavo.com/" target="_blank" rel="noopener"
>Onavo&lt;/a>”联系起来，表面上看 Onavo 是他实现这个理想的一种工具；另外一个邪恶的说法，则说：”他想控制这个世界所有人上网的流量“；我们拭目以待，他们是如何改造地球的吧！&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/open-computer-logo.png"
loading="lazy"
alt="open-computer-logo"
>&lt;/p>
&lt;p>另外一个网站是这个，开源计算机项目网站。我一直对开源的项目尤为感兴趣，甚至于开源的“窗台农庄项目”。但是主要还是开源软件了解的多。这个网站是 Facebook 主导的一个项目，目的在于开放他们部分服务器硬件和数据中心设计的技术。确实是一个很不错的学习资料。在这里我又看到了类似于 QQ 和中国移动竞争的类似场景。如果这个项目火了，这让那些买服务器的公司情何以堪啊！但是我因此加深了 IBM 卖掉 PC 业务给联想的这个事实。国人一直在接受人家过期的技术和业务，这样值得么？从业务的角度上讲，短期是还是值得的，原因是：国内 IT 的发展总是滞后于欧美 3 到 5 年时间。我感觉滞后的原因主要还是语言和文化的不通。&lt;/p>
&lt;p>如果对 Facebook 的数据中心感兴趣的话还可以看看这个 FAQ, &lt;a class="link" href="http://www.datacenterknowledge.com/the-facebook-data-center-faq/" target="_blank" rel="noopener"
>http://www.datacenterknowledge.com/the-facebook-data-center-faq/&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/facebook-faq-470-new.jpg"
loading="lazy"
alt="facebook-faq-470-new"
>&lt;/p></description></item><item><title>优化 WordPress 页面到一秒内</title><link>https://martinliu.cn/2014/02/07/e4bc98e58c96wordpresse9a1b5e99da2e588b0e4b880e7a792e58685/</link><pubDate>Fri, 07 Feb 2014 16:18:06 +0000</pubDate><guid>https://martinliu.cn/2014/02/07/e4bc98e58c96wordpresse9a1b5e99da2e588b0e4b880e7a792e58685/</guid><description>&lt;p>本帖系技术贴，目的在于总结一下这次对本站点优化的经历。总之结果很重要，把基本上所有页面都优化到大约 0.8 秒左右的载入速度。如果你也是在独立 LAMP 服务器上运行 WordPress 的话，我想本文可能对你会有所帮助。 &lt;/p>
&lt;h2 id="wordpress-服务器配置">Wordpress 服务器配置&lt;/h2>
&lt;p>服务器是在阿里云上的主机，主机的配置比较低：1vCPU，1GB 内存；后台数据库是 RDS 服务。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-003.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-003.jpg"
loading="lazy"
alt="pic-003"
>&lt;/a>&lt;/p>
&lt;p>服务器的操作系统是 Debian，安装的 php 的情况见 &lt;a class="link" href="http://martinliu.cn/info.php" target="_blank" rel="noopener"
>phpinfo.php&lt;/a> 的输出。&lt;/p>
&lt;p>WordPresss 所安装的插件如下：akismet syntax-highlighter download-monitor update-twitter-php google-sitemap-generator use-google-libraries wordpress-popular-posts wordpress-seo jiathis wp-easyarchives kimili-flash-embed wpjam-qiniu memcached wp-pagenavi nextgen-gallery wp-postviews optimize-db wp-recentcomments
regenerate-thumbnails wp-super-cache revslider wp_video-master shortcodes-ultimate yet-another-related-posts-plugin simple-google-analytics&lt;/p>
&lt;h2 id="wordpress-插件wp-super-cache">Wordpress 插件：&lt;strong>WP Super Cache&lt;/strong>&lt;/h2>
&lt;p>Super Cache 使用的是： mod_rewrite 缓存模式。 并开启了：使用对象缓存系统来存储缓存文件。 (实验室功能)  这个功能和 memcached 插件是相关的。在 CDN 的配置这里，开启了 CDN 的支持，并把 off-site URL 指向了 &lt;a class="link" href="http://martinliu.qiniudn.com" target="_blank" rel="noopener"
>http://martinliu.qiniudn.com&lt;/a> 七牛的空间。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-002.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-002.jpg"
loading="lazy"
alt="pic-002"
>&lt;/a>&lt;/p>
&lt;p>现在很多页面查看源码的时候，都可以看到是 0.8 秒以内的速度，这个速度起码是本站点有史以来的最快速度。不光服务器速度快了，更重要的是所有静态文件也都是用的大陆的本土 CDN 站点了。&lt;/p>
&lt;h2 id="wordpress-插件memcached-和-memcached-服务">Wordpress 插件：**memcached 和 MemCached 服务&lt;/h2>
&lt;p>**&lt;/p>
&lt;p>这个插件我第一次用，真可谓是神器，它需要和操作系统的 memcached 服务配合起来使用；这个插件的安装比较反常规：不能在控制台里面启用，根本就启用不了，需要安装插件后，在未激活的状态下，把它的文件手工放到 wp-content 目录里面即可。操作系统的 memcached 的服务安装和配置也比较简单，总之运行基本全都靠默认的配置参数即可。另外 php 的 memcached 模块也要安装并启用。它们配合起来能够把页面的 request 次数降低到冰点。我的主页用这个组合之前需要 30 次左右的 request，用了之后就 3 次了，它主要是靠内存做缓存，从而加速了网站。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-3.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-3.jpg"
loading="lazy"
alt="pic-3"
>&lt;/a>&lt;/p>
&lt;p>上图是本站首页的测试结果，亮点在它只有 3 个请求，Web 服务器只是做了三个响应就完事了，这个页面的内容就全都可以发给浏览器了。减少了 20 多次请求的处理，这些请求的结果都被 memcached 给缓存到内存里面了，目前只能够给 memcached 开 80MB 的缓存空间，也就这点内存常驻的网站缓存解决了大问题。加速页面的响应速度。不得不说 memcached 服务还是挺 NB 的。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-001.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/pic-001.jpg"
loading="lazy"
alt="pic-001"
>&lt;/a>&lt;/p>
&lt;p>上图是一个常规的文章页面，请数量从以前的 30 左右降到 10 以内，我什么也不说了。当然上面这连个图里面也能看出本网站的一点问题，这里也不说了。&lt;/p>
&lt;h2 id="wordpress-插件wpjam-七牛镜像存储">Wordpress 插件：&lt;strong>WPJAM 七牛镜像存储&lt;/strong>&lt;/h2>
&lt;p>本次折腾主要冲着这个来的。CDN 我是第一次玩，不过用一次之后，感觉也挺简单的。先要找一个免费的 CDN 服务商开一个空间，之后一般送 1GB 空间一个月 1GB 流量，对我的网站来说足够了。配置完之后就拿到了一个二级域名，然后还有几个重要的 Key 编码。安装了水煮鱼做的这个插件之后，配置完，什么也不用管，网站的哪些静态文件就在首次访问的时候，被自动传到 CDN 上面了，下次网页再被打开的时候就全都走 CDN 上下载了，从而把 Apache 的基本所有静态文件的请求都 offload 走了，从而降低了服务器的负荷，提升了它对动态内容的反应速度。我的服务器只有 1GB 内存，用了 CDN 之后，我也不是很担心内存不够用的问题了。&lt;/p>
&lt;h2 id="未尽事宜">未尽事宜&lt;/h2>
&lt;p>由于时间仓促，有几个活也没有时间做。1）我的域名 martinliu.cn 的 DNS 查询的速度有时候挺慢的，快也要 500ms，有时候甚至超过一两秒，不知道是 DNSPod 不给力还是我的服务器自身有问题。2）CDN 的正规用法需要在服务器端写一个脚本，把 wordpress 里面需要 CDN 加速的文件都上传到自己 CDN 的空间里面，并且可以编写脚本定期增量传输。由于最近太忙，以后有时间在研究这个问题吧。3)wordpress-popular-posts 此插件在每个页面上都占用一定的时间，不知道是否能把它消除到。4）Gravatar 头像的加速，否则这些图标在评论多的帖子上从国外站点下载，实在是太慢了。&lt;/p></description></item><item><title>天籁之音 五言古诗 蝉</title><link>https://martinliu.cn/2014/01/08/e5a4a9e7b181e4b98be99fb3-e697a0e8a880e58fa4e8af97-e89d89/</link><pubDate>Wed, 08 Jan 2014 10:11:22 +0000</pubDate><guid>https://martinliu.cn/2014/01/08/e5a4a9e7b181e4b98be99fb3-e697a0e8a880e58fa4e8af97-e89d89/</guid><description>&lt;p>[audio m4a=&amp;ldquo;http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/chan.m4a&amp;rdquo;][/audio]&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/chan.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/chan.jpg"
loading="lazy"
alt="chan"
>&lt;/a>&lt;/p>
&lt;p>垂绥饮清露，流响出疏桐。
居高声自远，非是藉秋风。&lt;/p>
&lt;p>&amp;ndash;虞世南【初唐】&lt;/p></description></item><item><title>Garmin Beijing LSD Club</title><link>https://martinliu.cn/2014/01/08/garmin-beijing-lsd-club/</link><pubDate>Wed, 08 Jan 2014 05:19:28 +0000</pubDate><guid>https://martinliu.cn/2014/01/08/garmin-beijing-lsd-club/</guid><description>&lt;p>我在 Garmin 网站上建立了一个”长跑俱乐部群“ Beijing LSD Club ； 欢迎各位爱好者加入。LSD 的意思是：Long Slow distance running ； 简单说就是长跑。&lt;/p>
&lt;p>群的地址： &lt;a class="link" href="http://connect.garmin.com/group/514228" target="_blank" rel="noopener"
>http://connect.garmin.com/group/514228&lt;/a> ；&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/Being-LSD-Group.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/Being-LSD-Group.png"
loading="lazy"
alt="Being-LSD-Group"
>&lt;/a>&lt;/p>
&lt;p>我今天在 Garmin Connect 上面的群搜索哪里，那么一搜：北京、Beijing；居然什么也没用；我就不信了，北京用 Garmin 的表的跑友应该也不少，何不大家都聚集起来，互相分享互相激励。热烈欢迎大家参加！&lt;/p></description></item><item><title>著名美国马拉松运动员 Ryan Hall</title><link>https://martinliu.cn/2014/01/01/ryan-hall/</link><pubDate>Wed, 01 Jan 2014 09:56:27 +0000</pubDate><guid>https://martinliu.cn/2014/01/01/ryan-hall/</guid><description>&lt;p>了解一位著名的美国马拉松运动员。非常年轻，非常优秀的跑者。&lt;a class="link" href="http://en.wikipedia.org/wiki/Ryan_Hall_%28runner%29" target="_blank" rel="noopener"
>&lt;strong>Ryan Hall&lt;/strong>&lt;/a> holds the American records for the half marathon and 20k, and his 2:04:58 marathon time is the fastest ever by an American. Ryan’s wife, Sara, is also a professional runner. Their Hall Steps Foundation urges the running community to help end global poverty.&lt;/p>
&lt;ul>
&lt;li>Birthplace: Kirkland, Washington&lt;/li>
&lt;li>High School: Big Bear High School, Big Bear Lake, California&lt;/li>
&lt;li>College: Stanford University (Major – Sociology, Class of 2006)&lt;/li>
&lt;li>Ryan and his wife Sara, currently currently train in Flagstaff, AZ and Palo Alto, CA&lt;/li>
&lt;/ul>
&lt;h2 id="personal-bests">Personal Bests&lt;/h2>
&lt;ul>
&lt;li>1,500m – 3:42.70 (2001)&lt;/li>
&lt;li>5,000m – 13:16.03 (2005)&lt;/li>
&lt;li>10,000m – 28:07.93 (2007)&lt;/li>
&lt;li>20,000m – 57:54 (2006) American Record&lt;/li>
&lt;li>Half-marathon – 59:43 (2007) American Record&lt;/li>
&lt;li>Marathon – 2:04:58 (2011) fastest American performance of all time&lt;/li>
&lt;/ul>
&lt;p>[su_quote]“I run because I believe that God has created me to run. When I run, I feel like I am fulfilling the purpose for which I was created. I know that I may not always run, but that God has used running as a part of my life to lead me down a path that I would not have taken otherwise. If I had never run, I would have never went to Stanford, met Sara, or be doing what I am doing now. I believe that God wants me to run to bring glory to his name and to further his kingdom on earth in some way. Some of my most intimate moments with God have been out in the trails, on the race course, or on the track. This is why I love to run.”[/su_quote]&lt;/p>
&lt;p>[video width=&amp;ldquo;740&amp;rdquo; height=&amp;ldquo;500&amp;rdquo;]http://v.youku.com/v_show/id_XMjk0NzcxMzg4.html[/video]&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/77d2d91e-13d8-42e1-8171-f6ed61e7e45b_1.jpg"
loading="lazy"
alt="77d2d91e-13d8-42e1-8171-f6ed61e7e45b_1"
>&lt;/p>
&lt;p>Ryan Hall 是位美國長跑選手，他在 2008 年的時候贏得了奧運的馬拉松參賽資格，並且在北京奧運馬拉松項目排名第十，他以 59 分 43 秒成為美國半馬紀錄保持人，也是美國史上第一位半馬在一個小時內完成的男人。&lt;/p>
&lt;p>Ryan 的爸爸是曾經被巴爾地摩棒球隊選中，受到父親喜愛棒球的影響，他小時候其實是想要成為一位投手，常常在院子裡用網球做投球練習。雖然那時候的 Ryan 對跑步還沒產生興趣，但他小時候在體育課的跑步項目已經非常的突出。父親那時就已經看出他的天分，告訴 Ryan 說：「如果你願意花時間練習，你可以成為世界頂尖的跑者。」&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/019c96f3-4b72-464b-8e0d-5f70f9690542_2.png"
loading="lazy"
alt="019c96f3-4b72-464b-8e0d-5f70f9690542_2"
>&lt;/p>
&lt;p>Ryan 高中比賽時的照片&lt;/p>
&lt;p>在 13 歲的某個星期六的一大早，他心中突然湧出想要跑步的強烈慾望，於是繫緊鞋帶，跟著也有鐵人經驗的爸爸出門慢跑。那天，他跑了 24 公里。他形容他第一次的慢跑經驗：「很痛苦，真的很痛苦。我們必須要休息很多次，我的小腿也是前所未有的疼痛著，每跨出一步我的臉就會痛苦的抽搐，而且當我們終於回到家的時候我直接癱軟在沙發上，一直到中午我都還無法動彈。」高中的時候 1500 公尺他就跑出 3 分 43 秒的成績。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/8d4b2b7f-ade7-4210-8451-618139ef2abf_3.jpg"
loading="lazy"
alt="8d4b2b7f-ade7-4210-8451-618139ef2abf_3"
>&lt;/p>
&lt;p>開始跑步之後他就有個夢想－參加奧運。Ryan 甚至在萬聖節的南瓜上雕刻奧運的五環標誌。在 2004 年的時候他參加了奧運馬拉松選拔賽，可惜並沒有入選。大受打擊的 Ryan 覺得自己的人生已經毀滅了，他開始懷疑自己的人生價值。幸好他的信仰幫助他走過一切，這是上帝給他的磨練，他應該要從跑步裡得到快樂，而不是向上帝尋求安慰。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/42982e8c-e5b5-4199-a61c-604f344470b7_4.jpg"
loading="lazy"
alt="42982e8c-e5b5-4199-a61c-604f344470b7_4"
>&lt;/p>
&lt;p>果然，上帝並沒有放棄他，在 2006 年的時候開始嶄露頭角，打破了許多記錄。在那一年的 10 月 8 號 Ryan 打破了美國 20K 的記錄，57 分 54 秒，比上一個記錄快了 48 秒。2007 年，他成為美國跑最快的馬拉松選手，在休士頓馬拉松那場比賽，他跑出了 2 小時 08 分 24 秒的成績，同年的 11 月，他也獲得了 2008 年北京奧運馬拉松的參賽資格，這時的他已經是全美國最有名的跑者之一。雖然在北京奧運上他只獲得了第十名的成績(2：12：33)，但是在 2012 年的時候他又再度獲得了倫敦奧運的參賽資格。他也是美國史上罕見跑過兩次奧運馬拉松的選手。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/0ac56568-479a-4fea-ba89-8e36b4dda265_5.png"
loading="lazy"
alt="0ac56568-479a-4fea-ba89-8e36b4dda265_5"
>&lt;/p>
&lt;p>Ryan：「我一直很想要成為一個超級英雄，但我想這是我唯一最接近的時刻。順帶一提，那位美國先生是我姐夫。」&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/f712389f-4d5c-4578-b7ef-f9f9458705a4_6.jpg"
loading="lazy"
alt="f712389f-4d5c-4578-b7ef-f9f9458705a4_6"
>&lt;/p>
&lt;p>Ryan Hall 每個禮拜的訓練量都超過 150 公里以上，那到底要怎麼補充能量呢？平常他會大量的補充水果、蔬菜、和適量的碳水化合物、蛋白質和脂肪。同時他也會確保他會獲得足夠的 Omega-3 脂肪酸，他也吃很多抗氧化劑含量高的天然食物，例如綠茶、莓果類、肉桂等，可以迅速恢復體力的食物像是鳳梨或是乳漿蛋白質(whey protein)和果汁。這樣吃下來有時一天還會吸收超過 6000 卡的熱量。「在訓練耐力跑的時候，身體會需要很多的食物，當作燃料跟幫助身體恢復。」Ryan 說。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/bd18cfce-f193-4087-b5c3-9077584e5bda_7.png"
loading="lazy"
alt="bd18cfce-f193-4087-b5c3-9077584e5bda_7"
>&lt;/p>
&lt;p>Ryan 很喜歡吃生魚片噢！&lt;/p>
&lt;p>但是在比賽前 Ryan 反而會少吃一點含纖維的食物，「上場前一天吃這些食物會不舒服，還會脹氣。」相反的，比賽前一天是可以吃一些簡單的碳水化合物和含有一點點脂肪的瘦肉蛋白(lean proteins with a touch of fat)。另外，他建議在比賽前兩到三小時要 200~400 卡的食物，這時身體消化得比較慢而且能補充一點體力，重要的是要吃自己習慣並且常吃的食物。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/8ed4f7c6-bce0-4214-ac95-f6dc97308fcc_8.jpg"
loading="lazy"
alt="8ed4f7c6-bce0-4214-ac95-f6dc97308fcc_8"
>&lt;/p>
&lt;p>Ryan 跟老婆 Sara 都是美國優秀的選手，兩人在史丹佛認識、相愛，並在 2005 年結婚，身為基督徒的他們在 2009 年創立了一個基金會－The Hall Steps Foundation，目的是在於幫助貧困的人脫離貧窮，可愛的是他們也身兼義賣衣服的模特兒，省下請專業模特兒的錢。Ryan 跟 Sarah 的感情也非常的好，在 Ryan 的 Twitter 也常常看見他們一起出去釣魚、健身，去哪裡兩個人都會在一起。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/01/37310fae-d9d0-4036-9613-1ded3ff64e1c_9.png"
loading="lazy"
alt="37310fae-d9d0-4036-9613-1ded3ff64e1c_9"
>&lt;/p>
&lt;p>「每天 Sara 都會讓我覺得很驕傲，但是今天我特別的以她為榮。」Ryan 說&lt;/p>
&lt;p>From: &lt;a class="link" href="http://tw.sports.yahoo.com/news/%E6%8A%8A%E8%B7%91%E6%AD%A5%E7%95%B6%E4%BF%A1%E4%BB%B0%E7%9A%84%E7%94%B7%E4%BA%BA-ryan-hall-050256548.html" target="_blank" rel="noopener"
>把跑步當信仰的男人 ─Ryan Hall&lt;/a>&lt;/p>
&lt;p>美国半马纪录保持者 Ryan Hall 的跑步教学视频:&lt;/p>
&lt;p>长距离间歇跑训练(快速储备耐力)&lt;a class="link" href="http://weibo.cn/sinaurl?u=http%3A%2F%2Ft.cn%2FzOwKIZt&amp;amp;ep=ApX5nF72T%2C2983719344%2CApX5nF72T%2C2983719344&amp;amp;pos=1&amp;amp;url_type=1&amp;amp;object_type=&amp;amp;wm=3333_2001&amp;amp;s2w=m" target="_blank" rel="noopener"
>网页链接&lt;/a>&lt;/p>
&lt;p>短距离间歇跑训练(提高速度耐力)&lt;a class="link" href="http://weibo.cn/sinaurl?u=http%3A%2F%2Ft.cn%2FzOEqo4E&amp;amp;ep=ApX5nF72T%2C2983719344%2CApX5nF72T%2C2983719344&amp;amp;pos=1&amp;amp;url_type=1&amp;amp;object_type=&amp;amp;wm=3333_2001&amp;amp;s2w=m" target="_blank" rel="noopener"
>网页链接&lt;/a>&lt;/p>
&lt;p>高抬腿 训练(激发腿部活力)&lt;a class="link" href="http://weibo.cn/sinaurl?u=http%3A%2F%2Ft.cn%2FzOEqK7L&amp;amp;ep=ApX5nF72T%2C2983719344%2CApX5nF72T%2C2983719344&amp;amp;pos=1&amp;amp;url_type=1&amp;amp;object_type=&amp;amp;wm=3333_2001&amp;amp;s2w=m" target="_blank" rel="noopener"
>网页链接&lt;/a>&lt;/p>
&lt;p>直曲腿交叉跑(超有效爆发力)&lt;a class="link" href="http://weibo.cn/sinaurl?u=http%3A%2F%2Ft.cn%2FaWewsq&amp;amp;ep=ApX5nF72T%2C2983719344%2CApX5nF72T%2C2983719344&amp;amp;pos=1&amp;amp;url_type=1&amp;amp;object_type=&amp;amp;wm=3333_2001&amp;amp;s2w=m" target="_blank" rel="noopener"
>网页链接&lt;/a>&lt;/p>
&lt;p>动态拉伸训练(提高冲刺动力)&lt;a class="link" href="http://weibo.cn/sinaurl?u=http%3A%2F%2Ft.cn%2FzO7lnLI&amp;amp;ep=ApX5nF72T%2C2983719344%2CApX5nF72T%2C2983719344&amp;amp;pos=1&amp;amp;url_type=1&amp;amp;object_type=&amp;amp;wm=3333_2001&amp;amp;s2w=m" target="_blank" rel="noopener"
>网页链接&lt;/a>&lt;/p></description></item><item><title>Reviewer’s Guide for Remote 3D Graphics Apps</title><link>https://martinliu.cn/2013/12/31/reviewers-guide-remote-3d-graphics-apps/</link><pubDate>Tue, 31 Dec 2013 11:36:27 +0000</pubDate><guid>https://martinliu.cn/2013/12/31/reviewers-guide-remote-3d-graphics-apps/</guid><description>&lt;p>有了这 3 本书我们再也不用担心 GPU 的测试了。&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://www.citrix.com/wsdm/restServe/skb/attachments/RDY12010/Reviewer%27s%20Guide%20for%20HDX%203D%20Pro%20-%2001%20XenServer.pdf&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;3d&amp;rdquo; background=&amp;quot;#4e7f22&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: download&amp;rdquo;]Part 1 下载点击这里
Reviewer’s Guide for Remote 3D Graphics Apps [/su_button]&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://www.citrix.com/wsdm/restServe/skb/attachments/RDY12011/Reviewer%27s%20Guide%20for%20HDX%203D%20Pro%20-%2002%20vDGA.pdf&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;3d&amp;rdquo; background=&amp;quot;#4e7f22&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: download&amp;rdquo;]Part 2 下载点击这里
Reviewer’s Guide for Remote 3D Graphics Apps [/su_button]&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://www.citrix.com/wsdm/restServe/skb/attachments/RDY12202/Reviewer%20Guide%20for%20HDX%203D%20Pro%2003%20vGPU%20GA.pdf&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;3d&amp;rdquo; background=&amp;quot;#4e7f22&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: download&amp;rdquo;]Part3 下载点击这里
Reviewer’s Guide for Remote 3D Graphics Apps [/su_button]&lt;/p>
&lt;p>This document helps you set up a simplified lab to review hardware-accelerated GPU virtualization for  Windows desktop VDI workloads on Citrix XenServer. True GPU virtualization (a.k.a vGPU) on NVIDIA GRID  cards is supported since Service Pack 1 of Citrix XenServer 6.2. It extends high-performance GPU sharing capabilities beyond Windows Server RDS workloads, that we cover in part 1 and part 2 of this series of Guides; Part 3 walks through the following topics:&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: comment-o&amp;rdquo; icon_color=&amp;quot;#b920ab&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>How to obtain the necessary components for the feature review&lt;/li>
&lt;li>Install NVIDIA GRID GPU, and configure vGPU in XenServer&lt;/li>
&lt;li>Assign vGPU to XenDesktop 7.1 Windows Desktop VM’s&lt;/li>
&lt;li>Install and publish GPU-accelerated Virtual Desktops (VDI) using Studio&lt;/li>
&lt;li>Access GPU-accelerated Virtual Desktops (VDI) from Citrix Receiver on any device&lt;/li>
&lt;li>Verify 3D applications on multiple desktops are sharing the same physical GPU&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p></description></item><item><title>新加坡签证申请所需要材料</title><link>https://martinliu.cn/2013/12/31/e696b0e58aa0e59da1e7adbee8af81e794b3e8afb7e68980e99c80e8a681e69d90e69699/</link><pubDate>Tue, 31 Dec 2013 03:30:33 +0000</pubDate><guid>https://martinliu.cn/2013/12/31/e696b0e58aa0e59da1e7adbee8af81e794b3e8afb7e68980e99c80e8a681e69d90e69699/</guid><description>&lt;p>虽然是第二次办理签证，是自己 送资料那种，但是还是少复印了一页材料，下面是一点经验总结：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: check&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>新加坡签证的办理，必须到新加坡大使馆的网站上看须知，所以网站一定要去看：&lt;a class="link" href="http://www.mfa.gov.sg/content/mfa/overseasmission/beijing/ch.html" target="_blank" rel="noopener"
>http://www.mfa.gov.sg/content/mfa/overseasmission/beijing/ch.html&lt;/a>  本页下面的内容就是签证办理的注意事项了，最好还是到网站上看，以防止网站上有更新的东西。&lt;/li>
&lt;li>户口本复印必须要完整，户口本的每一页都需要复印一页&lt;/li>
&lt;li>签证费是 153 一个人，自己准备零钱&lt;/li>
&lt;li>旅游签证是 35 天有效期，从签发的那天算，35 天后，不管你是否入境，签证都作废了，所以不可以提前太早去办理签证&lt;/li>
&lt;li>通常情况下，北京 3 个工作日就可以取签证了&lt;/li>
&lt;li>送资料的时间是周 1 ～ 5 早晨 9 点到 11 点，去晚了就关门了&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>[su_quote]下面是官网的详细说明，需要逐字逐句的阅读，而且每个字都要理解，并且照做，你的签证材料准备的就妥妥的了！[/su_quote]&lt;/p>
&lt;p>申请签证必须提供以下材料。若有必要, 本馆有权要求申请者提供其他材料。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>**护照：**护照原件及护照照片页复印件。护照有效期应在六个月以上（从入境日期开始计算），并至少有一张空白签证页。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;a class="link" href="http://www.mfa.gov.sg/content/dam/mfa/images/om/beijing/form/Form14A_bilingual.pdf" target="_blank" rel="noopener"
>Form 14A&lt;/a>&lt;/strong> **签证申请表格（原件）：**一份用英文填写完整，并有申请者亲笔签名的申请表格。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>彩色照片&lt;/strong>：二张（一张贴在表格上，另一张供扫描用）。照片应符合下列要求：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>两寸，彩色，白底 的三个月内的近照；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>正面免冠（如按特殊宗教或风俗要求戴帽或配饰，帽子或配饰不得掩盖申请者面部特征）。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>**中国身份证：**原件及复印件。（注：申请商务签证者，只需复印件）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**签证费（概不退还）：**人民币 153 元  (请自备零钱) 。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>*&lt;strong>*另，申请旅游签证需提供其他材料如下：**&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>在职证明：&lt;/strong>
申请人若为在职员工，必须提供由就职公司出具的在职证明信原件一份。证明信中需注明公司同意其休假，并详细注明申请者在该公司任职时间、职务及工资。在职证明信必须列有公司及有关联系人的地址、电话和传真号码。信函必须加盖公章。申请人若无工作，则必须提供证明其个人经济状况的文件，如银行存款证明 (原件及复印件)。银行存款证明的金额没有具体要求但银行签发日期必须是签证申请递交日期的 1 个月内。此证明应能够如实的反映您的经济能力。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**户口簿：**申请者户口簿 (全本，每页：原件及复印件) 。如为集体户口，可在警察局办理户籍证明，并提供原件及复印件。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>另，申请商务签证需提供其他材料如下:&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**&lt;a class="link" href="http://www.mfa.gov.sg/content/dam/mfa/images/om/beijing/form/proxy_authorisation_letter.pdf" target="_blank" rel="noopener"
>委托书&lt;/a>：**如本人不能亲自来使馆申请签证，需出具委托书，委托书要注明被委托人的姓名及身份证号码（中英文均可）。被委托人必须携带自己身份证原件并提交复印件。即使是同一个人被委托，请在申请及领取签证时各递交一张委托书。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>新加坡公司商业注册简况打印件：&lt;strong>由新加坡会计与企业管理局（&lt;a class="link" href="http://www.acra.gov.sg/" target="_blank" rel="noopener"
>http://www.acra.gov.sg&lt;/a>）出具的新加坡公司最新商业注册简况打印件一份，该简况的打印日期距递交日期不得超过 6 个月。由新加坡政府机构、大学邀请或出席在新加坡召开的展览会、大型会议等的申请者，无需出具 V39A 表格和新加坡公司商业注册简况。申请者只需递交该机构或组织签发给申请者的&lt;/strong>邀请函原件&lt;/strong>。邀请函上必须要有该机构或组织邀请人的签名和申请者的名字。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**&lt;a class="link" href="http://www.mfa.gov.sg/content/dam/mfa/images/om/beijing/form/FormV39A.pdf" target="_blank" rel="noopener"
>V39A 表格原件（介绍信）&lt;/a>：**由新加坡注册公司代表人(必须 21 周岁以上的新加坡公民或新加坡永久居民) 用英文填写完整的原件一份。信上必须注明新加坡公司的地址、电话、传真号码, 公司章和公司代表人的新加坡身份证号码与签名。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>签证申请者必须本人&lt;/strong>亲自来本馆递交申请。以下情况除外:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>若申请人未满18周岁，可由其父母代办，但必须出具能证明其关系的出生公证书或户口本和父母身份证（原件及复印件）；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>若夫妻关系，可由其配偶代办，但必须出具能证明其关系的结婚证或户口本和配偶身份证（原件及复印件）；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如申请人已退休或60周岁以上，可委托他人办理，但需提供本人退休证原件、复印件及委托书（注明被委托人的姓名和身份证号码）。被委托人必须携带自己身份证原件并提交复印件；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如申请人由在华的新加坡公民或新加坡永久居民作介绍，介绍人(必须21周岁以上) 需亲自来本馆递交申请，并提供填好的 &lt;strong>&lt;a class="link" href="http://www.mfa.gov.sg/content/dam/mfa/images/om/beijing/form/FormV39A.pdf" target="_blank" rel="noopener"
>V39A表格原件（介绍信）&lt;/a>&lt;/strong> 及其新加坡身份证或护照的原件及复印件；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>申请商务签证者。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>**签证递交及领取时间：**周一至周五上午 9：00 至 11：00 （只受理材料递交）周一至周五下午 4：00 至 4：30 （只受理签证领取）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**签证办理时间：**一般三个工作日（递交申请日包含在内）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**签证咨询:**建议申请者及介绍人请仔细详读此申请内容。若有任何其他问题，可拨签证热线 +86-10-65329380 咨询。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>重要注意事项&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>未填好的表格、材料不齐或不符合要求有可能导致拒签或推迟受理。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>签证申请是否被批准，及批准的有效期限都由签证官根据申请者个别情况决定。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>申请者应在签证批准后再购买机票。凡因提前购买机票而签证未被批准所造成的经济损失，本馆对此不负责任。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>签证的签发日期一般是签证的申请日，签证一旦被签发其有效期将不再变更。申请者不应过早递交申请材料。若签证已过期，申请者须重新递交申请材料。申请者在领取签证时，应仔细核对签发日期及签证有效期。建议申请者在出国前&lt;strong>一至二周&lt;/strong>递交申请。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>签证持有者并不一定可以入境新加坡。签证持有人须符合入境规定方可准许入境，如有效护照，足够的资金和往返机票（如需要）。新加坡移民与关卡局官员有权决定其是否可入境。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新加坡移民与关卡局官员在签证持有者入境时决定其停留天数。申请者应留意护照的入境章和批准的停留期限 。&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Garmin FR620 第二块跑步手表目标</title><link>https://martinliu.cn/2013/12/21/garmin-fr620-e7acace4ba8ce59d97e8b791e6ada5e6898be8a1a8e79baee6a087/</link><pubDate>Sat, 21 Dec 2013 11:16:37 +0000</pubDate><guid>https://martinliu.cn/2013/12/21/garmin-fr620-e7acace4ba8ce59d97e8b791e6ada5e6898be8a1a8e79baee6a087/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cf-lg.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cf-lg.jpg"
loading="lazy"
alt="cf-lg"
>&lt;/a>&lt;/p>
&lt;p>Garmin ForRunner 620&lt;/p>
&lt;p>尺寸: 4.5 x 4.5 x 1.25 cm
重量: 43.6 g
1“ 彩色/触摸式萤幕 180x180
续航力: 手表模式 6 周 / 训练模式 10 小时.
50m 防水
支援 live tracking - 可与手机连线, 将轨迹及时传送出去, 与朋友分享.
支援蓝牙 LE
支援 Wifi
支援 Running Dynamics
支援 Recovery Advisor
支援 VO2 max estimate&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cf-lg888.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cf-lg888.jpg"
loading="lazy"
alt="cf-lg888"
>&lt;/a>&lt;/p>
&lt;p>Garmin ForRunner 220&lt;/p>
&lt;p>尺寸: 4.5 x 4.5 x 1.2 cm
重量: 40.7 g
1“ 彩色/非触摸式萤幕 180x180
续航力: 手表模式 6 周 / 训练模式 10 小时.
50m 防水
支援 live tracking - 可与手机连线, 将轨迹及时传送出去, 与朋友分享.
支援蓝牙 LE
不支援 Wifi
不支援 Running Dynamics
不支援 Recovery Advisor
不支援 VO2 max estimate&lt;/p></description></item><item><title>2013 Year Of Running</title><link>https://martinliu.cn/2013/12/19/2013-year-running/</link><pubDate>Thu, 19 Dec 2013 15:20:47 +0000</pubDate><guid>https://martinliu.cn/2013/12/19/2013-year-running/</guid><description>&lt;p>跑了一整年了，回顾一下数字：从咕咚运动和 Garmin Connect 里面记录的总和里程为九百多公里；跑步主要是为了强健体魄和挑战自我。同时也有非常多的其他好处：减压、提振精气神、消除负面情绪等等。每次跑到欲罢不能的时候，都是一种畅快的肉体和精神之旅。跑步所到达的城市有十几个；国外的城市有：新加坡、新奥尔良、洛杉矶、圣地亚哥。下面是所有跑步地点的清单：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/psb.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/psb.png"
loading="lazy"
alt="psb"
>&lt;/a>所有跑步地点的地理分布如下： &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/map.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/map-300x186.png"
loading="lazy"
alt="map"
>&lt;/a> 从跑步成绩方面还取得了一些个人记录： &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/records.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/records.png"
loading="lazy"
alt="records"
>&lt;/a>这些记录是由我的 GPS 跑步手表记录的。所有的数据都上传到 Garmin Connect 网站上，数据还算比较准确。 &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/gps.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/gps-261x300.jpeg"
loading="lazy"
alt="gps"
>&lt;/a> 这块表的功能比较简单，能记录跑步的轨迹、速度等等，可以存储最好个人记录，和 7 个最近的跑步活动。还算是比较实用，带着它我跑完了人生第一个半程马拉松。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cert.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/cert.jpeg"
loading="lazy"
alt="cert"
>&lt;/a>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/Martin-%e8%8b%8f%e5%b7%9e%e9%87%91%e9%b8%a1%e6%b9%96%e5%8d%8a%e7%a8%8b%e9%a9%ac%e6%8b%89%e6%9d%be-%e8%b7%af%e7%ba%bf%e5%9b%be.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/Martin-%e8%8b%8f%e5%b7%9e%e9%87%91%e9%b8%a1%e6%b9%96%e5%8d%8a%e7%a8%8b%e9%a9%ac%e6%8b%89%e6%9d%be-%e8%b7%af%e7%ba%bf%e5%9b%be.jpg"
loading="lazy"
alt="Martin-苏州金鸡湖半程马拉松-路线图"
>&lt;/a>&lt;/p>
&lt;p>让我跑的最爽的几个地方是：北京奥林匹克森林公园、新加坡的 Gardon by the bay 温室植物园、崇礼的草原天堂之路、沈阳的浑河畔、新奥尔良密西西比河畔等等。 由于我热衷于晨跑，当你迎着朝阳，挥汗如雨、在吸收正能量的过程中；你能领略到别人无法想象的景色，这些美景都深深的留在了脑海里。&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/comb.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/comb.jpeg"
loading="lazy"
alt="comb"
>&lt;/a>&lt;/p>
&lt;p>以上四张图片：&lt;/p>
&lt;ul>
&lt;li>上左：沈阳浑河河畔，我从靠近市中心的大桥王东南方向，沿着河边非常专业的骑行道路一气跑下去，已经快到鹭岛附近，跑了 15 公里。那是在盛夏，北京闷热沈阳比较凉爽，跑出的汗多，但是体温不太高，跑的大汉淋漓，爽透了。&lt;/li>
&lt;li>上右：北京的春天气候非常好，早晨 7 点清凉的很。为了备战金鸡湖半程马拉松比赛，周末驱车 30 多分钟，跑 10 多公里回家，浑身无伤痛感，无精神压力的奔跑完全可以让任何一个人上瘾&lt;/li>
&lt;li>下左：崇礼的草原天堂之路，本来是去那里看草原和大风车的，但是下夕阳西下的时候，看到那一眼望不到边的草原，新修的公路就在脚下，顿时脚跟发痒，直接开跑，跑了 3 公路多山路，主要是为了搜集地点，3 公里山路下来，基本上人山合一，完全置身于世外了&lt;/li>
&lt;li>下右：在美国新奥尔良的密西西比河河畔，和同事们一起跑可谓是人生的一大乐事，其实需要感谢我的所有跑友们，他们是跑步乐趣的催化剂，无限低放大了跑步的乐趣，能给我更多跑步的理由，我们的跑步微信群是大家参与度极高的圈子，每个人的日常跑步作业都在上面实时发布。&lt;/li>
&lt;/ul>
&lt;p>最开心的还是看着两岁多的宝宝能一天天的长大，跑步是唯一的让我与她拉近时间和空间距离的方法。我已经无法停止跑下去的步伐。 &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/baby.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/12/baby.jpeg"
loading="lazy"
alt="baby"
>&lt;/a>&lt;/p></description></item><item><title>XenServer 添加硬盘做本地存储</title><link>https://martinliu.cn/2013/11/25/xenservere6b7bbe58aa0e7a1ace79b98e5819ae69cace59cb0e5ad98e582a8/</link><pubDate>Mon, 25 Nov 2013 10:39:00 +0000</pubDate><guid>https://martinliu.cn/2013/11/25/xenservere6b7bbe58aa0e7a1ace79b98e5819ae69cace59cb0e5ad98e582a8/</guid><description>&lt;p>当您的 XenServer 测试机需要增加硬盘的时候，你需要通过简单的几条指令把新硬盘添加为本地存储。&lt;/p>
&lt;p>下面的实例情况是：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>测试机有两块硬盘&lt;/p>
&lt;ul>
&lt;li>
&lt;p>OCZ  SSD 硬盘一块&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SATA 不通硬盘一块&lt;/p>
&lt;/li>
&lt;li>
&lt;p>还有一个 U 盘插在系统上&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>SATA 的硬盘是我需要加载的新硬盘&lt;/p>
&lt;/li>
&lt;li>
&lt;p>这个新的硬盘希望被处理成 XenServer 本地的 SR&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>添加过程中主要需要使用这样几条指令：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>查看当前系统上的检查出来并且挂载中的分区： cat /proc/partitions&lt;/p>
&lt;/li>
&lt;li>
&lt;p>详细查看这些存储和设备对应的情况： ls -l /dev/disk/by-id/&lt;/p>
&lt;/li>
&lt;li>
&lt;p>创建新的本地 SR: xe sr-create content-type=user device-config:device=/dev/disk/by-id/scsi-SATA_ST9320325ASG_5VD7G964 host-uuid=3850317b-d23a-4ed0-87f9-2b27854319e5 name-label=&amp;ldquo;SATA320&amp;rdquo; shared=false type=lvm&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>[bash]
[root@XS62 ~]# cat /proc/partitions
major minor #blocks name&lt;/p>
&lt;p>7 0 52378 loop0
8 0 250059096 sda
8 1 4193297 sda1
8 2 4193297 sda2
8 3 241669447 sda3
8 16 312571224 sdb
8 17 204800 sdb1
8 18 312235312 sdb2
8 32 4137984 sdc
8 36 4137856 sdc4
252 0 241655808 dm-0&lt;/p>
&lt;p>[root@XS62 ~]# ls /dev/disk/by-id/
scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2 scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part3 scsi-SATA_ST9320325ASG_5VD7G964-part2
scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part1 scsi-SATA_ST9320325ASG_5VD7G964 usb-Generic_Flash_Disk_4266F915
scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part2 scsi-SATA_ST9320325ASG_5VD7G964-part1 usb-Generic_Flash_Disk_4266F915-part4&lt;/p>
&lt;p>[root@XS62 ~]# ll /dev/disk/by-id/
total 0
lrwxrwxrwx 1 root root 9 Nov 22 19:52 scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2 -&amp;gt; ../../sda
lrwxrwxrwx 1 root root 10 Nov 22 19:52 scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part1 -&amp;gt; ../../sda1
lrwxrwxrwx 1 root root 10 Nov 22 19:52 scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part2 -&amp;gt; ../../sda2
lrwxrwxrwx 1 root root 10 Nov 22 19:52 scsi-SATA_OCZ-AGILITY4_OCZ-DY4J9LY3615W5MF2-part3 -&amp;gt; ../../sda3
lrwxrwxrwx 1 root root 9 Nov 22 19:52 scsi-SATA_ST9320325ASG_5VD7G964 -&amp;gt; ../../sdb
lrwxrwxrwx 1 root root 10 Nov 22 19:52 scsi-SATA_ST9320325ASG_5VD7G964-part1 -&amp;gt; ../../sdb1
lrwxrwxrwx 1 root root 10 Nov 22 19:52 scsi-SATA_ST9320325ASG_5VD7G964-part2 -&amp;gt; ../../sdb2
lrwxrwxrwx 1 root root 9 Nov 22 19:52 usb-Generic_Flash_Disk_4266F915 -&amp;gt; ../../sdc
lrwxrwxrwx 1 root root 10 Nov 22 19:52 usb-Generic_Flash_Disk_4266F915-part4 -&amp;gt; ../../sdc4&lt;/p>
&lt;p>[root@XS62 ~]# xe sr-create content-type=user device-config:device=/dev/disk/by-id/scsi-SATA_ST9320325ASG_5VD7G964 host-uuid=3850317b-d23a-4ed0-87f9-2b27854319e5 name-label=&amp;ldquo;SATA320&amp;rdquo; shared=false type=lvm
cf0893c3-9398-d802-0706-66a8699c3a59
[/bash]&lt;/p>
&lt;p>从上面的命令可以看到，最后一条命令完成后，系统返回了新 SR 的 ID;然后在登录 XenCenter 就可以看到这个存储了，虚拟现在就可以使用这个存储了。&lt;/p></description></item><item><title>AWS 免费套餐截止后必须终止</title><link>https://martinliu.cn/2013/09/24/aws-e5858de8b4b9e5a597e9a490e688aae6ada2e5908ee5bf85e9a1bbe7bb88e6ada2/</link><pubDate>Tue, 24 Sep 2013 05:26:22 +0000</pubDate><guid>https://martinliu.cn/2013/09/24/aws-e5858de8b4b9e5a597e9a490e688aae6ada2e5908ee5bf85e9a1bbe7bb88e6ada2/</guid><description>&lt;p>对于亚马逊 AWS 的测试用户来说，你要知道你的免费套餐的截止日期，否则预期就会收费了，会计时收费，像叫停车费一样。我今天收到了亚马逊的提醒邮件，被告知，我的免费套餐将在本月截止，然后我不得不终止了该服务器。&lt;/p>
&lt;p>我是去年 10 月 19 日开通的这个免费实例，作为一个一年的 AWS 用户来说，深深的体会到了 AWS 的强大，它的管理控制台非常成熟，它的提供的服务非常全面，它的云市场做的相当好。对于任何一个普通人，你可以无痛，无压力的面对一个自己的数据中心，你可以假象你拥有一个世界上最高级的数据中心，你可以给你的应用任意、随时随地的附件任何一种高级的数据中心基础架构服务，你可以具有无限的资源，并且这个资源不限制类型和容量。共有云必将和私有云二分天下，共有云必将赢得所有中小企业用户。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52574&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/EC2_Management_Console-300x225.png"
loading="lazy"
alt="EC2_Management_Console"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/EC2_Management_Console.png" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/EC2_Management_Console.png&lt;/a>) EC2_Management_Console[/caption]&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52575&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/Try_Cloud_Computing_Free_with_AWS_Free_Tier-300x106.png"
loading="lazy"
alt="Try_Cloud_Computing_Free_with_AWS_Free_Tier"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/Try_Cloud_Computing_Free_with_AWS_Free_Tier.png" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/Try_Cloud_Computing_Free_with_AWS_Free_Tier.png&lt;/a>) Try_Cloud_Computing_Free_with_AWS_Free_Tier[/caption]&lt;/p></description></item><item><title>CloudStack+Swift 我心中的黄金搭档</title><link>https://martinliu.cn/2013/09/03/cloudstack-swift/</link><pubDate>Tue, 03 Sep 2013 08:25:46 +0000</pubDate><guid>https://martinliu.cn/2013/09/03/cloudstack-swift/</guid><description>&lt;p>迪斯尼是一个有魔力的组织，在它的电影里冤家可以变伙伴。甚至 CloudStack 和 OpenStack 两大私有云死对头来到迪斯尼这个神奇的地方也可以“在一起”。当迪斯尼决定建设自己的云计算基础设施时，与很多企业一样面临一个艰难的抉择，从众多云计算技术方案和产品中选择一条道路。如今的云计算市场规模已 达数百亿美元，水已经很深，领头的是亚马逊这样的公共云巨头，以及亚马逊的对手们：Rackspace、Google、CloudStack、 Eucalyptus、OpenNebula 等多种私有云和公共云技术与服务，每家都有绝活和独到之处。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/disney-cloudstack.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/09/disney-cloudstack.png"
loading="lazy"
alt="disney-cloudstack"
>&lt;/a>&lt;/p>
&lt;p>对于身价上千亿美元的娱乐和媒体巨头迪斯尼来说，业界可供选择的云计算路线太多，到底是走公共云、私有云、混合云还是多重云的路子？&lt;/p>
&lt;p>迪斯尼的选择是走自己的路。（迪斯尼的系统架构师 Lopez 将 9 月 9 日在&lt;a class="link" href="http://cloudbeat2013-intext.eventbrite.com/" target="_blank" rel="noopener"
>CloudBeat&lt;/a>上介绍其云计算建设经验。）&lt;/p>
&lt;p>在概念验证阶段，迪斯尼更加青睐 CloudStack，在私有云领域 CloudStack 吸引力很多大型用户，如 Zynga 和诺基亚都选择了 CloudStack。迪斯尼的系统架构师 Lopez 表示，相比 OpenStack，CloudStack 的部署和运行速度要快得多。迪斯尼可以在数天能 部署好 CloudStack 服务，而 OpenStack 则需要数周。当然，两大私有云服务部署周期相差如此之大的部分原因也与迪斯尼的特殊要求和原有技术 投资有关。&lt;/p>
&lt;p>不管怎样，迪斯尼目前对 CloudStack 非常满意，但迪斯尼的团队希望在私有云中增加对象存储技术。这一次迪斯尼倾向使用 OpenStack 阵 营的对象存储工具——Swift。事实上，开源的 OpenStack 之所以如此流行，与大量参与者提供的丰富功能密不可分，Swift 就是一个很好的例 子。&lt;/p>
&lt;p>于是，迪斯尼的团队与 Citrix 合作，确保 OpenStack 的 Swift 技术能够与 CloudStack 搭建的私有云紧密集成。在迪斯尼这个神奇的地方，OpenStack 和 CloudStack 之间的深沟裂隙被弥合了。&lt;/p>
&lt;p>在迪斯尼的案例中，CIO 能够参考的经验是：云计算的实施方案并非黑白分明，非此即彼，随着云计算服务商提供越来越多的相对独立的云计算功能，CIO 们可以不受“站队”的局限，从不同阵营选择最好的云计算工具进行整合。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="how-disney-built-a-giant-cloud-by-bolting-two-together">How Disney built a giant cloud by bolting two together&lt;/h2>
&lt;p>下面这个文章值得读一下。
&lt;a class="link" href="http://venturebeat.com/2013/08/30/how-disney-built-a-giant-cloud-by-bolting-two-together/" target="_blank" rel="noopener"
>http://venturebeat.com/2013/08/30/how-disney-built-a-giant-cloud-by-bolting-two-together/&lt;/a>&lt;/p>
&lt;h2 id="转帖迪斯尼云计算之路选择-cloudstack">转帖：迪斯尼云计算之路选择 CloudStack&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.ctocio.com/ccnews/13420.html" target="_blank" rel="noopener"
>原文链接&lt;/a>： 文章来自&lt;a class="link" href="http://www.ctocio.com" target="_blank" rel="noopener"
>IT 经理网&lt;/a>&lt;/p></description></item><item><title>XenDesktop + nVIDIA K1/K2 = BEST 3D VDI</title><link>https://martinliu.cn/2013/08/16/xendesktop-nvidia-k1-k2-best-3d-vdi/</link><pubDate>Fri, 16 Aug 2013 11:52:58 +0000</pubDate><guid>https://martinliu.cn/2013/08/16/xendesktop-nvidia-k1-k2-best-3d-vdi/</guid><description>&lt;p>今天公司到货了 K1，K2 的 GPU 卡，这让我不得不学习一下这个产品。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/grid-overview-header.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/grid-overview-header.jpg"
loading="lazy"
alt="grid-overview-header"
>&lt;/a>&lt;/p>
&lt;p>到货实物如下：&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;52542,52543,52544,52545,52546,52547&amp;rdquo;]&lt;/p>
&lt;p>此卡的简单技术指标如下。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="grid-k1">GRID K1&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="grid-k2">GRID K2&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/NVIDIA_vGPU_News.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/NVIDIA_vGPU_News.jpg"
loading="lazy"
alt="NVIDIA_vGPU_News"
>&lt;/a>&lt;/p>
&lt;p>详细 K1 K2 技术参数指标，&lt;a class="link" href="http://www.nvidia.com/content/cloud-computing/pdf/nvidia-grid-datasheet-k1-k2.pdf" target="_blank" rel="noopener"
> 下载 ； &lt;/a> 这个表格清晰的说明了这两种卡的硬件技术参数。重要的是看它软件合作伙伴这一块。硬件在好，没有支持的软件也不行，我们必须还有看看它的软件合作伙伴：&lt;a class="link" href="http://www.nvidia.com/object/grid-software-partners.html" target="_blank" rel="noopener"
>http://www.nvidia.com/object/grid-software-partners.html&lt;/a>&lt;/p>
&lt;p>首先，是认证的虚拟应用合作伙伴，这里只有 Citrix XenApp；只有 Citrix 可以做 3D 设计软件的应用虚拟化；其它无人能及，基于 Citrix 的应用虚拟化可以真正的把一块 GPU 的共享程度达到最大，能够更加节约支撑的硬件资源。节省每一度电。还要看支持的 API 的版本号，这个说明了对 3D 软件的兼容性，如果这个版本号类型少，支持的低，那么这种方案是不可用的；由于 3D 软件根本就跑不动。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>总之，Citrix + nVIDIA K1 k2 + XenServer （GPU 直通） + HDX 3D Pro = 业内最好的 3D 虚拟桌面平台方案；而且这个方案里还能具有，其它全部的使用场景，包括：vdi，共享桌面，虚拟应用，流桌面，远程物理桌面等等方式。可以说这是一举多得，面面俱到的解决方案。&lt;/p></description></item><item><title>XenClient本地虚拟桌面典型应用场景</title><link>https://martinliu.cn/2013/08/15/xencliente69cace59cb0e8999ae68b9fe6a18ce99da2e585b8e59e8be5ba94e794a8e59cbae699af/</link><pubDate>Thu, 15 Aug 2013 05:14:31 +0000</pubDate><guid>https://martinliu.cn/2013/08/15/xencliente69cace59cb0e8999ae68b9fe6a18ce99da2e585b8e59e8be5ba94e794a8e59cbae699af/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/6-xenclient-usercase.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/6-xenclient-usercase.jpg"
loading="lazy"
alt="6-xenclient-usercase"
>&lt;/a>&lt;/p>
&lt;ul>
&lt;li>安全加固移动性笔记本电脑&lt;/li>
&lt;li>桌面级操作系统更新管理&lt;/li>
&lt;li>分支机构或者远程办公环境计算机管理&lt;/li>
&lt;li>弹性的在瘦机和 PC 直接选择&lt;/li>
&lt;li>有限的网络访问环境&lt;/li>
&lt;li>成本节约或已有硬件利用&lt;/li>
&lt;/ul>
&lt;p>XenClient 本地虚拟桌面通常是虚拟桌面项目中的一个容易被忽视的环节。其实它的使用场景随处都是。&lt;/p></description></item><item><title>XenDesktop 7 HDX 3D Pro</title><link>https://martinliu.cn/2013/08/14/xendesktop-7-hdx-3d-pro/</link><pubDate>Wed, 14 Aug 2013 15:38:07 +0000</pubDate><guid>https://martinliu.cn/2013/08/14/xendesktop-7-hdx-3d-pro/</guid><description>&lt;p>&lt;a class="link" href="http://brightcove.vo.llnwd.net/pd16/media/1485836774/1485836774_2603380124001_3DCar4CitrixTV.mp4" target="_blank" rel="noopener"
>http://brightcove.vo.llnwd.net/pd16/media/1485836774/1485836774_2603380124001_3DCar4CitrixTV.mp4&lt;/a>&lt;/p>
&lt;p>Description&lt;/p>
&lt;p>Windows 7 HDX3D Windows Server 2008R2 3D Network Constrained Environment (Simulating 3G speeds) No network constraints Windows Client iPad Client NVidia Demo software utilized is available on NVidia.com Solarwinds Software used for monitoring network traffic&lt;/p>
&lt;p>看点:&lt;/p>
&lt;ul>
&lt;li>桌面虚拟化中的高精尖场景，成本高、技术高、效果精益求精&lt;/li>
&lt;li>Citrix XenDesktop + nVidia = 业内最好 3D 设计虚拟桌面平台&lt;/li>
&lt;li>Citrix 可以兼顾 VDI+独占 GPU 和 共享桌面+共享 GPU 两种模式&lt;/li>
&lt;/ul>
&lt;p>来源：&lt;a class="link" href="http://www.citrix.com/tv/#videos/9008" target="_blank" rel="noopener"
>http://www.citrix.com/tv/#videos/9008&lt;/a>&lt;/p></description></item><item><title>Citrix XenServer is Now Fully Open Source</title><link>https://martinliu.cn/2013/08/01/citrix-xenserver-is-now-fully-open-source/</link><pubDate>Thu, 01 Aug 2013 09:26:51 +0000</pubDate><guid>https://martinliu.cn/2013/08/01/citrix-xenserver-is-now-fully-open-source/</guid><description>&lt;p>With the release of Citrix XenServer 6.2, Citrix is pleased to announce
that XenServer is now fully open source. In this video, Richard Sharp, Vice President
of XenServer Product Development, explains why Citrix open sourced XenServer, what
it means to our customers and how it will help the entire XenServer platform.&lt;/p>
&lt;p>&lt;a class="link" href="http://brightcove.vo.llnwd.net/e1/uds/pd/13639319001/13639319001_2488040716001_XenServer-OSS-Richard-Sharp-Final.mp4" target="_blank" rel="noopener"
>http://brightcove.vo.llnwd.net/e1/uds/pd/13639319001/13639319001_2488040716001_XenServer-OSS-Richard-Sharp-Final.mp4&lt;/a>&lt;/p>
&lt;p>With the release of Citrix XenServer 6.2, Citrix is pleased to announce that XenServer is now fully open source. In this video, Richard Sharp, Vice President of XenServer Product Development, explains why Citrix open sourced XenServer, what it means to our customers and how it will help the entire XenServer platform.&lt;/p></description></item><item><title>A new open source strategy for Citrix XenServer</title><link>https://martinliu.cn/2013/08/01/a-new-open-source-strategy-for-citrix-xenserver/</link><pubDate>Thu, 01 Aug 2013 09:21:01 +0000</pubDate><guid>https://martinliu.cn/2013/08/01/a-new-open-source-strategy-for-citrix-xenserver/</guid><description>&lt;p>Sameer Dholakia, Vice President and General Manager of the Citrix Cloud
Division, talks about the full open source strategy for XenServer. Learn why Citrix
made XenServer open source and how this will benefit our customers and ecosystem
partners.&lt;/p>
&lt;p>&lt;a class="link" href="http://brightcove.vo.llnwd.net/e1/uds/pd/13639319001/13639319001_2503709704001_Sameer-Dholakia-v3.mp4" target="_blank" rel="noopener"
>http://brightcove.vo.llnwd.net/e1/uds/pd/13639319001/13639319001_2503709704001_Sameer-Dholakia-v3.mp4&lt;/a>&lt;/p>
&lt;p>Sameer Dholakia, Vice President and General Manager of the Citrix Cloud Division, talks about the full open source strategy for XenServer. Learn why Citrix made XenServer open source and how this will benefit our customers and ecosystem partners.&lt;/p></description></item><item><title>怎么使您的MP/VP/ATP/DEF都无穷大</title><link>https://martinliu.cn/2013/08/01/e6808ee4b988e4bdbfe682a8e79a84mpvpatpdefe983bde697a0e7a9b7e5a4a7/</link><pubDate>Thu, 01 Aug 2013 09:09:27 +0000</pubDate><guid>https://martinliu.cn/2013/08/01/e6808ee4b988e4bdbfe682a8e79a84mpvpatpdefe983bde697a0e7a9b7e5a4a7/</guid><description>&lt;p>自学的能力让你的能力变得无穷大。所谓学无止境，能力上能否得到无止境的提升就是个人为题了。你学习的时间？学习的态度？学习的内容？学习的方法？都决定了你的学习效果。基本上要学习一种新的技术或者产品，大多数人一般都止步于如何操作和运用它；能更深入的理解它的架构和特性，甚至做出横向的比对，就是第二个阶段，这样的人很少。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/excalibur-architecture-xd7.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/08/excalibur-architecture-xd7.jpg"
loading="lazy"
alt="XenDesktop 系统架构"
>&lt;/a>&lt;/p>
&lt;p>学习 Citrix 技术的几个途径如下，我们通常都用到那些？请在下面投票。&lt;/p>
&lt;p>[poll id=&amp;ldquo;3&amp;rdquo;]&lt;/p>
&lt;p>什么是您认为学习 Citrix 技术的好的方式方法？请于本帖留言。&lt;/p></description></item><item><title>很离谱，很合理，很喜欢</title><link>https://martinliu.cn/2013/07/19/mac-pro-e5be88e7a6bbe8b0b1-e5be88e59088e79086-e5be88e5969ce6aca2/</link><pubDate>Fri, 19 Jul 2013 07:02:46 +0000</pubDate><guid>https://martinliu.cn/2013/07/19/mac-pro-e5be88e7a6bbe8b0b1-e5be88e59088e79086-e5be88e5969ce6aca2/</guid><description>&lt;p>今天上苹果网站上发现一个很酷的东西 Mac Pro，我觉得它 catch my eyes；真的设计的很离谱，很合理，我很喜欢，帖几张图共同赏析一下。&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;52469,52473,52470,52471,52472,52476,52478,52479,52474,52481&amp;rdquo;]&lt;/p>
&lt;p>连接详情，访问 apple 官网：&lt;a class="link" href="http://www.apple.com.cn/mac-pro/" target="_blank" rel="noopener"
> http://www.apple.com.cn/mac-pro/&lt;/a>&lt;/p></description></item><item><title>七章节细讲Citrix虚拟桌面基础架构搭建</title><link>https://martinliu.cn/2013/07/09/e4b883e7aba0e88a82e7bb86e8aeb2citrixe8999ae68b9fe6a18ce99da2e59fbae7a180e69eb6e69e84e690ade5bbba/</link><pubDate>Tue, 09 Jul 2013 17:05:58 +0000</pubDate><guid>https://martinliu.cn/2013/07/09/e4b883e7aba0e88a82e7bb86e8aeb2citrixe8999ae68b9fe6a18ce99da2e59fbae7a180e69eb6e69e84e690ade5bbba/</guid><description>&lt;p>Citrix 项目实施秘籍文档慢慢泄露中。点击本文标题直达 Citrix-Book.org 最佳实践网站&lt;/p></description></item><item><title>XenDesktop 7 抢鲜测试</title><link>https://martinliu.cn/2013/07/08/xendesktop-7-e68aa2e9b29ce6b58be8af95/</link><pubDate>Mon, 08 Jul 2013 03:45:59 +0000</pubDate><guid>https://martinliu.cn/2013/07/08/xendesktop-7-e68aa2e9b29ce6b58be8af95/</guid><description>&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;52454,52455,52456&amp;rdquo;]&lt;/p>
&lt;p>XenDesktop 7 问世以来，目前处于市场初级推广阶段；虽然还没有大范围的推广，如果业内的合作伙伴们如果还没有尝试过，那么你们就 Out 了。为了更好的指导大家的测试工作，这里介绍两篇文档：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://wiki.citrix-book.org/xendesktop/%E6%B5%8B%E8%AF%95/xendesktop7%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C" target="_blank" rel="noopener"
>XenDesktop7 快速安装手册&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://wiki.citrix-book.org/xendesktop/%E6%B5%8B%E8%AF%95/xendesktop7%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C" target="_blank" rel="noopener"
>XenDesktop7 安装和配置手册 from yandong&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>另外隆重推荐的是这个开放维基百科网站“&lt;a class="link" href="http://wiki.citrix-book.org/" target="_blank" rel="noopener"
>Citrix-book.org Citrix 最佳实践&lt;/a>”；退出这个网站的原因是我看到，目前网络资源过于纷乱，大多数技术大拿们都有自己的 bolg 和微博；但是干活资源过于分散；这个网站本着开放自由的出发点，鼓励和欢迎所有的大难能到这里集中和上传你的干活技术资料。投稿方式为自由注册，自行在线新建和编辑文档；也可以根据网站指引投稿。&lt;/p></description></item><item><title>Microserver Lenovo ThinkCenter M92/M92p Tiny</title><link>https://martinliu.cn/2013/05/24/microserver-lenovo-thinkcenter-m92m92p-tiny/</link><pubDate>Fri, 24 May 2013 01:32:28 +0000</pubDate><guid>https://martinliu.cn/2013/05/24/microserver-lenovo-thinkcenter-m92m92p-tiny/</guid><description>&lt;p>刚刚入手了一台 Lenovo ThinkCenter M92/M92p Tiny 测试机，虽然配置不高但是出于 geek 习惯，还是要动动螺丝刀的。下面是拆机过程，供参考。
[gallery columns=&amp;ldquo;2&amp;rdquo; link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;52429,52430,52431,52432,52433,52434,52435&amp;rdquo;]&lt;/p>
&lt;p>这款机器目前在国内好像还没有正式买，起码联想中国官网上连技术指标也查不到。美国网站上是有这个机器的介绍。&lt;/p>
&lt;p>[caption id=&amp;quot;&amp;quot; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;960&amp;rdquo;]&lt;img src="http://www.lenovo.com/images/products/desktops/m-series/m92p-hero-ribbon.jpg"
loading="lazy"
>](&lt;a class="link" href="http://www.lenovo.com/products/us/desktop/thinkcentre/desktops-towers-us-only/m92-m92p/" target="_blank" rel="noopener"
>http://www.lenovo.com/products/us/desktop/thinkcentre/desktops-towers-us-only/m92-m92p/&lt;/a>) ThinkCenter M92P[/caption]&lt;/p>
&lt;h2 id="at-a-glance">At a Glance&lt;/h2>
&lt;ul>
&lt;li>Up to 3rd generation Intel® Core™ i7&lt;/li>
&lt;li>Up to Windows 8 Pro&lt;/li>
&lt;li>Up to 1TB HDD, Up to 128GB SSD&lt;/li>
&lt;li>Up to 32GB memory (4x8GB)&lt;/li>
&lt;li>&lt;a class="link" href="http://www.lenovo.com/products/us/tech-specs/desktop/thinkcentre/m-series-towers/m92-m92p/" target="_blank" rel="noopener"
>M92/M92p Tower Tech Specs&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.lenovo.com/products/us/tech-specs/desktop/thinkcentre/m-series-towers/m92-tiny/" target="_blank" rel="noopener"
>M92/M92p Tiny Tech Specs&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>我所测试的是 M92 Tiny 型。改机默认安装的 Win8 操作系统。如果把它改装为跑 Hypervisor 的服务器的话，它应该属于  Microserver 的范畴。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>接下来，我准备在这个机器上做些改动和测试。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>如果有可能的话，更换硬盘为 SSD 硬盘，升级内存到最大两条 8GB，共 16GB&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安装和测试 XenClient：使用集中管理器，来更新本地硬盘的 Widnows 虚拟机操作系统&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安装和测试 XenServer：在上面跑 XenDesktop 的虚拟机，看看做多能达到多少个用户的密度，分别测试共享桌面和 VDI 桌面，看看共享桌面的密度会在这个机器上比 VDI 高几倍？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试跑 CloudStack 的计算节点，试想如果实验室里面有一摞 16 个机器，都做在一个群集上，跑跑大数据 Hadoop 应用，应该也是很好的使用场景&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>你的体重标准么？</title><link>https://martinliu.cn/2013/05/23/e4bda0e79a84e4bd93e9878de6a087e58786e4b988efbc9f/</link><pubDate>Thu, 23 May 2013 01:42:12 +0000</pubDate><guid>https://martinliu.cn/2013/05/23/e4bda0e79a84e4bd93e9878de6a087e58786e4b988efbc9f/</guid><description>&lt;p>[caption id=&amp;ldquo;attachment_52426&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;640&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/05/a02cee3bjw1e4xxhq050wj20hs0ppgq6.jpg"
loading="lazy"
alt="成人理想体重范围"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/05/a02cee3bjw1e4xxhq050wj20hs0ppgq6.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/05/a02cee3bjw1e4xxhq050wj20hs0ppgq6.jpg&lt;/a>) 成人理想体重范围[/caption]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>终于为我的体重找到了依据，我的体重目前开来很标准。跑步则是保持体重，提高体质的基础。&lt;/p></description></item><item><title>我想跑遍全世界</title><link>https://martinliu.cn/2013/05/21/e68891e683b3e8b791e9818de585a8e4b896e7958c/</link><pubDate>Tue, 21 May 2013 15:47:44 +0000</pubDate><guid>https://martinliu.cn/2013/05/21/e68891e683b3e8b791e9818de585a8e4b896e7958c/</guid><description>&lt;p>我说的是跑步的跑：）&lt;/p>
&lt;p>_&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/05/Safari.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/05/Safari.jpg"
loading="lazy"
alt="my running "
>&lt;/a>_&lt;/p>
&lt;p>目前的情况是，我的足迹分布在国内 6 个城市。还有很多国内城市没跑过，也还有很多外国城市没有跑过，好在还有很多年的时间来丰富这张跑步地图。&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(中文版)</title><link>https://martinliu.cn/2013/05/14/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbe4b8ade69687e78988/</link><pubDate>Tue, 14 May 2013 05:59:11 +0000</pubDate><guid>https://martinliu.cn/2013/05/14/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbe4b8ade69687e78988/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/box]&lt;/p>
&lt;p>英文版：&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>《Citrix Virtual Desktop Handbook》&lt;/a>&lt;/p>
&lt;p>中文版：[download id=&amp;ldquo;20&amp;rdquo;]&lt;/p>
&lt;p>本书是 XD 虚拟桌面实施工程师的必备读物，请相关人员仔细阅读。&lt;/p></description></item><item><title>隐藏Windows Explorer中的各种东西</title><link>https://martinliu.cn/2013/05/14/hide-windows-explorer-items/</link><pubDate>Tue, 14 May 2013 04:10:35 +0000</pubDate><guid>https://martinliu.cn/2013/05/14/hide-windows-explorer-items/</guid><description>&lt;p>XenApp 实施工具，隐藏 Windows  Explorer 中的各种东西。&lt;/p>
&lt;p>HideLibraries
Hide libraries icon in the navigation pane of Windows Explorer.
HideFavorites
Hide favorites icon in the navigation pane of Windows Explorer.
HideNetwork
Hide network icon in the navigation pane of Windows Explorer.
HideComputer
Hide computer icon in the navigation pane of Windows Explorer.
HideHomeGroup
Hide home group icon in the navigation pane of Windows Explorer
ShowLibraries
Show libraries icon in the navigation pane of Windows Explorer.
ShowFavorites
Show favorites icon in the navigation pane of Windows Explorer.
ShowNetwork
Show network icon in the navigation pane of Windows Explorer.
ShowComputer
Show computer icon in the navigation pane of Windows Explorer
ShowHomeGroup
Show home group icon in the navigation pane of Windows Explorer
Logoff
In order to changes take effect the explorer shell process needs to be restarted. Specifying the option causes your windows session to logoff immediately.
Reboot
In order to changes take effect the explorer shell process needs to be restarted. Specifying the option causes the computer to reboot immediately.
Help
Displays this usage information.&lt;/p>
&lt;p>点此处下载： [download id=&amp;ldquo;19&amp;rdquo;]&lt;/p>
&lt;p>几乎是做 XenApp 共享桌面的必备工具。&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(part5)</title><link>https://martinliu.cn/2013/05/07/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart5/</link><pubDate>Tue, 07 May 2013 02:36:41 +0000</pubDate><guid>https://martinliu.cn/2013/05/07/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart5/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/box]&lt;/p>
&lt;p>今天是&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>《Citrix Virtual Desktop Handbook》&lt;/a>第二讲的最后一期，专门论述一下 PVS 的设计。在本期之后我会把所有以往的内容整合在一个完整的白皮书中，稍等几日。。。&lt;/p>
&lt;p>请期待基于本系列 5 篇文章的完整版中文白皮书下载。&lt;/p>
&lt;p>Citrix 桌面虚拟化实施部署白皮书 第二讲之第五期：PVS 的设计&lt;/p>
&lt;ol>
&lt;li>Provisioning Services&lt;/li>
&lt;/ol>
&lt;p>Citrix Provisioning Services（PVS）使用流化的技术简化了虚拟桌面和物理桌面的部署。计算机从一个单个的共享磁盘镜像上被实时制备（Provisioned），管理员完全不需要去管理或者是给每个单独的用户操作系统打补丁。&lt;/p>
&lt;p>&lt;strong>1)        **&lt;strong>决断：*&lt;/strong>*Farm**&lt;/strong>（场）的数量******&lt;/p>
&lt;p>一个 Provisioning Services 的场代表着 Provisioning Services 基础架构的最高层级。所有在一个场的 Provisioning Servers（服务器）都共享同一个 SQL 数据库哦 Citrix License 服务器。当确定需要多少个 Provisioning Services 的场时，我们一般需要考虑以下几个因素：&lt;/p>
&lt;p>l  **网络：**Provisioning Servers 会始终和场数据库通信以获取系统配置信息。因此，一般来说每个 target devices 聚集的地理位置应该部署一个独立的场，当然，如果异地之间的网速足够快，理论上也可以只建立一个 Provisioning Services 场。&lt;/p>
&lt;p>l  **重要程度：**管理者应该决定它可以容仍什么样的风险。尽管可能性非常的低，但是 Provisioning Services 场如果出问题还是会影响整个组织架构的使用。如果一个公司需要非常高等级的可用性，那么多个场的搭建就可以避免这个问题。&lt;/p>
&lt;p>l  **可管理性：**管理者可能需要在基于组织架构划分的基础上，例如国家、地区，又或者是不同部门之间，来进行单独的系统管理。尽管听起来这会增加管理的复杂程度，但是实际上只会增加有限多的配置、桌面创建过程，以及操作系统镜像更新。&lt;/p>
&lt;p>&lt;strong>2)        **&lt;strong>决断：站点（*&lt;/strong>*Sites**&lt;/strong>）的数量******&lt;/p>
&lt;p>每个 Provisioning Services 的场都包含一个或者多个的站点。一个 Provisioning Services 的站点是一个逻辑的实体组成部分，包含了 Provisioning Servers（服务器）、vDisk pools，以及 target devices 的集合。多个站点共享同一个数据库。Target devices 可以在同一个站点中容错到其他的 Provisioning Servers 上。在以下的情况下我们建议创建多个站点：&lt;/p>
&lt;p>l  **网络：**站点用来控制 Provisioning Services 的流数据量。例如，一个站点可以根据站点、rack、或者是刀箱来创建，以确保流数据始终保持在本地而不变成一个网络瓶颈。&lt;/p>
&lt;p>l  **组织架构：**另外一个需要创建多个站点的实际理由是企业组织架构的改变。例如，两个公司通过收购合并了，但是有需要在企业整合过程中保持资源的独立。&lt;/p>
&lt;p>3)         &lt;strong>决断：数据库的配置&lt;/strong>&lt;/p>
&lt;p>Provisioning Services 的数据库存储有所有一个场内的的系统配置信息。Provisioning Services 6.X 版本支持一下版本的 SQL 数据库，包括 Express、标准版、企业版的 SQL Server 2005、2008R2 以及 2012 版。选择哪一个 SQL 版本其实是取决于你需要哪一个级别的容错水平。以下的表格是一个 SQL 2008R2 版本的示例：&lt;/p>
&lt;p>Provisioning Services 场的数据库的大小很少会超过 250M 容量，即使在大型环境下也不会。所以，在测试环境下 Express 版本是最佳选择，因为不需要容错功能。&lt;/p>
&lt;p>下面的公式是用来计算 Provisioning Services 的数据库的容量大小：&lt;/p>
&lt;p>4)         &lt;strong>决断：数据库；离线模式&lt;/strong>&lt;/p>
&lt;p>如果到 Provisioning Services 场的数据库的连接断开，已经连接到 Provisioning Servers 的 target devices 仍然可以正常工作，但是新的 target devices 将会无法启动。&lt;/p>
&lt;p>支持离线数据库功能可以让 Provisioning Services 在失去连接到数据库后仍然可以保持正常操作。在服务器启动时会对数据库做个快照，然后定期保持同步。如果连接丢失，Stream Services 会使用最新的一个快照以获取场的配置信息。一旦数据库连接建立起来了，Stream 过程会把断线期间的变化同步到数据库中。&lt;/p>
&lt;p>&lt;em>需要注意的是，离线数据库功能默认下是关闭状态的，而且也仅仅是在生产环境下的稳定的场环境下推荐使用。评估环境下不推荐使用&lt;/em>&lt;/p>
&lt;p>5)         &lt;strong>决断：服务帐号&lt;/strong>&lt;/p>
&lt;p>Stream 和 SOAP 服务会和其他许多不同的 Provisioning Services 基础架构中的组件进行通信，如下图所示：&lt;/p>
&lt;p>6)         &lt;strong>决断：设备集合&lt;/strong>&lt;/p>
&lt;p>设备集合是用来创建和管理 target devices 逻辑组。创建设备集合可以简化设备管理，因为将来的操作可以不用基于 target device 级别，而是基于集合这个级别。&lt;/p>
&lt;p>设备集合可以基于物理地理位置、子网范围、组织架构中不同的部门来设计。也可以考虑基于 vDisk 的分配来创建不同的设备集合，这样所有分配到一个特定 vDisk 的所有的 target devices 就能被快速的定位。&lt;/p>
&lt;p>7)         &lt;strong>决断：**&lt;strong>Provisioning Server*&lt;/strong>*（服务器）的内存&lt;/strong>&lt;/p>
&lt;p>运行 Provisioning Services 的 Windows 操作系统会把 vDisk 的部分内容缓存在内存（系统缓存）中以降低从存储中读取的操作。从存储中读取数据的速度是显著低于从内存中读取数据的，所以，正确计算 Provisioning Servers 的内存是非常关键的。请参见以下的公式：&lt;/p>
&lt;p>简单地说，就是给每个 vDisk 分配 2G 左右的内存。&lt;/p>
&lt;p>8)         **决断：**&lt;strong>Scale Up*&lt;/strong>*还是****Scale Out**&lt;/p>
&lt;p>&lt;em>题外话：首先对这两个词进行一下解释：&lt;/em>&lt;/p>
&lt;p>&lt;em>Scale Out(&lt;strong>向外扩展)&lt;/strong>：就是指企业可以根据需求增加不同的服务器应用，依靠多部服务器协同运算，借负载平衡及容错等功能来提高运算能力及可靠度。&lt;/em>&lt;/p>
&lt;p>&lt;em>Scale Up(&lt;strong>向上扩展)&lt;/strong>：指企业后端大型服务器以增加处理器等运算资源进行升级以获得对应用性能的要求。&lt;/em>&lt;/p>
&lt;p>随着 Farm 场的增长，管理员需要作出决定以判断是不是需要给 Provisioning Server 增加更高的资源，也可以是在场中增加更加多的 Provisioning Servers，一下了可以是考虑因素：&lt;/p>
&lt;p>l  **冗余：**将用户符合扩展到其他负荷不重的服务器上会有助于降低当 Provisioning Servers 宕机情况下爱所影响的用户数量。如果公司无法接受单点高性能服务器宕机所造成的损失，那就考虑 Scaling Out，就是我们说的向外扩展（既增加多台服务器）。&lt;/p>
&lt;p>l  **容错时间：**在一个单台的 Provisioning Server 上所连接的 Target Devices 越多，在服务器宕机后所需要的恢复时间也就越多。Citrix 的内部测试显示在 Provisioning Services 5.6 SP2 版本下，1500 台 Target Devices 需要大约 8 分钟恢复生产能力；&lt;/p>
&lt;p>l  **数据中心容量：**数据中心一般都是只有有限的空间、电源、冷却能力，此时，可以考虑 Scaling Up，即向上扩展（增加单台服务器的处理能力）。&lt;/p>
&lt;p>l  **硬件成本：**刚开始时，可能 Scale Up 会有更高的性价比，但是继续往后可能 Scale Out 会开始更具性价比，应该做一个成本分析；&lt;/p>
&lt;p>9)         &lt;strong>决断：**&lt;strong>vDisk*&lt;/strong>*的存储位置&lt;/strong>&lt;/p>
&lt;p>一个场可以包含一个或者多个的 vDisk 存储。一般来说有两个主要的选择：&lt;/p>
&lt;p>l  &lt;strong>本地存储或者是 DAS**&lt;/strong>：**DAS 可以是本地的，或者是基于 Block 的存储类型，Provisioning Server 可以直接访问，例如 SATA、SCSI、iSCSI，以及光纤。本地的 vDisk 就只能被本地的 Provisioning Server 所反问，因此，vDisk 应当被手动或者自动的复制到其他的 vDisk 存储位置上。&lt;/p>
&lt;p>&lt;strong>&lt;em>注意：&lt;/em>&lt;/strong>&lt;em>将 vDisk&lt;strong>部署在本地存储上并不会造成单点故障，因为 Provisioning Service&lt;/strong>的负载均衡技术可以让 target devices&lt;strong>自动的在其他 Provisioning Servers&lt;/strong>之间做容错动作。&lt;/em>&lt;/p>
&lt;p>l  &lt;strong>NAS**&lt;/strong>：**NAS 是一种基于文件级存储的 solution。NAS 协议包括 CIFS 和 NFS。NAS vDisk 可以被多个 Provisioning Server 同时所访问。NAS 由于不需要 vDisk 复制功能所以能保证 vDisk 在一个场内的多台 Provisioning Server 之间保持连续性。&lt;/p>
&lt;p>&lt;strong>&lt;em>注意：&lt;/em>&lt;/strong>&lt;em>NAS&lt;strong>反而会造成单点故障，如果网络共享功能不可用，所有从这个 vDisk&lt;/strong>上 Streamed&lt;strong>的 target device&lt;/strong>都会变得不可用了。&lt;/em>&lt;/p>
&lt;p>10)     &lt;strong>决断：评估存储容量&lt;/strong>&lt;/p>
&lt;p>一个 vDisk 包含了一个 VHD 基础镜像文件、一个 properties 文件（.pvd），也可以能包含了一个链条 VHD 差异磁盘（.avhd）。每当一个 vDisk 被 Provisioning Services versioing 所更新时，一个新的差异磁盘就会被创建。&lt;/p>
&lt;p>一个 vDisk 所占空间的评估因素大致有以下几点：&lt;/p>
&lt;p>l  **vDisk****的总容量：**顾名思义&lt;/p>
&lt;p>l  **vDisk chain****的最大版本数：**vDisk versioning 简化了 vDisk 升级以及管理的负担，他能够更加灵活和健壮的管理 vDisks。&lt;/p>
&lt;p>&lt;strong>&lt;em>备注：&lt;/em>&lt;/strong>&lt;em>太多的差异磁盘会显著降低 Provisioning Services&lt;strong>的性能，建议不要超过 5-7&lt;/strong>个的版本数。&lt;/em>&lt;/p>
&lt;p>l  **vDisk****版本变化百分比：**差异磁盘的大小是随着对 vDisk 的改动多少而随着变化的。改得越多，差异磁盘的大小就越大。以下的计算公式可以用于计算 vDisk 容量：&lt;/p>
&lt;p>举例如下：&lt;/p>
&lt;p>比如你计划部署三个 vDisk：&lt;/p>
&lt;p>  Windows 7 (x64) image = 40GB&lt;/p>
&lt;p>  Windows 7 (x86) image = 35GB&lt;/p>
&lt;p>  Windows XP image = 20GB&lt;/p>
&lt;p>每个 vDisk 都不会超过 5 个差异磁盘。预计一个差异磁盘大致是 20%的主 vDisk 镜像文件大小，那么估计 Provisioning Services 存储所需要的空间如下：&lt;/p>
&lt;p>11)     &lt;strong>决断：**&lt;strong>RAID*&lt;/strong>*级别&lt;/strong>&lt;/p>
&lt;p>存储子系统的 RAID 级别会对应用程序和用户的工作负荷产生直接的影响。RAID 0、1 以及 10 对读操作是最优，而 RAID 5 和 6 是对写操作是最优。对于 Provisioning Services 来说，不同的 RAID 级别有如下推荐配置：&lt;/p>
&lt;p>Provisioning Services 中 vDisk 主要是读操作，而对 Write Cache 来说主要是写操作。所以：&lt;/p>
&lt;p>l  &lt;strong>Write Cache**&lt;/strong>：**推荐 RAID 0、1、10 因为这几种 RAID 的写惩罚较低&lt;/p>
&lt;p>l  **vDisk ****存储：**推荐 RAID 0、1、5、10，它可以让读操作分配到 RAID 中的其他磁盘中；&lt;/p>
&lt;p>如果可能，建议将 vDisk 放在 RAID5 上，而写缓存放在 RAID10 上。如果 vDisk 和写缓存一定要放在一起，那么建议采用 RAID10。&lt;/p>
&lt;p>12)     &lt;strong>决断：写缓存的位置&lt;/strong>&lt;/p>
&lt;p>写缓存可以有以下位置：&lt;/p>
&lt;p>l  **缓存在 Target Device****的硬盘上：&lt;strong>由于 Provisioning Servers 不用处理写请求，放在这里会减轻 Provisioning Servers 的资源消耗。尽管没有放在内存中这么快，这种方式的读写都是在本地，还是能提供快速的响应时间；**&lt;/strong>&lt;/p>
&lt;p>l  **缓存在 Target Device****的硬盘上永久保存：**和第一种方式类似，区别在于用户重启之后存储永久保存。该功能目前还是测试阶段，仅在 Windows 2008 R2 和 windows 7 上支持。&lt;/p>
&lt;p>l  **缓存在 Target Device****的内存中：**尽管这种方式在性能上是最优的，但是如果 RAM 别耗尽了也会印象系统的稳定性；&lt;/p>
&lt;p>l  **缓存在 Provisioning Server****的磁盘上：**缓存在 Provisioning Server 的磁盘上作为临时文件存储。所有的写操作均发生在 Provisioning Server 服务器上。这样配置当然会增加 Provisioning Server 的磁盘 IO 操作和网络负担。配置上这种方式最为简单，不过这种方式下 target device 由于所有的到写缓存的读写请求都必须经过网络，target device 的性能会受到较大影响。这种方式仅在 POC 阶段推荐！&lt;/p>
&lt;p>l  **缓存在 Provisioning Server****的磁盘上永久保存：**和上一种方式基本类似，区别在于用户重启之后存储永久保存。这种方式的好处在于 target device 能够保存对 vDisk 所做的改变，在重启之后也仍然保留。任何对 vDisk 的改变都会将缓存文件强制标记为失效状态。例如，如果 vDisk 被设置为 Private Image Mode，一下所有的操作都会导致缓存文件被标记为失效状态：&lt;/p>
&lt;p>n  o  Placing a vDisk in Maintenance mode&lt;/p>
&lt;p>n  o  Mapping the drive from the console&lt;/p>
&lt;p>n  o  Changing the location of the write cache file&lt;/p>
&lt;p>n  o  Using Automatic update&lt;/p>
&lt;p>写缓存包含了 target device 的 MAC 地址和磁盘识别符，他能独一无二的区分出每一台 target device。一个 target device 可以被分配多个 vDisk，因此，也可以关联多个缓存文件。&lt;/p>
&lt;p>将写缓存部署在 target device 上是最为推荐的配置方法，因为既不用消耗而外的 RAM 内存，又不会减少 Provisioning Servers 的扩展性。&lt;/p>
&lt;p>13)     &lt;strong>决断：写缓存的大小&lt;/strong>&lt;/p>
&lt;p>写缓存的大小取决于很多隐私，一般来说都是基于评估和典型的用户配置文件大小。一般来说应当能够存储一下数据：&lt;/p>
&lt;p>n  Temporary application data&lt;/p>
&lt;p>n  User profile temp files&lt;/p>
&lt;p>n  Windows Event Logs&lt;/p>
&lt;p>n  Citrix Logs&lt;/p>
&lt;p>n  Antivirus pattern files&lt;/p>
&lt;p>n  Citrix Application Streaming/Microsoft App-V Cache&lt;/p>
&lt;p>&lt;em>备注：启用了用户配置文件重定向操作能减少写缓存所需要的大小。&lt;/em>&lt;/p>
&lt;p>写缓存的大小极大程度上取决于安装或者是 Streamed 到 vDisk 上的应用程序的大小以及用户配置文件的大小。推荐配置的起点是 2GB。对于大部分虚拟桌面来说，我们有如下推荐配置：&lt;/p>
&lt;p>此外，Windows 的 pagefile 也会写入和写缓存同样的磁盘中，所以：&lt;/p>
&lt;p>例如，如果 Windows 7 的 vDisk 设计是 1.5GB 的 pagefile，那么写缓存的一个安全的评估数据应该是：&lt;/p>
&lt;p>不过由于 Hypervisor 都不能将磁盘精确到小数点后，我们姑且分配 4GB 的空间吧。&lt;/p>
&lt;p>14)     &lt;strong>决断：**&lt;strong>vDisk*&lt;/strong>*的格式&lt;/strong>&lt;/p>
&lt;p>Provisioning Services 支持固定磁盘以及动态磁盘格式。&lt;/p>
&lt;p>l  **固定磁盘格式：**对于私有模式（private mode）的 vDisk，固定尺寸大小的 vDisk 可以对存储 vDisk 磁盘上进行的磁盘碎片整理操作，这对写操作的性能提升会有帮助。不过在私有模式下，访问 vDisk 受限于一个 target device，我们说仅当对 vDisk 进行维护模式时才有实际意义。&lt;/p>
&lt;p>l  **动态磁盘：**相比较而言他需要更少的磁盘空间，但是在写操作上性能会显著降低。尽管在共享模式下（Shared Mode）的 vDisk 不会对 vDisk 执行写操作，不过对完成 vDisk 合并时所要花费的时间会增加许多。&lt;/p>
&lt;p>15)     &lt;strong>决断：**&lt;strong>vDisk*&lt;/strong>*的大小&lt;/strong>&lt;/p>
&lt;p>vDisk 的大小主要取决于操作系统以及安装在操作系统上的应用程序的多少，我们预估的大小如下表所示：&lt;/p>
&lt;p>vDisk 的大小如果设置的太小或者是太大，日后我们还可以在 Provisioning Services 中调整。为了精确的评估 vDisk 的大小，请遵循以下的准则：&lt;/p>
&lt;p>l  **Target Device****的空间：&lt;strong>确认目前作为主 target device 服务的计算机所正在使用的磁盘空间大小；**&lt;/strong>&lt;/p>
&lt;p>l  **应用程序大小：**当应用程序安装时，所需要的空间也在增长。计划大 25%的增长&lt;/p>
&lt;p>16)     &lt;strong>决断：**&lt;strong>vDisk*&lt;/strong>*复制&lt;/strong>&lt;/p>
&lt;p>如果 vDisk 是存储在 DAS 上就需要在他自己有变化的时候复制到其他 DAS 上。Provisioning Services 支持 vDisk 从本地复制到 Provisioning Servers 上，也可以支持在使用共享存储时跨越多个站点之间的复制。复制可以是手动或者是自动：&lt;/p>
&lt;p>l  **手动复制：**简单，但是更耗时；&lt;/p>
&lt;p>l  **自动复制：**大型环境下自动复制更快。一些自动化工具，例如 Microsoft DFS-R 还支持带宽控制。唯一缺点是如果复制出错，管理员还不支持，除非复制平台支持复制重传。&lt;/p>
&lt;p>17)     **决断：微软****Volume Licensing**&lt;/p>
&lt;p>Provisioning Services 支持 Microsoft Key Management Service (KMS)和 Multiple Activation Key (MAK) volume licensing。&lt;/p>
&lt;p>l  &lt;strong>KMS Volume Licensing**&lt;/strong>：&lt;strong>可以在用户的本地网络上激活，无需连接到微软的网站。一台 KMS 服务器支持不受限的 JMS 客户端。微软公司推荐部署两台 KMS 服务器。**&lt;/strong>&lt;/p>
&lt;p>n  Office 2010 的部署只支持 KSM 激活方式；&lt;/p>
&lt;p>l  &lt;strong>MAK Volume Licensing**&lt;/strong>：**MS 的一次性激活方式。&lt;/p>
&lt;p>18)     &lt;strong>决断：高可用&lt;/strong>&lt;/p>
&lt;p>Provisioning Services 是虚拟桌面基础架构中最重要的组成部分，因此为了避免单点故障，需要考虑一下推荐步骤：&lt;/p>
&lt;p>l  &lt;strong>MAK Volume Licensing**&lt;/strong>：**MS 的一次性激活方式。&lt;/p>
&lt;p>l  **数据库：**Provisioning Services 支持两种数据库的高可用方式：&lt;/p>
&lt;p>n  离线的数据库；&lt;/p>
&lt;p>n  镜像数据库&lt;/p>
&lt;p>l  &lt;strong>Provisioning Servers**&lt;/strong>（PVS****服务器）：**所有在一个站点之间的 Provisioning Servers 都能够被配置为向 target device 提供同一个 vDisk。每个站点最少部署两台 PVS 服务器。&lt;/p>
&lt;p>n  Provisioning Services 启动文件应当配置为高可用。在启动文件中可以配置高达 4 台 PVS 服务器的列表。Target Device 会按照顺序连接这些 PVS 服务器。后续所响应的服务器可以不是当初提供 Streaming 服务的服务器。当然，我们也可以配置负载均衡。&lt;/p>
&lt;p>l  **vDisk****和存储：**对于 DAS 上存储的 vDisk，应当做好同步操作。对于 NAS 上的 vDisk，NAS 存储必须提供一条高可用的网络共享连接；&lt;/p>
&lt;p>l  **网络：**Provisioning Servers（PVS 服务器）的网卡应当配置为 Teamed。&lt;/p>
&lt;p>19)     &lt;strong>决断：带宽需求&lt;/strong>&lt;/p>
&lt;p>带宽评估对于整体性能是有至关重要的，特别是当 Target Device 启动的时候。带宽是随着操作系统的不同而有所区别的。Target Device 启动所需要的时间可以参考下面的公式：&lt;/p>
&lt;p>例如，500 个 Windows 7 的 Target Devices 在 1G 以太网下需要 40M 启动：&lt;/p>
&lt;p>1.  1 GB Ethernet = 125MB/s&lt;/p>
&lt;p>2.  500 targets x 40 MB = 20GB&lt;/p>
&lt;p>3.  20GB/125MBs = 160 seconds&lt;/p>
&lt;p>下面的表格列举了在 10GB 网络下启动 500 台不同操作系统的 Target Device 时大致的带宽和启动加载时间：&lt;/p>
&lt;p>备注：防火墙会增加网络延迟，同时也会造成网络瓶颈，如果可能，最好禁用防火墙，如果实在不能避免，最好能开放一下端口的完全访问能力：&lt;/p>
&lt;p>20)     &lt;strong>决断：网络配置&lt;/strong>&lt;/p>
&lt;p>为 PVS 服务器提供 10Gbps 网络能提供最够需要的带宽，如果做不到的话，1Gbps 也可以提供足够的带宽，但是有可能会成为 PVS 服务器的瓶颈。将多块网卡做 Teaming 处理能提供更高的吞吐量，增加网络性能，也能阻止网络的单点故障。下表列出了 PVS 服务器的网络配置属性，从最大容量到最小：&lt;/p>
&lt;p>以下的 NIC 属性应当正确配置在 PVS 服务器以及 Target Devices 的 NIC 上：&lt;/p>
&lt;p>简单地说，就是禁用 Checksum Offloading 属性；关闭 Auto Negotiation，使用强制配置；启用 Jumbo Frame。&lt;/p>
&lt;p>21)     &lt;strong>决断：交换机配置&lt;/strong>&lt;/p>
&lt;p>用于 PVS 服务器和 Target Devices 的网络交换机应当做一下优化：&lt;/p>
&lt;p>l  &lt;strong>生成树协议（Spanning Tree Protocol**&lt;/strong>）/PortFast****：**禁用生成树协议，启用 PortFast；&lt;/p>
&lt;p>l  &lt;strong>风暴控制 Storm Control**&lt;/strong>：**在 Cisco Catalyst 交换机上将 Unicast 流量值设置大一些，或者是禁用 Unicast Filtering。&lt;/p>
&lt;p>l  &lt;strong>Broadcast Helper**&lt;/strong>：**启用之，这样可以转发 PXE 和 TFTP 流量；&lt;/p>
&lt;p>22)     &lt;strong>决断：**&lt;strong>Bootstrap*&lt;/strong>*交付&lt;/strong>&lt;/p>
&lt;p>在一个 Target Device 开始启动过程的时候，他会首先加载一个 bootstrap 程序，该程序会初始化 Target Device 和 PVS 服务器之间的流化会话过程。有三种方法让 Target Device 能收到 bootstrap 程序：&lt;/p>
&lt;p>l  &lt;strong>Broadcast Helper**&lt;/strong>：**启用之，这样可以转发 PXE 和 TFTP 流量；&lt;/p>
&lt;p>l  &lt;strong>使用带有 DHCP**&lt;strong>选项的 PXE*&lt;/strong>*方式；&lt;/strong>&lt;/p>
&lt;p>l  &lt;strong>使用不带有 DHCP**&lt;strong>选项的 PXE*&lt;/strong>*方式；&lt;/strong>&lt;/p>
&lt;p>l  &lt;strong>使用 Boot Device Manager**&lt;/strong>；**&lt;/p>
&lt;p>在企业无法提供 PXE 或者是 TFTP 服务的情况下，或者是无法对 DHCP Scope 选项修改的情况下，可以考虑使用 Boot Device Management 工具通过一个 ISO 文件来提供 bootstrap 文件。&lt;/p>
&lt;p>23)     &lt;strong>决断：审计&lt;/strong>&lt;/p>
&lt;p>默认下审计功能是禁用的，管理员可以将将其打开。打开后该工具可以记录在 Provisioning Services 场内组件所做的配置修改记录，并将结果记录至数据库中。&lt;/p>
&lt;p>24)     &lt;strong>决断：防病毒&lt;/strong>&lt;/p>
&lt;p>大部分的防病毒软件都会是扫描所有的文件和系统进程，对性能影响很大。所以在 PVS 环境下必须优化防病毒软件的配置。请参见 CTX124185 - Provisioning Services Antivirus Best Practices。&lt;/p></description></item><item><title>Top10全球排名前十的云计算公司</title><link>https://martinliu.cn/2013/05/07/top10e585a8e79083e68e92e5908de5898de58d81e79a84e4ba91e8aea1e7ae97e585ace58fb8/</link><pubDate>Tue, 07 May 2013 02:31:30 +0000</pubDate><guid>https://martinliu.cn/2013/05/07/top10e585a8e79083e68e92e5908de5898de58d81e79a84e4ba91e8aea1e7ae97e585ace58fb8/</guid><description>&lt;p>来自  &lt;a class="link" href="http://www.intelligenthq.com/uncategorized/top-10-cloud-computing-companies/" target="_blank" rel="noopener"
>http://www.intelligenthq.com/uncategorized/top-10-cloud-computing-companies/&lt;/a>&lt;/p>
&lt;p>Citrix 榜上有名排名第三，这就是我看好 CloudStack 一年多的回报，国内 CloudStack 目前看还没有什么生机，希望能早点发展起来。&lt;/p>
&lt;p>We all know change is constant, especially in technology. Look at Toshiba, a world leader and innovator in high technology. This week, the company made an interesting move and announced the opening of Toshiba’s first datacenter in Europe, located in France.&lt;/p>
&lt;p>Toshiba Cloud &amp;amp; Solutions Division is directed at professional markets, public and private-sector companies, and entities within the Toshiba Group. The creation of this datacenter is in line with the Group’s goal of accompanying its clients right from the design of IT products and solutions through to hosting related services tailored to specific needs.&lt;/p>
&lt;p>The datacenter also hosts firms located in other regions, illustrating Toshiba’s broader ambitions. &lt;a class="link" href="http://www.intelligenthq.com/wp-content/uploads/2012/10/Cloud-Computing.jpeg" target="_blank" rel="noopener"
>&lt;img src="http://www.intelligenthq.com/wp-content/uploads/2012/10/Cloud-Computing-180x110.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>“&lt;em>Developing this first datacenter in Rhône-Alpes highlights the importance of the Grand Lyon project for Toshiba and embodies the group’s investment in the development of its Cloud offering&lt;/em>,&lt;em>”&lt;/em>  explains Philippe Hartmanshenn, Managing Director of Toshiba Systèmes France’s Cloud &amp;amp; Solutions Division.&lt;/p>
&lt;p>“&lt;em>This allows us to move both internal and external client resources and services offsite to our high-security servers – located in France. We also plan to use the datacenter to develop and integrate business solutions for our clients from every sector.”&lt;/em>&lt;/p>
&lt;p>__I felt the need to highlight this as it shows the importance of the cloud, as an important tool to innovation regardless of industry.&lt;/p>
&lt;p>&lt;a class="link" href="http://www.intelligenthq.com/wp-content/uploads/2013/03/BeFunky_CloudComputingImage.jpg.jpg" target="_blank" rel="noopener"
>&lt;img src="http://www.intelligenthq.com/wp-content/uploads/2013/03/BeFunky_CloudComputingImage.jpg.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>So who are the Top 10 players of cloud computing services that has been making waves recently?&lt;/p>
&lt;p>&lt;strong>1. Google&lt;/strong>&lt;/p>
&lt;p>Google Cloud is the approach of Google to provide enterprise solutions to companies. Google Cloud Platform allows you to build applications and websites, store and analyze data on Google’s infrastructure. Companies can build websites, applications and service on this platform. Apart from these Google also offers Google Apps for businesses, which is now growing. Google has recently unveiled a “patent pledge” that it hopes will shield cloud software and big data developers from  litigation. The pledge, which is like a non-aggression pact, covers ten patents related to Google’s MapReduce technology.&lt;/p>
&lt;p>&lt;strong>2. Microsoft&lt;/strong>&lt;/p>
&lt;p>The foundations of the Cloud OS are Windows Server and Windows Azure, complemented by the full breadth of our technology solutions, such as SQL Server, System Center and Visual Studio. Together, these technologies provide one consistent platform for infrastructure, apps and data that can span your datacenter, service provider datacenters, and the Microsoft public cloud.&lt;/p>
&lt;p>&lt;strong>3. Citrix&lt;/strong>&lt;/p>
&lt;p>Citrix Cloud Platform provides the latest and most advanced open source software platform to build highly scalable and reliable cloud computing environments. Citrix offers three form of cloud computing – Hosted public cloud, Hosted private cloud and On-premise private cloud; Recently as per Info-Tech Research Group, Citrix Cloud platform is announced the Champion in Cloud Management Vendor Landscape. Citrix recently announced the availability of CloudPortal™ Business Manager 2.0, a cloud services delivery platform that enables enterprises and service providers to unify the commerce, user management, provisioning and operational aspects of a cloud into a single cloud interface for delivering anything as a service (XaaS).&lt;/p>
&lt;p>**4. Joyent
**
San Francisco infrastructure-as-a-service provider, Joyent is the high-performance cloud infrastructure company, offering the only solution specifically built to power real-time web and mobile applications. Recently with the combined efforts of Joyent and Xeround (a cloud database company), Joyent customers can now access free and highly available with zero management MYSQL database. Xeround relational database is only available for Joyent Cloud platform.&lt;/p>
&lt;p>**5. CenturyLink
**
CenturyLink, 3rd largest telecommunication company in USA and an established leader in providing networking solutions and cloud hosting services. CenturyLink recently announced that it’s providing 100 Gigabyte per sec (Gbps) networking solutions and will continue to provide best cloud infrastructure and IT hosting solutions. Savvis, a subsidiary of CenturyLink has collaborated with VMware Cloud Applications Marketplace to provide wide variety of applications packages to its clients from various software and hardware vendors.&lt;/p>
&lt;p>&lt;strong>6. Amazon&lt;/strong>&lt;/p>
&lt;p>Amazon EC2 is an Infrastructure as a Service Cloud Computing Platform provided by Amazon Web Services (AWS), which allows users to provision or deletion of virtual computers. Amazon is one of the true innovators in Web-based computing, offering pay-as-you-go access to virtual servers and data storage space. Recently Amazon announced AWS CloudHSM, a new service enabling customers to increase data security and meet compliance requirements by using dedicated Hardware Security Module (HSM) appliances within the AWS Cloud. The CloudHSM service allows customers to securely generate, store and manage cryptographic keys used for data encryption in a way that keys are accessible only by the customer.&lt;/p>
&lt;p>&lt;strong>7. IBM&lt;/strong>&lt;/p>
&lt;p>IBM Smart Cloud – IBM’s enterprise-class public cloud infrastructure-as-a-service (IaaS)delivers secure and scalable hosted IT infrastructure with on-demand access to virtual server and storage resources. BM recently announced global availability for its cloud service on five continents—plus a new center opening in Spain—based on its industry-leading sourcing business to host SAP applications and other core operations. Now clients can turn to cloud computing for enterprise applications while reducing the overall cost of IT and at the same time, expanding online access and investing in innovative analytics, social business and mobile computing.&lt;/p>
&lt;p>&lt;strong>8. Salesforce&lt;/strong>&lt;/p>
&lt;p>Salesforce.com’s CRM solution is broken down into several broad categories: Sales Cloud, Service Cloud, Data Cloud, Collaboration Cloud and Custom Cloud. Saleforce is aiming be the first cloud computing company to hit the $4 billion annual revenue by 2014 and you can assume this from its 3rd quarter earnings. Salesforce will concentrate on social media, mobile computing and real time in a project it refers to as Cloud 2.&lt;/p>
&lt;p>&lt;strong>9. Rackspace&lt;/strong>&lt;/p>
&lt;p>Rackspace, an open cloud company is delivering enterprise-level hosting services to businesses of all sizes and kinds around the world since 1998 and have grown to serve more than 190,000 customers. Rackspace integrates the industry’s best technologies for each customer’s specific need and delivers it as a service via its commitment to fanatical support. Rackspace recently opened the doors to its Open Cloud Academy by launching a pilot training program. The Open Cloud Academy is an educational program designed to provide students with affordable IT certifications, specifically around open cloud technologies.&lt;/p>
&lt;p>&lt;strong>10. Verizon Terremark&lt;/strong>&lt;/p>
&lt;p>Verizon started its cloud computing services as a part of its enterprise solutions. Its infrastructure services have helped many of the world’s top enterprises improve IT performance and evolve business processes. Verizon Terremark sets the standard for IT deployments with advanced infrastructure and managed service offerings that deliver the scale, security, and reliability necessary to meet the demanding requirements of enterprises and governments around the world. Terremark launched its Enterprise Cloud Private Edition a single-tenant environment and its OS- and network-agnostic strategy shows the telco cloud understands the value of accessibility and integration.&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(part4)</title><link>https://martinliu.cn/2013/05/02/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart4/</link><pubDate>Thu, 02 May 2013 04:22:36 +0000</pubDate><guid>https://martinliu.cn/2013/05/02/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart4/</guid><description>&lt;p>[su_box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/su_box]&lt;/p>
&lt;p>桌面虚拟化项目的实施白皮书  《Citrix Virtual Desktop Handbook 5.x》，&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>点击下载&lt;/a>。&lt;/p>
&lt;h2 id="四-控制层-control-layer">四、      控制层 Control Layer&lt;/h2>
&lt;p>控制层是设计架构的第四层。在上面有关用户的三个层面我们所做的决定都会汇总起来到控制层。&lt;/p>
&lt;ol>
&lt;li>访问控制器&lt;/li>
&lt;/ol>
&lt;p>访问控制器子层的职责是给每个用户提供予以支持访问控制层的基础架构组件。这么说可能比较绕口，那就换个说法吧，访问控制器一般包括例如 Web Interface、StoreFront，以及 NetScaler Access Gateway；&lt;/p>
&lt;p>1)        远程访问架构&lt;/p>
&lt;p>如果有用户需要远程或者是离线的移动访问能力，那么就要设计远程访问基础架构了。&lt;/p>
&lt;ol>
&lt;li>**A.        ****决断：拓扑**&lt;/li>
&lt;/ol>
&lt;p>网络拓扑的设计对远程访问架构能够支撑功能性、性能以及安全性至关重要。远程访问架构应当和安全团队一起合作以确保符合企业的安全规范。以下三种主要的拓扑结构我们在设计师可以考虑，每种的安全性逐渐递增：&lt;/p>
&lt;p>l  &lt;strong>1-Arm (Normal Security**&lt;/strong>，单臂模式)****：**在这种架构下，Access Gateway 使用一个物理的或者是逻辑的 Bonded 的网络接口，再加上 VLAN 和 IP 子网的设计，来传递用户和后台虚拟桌面的流量。&lt;/p>
&lt;p>l  **2-Arm (High Security **&lt;strong>双臂模式)*&lt;/strong>*：**在双臂模式下，Access Gateway 利用两张或者更多的物理或者逻辑 Bonded 的网络接口卡，再加上 VLAN 和 IP 子网的设计，来传递用户和后台虚拟桌面的流量。前段用户的流量被导向这些网络接口卡的第一张网卡上，前后端的流量是被分离设计的，就是说说后端虚拟桌面架构服务器的流量是被定向到第二张网卡上的。通过这样的设计我们就可以 DMZ 区来分离前后端的流量，同时还可以定制防火墙策略和流量监控策略。****&lt;/p>
&lt;p>l  **Double-Hop DMZ (Very High Security): **这种模式既利用了双臂拓扑下的特性，又使用了两个单独的 Access Gateway 设备。有一些企业使用了三个物理的/逻辑的防火墙结构来保护他们的内部网络。这三个防火墙将 DMZ 区划分为两个区域来提供额外的内部网络安全。&lt;/p>
&lt;p>在第一个 DMZ 区的 Access Gateway 设备处理用户的连接，完成 SSL VPN 的安全功能。这个 Access Gateway 设备加密客户端连接，判断用户的认证方式，控制能够访问的内部网络服务器；&lt;/p>
&lt;p>第二个 DMZ 区域的 Access Gateway 设备充当与一个代理设备角色。这个 Access Gateway 设备启用 ICA 协议将客户端连接穿越第二个 DMZ 区到后端的服务器场。在第一个 DMZ 区的 Access Gateway 设备和内部网络的 Secure 　 Ticket 　 Authority（STA）也是通过第二个 DMZ 区的 Access Gateway 设备来进行代理的。&lt;/p>
&lt;ol>
&lt;li>**B.        ****决断：平台**&lt;/li>
&lt;/ol>
&lt;p>在 Access Gateway 部分，我们曾经讨论过只要是涉及到远程访问，我们都会考虑 NetScaler Access 　 Gateway 设备。问了确定合适的 NetScaler 平台来满足项目需求，必须确定一些关键资源。由于所有的远程访问流量都是通过 SSL（安全套接层）来加密，再通过 HTTPs 的 HTTP（超文本协议）协议来传输。所以有两种资源 metric 需要确认：&lt;/p>
&lt;p>l  **SSL****吞吐量：**SSL 吞吐量是定义为每秒钟能处理的 GB SSL 流量；&lt;/p>
&lt;p>l  **SSL**&lt;strong>每秒交易量（TPS*&lt;/strong>*）：**TPS metric 定义在每秒每个应用程序交付控制器（ADC）能处理的 SSL 交易数量&lt;/p>
&lt;p>关于这两个参数的更详细解释，可以参考：&lt;a class="link" href="http://assets.citrix.com/NetScaler_0911/ASSETS/Citrix_2048_SSL_Best_Practices.pdf" target="_blank" rel="noopener"
>Best Practices for implementing 2048-bit SSL&lt;/a>&lt;/p>
&lt;p>平均的 SSL 带宽开销在和虚拟桌面的开销比较起来时经常忽略。但是 SSL 带宽的计算将会有助于确定总带宽是否足够。固定带宽加上数据包头开销常常随着加密算法的不同而变化，总带宽开销也常常随着数据包尺寸大小的变化而不同。理想状态下，开销数字应当通过 POC 或者是 Pilot 来实际测试得来，但是在没有这些数据的情况下，在工作负荷带宽基础上加上 2%是一个合理的数字。因此，在确定 NetScaler 平台的时候，SSL 的吞吐量常常是最大并发带宽乘以 1.02，即：&lt;/p>
&lt;p>SSL 吞吐量 = 最大并发带宽 × 1.02&lt;/p>
&lt;p>例如：假设 128M 是最大的并发带宽，那么最合适的 NetScaler 模型应当计算为：&lt;/p>
&lt;p>约 130Mbps = 128M × 1.02&lt;/p>
&lt;p>NetScaler 有三种平台，每种都提供了大量的不同的扩展性：&lt;/p>
&lt;p>l  &lt;strong>VPX**&lt;/strong>：&lt;strong>VPX 平台的 NetScaler 和硬件的 NetScaler 提供完全一致的功能，不过他只适合于小型的测试环境使用。**&lt;/strong>&lt;/p>
&lt;p>l  &lt;strong>MDX**&lt;/strong>：&lt;strong>NetScaler MDX 是 NetScaler 设备的硬件版本。他能支持大型网络可扩展环境；**&lt;/strong>&lt;/p>
&lt;p>l  &lt;strong>SDX**&lt;/strong>：&lt;strong>NetScaler SDX 设备是在物理 NetScaler 设备和虚拟 NetScaler 设备之间的一个桥梁。一个 SDX 设备能够划分为多个虚拟的 NetScaler 设备。**&lt;/strong>&lt;/p>
&lt;p>2)        StoreFront&lt;/p>
&lt;p>Citrix StoreFront 是 Web Interface 的下一代产品，它验证用户连接到后台的 XenDesktop 站点、XenApp 场，以及 AppController（SaaS 应用），然后枚举或者是聚合可用的桌面和应用程序到商店以便让用户通过不同操作系统平台上的 Receiver 来访问，包括安卓、iOS、Linux、Windows、Win8/RT 以及 Web 站点。&lt;/p>
&lt;ol>
&lt;li>&lt;strong>C.         **&lt;strong>决断：Web Interface*&lt;/strong>*还是 StoreFront&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>Web Interface 和 StoreFront 是两种不同的解决方案，在一些功能方面有重叠。所以我们要认真评估我们的需求。一般来说，新的方案应该使用 StoreFront，因为 Web Interface 已经不再有新功能添加了。可以参考下面的链接了解 Citrix 桌面产品的生命周期：&lt;a class="link" href="http://www.citrix.com/support/product-lifecycle/milestones/xendesktop.html" target="_blank" rel="noopener"
>Lifecycle Milestones for Citrix XenDesktop&lt;/a>&lt;/p>
&lt;p>下面的表格也示例了在何种情况下该使用什么产品：&lt;/p>
&lt;p>下面的表格对两种产品在未来功能的开发目标上进行了一个对比，Web Interface 已经不再会有革命性的功能添加了：&lt;/p>
&lt;p>下面的表格是功能对比：&lt;/p>
&lt;p>有一些 Web Interface 有的功能也会被完全整合到未来的 StoreFront 新版本中去：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>A.        **&lt;strong>决断：Web *&lt;/strong>*服务的高可用&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>如果 StoreFront 服务器不可用，或者是其他对应的 Web 服务不可用了，那么用户就不能连接到新的会话，例如打开新的虚拟桌面，无法打开应用程序等操作，因此，至少需要规划两台 StoreFront 来预防单点故障问题。我们可以考虑的方案包括：&lt;/p>
&lt;p>l  &lt;strong>DNS Round Robin**&lt;/strong>：&lt;strong>在多个服务器之间提供基本的负载均衡功能，无法做到是否可用性的检查；在服务器宕机时，部分用户会受到影响。**&lt;/strong>&lt;/p>
&lt;p>l  &lt;strong>Windows NLB**&lt;/strong>：**是 Windows 的一个服务。可以做一些基本的检查来判断服务器是否可用，但是无法判断单个服务的状态。&lt;/p>
&lt;p>l  &lt;strong>Citrix NetScaler**&lt;/strong>：**智能硬件设备，能检查 StoreFront 服务的状态，根据用户请求主动激活负载均衡状态。&lt;/p>
&lt;ol>
&lt;li>**B.        ****决断：应用程序订阅数据库的高可用**&lt;/li>
&lt;/ol>
&lt;p>StoreFront 的配置数据都存储在每一台 StoreFront 服务器的本地，然后被复制到服务器组中的其他的系统中。对比之下，用户应用程序订阅信息存储在应用程序订阅数据库中，该数据库可以是本地的 StoreFront 服务器，也可以是推荐的一个专门的 Microsoft SQL Server。&lt;/p>
&lt;p>如果应用程序订阅数据库不可用，以下功能将不可用：&lt;/p>
&lt;p>l  用户不能在管理他们的应用程序订阅；&lt;/p>
&lt;p>l  无法登陆至 Web 方式的 Reciever，但是已经建立起来的会话可以继续正常工作；&lt;/p>
&lt;p>为了防止应用程序订阅数据库成为单点故障点，Citrix 推荐 SQL 的高可用方案：&lt;/p>
&lt;p>l  **自动容错的 SQL****镜像：&lt;strong>数据库镜像提供了一种比数据库 Clustering 更简单的快速容错方法。数据库镜像技术在每一个镜像点上需要一个标准的 SQL 标准版服务器 License，在加上一个 witness 服务器的 SQL Express License 即可。更多细节可以参考文档：&lt;a class="link" href="http://support.citrix.com/proddocs/topic/dws-storefront-12/dws-configure-conf-file.html" target="_blank" rel="noopener"
>Configuring StoreFront using the Configuration Files.&lt;/a>**&lt;/strong>&lt;/p>
&lt;p>l  **SQl Clustering: **微软的技术，不过老实说，相比较 Mirroring 技术配置太复杂，此外，自动容错的过程也更慢。在 License 上，每个 Cluster 节点都需要一个企业版的 SQL license。****&lt;/p>
&lt;p>l  **Hypervisor****高可用：**数据库部署在一台虚拟机上，通过 Hypervisor 的高可用来实现。这个技术比镜像或者是 clustering 都要便宜，因为只需要一个 SQl Express License 和一台 SQL Server（需要一个具备 HA 功能的 Hypervisor License）。不过，这个技术容错过程较慢，也仅仅是当 SQl Server 的操作系统宕机时才能启动容错机制。如果数据库服务出现错误是无法被 Hypervisor 层检测到的。&lt;/p>
&lt;p>&lt;em>注意：未来的 StoreFront&lt;strong>版本将不会再使用应用程序订阅数据库（Application Subscription Database&lt;/strong>），相反，预订信息会自动的在 StoreFront&lt;strong>服务器组中的 StoreFront&lt;/strong>服务器中自动复制。&lt;/em>&lt;/p>
&lt;ol>
&lt;li>**C.         ****决断：容量规划**&lt;/li>
&lt;/ol>
&lt;p>基于扩展性的测试，单个 StoreFront 服务器可以支持的用户数是无限制的，受限制的是在这个服务器上每小时之内用户同时操作的动作。这是因为仅仅当用户执行一个动作的时候，例如在 Receiver 中订阅一个应用程序是，StoreFront 才被使用。当用户连接到所发布的资源时，StoreFront 实际上是 idle 状态的。因此，下面的表格所展示的内容介绍的是没鸟的请求时，或者是每小时的请求数。我们建立了一个前提条件是每用户在每小时之内启动了五个应用程序，订阅了 2 个应用程序，取消订阅了一个应用程序，总共每小时是 8 个操作量。&lt;/p>
&lt;p>注意：上述数字是在仿真环境下测试得来：基于 SSL 的 XenApp6.5，发布了 100+个应用程序，每个用户在 5 秒钟之内完成操作的。&lt;/p>
&lt;p>StoreFront 对 CPU 的数量更敏感，也就是说对 CPU 的消耗更大，而不是对内存消耗更大。推荐的企业 StoreFront 服务器是 4 个 vCPU 和 4GB RAM。&lt;/p>
&lt;ol>
&lt;li>&lt;strong>D.        **&lt;strong>但服务器扩展性 – *&lt;/strong>*应用程序订阅数据库&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>应用程序订阅数据库包含了每个用户订阅的一系列资源列表情况。基于测试环境下，推荐的一个储存应用程序订阅数据库独立 SQL 服务器的配置是 4vCPU 和 4GB RAM。&lt;/p>
&lt;p>数据库的增长速度大约是每个订阅 10KB 空间消耗：&lt;/p>
&lt;p>数据库大小 = （用户数 × 每用户的订阅数） × 10KB&lt;/p>
&lt;p>1 个订阅 = 1 个用户订阅一个应用程序，例如，1000 个用户订阅 10 个应用程序就是 100MB。&lt;/p>
&lt;ol>
&lt;li>桌面控制器&lt;/li>
&lt;/ol>
&lt;p>这部分内容主要是介绍 XenClient 部分，请大家自行参见&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>原始文档&lt;/a>。&lt;/p>
&lt;p>下期预告：下一期我们介绍最后的部分：Provisioning Services&lt;/p></description></item><item><title>Ask the Architect 推荐Citrix虚拟化大师一名</title><link>https://martinliu.cn/2013/05/02/ask-the-architect-e68ea8e88d90citrixe8999ae68b9fe58c96e5a4a7e5b888e4b880e5908d/</link><pubDate>Thu, 02 May 2013 03:42:54 +0000</pubDate><guid>https://martinliu.cn/2013/05/02/ask-the-architect-e68ea8e88d90citrixe8999ae68b9fe58c96e5a4a7e5b888e4b880e5908d/</guid><description>&lt;p>&lt;a class="link" href="http://virtualfeller.com/" target="_blank" rel="noopener"
>http://virtualfeller.com/&lt;/a>&lt;/p></description></item><item><title>我的第一次半程马拉松比赛</title><link>https://martinliu.cn/2013/04/23/e68891e79a84e7acace4b880e6aca1e58d8ae7a88be9a9ace68b89e69dbee6af94e8b59b/</link><pubDate>Tue, 23 Apr 2013 12:41:24 +0000</pubDate><guid>https://martinliu.cn/2013/04/23/e68891e79a84e7acace4b880e6aca1e58d8ae7a88be9a9ace68b89e69dbee6af94e8b59b/</guid><description>&lt;p>[nggallery id=18]&lt;/p>
&lt;p>第一次的半程马拉松比赛，跑的非常艰苦，鞋子和脚趾出现严重的状况，中途已经痛的我呲牙咧嘴；烈日艳艳的高温，让整个人都快从脚底板燃烧起来了。到了终点，一个大约坑爹的 1 公里折返跑彻底让人筋疲力尽。&lt;/p>
&lt;p>比赛就是比赛，一旦开始就没有退出，只有坚持到底的人才能收获成绩。&lt;/p></description></item><item><title>bad thing will pass</title><link>https://martinliu.cn/2013/04/23/bad-thing-will-pass/</link><pubDate>Tue, 23 Apr 2013 11:57:14 +0000</pubDate><guid>https://martinliu.cn/2013/04/23/bad-thing-will-pass/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/bad-thing-pass.gif" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/bad-thing-pass.gif"
loading="lazy"
alt="bad-thing-pass"
>&lt;/a>&lt;/p></description></item><item><title>让Xen Project回家</title><link>https://martinliu.cn/2013/04/23/xen-is-now-a-linux-foundation-collaborative-project/</link><pubDate>Tue, 23 Apr 2013 08:20:59 +0000</pubDate><guid>https://martinliu.cn/2013/04/23/xen-is-now-a-linux-foundation-collaborative-project/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/collab_projects.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/collab_projects.png"
loading="lazy"
alt="collab_projects"
>&lt;/a>&lt;/p>
&lt;p>首先我们来回顾一下历史：
&lt;a class="link" href="http://xenproject.org/about/history.html" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/Xen-history.png"
loading="lazy"
alt="Xen-history"
>&lt;/a>&lt;/p>
&lt;p>上周 Citrix 把经营和支持多年的开源项目 Xen Project 加入到了 inux Foundation，可以说是 Xen Project 的一个新家。可能您还不太了解“Linux Foundation”；访问 &lt;a class="link" href="http://www.linuxfoundation.org/about/faq" target="_blank" rel="noopener"
>FAQ&lt;/a> 可获得它的一些基本知识。到目前为止 Linux Foundation 总共支持了 8 个开源软件项目。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>想加入 Linux fondation 的项目还必须满足如下两个标准：&lt;/p>
&lt;ul>
&lt;li>The use of open source governance best practices including license and contribution agreement choices in keeping with the ideals of Linux&lt;/li>
&lt;li>The project must have the potential to fuel innovation in an industry through collaborative software development&lt;/li>
&lt;/ul>
&lt;p>我个人认为，这对于 Xen Project 和 Citrix 双方来说都是一个好事，Xen Project 可以获得跟光明的发展前景，Citrix 的商业产品 XenServer 也基本上可以直接从中受益。对 Xen 的处理，Citrix 的做法和处理 CloudStack 是相同的，只是 CloudStack 交给了 Apache 组织。在国外这是一种成熟和成功的商业模式，开源软件项目周边发展出的是生机盎然的生态系统。&lt;/p>
&lt;p>Citrix 的官方新闻 ：&lt;a class="link" href="http://www.citrix.com/news/announcements/apr-2013/citrix-and-industry-leaders-usher-in-new-era-for-open-source-xen.html" target="_blank" rel="noopener"
>Citrix and Industry Leaders Usher in New Era for Open Source Xen&lt;/a> //Strong Industry Support Drives Need for Independent Xen Project Initiative
Xen Project 官网新闻：&lt;a class="link" href="http://blog.xen.org/index.php/2013/04/15/xen-is-now-a-linux-foundation-collaborative-project/" target="_blank" rel="noopener"
>Xen is now a Linux Foundation Collaborative Project&lt;/a>
Linux Foundation 新闻：&lt;a class="link" href="http://www.linuxfoundation.org/news-media/announcements/2013/04/xen-become-linux-foundation-collaborative-project" target="_blank" rel="noopener"
> Xen to Become Linux Foundation Collaborative Project&lt;/a>
Jim Zemlin （Executive Director of Linux Foundation）欢迎 Xen 的加入： &lt;a class="link" href="http://www.linuxfoundation.org/news-media/blogs/browse/2013/04/welcome-xen-linux-foundation-collaborative-project" target="_blank" rel="noopener"
>Welcome Xen as a Linux Foundation Collaborative Project&lt;/a>
对 Xen Project 做持续贡献的厂商么是这么反馈的： &lt;a class="link" href="http://www.linuxfoundation.org/news-media/announcements/2013/04/supporting-statements-xen-project-contributors" target="_blank" rel="noopener"
>查看&lt;/a>
Xen Project 的旧家：&lt;a class="link" href="http://www.xen.org/" target="_blank" rel="noopener"
>  http://www.xen.org/&lt;/a>
Xen Project 的新家：&lt;a class="link" href="http://xenproject.org/" target="_blank" rel="noopener"
>http://xenproject.org/&lt;/a>
请记住 Xen 的标志物，功夫熊猫：[gallery ids=&amp;ldquo;52363,52365,52366&amp;rdquo;]&lt;/p>
&lt;p>ZDNet 的评论： &lt;a class="link" href="http://www.zdnet.com/xen-becomes-a-linux-foundation-project-7000014025/" target="_blank" rel="noopener"
>Xen, Citrix&amp;rsquo;s popular open-source hypervisor, is becoming a Linux Foundation Collaborative Project with the backing of such major technology powers such as Amazon Web Services, Google, and Intel.&lt;/a>&lt;/p>
&lt;p>arstechnica.comd 的评论：&lt;a class="link" href="http://arstechnica.com/information-technology/2013/04/linux-foundation-takes-over-xen-enlists-amazon-in-war-to-rule-the-cloud/" target="_blank" rel="noopener"
>Linux Foundation takes over Xen, enlists Amazon in war to rule the cloud ///Xen virtualization gains support from Amazon, Cisco, Google, Intel, and more.&lt;/a>&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(part3)</title><link>https://martinliu.cn/2013/04/16/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart3/</link><pubDate>Tue, 16 Apr 2013 15:29:43 +0000</pubDate><guid>https://martinliu.cn/2013/04/16/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart3/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/box]&lt;/p>
&lt;p>桌面虚拟化项目的实施白皮书  《Citrix Virtual Desktop Handbook 5.x》，&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>点击下载&lt;/a>。&lt;/p>
&lt;p>智慧的积累靠一蹴而就很难实现，慢慢积累和温故而知新往往是最佳的手段。让我们继续开始《Citrix 桌面虚拟化实施部署白皮书》，这晚我们开讲第二部分的第三单元：桌面层。&lt;/p>
&lt;p>四、 桌面层 Desktop Layer&lt;/p>
&lt;p>设计思想的第三层，也是和用户相关的最后一层，就是桌面层。用户是否能接受桌面虚拟化很多程度上就是在这一层实现的，例如包括个性化、应用程序，以及后台操作系统镜像文件的设计。&lt;/p>
&lt;ol>
&lt;li>应用程序交付&lt;/li>
&lt;/ol>
&lt;p>选择正确的应用程序交付方法会对整个系统设计的可扩展性、可管理性，以及用户感受起到非常大的帮助。基于我们在前几章节的“四、 应用程序数据搜集”，我们可以考虑以下几种交付方法：&lt;/p>
&lt;p>l 直接安装在操作系统镜像文件上：应用程序是基础操作系统镜像文件的一部分；&lt;/p>
&lt;p>l 安装在 Personal vDisk 上：物理是分离的，但是逻辑上是直接安装在基础操作系统镜像文件中；&lt;/p>
&lt;p>l 流化（Streaming）：应用程序被 profiled（XenApp 组件）后通过网络交付到桌面上。应用程序的文件和注册表键值在虚拟桌面的一个容器中保存，但是和基础操作系统镜像文件是分离的。&lt;/p>
&lt;p>l Hosted：应用程序安装在 XenApp 服务器上，用户通过 Citrix HDX 协议远程访问。&lt;/p>
&lt;ol>
&lt;li>决断：应用程序交付方法&lt;/li>
&lt;/ol>
&lt;p>系统架构师应该在基于用户需求、应用程序兼容性，以及其他通过在前几章（“四、 应用程序数据搜集”）搜集上来的应用程序因素基础之上决定采用何种方法来进行应用程序的交付。通常单一的方法是无法满足用户全部的需求的，所以多种方法组合才是最佳答案。但是不管用什么方法，这些交付手段都应当对整个项目的交付复杂程度和后续跟进步骤与以最小的影响。&lt;/p>
&lt;p>下面的表格就是不同的交付方法对系统不同层面的影响：&lt;/p>
&lt;p>除了应用程序交付方法对系统不同层面的应用之外，系统架构师还应该考虑应用程序在不同交付手段上的适用性。下面的表格就是不同应用程序所推荐的部署方法示例：&lt;/p>
&lt;p>上表中需要注意的是最后一种应用程序，我们往往会觉得这种复杂安装和配置的应用程序最好是安装在操作系统镜像文件中，但是最佳实践告诉我们应该安装在 XenApp Server 上，通过 Hosted 的方法发布给用户。&lt;/p>
&lt;ol start="2">
&lt;li>兼容性&lt;/li>
&lt;/ol>
&lt;p>任何一个桌面虚拟化项目都会对一个公司的应用程序交付方法产生巨大的应用。举例来说，许多公司都希望通过在桌面虚拟化中使用流化的应用程序交付或者是 XenApp 交付应用程序来降低升级用户的桌面操作系统的劳动负荷以及提高管理效率。所以在设计阶段我们就要做很多兼容性测试以确定最正确的应用程序交付方法。最重要需要考虑的兼容性需求一般来说包括以下几点：&lt;/p>
&lt;p>l 桌面操作系统的版本：如果操作系统是通过流化安装或者是直接安装在操作系统中，那么应用程序需要考虑和操作系统的兼容性问题；&lt;/p>
&lt;p>l 服务器操作系统的版本：有一些应用程序可能会更合适通过 XenApp 的方式来交付，所以，应用程序是否能安装在服务器版本的操作系统平台上是要考虑的因素；&lt;/p>
&lt;p>l 应用程序本身的架构：应用程序本身的开发平台有可能是 16 位的，32 位的，也可能是 64 位的。16 位的应用程序就不能运行在 64 位的操作系统平台上，例如 Windows 2008Server 　 R2、Windows XP 64bits 等；&lt;/p>
&lt;p>l 互操作性：有一些应用程序如果和某些版本的操作系统共存是会有兼容性问题，例如注册表冲突、DLL 冲突，或者是 ini 冲突。&lt;/p>
&lt;p>l 应用程序流化：应用程序流化到桌面虽然可以简化管理，因为操作系统上不用安装那么多的应用程序了，但是记住有些带有设备驱动程序，或者是使用了 COM+等应用程序就不适合了&lt;/p>
&lt;p>在做应用程序兼容性测试时的三种主要技术手段有：&lt;/p>
&lt;p>l 手动：不言而喻这种方法最消耗时间，每种交付方法都要测试，每种操作系统版本、不同操作系统语言包等也都要验证。手动模式下想要的出应用程序所有方面的测试结果是非常困难的，对应用程序互操作性的测试是几乎测不出来的。而且更多的测试结果是现场使用人员发现的，而不是测试时发现的。&lt;/p>
&lt;p>l 预验证的应用程序：很多应用程序的开发商都会提供该应用程序的兼容性文档和最佳安装方式的文档。参考这些文档会有直接的帮助。此外，Citrix Community Verified 的网站上也有一整系列的由 Citrix 的客户和合作伙伴验证过包括采用流化方法/XenApp/Xendesktop 兼容的应用程序列表。微软公司也提供了类似的应用程序列表：Microsoft Windows 7 Application Compatibility List for IT Professionals；&lt;/p>
&lt;p>l 自动化的工具：Citrix AppDNA 可以快速而且准确的对应用程序的兼容性做出精确的测试，包括测试不同的操作系统平台，测试不同的交付手段，例如 Windows XP、Windows 7、Citrix XenApp、Microsoft App-V，以及 Citrix Streaming 流化交付方式等。应用程序被导入到 AppDNA 时，它会被和数千种应用程序进行兼容性的匹配验证以判断是否有互操作性问题。当发现问题时，AppDNA 会告知问题出自何处，可能的解决办法，以及估计解决的时间。&lt;/p>
&lt;p>上述每种方法的优点和缺点都列在下表中：&lt;/p>
&lt;p>测试做完之后，兼容性的结果就应该填入到之前的应用程序评估表各种以便我们的后续分析：&lt;/p>
&lt;p>l 预运行环境：许多程序都有运行环境的要求，例如 Java、.Net 环境，或者是数据库要求；&lt;/p>
&lt;p>l 程序之间的依赖：例如，需要以 pdf 格式呈现信息的应用程序就需要电脑上安装了 pdf 的阅读器；&lt;/p>
&lt;p>l 16 位的代码：应用程序评估也应该判断是否应用程序包含有 16 位的代码，因为 16 位的代码是不能运行在 64 位的操作系统平台上；&lt;/p>
&lt;p>l Windows XP：确认应用程序是否能通过 Windows XP 的兼容性测试；&lt;/p>
&lt;p>l Windows 7：确认应用程序是否能通过 Windows 7 的兼容性测试；&lt;/p>
&lt;p>l XenApp 6.5：确认应用程序是否能通过 XenApp 6.5 的兼容性测试；&lt;/p>
&lt;p>l Application Streaming 应用程序流化安装：确认应用程序是否能通过流化程序安装的兼容性测试；&lt;/p>
&lt;ol start="3">
&lt;li>用户分类&lt;/li>
&lt;/ol>
&lt;p>通常不是所有用户都需要所有的应用程序，有些程序可能就只有很小一部分用户用的上。所以系统架构师应该做好这个工作，例如如果一个部门的用户都需要的应用程序列表组，我们可以单独做一个操作系统镜像文件。如果只有少部门用户需要使用，那我们建议采用 Personal vDisk 或者是 Streaming 的方式交付应用程序。&lt;/p>
&lt;ol start="4">
&lt;li>业务特点&lt;/li>
&lt;/ol>
&lt;p>l IT 经验：如果 IT 部门已经对某种应用程序交付方式有经验，或者是基础架构已经 Ready 了，那么这种交付模式可能就是合适的方式。例如，如果公司内部已经通过 Microsoft App-V 平台部署过 Streaming 的应用程序，那么 XenApp Streaming 应用程序就应当优先被考虑。&lt;/p>
&lt;p>l 管理需求：应用程序交付的方法很可能严重依赖于应用程序的拥有着。如果应用程序是公司拥有的程序，那么 IT 部门就有责任和义务来维护该应用程序，包括 XenApp 发布或者是 XenApp 流化。如果程序的拥有者是某个下级部门，那么 IT 部门就不方便集中管理，这种情况下应用程序可能就建议安装在 Personal vDisk 上，让部门自己来管理该应用程序。&lt;/p>
&lt;p>l 升级频率：应用程序的升级所需要花费的时间和部门协调也对交付模式的选择有很大影响。如果应用程序经常升级，那么系统架构师就应当选择安装数量最少的交付模式，这样可以减少升级的应用程序数量，以及降低升级的复杂程度。这种情况西 XenApp 交付方式最为合适；&lt;/p>
&lt;p>l 产品 Licensing：如果应用程序没有 License 要求，例如和软件厂商签订了 Site License，那么我们可以将该程序发布给所有的用户也不会产生其他任何成本，将该程序直接安装在操作系统模板里面也能降低交付的复杂性。如果应用程序对 License 很敏感，系统架构师就需要考虑采用一种能够遵守应用程序软件提供商要求的 License 模型。&lt;/p>
&lt;ol start="5">
&lt;li>技术特点&lt;/li>
&lt;/ol>
&lt;p>l 资源使用：如果应用程序对资源要求很高，可能会更合适于直接在虚拟桌面里面直接运行；&lt;/p>
&lt;p>l 技术难点：如果一个应用程序的安装都很复杂，例如需要专门的配置，脚本的运行，或者对其他应用程序有很多要求，我们称之为技术难点。这种情况下，安装在 XenApp Server 上能减少操作系统镜像文件制作的复杂性。&lt;/p></description></item><item><title>什么是真的云？</title><link>https://martinliu.cn/2013/04/15/forrester-private-clouds-what-is-cloud-computing/</link><pubDate>Mon, 15 Apr 2013 17:31:21 +0000</pubDate><guid>https://martinliu.cn/2013/04/15/forrester-private-clouds-what-is-cloud-computing/</guid><description>&lt;p>[su_box  ]
最近有一篇比较热的文章，中文标题《Forrester：70%的“私有云”根本不是云》；你如果稍微搜索一下，你发现它几乎被转载烂了，但是我看了几篇，真心的担心读者们是否都能正确的理解。写本文，全当是给您的一个阅读帮助。
[/su_box]&lt;/p>
&lt;p>&lt;a class="link" href="http://www.cnw.com.cn/news-international/htm2013/20130227_264664.shtml" target="_blank" rel="noopener"
>中文版网页点这里&lt;/a>
&lt;a class="link" href="http://www.networkworld.com/news/2013/022613-forrester-private-clouds-267108.html" target="_blank" rel="noopener"
>英文版网页点这里&lt;/a>&lt;/p>
&lt;p>&lt;strong>中文翻译的质量有限，有些概念和逻辑错误，我做了一点点的修订，从而避免误解。&lt;/strong>&lt;/p>
&lt;p>**【基于 CNW.com.cn 译稿】**如果企业数据中心拥有高度虚拟化的环境，有一个 Web 门户供商业用户申请和访问虚机，再有一种方法可以跟踪有多少资源被使用了……拥有这一切并不能叫做有了一个&lt;a class="link" href="http://search.cnw.com.cn/searchview.aspx?searchtype=Content&amp;amp;searchstr=%CB%BD%D3%D0%D4%C6" target="_blank" rel="noopener"
>私有云&lt;/a>。&lt;/p>
&lt;p>假如有足够大的容量可以为员工提供他们所需要的任意数量的计算资源，并能够动态地上下扩展或收缩容量，但仍然需要 IT 人员制备好系统的话，那么这仍然不能叫私有云。&lt;/p>
&lt;p>虚拟化和私有云之间的界限是比较模糊的，根据 Forrester 的最新报告，在企业的 IT 高管们所自诩的私有云中，高达 70%的 IT 环境其实并非私有云。“这是个严重的问题。实际上是在做云洗白而已。”Forrester 的云专家 James Staten 如此说。&lt;/p>
&lt;p>为什么说这个问题非常重要? Staten 认为，如果将一个高度虚拟化的环境称为云环境，但它又不具备私有云的一项或多项关键特征，那么 IT 部门就给了用户一个不切实际的期望。假如用户们发现这个环境不能自配置，或者没有弹性&lt;a class="link" href="http://search.cnw.com.cn/searchview.aspx?searchtype=Content&amp;amp;searchstr=%D7%CA%D4%B4%B3%D8" target="_blank" rel="noopener"
>资源池&lt;/a>而感到不满时，他们就有可能因此而气馁。那么当下一次用户需要实时运行一个虚机时，他们会选择在哪里运行呢? 是 IT 部门给他们的伪私有云? 还是亚马逊的 AWS? 如此一来，IT 部门就无法控制事态了。&lt;/p>
&lt;p>大多数云专家已经对云计算(公有云或私有云)的定义有了普遍的共识，这就是 NIST 提出的五个关键特征。这些特征包括：&lt;/p>
&lt;p>● 用户可按需索取、&lt;a class="link" href="http://search.cnw.com.cn/searchview.aspx?searchtype=Content&amp;amp;searchstr=%D7%D4%B7%FE%CE%F1" target="_blank" rel="noopener"
>自服务&lt;/a>&lt;/p>
&lt;p>● 泛在的网络接入&lt;/p>
&lt;p>● 共享资源池&lt;/p>
&lt;p>● &lt;a class="link" href="http://search.cnw.com.cn/searchview.aspx?searchtype=Content&amp;amp;searchstr=%B5%AF%D0%D4%C0%A9%D5%B9" target="_blank" rel="noopener"
>弹性扩展&lt;/a>资源的能力&lt;/p>
&lt;p>● 拥有可计量的服务&lt;/p>
&lt;p>如果没有这五大特征，那从技术上说就不能叫云。和某些人的想法相悖的是，虚拟化并不是私有云。它只是为云提供动力的一个基本要素，但只依靠它是创建不出一个云的。VMware 的营销经理 Mike Adams 说，私有云必须在虚拟化环境之上综合更多复杂的管理功能，方能满足 NIST 的定义要求。&lt;/p>
&lt;p>CA 的战略解决方案副总裁兼云专家 Andi Mann 给这场讨论踩了一脚刹车。“如果你不符合所有这五大特征，那么你就陷入了语义学纠结中。”他认为真正的问题并不是说符合这五个复选标记的东西就叫做云，而是在于 IT 能否为用户提供适当的服务。“有时候，80%的云都已足够好了，”他说。“用户真正在意的是业务服务。谁会在意你的环境叫什么。你要关心的就是客户，就是业务用户是不是得到了他们需要的资源。”&lt;/p>
&lt;p>也许企业并不需要弹性扩展，因为原本就是静态工作负载。即便不需要弹性的资源扩展能力，它仍然还可以需要云的其他特征——自服务、计费、泛在网络接入和共享资源池。但它在技术上可能并不符合 NIST 的定义。“所以，如果你要想技术上也说得过去，也可以将其称为：高效率的虚拟环境，”Mann 说。&lt;/p>
&lt;p>那么，所有这些云洗白来自哪里? Staten 认为，IT 管理人员基本上对云都抱有恐惧心理。企业内的虚拟化专家通常都处于支配地位; 在需要资源时，他们可以去制备相应的资源容量。而云被视为一种赋予用户自服务和动态扩展资源权力的模式，对 IT 是一种威胁。如果用户可以自己开通了，那还要他们这些虚拟化专家干什么呢?&lt;/p>
&lt;p>Staten 认为，这样想上述问题是错误的。即便有了云，IT 管理人员还是有大量的工作可做，比如需要设置和确保云服务有一个可供用户选择的服务目录，需要完成安全访问协议配置，提供资源可用性和虚拟化组件等。管理人员必须接受这样一个理念：如果他们不这么做，那么用户不论如何还是需要访问和使用他们所需要的资源，这样还是会陷入可怕的“影子 IT”的局面。(Martin 修订)&lt;/p>
&lt;p>我想先对以上的几个关键点和名词做一些解释，从而能让我们更好的理解原文作者的意图。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&amp;ldquo;cloud-washing&amp;rdquo;  &amp;ndash;  “云洗白”   这个比喻是说：本来根本什么云都不是！但是还是要狡辩和伪装为私有云。真像是：纯虚拟化环境不等于云&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;ldquo;shadow IT.&amp;rdquo;   &amp;ndash;  “影子 IT”   这个比喻是说：IT 部门是业务部门挥之不去的阴霾，他们跟没发赶上业务部门需求变化请求的脚本，业务部门的人从来不管你是用的是神马云，你们这帮人根本没有按时的交付过任何东西，甚至于每当想起需要 IT 部门来配合做什么东西，就感到没有指望，啥都需要漫长的等待。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>IT 部门真的是技术不行么？IT 部门真的是干活的人不够么？这个比喻后背后真是的故事：特别是大规模的企业，业务部门所需要的任何 IT 资源和变更都必须通过 IT 自动、半自动或者手工配置实现；小的到开通一个邮箱，重置一次密码；大到新的业务系统的升级和上线；往往 IT 或者业务用户发频繁和密集地发起种种请求时，没有任何一家传统企业的 IT 部门（亚马逊、谷歌这种公司除外，因为它们已经是云计算公司了）能够很有自信地、充分让业务部门满意地完成被要求完成的所有工作。它们为什么完成不了呢？这个就走入了 IT 管理的经典理论，这就是我之前十年工作经验中天天和用户沟通的东西：“保持 IT 系统的稳定，还是接受变化”；为了既能响应业务部门不断的变化请求和 IT 用户的日常需求，IT 部门想到了很好的流程来加以解决，这个流程是什么？它叫“变更管理流程”。举个例子，大型的商业银行一般一周或者两周有一次系统变更日；所有的对 IT 系统的配置和改变，必须提前计划安排好工作顺序，只能在变更日当晚的固定时间窗口中完成，例如晚上 11 点到凌晨 5 点；如果在这个时间段某个工作没有完成怎么办？对不起！没有完成的变更叫做失败变更，你还必须在变更窗前前就把系统回退到未变更前的状态！你现在发现了么？对生产系统是多么严肃的事情！如果你在变更前，没有万无一失的备份计划，你但失误，你就歇菜了；或者你觉得是顺利完成变更了，但是营业厅一开门，IT 的投诉热线就被打爆了，这也不行；变更一但导致生产系统的宕机，轻则 IT 部门的领导引咎辞职，重则数据中心的大领导乌纱帽不保。&lt;/p>
&lt;p>以上讲述的故事可以说是我的亲身经历，就是中国的国情；那么这个文章的出处毕竟是国外的，这几个发话的大佬们都是何方神圣？&lt;/p>
&lt;p>Forrester 的云专家 James Staten ：&lt;a class="link" href="http://www.forrester.com/james-staten" target="_blank" rel="noopener"
>BIO&lt;/a>  从 Bio 上看，他好像是 Forrester 的头牌云分析师之一，有 20 年的 IT 从业经验。&lt;/p>
&lt;p>VMware 的营销经理 Mike Adams ：网上查不到它的 Bio，在 VMWare 网站搜索，也只能看到他是http://blogs.vmware.com/vsphere/ 的负责人。网上并没有关于此人的详细介绍，但是我们从 vsphere 的 blog 上在读一下这个产品的定位“BEGIN THE JOURNEY TO A PRIVATE CLOUD WITH DATACENTER VIRTUALIZATION”；这个说法和此大师在文章中说的一样：vsphere 是数据中心虚拟化的一个技术组建，数据中心虚拟化技术是私有云建设的起点。但是它是起点，不是私有云。纯种的服务器虚拟化项目也不是那天就能进化成私有云了。&lt;/p>
&lt;p>CA 的战略解决方案副总裁兼云专家 Andi Mann ：&lt;a class="link" href="http://www.linkedin.com/in/andimann" target="_blank" rel="noopener"
>BIO&lt;/a>  从 Bio 上可以看出，这大叔才是练家子，人家 84 年从 IT 管理员出身干起；感觉它说的话比较在点子上，并没有去忽悠云；而是从云的本质，也就是 IT 的本质去看，去分析的。也就是“IT 是提供服务和支持的，为的是让用户能够操作和使用业务系统去完成业务工作。” 如果这句话抽象，我可以举个例子：领导需要阅读邮件，他关心的是 IT 能否让我安全的在设备上查邮箱，浏览和回复邮件；当然你能让他在任何设备、任何网络上、任何时间都能完成以上动作，那就再好不过了。银行的储蓄业务柜员需要的是完成一个存、取钱、开销户等相关操作，他关心的是 IT 系统能够正常快速的相应，让客户快速的离开柜台；她根本不关心，网线后面连接的系统是啥做的。&lt;/p>
&lt;p>言归正传：把焦点放到“云”的概念上一点意义都没有！倒不如把心思放在云的价值上；把心思放在私/公有云的建设方案上！我试图从云计算的基础特征上来解读一下云计算对云企业的价值：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>用户可按需索取、自服务：让用户能够更方便的访问（请求、开通和使用）IT 资源和服务，用户无需等待，资源召之即来&lt;/p>
&lt;/li>
&lt;li>
&lt;p>泛在的网络接入：个人觉得这个应该翻译为高速度高带宽的网络接入，这个是外界访问到计算资源的必要条件之一；如果你资源再多，但是出口太窄也没有意义；如果翻译成这样也凑合如果能理解为，在个中网络条件下都能够正常安全的加入到云所提供的 IT 服务上也可以。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>共享资源池： 这个可以提高 IT 资源的利用率，利用率高了，投资就减少了，浪费了低了&lt;/p>
&lt;/li>
&lt;li>
&lt;p>弹性扩展资源的能力：这个可以应付突发的大批量用户访问请求，并且能够自动资源回收，最重要的是这些扩展和收缩的发生都是云系统自动完成的，不需要管理员手工操作&lt;/p>
&lt;/li>
&lt;li>
&lt;p>拥有可计量的服务 ： 这个对于 IT 部门需要向用户收钱的实在是重要；或者对服务提供商更重要，如果国内的用户实在没有这个需求也可以不强求。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>那么，我们清楚了云的标准和价值后，我们需要判断的是什么？我认为是，我们为什么要建云？你在建云的时候，必须要有一个原因；有了这个原因了才有云的价值取向，才能谈到云的需求，才能谈到云的方案。当然，云就是以云的方案和设计理念去建设的，不存在伪云计算最终能进化或者发展成云计算这一说，就像是，猴子长的年纪在大也无法开口讲话一样。厂商也要不要故意误导，用户也不要片面理解。&lt;/p>
&lt;p>在引申一下：云计算和虚拟化究竟有啥关系？我斗胆从云的经典分类上来说 Iaas\PaaS\SaaS；从技术上讲，只有 IaaS 和服务器虚拟化有必然联系，其它两种 PaaS 和 SaaS 可以和虚拟化一点必然关系都没有，但是如果他们需要的话，可能可以利用到虚拟化技术的某些优势，但是用非虚拟化技术的架构实现这两种云计算一点问题都没有。网上盛传的“虚拟化是云计算的基石”根本就是一种误解；不过虚拟化的确能帮你做很多事，能帮助你交付很多种的 IT 服务。如果你一定要把他们挂上钩，那么你需要回答的是，你是否要建设 IaaS 云？你的 IaaS 云管理平台是什么，要关注在 IaaS 云计算管理平台的功能和能力上来，看你的 IaaS 是否需要管理多种类型的 Hypersior？是否需要管理到分布在各地的成千上万个服务器？等等。。。从这些需求中才会细化出 IaaS 云管理平台对服务器虚拟化平台的需求。云计算建设是自顶向下的过程，从清晰的概念和建设思路出发，切勿本末倒置，切勿舍本逐末。&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(part2)</title><link>https://martinliu.cn/2013/04/15/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart2/</link><pubDate>Mon, 15 Apr 2013 06:52:55 +0000</pubDate><guid>https://martinliu.cn/2013/04/15/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbbpart2/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/box]&lt;/p>
&lt;p>桌面虚拟化项目的实施白皮书  《Citrix Virtual Desktop Handbook 5.x》，&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>点击下载&lt;/a>。&lt;/p>
&lt;p>上周一我们介绍了《Citrix 桌面虚拟化实施部署白皮书》的第二部分《设计篇 Design》的第一单元：用户层。今天我们继续往前进，开讲第二单元：访问层的部分。&lt;/p>
&lt;p>三、 访问层 Access Layer&lt;/p>
&lt;p>访问层的设计主要是基于每个用户组和终端设备的移动性需求。&lt;/p>
&lt;ol>
&lt;li>决断：认证点&lt;/li>
&lt;/ol>
&lt;p>让用户在什么地点做认证是管理员的决定，一般而言，有四个认证点：&lt;/p>
&lt;p>a) Web Interface：给 XA 和 XD 提供安全访问；&lt;/p>
&lt;p>b) StoreFront：为 Receiver 交付认证能力和资源；&lt;/p>
&lt;p>c) Secure Gateway (Web Interface): Secure Gateway 是一个 Windows 的应用程序，她和 WI 配合工作；&lt;/p>
&lt;p>d) Access Gateway: 硬件&lt;/p>
&lt;p>具体采用哪种方式认证由用户组的移动需求来决定，推荐方案如下：&lt;/p>
&lt;ol start="2">
&lt;li>决断：预认证策略&lt;/li>
&lt;/ol>
&lt;p>如果我们使用的是 Access Gateway，我们就可以选择是否采用预认证策略，这些策略可以是确定终端是否满足某种接入网络前的扫描条件。&lt;/p>
&lt;p>我们可以配置的策略包括测试防病毒软件、防火墙软件、操作系统，甚至是注册表键值。XA 和 XD 可以利用这些策略的检查结果确认后续的动作，包括剪贴板是否开启，打印机映射，甚至是否开启特定的应用程序访问权限。例如，如果用户没有安装防病毒软件，可以配置策略隐藏敏感的应用程序。&lt;/p>
&lt;p>下面的图标从流程上示例策略配置是如何流转的：&lt;/p>
&lt;ol start="3">
&lt;li>决断：认证策略&lt;/li>
&lt;/ol>
&lt;p>l Web Interface, Secure Gateway (Web Interface), or StoreFront: StoreFront 是未来的方向，而 Web Interface 已经是行将就木，所以下面的策略主要是用在 StoreFront 上，当然也适用于 Web Interface&lt;/p>
&lt;p>n 用户名/密码&lt;/p>
&lt;p>n Domain Pass-Through：允许从用户设备上透传 Domain 登录信息，用户登录到加入域的电脑后自动登录到 Store；&lt;/p>
&lt;p>n Access Gateway Pass-Through：用户登录到 Access Gateway 后自动登录到 Store&lt;/p>
&lt;p>l Access Gateway：NetScaler 支持几种不同的认证手段。下面分别列出了几种主要的认证方法，每种方法都可以单独使用，但是在实践中，我们进场组合起来以提供多因素认证。&lt;/p>
&lt;p>n LDAP：轻型目录访问协议是我们最为熟悉的认证方法了，它是一种基于 TCP 协议的目录访问服务，例如 MS 的活动目录就是其中一种实现形式。&lt;/p>
&lt;p>n Radius（aka Token）：Radius 全名是 Remote Authentication Dial In User Service，这是一种基于 UDP 传输协议的安全认证协议。除了认证外，它还提供授权和计费功能。Access Gateway 转发用户输入的用户名和密码给 Radius 服务器，Radius 服务器可以立即检查用户名和密码，也可以转发给目录服务器。&lt;/p>
&lt;p>n 客户端证书：用户登录到 Access Gateway 虚拟服务器后，可以通过本地的客户端证书的属性来做认证。客户端证书通常在用户端的形式是智能卡，或者是 Common Access Cards (CACs)的形式，再通过客户端本地的读卡器来读取信息。&lt;/p>
&lt;p>采用什么认证形式通常都是取决于安全的需求，以及使用什么认证点。下表给出了一个基于安全需求级别的示例：&lt;/p>
&lt;ol start="4">
&lt;li>决断：会话策略&lt;/li>
&lt;/ol>
&lt;p>采用 Access Gateway 作为认证点的用户必须有对应的会话策略来定义用户体验。会话策略的制定是基于 Receiver 在设计阶段制定的。一般而言，首先我们会将设备分为非移动设备和移动设备两种：&lt;/p>
&lt;p>l 移动设备：表达式定义为：“REQ.HTTP.HEADER User-Agent CONTAINS CitrixReceiver”，该语句将移动设备设置为比非移动设备更高优先级以保证移动设备的匹配性。&lt;/p>
&lt;p>l 非移动设备：表达式定义为：“ns_true”，即所有流量。&lt;/p>
&lt;p>更多信息，可以参考 Citrix 公开电子文档：Receiver and Plug-ins&lt;/p>
&lt;p>BTW，另外一种会话策略是采用终端的扫描方法。&lt;/p>
&lt;ol start="5">
&lt;li>决断：会话 Profile（Session Profile）&lt;/li>
&lt;/ol>
&lt;p>每个会话策略（Session Policy）都必须定义一个对应的 Session Profile（姑且翻译成会话配置文件）。这个会话配置文件定义了用户去访问资源时的访问细节。有两种定义到虚拟桌面环境的访问方式的会话配置文件的形式：&lt;/p>
&lt;p>l SSL VPN：传统的 VPN 方式，将网络全部打通。这种方式并不一定十分安全，因为这能导致客户端到内网服务器的攻击访问。&lt;/p>
&lt;p>另外一种办法是考虑是否在 SSL VPN 中开辟一条给客户端网络流量的单独通道。这样通过 receiver 的流量智慧限制在指定的端口，只能访问指定的服务器资源等。&lt;/p>
&lt;p>上述两种方式各有利弊，第一种方式虽然安全性差了，但是可以做客户端流量可以被企业的网络过滤设备，例如入侵检测设备做监视和控制。&lt;/p>
&lt;p>l HDX Proxy：在 HDX 代理方式下，用户是通过 Access Gateway 连接到他们的虚拟桌面和虚拟应用。这种方式下完全没有将内部资源暴露到公网上，此时 Access Gateway 充当了一个微型 VPN 的作用，它仅处理 HDX 的流量。其他的流量，例如电子邮件，又或者是使用者上网的流量都不经过 Access Gateway。&lt;/p>
&lt;ol start="6">
&lt;li>决断：访问带宽&lt;/li>
&lt;/ol>
&lt;p>最后的访问层决断就是要决定虚拟桌面所需要的最大并发网络带宽。其中很重要的一个关键环节就是决定采用 NetScaler Access Gateway 的哪一个平台。&lt;/p>
&lt;p>每个用户所需要的带宽关键还是要看计算的需求。一个时不时才用一下电脑的 ERP 使用者和一个在电脑前屁股都不挪窝的 OA 用户肯定带宽要求是不同的，如果是 CAD 画图的用户那就更不用说了。&lt;/p>
&lt;p>理想情况下带宽的使用情况是通过带宽分析工具来给出来，不过我们还是可以给出一些经验值：&lt;/p>
&lt;p>总带宽的的计算公式可以这样来定义：&lt;/p>
&lt;p>总带宽 = 平均带宽 × 最大并发用户值&lt;/p>
&lt;p>更多细节，可以参考 Citrix 的知识库文章：&lt;/p>
&lt;p>XenDesktop Planning Guide: User Bandwidth Requirements ： &lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=5BdyIzIzrEOfoVxvpzfMxnn5HIs1DdAIlS0opaj6UrOPgSysoUakkdkru0zo0okQlYOGYaDEspc.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX126191" target="_blank" rel="noopener"
>XenDesktop Planning Guide: User Bandwidth Requirements&lt;/a>&lt;/p></description></item><item><title>XenDesktop中如何重定向USB设备</title><link>https://martinliu.cn/2013/04/15/xendesktope4b8ade5a682e4bd95e9878de5ae9ae59091usbe8aebee5a487/</link><pubDate>Mon, 15 Apr 2013 06:44:52 +0000</pubDate><guid>https://martinliu.cn/2013/04/15/xendesktope4b8ade5a682e4bd95e9878de5ae9ae59091usbe8aebee5a487/</guid><description>&lt;p>&lt;img src="https://martinliu.cn/webkit-fake-url:/C94F41EF-2B27-43A6-8999-EBAB0037856E/hdx-monitor-banner.png"
loading="lazy"
alt="hdx-monitor-banner.png"
>&lt;/p>
&lt;p>原文出处：&lt;a class="link" href="http://support.citrix.com/article/CTX136751" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX136751&lt;/a>  这篇文章你还不会，你就 out 了！&lt;/p>
&lt;p>&lt;strong>概要&lt;/strong>&lt;/p>
&lt;p>本文描述如何映射默认下被禁用的 USB 设备。&lt;/p>
&lt;p>&lt;strong>要求&lt;/strong>&lt;/p>
&lt;p>当重定向 USB 设备，终端用户必须首先识别 USB 设备，将其映射到会话中。假如设备需要特殊驱动，则驱动必须同时安装在客户机和虚拟桌面代理（VDA）上。如果终端识别驱动，设备在没有驱动的情况下仍可映射，但是 VDA 上需安装驱动以确保工作正常。&lt;/p>
&lt;p>&lt;strong>背景&lt;/strong>&lt;/p>
&lt;p>特定 USB Class 默认下被禁用因为它们主要用于本地工作站，例如智能卡阅读器。&lt;/p>
&lt;p>&lt;strong>步骤&lt;/strong>&lt;/p>
&lt;p>&lt;strong>注意&lt;/strong>!这个修复需改变注册表。错误使用注册表编辑器可能产生严重问题，导致你需要重装操作系统。Citrix 不承诺解决错误使用注册表编辑器的问题。使用注册表编辑器存在风险。确保修改前备份注册表。&lt;/p>
&lt;p>完成以下步骤查找设备的 Class ID 和 Hardware ID：&lt;/p>
&lt;ul>
&lt;li>打开终端客户机的设备管理器，查找需要重定向的 USB 设备。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-1.gif"
loading="lazy"
alt="ipboard01"
>&lt;/p>
&lt;ul>
&lt;li>右击设备选择&lt;strong>属性&lt;/strong>。注意在 Details 面板上，显示如下图的 Hardware ID 和 Class ID。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-2.gif"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-3.gif"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>在&lt;strong>Citrix Desktop Studio&lt;/strong> &amp;gt; &lt;strong>HDX 策略&lt;/strong> &amp;gt; &lt;strong>用户&lt;/strong>中，点击&lt;strong>新建&lt;/strong>USB 设备重定向策略。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-4.gif"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>点击下一步，&lt;strong>类别&lt;/strong>中选择&lt;strong>USB 设备&lt;/strong> &amp;gt; &lt;strong>客户端 USB 设备重定向，&lt;strong>点击&lt;/strong>添加&lt;/strong>，选择&lt;strong>允许&lt;/strong>后&lt;strong>确定&lt;/strong>。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-5.gif"
loading="lazy"
>&lt;/p>
&lt;p>然后，类别中选择 USB 设备 &amp;gt; 客户端 USB 设备重定向规则，点击添加&lt;/p>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-6.gif"
loading="lazy"
>&lt;/p>
&lt;p>点击&lt;strong>新建&lt;/strong>添加允许的 Hardware ID：&lt;/p>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-7.gif"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>确定&lt;/strong>后点击&lt;strong>下一步&lt;/strong>，最后&lt;strong>应用&lt;/strong>此策略。&lt;/p>
&lt;ul>
&lt;li>在终端设备，查看注册表 HKLM\Software_WOW6432Node*\Citrix\Ica Client\GenericUSB，设置_DeviceRules*值为‘Allow: VID=0911 PID=1844’&lt;/li>
&lt;/ul>
&lt;p>你可以删除&lt;em>deny class rule&lt;/em>以使能此 class 的所有设备。但是，为防止非法重定向，增加&lt;strong>Allow&lt;/strong>规则方法更优。&lt;/p>
&lt;p>&lt;strong>注意：&lt;strong>当增加&lt;/strong>Allow&lt;/strong>规则，确保它置于规则列表顶部，使它比规则&lt;strong>Deny&lt;/strong>优先级更高。&lt;/p>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-8.gif"
loading="lazy"
>&lt;/p>
&lt;p>此时在 Desktop Viewer 上可见对应 USB 设备。&lt;/p>
&lt;p>&lt;img src="http://support.citrix.com/article/html/images/CTX136751-9.gif"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>假如点击设备仍不能映射至会话中，尝试手动在 VDA 的注册表中添加允许标记：
HKLM\Software\Policies\Citrix\ICA_Client\USB\DeviceRules。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>更多信息&lt;/strong>&lt;/p>
&lt;p>默认值存储于 VDA 注册表的 HKLM\SOFTWARE\Citrix\PortICA\GenericUSB Type=String Name=&amp;ldquo;DeviceRules&amp;rdquo;，但是，不建议修改此值，因为当 VDA 自检，它首先查看 HKLM\Software\Policies\Citrix\ICA_Client\USB\DeviceRules，再查看本地路径。优选修改规则方法是使用组管理对象（GPO）模板。&lt;/p>
&lt;p>**注意：**你必须修改终端客户机注册表以允许对应的 USB class。&lt;/p>
&lt;p>查看更多: &lt;a class="link" href="http://support.citrix.com/proddocs/topic/xendesktop-rho/ps-ref-policies-usb-devices.html" target="_blank" rel="noopener"
>http://support.citrix.com/proddocs/topic/xendesktop-rho/ps-ref-policies-usb-devices.html&lt;/a>&lt;/p></description></item><item><title>XenDesktop虚拟桌面精品书籍导读(part1)</title><link>https://martinliu.cn/2013/04/09/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbb-p1/</link><pubDate>Tue, 09 Apr 2013 02:19:37 +0000</pubDate><guid>https://martinliu.cn/2013/04/09/xendesktope8999ae68b9fe6a18ce99da2e7b2bee59381e4b9a6e7b18de5afbce8afbb-p1/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
感谢 Eric Yao 的供稿，&lt;a class="link" href="http://weibo.com/ericyaozhen" target="_blank" rel="noopener"
>@老树皮 Eric&lt;/a>
[/box]&lt;/p>
&lt;p>桌面虚拟化项目的实施白皮书  《Citrix Virtual Desktop Handbook 5.x》，&lt;a class="link" href="http://support.citrix.com/article/CTX136546" target="_blank" rel="noopener"
>点击下载&lt;/a>。该文档是由 Citrix 全球顶级 Consultant 系统架构师 Daniel Feller, Thomas Berger, Rich Meesters, Matt Brooks, Ed Duncan 以及 Roger LaMarca 等大牛合作完成，它介绍了桌面虚拟化架构设计、方法论、经验总结以及最佳实践等知识，更是包含了一步一步指导手册、真实案例分析以及模板手册等。&lt;/p>
&lt;p>序言：关于方法论
一、 Access
二、 Design
三、 Deploy
四、 Manitain
五、 项目计划&lt;/p>
&lt;p>第一部分：Access
一、 业务驱动力
二、 数据搜集
三、 用户数据搜集
四、 应用程序数据搜集
五、 用户分类&lt;/p>
&lt;ol>
&lt;li>FlexCast 模型比较&lt;/li>
&lt;li>FlexCast 模型选择
六、 应用程序评估
七、 项目管理&lt;/li>
&lt;li>Roadmap&lt;/li>
&lt;li>项目团队
a) 业务角色
b) 技术角色&lt;/li>
&lt;/ol>
&lt;p>第二部分：Design
一、 概况
二、 用户层 User Layer&lt;/p>
&lt;ol>
&lt;li>终端类型的选择&lt;/li>
&lt;li>Receiver 的选择&lt;/li>
&lt;li>资源需求
三、 访问层 Access Layer&lt;/li>
&lt;/ol>
&lt;p>序言：关于方法论&lt;/p>
&lt;p>Citrix Virtual Desktop handbook 会紧密遵循 Citrix 顾问实施方法论，即如下图所示：&lt;/p>
&lt;p>一、 Access&lt;/p>
&lt;p>Access 阶段主要提供 Design 阶段所需要的信息，包括：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>业务驱动力；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>数据搜集：包括用户、应用程序、设备以及基础架构；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用户的分类：用户要根据需要的分类而分成不同的组别，随之应对着不同的 FlexCast 方法论；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>应用程序分类：旧的应用程序应该被删除、应用程序版本应该标准化、非公司程序应该删除，等等这些构成了应用程序的标准化和合理化；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>计划：每个用户组都要根据对业务的影响程度指定不同的实施时间优先级，优先级实施进度结果应该随时更新项目进度和计划。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>二、 Design&lt;/p>
&lt;p>设计阶段主要聚焦在五层的一个方法论上：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>用户层：描述推荐的终端以及所需要的用户功能体验；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>访问层：描述用户层是如何连接到他们的桌面，例如本地桌面是直接连接 StoreFront，而外界用户往往要通过 Firewall 层才能进来，这就涉及到了 FW、VPN 等技术；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>桌面层：主要指用户的虚拟桌面实现技术，即 FlexCast 技术，主要好汉三个主要成分，分别是镜像文件、应用程序，以及个性化内容；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>控制层：如何管理和维护其他层，又分为访问控制、桌面控制，以及基础架构控制；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>硬件层：致力于支撑整个解决方案的硬件物理设备，包括了服务器、CPU、内存、存储设备等；&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>三、 Deploy&lt;/p>
&lt;p>按照第二部分设计好的 FlexCast 方式实施。&lt;/p>
&lt;p>四、 Manitain&lt;/p>
&lt;p>主要包含三种不同的活动：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>监控：在虚拟桌面环境设计和实施到生产环境以后，持续的监控是必需的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>技术支持；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试和变更管理：以后会遇到不断的软件和产品更新；&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>五、 项目计划&lt;/p>
&lt;p>一个设计详尽的项目计划对项目成功的实施时至关重要的。项目经理要通过项目计划来监控成本、管理项目组成员、跟进项目实施进度等。同时项目进度要及时通告项目组所有成员让大家都知道项目的进度。&lt;/p>
&lt;p>在项目的初期一般只需要做 Access 阶段的计划，这个时段需要多 FlexCast 模式、容量、用户分组等有更多的交接，所以无需做 Design 的计划。如下图所示就是一个计划表：&lt;/p>
&lt;p>第一部分：Access&lt;/p>
&lt;p>一、 业务驱动力&lt;/p>
&lt;p>桌面虚拟化项目的第一步应该是去了解对公司所造成的影响，并且将这些影响定一下来，然后对之以优先级排序。有了这些文字描述管理层和项目管理组才能制定出项目成功实施的标准，设计阶段才能有正确的方法论和架构设计。&lt;/p>
&lt;p>下图就定义了一个业务驱动力的优先级示例：&lt;/p>
&lt;p>二、 数据搜集&lt;/p>
&lt;p>数据搜集阶段负责搜集关键信息数据，包括用户、设备、应用程序，以及基础架构等在下一阶段需要使用的数据。&lt;/p>
&lt;p>有三种方法来搜集数据：&lt;/p>
&lt;ol>
&lt;li>手动搜集&lt;/li>
&lt;/ol>
&lt;p>小型企业有可能通过访问每台终端，或者是远程连接凡是来搜集数据。&lt;/p>
&lt;p>中大型企业一般般都有了 ESD（Enterprise Software Deployment），例如微软的 SCCM 等。可以通过这些平台去搜集应用程序的使用情况等信息。但是 ESD 一般都不能提供应用程序性能需求和实际使用的信息。&lt;/p>
&lt;ol start="2">
&lt;li>调查表&lt;/li>
&lt;/ol>
&lt;p>这也是一个好办法，可以通过管理层去通过行政命令来执行。也可以通过面对面的会议或者是电话沟通来进行；这种方式比手动搜集要显著减少了所花费的时间，但是完成率不高也是一个缺点，不够精确反应实际情况也是一个缺点。&lt;/p>
&lt;ol start="3">
&lt;li>自动化搜集&lt;/li>
&lt;/ol>
&lt;p>这样的工具有很多，一般都能自动化生成报表。Citrix 公司为了帮助用户节省实施成本，和 LanDesk 公司合作，为 Project Accelerator 用户提供了一个 60 天免费试用的 LanDesk FastTack 软件 License。LanDesk FastTack 软件是一个专门为 Citrix 实施方法论开发设计的一个专业信息搜集工具。&lt;/p>
&lt;p>上述三种方法的优势和劣势如下表所示：&lt;/p>
&lt;p>三、 用户数据搜集&lt;/p>
&lt;p>信息搜集表可以参考示例表格：Citrix Virtual Desktop Handbook - Assess Workbook.xlsx&lt;/p>
&lt;ol>
&lt;li>业务特性&lt;/li>
&lt;/ol>
&lt;p>业务特性必须通过业务层的管理人员来手动搜集，无法自动化搜集。包括&lt;/p>
&lt;p>A. 身份&lt;/p>
&lt;p>a) 用户名&lt;/p>
&lt;p>b) 部门；&lt;/p>
&lt;p>c) 角色&lt;/p>
&lt;p>d) 业务经理&lt;/p>
&lt;p>e) 所分配的用户组；&lt;/p>
&lt;p>B. 业务&lt;/p>
&lt;p>a) 主要的数据中心&lt;/p>
&lt;p>b) 移动性，下表是示例分类&lt;/p>
&lt;p>c) 个性化&lt;/p>
&lt;p>d) 安全性&lt;/p>
&lt;p>e) 关键性&lt;/p>
&lt;ol start="2">
&lt;li>技术特性&lt;/li>
&lt;/ol>
&lt;p>a) 工作负荷&lt;/p>
&lt;ol start="3">
&lt;li>用户环境&lt;/li>
&lt;/ol>
&lt;p>a) 用户 Profile&lt;/p>
&lt;p>i. Profile 类型：包括本地、漫游、强制、第三方、未知&lt;/p>
&lt;p>ii. Profile 版本：Windows XP 和 Windows Vista/7&lt;/p>
&lt;p>iii. Profile 位置：文件服务器在哪里&lt;/p>
&lt;p>iv. 大小：用户 Profile 的大小&lt;/p>
&lt;p>b) 用户数据主目录&lt;/p>
&lt;p>i. 主目录位置&lt;/p>
&lt;p>ii. 大小&lt;/p>
&lt;ol start="4">
&lt;li>客户端硬件，包括以下需要搜集的信息：&lt;/li>
&lt;/ol>
&lt;p>o Number of CPUs/Cores&lt;/p>
&lt;p>o CPU Speed (GHz)&lt;/p>
&lt;p>o Memory (GB)&lt;/p>
&lt;p>o Disk Size (GB)&lt;/p>
&lt;p>o Operating System&lt;/p>
&lt;p>o Age of the System (years)&lt;/p>
&lt;p>o Peripherals&lt;/p>
&lt;ol start="5">
&lt;li>本地资源映射，包括以下需要搜集的信息：&lt;/li>
&lt;/ol>
&lt;p>o Local Drives&lt;/p>
&lt;p>o Printing&lt;/p>
&lt;p>o Clipboard&lt;/p>
&lt;p>o Audio&lt;/p>
&lt;p>o COM Port&lt;/p>
&lt;p>o USB&lt;/p>
&lt;p>o LPT&lt;/p>
&lt;p>四、 应用程序数据搜集&lt;/p>
&lt;p>信息搜集表可以参考示例表格：Citrix Virtual Desktop Handbook - Assess Workbook.xlsx&lt;/p>
&lt;ol>
&lt;li>身份信息&lt;/li>
&lt;/ol>
&lt;p>a) 应用程序名称和版本&lt;/p>
&lt;p>b) 应用程序所有者&lt;/p>
&lt;p>c) 状态&lt;/p>
&lt;ol start="2">
&lt;li>应用程序技术特性&lt;/li>
&lt;/ol>
&lt;p>a) 分配&lt;/p>
&lt;p>i. 使用者数量&lt;/p>
&lt;p>ii. 部门信息&lt;/p>
&lt;p>iii. 个别用户&lt;/p>
&lt;p>b) 工作负荷&lt;/p>
&lt;p>c) 业务特性&lt;/p>
&lt;p>d) 兼容性&lt;/p>
&lt;p>五、 用户分类&lt;/p>
&lt;p>一旦数据搜集工作完成之后，我们就可以开始准备将用户分成不同的组了，这个时候就要按照 FlexCast 模型的要求去分配不同的实现方式给不同的用户组了。&lt;/p>
&lt;p>我们一般都是按照人物性工作者、分支机构办公人员、移动工作者等方式去区分用户，但是实际上用户的分类远不止这几类，更有甚者，很多用户组都是同时属于上述几个组的。&lt;/p>
&lt;p>最快区分用户的方法就是按照用户的需求不同来分组，一旦将用户的需求区分之后，就可以将这些数据填入 Citrix Virtual Desktop Handbook - Assess Workbook.xlsx 了。&lt;/p>
&lt;ol>
&lt;li>FlexCast 模型比较&lt;/li>
&lt;/ol>
&lt;ol>
&lt;li>
&lt;p>Hosted Shared&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Hosted VDI，又可以细分为&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>a) Pooled-Random/Streaming&lt;/p>
&lt;p>b) Pooled-Static&lt;/p>
&lt;p>c) Pooled/Streamed with Personal vDisk&lt;/p>
&lt;p>d) Dedicated&lt;/p>
&lt;p>e) Existing&lt;/p>
&lt;p>f) Psysical/Remote PC&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>Steamed VHD&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Local VM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>On-Demand Apps&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>下表是关于 FlexCast 整体技术的一个概览：&lt;/p>
&lt;ol start="2">
&lt;li>FlexCast 模型选择&lt;/li>
&lt;/ol>
&lt;p>在 XenApp 和 XenDesktop 之间有很多技术上的区别，但是他们都是通过 HDX 来提供的最佳用户体验。他们的区别如下：&lt;/p>
&lt;p>六、 应用程序评估&lt;/p>
&lt;p>在用户分组完成之后，我们已经有了根据需求不同确定下来的不同的用户组，下一步就是向用户提供他们工作需要的应用程序。下面是建议的三部曲：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Rationalization 合理化&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Business Characteristics 业务特性&lt;/p>
&lt;/li>
&lt;li>
&lt;p>兼容性&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>七、 项目管理&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Roadmap&lt;/p>
&lt;/li>
&lt;li>
&lt;p>项目团队&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>下面的表格示例告诉我们在一个虚拟桌面项目中可以建议的业务角色和技术角色分类。虽然角色有很多种，但是很多角色的存在时间都很短，同时很多角色都由一个人同时完成。项目经理和 Citrix 架构师自然是贯穿整个项目的角色，其他就不一定了。&lt;/p>
&lt;p>a) 业务角色&lt;/p>
&lt;p>b) 技术角色&lt;/p></description></item><item><title>解决XenServer tools not installed</title><link>https://martinliu.cn/2013/04/07/xenserver-tools-not-installed/</link><pubDate>Sun, 07 Apr 2013 10:27:38 +0000</pubDate><guid>https://martinliu.cn/2013/04/07/xenserver-tools-not-installed/</guid><description>&lt;p>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;]
鸣谢：Michael Zhang 的经验分享，有需要的请收藏备用。
[/box]&lt;/p>
&lt;p>刚刚搞定了 POC 环境中一个很诡异的问题。把过程写出来以供大家参考。建议可以把这个设置放到 POC 的实施手册中。
刚开始做 POC 时，我们安装了 XP 的模板，并且安装了同版本的 XenTools，此时 XenCenter 面板上显示虚机的 IP 地址没有问题。但是跑了一段时间后发现，所有的虚机的 IP 地址都显示不出来了，并且 XenCenter 面板上显示 XenServer tools not installed，虚机的内存信息，Disk IO 等信息，都没有显示：
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools1.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools1.png"
loading="lazy"
alt="xentools1"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools8.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools8.png"
loading="lazy"
alt="xentools8"
>&lt;/a>&lt;/p>
&lt;p>后来重装了模板，重新发布了虚机，一切就 OK 了，此时我认为是原先的模板有问题，所以导致了这个 issue。
但是后来跑了几天，某台虚机又出现了类似的症状，此时我意识到应该不是模板的问题了。然后我就检查了这台虚机的 Service，发现：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools2.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools2.png"
loading="lazy"
alt="xentools2"
>&lt;/a>&lt;/p>
&lt;p>这个 Service 就是 XenTool 的 Service，因为没有启动，所以导致了上述的问题。
但是当我用手工试图重启该 Service 的时候，系统报改 Service 启动时停止，没有给出任何原因。Windows Event Log 里也没看到任何报错。
后来上网查了下，原来是 Windows Event Log 的 Application 类的 log 满了以后，会导致该 Service 启动异常。
看了下 XP 的 Windows Event Log 的 Application 类日志的属性，默认只有 64K：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools3.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools3.png"
loading="lazy"
alt="xentools3"
>&lt;/a>&lt;/p>
&lt;p>我把上面的日志文件大小阀值改成了 1024K，清空 Application 类的 log，重启上面的 Service, 成功，问题解决。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools5.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools5.png"
loading="lazy"
alt="xentools5"
>&lt;/a>
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools6.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools6.png"
loading="lazy"
alt="xentools6"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools7.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/04/xentools7.png"
loading="lazy"
alt="xentools7"
>&lt;/a>&lt;/p>
&lt;p>上述类似的问题我记得也有兄弟曾经遇到过，发邮件出来问过，当时怀疑是 XenServer 跟 VDA 的时间不同步造成，现在感觉也许跟这个原因有关。&lt;/p>
&lt;p>[box color=&amp;ldquo;gray&amp;rdquo; icon=&amp;ldquo;order-check&amp;rdquo;]
欢迎投稿，请发邮件到： &lt;a class="link" href="mailto:liuzh66@gmail.com" >liuzh66@gmail.com&lt;/a>
[/box]&lt;/p></description></item><item><title>思杰行业解决方案视频放量推荐</title><link>https://martinliu.cn/2013/04/07/e6809de69db0e8a18ce4b89ae8a7a3e586b3e696b9e6a188e8a786e9a291e694bee9878fe68ea8e88d90/</link><pubDate>Sun, 07 Apr 2013 06:06:23 +0000</pubDate><guid>https://martinliu.cn/2013/04/07/e6809de69db0e8a18ce4b89ae8a7a3e586b3e696b9e6a188e8a786e9a291e694bee9878fe68ea8e88d90/</guid><description>&lt;p>[button type=&amp;ldquo;big&amp;rdquo; icon=&amp;ldquo;sign-in&amp;rdquo; url=&amp;ldquo;http://i.youku.com/u/UMzU2OTI4MzY0/videos&amp;rdquo;]点击本按钮，直达优酷视频专辑[/button]
[line]&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNTMxOTE2MjMy.html" target="_blank" rel="noopener"
>汽车行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDg1MjEyNzYw.html" target="_blank" rel="noopener"
>思杰制造行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDg1MTAzODA0.html" target="_blank" rel="noopener"
>金融行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjc3NDAw.html" target="_blank" rel="noopener"
>呼叫中心场景 Citrix 桌面云解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjY3NTgw.html" target="_blank" rel="noopener"
>教育行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDkxMjk5MjE2.html" target="_blank" rel="noopener"
>思杰政府行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjU4NDUy.html" target="_blank" rel="noopener"
>医疗行业解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjQ5MDIw.html" target="_blank" rel="noopener"
>营业厅场景解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjUxNTUy.html" target="_blank" rel="noopener"
>Citrix 集中运维监控解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNjMxOTY4.html" target="_blank" rel="noopener"
>OA 解决方案&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDIzNTc0MzIw.html" target="_blank" rel="noopener"
>思杰虚拟化助力翠微中学教育信息化建设&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDEzNzUzNzI4.html" target="_blank" rel="noopener"
>思杰虚拟化为遍布全美的学校师生提供便&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>[line]
[box color=&amp;ldquo;red&amp;rdquo;]
合作伙伴们必看视频，你们不得不懂这些内容，否则跟不上形势：)
[/box]&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDgyNzk0MzQw.html" target="_blank" rel="noopener"
>PoC 标准流程&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNTM1MDQwNzM2.html" target="_blank" rel="noopener"
>2013-03-29 14.02 Citrix MDM solution&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDg2NzYxMjky.html" target="_blank" rel="noopener"
>搞定虚拟环境下的 USB 设备&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDQ1MDg0.html" target="_blank" rel="noopener"
>自由灵活办公【Work Shifting】&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDQ1MDUy.html" target="_blank" rel="noopener"
>企业统一应用门户 【Unified Storefron&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDI5MDY0.html" target="_blank" rel="noopener"
>高管移动办公　【Executive Mobility】&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDE2NDIw.html" target="_blank" rel="noopener"
>企业云网络【Enterprise Cloud Network&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDEyODMy.html" target="_blank" rel="noopener"
>桌面虚拟化 【Desktop Virtualization&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY5MDAxOTQw.html" target="_blank" rel="noopener"
>云融合【Cloud Convergence 】&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDY4OTk1NDc2.html" target="_blank" rel="noopener"
>BYOD 　工作生活最潮方式&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDUxODc1NDQ0.html" target="_blank" rel="noopener"
>Citrix Personal vDisk 技术讲座&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDUxODcxNDky.html" target="_blank" rel="noopener"
>Citrix Remote PC &lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDQ3NDY2ODI0.html" target="_blank" rel="noopener"
>采用 TriScale 技术的 Citrix NetScaler 1&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDQ3NDYzNDM2.html" target="_blank" rel="noopener"
>为什么选择思杰？实现安全移动办公和云&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDQ2NTk0MDI0.html" target="_blank" rel="noopener"
>Citrix 桌面虚拟化之网络解决方案&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDI2NjE4NzAw.html" target="_blank" rel="noopener"
>Citrix 桌面虚拟化 XenDesktop _FlexCa&lt;/a>st&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XNDExNDc4Nzg0.html" target="_blank" rel="noopener"
>Citrix-VDI-in-a-Box For SMB   &lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XMzQyNDMzNDIw.html" target="_blank" rel="noopener"
>Citrix CloudGateway Citrix Receiver&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XMzQwMjMwNTgw.html" target="_blank" rel="noopener"
>粉笔画动画为您解释 Citrix XenApp 的&lt;/a>工作&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://v.youku.com/v_show/id_XMzI0ODc2OTM2.html" target="_blank" rel="noopener"
>演示思杰 TaaS（Tools as a Service）&lt;/a>解释&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>NetScaler Insight Center 虚拟桌面和应用监控利器</title><link>https://martinliu.cn/2013/03/28/netscaler-insight-center-e8999ae68b9fe6a18ce99da2e5928ce5ba94e794a8e79b91e68ea7e588a9e599a8/</link><pubDate>Thu, 28 Mar 2013 10:56:04 +0000</pubDate><guid>https://martinliu.cn/2013/03/28/netscaler-insight-center-e8999ae68b9fe6a18ce99da2e5928ce5ba94e794a8e79b91e68ea7e588a9e599a8/</guid><description>&lt;p>NetScaler Insight Center with HDX insight and Web Insight overcomes the limitations of traditional methods and technologies to fully address the application visibility challenges facing today’s enterprises. Featuring an approach that leverages NetScaler ADCs, Insight Center combines network-based instrumentation – that is both network and application-aware – with an efficient and powerful management system capable of transforming raw data into actionable information.&lt;/p>
&lt;p>在 Citrix TV 栏目搜索 NetScaler Insight ；查询更多的相关资源。&lt;/p>
&lt;p>简单的讲 NetScaler Insight 能做到的是使用业内的专业协议 AppFlow 来监控所有经过 NetScaler 设备的流量。它是一个虚机，能够接收来自多个 NetScaler 的监控数据，实际上在 NetScaler 上打开了 Insight 功能后，它会对 ICA 协议做必要的拆包和封包动作，这样就能够更加详细的看到用户会话的详细信息，能够实时的了解到用户的体验，从而为主动的问题解决和排错打下了好的基础。注意：这个动作只有 NetScaler 设备能做哦！其它厂商看不到 ICA 会话参数。它有两个模块：1)ICA HDX insight ; 2) Web insight；这两个模块能够基本上把所有过 NetScaler 设备的流量截获、分析和报表；未来能够和 XD/XA 的管理工具做直接集成。并且它也能够把分析数据发给其它第三方支持 AppFlow 分析的系统，例如 splunkd 等。&lt;/p>
&lt;p>其它相关资源：
&lt;a class="link" href="http://blogs.citrix.com/2013/03/19/netscaler-insight-center/" target="_blank" rel="noopener"
>http://blogs.citrix.com/2013/03/19/netscaler-insight-center/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://blog.itvce.com/?p=3101" target="_blank" rel="noopener"
>http://blog.itvce.com/?p=3101&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://blog.itvce.com/?p=3167" target="_blank" rel="noopener"
>http://blog.itvce.com/?p=3167&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://blogs.citrix.com/2012/12/07/netscaler-insight-1-0-ga-unleashed/" target="_blank" rel="noopener"
>http://blogs.citrix.com/2012/12/07/netscaler-insight-1-0-ga-unleashed/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://support.citrix.com/proddocs/topic/ni-netscaler-insight-01-map/ni-wrapper-con.html" target="_blank" rel="noopener"
>http://support.citrix.com/proddocs/topic/ni-netscaler-insight-01-map/ni-wrapper-con.html&lt;/a>&lt;/p></description></item><item><title>破两项个人记录</title><link>https://martinliu.cn/2013/03/28/two-records-xuanhu-lake-10km/</link><pubDate>Thu, 28 Mar 2013 07:53:07 +0000</pubDate><guid>https://martinliu.cn/2013/03/28/two-records-xuanhu-lake-10km/</guid><description>&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/03/two-records.jpg"
loading="lazy"
alt="two-records"
>&lt;/p>
&lt;p>前面三四公里总是跑的太猛，最快到了 4：25；跑的速度不太匀。老实说这次是有点太野心了，想创造一万米 50 分钟的个人记录。但是后半程还是没法坚持下来；坚持不下来可能有这样几个原因所知：1）阳光强烈，太晒，太热了；2）后半程爬坡上升海拔的路程有一段。下次试着逆时针方向绕湖跑，让提高海拔的路程放到体力充足的前半程。&lt;/p></description></item><item><title>XenApp5补丁清单</title><link>https://martinliu.cn/2013/03/20/xenapp5e8a1a5e4b881e6b885e58d95/</link><pubDate>Wed, 20 Mar 2013 10:12:43 +0000</pubDate><guid>https://martinliu.cn/2013/03/20/xenapp5e8a1a5e4b881e6b885e58d95/</guid><description>&lt;p>对于 XenApp5 的用户来说你至少需要知道下面两件事情：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>EOF 的时间是 2013-3-31&lt;/p>
&lt;/li>
&lt;li>
&lt;p>关键补丁清单如下&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>这意味着，你只能获得越来越有限的支持在这个版本；最好的办法是升级你的应用到 XenApp6.5 版本。如果实在要用，请起码打全了这些补丁。&lt;/p>
&lt;p>Hotfix PSE450R07W2K3006 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX130483" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX130483&lt;/a>)&lt;/p>
&lt;p>Hotfix PSE450R07W2K3027 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX131874" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX131874&lt;/a>)&lt;/p>
&lt;p>Hotfix PSE450R07W2K3043 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132765" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132765&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3003 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX130466" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX130466&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3004 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX130497" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX130497&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3009 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX130587" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX130587&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3017 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX131022" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX131022&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3029 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132174" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132174&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3033 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132196" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132196&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3034 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132245" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132245&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3037 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132403" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132403&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3038 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132494" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132494&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3045 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132809" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132809&lt;/a>&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3051 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133221" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133221&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3052 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133249" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133249&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3054 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133421" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133421&lt;/a> )&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3056 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133679" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133679&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3057 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133762" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133762&lt;/a>&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3058 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX133828" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX133828&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3060 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX134027" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX134027&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3062 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX134577" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX134577&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3063 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX134799" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX134799&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3064 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX134829" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX134829&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3065 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX135883" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135883&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3067 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX135443" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135443&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3068 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX135887" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135887&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3069 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX135993" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135993&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Hotfix PSE450R07W2K3071 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX136531" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX136531&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - HDX MediaStream Hotfix HDXFlash110WX86007 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX135404" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135404&lt;/a>)&lt;/p>
&lt;p>LIMITED RELEASE - Delivery Services Console 4.7.3 (&lt;a class="link" href="https://mail.citrix.com/owa/redir.aspx?C=Cmkhy-09SEi5zN8EywDMptfTu4np-M8IQCfS0HyPLOMu53xV_VuZ4WRUXsT2uF74JPA3o1_ybfw.&amp;amp;URL=http%3a%2f%2fsupport.citrix.com%2farticle%2fCTX132683" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX132683&lt;/a>)&lt;/p>
&lt;p>Citrix 产品生命周期查询一览表：&lt;/p>
&lt;p>&lt;a class="link" href="http://www.citrix.com/support/product-lifecycle/product-matrix.html" target="_blank" rel="noopener"
>http://www.citrix.com/support/product-lifecycle/product-matrix.html&lt;/a>&lt;/p></description></item><item><title>My first half marathon</title><link>https://martinliu.cn/2013/03/14/my-first-half-marathon/</link><pubDate>Thu, 14 Mar 2013 12:13:49 +0000</pubDate><guid>https://martinliu.cn/2013/03/14/my-first-half-marathon/</guid><description>&lt;p>[caption id=&amp;ldquo;attachment_52283&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;720&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/03/the_first_half_marathon.jpg"
loading="lazy"
alt="1:56:33 @Xuanwu Lake Nanjing"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/03/the_first_half_marathon.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/03/the_first_half_marathon.jpg&lt;/a>) My first half marathon record[/caption]&lt;/p>
&lt;p>本周一，在南京出差，周二一大早，我 5 点就醒了，常识跑一次半马。这是第一次尝试跑两个小时的时间，第一次尝试跑半马的距离。其实前 10 公里还是可以，后十公里还是有点疲劳的，中途休息了四次，每次走大约 1 分分钟左右。很惊喜的看到大部分的路程都在配速 5 分左右，和我设定的五分二十秒目标配速很接近。本次试跑证明了，我身体的耐力跑半马还是可以。打算在半马的基础上提高成绩，争取能把半马跑好再说。下个月四月十四日在苏州的半马比赛很期待，比赛前抽空好好准备争取能轻松完成。跑完后，这几天没有发现身体任何不适，今天早晨跑 5 公里，发现加速比以前有力，似乎经过这次拉练后，身体的体能有所提高。最重要的是：我在没有伤痛的情况下即感受到了体育竞技的乐趣，又达到了强身健体的目的。&lt;/p></description></item><item><title>NetApp技术学习</title><link>https://martinliu.cn/2013/02/26/netappe68a80e69cafe5ada6e4b9a0/</link><pubDate>Tue, 26 Feb 2013 14:18:43 +0000</pubDate><guid>https://martinliu.cn/2013/02/26/netappe68a80e69cafe5ada6e4b9a0/</guid><description>&lt;p>[caption id=&amp;ldquo;attachment_52271&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/sales-ilt-se-asap-rev07-300x178.jpg"
loading="lazy"
alt="sales-ilt-se-asap-rev07"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/sales-ilt-se-asap-rev07.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/sales-ilt-se-asap-rev07.jpg&lt;/a>) sales-ilt-se-asap-rev07[/caption]&lt;/p>
&lt;p>今天参加了 NetApp Accredited Storage Architect Professional Workshop。这个课程偏售前，讲的还是不错，一共 3 天，明天开始做 Lab，实验练习的环境就是在 ONTAP 操作系统中的各种命令；使用官方的模拟器可以很方便的搭建测试环境，模拟器下载地址：&lt;a class="link" href="https://communities.netapp.com/docs/DOC-1034" target="_blank" rel="noopener"
>https://communities.netapp.com/docs/DOC-1034&lt;/a>&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52269&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/con01-FilerView-300x257.jpg"
loading="lazy"
alt="NetApp模拟器Web访问"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/con01-FilerView.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/con01-FilerView.jpg&lt;/a>) NetApp 模拟器 Web 访问[/caption]&lt;/p>
&lt;p>NetApp University : &lt;a class="link" href="http://www.netapp.com/us/services/university/" target="_blank" rel="noopener"
>http://www.netapp.com/us/services/university/&lt;/a>  更多免费课程还可以在这里注册得到。课程的质量还不错。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52270&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/Introduction-to-NetApp-Products-300x217.jpg"
loading="lazy"
alt="NetApp在线免费课程"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/Introduction-to-NetApp-Products.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/Introduction-to-NetApp-Products.jpg&lt;/a>) NetApp 在线免费课程[/caption]&lt;/p></description></item><item><title>TIPS install XenServer on Mac Mini 6.1</title><link>https://martinliu.cn/2013/02/21/tips-install-xenserver-on-mac-mini-6-1/</link><pubDate>Thu, 21 Feb 2013 09:24:38 +0000</pubDate><guid>https://martinliu.cn/2013/02/21/tips-install-xenserver-on-mac-mini-6-1/</guid><description>&lt;p>[caption id=&amp;ldquo;attachment_52258&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;640&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/mac-mini-2012-vs-old-mac-mini.jpg"
loading="lazy"
alt="mac-mini-2012-with-XenServer"
> mac-mini-2012-with-XenServer[/caption]&lt;/p>
&lt;p>今天尝试在 Mac Mini 上安装 XenServer，下面把经验共享一下。我遇到的问题有两个：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>网卡无法识别：使用默认安装盘安装，提示没有检测到网卡，安装无法继续&lt;/p>
&lt;/li>
&lt;li>
&lt;p>网卡驱动植入失败：在按了 F9 加载驱动的时候，没有发现驱动程序，无法继续安装&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安装完毕之后，重启，屏幕上显示一个带问号的文件夹，一闪一闪无法正常启动 XenServer&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>经过一番折腾，发现这些点主意一下，应该就没有问题。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52255&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot-300x224.jpg"
loading="lazy"
alt="启动Macmini"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot.jpg&lt;/a>) 启动 Macmini[/caption]&lt;/p>
&lt;p>在启动 Mac Mini 的时候，在“咚”的一声之前，就按住 ALT 键，否则没法出现上面的屏幕，我用的是 USB 盘启动，所以要选择右侧的图标。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52256&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot2-300x224.jpg"
loading="lazy"
alt="进入menu.c32菜单"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot2.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot2.jpg&lt;/a>) 进入 menu.c32 菜单[/caption]&lt;/p>
&lt;p>我遵循前人的经验，乖乖到此来禁止 gpt；首先在这里要迅速输入 menu.c32，输入完了就过了，就必须重新关机，重启 mac mini。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52257&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot3-300x224.jpg"
loading="lazy"
alt="输入disable-gpt参数"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot3.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/boot3.jpg&lt;/a>) 输入 disable-gpt 参数[/caption]&lt;/p>
&lt;p>进入这个屏幕了，要快速按 TAB 键，否则启动参数无法编辑，输入 disable-gpt 参数的机会就失去了。编辑启动参数的时候，把参数加载第二个&amp;mdash;（三个短横线）前即可，上图我为了拍照在参数之前加了很多空格，其实这个参数和前后要至少一个空格就够了。&lt;/p>
&lt;p>在进入安装的屏幕后，如果是 XenServer6.0.201 的源安装盘，还必须下载 tg3 的网卡驱动，并且用工具打入 iso 文件，这样安装的时候，就可以选择到加载网卡启动，否则 6.0.201 的安装盘即不自带此网卡驱动，也无法正常识别附加的驱动。网卡驱动下载地址为：&lt;a class="link" href="http://support.citrix.com/article/CTX135328" target="_blank" rel="noopener"
>http://support.citrix.com/article/CTX135328&lt;/a>  要把加压后的 iso 文件，再次加压到对应的目录里才行，直接把解压后的几个文件放入目录，安装程序是无法识别到网卡驱动的。如果能正常识别的话，会出现选择框，让你选择  Broadcom tg3。如果是 XenServer6.1 的安装盘，就不需要折腾驱动了，原盘自带了 Broadcom tg3 网卡驱动。下面有两张截图，供必须要使用 XenServer 6.0.201 的人参考。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52250&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xenserver6.1-300x215.jpg"
loading="lazy"
alt="XenServer 6.0.201 with driver"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xenserver6.1.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xenserver6.1.jpg&lt;/a>) XenServer 6.0.201 with driver[/caption]&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_52251&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;300&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xs-repository-list-300x253.jpg"
loading="lazy"
alt="xs-repository-list 实例"
>](&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xs-repository-list.jpg" target="_blank" rel="noopener"
>http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2013/02/xs-repository-list.jpg&lt;/a>) xs-repository-list 实例[/caption]&lt;/p>
&lt;p>即使你不是安装 XenServer6.0.201，也推荐使用 UltraISO 来把 iso 文件写入一个 USB 盘来安装，因为 Mac Mini 没有光驱，而且这样不用刻盘，更加环保一点。&lt;/p>
&lt;p>最后一个 Tips：这个可能是解决问题 3 的技巧，在安装的最后一个屏幕上，安装程序提示移除 Mac Mini 上的其他所有截至，然后点击回车完成安装。在这个屏幕上要识时务的把安装 U 盘从机器上拔除，然后点击回车来重启 Mac Mini。经过我的验证，拔出 U 盘后好像没有在遇到过闪烁文件夹的重启不了的问题。建议都使用自带 Broadcom tg3 网卡驱动的 6.1 来安装，否则 6.0.201 安装完成之后，一旦打了补丁，还需要下载 for 这个补丁的新版本的网卡驱动，在重新手工打上该驱动，否则网卡会起不起来。&lt;/p></description></item><item><title>2012 Hadoop与大数据技术大会PPT下载</title><link>https://martinliu.cn/2013/01/09/2012-hadoope4b88ee5a4a7e695b0e68daee68a80e69cafe5a4a7e4bc9appte4b88be8bdbd/</link><pubDate>Wed, 09 Jan 2013 06:24:06 +0000</pubDate><guid>https://martinliu.cn/2013/01/09/2012-hadoope4b88ee5a4a7e695b0e68daee68a80e69cafe5a4a7e4bc9appte4b88be8bdbd/</guid><description>&lt;p>&lt;a class="link" href="http://hbtc2012.hadooper.cn/download.html" target="_blank" rel="noopener"
>http://hbtc2012.hadooper.cn/download.html&lt;/a>&lt;/p></description></item><item><title>冬练三九-晒晒我三周的成果</title><link>https://martinliu.cn/2012/12/26/e586ace7bb83e4b889e4b99d-e69992e69992e68891e4b889e591a8e79a84e68890e69e9c/</link><pubDate>Wed, 26 Dec 2012 14:38:42 +0000</pubDate><guid>https://martinliu.cn/2012/12/26/e586ace7bb83e4b889e4b99d-e69992e69992e68891e4b889e591a8e79a84e68890e69e9c/</guid><description>&lt;p>运动总成绩
总距离
79.8 公里
总时长
9.5 小时
共燃烧
5516.4 大卡&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2012/12/tudong.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2012/12/tudong-375x1024.png"
loading="lazy"
alt="tudong"
>&lt;/a>&lt;/p></description></item><item><title>2013年的云计算，您准备好了么？</title><link>https://martinliu.cn/2012/12/18/2013e5b9b4e79a84e4ba91e8aea1e7ae97e682a8e58786e5a487e5a5bde4ba86e4b988/</link><pubDate>Tue, 18 Dec 2012 16:12:30 +0000</pubDate><guid>https://martinliu.cn/2012/12/18/2013e5b9b4e79a84e4ba91e8aea1e7ae97e682a8e58786e5a487e5a5bde4ba86e4b988/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2012/06/cropped-Cloud1.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2012/06/cropped-Cloud1-300x60.jpg"
loading="lazy"
alt="cropped-Cloud1.jpg"
>&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://www.datamation.com/cloud-computing/getting-ready-for-cloud-computing-2013.html" target="_blank" rel="noopener"
>Getting Ready for Cloud Computing 2013&lt;/a>&lt;/p>
&lt;p>[dc]看[/dc]到篇不错的文章，值得分享一下。在最近的三四年里面，厂商都忙着炒作概念，用似云非云的各种虚拟化来对付用户，实际上云计算并没有那么简单，我一直不敢给客户讲，也讲不好的东西就是：对于一个特定的用户，告诉它什么是云？他应该怎么怎么过渡到云？先从那里做起？大致的路径是怎么样的？一旦对应到具体的用户环境里面，以上每个用户的答案都是不同的，感觉没有十足实践经验的人，根本无法和用户达成共鸣和一致。这个和我以前做 ITSM/ITIL 完全不同，在那块领域里面，讲究的是管理的思路和理念，等你做了一些项目之后，你从项目中的总结和提炼，就成了你的炮弹，用在其它新用户身上，用不好，也用不错；管理的学问往往是殊途同归的。而云计算，目前国内真的还属于初级阶段，就像是在 2002 年左右的时候，我们给银行做 ITIL 做服务台一样，对无论是用户和厂商的人来说，还不夸张的说，都是雾里看花。&lt;/p>
&lt;p>[tab label=&amp;ldquo;云计算七大注意事项&amp;rdquo; first=&amp;ldquo;yes&amp;rdquo;]&lt;/p>
&lt;p>[list icon=&amp;ldquo;star&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>
&lt;ol>
&lt;li>检查和评估您的网络 : 如果数据中心不做网络架构的巨大调整，给云平台配置足够强大的带宽资源，上云计算，基本上就是让用户和运维人员都痛苦不堪，不会有啥好结果。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="2">
&lt;li>建立鼓励员工进谏的机制 : 识别、评估、选择和实施云计算方案的流程需要提前设计好。在每个阶段和过程里让最终用户、开发人员和管理层都充分的参与意见。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="3">
&lt;li>聚焦在立竿见影的运维痛点和功能差距上: 瞄准那些影响最终用户生产力和新上面的应用部署项目上。让云计算的高效和灵活等优势小试牛刀一下，从而验证需求点的准确性和方案的靠谱性。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="4">
&lt;li>先尝后买 : 云计算是最着急投胎的，没有必要大干快上，对于数据中心来说也是一个渐进的温和的改良的过程。选定一个足够小的范围，先尝后买，分区分配扩容，放大项目范围。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="5">
&lt;li>承载应用（App hosting）和 SaaS 应用不能划等号 : 这根本就是个误解，无须多说。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="6">
&lt;li>监控利用率和满意度 : 不管云做的大小，资源都要物尽其用，跟踪最终用户和领导大满意度，与同行用户横向比较数据，找出自己的所处位置和程度。实施反馈机制，让用户驱动云的需求和建设方向。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="7">
&lt;li>眼观六路，站足先机 : 市场风云莫测，业务模式层出不穷，这些都不断催熟这云方案。所以广泛关注，收集跟多信息，为云计算建立多个选项，多种选择总是好事。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;p>[/list]
[/tab]&lt;/p>
&lt;p>[tab label=&amp;ldquo;英文原文&amp;rdquo;]&lt;/p>
&lt;p>If you’ve been holding back about moving to the ‘Cloud’, it is time to get onboard the &lt;a class="link" href="http://www.datamation.com/cloud-computing/" target="_blank" rel="noopener"
>Cloud Computing&lt;/a> express.&lt;/p>
&lt;p>Not only has every major research firm published market forecasts indicating that Cloud services are growing exponentially, but we see multiplying customer success stories that clearly illustrate the immediate and measurable business benefits of moving to the Cloud.&lt;/p>
&lt;p>Here are some simple rules you should follow to help you move ahead in the coming year and successfully leverage today’s rapidly evolving Cloud alternatives:&lt;/p>
&lt;p>&lt;strong>1. Check your networks:&lt;/strong> Adopting Cloud solutions doesn’t make sense if you don’t have sufficient bandwidth capabilities. Without adequate connectivity, accessing Cloud services will be like stepping back in time and only frustrate your end-users and executives.&lt;/p>
&lt;p>&lt;strong>2. Establish policies that encourage employee input:&lt;/strong> Develop straightforward procedures for identifying, evaluating, selecting and implementing Cloud solutions. Your end-users, developers and executives are being exposed to Software-as-a-Service (SaaS) applications, Platform-as-a-Service (PaaS) solutions and Infrastructure-as-a-Service (IaaS) alternatives every day. Invite them to recommend those they like.&lt;/p>
&lt;p>&lt;strong>3. Focus on your immediate pain-points and functional gaps:&lt;/strong> Don’t rip out existing applications that work and cost little to maintain. Instead, target those cumbersome old applications that get in the way of end-user productivity and new applications to fill immediate needs.&lt;/p>
&lt;p>&lt;strong>4. Start small and try before you buy:&lt;/strong> One of the greatest advantages of today’s Cloud solutions is that they mitigate many of the risks associated with traditional, legacy applications. Rather than paying for a perpetual license upfront without having an opportunity to test how it will meet your needs, many of today’s Cloud solutions allow you to try them out before you subscribe to them. And, you can start with a small group of users, or a single department, before you roll out the solution across your organization.&lt;/p>
&lt;p>&lt;strong>5. Recognize that application hosting doesn’t equal Software-as-a-Service (SaaS):&lt;/strong> There is a growing number of legacy, on-premise software vendors who are offering hosted versions of their applications on a subscription pricing basis and calling them “SaaS” solutions. Although these hosted applications alleviate some of the operational hassles and reduce the upfront cost associated with traditional software deployment, they still fall short of the fundamental benefits of true ‘multitenant’ SaaS solutions, such as ongoing enhancements and aggregated benchmarks. In addition, the legacy software vendors can’t scale their hosted services if their customers are using varying versions of the hosted application.&lt;/p>
&lt;p>&lt;strong>6. Monitor utilization and measure satisfaction:&lt;/strong> Track how your end-users and executives are using the SaaS apps and other Cloud services. Be sure the utilization levels justify the current subscription fees to prevent overspending. Investigate how your utilization levels compare with other organizations by requesting benchmark information from SaaS/Cloud vendors. Implement feedback mechanisms to ensure satisfaction and generate new ideas. Use data to determine future service requirements.&lt;/p>
&lt;p>&lt;strong>7. Stay informed to stay ahead:&lt;/strong> The Cloud marketplace is changing rapidly from a technological perspective and maturing quickly from a business model point of view. Keeping up on the latest developments may be a challenge, but is also essential to take full advantage of the increasingly powerful solutions being delivered via the Cloud. Maintain an ‘open door’ policy and utilize social networking tools to invite your end-users, executives and others to share information about new services and best practices.
[/tab]&lt;/p></description></item><item><title>Top 10 things Ubuntu is doing right</title><link>https://martinliu.cn/2012/12/18/top-10-things-ubuntu-is-doing-right/</link><pubDate>Tue, 18 Dec 2012 15:14:04 +0000</pubDate><guid>https://martinliu.cn/2012/12/18/top-10-things-ubuntu-is-doing-right/</guid><description>&lt;p>&lt;a class="link" href="http://www.datamation.com/open-source/top-10-things-ubuntu-is-doing-right.html" target="_blank" rel="noopener"
>http://www.datamation.com/open-source/top-10-things-ubuntu-is-doing-right.html&lt;/a>&lt;/p></description></item><item><title>What's new in Windows 8 VDI licensing: Free ride for Windows RT</title><link>https://martinliu.cn/2012/12/13/whats-new-in-windows-8-vdi-licensing-free-ride-for-windows-rt/</link><pubDate>Thu, 13 Dec 2012 15:28:33 +0000</pubDate><guid>https://martinliu.cn/2012/12/13/whats-new-in-windows-8-vdi-licensing-free-ride-for-windows-rt/</guid><description>&lt;p>&lt;a class="link" href="http://searchvirtualdesktop.techtarget.com/tip/Whats-new-in-Windows-8-VDI-licensing-Free-ride-for-Windows-RT?utm_medium=EM&amp;amp;asrc=EM_ERU_19908957&amp;amp;utm_campaign=20121212_ERU%20Transmission%20for%2012/12/2012%20%28UserUniverse:%20635116%29_myka-reports@techtarget.com&amp;amp;utm_source=ERU&amp;amp;src=5093920" target="_blank" rel="noopener"
>http://searchvirtualdesktop.techtarget.com/tip/Whats-new-in-Windows-8-VDI-licensing-Free-ride-for-Windows-RT?utm_medium=EM&amp;amp;asrc;=EM_ERU_19908957&amp;amp;utm;_campaign=20121212_ERU%20Transmission%20for%2012/12/2012%20%28UserUniverse:%20635116%29_myka-reports@techtarget.com&amp;amp;utm;_source=ERU&amp;amp;src;=5093920&lt;/a>&lt;/p></description></item><item><title>三亚半山半岛洲际酒店5公里</title><link>https://martinliu.cn/2012/12/13/e4b889e4ba9ae58d8ae5b1b1e58d8ae5b29be6b4b2e99985e98592e5ba975e585ace9878c/</link><pubDate>Thu, 13 Dec 2012 14:40:05 +0000</pubDate><guid>https://martinliu.cn/2012/12/13/e4b889e4ba9ae58d8ae5b1b1e58d8ae5b29be6b4b2e99985e98592e5ba975e585ace9878c/</guid><description>&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;52210,52209,52207,52208,52211,52199&amp;rdquo;]&lt;/p>
&lt;p>三亚住着全国各地来度假的人，有在这里旅游的，有在这里度假的，有在这里修养的。洲际酒店是我一直喜欢的酒店，这次赶巧有下榻于此；这里在鹿回头景区旁边，是一个探入大海的鹿头，酒店就坐落在鹿头的脖子部分，所有酒店的两侧都能看到大海，而左右被两座山包夹着。大海一天之中变化着不同的颜色，今天晴空万里，空气好的不得了！想起北京的 PM 值，我都不想回去了，精心准备的 ppt，希望再次打动用户。明天的两大目标：跑 5 公里；打动用户一个都不能少。&lt;/p>
&lt;p>&lt;a class="link" href="http://ditu.google.cn/maps?f=q&amp;amp;source=embed&amp;amp;hl=zh-CN&amp;amp;geocode=&amp;amp;q=%E4%B8%89%E4%BA%9A%E5%8D%8A%E5%B1%B1%E5%8D%8A%E5%B2%9B%E6%B4%B2%E9%99%85%E5%BA%A6%E5%81%87%E9%85%92%E5%BA%97&amp;amp;aq=1&amp;amp;oq=%E4%B8%89%E4%BA%9A%E5%8D%8A%E5%B1%B1%E5%8D%8A%E5%B2%9B%E6%B4%B2%E9%99%85&amp;amp;sll=35.86166,104.195397&amp;amp;sspn=40.851222,79.013672&amp;amp;brcurrent=3,0x31454b9749b5a7fd:0x2b5c98d228242117,0,0x314f03387538d0a5:0xb84913144116d0f6%3B5,0,0&amp;amp;ie=UTF8&amp;amp;hq=%E4%B8%89%E4%BA%9A%E5%8D%8A%E5%B1%B1%E5%8D%8A%E5%B2%9B%E6%B4%B2%E9%99%85%E5%BA%A6%E5%81%87%E9%85%92%E5%BA%97&amp;amp;hnear=&amp;amp;t=h&amp;amp;ll=18.211905,109.503651&amp;amp;spn=0.07827,0.109863&amp;amp;z=13&amp;amp;iwloc=A" target="_blank" rel="noopener"
>查看大图&lt;/a>&lt;/p></description></item><item><title>印度</title><link>https://martinliu.cn/2011/05/10/india/</link><pubDate>Tue, 10 May 2011 16:34:59 +0000</pubDate><guid>https://martinliu.cn/2011/05/10/india/</guid><description>&lt;p>今天在印度同事的帮助下，又解决掉我一个棘手的问题。这个哥们是个 developer，解决问题很给力。每当他帮忙找出一个原因后，我就感慨，为什么我没有想到？开发人员的思维方式和我们是不同的，他们能找到基础的基础，从哪里开始入手分析问题，往往我们都太聪明了，总是试图找捷径/替代方法/或者绕开问题。&lt;/p>
&lt;p>&lt;img src="http://img1.gtimg.com/news/pics/hv1/47/39/653/42471317.jpg"
loading="lazy"
>&lt;/p>
&lt;p>中国人谈到印度，往往有不屑的态度，可是我真的想不出能有什么理由这么想。看看我们现在如此浮华和虚荣腐败的国家，到处是利益驱动下的虚假繁荣，任凭胡主席和温总理在鞠躬尽瘁地视察民情和整治社会，社会还是依旧那样。环境还在被污染，食品还是一样有毒，物价还是一样的上涨，货币还是依旧的贬值，税赋还是依旧的增加，社保和服务还是不能够的到位，道路还是越来越堵，中石油茅台洋酒还是照样的喝，舆论依然的禁锢愚人，互联网还是那么的和谐&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>回到印度的话题，我突然到一个问题：现在还有什么软件不是在印度开发的？但从我的公司看，它以平均每年收购两家公司的速度并购，十之八九的被收购的公司的研发工作被部分转移印度做。任凭国内的 developer 你们怎么的叫喊比印度人更聪明，我们的软件业还是照旧，既没有走出去多少，也没进来多少。大多数企业的终极目标也就是去美国上市。即使是国内在大的公司，也偶尔给我们上演一下 3Q 大战的闹剧。无疑印度的软件也在某种程度上是超越国内的。&lt;/p></description></item><item><title>让Remedy飞一会</title><link>https://martinliu.cn/2011/05/07/let-remedy-ars-fly-2/</link><pubDate>Sat, 07 May 2011 10:31:36 +0000</pubDate><guid>https://martinliu.cn/2011/05/07/let-remedy-ars-fly-2/</guid><description>&lt;p>&lt;img src="http://www.ibm.com/developerworks/cn/websphere/techjournal/0909_blythe/images/figure6.jpg"
loading="lazy"
>Remedy 应用的性能优化是一个在系统建设过程中需要长期关注的问题，而不是在上线的前一天晚上去解决的问题，我也碰到过很棘手的性能问题，它确实爆发了，而且恰好在上线前夕爆发；之后感觉除了点背之外，感觉比较遗憾的是：为啥这个性能问题不早点爆发！&lt;/p>
&lt;p>那么如何持续改进 Remedy 的性能？首先是硬件环境的准备情况，是否能在项目开始的第一天，就把开发，测试，生产环境统一装好。而不是到上线的前夕才去动生产环境。甚至于有条件的情况下，可不可以直接在生产环境上做开发，这样做的好处：让生产环境上性能优化的时间周期和机会尽可能的多，尽可能的长。当然这种机会毕竟不多，那么是否可以做到生产环境和开发环境的尽早的同步，也就是说：在开发到了一个小的阶段的时候，生产环境就可能就绪，就可以使用，这样把未成型的系统先部署上去，以便有机会做多次的生产系统性能调优。比较生产系统的性能最优化是项目的一大目标，不能等到最后才去仓促应战。曾经听说某行流程平台上线的第二天就挂了一次，这都是血淋淋的教训。总结一下：尽早的建设生产系统，优化生产系统，把开发好的那部分程序尽早迁移到生产上，长期的追逐系统性能，甚至于在生产环境上对此系统做压力测试。这些工作如果能够做的话，我想在上线日我们一定不会紧张。&lt;/p>
&lt;p>如何追逐测试系统的性能。可以使用 Web profiling 工具如 Fiddler。使用这种工具对某些特定操作持续的测试，把每次的测试结果保存下来，把时间记录到一个表格中。可以考虑测试如下内容：用户登录、打开事件控制台、创建一个事件单、搜索事件单等等，其他流程也类似。保证每次点击的次数都相同。其实从 Fildder 的分析数据中也可能得到很有价值的数据，如：那个 Web 调用的时间消耗最长，那些 Web 资源的请求出错。找出时间消耗做多的调用，就可以有针对性的优化应用了。总之：使用一种工具，在开发的整个过程中持续测试和优化，记录所有测试结果，这样在上线前对系统的性就能有客观参考依据。&lt;/p>
&lt;p>另外要注意 Remedy 系统是一个标准的 3 层架构应用，你需要在系统调优的时候，有这样几种人的帮助：压力测试工具高手、JVM 调优专家、数据库调优专家和 Remed 性能调优专家。还需要参考下列的参数配置。&lt;/p>
&lt;h2 id="mid-tier-优化参数建议">Mid-tier 优化参数建议&lt;/h2>
&lt;p>关于 Mid-tier 的一点建议，目前普通使用的 Java 应用服务器都是 Tomcat，我一向是开源软件的粉丝，但是，还是建议如果有条件的话，还是上商业的产品，如 Weblogic 或者 Websphere。这样可以获得能多一点的支持。
鉴于大多数系统还都是用的 BMC 的产品自带的 Tomcat，下面是一些建议的参数配置。&lt;/p>
&lt;h3 id="1-http-keep-alive">1-HTTP keep-alive&lt;/h3>
&lt;p>Keep-alive count: infinite (minimum 5000)
Connection timeout:90000 ms (minimum 60000 ms)&lt;/p>
&lt;h3 id="2-jvm-settings">2-JVM settings&lt;/h3>
&lt;p>JVM heap：-Xms1024m –Xmx1024m
MaxPermSize：-XX:MaxPermSize=256m
以 Windows 系统为例，可以使用 Tomcat 的配置界面工具，配置这两个参数。&lt;/p>
&lt;h3 id="3-threads-configuration-of-the-application-server-hosting-the-mid-tier">3-Threads configuration of the application server hosting the mid tier&lt;/h3>
&lt;p>maxThreads：500
acceptCount：100&lt;/p>
&lt;p>关于 1 和 3 的 参数文件：tomcat dir/conf/sever.xml 的实例代码：
[xml]&lt;/p>
&lt;p>&amp;lt;Connector URIEncoding=&amp;ldquo;UTF-8&amp;rdquo; acceptCount=&amp;ldquo;100&amp;rdquo; connectionTimeout=&amp;ldquo;90000&amp;rdquo;&lt;/p>
&lt;p>maxHttpHeaderSize=&amp;ldquo;8192&amp;rdquo; maxKeepAliveRequests=&amp;quot;-1&amp;quot; maxThreads=&amp;ldquo;500&amp;rdquo;&lt;/p>
&lt;p>port=&amp;ldquo;80&amp;rdquo; protocol=&amp;ldquo;HTTP/1.1&amp;rdquo; redirectPort=&amp;ldquo;8443&amp;rdquo;/&amp;gt;&lt;/p>
&lt;p>[/xml]&lt;/p>
&lt;p>以上参数配置并不是万能的，只是给出一个优化配置的基础，以此为起点调起来可能会更靠谱。&lt;/p>
&lt;h3 id="fine-tuning-the-mid-tier">Fine tuning the mid tier&lt;/h3>
&lt;p>Mid tier parameter or service： Recommended value
&lt;strong>Enable Cache Persistence&lt;/strong>：Always on for a production environment
&lt;strong>Prefetch or preload service&lt;/strong>： Use prefetch only when a specific set of AR System forms are known. Otherwise, use preload (recommended).
&lt;strong>Recommended preload procedure&lt;/strong>： 1.Turn on Enable Cache Persistence. 2.Turn on preload. 3.Allow preload to finish preloading all user facing AR System forms. 4.Turn off preload (allowing statistical service to take over).
**arsystem.formhtmljs_expiry_interval **和 &lt;strong>arsystem.resource_expiry_interval&lt;/strong>： Set both parameters to the same value to reflect how often you want the browser to check with the mid tier for updates. In a deployment environment where the AR System applications are not modified, set to 604800 (1 week) or higher. The minimum recommended value is 86400 (1 day). For the new values to take effect, restart the mid tier.
&lt;strong>Definition Change Check Interva&lt;/strong>l： In a deployment environment where the AR System applications are not modified, turn this off. Otherwise, map this to the frequency of your AR System application modification. For example, if you push changes out every Sunday, set this frequency to 604800 (1 week).
&lt;strong>arsystem.log_level&lt;/strong>： Severe. This can also be set through the Mid Tier Configuration Tool&lt;/p>
&lt;h2 id="ars-优化参数建议">ARS 优化参数建议&lt;/h2>
&lt;p>打开 ar.cfg 参考一下参数，修改后重启 ARS 服务。&lt;/p>
&lt;p>&lt;strong>Delay-Recache-Time:300&lt;/strong>
** Max-Entries-Per-Query:2000**
** Next-ID-Block-Size:100**
** Server-Side-Table-Chunk-Size:1000**
** Allow-Unqual-Queries:F**
** Cache-Mode:0**
** Debug-mode:0**
** Submitter-Mode:1**
** CMDB-Cache-Refresh-Interval:600**&lt;/p>
&lt;h2 id="数据库优化参数建议">数据库优化参数建议&lt;/h2>
&lt;p>数据库方面一定要依靠有经验的 DBA，靠他们帮你搞定下面这两条：
• Configuring your AR System database server for optimal performance
• Diagnosing and resolving issues.
另外如果你是 Oracle11g 的数据库，可以自己动手搞定下面这一条：
Oracle 10g/11g database settings are recommended: Cursor_sharing = FORCE
在数据库上做如下操作：
[sql]
alter system set cursor_sharing=FORCE scope=both;
[/sql]
然后在 ar.cfg 里面加入这个参数。
Oracle-Cursor-Sharing: FORCE
然后重启 ARS 服务即可。&lt;/p>
&lt;p>以上参数配置部分参考了 BMC 的官方文档《BMC Remedy AR System Server 7.6 Performance Tuning for Business Service Management 199037.pdf》，感兴趣的话可以去官方站点的文档下载里下载，该文章对以上参数有详细的解释。&lt;/p></description></item><item><title>Remedy ITSM 7.6.04 套件快速安装</title><link>https://martinliu.cn/2011/05/04/remedy-itsm-7-6-04-quick-install-guide/</link><pubDate>Wed, 04 May 2011 15:59:42 +0000</pubDate><guid>https://martinliu.cn/2011/05/04/remedy-itsm-7-6-04-quick-install-guide/</guid><description>&lt;p>&lt;img src="http://media.cms.bmc.com/images/box_services_trio_compass.png"
loading="lazy"
>自从 Remedy ITSM 7.6.03 版本发布以后，Remedy ITSM 套件有了一种全新的安装方式“预配置堆栈式安装”，这种安装方法简化了以前从 ARS 开始一个部件罗一个部件的安装方法，它将 ITSM 套件中的所有组件一次性的安装上去。下面讲具体该如何操作。&lt;/p>
&lt;h2 id="什么情况下使用这个安装方式">什么情况下使用这个安装方式？&lt;/h2>
&lt;p>A）POC 的情况下
B）客户的生产环境满足下面的需求：
• Microsoft Windows Server 2008 (64-bit) (Standard, Enterprise, or Datacenter) with Microsoft SQL Server 2008 (64-bit) (Standard or Enterprise)
• Oracle Solaris 10 with Oracle 11g (64-bit) (Standard, Enterprise, or RAC)
• Red Hat Enterprise Linux 5 (Update 5) (64-bit) with Oracle 11g (64-bit) (Standard, Enterprise, or RAC)
• Microsoft Windows Server 2008 (64-bit) (Standard, Enterprise, or Datacenter) with Oracle 11g (64-bit) (Standard or Enterprise)
Note: The BMC Remedy ITSM Suite Precon gured Stack installer supports only Unicode database servers&lt;/p>
&lt;h2 id="这种方式安装了什么组件">这种方式安装了什么组件？&lt;/h2>
&lt;p>BMC Remedy AR System server version 7.6.04
AREA LDAP Directory Service Authentication
ARDBC LDAP Directory Service Data Access
Web Services Plugin
Simple Network Management Protocol (SNMP) Configuration
Full Text Search (FTS) Configuration
Approval Server
Assignment Engine
Email Engine
Flashboards
Mid-Tier
BMC Remedy AR System clients
BMC Remedy User
BMC Remedy Alert
BMC Remedy Developer Studio
BMC Remedy Data Import
BMC Remedy Migrator
Crystal Reports
ODBC
BMC Atrium Core
BMC Atrium CMDB version 7.6.04
Product Catalog version 7.6.04
Atrium Impact Simulator version 7.6.04
BMC Remedy ITSM Suite
BMC Remedy Asset Management version 7.6.04
BMC Remedy Change Management version 7.6.04
BMC Remedy Incident Management version 7.6.04
BMC Remedy Problem Management version 7.6.04
BMC Remedy Service Desk 7.6.04
BMC Service Level Management version 7.6.04
BMC Remedy Knowledge Management version 7.6.0
如果你真的不需要安装以上所有组件，请不要使用此安装方法。&lt;/p>
&lt;h2 id="需要什么硬件">需要什么硬件？&lt;/h2>
&lt;p>System requirements for Microsoft Windows and UNIX®:
• Minimum 12 GB free disk space for the installation directory
• Minimum 8 GB free space for local database and remote database
• (For Red Hat Enterprise Linux® only) Minimum of 2.5 GB free space in the /tmp directory or /tmp file system.
• (For Oracle® Solaris only) Minimum of 2.5 GB free space in the /var/tmp directory or the file system.
• 3 GHz dual processor
• Minimum 3 GB RAM during installation; 8 GB RAM during runtime; 8 GB main memory for optimal performance
• (When 6 GB UNIX systems are used) Make sure that a minimum of 6 GB Swap Space is configured within the system.
如果您的硬件真的低于以上需要，请不要使用此安装方法，否则安装完之后系统可能不能正常运行。&lt;/p>
&lt;h2 id="需要什么人参与">需要什么人参与？&lt;/h2>
&lt;p>需要操作系统管理员和数据库管理员参与
以 Linux+Oracle 为例，可能需要如下环境变量
[bash]
export ORACLE_BASE=/u01/app/oracle
export ORACLE_SID=remedy
export ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/lib
export NLS_LANG=en_US.UTF8
export LANG=en_US.utf8
export PATH=$PATH:$ORACLE_HOME/bin
[/bash]&lt;/p>
&lt;h2 id="需要什么安装文件">需要什么安装文件？&lt;/h2>
&lt;p>以 Linux+Oracle 的安装为例，需要如下文件：&lt;/p>
&lt;p>linux.x64_11gR2_database_1of2.zip
linux.x64_11gR2_database_2of2.zip
jdk-6u25-ea-bin-b03-linux-amd64-27_feb_2011.bin
BMCRemedyITSMSuitePreconfiguredStack7.6.04.Linux.tar.gz&lt;/p>
&lt;h2 id="需要安装多长时间">需要安装多长时间？&lt;/h2>
&lt;p>大约 1.5 个小时左右，是的没有夸张，这个时间是在一个 DELL E6400（64 位，8GB 内存）的笔记本上测得的，如果你有更好的硬件，相信可以更快，这应该是史上最快的 Remedy ITSM 套件安装速度，如果你也成功通过此方式安装，请留下评论留下下你的安装时间和系统配置情况。&lt;/p>
&lt;h2 id="参考以下操作步骤">参考以下操作步骤&lt;/h2>
&lt;p>安装之前需要根据网卡的 MAC 地址先申请一个 Lic，接着基本上都是点 Next，即可完成安装
[imagebrowser id=8]&lt;/p></description></item><item><title>让Ubuntu飞一会儿</title><link>https://martinliu.cn/2011/04/10/let-ubuntu-fly/</link><pubDate>Sun, 10 Apr 2011 11:11:27 +0000</pubDate><guid>https://martinliu.cn/2011/04/10/let-ubuntu-fly/</guid><description>&lt;p>很久以前我一直使用的 rpm based Linux，原因很简单，我只要手握一张最新的 DVD，就可以走遍天下都不怕，特别是对 SuSE Linux 的 yast 很依赖，因为它可以帮我解决 rpm 包之间的依赖性。这样工作起来就很简单，基本上是搜索到软件包之后，点击安装既可以搞定所有的软件安装工作。&lt;/p>
&lt;p>来到 Ubuntu 世界的我并不很满意，最近一次的 apt-get update，以失败告终，险些把家里的 PC 的一块硬盘给搞丢了，因为升级失败导致分区表失效了，Win 操作系统不认了。直接崩溃，好在那 Live Cd 模式进入还能勉强看得那个盘里的东西，恢复到移动硬盘，重新格式化该分区，才把文件恢复了。着实让我虚惊一场。&lt;/p>
&lt;p>&lt;img src="http://img3.cache.netease.com/www/logo/logo_png.png"
loading="lazy"
>我比较喜欢一些小的 LAMP 堆栈式安装的 Linux，如 TurnkeyLinux。安装可以在 10 分钟内搞定系统安装。今年家里的宽度升级到 2MB 了，因此带宽上逐渐能满足 Ubuntu 这种从网上升级的需求。下面就是找国内的升级的源了，进过几个月的使用，最近觉得在北京的联通固定宽带的用户，使用 163 的镜像站点速度还是不错的。再次感谢国内的这样的无私奉献的公司，使得在国内的开源用户可以更快更方便。废话说了一堆：）哈哈下面也就是这几条命了的事情。&lt;/p>
&lt;p>第一步，当然要选择近水楼台的 163 了，来参考http://mirrors.163.com/.help/ubuntu.html 的帮助文档，根据你操作系统的版本，更新/etc/apt/sources.list 文件即可，之后你的 Ubuntu 就是从国内的较快的站点上下载包了&lt;/p>
&lt;p>第二步，安装多线程 apt 下载加速工具 apt-fast&lt;/p>
&lt;p>[bash]
root@lamp ~# apt-get install python-software-properties
root@lamp ~# add-apt-repository ppa:tldm217/tahutek.net
root@lamp ~# apt-get update
root@lamp ~# apt-get install apt-fast
root@lamp ~# apt-fast -v
apt 0.7.25.3ubuntu9.3 for i386 compiled on Sep  9 2010 22:22:02
Supported modules:
*Ver: Standard .deb
*Pkg:  Debian dpkg interface (Priority 30)
S.L: &amp;lsquo;deb&amp;rsquo; Standard Debian binary tree
S.L: &amp;lsquo;deb-src&amp;rsquo; Standard Debian source tree
Idx: Debian Source Index
Idx: Debian Package Index
Idx: Debian Translation Index
Idx: Debian dpkg status file
[/bash]&lt;/p>
&lt;p>以后你在安装软件包就是用 apt-fast install 了，而不是 apt-get install，至于 apt-get 么，不管你用还是不用，它就在哪里~~~~
最后一步（可选），如果你还经常要以 cpan 的方式安装 perl 的包的话，那么 163 上不管你用还是不用，他就在哪里，你也可以选择 163 最为 perl 的安装源。安装步骤如下：&lt;/p>
&lt;p>[bash]
root@lamp perl/CPAN# pwd
/etc/perl/CPAN
root@lamp perl/CPAN# cp Config.pm Config.pm.bk
root@lamp perl/CPAN# ls
Config.pm  Config.pm.bk  Config.pm~
root@lamp perl/CPAN# vi Config.pm
[/bash]&lt;/p>
&lt;p>修改 Config.pm 文件中的 urllist 值，修改成如下即可：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;urllist&amp;#39; =&amp;gt; [q[http://mirrors.163.com/cpan/]],
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>接下来就可以测试一下了：
[bash]
root@lamp perl/CPAN# cpan -i XML::Entities
[/bash]&lt;/p>
&lt;p>如果你有其他让 Ubuntu 加速的方法，请留言：）&lt;/p></description></item><item><title>ARS启动故障修复案例</title><link>https://martinliu.cn/2011/04/02/ars-start-issue-on-oracle/</link><pubDate>Sat, 02 Apr 2011 13:43:21 +0000</pubDate><guid>https://martinliu.cn/2011/04/02/ars-start-issue-on-oracle/</guid><description>&lt;p>ARS 版本 7.6.04
数据库 Oracle11G 和 ARS 在同一台服务器上&lt;/p>
&lt;p>错误现象：
ARS 服务不能正常启动&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">arerror.log报 390600 : SQL 数据库不可用 -- 将重试连接 (ARNOTE 590)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sat Apr 02 20:27:41 2011 : Action Request System(R) 服务器 x64 版本 7.6.04 Build 002 201101141059
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(c) Copyright 1991-2010 BMC Software, Inc.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sat Apr 02 20:29:51 2011  390600 : SQL 数据库不可用 -- 将重试连接 (ARNOTE 590)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sat Apr 02 20:29:51 2011     ORA-12170: TNS:Connect timeout occurred
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>排错步骤：
使用 sqlplus 测试登录，返回 TNS 超时错误&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[powershell]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> C:\Users\martin&amp;gt;sqlplus ARAdmin/AR#Admin#@ars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SQL*Plus: Release 11.2.0.1.0 Production on Sat Apr 2 20:48:35 2011
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright (c) 1982, 2010, Oracle.  All rights reserved.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ORA-12170: TNS:Connect timeout occurred  
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[/powershell]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 tnsping ars 测试也不成功
ping 本机主机名&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[powershell]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ping arsserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pinging arsserver [fe80::c123:5921:b71b:64fd%13] with 32 bytes of data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply from fe80::c123:5921:b71b:64fd%13: time&amp;lt;1ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply from fe80::c123:5921:b71b:64fd%13: time&amp;lt;1ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply from fe80::c123:5921:b71b:64fd%13: time&amp;lt;1ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply from fe80::c123:5921:b71b:64fd%13: time&amp;lt;1ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ping statistics for fe80::c123:5921:b71b:64fd%13:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Approximate round trip times in milli-seconds:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Minimum = 0ms, Maximum = 0ms, Average = 0ms 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[/powershell]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>貌似找到原因，修改 host 文件，加入主机名到 127.0.0.1 后面，在测试 ping 主机名成功。
重启 Oracle 监听器服务，再次测试 tnsping 和 sqlplus ，测试都获得成功。
重新启动 ARS 服务，服务被正常启动&lt;/p></description></item><item><title>既要开源，也要环保</title><link>https://martinliu.cn/2011/03/24/usb-linux/</link><pubDate>Thu, 24 Mar 2011 13:12:58 +0000</pubDate><guid>https://martinliu.cn/2011/03/24/usb-linux/</guid><description>&lt;p>今天看到了我保存的一摞 Linux 光盘，这基本上也记录了我所关注和安装过的所有 Linux 的种类。品种繁多。如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>CentOS 4.4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ubuntu 8.4 server&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ubuntu 8.4 desktop&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Opensolaris&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Debian 4.0&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SuSe Enterprise 10.1&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Redhat Enterprise Server 3&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SuSe Linux 10&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Mandriva 2008&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CentOS 4.2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SuSe 10.0 Eval DVD&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Mandrake 10.0&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Redhat 7.1&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Derbain 3.0&lt;/p>
&lt;/li>
&lt;li>
&lt;p>FreeBSD 5.2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Suse 9&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SuSe enterprise linux 9.0&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Fedora 4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Redhat 9&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Solaris 10 x86&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ubuntu 10.10 Desktop&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SLES 10 sp2&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>![CD fire](&lt;a class="link" href="http://martinliu.cn/wp-content/gallery/fatureimage/thumbs/thumbs_Crstal" target="_blank" rel="noopener"
>http://martinliu.cn/wp-content/gallery/fatureimage/thumbs/thumbs_Crstal&lt;/a> (12).png)总共 50 多张碟片既有 CD 也有 DVD。Linux 这东西最大的特点是更新发展的快，之前硬盘都小，为了安装 Linux 刻盘是最方便的方式，而且多年以前机器还不支持 USB 启动。这么多光盘真的是一大堆的白色垃圾，一直在想废弃光盘该怎么处理的为题，目前好像还没有即能实现废物利用，有环保的处理方法。上周为了在家里的 PC 上安装 Ubuntu 10.10 Desktop，又刻了一张盘，希望这是最后一张 Linux CD，以后考虑 USB 启动安装 Linux 的形式。使用工具软件把 Linux ISO 文件灌注到 U 盘里，在用 U 盘来装。&lt;/p>
&lt;p>推荐两种工具：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/" target="_blank" rel="noopener"
>Universal USB Installer&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.linuxliveusb.com/en/home" target="_blank" rel="noopener"
>LinuxLive USB Creator&lt;/a>&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>[](&lt;a class="link" href="http://martinliu.cn/wp-content/gallery/fatureimage/Crstal" target="_blank" rel="noopener"
>http://martinliu.cn/wp-content/gallery/fatureimage/Crstal&lt;/a> (12).png)&lt;/p></description></item><item><title>Remedy ARS 开源工具知多少</title><link>https://martinliu.cn/2011/03/01/remedy-ars-open-source-tool/</link><pubDate>Tue, 01 Mar 2011 15:46:51 +0000</pubDate><guid>https://martinliu.cn/2011/03/01/remedy-ars-open-source-tool/</guid><description>&lt;p>Remedy ARS 是全球最大市场份额的产品，是为业内广泛接受的成熟产品套件；虽然他始终是私有的软件产品，但是围绕其周围，还是不断有新的开源工具出现。下面就介绍几种这样的软件。&lt;/p>
&lt;p>ARInside is a free open-source utility to create a static html documentation of your AR-Server. If you need something to quickly browse through your workflow, ARInside might be worth a try.
ARInside 3.0.2 has some new features, lots of bugfixes and other improvements.
Just to name a few:&lt;/p>
&lt;ul>
&lt;li>documentation improvements&lt;/li>
&lt;li>64-bit platform support&lt;/li>
&lt;li>experimental support for Solaris and AIX&lt;/li>
&lt;li>basic ARS 7.6.x support&lt;/li>
&lt;li>huge performance plus on big installations&lt;/li>
&lt;/ul>
&lt;p>这是一个 ARS 服务器扫描的工具，可以形成一个静态的文档，能够作为一个状态的参考极限，这样方便你对当前的服务器上的所有对象和工作流有个全面的了解。最大的好处是能够统计和技术，而且不用登陆 Dev Studio 了。一图胜千言，下面大家看后就明白它能做什么。&lt;/p>
&lt;p>&lt;img src="http://arinside.org/screenshots/1?format=raw"
loading="lazy"
alt="Front page of ARInside docs "
>&lt;/p>
&lt;p>看后还闲着干嘛，赶紧去下载使用吧。&lt;/p>
&lt;p>其他的关于 Remedy ARS 开源的项目我也在 sf.net 里面大致搜索了一下，下面是个简单的参考清单。&lt;/p>
&lt;h2 id="remedy-outlook-integrationhttpsourceforgenetprojectsroi-updated-2006-09-08">&lt;a class="link" href="http://sourceforge.net/projects/roi/" target="_blank" rel="noopener"
>Remedy Outlook Integration&lt;/a> Updated 2006-09-08&lt;/h2>
&lt;p>The Remedy Integration for Outlook (ROI) synchronizes tickets from any Remedy AR System application to your Outlook task list or calendar.&lt;/p>
&lt;h2 id="remedy-arapi-php-extensionhttpsourceforgenetprojectsphp-arapi-updated-2009-07-19">&lt;a class="link" href="http://sourceforge.net/projects/php-arapi/" target="_blank" rel="noopener"
>Remedy ARAPI PHP extension&lt;/a> Updated 2009-07-19&lt;/h2>
&lt;p>Extension to PHP for integration to Remedy Action Request System. First release will be focused on reading and manipulating data. Later version will give access to arapi-application structure functions.&lt;/p>
&lt;h2 id="jasper-reports-data-provider-for-remedyhttpsourceforgenetprojectsjaspars-updated-2006-08-16">&lt;a class="link" href="http://sourceforge.net/projects/jaspars/" target="_blank" rel="noopener"
>Jasper Reports data provider for Remedy&lt;/a> Updated 2006-08-16&lt;/h2>
&lt;p>jaspars provides a Jasper Reports custom data source (JRDataSource) compatible with the Remedy AR System. See &lt;a class="link" href="http://www.mypathworks.com/arslist/Public?id=8ae4b6940c259f32010c3707fbae01bf" target="_blank" rel="noopener"
>http://www.mypathworks.com/arslist/Public?id=8ae4b6940c259f32010c3707fbae01bf&lt;/a> for more information and usage instructions.&lt;/p>
&lt;h2 id="arsperlhttpsourceforgenetprojectsarsperl-updated-2008-05-06">&lt;a class="link" href="http://sourceforge.net/projects/arsperl/" target="_blank" rel="noopener"
>ARSperl&lt;/a> Updated 2008-05-06&lt;/h2>
&lt;p>ARSperl is an integration kit for Perl5 and Remedy ARSystem API. It provides a large subset of the functionality found in the ARS C API&lt;/p>
&lt;h2 id="ar-cache-purgehttpsourceforgenetprojectsarcachepurge-updated-2009-05-27">&lt;a class="link" href="http://sourceforge.net/projects/arcachepurge/" target="_blank" rel="noopener"
>AR Cache Purge&lt;/a> Updated 2009-05-27&lt;/h2>
&lt;p>AR Cache Purge automates the process of clearing BMC Remedy user cache on client machines. It first checks the registry for the Home folders(s) and then removes the .arf and .arv files. It handles multiple users and home folders on a single machine.&lt;/p>
&lt;h2 id="pyarshttpsourceforgenetprojectspyars-updated-2010-12-20">&lt;a class="link" href="http://sourceforge.net/projects/pyars/" target="_blank" rel="noopener"
>pyARS&lt;/a> Updated 2010-12-20&lt;/h2>
&lt;p>The pyARS python module allows developers to use BMC&amp;rsquo;s ARSystem (Remedy ARS) and Atrium CMDB functions from within Python. Using Python&amp;rsquo;s interactive shell, it is extremely easy to retrieve and modify data entries as well as workflow objects.&lt;/p>
&lt;h2 id="com-objects-for-the-ar-systemhttpsourceforgenetprojectscoarse-updated-2006-01-10">&lt;a class="link" href="http://sourceforge.net/projects/coarse/" target="_blank" rel="noopener"
>COM Objects for the AR System&lt;/a> Updated 2006-01-10&lt;/h2>
&lt;p>Coarse (COM Objects for the AR System), provides an automation compatible COM API to the AR System (Remedy only provides a C API and a Java API). It is compatible with VB6, VBA, VBScript, and JScript. Based on the RTL Sourceforge project.&lt;/p></description></item><item><title>ITIL V3中级认证培训-服务生命周期模块</title><link>https://martinliu.cn/2011/02/21/itil-v3-bmc-training/</link><pubDate>Mon, 21 Feb 2011 04:11:37 +0000</pubDate><guid>https://martinliu.cn/2011/02/21/itil-v3-bmc-training/</guid><description>&lt;p>培训针已获得 Foundation 认证的学员，讲授 ITIL V3 服务生命周期模块的五门中级课程， 包括服务战略、服务设计、服务转换、服务运营、持续服务改进。
课程介绍了服务生命周期各阶段的术语、流程、结构、角色、职能和活动，结合 ITIL 的最佳实践，帮助学员掌握如何提升用户的日常 IT 服务。
课程中还将结合 BMC 的 IT 管理领域领导者优势，向学员介绍 ITIL 的自动化解决方案、以及基于 ITIL 的云计算生命周期管理。帮助广大学员迅速走向管理云端。&lt;a class="link" href="http://www.bmc.com/education/learning-paths/itil-v3-certification-path.html" target="_blank" rel="noopener"
>课程详情&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://www.bmc.com/education/bsm-training-solution-adoption-plan.html" target="_blank" rel="noopener"
>&lt;img src="http://media.cms.bmc.com/images/edu-banner_solution_adoption_plan.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>认证考试：
每门课程学时三天，并包含随堂认证考试。五门成绩均及格即可获得 5 个中级认证以及考取高级认证的资格。&lt;/p>
&lt;p>培训价格（含认证）：
单门课程 10000 元/人
五门课程优惠价格共 32000 元/人&lt;/p>
&lt;p>特别赠送：&lt;/p>
&lt;p>报名五门课程的学员，将获赠云计算网络培训一次。课程介绍
没有通过考试的学员，每门提供一次免费重考。
培训时间：
服务战略：3 月 21-23 日
服务设计：3 月 24-26 日
服务转换：4 月 11-13 日
服务运营：4 月 14-16 日
持续改进：5 月 18-20 日&lt;/p>
&lt;p>培训地点: BMC 上海培训教室（浦东花园石桥路 33 号花旗大厦）
咨询和报名:010-85183688-1883 &lt;a class="link" href="mailto:yuan_yuan@bmc.com" >yuan_yuan@bmc.com&lt;/a> &lt;a class="link" href="mailto:Yunlong_jin_cw@bmc.com" >Yunlong_jin_cw@bmc.com&lt;/a>&lt;/p></description></item><item><title>在Oracle上备份和恢复 Remedy ARS数据库</title><link>https://martinliu.cn/2011/02/14/backup-restore-remedy-ars-oracle-db/</link><pubDate>Mon, 14 Feb 2011 15:05:27 +0000</pubDate><guid>https://martinliu.cn/2011/02/14/backup-restore-remedy-ars-oracle-db/</guid><description>&lt;h1 id="why-ars-system-need-full-backup-and-restore">Why ARS system need full backup and restore&lt;/h1>
&lt;p>众所周知&lt;em>Remedy ARS&lt;/em>上运行的所有程序代码都是在数据库中存储的，几乎所有的程序代码和相关数据都是存储在后端的数据库里的。基于这种特性，我们可以很方便地从数据库层面实现对 ARS 系统的备份和恢复。所谓基于数据库的备份和恢复就是指数据库的全库导入和导出。在这方面&lt;em>Oracle&lt;/em>做的很好，他所提供的 imp 和 exp 命令行工具能很好的完成此项任务。
&lt;img src="http://img.en25.com/Web/BMCSoftwareInc/eloqua_webform_banner_868w_arch07.jpg"
loading="lazy"
>&lt;/p>
&lt;h1 id="when-you-may-backup-bmc-remedy-ars-system-database">When you may backup BMC Remedy ARS system Database&lt;/h1>
&lt;p>&lt;em>Remedy ARS&lt;/em>系统数据库全备份可能会发生在下面的几个时间点：&lt;/p>
&lt;ol>
&lt;li>&lt;/li>
&lt;/ol>
&lt;h2 id="在安装过程中remedy-itsm套件的安装都是从-ars-开始一个模块一个模块增加安装的可以在安装每个新模块之前做一个数据库备份用于安装失败情况下的现场恢复">在安装过程中，&lt;em>Remedy ITSM&lt;/em>套件的安装都是从 ARS 开始一个模块一个模块增加安装的，可以在安装每个新模块之前，做一个数据库备份，用于安装失败情况下的现场恢复&lt;/h2>
&lt;ol start="2">
&lt;li>&lt;/li>
&lt;/ol>
&lt;h2 id="在系统上线前当系统需要做升级代码更新等等大规模操作之前可以考虑做一次数据库的导出备份">在系统上线前，当系统需要做升级/代码更新等等大规模操作之前可以考虑做一次数据库的导出备份&lt;/h2>
&lt;ol start="3">
&lt;li>&lt;/li>
&lt;/ol>
&lt;h2 id="在做系统迁移的情况下我们甚至可以生产库迁移到开发机上进行问题的重现或者代码的修改或者测试完成之后再导回生产系统如果生产系统再次期间处于维护状态的话">在做系统迁移的情况下，我们甚至可以生产库迁移到开发机上进行问题的重现，或者代码的修改，或者测试，完成之后再导回生产系统（如果生产系统再次期间处于维护状态的话）&lt;/h2>
&lt;h1 id="how-to">How-to&lt;/h1>
&lt;p>下面是我总结的相关操作步骤参考。&lt;/p>
&lt;h2 id="备份arsystem数据库">备份&lt;em>ARSystem&lt;/em>数据库&lt;/h2>
&lt;p>exp aradmin/ar#admin@itil file=c:\before-patch7.dmp log=c:\exp.log compress=n statistics=none&lt;/p>
&lt;p>参数解释：
aradmin/ar#admin  是 ARS 系统默认的用户名和口令
@itil 是 ARSystem 数据库所在的数据库实例名
file=c:\before-patch7.dmp log=c:\exp.log  是导出的数据库文件和日志文件路径&lt;/p>
&lt;h2 id="_删除-aradmin-用户数据_">&lt;em>删除 ARAdmin 用户数据&lt;/em>&lt;/h2>
&lt;p>drop user aradmin cascade;&lt;/p>
&lt;h2 id="_创建和授权-aradmin-用户_">&lt;em>创建和授权 ARAdmin 用户&lt;/em>&lt;/h2>
&lt;p>CREATE USER ARADMIN
IDENTIFIED BY ar#admin#
DEFAULT TABLESPACE ARSYSTEM
TEMPORARY TABLESPACE ARTMPSPC
PROFILE DEFAULT
ACCOUNT UNLOCK;&lt;/p>
&lt;p>GRANT ARADMINROLE TO ARADMIN;
ALTER USER ARADMIN DEFAULT ROLE ALL;
ALTER USER ARADMIN QUOTA UNLIMITED ON ARSYSTEM;&lt;/p>
&lt;h2 id="_导入备份的数据文件_">&lt;em>导入备份的数据文件&lt;/em>&lt;/h2>
&lt;p>imp ARAdmin/AR#Admin@ars file=c:\CMDB2010-12-13_13.dmp log=c:\imp.log  fromuser=ARAdmin touser=ARAdmin ignore=y&lt;/p>
&lt;p>Credit to：以上操作步骤由&lt;em>神州太岳&lt;/em>工程师&lt;em>李成旗&lt;/em>协助编写和测试.&lt;/p></description></item><item><title>图书推荐《服务建模：原理与应用》</title><link>https://martinliu.cn/2011/02/12/book-service-modelling/</link><pubDate>Sat, 12 Feb 2011 01:17:17 +0000</pubDate><guid>https://martinliu.cn/2011/02/12/book-service-modelling/</guid><description>&lt;p>《服务建模: 原理与应用》以服务建模为主题，共分 4 部分：第 1 部分介绍了服务建模所需解决的问题，第 2 部分分析了实际应用中的服务建模框架，第 3 部分列举了使用服务建模的案例，第 4 部分则对《服务建模:原理与应用》的中心内容进行了总结，并提出了未来服务建模值得研究的一些领域。&lt;/p>
&lt;p>&lt;strong>Learn how to use service modelling to streamline and optimize processes!&lt;/strong>&lt;/p>
&lt;p>Information about customer needs, the technical composition of services, and service performance are fundamental to effective service management.  Service modelling is a structured approach to utilizing this information to improve the way services are delivered.  Consistent application of service modelling provides the automation of processes and timely access to information.&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_50942&amp;rdquo; align=&amp;ldquo;alignleft&amp;rdquo; width=&amp;ldquo;201&amp;rdquo; caption=&amp;ldquo;Service Modelling: Principles and Applications &amp;ldquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2011/02/couverture_OKLWOOARSOLOWB-201x300.jpg"
loading="lazy"
alt="Service Modelling: Principles and Applications "
>](&lt;a class="link" href="http://martinliu.cn/2011/02/book-service-modelling.html/couverture_oklwooarsolowb%29[/caption]" target="_blank" rel="noopener"
>http://martinliu.cn/2011/02/book-service-modelling.html/couverture_oklwooarsolowb)[/caption]&lt;/a>&lt;/p>
&lt;p>&lt;em>Service Modelling&lt;/em> presents a comprehensive, up-to-date overview of the topic, presented in the context both of business processes, and of requirements stemming from the need to manage network resources. Vilho Räisänen delivers a justification for service modelling, and explains state-of-the-art concepts, frameworks and standards in detail.&lt;/p>
&lt;p>&lt;em>Service Modelling:&lt;/em>&lt;/p>
&lt;ul>
&lt;li>Provides a complete and illustrated overview of state-of-the-art concepts for service modelling, covering requirements and frameworks.&lt;/li>
&lt;li>Includes industry initiatives, conceptual frameworks, and the work of standardisation bodies.&lt;/li>
&lt;li>Discusses different modelling approaches, and the positioning of modelling of services in service management and in the wider operational context.&lt;/li>
&lt;li>Sets the modelling framework in the context of business drivers and modelling paradigms.&lt;/li>
&lt;li>Illustrates principles with real-world use cases, providing both fixed Internet and mobile network examples.&lt;/li>
&lt;li>Relates concepts to the work of TeleManagement Forum, giving practical examples throughout.&lt;/li>
&lt;/ul>
&lt;p>&lt;em>Service Modelling: Principles and Applications&lt;/em> is an invaluable guide to service modelling for telecommunications and data communications professionals, including vendors, operators, consultants, training organizations, service and content providers, system architects and engineers for IP-based services.  Educational organizations, advanced undergraduate and graduate students on telecommunications and networking courses will also find this text invaluable.&lt;img src="http://ec4.images-amazon.com/images/I/41pNX5HatCL._SL500_AA240_.jpg"
loading="lazy"
alt="服务建模图书"
>&lt;/p>
&lt;p>本书的已经翻译为中文版本，本书中包含了针对电信行业的实例模型和介绍，图书内容介绍如下：&lt;/p>
&lt;p>《服务建模:原理与应用》主要内容简介：服务技术的发展，不仅彻底改变了人们原有的生活方式，更从本质上促进了当代社会经济发展方式的转变。《服务建模: 原理与应用》以服务建模为主题，共分 4 部分：第 1 部分介绍了服务建模所需解决的问题，第 2 部分分析了实际应用中的服务建模框架，第 3 部分列举了使用服务建模的案例，第 4 部分则对《服务建模:原理与应用》的中心内容进行了总结，并提出了未来服务建模值得研究的一些领域。
《服务建模:原理与应用》可作为高校信息技术、管理和经济类相关学科电子服务方向的教学用书。也可以作为现代服务企业进行服务建模方面研究的工具书或参考书。&lt;/p></description></item><item><title>在64位Windows上安装ARS7.5</title><link>https://martinliu.cn/2011/02/10/64-windows-ars-75-install-tips/</link><pubDate>Thu, 10 Feb 2011 17:12:30 +0000</pubDate><guid>https://martinliu.cn/2011/02/10/64-windows-ars-75-install-tips/</guid><description>&lt;p>&lt;img src="https://martinliu.cn/data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBggGBQkIBwgKCQkKDRYODQwMDRoTFBAWHxwhIB8cHh4jJzIqIyUvJR4eKzssLzM1ODg4ISo9QTw2QTI3ODUBCQoKDQsNGQ4OGTUkHiQ1NTU1NTU1LzU1NTU1NTU1NS41NCw1NTQ0NTU1NTU1LDUpNDQ1NDUsNSwsMDQsNDU1Nf/AABEIADAAMAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAGBwMEBQIIAf/EADUQAAEDAwMCAwUFCQAAAAAAAAECAwQFERIAITEGEyJBYQdRcYGhFBUjMkJSYpGiscHR4fD/xAAYAQADAQEAAAAAAAAAAAAAAAACAwQFAf/EACERAAICAgICAwEAAAAAAAAAAAECABEDIRJBBDEiMnET/9oADAMBAAIRAxEAPwB4k2FzofqUqoyX1NMK&amp;#43;zRySEOJBzUoevAB9RqR6rOuVtbLOK47ACXEHZRXfe3vABB&amp;#43;R11VKolKMUfl/Sm/5/U/u/RQOjAqTu93uDU6miQ6vuEynl7d5RCSo/E2G3Hy1aV09TGFpXTmhElHxNvRiEqSPOxVcAEXFjvzqjKkqdRZZUEFJCUKbuL38h/HbXPUtb&amp;#43;6KO8&amp;#43;xHvitsIB8itaWx4rb2ve39L6qxKCCT1JAd0O5pR&amp;#43;oJlEdSJTxl0/LxLdBVISCd1EiwIA8gm&amp;#43;i&amp;#43;PIalx0Px3EuNLF0qSdjpXTejSlky01upLnIR3SpTy&amp;#43;x3LXI7OVsL/pva22q/sy60WquCG9kzCllTbLAOQQ8FWunjFKrLUQByfPnSWC5LKCqlqck0xubESuJEVUmSpTxeJcBSAApZFiSRYgW92q7lWQ5buEKxIOyj&amp;#43;nn/X11BFeEOnN0&amp;#43;UC1IintuoPiAI38uefI86ru1doKxTyFWOQvz/nz/tq5sAbYMzASNGWJE9CyVqUFeQSk/8AfM839NY3UNZiSGWaWAJDk5SQ1dRDYxOdyRvYY3G25Fjtqd6tuEfhWSpJuFWO/lcj04toUkSEOV2jOhfgL7hJKhz2zz6&amp;#43;vGhCfzIXptRuL5OIWTYnWSWEsOOQDHCcG5RWoOFJ2C8cMciN7cX0DxK6ilzFqh4wpkF3JFjmnPc5DK973JsRYE7bW005akntKBBSWUG99rW0lE06TWOr5UKA33pMh/FtGQTkbe8kDR5cS4FDKPcrykkfkbntMp0uhVs1aOw8unSUDvuJUSGnSoglQtsCMAL&amp;#43;eg1uroWpZ8ON7JCj7&amp;#43;Pjf&amp;#43;bXoaVFZnRXI8ptLrLqcVoUNiNJfq/2R1anyHpPT2MmCVfhxgSXkBR4FxuBsLlV9K8fOK4tE58BvksHXarhgoqzsb2SvG/qT5W4v5cawZT2cZlpSGwEvNhKsAlQuoA29222Pu&amp;#43;OvlRYqNInriVBtceS2QVNrSLjYEfQjUNPYnVeWxBgR1SpKlhSW0DxLCPGQPkkm&amp;#43;i8g/UxOPTi4wa9Rn6dTnXk1CXgG7ttB5WKU22HPAG1tQ&amp;#43;xHo&amp;#43;RUqz9/wA9h37Kxmph5RI7joXYEftAAKHxGuq71ZCqrBpLQcTVCBGMRQGfe/L2&amp;#43;ecttNP2dUGV0z0HTqZPLf2hnuKX2ySBm4pYG4G4CgD631zzXUheJmgFv3P/2Q=="
loading="lazy"
alt="ARS 7.5 安装"
>刚才终于把 ARS 装上了。费了我两天的力气终于搞定了。错误其实很简单的，现象很多人都见过，ARS 在安装完所有的文件后，在系统中建完 ARS 的服务以后，会继续启动服务，才能做最后的程序文件导入的相关操作。&lt;/p>
&lt;p>错误的现象是：在启动服务的时，安装程序一直停止在“Starting Remedy ARS services&amp;hellip;.”的屏幕，去 arerror 日志里面可以看到无法连接到 SQL 数据库的错误。&lt;/p>
&lt;p>我的安装错误的原因其实很简单：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>如果是 64 为的 Windows 操作系统，默认的安装路径是 C:\Program Files (x86)\目录&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Oracle 客户端没有正确的安装&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>解决的方法如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>修改 ars 默认的安装路径，尽量把它放在一个较短的而且没有特殊字符的路径里，如 D:\bmc\&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ARS 7.5 sp6 支持的 Oracle 客户端是 32 位的，如果你在 64 位 OS 上安装的是 64 位的 Oracle 数据+客户端（sqlplus），那么默认的这个 64 为的客户端是不能用的，需要安装一个 62 位的客户端，而且需要时 10g 的，此版本也不支持 11g 的客户端；另外在安装 32 位的 oracle 客户端的时候最好也不要在路径中有特殊字符如符号和下划线之类的&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ARS7.5 本身是 32 位的可支持程序，所以它所需要的 JDK 和 Oracle 都需要是 32 位的版本。如果你安装的是 7.6.04，就不需要考虑 32 位的问题，由于它本身就是 64 位的程序了，所以 JDK 和 Oracle 都需要使用相应的 64 为的程序。&lt;/p></description></item><item><title>BMC Atrium CMDB CI数据迁移</title><link>https://martinliu.cn/2011/01/12/bmc-atrium-cmdb-ci/</link><pubDate>Wed, 12 Jan 2011 05:08:23 +0000</pubDate><guid>https://martinliu.cn/2011/01/12/bmc-atrium-cmdb-ci/</guid><description>&lt;p>在不同的 CMDB 服务器之间做数据迁移之前一定要注意两点：1）保持两边的 CDM 相同；2）先导入 CI 数据在导入 CI 相关的关系数据。另外就是每个类导入完毕之后要做数据完整性和正确性的抽检。以下使用的工具是 cmdbdriver，该命令初始化和一般性的参数介绍请参考相关文档。&lt;/p>
&lt;p>&lt;em>&lt;strong>CI 数据导出示例&lt;/strong>&lt;/em>&lt;/p>
&lt;p>Command: xexpdt
XEXPORT DATA
Export instance data from all classes? (F):
Classes to export data from:
Class and its subclasses, From namespace (1,2) (1):
Namespace (): BMC.CORE
Class name (): BMC_ComputerSystem
Dataset ID (): BMC.ASSET
Filename for exported data: C:\DEMO\cs-ci
Exporting Class BMC_ComputerSystem
i=0: namespaceName = BMC.CORE, className = BMC_ComputerSystemExported without errorsExporting Class BMC_MainframeExporti
ng Class BMC_PrinterExporting Class BMC_StorageSubsystem
CMDBExportData  results
ReturnCode:  OK
Status List : 0 items&lt;/p>
&lt;p>到相应目录下面找到导出的文件，导出的结果至少是两个文件一个是 META_FILE 其他的才是 CI 数据文件。&lt;/p>
&lt;p>&lt;em>&lt;strong>关系数据导出示例&lt;/strong>&lt;/em>&lt;/p>
&lt;p>Command: xexpdt
XEXPORT DATA
Export instance data from all classes? (F):
Classes to export data from:
Class and its subclasses, From namespace (1,2) (1):
Namespace (): BMC.CORE
Class name (): BMC_Dependency
Dataset ID (): BMC.ASSET
Filename for exported data: C:\DEMO\REL-DEP.XML
Exporting Class BMC_Dependency
i=0: namespaceName = BMC.CORE, className = BMC_DependencyExported without errorsExporting Class BMC_AccountOnSystemExpor
ting Class BMC_HostedAccessPointExporting Class BMC_HostedServiceExporting Class BMC_InventoryBulkItemsExporting Class B
MC_InventoryComputerSystemsExporting Class BMC_InventoryEquipmentExporting Class BMC_InventorySystemComponents
CMDBExportData  results
ReturnCode:  OK
Status List : 0 items&lt;/p>
&lt;p>到相应目录下面找到导出的文件，导出的结果至少是两个文件一个是 META_FILE 其他的才是 CI 数据文件。&lt;/p>
&lt;p>&lt;em>&lt;strong>导入数据示例&lt;/strong>&lt;/em>&lt;/p>
&lt;p>Command: impdt
IMPORT INSTANCE DATA
Handle duplicate Instance Ids:
(Error/New ID for Dup/Merge/New ID for All) (1-4) (1): 3
Filename containing import data: c:\demo\cs-ci_0_0  (导入包含 CI 数据的文件)&lt;/p>
&lt;p>CMDBImportData  results
ReturnCode:  OK
Status List : 0 items
Total items Processed             :  2
Items Imported successfully       :  2
Items for which Import failed     :  0&lt;/p>
&lt;p>Command: impdt
IMPORT INSTANCE DATA
Handle duplicate Instance Ids:
(Error/New ID for Dup/Merge/New ID for All) (1-4) (1): 3
Filename containing import data: c:\demo\REL-DEP.XML_0_0 (导入包含关系数据的文件)&lt;/p>
&lt;p>CMDBImportData  results
ReturnCode:  OK
Status List : 0 items
Total items Processed             :  1
Items Imported successfully       :  1
Items for which Import failed     :  0&lt;/p>
&lt;p>导入完毕之后使用 Remedy User 到相应的表格中查找，确认导入的数据是否正确。&lt;/p></description></item><item><title>BMC Atrium CMDB 类定义迁移</title><link>https://martinliu.cn/2011/01/12/bmc-atrium-cmdb-sync-cdm-class/</link><pubDate>Wed, 12 Jan 2011 04:22:44 +0000</pubDate><guid>https://martinliu.cn/2011/01/12/bmc-atrium-cmdb-sync-cdm-class/</guid><description>&lt;p>当对 CDM 做了定制，并且要在不同的服务器直接做类的迁移的时候，需要把定制过的类都导出，然后在目标机上导入。可以使用的 CMDB 自带的命令行 cmdbdriver 工具。&lt;/p>
&lt;p>&lt;em>&lt;strong>cmdbdriver.exe 能支持的参数&lt;/strong>&lt;/em>&lt;/p>
&lt;p>Options:
-u&lt;!-- raw HTML omitted -->
-a&lt;!-- raw HTML omitted -->
-p&lt;!-- raw HTML omitted -->
-l&lt;!-- raw HTML omitted -->
-s&lt;!-- raw HTML omitted -->
-x&amp;lt;INPUTFILE_FULLPATH&amp;gt;
-t&amp;lt;PORT_NUMBER&amp;gt;
-q&amp;lt;QUIET_MODE_NUMBER&amp;gt;&lt;/p>
&lt;p>登录 CMDBdriver 实例：   cmdbdriver -u Demo -p bmc@XXX -s atriumcmdb -t 9988&lt;/p>
&lt;p>登录之后在运行另外用于初始化的两个命令 init 和 log&lt;/p>
&lt;p>Command: init
INITIALIZATION&lt;/p>
&lt;p>CMDBInitialization  results
ReturnCode:  OK
Status List : 0 items&lt;/p>
&lt;p>Command: log
Control record:
Authentication string () :
User name () : Demo
Password () : &lt;strong>&lt;strong>**&lt;/strong>&lt;/strong>
Locale[.charSet] () :
TimeZone () :
Server () : atriumcmdb&lt;/p>
&lt;p>&lt;em>&lt;strong>导出类定义的方法实例&lt;/strong>&lt;/em>
Command: xexpdf
XEXPORT DEFINITION
Export all classes? (F):
Classes to export:
Class and its subclasses, From namespace (1,2) (1):
Namespace (): BMC.CORE
Class name (): BMC_ComputerSystem
Export all attributes with classes? (T):
Filename for exported data: c:\demo\BMC_ComputerSystem.xml&lt;/p>
&lt;p>CMDBXExportDef  results
ReturnCode:  OK
Status List : 0 items&lt;/p>
&lt;p>使用文本编辑器查看 c:\demo\BMC_ComputerSystem.xml 的导出结果&lt;/p>
&lt;p>&lt;em>&lt;strong>导入类定义的方法：&lt;/strong>&lt;/em>
Command: impdf
DEFINITION IMPORT
Import Item List:
Number of import items (0):
Import option : Create/Overwrite (1-2) (1): 2
Filename containing import data: c:\demo\cs.xml&lt;/p>
&lt;p>CMDBImportDef  results
ReturnCode:  OK
Status List : 0 items&lt;/p>
&lt;p>使用 Remedy User，用 Demo 登录，把语言切换到英文，然后在查 BMC_ComputerSystem 表达，在 custom 2 ～ n 的 tab 页面里面查看哪些导入的属性。或者使用 class manager 查看确认导入是否成功。&lt;/p></description></item><item><title>Fiddler Timers</title><link>https://martinliu.cn/2010/12/22/fiddler-timers/</link><pubDate>Wed, 22 Dec 2010 07:28:45 +0000</pubDate><guid>https://martinliu.cn/2010/12/22/fiddler-timers/</guid><description>&lt;p>&lt;img src="http://www.fiddler2.com/Fiddler/images/FiddlerLogo.png"
loading="lazy"
alt="Fiddler"
>Fiddler is a Web Debugging Proxy which logs all HTTP(S) traffic between your computer and the Internet. Fiddler allows you to inspect all HTTP(S) traffic, set breakpoints, and &amp;ldquo;fiddle&amp;rdquo; with incoming or outgoing data. Fiddler includes a powerful event-based scripting subsystem, and can be extended using any .NET language.Fiddler is freeware and can debug traffic from virtually any application, including Internet Explorer, Mozilla Firefox, Opera, and thousands more.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ClientConnected&lt;/strong>- Exact time that the client browser made a TCP/IP connection to Fiddler.&lt;/li>
&lt;li>&lt;strong>ClientBeginRequest&lt;/strong>– Time at which this HTTP request began. May be much later than ClientConnected due to client connection reuse.&lt;/li>
&lt;li>&lt;strong>ClientDoneRequest&lt;/strong> - Exact time that the client browser finished sending the HTTP request to Fiddler.&lt;/li>
&lt;li>&lt;strong>DNSTime&lt;/strong> - # milliseconds Fiddler spent in DNS looking up the server&amp;rsquo;s IP address.&lt;/li>
&lt;li>&lt;strong>GatewayDeterminationTime&lt;/strong> - # milliseconds Fiddler spent determining the upstream gateway proxy to use (e.g. processing autoproxy script). Mutually exclusive to DNSTime.&lt;/li>
&lt;li>&lt;strong>TCPConnectTime&lt;/strong> - # milliseconds Fiddler spent TCP/IP connecting to that server&amp;rsquo;s IP address.&lt;/li>
&lt;li>&lt;strong>HTTPSHandshakeTime&lt;/strong> – Amount of time spent in HTTPS handshake&lt;/li>
&lt;li>&lt;strong>ServerConnected&lt;/strong> – Time at which this connection to the server was made. May be much earlier than ClientConnected due to server connection reuse.&lt;/li>
&lt;li>&lt;strong>FiddlerBeginRequest&lt;/strong> – The time at which Fiddler began sending the HTTP request to the server.&lt;/li>
&lt;li>&lt;strong>ServerGotRequest&lt;/strong> - Exact time that Fiddler finished (re)sending the HTTP request to the server.&lt;/li>
&lt;li>&lt;strong>ServerBeginResponse&lt;/strong> - Exact time that Fiddler got the first bytes of the server&amp;rsquo;s HTTP response.&lt;/li>
&lt;li>&lt;strong>ServerDoneResponse&lt;/strong> - Exact time that Fiddler got the last bytes of the server&amp;rsquo;s HTTP response.&lt;/li>
&lt;li>&lt;strong>ClientBeginResponse&lt;/strong> - Exact time that Fiddler began transmitting the HTTP response to the client browser.&lt;/li>
&lt;li>&lt;strong>ClientDoneResponse&lt;/strong>- Exact time that Fiddler finished transmitting the HTTP response to the client browser.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Can i find out how long the server needs to process my request ?&lt;/strong>
(ServerBeginResponse - ServerGotRequest) is probably what you want.&lt;/p>
&lt;p>&lt;strong>Can i find out how long the request needs to pass through the network?&lt;/strong>
I&amp;rsquo;m not sure that&amp;rsquo;s what you really want to know, but it would be:&lt;/p>
&lt;p>(ServerGotRequest - ClientDoneRequest) - (DNSTime + TCPConnectTime)&lt;/p></description></item><item><title>[ZT]ITIL V3 服务转换篇 之 资产和配置管理</title><link>https://martinliu.cn/2010/12/20/itil-v3-asset-configuration/</link><pubDate>Mon, 20 Dec 2010 03:01:40 +0000</pubDate><guid>https://martinliu.cn/2010/12/20/itil-v3-asset-configuration/</guid><description>&lt;p>为了定义和控制服务和基础设施组件。维持当前计划中、历史的服务和基础设施状况配置信息的准确性
**一、先介绍几个基本概念
**1、配置项（CI）
配置项是正在或将要在配置管理控制下的资产、服务组件或其他。配置项在复杂性、大小、种类有很大不同，从整个服务或系统包括硬件、&lt;a class="link" href="http://portal.vsharing.com/industry/1593.html" target="_blank" rel="noopener"
>软件&lt;/a>、文档、支持人员到单独软件模块或硬件组件。配置项可以集中或分组管理。配置项可以选择使用既定的选择标准、分组、分类和识别方式在整个生命周期中管理和追溯。其包括：
A) 服务 CI 项：服务能力资产、服务资源资产、服务模式、服务包、发布包、验收标准等
B) 组织 CI 项
C) 内部 CI 项
D) 外部 CI 项：包括外部客户需求和协议、供应商发布、分包商及对外服务。
E) 接口 CI 项：端到端的服务，跨越服务提供者的接口
2、配置管理系统（CMS）
为了管理大型复杂的 IT 服务和基础设施，资产和配置管理需要使用配置管理系统 CMS。在指定范围内 CMS 掌握着所有配置项信息。CMS 为所有服务组件与相关事故、问题、已知错误、变更发布、文档、公司数据、供应商、客户信息做关联。
在数据层面 CMS 能使数据库存在多个物理 CMDB 中而后共同组成一个联合的 CMDB。其他数据来源也可以加入 CMS 中。
3、配置管理数据库(CMDB)
所有配置项的信息都包括在配置管理数据库(CMDB)中。配置管理数据库(CMDB)对所有 IT 组件、组件的不同版本和状态以及组件之间的相互关系进行跟踪。在其最基本的形式下，配置管理数据库(CMDB)可能仅由一些纸质表格或一套电子表格 (Spreadsheets)组成。
4、最终介质库(DML)
DML 是用来存储和保护所有已授权的被确认版本介质配置项。 他们存储经过质检的主拷贝版本。这个库可以有一个或多个软件库或存放区来存放开发、测试和实时存储文件。他们包含组织所有软件的主拷贝、购买软件的副本及 受控文件的电子版。DML 包含物理的拷贝存储，DML 是发布管理的基础。&lt;/p>
&lt;p>**二、配置管理的目的：
** 1.  确定、控制、记录、报告、审计、验证服务资产和配置项包括版本、基线、组成成分、属性和相关关系。 2.通过服务&lt;a class="link" href="http://plm.vsharing.com/" target="_blank" rel="noopener"
>生命周期管理&lt;/a>保护资产完整、配置项等账户。确保只有已授权的组件被使用和已授权变更被执行。 3.通过服务生命周期保护服务资产、配置项的完整性。为了建立和维持一个准确和完整的配置管理系统，确保资产和控制服务、IT 基础设施的配置需求的完整性。&lt;/p>
&lt;p>&lt;strong>三、资产、配置管理的活动&lt;/strong>&lt;/p>
&lt;p>&lt;img src="http://blog.amteam.org/Uploads/UserDirs/3/1169/467255/b%281%29.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;a class="link" href="http://blog.amteam.org/Uploads/UserDirs/3/1169/467255/b%281%29.jpg" target="_blank" rel="noopener"
>&lt;img src="http://blog.amteam.org/Uploads/UserDirs/3/1169/467255/b%281%29.jpg"
loading="lazy"
alt="点击查看原图"
>&lt;/a>&lt;/p>
&lt;p>1、规划
2、识别
配置项识别过程：
A) 定义和制定标准文件来选择配置项和他们的组件构成
B) 依据标准选择配置项及其组件并记录他们
C) 给配置项分配唯一的标识符
D) 指定每个配置项相关属性
E) 确认每个配置项是受配置项管理来管理
F) 确定每个配置项的责任人
3、控制
必须有效控制信息以维持配置管理数据库(CMDB)的及时更新。一旦某项活动改变了配置项已记录的特征或配置项之间的关系，则必须在配置管理数据库 (CMDB)中记录该项变动。需注意的是：只有变更管理才有权批准对配置项的特征进行变动，事件管理只能改变某个现有的配置项的状态来反映现实状况。
配置管理负责控制组织接收到的所有 IT 组件并需确保这些组件被记录在系统中。硬件可在其已订购或已交付时进行记录，而软件则通常在其被纳入 DML 时进行记录。
4、记录
组件的生命周期可被划分成多个阶段，每个阶段都可以分配一个状态代码，但具体分成几个阶段则取决于公希望记录 IT 基础设施的哪些特征。保持对每次状态变化日期的记录可以提供关于一个产品的生命周期的有用信息，如订购时间、安装时间以及所需的维护和支持。组件的状态决 定了可以对其进行操作的余地。
5、审核和报告
执行审计是为了核实配置管理数据库(CMDB)中记录的信息是否仍然反映了当前的现实状况。这些信息可用来检查和更新配置管理数据库(CMDB)。
在下列情形下需要执行审计：
A) 在建立了新的配置管理数据库(CMDB)之后；
B) 建立配置管理数据库(CMDB)一段时间之后；
C) 重大变更之前或之后；
D) 灾难恢复之后；
E) 其他任何方便的时候。
审计也可以随机地或在配置经理认为配置管理数据库(CMDB)中的信息不正确时进行。如果配置管理系统与审计工具之间存在关联，则可以每天生成针对某个相 关领域的审计报告。在发现差异时，不应该允许审计工具自动更新配置管理数据库(CMDB)。所有的差异都表明变更管理流程可能被忽视了，所以应该对这些差 异进行调查并通过变更管理对这些差异进行追溯性处理。
&lt;strong>三、配置管理管理报告&lt;/strong>
配置管理流程的管理报告可能包括下列信息：
a) 有关流程质量的信息；
b) 在审计中发现的记录与实际情形不符的次数；
c) 发现未经批准的配置的次数；
d) 出现已记录的配置不能被找到情形的次数；
e) 审计中发现的有关配置项属性详细程度方面的差异；
f) 处理信息记录请求所需的时间；
g) 超过给定事件或变更次数的配置项的列表；
h) 有关 IT 基础设施的结构和组成的统计信息；
i)  有关 IT 基础设施发展情况及其他方面的信息；
j) 有关改进措施的总结、报告和建议，例如，针对由于业务、技术、市场价格和其他相关变化所导致的配置管理追踪记录的配置项的范围和详细程度的变更所提出建议；
k) 有关实施流程所耗费的人力成本的清单。&lt;/p>
&lt;p>&lt;strong>四、配置管理的绩效指标指标&lt;/strong>
a) 闲置许可数量;
b) CMDB 错误导致变更失败的数量;
c) 未授权配置数量;
d) 配置项文档错误导致变更失败所引起的事故数量;
e) 因为 CMDB 错误导致违反 SLA 的数量;
f) 无相应配置项刷新的变更请求数量;
g) 不精确配置项百分比;
h) 客户满意度 ;&lt;/p>
&lt;p>&lt;strong>五、与其他流程的关系&lt;/strong>&lt;/p>
&lt;p>&lt;img src="http://blog.amteam.org/Uploads/UserDirs/3/1169/467255/a.jpg"
loading="lazy"
>&lt;/p>
&lt;p>转帖学习一下。&lt;/p>
&lt;p>From &lt;a class="link" href="http://blog.amteam.org/standard/A1159174.html" target="_blank" rel="noopener"
>http://blog.amteam.org/standard/A1159174.html&lt;/a>&lt;/p></description></item><item><title>如何阻止员工上班时间聊QQ的免费解决方案</title><link>https://martinliu.cn/2010/11/06/qq-v-360/</link><pubDate>Sat, 06 Nov 2010 09:59:01 +0000</pubDate><guid>https://martinliu.cn/2010/11/06/qq-v-360/</guid><description>&lt;p>&lt;img src="http://nj.jiaju.sina.com.cn/images/2010/1105/201011575322.jpg"
loading="lazy"
alt="pp vs 360"
>&lt;/p>
&lt;p>最近听说有些公司的 IT 部门已经发文，要求公司员工所使用的电脑必须尽快安装 360 软件。嗯，这还真是一个法子，值得推广哈哈哈&lt;/p></description></item><item><title>八月十五月儿圆，我和兄弟们装AR</title><link>https://martinliu.cn/2010/09/22/install-remedy-ars-itsm-on-aix-oracle/</link><pubDate>Wed, 22 Sep 2010 13:51:14 +0000</pubDate><guid>https://martinliu.cn/2010/09/22/install-remedy-ars-itsm-on-aix-oracle/</guid><description>&lt;p>&lt;img src="http://ww.61bay.com/pic/upload/10ph1/20095272001540.jpg"
loading="lazy"
>经过几天的奋战，我们终于在中秋月圆之夜，在黑山扈的百望山脚下为客户成功地安装了 Remedy ITSM 7.6.03 每当安装程序一次次挂死、安装程序界面不正常显示、安装不完全、安装失败，都让在场的人达到抓狂的后期，无语~~ 这里总结一下这几天的失败安装的血泪史，供后来人参考学习。&lt;/p>
&lt;p>版本的确认：所有操作系统，JVM，JDK，数据库，数据库客户端，和以上软件的位数都需要查明，都需要在 Remedy 的兼容文档中一一确认。&lt;/p>
&lt;p>AIX 操作系统的字符集：需要同时安装中英文的 UTF8 字符集。安装方法 smitty，需要有操作系统的安装盘，安装完成之后，locale -a ，需要能看到 ZH_CN, ZH_CN.UTF-8,EN_US, EN_US.UTF-8 这四种字符集缺一不可。否则无法以中文方式安装成功，也无法让操作系统已中文 utf8 来启动 AR 服务。&lt;/p>
&lt;p>XManager 需要安装在于 AR 同一网段的 Windows 服务器上，例如 Mid-tier 可能安装在 Windows 上，并与 AR 在同以网段，那么安装程序最好在该服务器的 Xmanager 的客户端中安装，从哪里连接 AIX 服务器并运行安装程序。如果不在同一个网段，安装程序很有可能安装了一半或者无名的消失，安装进程会立刻中断，需要把系统推到重来。&lt;/p>
&lt;p>AIX 系统上 font server 的安装：使用 netstat -na|grep 7100， 如果没有结果则需要从 AIX 的光盘中在 AIX 的服务器上安装 font server 和相关的包，并且启动它。如果不装的话，remedy 安装程序可能界面显示不正常，或者不显示。&lt;/p>
&lt;p>Oracle 上众多僵尸进程：如果在安装 CMDB 或者 ITSM 套件的时候，安装界面挂死或者消失，这会是 Oracle 服务器上产生上百个僵尸进程，这些进程会吃光 Oracle 服务器的所有物理内存。我们的 oracle 服务器的 16GB 内存被吃光之后，ITSM 安装界面几乎停止，20~30 分钟才能安装完一个定义文件。解决方法是：随时监控 Oracle 服务器的内存使用情况，当出现内存被僵尸进程吃光的情况，可以考虑使用 IT 行里无人不知的无敌重启方案，重启 Oracle 服务器的操作系统，从启动 Oracle 数据库实例，重启 ARS 服务，然后再次安装 Remedy ITSM。&lt;/p>
&lt;p>Remedy 安装之备份：如果是在 AIX+Oracle 的数据库上安装。Remedy 还是非常绿色的软件，需要在安装完 AR，CMDB，ITSM 套件后各做一个 Remedy 安装文件目录的备份，在 AIX 上可以把这个文件夹 tar 起来备用。Oracle 数据库还是非常容易备份的，使用 imp 和 exp 命了就可以搞定，具体语句咨询 DBA。切忌在安装 CMDB 和 ITSM 之前一定要对 Remedy 系统的安装文件和数据库做备份，一旦安装失败，可以恢复文件，恢复数据库，排错后重新再来。&lt;/p></description></item><item><title>[ZT] Old BSM is dead</title><link>https://martinliu.cn/2010/09/17/zt-bsm-dead/</link><pubDate>Fri, 17 Sep 2010 18:46:09 +0000</pubDate><guid>https://martinliu.cn/2010/09/17/zt-bsm-dead/</guid><description>&lt;p>&lt;img src="http://www.smarthomecn.com/upload/2008_11/081112102554402.jpg"
loading="lazy"
>随着云计算和虚拟化的来临，IT 架构愈加复杂，老一套的 IT 管理方案只能监控静态的基础架构。老一套的 CMDB 和 BSM 给运维无法带来实质性的帮助，需要能够具有自适应、自学习 IT 环境的能力，管理工具需要对 IT 环境的变化有感知，有学习功能，否则无法对业务故障的处理给予应有的支持。转帖自学一下这个文章，老外从 IT 架构的历史讲起，横跨跨服务保证和 CMDB 等领域，讲的还是很不错的。
&lt;a class="link" href="http://www.virtualizationpractice.com/blog/?p=7186" target="_blank" rel="noopener"
>The Significance of the VMware Integrien Acquisition&lt;/a>
While it may seem that with Integrien &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2983" target="_blank" rel="noopener"
>VMware&lt;/a> has acquired yet one more piece of the puzzle (a puzzle whose final form no one knows), this acquisition is perhaps one of the most significant if not the most significant that &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2983" target="_blank" rel="noopener"
>VMware&lt;/a> has done. To understand the significance of this acquisition, one has to step back and examine a bit of history in the Systems Management business.&lt;/p>
&lt;p>For as long as there have been computers, operating systems and business critical applications, there has been monitoring of these items to make sure they were working (available) and performing well for their constituents. In the early days of the computer industry (through about 1982) computer systems were vertical monoliths where a customer would buy “an accounting system” and that purchase would include hardware, systems software, and applications software. All of this usually came from one vendor so there was one throat to choke when it did not work.&lt;/p>
&lt;p>Starting with the delivery of the PC, then Ethernet LAN’s and Novel Netware, and finally Windows Servers and the Internet, the industry reorganized along horizontal dimensions. A computer system was now a multi-layer cake and you could buy each cake from one of many vendors whose products were largely interchangeable with each other, and compatible with adjacent layers. So you could buy an Intel based server from one of N vendors, put either Linux or Windows on it, but a Java applications server from one of N vendors on that and then buy applications from thousands of different vendors.&lt;/p>
&lt;p>This horizontal layering of the industry was heavily promoted by &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?s=microsoft" target="_blank" rel="noopener"
>Microsoft&lt;/a> and Intel (who “owned” two key layers of the cake), and also ushered in the tremendous innovation and price competition that continues to drive our industry today. Moore’s Law says that microprocessor performance doubles roughly every 18 months or so, and with those increases in price/performance come the more for less mentality that we have all become accustomed to.&lt;/p>
&lt;p>With this freedom of choice at every layer of the cake however came problems. The first problem was complexity. There were now too many cooks in the kitchen which meant that there were both too many and not one single throat for the CIO to choke when something went wrong. The management software industry reacted to this by inventing a marketecture, Business Service Management (BSM). The idea behind BSM was to identify the key business services that applications or combinations of applications delivered to users (the ability to enter and order and ship the resulting product is a business service as is the ability of a consumer to transfer funds from one banking account to another), and to then map all of the software and hardware infrastructure that this business service depended upon and to manage that collection of linked resources as an entity.&lt;/p>
&lt;p>While Business Service Management sounded like a great idea, it in fact ended up as a miserable failure. The reasons were:&lt;/p>
&lt;ul>
&lt;li>There were many applications for which it was just too hard to measure their performance (in response time terms). Web applications turned out to be pretty easy, but fat client Win32 applications written to proprietary client/server protocols turned out to be very hard. It turned out that for most enterprises, more than half of the business critical applications were in the hard pile (fat client/Win32) and less than half were the easy web applications.&lt;/li>
&lt;li>Many BSM frameworks relied upon scripts and synthetic transactions to measure response time and end user experience. However this approach failed for many enterprises due to the large number of applications that comprised a business service and how rapidly these applications were changing. For example if synthetic transactions were used to measure the performance of a set of transactions, and a company had 500 business critical applications (not a very high number – some companies have thousands), and each application was updated once a year, then that would translate into 10 updates a week for the monitoring scripts.&lt;/li>
&lt;li>The same is true for most passive monitoring approaches that rely upon templates to identify transactions in applications protocols. There are many products that can measure the response time of transactions from the perspective of the web server by attaching physical or virtual appliance to a span port on the switch that services the web server. However all such products require configuration to understand what set of granular http request/responses combine to create a transaction of interest. Maintaining these configurations across hundreds of applications and thousands of transactions proved to be a major impediment to instrumenting their service level in any kind of a broad and systematic manner.&lt;/li>
&lt;li>It turned out to be a nightmare to identify the hardware and software that supported each business service. This gave rise to the need for Configuration Management Databases (CMDB’s) that were supposed to get populated with the hardware and software assets and their relationships to each other. The effort to put in place a CMDB and to maintain it turned out to doom the CMDB projects and the associated BSM projects at many companies.&lt;/li>
&lt;li>The BSM vendors were unable to evolve their products at the same rate as the innovation of the vendors who contributed products to the layers in the cake. New devices (laptops that were not always connected), new protocols (ICA, VOIP), new operating systems (Linux), new languages (Java, C#), and new user interfaces (first the browser and then rich Internet applications) all occurred at a pace that no one vendor could keep up with.&lt;/li>
&lt;li>When the BSM vendors got overwhelmed by innovation, vendors of point monitoring solutions stepped in to monitor the newest layer or item in a layer.  This lead to a proliferation of monitoring tools which were not integrated with each other.&lt;/li>
&lt;li>When a problem occurred even if one had a BSM product and a CMDB it still horribly difficult to know exactly what path the failed transaction took through the entire hardware and software infrastructure. The BSM tools were rarely aware of every element of the stack and the tactical monitors that had been bought to fill in the cracks were not integrated with the BSM tools nor each other.&lt;/li>
&lt;/ul>
&lt;p>In summary we entered the age of virtualization and the cloud with both BSM and their supporting CMDB’s having failed at monitoring and managing a static infrastructure where applications and services largely stayed on dedicated hardware. In other words, before virtualization and the dynamic data center it was impossible for anyone in IT to see a problem and get told in a deterministic manner exactly where the problem was and how to fix it.&lt;/p>
&lt;p>&lt;strong>The Impact of Virtualization and the Cloud&lt;/strong>&lt;/p>
&lt;p>Since holistic end-to-end monitoring of business services was essentially broken (or not attainable) before virtualization, it is reasonable to assume that virtualization and the cloud will only make this problem worse. This will occur for the following reasons:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Virtualization increases workload density and the dynamic operation of workloads. This will require both continuous mapping of application to infrastructure dependencies and more more frequent (near real time) collection of performance data. Just the requirements for real time mapping and real time data completely overwhelm existing monitoring systems. Hyperic has a good blog on this point &lt;a class="link" href="http://blog.hyperic.com/vfabric-hyperic-weaves-performance-management-into-cloud-applications/" target="_blank" rel="noopener"
>here&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Inferring application performance from resource utilization statistics becomes impossible. This was possible on physical hardware, but on hardware that is shared via virtualization it no longers works. Hence the need for Infrastructure &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?cat=9" target="_blank" rel="noopener"
>Performance Management&lt;/a> solutions that measure Infrastructure Response Time. We expect Infrastructure &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?cat=9" target="_blank" rel="noopener"
>Performance Management&lt;/a> solutions from vendors like &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=1603" target="_blank" rel="noopener"
>Akorri&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=6234" target="_blank" rel="noopener"
>CA&lt;/a> Technologies (&lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=6234" target="_blank" rel="noopener"
>CA&lt;/a> Virtual Assurance), &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=6476" target="_blank" rel="noopener"
>Virtual Instruments&lt;/a>, and &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=3551" target="_blank" rel="noopener"
>Xangati&lt;/a> to form the foundation layer of whatever will replace BSM.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Application will now get moved from cluster to cluster and ultimately from data center to data center (private cloud – hybrid cloud – public cloud). APM solutions will need to track the applications no matter where they go, and seamlessly work across different IP networks. Leading virtualization aware APM solutions like those from &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=4724" target="_blank" rel="noopener"
>AppDynamics&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2416" target="_blank" rel="noopener"
>BlueStripe&lt;/a>, and &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=1505" target="_blank" rel="noopener"
>New Relic&lt;/a> meet these needs today and will likely form the APM layer of whatever replaces BSM.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>All of the above together combine to create one new result for Systems Management. That new result is that in the general case it will be impossible to deterministically do root cause in a dynamic environment. This was explored in detail in this &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?p=5915" target="_blank" rel="noopener"
>post&lt;/a>.&lt;/p>
&lt;p>&lt;strong>The Significance of the Integrien Acquisition&lt;/strong>&lt;/p>
&lt;p>The Integrien acquisition by &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2983" target="_blank" rel="noopener"
>VMware&lt;/a> is significant because it means that &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2983" target="_blank" rel="noopener"
>VMware&lt;/a> has recognized that only a dynamic, statistical, self-configuring,  and self-learning approach can keep up with the rate of change in these new dynamic IT environments. The self-learning approach simply means that you feed the system the metrics that get collected about the system and it figures out which ones are important, how the metrics are related to each other, and lets you know when anomalies have occurred.&lt;/p>
&lt;p>This acquisition is all the more significant because this is not garden variety technology. There have only ever been three companies this this space. ProactiveNet was acquired by BMC a few years ago. &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=7123" target="_blank" rel="noopener"
>Netuitive&lt;/a> has been around since the late 1990′s and it took the company until the mid 2000′s before the product had matured into something that really just worked when you plugged it in. Integrien is a fairly recent entry in this field and is now part of &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2983" target="_blank" rel="noopener"
>VMware&lt;/a> – which leaves &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=7123" target="_blank" rel="noopener"
>Netuitive&lt;/a> as the only remaining independent player.&lt;/p>
&lt;p>&lt;strong>The New Dynamic BSM – Service Assurance&lt;/strong>&lt;/p>
&lt;p>Since the old BSM is dead due to a brittle and difficult to update technology approach it is reasonable to ask what will replace it. The answer is most likely a set of Infrastructure &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?cat=9" target="_blank" rel="noopener"
>Performance Management&lt;/a> tools (&lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=1603" target="_blank" rel="noopener"
>Akorri&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=6234" target="_blank" rel="noopener"
>CA&lt;/a> Virtual Assurance, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=6476" target="_blank" rel="noopener"
>Virtual Instruments&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=3551" target="_blank" rel="noopener"
>Xangati&lt;/a>) integrated with a set of next generation APM tools (&lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=4724" target="_blank" rel="noopener"
>AppDynamics&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=2416" target="_blank" rel="noopener"
>BlueStripe&lt;/a>, &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=1505" target="_blank" rel="noopener"
>New Relic&lt;/a>) vis these self learning technologies. When this occurs, we will have a system that adapts on its own to changing conditions in the environment leaving IT staff available to interpret results (and not raw monitoring data). We will also have taken an important step towards dynamic service assurance which was discussed in detail in this &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?p=5472" target="_blank" rel="noopener"
>post&lt;/a>.&lt;/p>
&lt;p>&lt;strong>Understanding and Evaluating these Technologies&lt;/strong>&lt;/p>
&lt;p>For most IT professionals either they or someone on their staff can digg in and understand how the technologies that they use work. However unless you have an advanced degree in statistics and/or mathematics you are not going to be able to dig an and decide for yourself based upon how these products work which one you should choose. Rather what you should do is apply the following criteria in making your selection:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Decide exactly what you want the product to do for you. These products are extremely flexible. You can feed them every alarm that is generated by all of your monitoring solutions and let them sort out the good ones from the bad ones. Or you can feed them revenue per minute for one key business application and let them figure what causes degradations in revenue per minute.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make sure that the product has connectors to what you already use to collect metrics from your systems. These products are not in the data collection business (with some exceptions). They rely upon other products to collect data from them. They must therefore be interfaced with your existing monitoring solutions.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>How hands off and plug and play will the product be in practice? This is the key criteria to the long term value of such a solution to your enterprise. Previous attempts at statistical approaches (neural nets) failed because the product had to be “retrained” every time conditions changed. Make sure that the product you select can automatically select and weight the inputs that it bases decisions off of and these these decisions are automatically updated over time. Self-learning needs to be a continuous thing, not just a one time or periodic thing.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make sure that the product can handle time based (time series) as well as event based data. Performance metrics tend to be time based, but many performance problems are caused by configuration changes which are events. Make sure that the product can cross-correlate configuration change events with performance degradations.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Carefully assess the scale of the solution. This means how many inputs can the solution take per unit of time. Right now most of these solutions operate at 15 minute or 5 minute intervals. Monitoring a dynamic system may require intervals of 10 or even 5 seconds (or perhaps even real time continuous streams of monitoring data).&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Summary&lt;/strong>&lt;/p>
&lt;p>Self-learning &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?cat=9" target="_blank" rel="noopener"
>performance management&lt;/a> solutions like Integrien and &lt;a class="link" href="http://www.virtualizationpractice.com/blog/?page_id=7123" target="_blank" rel="noopener"
>Netuitive&lt;/a> are going to be absolutely an essential part of the migration to dynamic data centers and IT as a Service. Once these dynamic data centers scale out to the thousands of applications in a typical enterprise, and scale up to address the most performance critical applications, the rate of change in the environment will be too high for legacy tools and manual administration to be able to keep. up. These automated self-learning approaches will be the only way in which IT Operations will be able to stay on top of these new environments while staying within staffing and budget constraints.&lt;/p></description></item><item><title>Remedy Server Group及负载均衡配置参考步骤</title><link>https://martinliu.cn/2010/08/09/remedy-lb-midtier-server-group-configure/</link><pubDate>Mon, 09 Aug 2010 01:08:31 +0000</pubDate><guid>https://martinliu.cn/2010/08/09/remedy-lb-midtier-server-group-configure/</guid><description>&lt;p>&lt;a class="link" href="http://martinliu.cn/2010/08/remedy-lb-midtier-server-group-configure.html/remedyitsmarch" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/08/RemedyITSMArch-253x300.jpg"
loading="lazy"
>&lt;/a>上图为大型用户环境下 Remedy ITSM 的部署架构，作为本安装步骤参考模型。所不同的是，如下配置步骤只应用了一个最上面的负载均衡器，每个 Web 对应连接一个 ARS 服务器，简化掉了中间放在 ARS 前的负载均衡器。&lt;/p>
&lt;p>&lt;strong>第一步&lt;/strong> 安装前的准备工作。
确定 Remedy ARS 的服务别名，例如“AtriumCMDB”。在所有的 Web 服务器（Mid-tier 所安装的服务器）的 host 文件中加入一条 Ip 地址解析，例如：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>此 ARS 服务别名指向的是该 Web 服务器所对应的 ARS 服务器，例如：Web1 中 AtriumCMDB 对应的 ip 为 ARS1，Web2 对应 ARS2，Web3 对应 ARS3，以此类推。&lt;/p>
&lt;p>&lt;strong>第二步&lt;/strong>安装第一台 ARS 服务器
默认所有的 ARS 都安装了数据库客户端程序，如果是 Oracle 数据库，ARS 上的客户端程序的大小版本号必须和远程数据库的大小版本号完全一致。Windows 平台的 Oracle 客户端只支持 32 位的程序。在所有 ARS 服务器的 host 文件中加入一条 Ip 地址解析，例如：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>此 IP 地址为每台 ARS 自己的对外提供 ARS 服务的 IP。ARS 上安装完 JDK 之后，开始安装 ARS，安装过程中服务器别名输入 AtriumCMDB，其他的选项都按需要配置，所有有关服务器端组件、服务端口、密码、安装路径的信息都要做详细记录，用来安装 Server Group 中其他成员使用。安装完第一台服务器的 ARS 之后，申请 Remedy License，打 License，包括其他所有 CMDB、ITSM 相关应用模块的 License，打完 License 后导出成文件备用。ARS 安装成功之后，顺序安装其他应用，顺序时 CMDB 》ITSM  其他。安装完毕后，通过 Remedy User 来确认所有应用功能是否正常。&lt;/p>
&lt;p>**第三步 **配置第一台 ARS 服务器为 Server Group 中的管理服务器
配置方法参照，ARS Configuration Guide 中的 Server Group 的相关章节。配置完毕之后打开 Server Group 的 Log，从启动 ARS 服务之后，查看该 Log 看 Server Group 工作是否正常。&lt;/p>
&lt;p>&lt;strong>第四步&lt;/strong> 安装 Server Group 中的成员 ARS 服务器
准备工作参考第一台 ARS 服务器。运行 ARS 安装程序，选择 Server Group，选择输入 AtriumCMDB 别名，选择共享的数据库，其他参数与第一台保持一致。安装完毕之后。使用 ARS 自带的 Sample 应用新增一个 city，在 ARS1 上查询 ARS2 上新增的记录。同样参考的 Server Group 的相关章节，对 ARS2 进行配置。在 ARS2 上查看 Server Group 的日志，确认该 ARS 已经加入了以第一台 ARS 为管理服务器的群集中。为第二台 ARS 服务器打 License。在确认第二台 ARS 服务器成功加入之后，安装 CMDB 应用。安装完毕之后，在第二台 ARS 服务器上，使用 Remedy User 客户端，打开 CMDB 的相关表单进行新增和查询操作；然后在 ARS1 上检查操作结果，保证两边一致。安装 ITSM：直接把第一台 ARS 服务器的 ar.cfg 文件覆盖到第二台 ARS 的 ar.cfg 上，一定要修改第一台 ARS 服务器主机名的哪一行，把它修改为第二台 ARS 的主机名。复制第一台 ARS 的 ITSM 安装目录到第二台 ARS 的相同路径中，重启 ARS 服务。查看 arerror.log 文件看看 ARS 启动的是否正常。在第二台 ARS 上使用 Remedy User 确认 ITSM 应用是否工作正常，如果一切工作正常，则第二台 ARS 服务器安装完毕。按照相同的方式安装其他的 ARS 服务器。&lt;/p>
&lt;p>&lt;strong>第五步&lt;/strong> 配置每台 ARS 的 ranking
按照 ARS Configuration Guide 中的 Server Group 的相关章节配置每台 ARS 服务器处理不同后台工作流的 ranking。&lt;/p>
&lt;p>&lt;strong>第六步&lt;/strong> 安装配置所有 Web 服务器的 Remedy Mid-tier
安装 Remedy Mid-tier 软件，都指向相同的 ARS 服务别名 AtriumCMDB，当然该别名被解析为它所对应的 ARS 服务器的 IP 地址。使用浏览器测试每台 Web 服务器，保证 Remedy Mid-tier 都能正常工作。&lt;/p>
&lt;p>&lt;strong>第七步&lt;/strong> 配置 F5 负载均衡
配置 F5 的分发策略，按不同 ARS 服务器的用途，来分别不同的用户请求。考虑管理和接口功能的 ARS 负担少量的用户交互。开发一个 jsp 的程序部署在 Mid-tier 的 shared 目录中，用它来判断 Web 所对应的 ARS 的可用性，以此作为唯一判断条件来分发用户请求给可用的 web 服务器。&lt;/p></description></item><item><title>OTRS 3.0.0 beta1 发布</title><link>https://martinliu.cn/2010/08/03/otrs-300-beta1/</link><pubDate>Tue, 03 Aug 2010 05:04:46 +0000</pubDate><guid>https://martinliu.cn/2010/08/03/otrs-300-beta1/</guid><description>&lt;p>&lt;img src="http://www.otrs.com/uploads/tx_templavoila/products_overview_helpdesk.jpg"
loading="lazy"
>这个产品被重命名为 OTRS Help Desk，从名字上看出它变的更加成熟，更加符合 ITIL 了。OTRS 界面是很土的，比 RT3 差很多，一直以来我都被它完善的 ITIL 概念所吸引而无暇顾及它丑陋的界面，这个版本将在界面和新的功能上给我们更多惊喜。下面是 3.0 时代的第一个 release notes，偷懒一下，英翻中的工作让 google 代劳了。&lt;/p>
&lt;p>&lt;a class="link" href="http://lists.otrs.org/pipermail/announce/2010/000133.html" target="_blank" rel="noopener"
>RN 原文：http://lists.otrs.org/pipermail/announce/2010/000133.html&lt;/a>&lt;/p>
&lt;p>时间已经到了 一个全新的欢迎开放源码 OTRS 的世界领先的新一代帮助台解决方案。新的 OTRS 的帮助台 3.0 主要版本附带了一个全新的图形用户界面上完全重新设计信息的基 础
架构。您将受益于更快获取相关信息，具有较高的透明度和增加在日常工作效率。 OTRS 的帮助台 3.0 设计的基础 上与来自不同行业的电力用户访问种类繁多以及在与用户体验领先的专业机构密切合作。今天我们很自豪地介绍美妙的结果：&lt;/p>
&lt;p>最值得关注的新功能如下：&lt;/p>
&lt;p>（1）用户为中心的图形用户界面，在一个戏剧 性的转变从结果重新设计一个全面的，但一个更强大的静态和动态的应用程序使用的，类似的 Ajax，XHTML 和优化的最先进的技术状态的 CSS。&lt;/p>
&lt;p>（2）新工单和文章指示器 - 这一新的功能已被两票和文章一级执行。它允许在一个表面上是为代理人在 票或任何更新的文章水平检查，以检查新的和未读文章。您将受益于增加透明度和减少响应时间。&lt;/p>
&lt;p>（3）优化全 文搜索 - 新的搜索功能，您可以灵活定制的方式来浏览信息库。选择新的搜索功能提供了从单一的搜索字符串的搜索范围，复杂的多字符串布尔搜索行动，包括 各经营者。您受益于完全可定制的搜索根据您的需要。&lt;/p>
&lt;p>（4）工单缩放视图 - 关于 Ajax 技术让代理商来显示实时链接的信息结构复杂，同时让代理商目前的工作环境为基础的重新设计。这些公司会受益于增加的方向，提高工 作流程效率。&lt;/p>
&lt;p>（5）全局工单一览 - 知名的 OTRS2.4 全局工单概述已经得到了优化，以达到增加跨活动。根据不同的使用情况和您的代理人的喜好，他们可以轻松地更改机票概览布局根据自己的特殊需要。期权是小型，中型和大型，每个细节提供了不同程度的信息。&lt;/p>
&lt;p>（6）可用性 - 包括重新设计的共同普及标准条 WCAG 和炜也让弱能 ARIA 的用户能够更好地互动与 OTRS 的服务台。美国康复法案第 508 条已经实现。&lt;/p>
&lt;p>（7）新客户界面 - 客户网络前端可集成到您的组织机构内部网，并充分考虑重新设计的桌面帮助系统集成。&lt;/p>
&lt;p>（8）存档功能 - OTRS 的 3.0 现在提供一个新的归档功能。有了你分开存档受益于搜索，并增加结果显示花了时间却缩短。&lt;/p>
&lt;p>Google 的翻译效果不佳，请直接看官方发布说明。另外此版本为 beta 版本，OTRS 并不建议用于生产环境。&lt;/p></description></item><item><title>BMC课程通知: BMC Remedy AR 7.5 管理员培训</title><link>https://martinliu.cn/2010/07/30/bmc-training-schedule01/</link><pubDate>Fri, 30 Jul 2010 06:28:19 +0000</pubDate><guid>https://martinliu.cn/2010/07/30/bmc-training-schedule01/</guid><description>&lt;p>&lt;a class="link" href="http://www.bmc.com/education/learning-paths/lp-itil.html" target="_blank" rel="noopener"
>&lt;img src="http://sabacert.bmc.com/images/education_banner_Adv.ITIL.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>课程适用于 Remedy AR 管理员和开发人员，讲授 AR 系统的功能、架构、日常运维和创建应用。 学员可以选择课后参加上机考试，获得&lt;a class="link" href="http://www.bmc.com/education/certification-programs/89788539-1956.html" target="_blank" rel="noopener"
>BMC Certified Administrator: BMC Remedy AR System 7.5&lt;/a>认证。不参加考试的学员将会获得结课证书 &lt;strong>&lt;a class="link" href="http://inter.viewcentral.com/events/cust/catalog.aspx?event_id=359&amp;amp;cid=bmc&amp;amp;pid=1" target="_blank" rel="noopener"
>点 击查看详情&lt;/a>&lt;/strong>&lt;/p>
&lt;p>&lt;strong>课程目标&lt;/strong>&lt;/p>
&lt;p>认识 AR System 7.5 的用途和优势
认识 AR System 7.5 的架构
使用 Remedy User 和 Web 浏览器创建和查询请求
使用 Remedy User 和 Web 浏览器创建 AR 系统报告
使用 BMC Remedy Alert 和 Web 接收通知
描述 BMC Remedy Administrator 工具的基本维护任务
了解 AR 系统的访问控制概念
了解不同的 AR System 角色
理解 AR System 的系统架构
了解 AR System 的开发工具
权限管理和 AR System 许可管理
使用 Administration Console 执行统一的管理任务.
使用 Developer Studio 创建 AR System 对象
创建 AR System 表单, 控件和 菜单来满足业务需求
创建 AR System active links
创建 AR System filters
创建基于时间的 escalations
定制一个 web 的应用
使用 log 日志来评估性能和识别性能问题
了解 AR System 最佳实践&lt;/p>
&lt;p>参加前提：无
授课语言: 中文
培训价格: 7500 元/人 （BMC 合作伙伴价格 5250 元/人）
认证考试价格：3500 元/人 （可选）&lt;/p>
&lt;p>日程：
北京：8 月 16 日- 20 日
上海：8 月 23 日- 27 日&lt;/p>
&lt;p>联系我们:
010-85183688-1883
&lt;a class="link" href="mailto:Yuan_yuan@bmc.com" >Yuan_yuan@bmc.com&lt;/a>
&lt;a class="link" href="mailto:AP_education@bmc.com" >AP_education@bmc.com&lt;/a>&lt;/p></description></item><item><title>ITIL v3 MindMap脑图</title><link>https://martinliu.cn/2010/07/29/itil-v3-mindmap/</link><pubDate>Thu, 29 Jul 2010 03:25:35 +0000</pubDate><guid>https://martinliu.cn/2010/07/29/itil-v3-mindmap/</guid><description>&lt;p>&lt;a class="link" href="http://martinliu.cn/2010/07/itil-v3-mindmap.html/6a00d83451f61c69e20133f2777037970b-800wi/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/07/6a00d83451f61c69e20133f2777037970b-800wi.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>下载 ITIL v3 核心概念介绍，脑图版：&lt;a class="link" href="http://www.box.net/shared/fve6vvasvt" target="_blank" rel="noopener"
>http://www.box.net/shared/fve6vvasvt&lt;/a>&lt;/p>
&lt;p>这份资料对于新手学习，或者 ITILv3 老手做参考都比较适合。为了为一些朋友突破一下语言的障碍，我把它翻译成了简体中文版，使用开源软件&lt;a class="link" href="http://freemind.sourceforge.net/" target="_blank" rel="noopener"
>FindMind&lt;/a>进行的翻译。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/2010/07/itil-v3-mindmap.html/itil-v3-mindmap-2/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/07/itil-v3-mindmap-300x222.jpg"
loading="lazy"
>&lt;/a>&lt;a class="link" href="http://www.box.net/shared/m2rjcsereo" target="_blank" rel="noopener"
>文档下载&lt;/a> 正在翻译中，稍后提供中文完整版本。翻译状态：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>服务策略 100%&lt;/p>
&lt;/li>
&lt;li>
&lt;p>服务设计 100%&lt;/p>
&lt;/li>
&lt;li>
&lt;p>服务转换 0%&lt;/p>
&lt;/li>
&lt;li>
&lt;p>服务运往 0%&lt;/p>
&lt;/li>
&lt;li>
&lt;p>服务持续性改进 0%&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Make Cacti more easier</title><link>https://martinliu.cn/2010/07/23/cacti-easier/</link><pubDate>Fri, 23 Jul 2010 01:46:33 +0000</pubDate><guid>https://martinliu.cn/2010/07/23/cacti-easier/</guid><description>&lt;p>&lt;img src="http://www.cacti.net/images/cacti.png"
loading="lazy"
>Cacti 是我最喜爱的一个网管软件之一。网站&lt;a class="link" href="http://cactiez.cactiusers.org/" target="_blank" rel="noopener"
>http://cactiez.cactiusers.org/&lt;/a> ；该网站的主人吧 Cacti 嵌入到了 Linux 的安装光盘中，实现了 Cacti 的一键式安装，这正是我所关注的关于开源应用的重要的一个步骤。我称之这是在解决开源软件应用的“last mile”问题。开源软件的潜在用户往往有这样几个特点：&lt;/p>
&lt;ul>
&lt;li>技术力量弱，有些可能根本就不知道什么是 Linux，什么是 open source&lt;/li>
&lt;li>需求相对明确和简单&lt;/li>
&lt;li>无法获得中文的技术支持和培训&lt;/li>
&lt;/ul>
&lt;p>CactiEz 让人能在 30 分钟之内上手开始使用 Cacti，从根本上解决了整套软件的安装和配置工作。&lt;/p>
&lt;p>英文版下载地址：&lt;a class="link" href="http://cactiez.cactiusers.org/" target="_blank" rel="noopener"
>http://cactiez.cactiusers.org/&lt;/a>&lt;/p>
&lt;p>中文版下载地址：&lt;a class="link" href="http://linux.chinaunix.net/bbs/thread-1049886-1-1.html" target="_blank" rel="noopener"
>http://linux.chinaunix.net/bbs/thread-1049886-1-1.html&lt;/a>&lt;/p></description></item><item><title>规划CMDB数据填充-003</title><link>https://martinliu.cn/2010/07/20/cmdb003/</link><pubDate>Tue, 20 Jul 2010 11:35:44 +0000</pubDate><guid>https://martinliu.cn/2010/07/20/cmdb003/</guid><description>&lt;p>From 《Step by step to build a CMDB》步骤 17-规划 CMDB 数据填充&lt;/p>
&lt;p>本文描述填充过程的任务 3 到任务 4：&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/cmdb/ci-data-mapping.png"
loading="lazy"
alt="ci-data-mapping"
>&lt;/p>
&lt;p>&lt;strong>任务 3 映射 CI 和数据源&lt;/strong>
现在拿出您的 CI 清单，并把每一类 CI 与具有相关信息的数据源映射起来。一个简单的电子数据表格，像图 17.2 一样的就足够了。有更复杂数据需求的大一点的企业可能需要多个数据页或者通过 CI 分类来连接到不同的数据页。&lt;/p>
&lt;p>这项工作的最终目标不仅是识别用以填充 CMDB 数据源，而且还识别了流程和平台的接触点，有些平台对数据填充是有影响的。这项工作也是至关重要，用来定义数据调和规则，定义数据优先度，这些会在下面的步骤，任务 7“建立调和规则”中用的。
工具映射如下图 17.2 所示，包括了每一个 CI 类，相关的属性，相关的关系数据，和数据源。
图 17.2 Ci 和数据源之间的对照关系图样例
您可能会发现一些 s 数据源之间的重叠，特别是 CI 库存清单的属性数据。这些数据通常包括唯一物理特性和 CI 的地点的说明 ，例如：型号、序列号、地点和所有者。此信息可能被存储在其他多个地方，它们也可用于 CI 数据填充的来源和日常维护的来源。
多种的资产和库存清单数据来源可能包括如下：&lt;/p>
&lt;ul>
&lt;li>审计（资产清单或者配置发现数据库；无代理和有代理方式）&lt;/li>
&lt;li>资产管理系统&lt;/li>
&lt;li>采购系统和许可证管理&lt;/li>
&lt;li>财会系统（采购或者收货）&lt;/li>
&lt;li>合同管理系统&lt;/li>
&lt;li>变更管理系统&lt;/li>
&lt;li>其他财务应用和系统&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>任务 4 访问数据源环境&lt;/strong>
为了确保数据质量，你应该访问所有的数据源环境，而不仅仅只是 CMDB，还包括连接工具和相关技术，要逐一访问查看每一个数据源。在这里，“进来的是垃圾，出去的就是垃圾”这个俗语是适用的。CMDB 项目的成功可能依赖于对系统或者基础架构的更新，以适应网络流量和数据量，还依赖于确保每一个数据源的数据质量。&lt;/p>
&lt;p>当你规划 CMDB 数据填充的时候，要自问这样几个问题，是有关外部映射数据源质量的：&lt;/p>
&lt;ul>
&lt;li>现在那些信息在那里、怎样被存储的？ &amp;ndash;数据库、电子表格、Word 文档？&lt;/li>
&lt;li>当前环境中有没有审计（发现）工具、软件分发、配置管理或者采购系统，用来自动的跟踪和存储这些信息？ 或者数据时被手工地收集和更新的？&lt;/li>
&lt;li>这些系统是基于开放标准还是私有技术的？&lt;/li>
&lt;li>这些系统的厂商有没有标准化的工具？或者 CMDB 厂商？&lt;/li>
&lt;li>需要被继承的数据源的物理位置在那里？&lt;/li>
&lt;li>在 CMDB 和数据源之间，通讯的方式是双向的还是单向的？&lt;/li>
&lt;/ul>
&lt;p>还要考虑有关映射数据源性能相关的问题：&lt;/p>
&lt;ul>
&lt;li>就当前的数据源来说，现实的性能、容量和可靠性是怎样的？&lt;/li>
&lt;li>系统上当前的活动状况怎样？&lt;/li>
&lt;li>活动用户数&lt;/li>
&lt;li>其他并发继承此数据源的工具&lt;/li>
&lt;li>备份、病毒扫描、报表或者数据挖掘的日程&lt;/li>
&lt;li>审计工具（配置发现或者库存清单）扫描或者排队日程&lt;/li>
&lt;li>其他任何将影响性能的事情&lt;/li>
&lt;li>硬件和当前环境是不是能完全满足今后数据迁移所需要的附加工作量和空间需求？以及满足对于以后的日常数据同步？有没有对今后几年里增长率有做过计算？&lt;/li>
&lt;li>是不是需要考虑要满足什么约束或者特殊权限？&lt;/li>
&lt;li>厂商是否在与他们数据库集成方面有建议的最佳实践？（使用热备的生产机来降低作业压力）&lt;/li>
&lt;li>CMDB 周边的数据集和连接技术是什么？&lt;/li>
&lt;li>网络环境中物理的限制（带宽、距离等）是否会有影响？&lt;/li>
&lt;li>当前的版本是多少？在以后的六个月或者一年里是否有升级的计划？有哪些好处？&lt;/li>
&lt;li>为当前的解决方案是否得到了足够的资料来负责架构、排错以及连接系统的维护？&lt;/li>
&lt;/ul>
&lt;p>通过尽早的回答这些问题，就可以避免后续可能出现的性能问题，那些问题会影响项目的成功。如果数据源不太可靠，而且数据质量和性能方面是有问题的，这个时候，可以回到这些数据的关键利益相关者那里，与他们讨论，并确定这是否会影响到使用方面的关键需求。如果没有，需要把这部分数据需求从 CMDB 项目计划的第一阶段中展示放弃。这里最重要的是第一阶段的合理部署，实施结果能够获得用户全面的适应。然而，如果这些数据依然是比较关键的需求，那么需要与数据所有者，和收益者各方进行沟通，并引起各方的高度重视，共同确定一个解决方案。&lt;/p></description></item><item><title>规划CMDB数据填充-002</title><link>https://martinliu.cn/2010/07/20/plan-cmdb-population-002/</link><pubDate>Tue, 20 Jul 2010 11:25:18 +0000</pubDate><guid>https://martinliu.cn/2010/07/20/plan-cmdb-population-002/</guid><description>&lt;p>From 《Step by step to build a CMDB》步骤 17-规划 CMDB 数据填充&lt;/p>
&lt;p>本文描述填充过程的任务 1 到任务 2：&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/cmdb/cmdb-data-sources-re.png"
loading="lazy"
alt="cmdb-data-sources-re"
>&lt;/p>
&lt;p>&lt;strong>任务 1  再次回顾 CMDB 范围&lt;/strong>
现在进行现实检验。你能否确实交付在第 2 阶段即“定义需求和创建 IT 服务模型蓝图”中定义的 CI 范围涉及的相关数据？你在 CI 数据一旦交付以后，能否有足够的资源来维护整个系统和所有数据？这些都是重要的问题，因为您所选择的 CMDB 解决方案，可能很容易地就超越了您需要的范围，超出了你可以能容易维护的程度。&lt;/p>
&lt;p>在规划 CMDB 数据填充时，您的思想应该是“少即是多“。先学会走再跑。让 CMDB 的首次推广得到充分验证后在考虑扩大范围。您需要帮助保持 CMDB 的团队和 CMDB 数据用户的积极性。同时避免项目范围的蔓延，否则可能破坏的实施的效果，以及用户对新的解决方案的接受度。&lt;/p>
&lt;p>请谨记这样几个考虑因素，从而来帮助您始终专注于那些核心需求上，并能对关键的限制作出反应：&lt;/p>
&lt;ul>
&lt;li>成本 – 每个人都必须面对业务现实，包括预算和费用的现实。因此，在您的 CMDB 项目预算范围里，对主要需求排列优先级。如果出现新的想法，那么也只是在新的预算来下了以后才考虑。&lt;/li>
&lt;li>时间 &amp;ndash; 您可能需要在给定的时间内实施 CMDB，来使您企业在此方面的业务需求得到满足，如 Sarbanes-Oxley 法规，或支持一个非常关键的新流程。当您计划了 CI 数据填充的顺序后（后面介绍的这一步），不仅要对 CI 数据排优先级，而且还要明确时间的限制。&lt;/li>
&lt;li>实用性 – 如果没有足够的资源用来实施和维持 CMDB，以满足 CMDB 要求，那么您可能需要缩小实施范围，以便您可以在您实际有限的资源里运作项目。你还可以考虑分两个阶段进行实施，把非关键的要求放到第二个阶段中。&lt;/li>
&lt;li>外部强加的优先事项 – 有些业务的运作，例如企业治理、数据保护和信息自由，可能会影响您既定的优先次序。您可以通过分阶段实施 CMDB 数据填充来减少外部因素的影响。如果你没有从一开始就计划足够的时间来达成最后期限，那么你可以尝试投入更多的资源来克服时间上的限制。然而，还要意识到，以后你要申请更多的资源，没有资源的保证，你可能无法充分管理好项目。&lt;/li>
&lt;li>所有权 – 有时 IT 资产的负责人并不属于 IT 组织。如果资产所有者决定不参与的 CMDB，这会严重限制了 CI 数据内容的提供。您可以提供 CMDB 部分功能的有限的访问给他们，用来消除他们顾虑，并参与进来。&lt;/li>
&lt;li>地区 – 地理区域上的边界，可能会限制建立企业范围的 CMDB。由于地理或行政上可能的边界，我们可能听过“最好再也不要从总部传来这样神经质数据库方案”。最好预防这种情况的办法是，尽可能早的让所有地区的相关人员参与到 CMDB 项目里来。&lt;/li>
&lt;li>组织架构 – 很多企业把 IT 划分成为清晰地、各自为政的独立部门，通过这种方式来对 CMDB 里的不同范围负责。例如：通信部门的人可能是一个单独的组织结构，他们可能拒绝参与到项目中来，因为他们觉得这超出了他们的控制范围。这时候就要让其他的 IT 组织参与其中，让每个人都知道谁是项目负责人。&lt;/li>
&lt;/ul>
&lt;p>当你计划你的 CMDB 数据填充的时候，越能专注于关键受益人的需求，就越能够达成项目的业务目标，就越能让您的项目顺利。您需要就已经确定的 CMDB 范围，与所有的利益方沟通它可能的影响和效果。收集他们的反馈，并对有必要方面做进一步讨论。&lt;/p>
&lt;p>&lt;strong>任务 2 识别 CI&lt;/strong>
使用在第 15 步即“设计 IT 服务模型蓝图”中设计的 IT 服务模型蓝图为基础，来生成用于 CMDB 数据填充的 CI 以及相关属性和关系数据的清单。这个清单的细节应该到数据字段级别，以便，你能够识别并且映射一个或者多个数据源到特定的 CI 数据。
例如，如果你把一个实际的服务器 CI 的属性和关系数据都列出清单，你就可以找出一些现有的能提供属性数据的数据源，可能包括库存管理的数据库和发现或者网络管理工具。但是另外一些数据字段可能没有现成的数据源。你将在第 18 步“选择自动化 CMDB 数据填充工具”中用到以上差距分析。或者您可能决定使用手工的方式来填充和更新这个字段，这里还需要仔细的考虑到数据的负责人，和在 21 步“建立 CI 生命周期管理流程”中需要支持的流程。
至此，你需要专注于用来满足项目目标的要求。在步骤 11 到 14，你定义了与其他流程的结合点，明确的 CI 需求。专注于那些能直接对流程收益人产生直接影响的 CI 数据。&lt;/p></description></item><item><title>RT3 Request Tacker或让你摆脱束缚</title><link>https://martinliu.cn/2010/07/18/rt3-request-tracker/</link><pubDate>Sun, 18 Jul 2010 13:54:54 +0000</pubDate><guid>https://martinliu.cn/2010/07/18/rt3-request-tracker/</guid><description>&lt;p>&lt;a class="link" href="http://bestpractical.com/rt/screenshots.html" target="_blank" rel="noopener"
> &lt;img src="http://bestpractical.com/static/images/screenshots/rt/3.8/homepage.png"
loading="lazy"
alt="RT 3.8.8 homepage"
> &lt;/a>
What&amp;rsquo;s new in 3.8+?&lt;/p>
&lt;ul>
&lt;li>清晰易用的图形界面&lt;/li>
&lt;li>仪表板 Dashboards&lt;/li>
&lt;li>流程单关系图 Ticket relationship graphs&lt;/li>
&lt;li>与 PGPemail 无缝集成 Seamless PGP support for email&lt;/li>
&lt;li>富文本编辑 Richtext editing (WYSIWYG)&lt;/li>
&lt;li>预定义用户首选项 Per-user preferences for common options&lt;/li>
&lt;li>单据按日历 feed：Calendar feeds for ticket due dates&lt;/li>
&lt;li>标记单据 Bookmarking tickets&lt;/li>
&lt;li>新的邮件设置 New email delivery settings&lt;/li>
&lt;li>更容易的升级工具 Easier upgrade tools&lt;/li>
&lt;li>性能提高 Loads of performance improvements and bug fixes&lt;/li>
&lt;/ul>
&lt;p>发现 RT 比 OTRS 的界面好的太多了。不过这俩比较起来，OTRS 更正式，更符合 ITIL，主要是它有 ITSM 模块，这个模块里面内置了 IM，PM，CM 和 SLA 管理，值得一提的是它也包括配置管理模块。不过 OTRS 的界面和 RT 比起来就不是难看一点了。初步体验了 RT 一下，主要感觉是，界面太直观了，所有方便操作近在咫尺，系统的易用性降低了使用和配置的复杂性。对于不追求 ITIL 的中小企业，应该很值得试试 RT。&lt;/p></description></item><item><title>OCS inventory NG 两三事</title><link>https://martinliu.cn/2010/07/16/ocs-inventory-ng/</link><pubDate>Fri, 16 Jul 2010 19:03:17 +0000</pubDate><guid>https://martinliu.cn/2010/07/16/ocs-inventory-ng/</guid><description>&lt;p>&lt;img src="http://www.ocsinventory-ng.org/uploads/images/why-ocs.png"
loading="lazy"
>头等大事是有关于 OCSNG 很快就要出 UTF8 多语言支持版的 Windows 采集代理程序。新闻如下：
** 新版 windows 采集代理被彻底重写，它将包括下面的新特性：**&lt;/p>
&lt;ul>
&lt;li>全 Unicode 代理，多语言 UTF-8 支持&lt;/li>
&lt;li>Native 32 and 64 bits agent&lt;/li>
&lt;li>BIOS AssetTag 收集&lt;/li>
&lt;li>硬盘序列号收集&lt;/li>
&lt;li>部署返回码收集&lt;/li>
&lt;li>全 HTTPS 支持&lt;/li>
&lt;li>Socks 4 、5 HTTP 代理支持&lt;/li>
&lt;li>FTP, FTPS 和 SMB 包部署支持&lt;/li>
&lt;li>二进制插件支持&lt;/li>
&lt;/ul>
&lt;p>另外，是一本新书的发布，这是我见到的第一本系统介绍 OCSNG 的图书。&lt;a class="link" href="http://www.packtpub.com/ocs-inventory-ng-1-02-it-inventory-and-resource-management/book?utm_source=martinliu.cn&amp;amp;utm_medium=bookrev&amp;amp;utm_content=blog&amp;amp;utm_campaign=mdb_003818" target="_blank" rel="noopener"
>&lt;img src="https://www.packtpub.com/sites/default/files/imagecache/productview/1100_MockupCover_0.jpg"
loading="lazy"
>&lt;/a>可能是由于我写过一些相关的 post，该书的出版社发邮件给我，想请我 review，并写写书评。处于对 OCSNG 和 GLPI 的喜爱，忍不住诱惑，就答应了。很快的我得到了这本书的电子版。虽然没有时间看完，浏览了几章后，还是可以说这本书写的是非常实用。特别是对系统的安装、配置、部署和使用都从系统管理员的角度写的非常到位。书上没什么废话，文字写的比较随意，很易懂的随意。可喜的是该书还捎带着把 GLPI 也给介绍了，包括如何与 OCSNG 做集成配置，以及 GLPI 的主要功能说明。对于这种偏门的开源软件系统能有如此细致使用的介绍实属难得，更何况我对 OCSNG 和 GLPI 的网站文档本身就不敢恭维。这里提供一个样章供参考 &lt;a class="link" href="https://www.packtpub.com/sites/default/files/1100-chapter-1-introduction-to-it-inventory-and-resource%20.pdf" target="_blank" rel="noopener"
>&amp;ldquo;Introduction to IT Inventory and Resource Management&amp;rdquo;&lt;/a>&lt;/p>
&lt;p>最后，还是期待新版 OCSNG 的 Window 采集代理程序能早点发布吧。期望它发布之时我有时间做这样一个虚机，以便分享给各位感兴趣的人。规划如下：&lt;/p>
&lt;ul>
&lt;li>基于 Fedora 10&lt;/li>
&lt;li>安装 OCSNG_UNIX_SERVER-1.3.2. + glpi-0.78-RC2&lt;/li>
&lt;li>做一定系统的基本优化，配置 OCSNG 和 GPLI 的集成&lt;/li>
&lt;li>期望该虚机能应用于实际的网络环境中&lt;/li>
&lt;/ul></description></item><item><title>Upgraded to Wordpress 3.0</title><link>https://martinliu.cn/2010/06/20/upgraded-wordpress-30/</link><pubDate>Sun, 20 Jun 2010 11:13:44 +0000</pubDate><guid>https://martinliu.cn/2010/06/20/upgraded-wordpress-30/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/06/wp3.0.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/06/wp3.0.png"
loading="lazy"
alt="wp3.0"
>&lt;/a>&lt;/p>
&lt;p>期待多时的 3.0 版本终于出现了，刚刚升级上来，还没有体验到她的新功能，先换上了最新的皮肤，看上去字体和布局都非常舒服。简单就是美，希望 WordPress 能够越来越好。它真可谓用户体验的典范之作！&lt;/p></description></item><item><title>BMC提供ITSM洋快餐</title><link>https://martinliu.cn/2010/06/07/bmc-remedy-ondemand/</link><pubDate>Mon, 07 Jun 2010 17:55:46 +0000</pubDate><guid>https://martinliu.cn/2010/06/07/bmc-remedy-ondemand/</guid><description>&lt;p>还有很多企业依然在寻找 IT 服务管理的方法论
还有很多企业依然在让内部开发团队打造 ITSM 流程平台
也还有很多企业在购买的成熟的 ITSM 管理平台套件上大搞研发和定制
也还有很多外国企业在拼命保持使用 ITSM 产品开箱即用的功能来减少开支和加快投资回报
也还有一些外国企业在尝试 ITSM 的 KFC，BMC Remedy OnDemand，连系统也不建设了，直接拿标准的就来用吧。
回顾国内的 ITSM 用户，往往在探索期里花的时间和金钱成本太大，推广标准化 ITSM 的理念需和 ITSM 系统平台建设同行；目前国外的工具和 ITIL 标准已经够标准、成熟和进化了，我们的标准化理念也争取迎头赶上吧
Reduce Service Support Costs Quickly with BMC Remedy OnDemand&lt;/p>
&lt;p>&lt;a class="link" href="http://media.cms.bmc.com/video/itsm-ondemand-overview.swf" target="_blank" rel="noopener"
>View Full Screen&lt;/a>&lt;/p></description></item><item><title>规划CMDB数据填充-001</title><link>https://martinliu.cn/2010/06/04/plan-cmdb-population-001/</link><pubDate>Fri, 04 Jun 2010 06:13:20 +0000</pubDate><guid>https://martinliu.cn/2010/06/04/plan-cmdb-population-001/</guid><description>&lt;p>From 《Step by step to build a CMDB》步骤 17-规划 CMDB 数据填充&lt;/p>
&lt;p>目标&lt;/p>
&lt;p>在这一 CMDB 关键的步骤中，会为 CMDB 的初始化 CI 数据填充，做精细的计划。需要考虑到所有 CI 数据，把不同 CI 类型对应到不同的数据集中，安排正确的顺序将这些数据集 CMDB。其中定义对应的规则来调和重复数据是很重要的，不仅在 CMDB 初始化数据填充阶段重要，在以后的日常维护过程中也是非常重要的。做出了本阶段的详细规划后，这样在第 18 步即“选择自动化 CMDB 填充工具”时，就能考虑需要什么样的配置发现和自动化工具了。&lt;/p>
&lt;p>&lt;img src="http://pursuitmag.com/wp-content/uploads/2010/01/private-investigator-database.jpg"
loading="lazy"
>&lt;/p>
&lt;p>实际上，把数据填充到 CMDB 中是非常基础的工作，必须事前做好充分的数据范围和类型的分析。对于一个典型的 CMDB 数据填过程来说，将需要做如下工作：&lt;/p>
&lt;ul>
&lt;li>建立里项目程碑和高阶项目计划，以及配套的支撑数据库和操作流程。&lt;/li>
&lt;li>安排项目启动会议，单周或者双周的项目进度沟通会。&lt;/li>
&lt;li>识别子项目（每个数据集分为一个子项目），建立每个子项目的目标和需求清单。识别和制定项目工作活动内容，确定项目的工作流程，并且按照项目计划排程所有活动。包括：
&amp;mdash;并行开展项目（用户界面定制，DSL 数据填充）；
&amp;mdash;串行开展项目（发现工具，数据调和，等等）&lt;/li>
&lt;li>为每个子项目分配项目负责人，让他们来负责汇报项目的进展、问题升级和下一步的工作。&lt;/li>
&lt;li>为所有项目参与人员建立一个开放的沟通平台，包括所有内部、外部人员（邮件组方式，数据库、通报）&lt;/li>
&lt;li>为可能出现的紧急事件预留至少 10%的时间和预算的缓冲。&lt;/li>
&lt;/ul>
&lt;p>自动配置采集工具是一种很好的数据填充和数据维护方式，您也会在某种发现工具的诱惑下，在很短的时间里，就采集到了大量的数据。可是您还是需要注意：一个被填充了大量数据的CMDB并不意味着是一个好CMDB。一旦您建立和填充了CMDB，您就将需要对它进行积极地维护。如果CMDB中存储着很多超出用户需求的数据，即使在最好的情况下，您也是对这些无用的数据做大量无谓创建和维护工作，这是一个巨大的浪费且没有意义的事。而在最糟的情况下，如果你所填充入CMDB的数据，在后来是没有被及时更新和维护的，那么当用户使用到这些质量低和不精确的数据数据后，就会对CMDB失去信心，这样也对 CMDB在企业里的推广和应用造成一定阻碍。&lt;/p>
&lt;p>按照您在第二步-“定义需求和创建 IT 服务模型蓝图”中的需求，来设计和部署 CMDB。从你的服务模型蓝图出发，来识别 CI，把他们分组到各个数据集中。识别每个数据集应该对应的数据源，把每个 CI 类型和相关数据源对应起来。并且按照既定的 CMDB 数据导入的工作顺序，来规划不同数据源中数据。最后，把以上所有规划和设计用文档记录下来，包括识别重复数据的调和规则等。&lt;/p>
&lt;p>在这一步里，您必须专注于 CMDB 所需要的范围，交付可实现的东西，而非可能的东西。在敲定最终的规划之前，你需要组织分析会议进行仔细地计划。&lt;/p></description></item><item><title>ITSM实施精要-只讲2分钟</title><link>https://martinliu.cn/2010/06/01/itsm-implement-best-practice/</link><pubDate>Tue, 01 Jun 2010 16:37:51 +0000</pubDate><guid>https://martinliu.cn/2010/06/01/itsm-implement-best-practice/</guid><description>&lt;p>下面是我在过去 ITSM 项目实施中的一些经验和体会：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/06/ITSM_implement.swf" target="_blank" rel="noopener"
>ITSM_implement best practice&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://www.box.net/shared/rld8smakt1" target="_blank" rel="noopener"
>下载&lt;/a>&lt;/p>
&lt;p>Credit：本 ppt 的原版为《the 60 second guide to Enterprise Innovation》&lt;/p></description></item><item><title>联邦的CMDB–神话/现实/需求/还是策略？</title><link>https://martinliu.cn/2010/05/31/federation-cmdb/</link><pubDate>Mon, 31 May 2010 03:53:06 +0000</pubDate><guid>https://martinliu.cn/2010/05/31/federation-cmdb/</guid><description>&lt;p>来自：Jonathan Markworth（CompuCom Systems 有限公司管理顾问，探讨联邦数据库的优点）&lt;/p>
&lt;p>使用一个具有单一的、全知的、万能的和自维护功能的工具，来管理 IT 基础架的方方面面信息，是否是最好的方案呢？使用一个能做所有工作的全集成平台，来替换您积累下来的所有管理工具是否是最佳方式？现实情况是，大多数组织都已经实施了几十种应用程序、工具、实用程序、数据存储、硬件平台和管理框架，它们一起运行着一个或更多的 IT 服务管理功能。它们中的每一个应用都有自己的数据库，对当前环境中的一些关键管理功能提供信息支持。在 CMDB 应用场景中，这些工具相关的数据库中，其实也包含了大量关键的 CI 属性，这些属性可以用于识别 CI 之间的关系。重要的问题是，如何利用现有的投资和资源来建立一个底层共享的数据库，比如一个 CMDB。&lt;/p>
&lt;p>&lt;img src="http://www.jevotrust.com/Site/graphics/cmdb_config_management.jpg"
loading="lazy"
>&lt;/p>
&lt;p>一种方法是“集中存储和管理”，从这些数据源中导出 CI 的唯一标识、属性、以及关系，然后都整合到一个数据库中。但在经过了一段很长的时间后，这种方案所产生的数据将很难维护，因为伴随着数据源数量的增长，整套系统的维护会变的愈来愈复杂。&lt;/p>
&lt;p>另一种方法是“建立联邦的 CMDB”，建立一个核心 CMDB，用来整合所有配置项的唯一标识、核心属性和关系数据，为所有需要它的 IT 流程随时提供配置数据，而不需要对所有数据进行集中式地复制。用联邦的模式，让 CMDB 持有所有 CI 及其核心属性数据，然后再连接到其他相关的数据源；如服务台事件单、服务水平协议、甚至其他监控的管理控制台界面。通过正确地部署，联邦模式可以使得企业的 CMDB 能横跨所有的个 IT 组织，如果需要的话可以对既有的相关系统进行分阶段的实施，这样不仅可以让 IT 组织能够继续日常业务，还不会带来什么干扰。&lt;/p>
&lt;p>&lt;img src="http://farm1.static.flickr.com/131/398876934_548e99f7e0.jpg"
loading="lazy"
>&lt;/p>
&lt;p>摘自 BMC 软件公司公布的 VIEWPOINT “CMDB 的潜力—驾驭新的 IT 现实”，CMDB 为主题的文章。&lt;/p></description></item><item><title>CMDB配置采集工具部署之4大挑战</title><link>https://martinliu.cn/2010/04/26/cmdb-addm-tool-implement-good-practice/</link><pubDate>Mon, 26 Apr 2010 12:24:24 +0000</pubDate><guid>https://martinliu.cn/2010/04/26/cmdb-addm-tool-implement-good-practice/</guid><description>&lt;p>[singlepic id=84 w=320 h=240 mode=watermark float=left] &lt;em>&lt;strong>挑战 1：沟通成本大&lt;/strong>&lt;/em>
项目的参与沟通方可能很多，最多的情况下，可能包括：网络部门、系统部门、安全部门和各个业务部门。沟通的内容主要是配置采集的实施技术方式。其中采集的安全性，风险分析是最重要的部分；在部门多的情况下，面对多种选择的时候，逐一给项目各方说清所有方案，特别是讲清楚利弊是非常耗时的。在充分沟通了所有技术可能性之后，才能做出倾向性选择。逐一这是第一轮沟通，搞清楚了倾向性而已。&lt;/p>
&lt;p>&lt;strong>&lt;em>挑战 2：决策成本大&lt;/em>&lt;/strong>
特别是银行等金融企业，安全性要求特别高。安全风险方面的建议往往是最重要的，他们的建议对配置采集工具的实施具有决定性意义。在各方都充分理解了配置采集工具的架构和安全性之后，就是拍板定夺了。这种逐级的审批和决策是需要较长的周期。&lt;/p>
&lt;p>&lt;strong>&lt;em>挑战 3：前导时间成本太大&lt;/em>&lt;/strong>
在前导时间里，可能还没有部署正式的 ADDM 采集服务器。在这个阶段里，要配置网络，让以后的采集服务器能够处于能够扫描到所有目标服务器设备。还可能需要在每台服务器上配置相关的准备工作，主要是坚持主机的操作系统的账户、采集协议和安全配置等是否满足配置采集工具的要求。这写工作是一个群众性运动，需要让所有的系统管理员配合。此项工作的设计人员设备多，最好能尽早的开始。&lt;/p>
&lt;p>&lt;strong>&lt;em>挑战 4：用户的期望太大&lt;/em>&lt;/strong>
用户对配置工具的期望主要是集中在深度和细度方面。其实这也不为过，只是在实施的过程中，最好还能把发现工具的一下特有的功能和特殊推广给用户。如软件和硬件的 EOL 信息，一些开合即用的报表和图形化展示功能，全文搜索等等功能其实都可以给客户带去意想不到的价值 。&lt;/p></description></item><item><title>Naya-猫-周末</title><link>https://martinliu.cn/2010/04/18/naya_cat_weekend/</link><pubDate>Sun, 18 Apr 2010 06:50:02 +0000</pubDate><guid>https://martinliu.cn/2010/04/18/naya_cat_weekend/</guid><description>&lt;p>厦门持续的阴雨，这样的天气已经持续很久了，看来清明和谷雨前后没有什么好天气了，说实话不太适应南方这种鬼天气，比较怀念上周 6 北京的大晴天。今天的心情同天气一样，郁闷原因不说了。&lt;/p>
&lt;p>匆忙吃过早饭，乘船来到岛上来寻找一处安静的地方，目的很简单啊，无聊出差的周末工作，还能做什么？今天感觉除了工作就是发呆了。在岛上七拐八拐的稍微溜达了一下，稍微逛了两个小店。想找一个地方能够提供舒适的桌椅、户外的环境，当然还有咖啡和午饭了。&lt;img src="http://martinliu.cn/wp-content/gallery/travel/naya_cat.jpg"
loading="lazy"
alt="naya_cat"
>&lt;/p>
&lt;p>最后还是落脚在 Naya，院落里有只有墙边的两个桌不淋雨，其他的都被雨水浇的稀里哗啦的。点上一杯咖啡，打开电脑开始工作吧。背后桌上的猫引来一些游客的观赏和拍照，烦！难得找个清静的地方，带上耳机，许巍熟悉的老歌旋即缭绕耳畔。趁没有人惹猫咪，我对它咪咪了几声，它没反应，我继续。过了一会我发现它走到我的长椅上，蹲在那里，正在看我，这猫看来也很无聊，需要人的陪伴，它也让我想到了某人。我摸了几下它的头，它很享受的眯上眼；这又让我想起了，小时候我样的那只大猫，比它颜色白。它坐的位置正好在我搭在椅背上的衣服后面，游客这下彻底看不到它了，我也可以安心地继续了。发文感谢一下这只猫义务陪伴我可爱的 MIMI。今天主要的工作内容是 CMDB 解决方案需要和差距分析。&lt;/p></description></item><item><title>21世纪最缺的是什么？</title><link>https://martinliu.cn/2010/04/15/cmdb-project-need-talents/</link><pubDate>Thu, 15 Apr 2010 16:04:28 +0000</pubDate><guid>https://martinliu.cn/2010/04/15/cmdb-project-need-talents/</guid><description>&lt;p>&lt;img src="http://www.photophoto.cn/m55/116/001/1160010007.jpg"
loading="lazy"
>&lt;/p>
&lt;p>21 世纪最缺的是人才，在 ITIL 项目中更是重要。特别是 CMDB 项目，项目团队人员构成是呈金字塔型。&lt;/p>
&lt;p>最顶端的人是 Project Executive Board“项目执行委员会”，简称 PEB，它就像是一个公司董事会；它对 CMDB 项目的目标、预算、工期、项目变更等负责。PEB 人员数量应愈少愈好，不过下面的个角色也是缺一不可。首先，要请至少一个 C level 的人加入，比如数据中心的 CIO。其次，关键利益干系人，它们是 CMDB 的价值的主要承载者，叫好和批评项目成果的都会是它们。然后是 CMS/CMDB 系统的负责人，它们对 CMDB 的规划、维护和之后的发展最重要。最后是项目实施资源的主要提供方领导，说白了他就是出人出力的部门，今后项目的执行和实施都靠他们。所以 PEB 的人数在 4 人左右。他们是相关部门的领导。我在最近的项目实施中，也遇到了几个问题，需要去找客户的老板来拍，也就是找到 PEB 的人决策。其实之前也听到其他同事在项目过程中，曾经感慨道“客户的领导还真辛苦，大事小情都需要替下面做决策，他们的脑袋真禁拍！”。国内的管理者的确挺辛苦的，毕竟所带领的团队都还比较的年轻，这也是国内 IT 管理的成熟度低的一个体现。&lt;/p>
&lt;p>金字塔下面的人就是都是我们的天天加班、做牛做马的辛劳工作的实施人员了。没有规矩不能成方圆，实施团队的技术素质和构成、团队沟通等都是至关重要的。对项目的质量，项目工期都有非常重要的影响。金字塔下面的兄弟姐妹都是一条船上的人，大家要互相配合才能完成项目的各项工作；在这个过程中没有一个船老大也是不行的，船老大就是项目经理。对 CMDB 的项目经理的要求可不低，重要有以下几点：&lt;/p>
&lt;ul>
&lt;li>Planning skills&lt;/li>
&lt;li>IT service management background&lt;/li>
&lt;li>Previous involvement in building a database&lt;/li>
&lt;li>ITIL Manager’s certification&lt;/li>
&lt;li>Ability to make decisions&lt;/li>
&lt;li>Capabilities to motivate staff&lt;/li>
&lt;li>Ability to blend a team&lt;/li>
&lt;li>Strength of character to lead a team&lt;/li>
&lt;li>Capacity to present results and status of project to sponsors and stakeholders&lt;/li>
&lt;li>Self-motivation&lt;/li>
&lt;li>Ability to communicate instructions to the project team (from step by step to build a cmdb)&lt;/li>
&lt;/ul>
&lt;p>项目实施工程应该具备很多的必要素质。CMDB 产品是一个复杂的应用系统，必须有人对它的技术细节非常熟悉，包括应用安装、配置和客户化。这个技能应该是核心中的核心，对产品利用的好，就能减少二次开发的工作量，就能最大发挥产品的原本功能，从而规避项目风险。产品的二次开发技能也是另一个必要因素，这是由于中国用户的特点决定的，对于任何一个大型的 ITSM 项目，国内没有不对产品做二次开发的。程序开发技能也很重要，Java/JSP 开发人员是必须的，他们还需要懂得 html、xml、sql 等技术。如果能在有操作系统和数据库专家就在好不过了，在系统出现性能故障，系统需要全面备份和恢复的时候，数据库专家和系统专家的参与能让事情经行的更高效，更快，不至于由于系统不可用导致的窝工。系统能更安全，能更放心的使用和开发。下面的一些技能是充分条件，包括 ITIL 认证、ITSM 流程的知识背景和项目经验。&lt;/p>
&lt;p>CMDB 项目对实施人员的要求是很高的，实施前要选合适的人；想要追求高品质的项目质量，就需要网络业内的专业的实施专家顾问、有经验的项目经理和合格的项目实施工程师。从这个角度上讲，21 世纪 ITSM 项目最缺的可见是 CMDB 人才；呵呵这纯粹是我的笑谈，不过您要组建一个 CMDB 项目团队的话，挑选人员的时候请务必擦亮眼睛。&lt;/p></description></item><item><title>Alice in Wonderland</title><link>https://martinliu.cn/2010/04/04/alice-wonderland/</link><pubDate>Sun, 04 Apr 2010 14:23:17 +0000</pubDate><guid>https://martinliu.cn/2010/04/04/alice-wonderland/</guid><description>&lt;p>&lt;img src="http://upload.wikimedia.org/wikipedia/commons/9/99/Alice_in_Wonderland.jpg"
loading="lazy"
>&lt;/p>
&lt;p>今天在厦门看了一次电影，是 3D 版的，总的来说影片非常好看，可谓是老少皆宜的佳品制作。可惜 3D 眼镜还是太沉了，脖子看完了很痛。红色皇后的真残酷，还有白色皇后的真伪善，还有很多卡通角色的搞笑，包括最后于怪龙的决斗。整个片子内容饱满而有趣，丝毫不觉得拖沓和无聊。让我又一次的回到童年的感觉。清明节前后真不是出游的好季节，厦门整日阴沉着天，只能当是休息了。&lt;/p>
&lt;p>&lt;img src="http://apollo.s.dpool.sina.com.cn/nd/dataent/moviepic/pics/2/moviepic_39785744ebf0f9c9d9acc9f8cfc0ff7a.jpg"
loading="lazy"
>&lt;/p></description></item><item><title>项目实施之鬼见愁@需求变更@</title><link>https://martinliu.cn/2010/04/02/project-failed-by-requirements-change/</link><pubDate>Fri, 02 Apr 2010 14:59:12 +0000</pubDate><guid>https://martinliu.cn/2010/04/02/project-failed-by-requirements-change/</guid><description>&lt;p>[singlepic id=34 w=320 h=240 mode=watermark float=right]不经意间听到的让我深思的一段对话。
甲：咦，这个功能是什么时候加的？
乙：哦，我也不知道还有这个功能
丙：那是我加的
甲：需求是谁提的？
丙：他们那天给我打了一个电话说需要这个功能&lt;/p>
&lt;p>都说 ITSM 项目是非常难实施的项目，成功率低；特别是 CMDB 项目，实施难度大，失败案例比比皆是。首先我觉得 ITSM 项目的实施有它的特殊性，特殊在于实施顾问对客户需求的理解，在于实施顾问对 ITIL 最佳实践的经验，在于对产品工具的把握。其中任何一个环节拿捏不准都会到导致需求的泛滥、需求混乱、需求的飘忽不定。&lt;/p>
&lt;p>可见需求管理是项目实施和执行的灵魂，失去了对灵魂的掌控，需求讨论会就将可能进入走火入魔的地步，需求各方争执不下，整个会议室炸开了锅，每个人都争抢着发言，我的脑也几乎要眩晕；我说的这一点也不夸张，没见过只能是你的幸运。&lt;/p>
&lt;p>需求管理包括需求的分析和整理，应该是有层次的，在不同的层次里讲不同的语言，达成共识的讨论结果。层次可以分为这样三层&lt;/p>
&lt;ol>
&lt;li>
&lt;p>业务需求&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用户需求&lt;/p>
&lt;/li>
&lt;li>
&lt;p>功能需求&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>所谓业务需求是说站在公司的高度，从最 high level 角度描述需求之所在。它的语言像是项目使命的宣言，指出为什么要做这个项目，项目的价值点落在哪里。最概况的项目范围。业务需求告诉我们：为什么会有这些需求。&lt;/p>
&lt;p>用户需求是指从项目利益相关人的角度出发。逐一描述各个业务操作环节，这些业务操作由每个可独立执行的条目为单位，每个业务操作中说明业务规则、输入和结果。切忌在这一阶段就进入详细的功能界面或者功能操作上细节的任何讨论。原因很简单：我们在这里还没有进入技术实现环节，依然在以客户或者系统使用者的角度来描述它的需求。系统用户和客户是不需要理解每一个页面跳转和鼠标点击的意义的。在我的经验看来客户在这里最容易陷入技术细节讨论的泥沼，反而可能浪费需求讨论的时间，可能导致项目的延期，需求点难以确定。用户需求告诉我们：用户的需要什么。&lt;/p>
&lt;p>功能需求则需要告诉我们：为了能满足用户需求，我们的系统是怎么做的。这里将用技术的语言，进入系统层面说明系统应该怎么做。功能需求最终将导出概要设计和详细设计。&lt;/p>
&lt;p>业务需求的满足=用户需求的满足+功能需求的满足；用户需求是能推倒出功能需求的，用户需求和功能需求可以是一对一、一对多和多对多的关系。&lt;/p>
&lt;p>以上三个需求是有层次的并与客户递进沟通的产物，既然是沟通，那么在每个层次上都伴随着矛盾、争论、妥协。在任一层次上理不出头绪时，一定要追溯到上一层，通过上一层来指导解决。但是这往往也是很难把握和执行的，最终最可能的结果是在以上三个沟通层次中都伴随着需求的变化、需求的扩大、需求的混乱。甚至于进入了测试阶段还能产生出新的需求和理解的偏差，谁人能不说“需求变更”是项目实施的鬼见愁呢？&lt;/p>
&lt;p>如何解决这个“鬼见愁”？一方面需要时刻对项目预算和时间资源保持清醒的头脑，项目实施比较是那时间和金钱换需求。还有就是通过项目变更委员会来控制需求变更。&lt;/p></description></item><item><title>掀起CMDB的盖头来</title><link>https://martinliu.cn/2010/03/30/phase-roll-out-cmdb-implement/</link><pubDate>Tue, 30 Mar 2010 14:00:01 +0000</pubDate><guid>https://martinliu.cn/2010/03/30/phase-roll-out-cmdb-implement/</guid><description>&lt;p>今天是项目计划提交后的第二天，客户方项目经理对项目的推迟表示感到非常吃惊，期望能让我们给出一个合理的解释。其实这也同样的超出了我的预料，难道软件项目管理和运作都是所谓的人月神话么？&lt;/p>
&lt;p>[singlepic id=22 w=320 h=240 mode=watermark float=left]在我看来 CMDB 项目的实施和运作有是有可能分阶段、逐步地交付项目成果的。简单的来说首先交付的当然是 CMDB 和配套发现工具系统本身，丑媳妇不要怕见公婆，把这个不加粉饰的原型系统拿出来，让项目各方包括最终用户来试用和评估。接着按照 CMDB 配置数据的来源的不同，把数据顺序的导入 CMDB，并且开展数据的调和工作，完成基础数据的初始化。在基础数据的基础上，需要对 CMDB 服务模型加以验证，选取重点的系统来验证，让系统经理和 CMDB 相关用户也参与进来，用事实和数据讲话，对模型和工具做最终的确认。这个其实是一个小范围内的推广，它的经验可以直接应用于下一个阶段。接下来是对其他所有被采集对象的普遍扫描和 CI 数据同步，在这个阶段里还需要实现 CMDB 和所有 ITIL 流程的集成，ITIL 流程是 CMDB 的主要消费者 ，这个集成往往是两家不同的产品，这种情况下，如果集成的效果欠佳，CMDB 的实施成果也会打折扣。最后结尾的交付物可以是 CMDB 的审核和报表等产品。&lt;/p>
&lt;p>正如 ITIL 的实施一样，没有两个国内公司的 ITSM 实施是相似的，就像国内不存在两片相同的树叶一样。那么国外的树叶又如何呢？从 ITSM 实施方面来看，相同的树叶在国外还是非常多的。相同的原因在于，往往用户选择了相同的产品如 Remedy ITSM 套件，往往由于定制化的人力成本很多用户也在尽量避免对产品的定制，如果通过配置可以实现的需求，绝不定制或者开发。我们也应该多走工业化标准生产的道路，少以中国特色为借口来实施个性化二次开发。&lt;/p></description></item><item><title>CMDB需求分析之最佳实践</title><link>https://martinliu.cn/2010/03/29/cmdb-requirement-analysis-practice/</link><pubDate>Mon, 29 Mar 2010 15:19:20 +0000</pubDate><guid>https://martinliu.cn/2010/03/29/cmdb-requirement-analysis-practice/</guid><description>&lt;p>[singlepic id=4 w=320 h=240 mode=watermark float=right]今天终于移师厦门开发中心，这意味着我所经历的史上最长 CMDB 需求分析基本告一阶段，也意味着 CMDB 的构建、集成、定制和 测试工作也徐徐拉开了大幕。&lt;/p>
&lt;p>回忆前三个月所做的的需求分析工作，虽然各项调研和讨论工作进行的缓慢，不过细致的工作最终还是换回了令人满意的成果，起码我是这么认为。&lt;/p>
&lt;p>需求分析的过程是对需求的重新整理、重新定义和梳理。项目的立项并不意味着项目目标树立的精准，项目范围控制的合理。实际需求可以在实施的初期阶段来重定义，从新分析，着觉得不是浪费时间。而且这一点对于中国用户至关重要。国内很多项目都是资金或者预算驱动的，先有需求，通过需求推到出项目的价值，在通过项目的投资回报率申报项目预算的过程在国内是很少见得。国内的项目往往是有多少钱需要花，那么大家在来看，如何把需求花到极致，达到最大的产出。这也是很多需求分析做的贪多、贪大、求全的根源，这样做的好处是在一个项目周期内就把需求实现的尽善尽美（愿望是这样），坏处是：可能导致厂商和服务商的服务成本超支，从而造成的项目质量降低，从用户角度来说一次性接受一大堆的系统功能，负担重，接受度低，同时客户满意度低，项目满意度差。&lt;/p>
&lt;p>我认为较好的最佳实践还要抓项目的主要目标，抓需要实现的主要价值点，抓重点放弃那些可做可不做的功能。懂得放弃的人才懂得获得。把所有的功能需求做成能够分批、分期上线的成果；确保让系统用户能 buy in 每一个阶段性成果，不要奢望给用户带来革命性的提高，由于那样也意味着，你对他们当前工作方式的影响是巨大的，没有用户愿意接受巨变。&lt;/p>
&lt;p>需求分析时，从技术上讲，对会议组织人要求很高。需要此人能非常熟悉 CMDB 项目实施的方法论，需要此人能够非常熟悉产品的各个功能点，需要引导有效的需求分析会议。在白板上尽可能多的画图，用 Visio 或者 ppt 等工具尽量多的讲解各种架构图、功能图、流程图具有事半功倍的效果。不管会议上您可能收到怎样的抱怨、抵制、反对；stakeholder 的反馈将是你最宝贵的收获。没有互动和反馈的需求分析会是相当无聊和浪费时间的。切忌在大型的企业中，要慎重地计划每一次需求分析会，理由也很简单，企业组织越大，沟通的成本也越高。需求分析沟通的效率和成功完全取决于 CMDB 项目执行的方法论，取决于分析引导人的各种项目背景经验，还取决于对客户状况了解和上手的速度。&lt;/p></description></item><item><title>OpenNMS 1.6.1 to 1.6.10</title><link>https://martinliu.cn/2010/03/28/opennms-161-1610/</link><pubDate>Sun, 28 Mar 2010 05:37:04 +0000</pubDate><guid>https://martinliu.cn/2010/03/28/opennms-161-1610/</guid><description>&lt;p>[singlepic id=35 w=320 h=240 float=left]在最近的一年里，我基本上忙于 CMDB 的工作，没有什么业余时间来看看 OpenNMS 的情况。其实 OpenNMS 是最初引入我深入了解开源软件世界的东东。时隔 1 年之久，我上一篇关于 opennms 的文章是它是 1.6.1 版本，刚才查了一下，它最新的稳定版本是 1.6.10.&lt;/p>
&lt;p>看似它这一年里发展的比较慢，这让我感到些许地失望，大概地看一下一堆相关的 release notes。功能性的变化如下：&lt;/p>
&lt;ul>
&lt;li>新增和增强了一些 monitor 的和功能，主要有 http，dns，ldap，ssh，jmx 等，从最初的 snmp 采集，都这些采集功能；采集能力的增强是它这样的无代理监控程序永远的话题&lt;/li>
&lt;li>UI 的功能的增强了一些&lt;/li>
&lt;li>SNMP 采集仍然是他的主要能力，在这方面也有了一些改进&lt;/li>
&lt;li>新增了一些网络设备品牌的支持&lt;/li>
&lt;li>阀值配置也有改进&lt;/li>
&lt;/ul>
&lt;p>总的来说，作为一款能够采集各种 snmp mib 信息，能够出好看的性能报表，能够作为统一的告警事件平台，能够有简单易用的 UI，OpenNMS 做的显然是非常不错的。至今还行它还没有提出什么云计算相关的话题，可见他们还是一般比较稳健发展，不爱赶时髦的人。希望他们能做的更好。&lt;/p>
&lt;p>对于我的这个 blog 来说，之前写的 OpenNMS 和网管相关的东西比较多，以后可能会越来越少，就此和 OpenNMS 做一个总结。以后本 blog 可能会和目前做的 cmdb 和 itsm 相关这些内容为主了。&lt;/p></description></item><item><title>重整旗鼓</title><link>https://martinliu.cn/2010/03/27/martinliucnblog/</link><pubDate>Sat, 27 Mar 2010 07:09:42 +0000</pubDate><guid>https://martinliu.cn/2010/03/27/martinliucnblog/</guid><description>&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/03/Martin_s-Blog.gif" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2010/03/Martin_s-Blog-300x48.gif"
loading="lazy"
>&lt;/a>还是不能下决心把 blog 彻底迁移到国内的免费 blog，所以在此选择新的地方来安置它。最后决定这次把它放到美国的一个收费空间中。之前使用免费空间的时候，多是美国的免费空间。这次也走上了收费空间之路。不过昨晚和一个博友聊了一下，觉得.cn 域名真的是个没有前途的域名。所以我也不知道 martinliu.cn 能走多远，所以我还是秉持着一颗平常心，不烦不燥，翻墙并快乐着。毕竟 blog 是以娱乐为主，能看到 martinliu.cn 在线一天，也是个乐子。&lt;/p></description></item><item><title>AVATAR</title><link>https://martinliu.cn/2010/01/09/avatar/</link><pubDate>Sat, 09 Jan 2010 11:07:36 +0000</pubDate><guid>https://martinliu.cn/2010/01/09/avatar/</guid><description>&lt;p>&lt;img src="http://farm5.static.flickr.com/4069/4259420818_1e47f2a782_o.jpg"
loading="lazy"
alt="Avatar"
>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>图文阐释-DAS-NAS-SAN</title><link>https://martinliu.cn/2010/01/07/what-is-das-nas-san/</link><pubDate>Thu, 07 Jan 2010 05:20:06 +0000</pubDate><guid>https://martinliu.cn/2010/01/07/what-is-das-nas-san/</guid><description>&lt;!-- raw HTML omitted -->
&lt;p>目前磁盘存储市场上，存储分类（如下表一）根据服务器类型分为：封闭系统的存储和开放系统的存储，封闭系统主要指大型机，AS400 等服务器， 开放系统指基于包括 Windows、UNIX、Linux 等操作系统的服务器；开放系统的存储分为：内置存储和外挂存储；开放系统的外挂存储根据连接的方 式分为：直连式存储（Direct-Attached Storage，简称 DAS）和网络化存储（Fabric-Attached Storage，简称 FAS）；开放系统的网络化存储根据传输协议又分为：网络接入存储（Network-Attached Storage，简称 NAS）和存储区域网络（Storage Area Network，简称 SAN）。由于目前绝大部分用户采用的是开放系统，其外挂存储占有目前磁盘存储市场的 70%以上，因此本文主要针对开放系统的外挂存 储进行论述说明。
表一：&lt;/p>
&lt;p>[singlepic id=97 w=570 h=250 float=]&lt;/p>
&lt;p>今天的存储解决方案主要为：直连式存储（DAS）、存储区域网络（SAN）、网络接入存储（NAS）。如下表二：&lt;/p>
&lt;p>[singlepic id=98 w=533 h=352 float=]&lt;/p>
&lt;p>开放系统的直连式存储（Direct-Attached Storage，简称 DAS）已经有近四十年的使用历史，随着用户数据的不断增长，尤其是数百 GB 以上时，其在备份、恢复、扩展、灾备等方面的问题变得日益困扰系统管理员。
主要问题和不足为：&lt;/p>
&lt;p>直连式存储依赖服务器主机操作系统进行数据的 IO 读写和存储维护管理，数据备份和恢复要求占用服务器主机资源（包括 CPU、系统 IO 等），数据流需要回流 主机再到服务器连接着的磁带机（库），数据备份通常占用服务器主机资源 20-30%，因此许多企业用户的日常数据备份常常在深夜或业务系统不繁忙时进行， 以免影响正常业务系统的运行。直连式存储的数据量越大，备份和恢复的时间就越长，对服务器硬件的依赖性和影响就越大。
直连式存储与服务器主机之间的连接通道通常采用 SCSI 连接，带宽为 10MB/s、20MB/s、40MB/s、80MB/s 等，随着服务器 CPU 的处理 能力越来越强，存储硬盘空间越来越大，阵列的硬盘数量越来越多，SCSI 通道将会成为 IO 瓶颈；服务器主机 SCSI ID 资源有限，能够建立的 SCSI 通道连接有限。
无论直连式存储还是服务器主机的扩展，从一台服务器扩展为多台服务器组成的群集(Cluster)，或存储阵列容量的扩展，都会造成业务系统的停机，从而 给企业带来经济损失，对于银行、电信、传媒等行业 7×24 小时服务的关键业务系统，这是不可接受的。并且直连式存储或服务器主机的升级扩展，只能由原设备 厂商提供，往往受原设备厂商限制。
存储区域网络（Storage Area Network，简称 SAN）采用光纤通道（Fibre Channel）技术，通过光纤通道交换机连接存储阵列和服务器主机，建立专用于数据存储的区域网络。SAN 经过十多年历史的发展，已经相当成熟，成为业 界的事实标准（但各个厂商的光纤交换技术不完全相同，其服务器和 SAN 存储有兼容性的要求）。SAN 娲 ⒉ 捎玫拇?宽??00MB/s、200MB/s，发 展到目前的 1Gbps、2Gbps。
网络接入存储（Network-Attached Storage，简称 NAS）采用网络（TCP/IP、ATM、FDDI）技术，通过网络交换机连接存储系统和服务器主机，建立专用于数据存储的存储私 网。随着 IP 网络技术的发展，网络接入存储（NAS）技术发生质的飞跃。早期 80 年代末到 90 年代初的 10Mbps 带宽，网络接入存储作为文件服务器存 储，性能受带宽影响；后来快速以太网（100Mbps）、VLAN 虚网、Trunk(Ethernet Channel) 以太网通道的出现，网络接入存储的读写性能得到改善；1998 年千兆以太网（1000Mbps）的出现和投入商用，为网络接入存储（NAS）带来质的变化 和市场广泛认可。由于网络接入存储采用 TCP/IP 网络进行数据交换，TCP/IP 是 IT 业界的标准协议，不同厂商的产品（服务器、交换机、NAS 存储） 只要满足协议标准就能够实现互连互通，无兼容性的要求；并且 2002 年万兆以太网（10000Mbps）的出现和投入商用，存储网络带宽将大大提高 NAS 存储的性能。NAS 需求旺盛已经成为事实。首先 NAS 几乎继承了磁盘列阵的所有优点，可以将设备通过标准的网络拓扑结构连接，摆脱了服务器和异构化构架的 桎梏；其次，在企业数据量飞速膨胀中，SAN、大型磁带库、磁盘柜等产品虽然都是很好的存储解决方案，但他们那高贵的身份和复杂的操作是资金和技术实力有 限的中小企业无论如何也不能接受的。NAS 正是满足这种需求的产品，在解决足够的存储和扩展空间的同时，还提供极高的性价比。因此，无论是从适用性还是 TCO 的角度来说，NAS 自然成为多数企业，尤其是大中小企业的最佳选择。
NAS 与 SAN 的分析与比较
针对 I/O 是整个网络系统效率低下的瓶颈问题，专家们提出了许多种解决办法。其中抓住症结并经过实践检验为最有效的办法是：将数据从通用的应用服务器中分离出来以简化存储管理。&lt;/p>
&lt;p>[singlepic id=99 w=410 h=220 float=]&lt;/p>
&lt;p>由图 1 可知原来存在的问题：每个新的应用服务器都要有它自己的存储器。这样造成数据处理复杂，随着应用服务器的不断增加，网络系统效率会急剧下降。
图 2&lt;/p>
&lt;p>[singlepic id=100 w=398 h=168 float=]&lt;/p>
&lt;p>从图 2 可看出：将存储器从应用服务器中分离出来，进行集中管理。这就是所说的存储网络（Storage Networks）。
使用存储网络的好处：
统一性：形散神不散，在逻辑上是完全一体的。
实现数据集中管理，因为它们才是企业真正的命脉。
容易扩充，即收缩性很强。
具有容错功能，整个网络无单点故障。
专家们针对这一办法又采取了两种不同的实现手段，即 NAS（Network Attached Storage）网络接入存储和 SAN(Storage Area Networks)存储区域网络。
NAS：用户通过 TCP/IP 协议访问数据，采用业界标准文件共享协议如：NFS、HTTP、CIFS 实现共享。
SAN：通过专用光纤通道交换机访问数据，采用 SCSI、FC-AL 接口。&lt;/p>
&lt;p>什么是 NAS 和 SAN 的根本不同点？
NAS 和 SAN 最本质的不同就是文件管理系统在哪里。如图：&lt;/p>
&lt;p>[singlepic id=101 w=455 h=223 float=]&lt;/p>
&lt;p>由图 3 可以看出，SAN 结构中，文件管理系统（FS）还是分别在每一个应用服务器上；而 NAS 则是每个应用服务器通过网络共享协议（如：NFS、CIFS）使用同一个文件管理系统。换句话说：NAS 和 SAN 存储系统的区别是 NAS 有自己的文件系统管理。
NAS 是将目光集中在应用、用户和文件以及它们共享的数据上。SAN 是将目光集中在磁盘、磁带以及联接它们的可靠的基础结构。将来从桌面系统到数据集中管理到存储设备的全面解决方案将是 NAS 加 SAN。&lt;/p></description></item><item><title>CMDB Value Points 价值点</title><link>https://martinliu.cn/2010/01/01/cmdb-value-points/</link><pubDate>Fri, 01 Jan 2010 05:23:06 +0000</pubDate><guid>https://martinliu.cn/2010/01/01/cmdb-value-points/</guid><description>&lt;p>&lt;a class="link" href="http://www.flickr.com/photos/waywardsheep/682513568/" target="_blank" rel="noopener"
>&lt;img src="http://farm2.static.flickr.com/1296/682513568_4476244046.jpg"
loading="lazy"
alt="The point value"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->CMDB 的价值点分为两类：硬收益和软收益。从硬收益的角度，CMDB 的用户可能会让你来描述 CMDB 对他们的价值点。下面的几个轶事可以作为收集 CMDB 可能为你的企业带来价值点的几个方向：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>把IT环境的可视化带到更高程度&lt;/strong> &amp;ndash;一领先的制热和冷却系统供应商指出，他们始终无法很好的理解一个计划外停机时间对用户所造成影响。例如，当只有25个用户受到了网络中断问题的影响，IT部门必须通知用户群中的全部100个用户。这会导致一个客户满意度低的反馈。CMDB使该公司能够理解配置项之间的关系，并确切地知道在任何确定时刻什么用户会受到影响。现在用户间可信的沟通能够来自于各个IT部门，并且使IT成为业务不可分割的一部分。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>按业务目标来安排系统变更的优先度&lt;/strong>&amp;ndash;大型设备制造商不得不关闭了其所有的系统，后来发现不知道哪些服务器应该先启动。CMDB使公司能区分关键业务元素的优先度，确保减少计划外的停机时间，无形中降低了收入损失的风险。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>减少软件许可证的费用的同时确保用户和服务器能整体的满足许可证遵从性&lt;/strong> &amp;ndash; -的半导体制造商开展了一个审计，结果另他们感到震惊：该公司支持在为大量已经报废的服务器支付支持和维护费用。实际上，该公司关于报废资产的数量已经长期和实际不符了。CMDB有助于该公司发现这一问题，并重新分配预算资金，以更好地支持现有的基础设施。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>为加快服务器整合提供更深层次的资产和关系信息&lt;/strong> &amp;ndash; 一大型的金融服务提供商注意到，在其行业的公司通常在一个较短的时间内，会进行几次成功并购和整合。对于如何整合所有的IT部门是一个重大挑战（有时是次要的），他们往往是停留在相互隔离的工作状态下。然而，使用CMDB的公司就能够有效地集成新的收购，从而节省资金和为公司内部建立统一的IT业务形象。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->IT要实现CMDB的硬收益，一般通过降低以下对象的相关成本来实现：人、第三方服务、软件、硬件和设施。这些方面的价值点可以通过财务方面的分析报表来反映出来。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>CMDB能够实现的价值还包括哪些很难衡量的方面，例如下面的例子解释了这些软价值：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>服务台&lt;/strong> &amp;ndash; CMDB可以从提高事件和问题处理和解决效率和效果的方面来体现出硬利益的成效。还可以认为，CMDB使这种改善更可行，往往服务台技术员从尖锐的客户那里来收集信息是一项非常不快的工作，CMDB可能会提高支持人员支持客户的效率，提高客户满意度。另外，通过为服务团队提供更好的信息，你可能使用较低技术水平的工作人员来完成的相同水平的服务工作，降低在工资成本上的成本。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>变更管理&lt;/strong> &amp;ndash; 通过CMDB这个流程得到了很大的提升，更完善的风险评估，提供更多的信息来评价类似类型CI在过去时间里的变更成功率，并能更好的理解变更CI与其上游和下游其他基础设施组件的依存关系。其结果可能是使企业用户对IT所提供给他们的服务感到更满意，但这是难以像硬效益一样的量化的。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>连续性管理&lt;/strong> &amp;ndash; CMDB的变成了持续管理的记录源泉。拥有了能准确的、更新的描述IT环境状况的信息后，灾难恢复被大大地简化了，这提高了整个组织的信心。这是一个明确的好处，但也不是那么容易量化。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>与业务的影响与和谐&lt;/strong> &amp;ndash; CMDB使CI依赖关系能被更深入的了解。这种理解大大简化了连接CI到依赖于IT基础设施的业务流程或者服务的过程。使IT与业务更紧密的和谐是至关重要的，例如提升响应速度和让业务具有更好的竞争优势，但对比硬利益它也可能是难以量化。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上内容参考了BMC出版的&amp;laquo;step by step to build a cmdb&amp;raquo;;以上软效益对于不同的企业而言可能是不同的，总的来说前两条是显而易见的，你也可能有更好的关于硬效益和软效益的总结和期望。如果有的话一定需要在项目建设前，或者初期阶段中，与CMDB项目相关的利益人和用户做细致的价值点讨论和确认是非常关键的。更进一步价值点的确认也更进一步的指导了CMDB项目实施的方案。BMC Atrium CMDB通过其完备的功能，以及那些以CMDB为核心而建立的ITSM流程应用，能很好的为企业用户实现以上的相关效益。&lt;/li>
&lt;/ul></description></item><item><title>At end of 2009</title><link>https://martinliu.cn/2009/12/31/at-end-of-2009/</link><pubDate>Thu, 31 Dec 2009 09:26:10 +0000</pubDate><guid>https://martinliu.cn/2009/12/31/at-end-of-2009/</guid><description>&lt;p>&lt;img src="http://www.profile-comments.com/images/happy-new-year/images/happy-new-year002.gif"
loading="lazy"
alt="happy new year 2010!"
>&lt;!-- raw HTML omitted -->Martin Liu&amp;rsquo;s blog move to 72pines. I will see how long I could still here. Let&amp;rsquo;s say 6 months.&lt;!-- raw HTML omitted -->[fergcorp_cdt_single date=&amp;ldquo;1 June 2010&amp;rdquo;]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->To do list&lt;!-- raw HTML omitted -->[add] I&amp;rsquo;d like to blog more about C-Bank CMDB project implement.&lt;!-- raw HTML omitted -->[add] I hope I could have sometime for playing with open source software, like opennms, zenoss, otrs, etc&amp;hellip;&lt;!-- raw HTML omitted -->[del] All of duplicate blog post will be deleted from some of my old blog site, including blogspot, chinaunix, msn space etc&amp;hellip;&lt;!-- raw HTML omitted -->To be continued&amp;hellip;.&lt;/p></description></item><item><title>垃圾网站的殉葬品-个人博客</title><link>https://martinliu.cn/2009/12/30/e59e83e59cbee7bd91e7ab99e79a84e6ae89e891ace59381-e4b8aae4babae58d9ae5aea2/</link><pubDate>Wed, 30 Dec 2009 15:41:53 +0000</pubDate><guid>https://martinliu.cn/2009/12/30/e59e83e59cbee7bd91e7ab99e79a84e6ae89e891ace59381-e4b8aae4babae58d9ae5aea2/</guid><description>&lt;p>如果拥有个人博客，并且拥有个人域名，正在租用一个小服务商的虚拟机，那么你的网站可能已经无法访问，由于域名为注册被封，或者由于服务商的机器干 脆被连窝端而无法访问。如果你是我的 blog 的读者的话，我想你已经发现，我的 blog 已经无法访问两天了。我已经可以想象今天的国内互联网上，国内的自 由博主们，已经是哀鸿遍地了！！！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->更有甚者成，我国之互联网正进入全球最大的局域网时代。对垃圾网站的严打可以，但是打到这个程度，究竟打击了谁，我相信那些害群只马一定会转移到国 外，继续他们的活动。所以，倒霉的还是很多自由博主，还是那些提供小型博客服务的小服务商。我想新浪、搜狐、百度他们的 blog 的注册量这几天肯定在节节 攀升吧~那就透着乐吧，我想他们肯定在唱“我们的生活充满了阳光~~~~”国内博客的行业亟待实名制管理，自由博主们也需要阳光。我的博客还无法还原两个 月的内容丢失，阴霾笼罩着我。&lt;/p></description></item><item><title>十月围城</title><link>https://martinliu.cn/2009/12/24/e58d81e69c88e59bb4e59f8e/</link><pubDate>Thu, 24 Dec 2009 13:49:39 +0000</pubDate><guid>https://martinliu.cn/2009/12/24/e58d81e69c88e59bb4e59f8e/</guid><description>&lt;p>港片也能这么拍的如此严肃，港人爱国，武打片打到这么痛楚，普通人普通情感才感人，师徒，父子，领袖和革命党，朋友，夫妻，宏大的历史背景下，平常市井生活里，对最关心的人，关心到底有多少，想爱趁早多一点！&lt;!-- raw HTML omitted -->&lt;img src="http://ent.tom.com/uimg/2009/5/14/wangxuedan/1242262311130_73899.jpg"
loading="lazy"
>&lt;/p></description></item><item><title>老美真的很扯，一个职位的帖子被顶了22次</title><link>https://martinliu.cn/2009/12/24/is-that-a-joke-of-remedy-developer/</link><pubDate>Thu, 24 Dec 2009 13:35:26 +0000</pubDate><guid>https://martinliu.cn/2009/12/24/is-that-a-joke-of-remedy-developer/</guid><description>&lt;p>Remedy 的开发人员或许熟悉这个邮件列表，ARSlist.org；如果没注册的话，一定需要注册一下啊，不为别的，学学英语，看看其他人都聊什么，有什么问题总是不错的。下面这个段子就是最近我看过的最扯的讨论。关键词：Remedy, 职位， OH 州，辛辛那提，Developer，伊拉克，ARS 6.3, ARS 7.5, ITSM 7.5, 巴格达， AK 47，武器，活动链，过滤器，阿富汗，薪水，简历，顾问&amp;hellip;&amp;hellip;. engoy！！！！&lt;!-- raw HTML omitted -->&lt;img src="http://moovik.com/m_pictures/thumbs/Funny-cat-with-orange-on-its-head.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Job: Permanent - Lead Remedy Developer - Cincinnati, OH&lt;!-- raw HTML omitted -->Dear List,&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;1&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->Merry Christmas!&lt;!-- raw HTML omitted -->Title: Lead Remedy Developer&lt;!-- raw HTML omitted -->Location: Cincinnati, OH&lt;!-- raw HTML omitted -->Duration: Permanent (Relocation is offered)&lt;!-- raw HTML omitted -->Start Date: 2-4 Weeks&lt;!-- raw HTML omitted -->Must haves:&lt;!-- raw HTML omitted -->- 5+ Years experience with Remedy&lt;!-- raw HTML omitted -->- Experience with 7.x&lt;!-- raw HTML omitted -->- Stable Resume (No Consultant Resume’s) (Client does not like job hoppers and will reject)&lt;!-- raw HTML omitted -->subtitle: As a senior developer, the individual will create, design, develop, test and implement Remedy applications and workflow enhancements from business requirements, in accordance with the corporate procedures and standards. This individual may also serve as a business analyst or project manager on select projects and may train Remedy users as required.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Additionally, the individual will be responsible for the daily administration, maintenance, monitoring and support of all Remedy applications, servers and reporting in a high-available 24x7 environment. The individual is expected to evaluate Remedy application patches, enhancements and new releases as necessary.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL certification&lt;!-- raw HTML omitted -->CMDB design&lt;!-- raw HTML omitted -->Project Management and SDLC experience&lt;!-- raw HTML omitted -->Business requirements gathering&lt;!-- raw HTML omitted -->Remedy Integration with other technologies and systems&lt;!-- raw HTML omitted -->Respectfully,&lt;!-- raw HTML omitted -->Joshua Kitchen&lt;!-- raw HTML omitted -->Senior Recruiter&lt;!-- raw HTML omitted -->Kforce Federal&lt;!-- raw HTML omitted -->937.449.1749 office&lt;!-- raw HTML omitted -->&lt;a class="link" href="mailto:jkitchen@kforce.com" >jkitchen@kforce.com&lt;/a>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.govtrecruiter.com" target="_blank" rel="noopener"
>http://www.govtrecruiter.com&lt;/a>&lt;!-- raw HTML omitted -->Great People = Great Results®&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;2&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->&lt;strong>&lt;!-- raw HTML omitted -->- Stable Resume (No Consultant Resume’s) (Client does not like job hoppers and will reject)&lt;!-- raw HTML omitted -->My 2 cent&lt;!-- raw HTML omitted -->Having been a Consultant for 8+ years (Remedy Developer for 13+ years), and then taking a Full Time Remedy position with a local company, the value I bring to the organization is huge. As I have seen a lot, traveled the world, assisted a wealth of customers with numerous ITSM and bespoke applications, have a breath of experience that most “Stable” Remedy developers do not have. If there is a seasoned Developer/Consultant that is ready to settle down and eliminate traveling, your client should really rethink their definition of “Stable”, because a Consultant is not a “Job Hopper”&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Doug&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Joshua,&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/strong>&lt;!-- raw HTML omitted -->- Stable Resume (No Consultant Resume’s) (Client does not like job hoppers and will reject)&lt;!-- raw HTML omitted -->Really! What planet is your client from? I would think most consultants would be glad to MILK a project for ALL its worth. But that would be bad business for the employer. So projects tend to adhere to budgeting constraints.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->It is not the consultant’s fault that many Remedy projects end on or ahead of schedule. Unless he/she has worked TOO hard. Apparently your client does not want THAT GUY.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->As my last &amp;ldquo;Permanent&amp;rdquo; job was for an &amp;ldquo;&lt;em>UN&lt;/em>Stable&amp;rdquo; company that &lt;em>Disappeared&lt;/em> one month end of last year,&lt;!-- raw HTML omitted -->I couldn&amp;rsquo;t have said it better myself&amp;hellip;spot on Doug!&lt;!-- raw HTML omitted -->Happy Holidays To You and Yours!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;5&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Read between the lines dudes :-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->We need a Lead Remedy developer who has the experience of a junior/trainee Remedy Administrator, and who is willing to work at the wages of a gas station attendant.. No expenses paid. Must be willing to work late hours - no overtime.. Must have had his first job as a gas service attendant for at least 5 years..&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Joe&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;6&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->You guys give ol Josh a break, he is just relaying what his customer wants… If any consultants want to apply for that position I bet you can send an updated resume to accommodate getting to the interview. I think that it’s funny though that some employers do not realize anything about this product or the way that it is developed or administered. But I guess that is what recruiters are actually for right?&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;7&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Hey Tommy,&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->We just like to have harmless fun sometimes :-) We know (at least most of us) Josh for a while as well as the fact that recruiters / employers sometimes have no clue what they are talking about. Time and again I have come across employing interviewers question me about the implementation of ITIL as if it were a physical product. Its nothing new.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Yes not so hard to update a resume to make it like you were on a &amp;lsquo;stable&amp;rsquo; job and not a &amp;lsquo;job hopper&amp;rsquo;. Technically if I were to do that, it would look like I worked for just 2 companies over the 12 years I have worked with Remedy. I had to do just quite the opposite when I started looking for consulting gigs, and name every customer my old company had as a different project so that it would look more like a &amp;lsquo;job hoppers&amp;rsquo; resume.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Its just a wrapping paper. At the end of the day you are the real stuff - what you know or do not, and can do or cannot, makes the difference to a smart employer (if they exist).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Joe&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->Did you notice the slight jab at the end of the note? I just wanted to get in a shot. It drives me crazy that there is such a disconnect between the hiring manager and the HR team in most companies.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->One of my favorite job adverts had the perfect candidate as being aged 21 – 25, Bachelors degree and 6+ years experience in a corporate environment. The math just didn’t add up unless you started your degree plan at before you were 13.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;9&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->As recruiters who have filled numerous Remedy positions in IRAQ and elsewhere we have tried to always be responsive to the needs of the client and the realities of the talent pool. The external recruiter&amp;rsquo;s role does not stop with the resume.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->With respect to the current thread, there is a real clue re the client&amp;rsquo;s mind set and/or lack thereof, when they use the word &amp;ldquo;Permanent&amp;rdquo; in their job description. How do you spell &amp;ldquo;law suit?&amp;quot;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->There are no &amp;ldquo;permanent&amp;rdquo; jobs out there.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->_ Contract positions or&lt;!-- raw HTML omitted -->_ Employee positions&amp;hellip;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Time for a reality check. We expect to be looking for &amp;ldquo;Senior Remedy Engineers&amp;rdquo; for both Afghanistan and Iraq&amp;hellip;Anyone interested?&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Happy Holidays&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Sincerely,&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Jeff Glaser&lt;!-- raw HTML omitted -->INVIZCORP&lt;!-- raw HTML omitted -->703-729-3382&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;10&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->Do the Afgan and Iraq positions come with weapons training? Haven’t fired a Mark 19 in a while but I’m sure the mechanism hasn’t changed would love to renew the qualification though lol&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;11&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Someone actually mentioned age as a desirable quality in a job posting? That would be discriminatory.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;12&amp;mdash;&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->If you had issues with the weapon.. would you check active links or filters to see why it’s not firing?&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;13&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->Lol Is it Friday already?!?! That was a pretty good one.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;14&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->Active links, since the trigger is executed by the user action.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Rick&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;15&amp;mdash;&amp;mdash;&amp;mdash;-&lt;!-- raw HTML omitted -->But that weapon is an automatic so you would need to check filters as well if the first round went off but then misfired on the next firing order. Maybe even check API logging of the belt stopped feeding correctly.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;16&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->I would have an escalation throw out a grenade every 5 minutes. RUNIF: weapon jams.. J&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I’d stick around Tommy since you already had weapons training… unless, of course, you trained with Dick Cheney.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->.&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;TTTT_&amp;mdash;&amp;ndash;&lt;strong>___&lt;/strong>&lt;!-- raw HTML omitted -->/&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;&amp;rsquo;(&lt;strong>__&lt;strong>O] &amp;mdash;&amp;mdash;&amp;mdash;-_&lt;/strong>_ ____&lt;/strong>/]_&lt;!-- raw HTML omitted -->&lt;strong>&amp;hellip;&amp;mdash;&amp;rsquo;&amp;rdquo;&amp;quot;&amp;quot;_ &amp;ndash;&amp;rsquo;&amp;rsquo; Q &lt;strong>&lt;strong>_&lt;/strong>&lt;/strong>&lt;/strong>@&lt;!-- raw HTML omitted -->|&amp;rsquo;&amp;rsquo;&amp;rsquo; ._ &lt;strong>&lt;strong>&lt;strong>___&lt;/strong>&lt;/strong>&lt;/strong>=&amp;mdash;&amp;mdash;&amp;mdash;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;!-- raw HTML omitted -->| ..&amp;ndash;&amp;rsquo;&amp;rsquo;| l L |_l |&lt;!-- raw HTML omitted -->| ..&amp;ndash;&amp;rsquo;&amp;rsquo; . /-&lt;strong>_j &amp;rsquo; &amp;lsquo;&lt;!-- raw HTML omitted -->| ..&amp;ndash;&amp;rsquo;&amp;rsquo; / , &amp;rsquo; &amp;lsquo;&lt;!-- raw HTML omitted -->|&amp;ndash;&amp;rsquo;&amp;rsquo; / ` &amp;lt;br /&amp;gt;|&lt;/strong>&amp;rsquo; \ -&lt;!-- raw HTML omitted -->- &amp;lsquo;-.&lt;!-- raw HTML omitted -->&amp;rsquo;. /&lt;!-- raw HTML omitted -->&amp;rsquo;-./&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;17&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->You could also add in an exclusion in the Runif clause just to be on the safe side If $USER$ != “dchene1”&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Nice AK. You know I think that symbol art is coming back en vogue,&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;18&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->What would be the client type? Unknown?&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;19&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->Client type would be terrorist or freedom fighter depending on who was holding the UI.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Escalations would be no good unless you happened to be testing something when the enemy was in line with the weapon that was firing at the given time or interval!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Filters would be no good because of the network lag between the client and the server by the time the result computed fire, the target had moved out of the kill zone!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Sorry guys and girls but always ends up with some grunt holding the weapon and firing the trigger.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Rob&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;20&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->Your right Rob. The &amp;ldquo;grunt&amp;rdquo; part.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->As it turns out Joe was spot on about the position &amp;ldquo;gas station attendant&amp;rdquo;.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I haven&amp;rsquo;t see the wage that was offered, since I worked with the old UNIX client.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Remember&amp;hellip; that was before we had Active Links&amp;hellip;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;21&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->You could have actions like Change Fields (of fire), Open Window (for grenades), and Call Guide (for arty).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Rick&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;22&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->Don&amp;rsquo;t forget to include an active link guide for autofire.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;lsquo;threats&amp;rsquo; &amp;gt; 1 AND &amp;lsquo;LastThreatEliminated&amp;rsquo; != &amp;ldquo;Yes&amp;rdquo;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SQL Statement Set Field&lt;!-- raw HTML omitted -->SELECT MIN(TargetDistance) FROM CURRENT_BATTLEFIELD.FIELD_OF_FIRE WHERE TARGET_STATUS=&amp;lsquo;ALIVE&amp;rsquo;&lt;!-- raw HTML omitted -->SET FIELD &amp;lsquo;ThreatDistance&amp;rsquo; = $1$&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If &amp;rsquo;threats&amp;rsquo; &amp;gt; 1&lt;!-- raw HTML omitted -->PERFORM-ACTION-PULL-TRIGGER &amp;ldquo;&amp;lsquo;ThreatDistance&amp;rsquo;&amp;quot;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->On a serious note. If you&amp;rsquo;re looking for a contract, go for Iraq before Afghan. They&amp;rsquo;re trying to pay people the same amount of money for both places. Left Iraq 6 weeks ago. No way I&amp;rsquo;d go to Afghan for the same pay. (Living conditions are worse, more time off to sit around and do nothing(very boring), and we got almost no incoming at Victory in Baghdad.)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->As far as the Iraq posting. It says ARS 6.3 but that description is 4 years old. It&amp;rsquo;s 7.1, ITSM 7.0.3. 7.5 is probably never going to happen there. But if you you&amp;rsquo;re looking for a new contract and want to get paid pretty good to learn ITSM 7 and get some experience with 7.1 (that&amp;rsquo;s why I went) then send Jeff Glasser your resume.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Jason Bess&lt;!-- raw HTML omitted -->Remedy Developer/Consultant&lt;!-- raw HTML omitted -->Bess Development Corporation&lt;!-- raw HTML omitted -->(My position is the one they&amp;rsquo;re back-filling in Iraq right now. I won&amp;rsquo;t lie, it sucked being there. But the $95k tax exclusion, massive paychecks, and experience were unbeatable.)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;The End&amp;ndash;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->请问 16 楼贴出的是何物？哈哈:)&lt;/p></description></item><item><title>资产CI的一生</title><link>https://martinliu.cn/2009/12/13/service-asset-ci-life-cycle/</link><pubDate>Sun, 13 Dec 2009 07:45:00 +0000</pubDate><guid>https://martinliu.cn/2009/12/13/service-asset-ci-life-cycle/</guid><description>&lt;p>在 ITIL v3 以后，配置管理进化为“服务资产和配置管理 SACM”，换句话说，资产和配置管理不分家。两个流程应该是融合的。从微观上看资产管理设计到 CI 的所有生命周期状态，而这个服务资产在 CMDB 中出现的状态为整个生命周期中的一部分。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="http://www.butterfliesandart.com/Butterfly_Life_Cycle/Lifecycle3large.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最好能通过资产管理为统一入口，来完成对 CMDB 中资产的生命周期管理。例如：一台服务器在到货以后，完成资产入库后，就应该在 CMDB 中自动创建 CI，在上架部署了软件后，有配置资产自动采集工具，采集回详细配置信息后，资产状态就自动变为“部署”，当在运行维护中服务器宕机或者维护时，在资产管理中也能看到更新的信息。下面是建议的服务资产的生命周期状态:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>Remedy ITSM 7.6 installation Tips</title><link>https://martinliu.cn/2009/11/28/remedy-itsm-76-installation-tips/</link><pubDate>Sat, 28 Nov 2009 09:29:04 +0000</pubDate><guid>https://martinliu.cn/2009/11/28/remedy-itsm-76-installation-tips/</guid><description>&lt;p>自从 7.6 发布和以后一直没有时间安装，通过最近的几次安装，积累了一些经验，供大家参考。在安装开始之前请一定查看&lt;a class="link" href="http://www.bmc.com/support/product-availability-compatibility" target="_blank" rel="noopener"
>ARS_7500_Comp_Matrixv1001.pdf&lt;/a>文档，保证操作系统、数据库、中间件和 JDK 的版本都符合要求。如果是安装生产系统的话，建议把数据库和应用服务器分开，硬件配置也一定参考 Remedy ITSM 安装手册中的建议硬件配置要求。&lt;/p>
&lt;p>&lt;img src="http://www.beareyes.com.cn/2/lib/200701/19/452/image002.jpg"
loading="lazy"
>&lt;img src="http://www.my-softwareteacher.com/images/oracle_logo.gif"
loading="lazy"
>&lt;/p>
&lt;p>最近在 Linux 的虚拟机上做了一次安装，相关细节如下:&lt;/p>
&lt;ul>
&lt;li>Suse Linux Enterprise server 10 sp2 64 bit&lt;/li>
&lt;li>Oracle 10G 64bit (10201_database_linux_x86_64.cpio.gz)&lt;/li>
&lt;li>JDK 1.6(jdk-6u6-linux-i586.bin)&lt;/li>
&lt;/ul>
&lt;p>在 Suse Linux 上安装 Oracle 还是比较容易的，可以参考这个安装手册进行，&lt;a class="link" href="ftp.novell.com/partners/oracle/docs/10gR2_sles10_install.pdf" >下载&lt;/a>。数据库安最好按照成 utf8 字符集，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/?attachment_id=50187" target="_blank" rel="noopener"
>&lt;/a>&lt;a class="link" href="http://martinliu.cn/http:/martinliu.cn/2009/11/remedy-itsm-76-installation-tips.html/snap00142/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2009/11/snap00142-300x234.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>Remedy ITSM 套件的安装分为三个步骤：1）ARS 7.5 SP3 的安装；2）Atrium CMDB7.6 安装；3）ITSM 7.6 安装；其中第一步是最重要的，第二步骤如果安装产品目录数据的话时间花费比正常多一点。Remedy ARS 7.5 是最新的补丁包，它修复了 sp2 的很多 bug；是 Remedy ITSM 7.6 安装的必须版本。在安装 ARS 的时候需要准确的导出相关的环境变量，如果环境变量没有或者不够的话，安装程序则无法正确地连接数据库，下面的例子可以参考一下。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/http:/martinliu.cn/2009/11/remedy-itsm-76-installation-tips.html/snap00143/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2009/11/snap00143-300x59.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>每一步安装完成之后都需要详细查看相关的日志，确保每一步都安装完全正确。在安装完 ARS 之后一定要为服务器添加所有相关 License。&lt;/p></description></item><item><title>2012</title><link>https://martinliu.cn/2009/11/23/2012/</link><pubDate>Mon, 23 Nov 2009 04:54:19 +0000</pubDate><guid>https://martinliu.cn/2009/11/23/2012/</guid><description>&lt;p>妹妹问：那么 2012 年的奥运会还办不办了？无语&amp;hellip;..这个电影中有很多情节与中国相关，特效不错，这可能是吸引人去电影院看的原因吧。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="http://img1.cache.netease.com/catchpic/3/39/397895DE161987F5BE74EBA36D1A7B4E.jpg"
loading="lazy"
alt="特效太牛 世界在你眼前毁灭(组图)"
>&lt;!-- raw HTML omitted -->&lt;img src="http://img1.cache.netease.com/catchpic/2/25/2502574AFE718FA450D16AD0EE504C91.jpg"
loading="lazy"
alt="特效太牛 世界在你眼前毁灭(组图)"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个电影倒是让人对玛雅文化产生了兴趣，有空可以看看。&lt;/p></description></item><item><title>What's Google Chrome OS</title><link>https://martinliu.cn/2009/11/23/whats-google-chrome-os/</link><pubDate>Mon, 23 Nov 2009 04:38:51 +0000</pubDate><guid>https://martinliu.cn/2009/11/23/whats-google-chrome-os/</guid><description>&lt;p>看完这个视频之后，还是没搞清楚：它到是一个快速的浏览器，还是一个快速启动的 OS 加浏览器，如果它仍然需要 OS 的话，那么它不过是一个 Redesigned 的 OS+操作系统。说白了就是瘦客户端加肥浏览器的组合吧！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->您用 Google 的浏览器么？我用了一次就删除了，至今没有尝试装 Google 的操作系统。&lt;/p></description></item><item><title>CMDB选型解密</title><link>https://martinliu.cn/2009/11/19/how-to-select-a-cmdb/</link><pubDate>Thu, 19 Nov 2009 16:32:22 +0000</pubDate><guid>https://martinliu.cn/2009/11/19/how-to-select-a-cmdb/</guid><description>&lt;p>自打承接了《Step by Step Guide to Building a CMDB (Updated for ITIL V3)》的翻译工作之后，由于平时工作太忙，翻译工程只能在业余时间完成；现在渐渐感到了此项工作的压力，每每想到读者对英文翻译版本读物的高期望和要求时，就愈加感到此项工作责任之重。不过本书对我来说还是一剂很好的补品，对我最近的 ITSM 项目都有直接的借鉴和指导作用。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->说来此书有很多实用且精彩之处，相信读了英文原版的人更能有所体会。我忍不住想把其中的部分内容提前与你们探讨，这里想与你们分享如下两个内容。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a class="link" href="http://www.flickr.com/photos/liuzheng/4117747508/" target="_blank" rel="noopener"
>&lt;img src="http://farm3.static.flickr.com/2604/4117747508_d3d109c936.jpg"
loading="lazy"
alt="CMDB core functions for consideration"
>&lt;/a>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上图还给所有 CMDB 用户一个清晰地 CMDB 功能点考察点，CMDB 作为业务服务管理的核心，各个厂商其实并没有达成解决方案功能的标准和共识。通常情况下厂商提供的 CMDB 产品的发展和起源有以下几种情况：1）按照 ITIL 中对 CMDB 的需求和标准从无到有开发的标准 CMDB 产品；2）伴随变更流程或者业务影响管理而开发的 CMDB 功能模块；3）伴随配置自动化发现工具而开发的相应 CMDB 功能模块；4）应资产管理或者监控工具扩展而生的 CMDB 功能产品。用户在挑选 CMDB 产品的时候一定要明确 CMDB 的核心功能，除了以上功能外，其他的附加功能可能是 nice to have 的功能，而非必须。本图位于原版书的 134 页，如果您对我的翻译有建议请留言，多谢！&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a class="link" href="http://www.flickr.com/photos/liuzheng/4117761602/" target="_blank" rel="noopener"
>&lt;img src="http://farm3.static.flickr.com/2639/4117761602_c0bd1ffe63.jpg"
loading="lazy"
alt="Example of vendor scoring system"
>&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>上表为评估一个 CMDB 产品厂商的综合打分评价表样例。在选择并且评测一个 CMDB 厂商时，需要仔细考察的产品功能共有 8 点。用户需要注意的是一定要搞清楚其中的每一个功能是否是由厂商的 CMDB 产品的相关模块所提供的，如果不是的话需要搞清楚，每个功能是否是 CMDB 的外围或者其他产品模块，或者二次开发实现的。如果是这样的话，这种解决方案可能不是一套集成统一的解决方案，可能出现其他附加非 CMDB 产品的采购，可能在实施阶段付出不必要的集成和开发费用。虽然这些潜在因素在采购和实施阶段可能是隐形出现的。征集上表中相关术语的中文翻译：Weighted ，Weighted Rating Score，Total Weighted Score。有好的建议请留言。本图位于原版书籍的 141 页。&lt;/p></description></item><item><title>下雪了</title><link>https://martinliu.cn/2009/11/10/e4b88be99baae4ba86/</link><pubDate>Tue, 10 Nov 2009 06:42:20 +0000</pubDate><guid>https://martinliu.cn/2009/11/10/e4b88be99baae4ba86/</guid><description>&lt;p>二零零九年的第二场雪，比以往的都来的大一点。&lt;!-- raw HTML omitted -->昨天晚上的大雪让我感到惊喜，今天早晨空气非常好，不过地铁里的人很多。&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.flickr.com/photos/liumartin/4092220868/" target="_blank" rel="noopener"
>&lt;img src="http://farm3.static.flickr.com/2581/4092220868_4a9c0c2273_o.jpg"
loading="lazy"
alt="snow"
>&lt;/a>&lt;/p></description></item><item><title>Knowing</title><link>https://martinliu.cn/2009/11/09/knowing/</link><pubDate>Mon, 09 Nov 2009 02:52:10 +0000</pubDate><guid>https://martinliu.cn/2009/11/09/knowing/</guid><description>&lt;p>这个电影的官方网站是很炫的，但是看后感觉真的不怎么样。&lt;a class="link" href="http://www.knowing-themovie.com/" target="_blank" rel="noopener"
>http://www.knowing-themovie.com/ &lt;/a>看是感觉有点悬疑，接着又一点点的惊悚，然后算是带点科幻吧，地球被一个太阳的耀斑给毁灭。俩小屁孩被什么人/外星人接到了另外的一个星球上。难道这就是传说中的亚当与夏娃么？&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://martinliu.cn/2009/11/09/knowing/knowing_foreign_poster3/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/11/knowing_foreign_poster3.jpg"
loading="lazy"
alt="knowing_foreign_poster3"
>&lt;/a>&lt;/p></description></item><item><title>汝亦知射乎</title><link>https://martinliu.cn/2009/11/03/how-to-get-smart/</link><pubDate>Tue, 03 Nov 2009 02:25:50 +0000</pubDate><guid>https://martinliu.cn/2009/11/03/how-to-get-smart/</guid><description>&lt;p>康肃问曰：“汝亦知射乎？吾射不亦精乎？”翁曰：“无他，但手熟尔。”康肃忿然曰：“尔安敢轻吾射！”翁曰：“以我酌油知之。”乃取一葫芦置于地，以钱覆其口，徐以杓酌油沥之，自钱孔入，而钱不湿。因曰：“我亦无他，惟手熟尔。”康肃笑而遣之。&lt;!-- raw HTML omitted -->ZT&amp;ndash; 欧阳修《卖油翁》&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://martinliu.cn/2009/11/03/how-to-get-smart/eye/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/11/eye.jpg"
loading="lazy"
alt="From my viewpoint"
>&lt;/a>MY VIEWPOINT：IT 管理的好坏与否，不是依靠个体的技术能力和熟悉程度。铜钱上的孔，是衡量能力和筛选智慧的重要工具。智慧获取数据抽取-&amp;gt;分析-&amp;gt;转化的能力和工具。这三个过程中越往后对工具的依赖程度越低。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://martinliu.cn/2009/11/03/how-to-get-smart/attachment/20080620094847/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/11/20080620094847.gif"
loading="lazy"
alt="基于数据构建的智慧分层体系"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如图所示，“数据包”是从一个层次传递到下一个层次。“智慧”层次具有作出明智决策必需的所有组成部分 —&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->数据、信息和知识。当然，可以在任意层次作出决策，这取决于现有的结果和条件。下面的例子用于说明在各个层次进&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->行决策的过程：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->　　**数据层：**服务台经理发现有二十位客户等待打入电话。他可能会决定临时增加一线客户服务人员的数量，这是根据&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->一条数据制定的决策。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->　　&lt;strong>信息层&lt;/strong>：在另一类似的情况下，有 20 位客户等待打入电话，但这次经理掌握了更多的数据。他知道有一台目前已&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->停机但马上将恢复正常的服务器。在这种情况下，经理可能决定稍后再增加一线客户服务人员的数量，因为他（或她）&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->怀疑这两个问题是相关的。在拥有多个数据源的情况下，经理掌握的信息更多，并将根据可用信息作出决策。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->　　**知识层：**服务台经理发现等待打入电话的客户不断增多，而且某台服务器即将接近满负荷运转。因为她拥有用以&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->说明如何应对此情况的信息，所以可以立即采取适当的行动隔离并解决问题。这个决策是基于知识作出的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->　　**智慧层：**IT 执行官正在温习上个月的知识，并发现某一供应商提供的几台服务器出了问题。他们将决定要求供应&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->商评估其所有服务器，以确定其他服务器是否会出现同样的问题。这个决策是基于智慧作出的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->　　尽管这些例子可能过于简单，但它们可作为理解“智慧分层体系”的参考。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->来源：行业外网&lt;/p></description></item><item><title>选书名</title><link>https://martinliu.cn/2009/10/29/pick-a-book-name-for-step-by-step-guide-to-building-a-cmdb/</link><pubDate>Thu, 29 Oct 2009 01:48:58 +0000</pubDate><guid>https://martinliu.cn/2009/10/29/pick-a-book-name-for-step-by-step-guide-to-building-a-cmdb/</guid><description>&lt;p>好消息《Step by Step Guide to Building a CMDB (Updated for ITIL V3)》即将翻译成中文出版。市场里 ITIL 的书越来越多，但是讲 CMDB 的书却一直很少，能讲解清楚 CMDB 建设过程的的书就更少。可是国内 ITIL 用户 CMDB 建设之瓶颈却越来越明显，我们希望有一本好的书作为这项重要工作的参考指南。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.bmc.com/products/product-listing/53556216-141391-2117.html" target="_blank" rel="noopener"
>&lt;img src="http://ecx.images-amazon.com/images/I/41obkAD85tL._SL500_AA240_.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->给此书起一个好的名字是头等大事，目前能想到的书名如下：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://answers.polldaddy.com/poll/2182921/" target="_blank" rel="noopener"
>Step by Step Guide to Building a CMDB 中文书名？&lt;/a>(&lt;a class="link" href="http://answers.polldaddy.com" target="_blank" rel="noopener"
>polls&lt;/a>)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->寻求前 100 名投票者，请对以上书名投票，并评论；如果您有更好的书名，欢迎推荐；请在下面留言，请正确填写邮箱，您推荐书名一旦被选用必有感谢送上。&lt;/p></description></item><item><title>小人物大英雄</title><link>https://martinliu.cn/2009/10/22/small-person-big-hero/</link><pubDate>Thu, 22 Oct 2009 14:12:47 +0000</pubDate><guid>https://martinliu.cn/2009/10/22/small-person-big-hero/</guid><description>&lt;p>又一个小人物大英雄的美国片。10-1 前后红色电影充斥所有影院，这是近期看过的最好看的一部电影了。比较好的刻画了一个人物的多面性。影片中描写了很多耐人寻味的小概率事件。这个情节比较紧凑，高潮出现在主角被迫送钱。故事结尾他乘坐地铁，带着一加仑牛奶平安回家，看似一个小市民平常的一天。&lt;!-- raw HTML omitted -->电影海报如下图所示。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://martinliu.cn/2009/10/22/small-person-big-hero/e59cb0e99381e6838ae9ad82/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/10/e59cb0e99381e6838ae9ad82.jpg"
loading="lazy"
alt="地铁惊魂"
>&lt;/a>&lt;/p></description></item><item><title>何谓云？</title><link>https://martinliu.cn/2009/10/21/what-is-cloud-computing/</link><pubDate>Wed, 21 Oct 2009 04:36:11 +0000</pubDate><guid>https://martinliu.cn/2009/10/21/what-is-cloud-computing/</guid><description>&lt;p>下面是两个 Youtube 上的视频，短短 5 分钟的视频就把云计算的相关核心概念解释的很清楚。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->好像国内吧 Youtube 给屏蔽了，上面的视频可能看不到，Google 真的应该和中国政府把关系搞好，哎~~&lt;/p></description></item><item><title>DELL如何管理IT？</title><link>https://martinliu.cn/2009/10/20/how-dell-does-it/</link><pubDate>Tue, 20 Oct 2009 03:17:01 +0000</pubDate><guid>https://martinliu.cn/2009/10/20/how-dell-does-it/</guid><description>&lt;p>Dell is a big company, if you wants to know how DELL does IT management with BMC, please check out this vide form Dell website.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->DELL 是一个家喻户晓的公司，它是如何做 IT 管理的呢？请查看这段来自 DELL 网站的视频。视频中谈到 DELL 采用的是全套 ITSM 套件，提到很多的是相关流程是如何使用 CMDB 的配置信息的，从一个侧面我们可以看到配置管理的重要性。CMDB 可以看着成熟客户的标志。&lt;/p></description></item><item><title>手把手教您构建CMDB/CMS</title><link>https://martinliu.cn/2009/10/17/step-by-step-guide-to-building-a-cmdb/</link><pubDate>Sat, 17 Oct 2009 09:37:08 +0000</pubDate><guid>https://martinliu.cn/2009/10/17/step-by-step-guide-to-building-a-cmdb/</guid><description>&lt;p>If you have no idea about how to build a CMDB, you should check out this document. &lt;img src="http://media.cms.bmc.com/images/products-graphics-logo-atrium.gif"
loading="lazy"
>&lt;!-- raw HTML omitted -->It come from &lt;a class="link" href="http://www.bmc.com/products/product-listing/53556216-141391-2117.html" target="_blank" rel="noopener"
>http://www.bmc.com/products/product-listing/53556216-141391-2117.html&lt;/a>&lt;!-- raw HTML omitted -->Download it: &lt;a class="link" href="http://documents.bmc.com/products/documents/60/54/96054/96054.pdf" target="_blank" rel="noopener"
>Step by Step Guide to Building a CMDB (Updated for ITIL V3)&lt;/a> (pdf)&lt;!-- raw HTML omitted -->该《手把手 CMDB/CMS 构建指导手册》包括了配置管理数据库/系统建设的所有相关流程、技术和指导性建议。如果你有 CMDB 的建设意向，该手册非常值得仔细阅读。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->欢迎留下一个反馈，投票或者留言都行。&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;8&amp;rdquo;]&lt;/p></description></item><item><title>CMDB中存什么？</title><link>https://martinliu.cn/2009/10/05/what-does-cmdb-store/</link><pubDate>Mon, 05 Oct 2009 15:21:24 +0000</pubDate><guid>https://martinliu.cn/2009/10/05/what-does-cmdb-store/</guid><description>&lt;p>[caption id=&amp;quot;&amp;quot; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;406&amp;rdquo; caption=&amp;ldquo;dmtf.org&amp;rdquo;]&lt;img src="http://www.dmtf.org/home/Computer_stoxx.JPG"
loading="lazy"
alt="dmtf.org"
>[/caption]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->当然是配置项和它们之间的关系，即：CI 和   Relationship。 那么如何规划那些类型的 CI 和 Relationship 需要保存到 CMDB 中呢？可以参考的数据模型是 DMTF 的通用信息模型，它是以面相对象的方式来描述各类 CI 和关系。它是一个工具用来帮你对环境中的各种物理和逻辑的 CI 和关系进行分类，参考这个模型选择一些有用的类（广度），然后在参考它对每个类属性的描述（粒度）。这些类的选择只是一个初步的研究，每个 CMDB 厂商和工具对其实施和参考的力度都不同，也需要看您具体实施的是什么工具。例如：你需要描述银行基金业务系统，你可能选择的 CI 类包括：客户群、业务流程、业务活动、业务服务、IT 服务、应用系统、应用、软件服务器、服务器、网络、存储等；关系包括：组件、依赖和影响。CI 类和关系的选择也基本上遵循够用就好的原则；而且每个类对应的 CI 实例都需要有人负责管理维护，需遵循，谁负责、谁维护的原则保障其属性的精确性。对于整个 CMDB 来说如果存在没有 Onwer 的 CI 或者关系，如果它是由自动化配置发现工具来更新的；那么它可以存在，如果不是的话，它可能根本就不该存在。所以 CMDB 中保存的数据不是越多，越细越好；而是够用就好，能保证更新就好。由于数据根本就不是免费的，即使国内的人力成本低，也不应该雇用一帮专职更新 CMDB 的人。 综上所述：我们说明了 CMDB 中数据选取和存放的最基本原则和方法，在 CMDB 产品选型过程中需要着重考察产品的数据模型本身和其管理的能力，还包括其 CI 和关系的扩展和定制能力；包括数据类型的支持和界面定制的程度。那么 CMDB 中的 CI 和关系有该如何展现呢？这是 CMDB 系统的另外一个功能：可视化。下面是一个 CI 和关系展示的实例供参考：&lt;!-- raw HTML omitted -->[http://media-001.yo2cdn.com/wp-content/uploads/266/26670/2009/10/s1-4-blog.swf#swf&amp;amp;width=320&amp;amp;height=320]&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://martinliu.cn/2009/10/05/what-does-cmdb-store/s1-4-blog/" target="_blank" rel="noopener"
>&lt;/a>&lt;a class="link" href="http://media-001.yo2cdn.com/wp-content/uploads/266/26670/2009/10/s1-4-blog.swf" target="_blank" rel="noopener"
>全屏查看或者下载 Flash 文件&lt;/a>&lt;!-- raw HTML omitted -->第一代的配置展示方式是，纯数据表格方式。第二代具有一种固定格式的图形展示方式，除了那几张视图外，别的需要单独开发。下一代的具有各种视图定制功能，并且支持关系和 ci 的过滤等等。&lt;/p></description></item><item><title>博客再次搬家回国</title><link>https://martinliu.cn/2009/10/05/bo-ke-zai-ci-ban-jia-hui-guo/</link><pubDate>Mon, 05 Oct 2009 09:16:20 +0000</pubDate><guid>https://martinliu.cn/2009/10/05/bo-ke-zai-ci-ban-jia-hui-guo/</guid><description>&lt;p>趁着国庆长假，我有空吧 Blog 从国外的免费虚拟主机搬回国，搬到了 yo2.cn。原因意外，不知道为啥，访问 martinliu.cn 首页时，总是被重定向到 myfacebook.net 上，访问其它二级页面没有问题。这个问题让我着实抓狂了好几周，国庆前的几周一直在上海出差，比较忙，基本上 9 月九荒废了，别说解决这个问题，就连一篇 blog 也没有时间写啊！想到现在还是没有想清楚，被重定向的原因到底为何？可能是被黑了，可能是被强制添加了广告。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->不过这个事件也不全是我搬回国的原因，其它原因：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>国内读者居多，从google的统计上可以看出，本blog的主要读者都在国内。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>域名已经备案了，上次转到国外的原因是域名未备案
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>实在懒得自己维护插件和blog本身，我已经把blog模版恢复到了默认模版，插件已经减少到最少，这样blog也可以快一点
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>实在没有精力维护虚机和域名绑定之类的事，WordPress对我来说可能只剩下一种功能就是Publish，呵呵其它的工作都交给服务商吧。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->目前用的是DNSPad的DNS服务，yo2的WordPress服务，他们两个好像都与针对国内电信、网通和教育网的加速功能。那么目前您觉得网站速度如何了呢？方便的话给我一个反馈哦。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;7&amp;rdquo;]&lt;/li>
&lt;/ol></description></item><item><title>国庆掠影</title><link>https://martinliu.cn/2009/10/05/guo-qing-l/</link><pubDate>Mon, 05 Oct 2009 04:29:44 +0000</pubDate><guid>https://martinliu.cn/2009/10/05/guo-qing-l/</guid><description>&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; columns=&amp;ldquo;3&amp;rdquo; orderby=&amp;ldquo;ID&amp;rdquo;]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->图片说明：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>十月一日，早晨在阳台上拍摄的空军演习，有8架战斗机
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>十月一日，早晨在阳台上拍摄的空军演习，有4架战斗机
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>十月一日，晚上到北京中轴线南端的“永定门”，准备观看天安门的礼花
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>图片4-6，十月一日,在天桥附近看到的天安门广场的礼花，很壮观
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->由于照相机有限，拍的不是很清楚，全当留个纪念吧。&lt;/li>
&lt;/ol></description></item><item><title>MartinMarks for 29th August</title><link>https://martinliu.cn/2009/08/29/martinmarks-for-29th-august/</link><pubDate>Sat, 29 Aug 2009 16:27:38 +0000</pubDate><guid>https://martinliu.cn/2009/08/29/martinmarks-for-29th-august/</guid><description>&lt;p>&lt;strong>&lt;a class="link" href="http://www.cio.com/article/437682/New_IT_Job_CMDB_Manager/1" target="_blank" rel="noopener"
>New IT Job: CMDB Manager&lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->从此 IT 部门有多了一个职位 CMDB 经理，不过某人的工作量加倍了也没准哈哈，从这个文章中可以看出这并不是一个可有可无的职位，而且 CMDB 的建设和推广，以及管理和其他的 ITIL 流程没有区别，需要结合技术、流程和人老三样，而且要再次改造人们对于配置管理的行为方式和文化了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>&lt;a class="link" href="http://www.forrester.com/Research/Document/Excerpt/0,7211,44798,00.html" target="_blank" rel="noopener"
>Role Overview: CMDB Manager&lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->CMDB 经理负责管理和维护您的 CI，工作内容都有了，CIT/CTO 招不招这个人由您。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>&lt;a class="link" href="http://www.networkworld.com/news/2006/073106-configuration-management-database.html" target="_blank" rel="noopener"
>CMDBs reduce costs, automate tasks&lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->CMDB 更多的不是一种技术，更多的是流程，联邦技术让您从一个集中的 CMDB 来访问这个多元化多变的世界。CMDB 信息需要多种来源、产品和工具。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>&lt;a class="link" href="http://www.itskeptic.org/itil-cmdb-skeptic" target="_blank" rel="noopener"
>Top 10 reasons NOT to implement CMDB&lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->不去实施 CMDB 的 10 个理由&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>&lt;a class="link" href="http://blog.evergreensys.com/post/2007/05/31/Top-Ten-Reasons-to-Implement-a-CMDB.aspx" target="_blank" rel="noopener"
>Top Ten Reasons to Implement a CMDB&lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->实施 CMDB 的 10 个理由&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>&lt;a class="link" href="http://www.networkworld.com/newsletters/nsm/2007/0305nsm2.html" target="_blank" rel="noopener"
>The federated CMDB: Getting past the hype to the good stuff &lt;/a>&lt;/strong>&lt;!-- raw HTML omitted -->cmdbf 标准的实施在各家产品中尚处于开始阶段，是否大家都会照着做呢。联邦让所有的配置数据更易访问。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Logo Mark&lt;/strong>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.itsmcommunity.org/" target="_blank" rel="noopener"
>&lt;img src="http://www.itsmcommunity.org/themes/itsmcommunity/banner.jpg"
loading="lazy"
alt="ITSM Community"
>&lt;/a>&lt;/p></description></item><item><title>IT服务管理考核向左走向右走: CSF OR KPI?</title><link>https://martinliu.cn/2009/08/29/csf-or-kpi-matrix-itsm/</link><pubDate>Sat, 29 Aug 2009 14:18:33 +0000</pubDate><guid>https://martinliu.cn/2009/08/29/csf-or-kpi-matrix-itsm/</guid><description>&lt;p>最近做的一个项目中需要帮用户设计一个 CMDB 的成熟度模型，能够从该模型中持续的检查 CMDB 的建设程度。所以我研究注意了一下的一些书籍，考虑有机会可以买回来研究一下：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->IT 服务管理的持续改进需要一定的手段实现，这是 ITIL V3 中的一个重要流程。CSF 是关键成功因素，KPI 是关键性能指标，这些都是 metrics 管理过程中需要关注的手段。每个流程都可以找到相应的 CSF 和 KPI。CSF 算是 V3 的新生事物，我想它可能会对 IT 管理质量的衡量和改进带来新的方式。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->别的不说，我只想说说 KPI 管理方法可能带来的坏处。举个例子：有个公司想通过“事件单数”来考核服务台一线人员的工作。结果当他们在执行了一段时间后，他们发现服务台中有大量重复的事件单，实际上服务台对每个收到的电话都新建一个事件单，并没有做重复事件匹配查找的工作。进一步的也影响了通过重复事件来做进一步的问题管理。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->从考核管理的角度看，ITSM 的考核指标和体系如何建立的合理，如何才能建立的正确的设计和实施的确是一件大事。否则会有什么后果，我们可以想想三鹿毒奶粉事件，奶粉的蛋白质含量是奶粉质量的重要指标 KPI，营养健康是奶粉的终极 CSF 目标。三鹿真的给了我们一个血的教训啊，想让你的 IT 服务质量如何呢？可以想想三鹿。不过还是需要多多学习所有可能的 CSF 和 KPI，从何设计出确实可行的管理方式。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Implementing Metrics for IT Service Management (ITSM)&lt;/strong>&lt;!-- raw HTML omitted -->ISBN: 9789087531140&lt;!-- raw HTML omitted -->Author: David Smith, Micromation Canada&lt;!-- raw HTML omitted -->&lt;img src="http://ecx.images-amazon.com/images/I/41QQV4NN6EL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Metrics for IT Service Management (Paperback)&lt;/strong>&lt;!-- raw HTML omitted -->by Peter Brooks (Author)&lt;!-- raw HTML omitted -->&lt;img src="http://ecx.images-amazon.com/images/I/51G2GFVEZZL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Measuring ITIL: Measuring, Reporting and Modeling&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->** ** - the IT Service Management Metrics That Matter Most to IT Senior Executives (Paperback)&lt;!-- raw HTML omitted -->by Randy A. Steinberg&lt;!-- raw HTML omitted -->&lt;img src="http://ecx.images-amazon.com/images/I/41QQV4NN6EL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**Step-by-Step Guide to Building a CMDB **&lt;!-- raw HTML omitted -->by BMC Software; Inc (Author)&lt;!-- raw HTML omitted -->&lt;img src="http://ecx.images-amazon.com/images/I/41obkAD85tL._SL500_AA240_.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->后来发现了这个 ITSM metrics modeling tools ，觉得这个真的不错。可行性很高。&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.itsmcommunity.org/resources/tool/itsm_metrics_modeling_tool/" target="_blank" rel="noopener"
>ITSM Metrics Modeling Tool&lt;/a>&lt;/p></description></item><item><title>今年5.1去成都休假</title><link>https://martinliu.cn/2009/08/07/51-to-chengdu/</link><pubDate>Fri, 07 Aug 2009 03:50:03 +0000</pubDate><guid>https://martinliu.cn/2009/08/07/51-to-chengdu/</guid><description>&lt;p>吃成都小吃，看国宝熊猫，成都茶馆喝茶，果然是去了就不想走的地方。&lt;/p></description></item><item><title>我们新疆好地方，最美是喀纳斯</title><link>https://martinliu.cn/2009/08/07/xinjiang-is-good-place-kanas-is-best/</link><pubDate>Fri, 07 Aug 2009 02:18:02 +0000</pubDate><guid>https://martinliu.cn/2009/08/07/xinjiang-is-good-place-kanas-is-best/</guid><description>&lt;p>新疆之行照片集，路径北京 乌鲁木齐 喀什 乌鲁木齐 布尔津 喀纳斯 布尔津 乌鲁木齐 北京&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://picasaweb.google.com/liuzh66/Xinjiang" target="_blank" rel="noopener"
>http://picasaweb.google.com/liuzh66/Xinjiang&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->看不到的访问这个链接：&lt;a class="link" href="http://www.flickr.com/photos/41222865@N03/" target="_blank" rel="noopener"
>http://www.flickr.com/photos/41222865@N03/&lt;/a>&lt;/p></description></item><item><title>关于ICP备案申请审核通过的通知</title><link>https://martinliu.cn/2009/08/01/got-martinli-dot-cn-icp-registered/</link><pubDate>Sat, 01 Aug 2009 14:33:32 +0000</pubDate><guid>https://martinliu.cn/2009/08/01/got-martinli-dot-cn-icp-registered/</guid><description>&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->[caption id=&amp;ldquo;attachment_491&amp;rdquo; align=&amp;ldquo;alignleft&amp;rdquo; width=&amp;ldquo;150&amp;rdquo; caption=&amp;ldquo;welcom to martinliu.cn thanks!&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/07/domain-name-trading-150x150.gif"
loading="lazy"
alt="welcom to martinliu.cn thanks!"
>[/caption]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->That is what I was dreaming about for almost half year. You can not even understand my blog had been closed, because it took me 4 times to got my doman name registered. Finally I did it by myself. Cheers! I&amp;rsquo;d like to put it on page foot.&lt;/p></description></item><item><title>BMC and Cloud computing</title><link>https://martinliu.cn/2009/07/16/bmc-and-cloud-computing/</link><pubDate>Thu, 16 Jul 2009 13:34:31 +0000</pubDate><guid>https://martinliu.cn/2009/07/16/bmc-and-cloud-computing/</guid><description>&lt;p>July 15, 2009 – BMC Software has announced that it is leveraging Amazon Web Services to provide a single, unified management solution meant to give customers control over existing internal IT assets and external cloud infrastructures, according to a company release.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.information-management.com/news/amazon_bmc_software_cloud_computing-10015748-1.html" target="_blank" rel="noopener"
>http://www.information-management.com/news/amazon_bmc_software_cloud_computing-10015748-1.html&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->BTW: it seems the IT management is as important as infrastructure.&lt;/p></description></item><item><title>CMS/CMDB 配置管理系统和发现工具</title><link>https://martinliu.cn/2009/07/15/cms-cmdb-and-discovery-tools/</link><pubDate>Wed, 15 Jul 2009 03:45:03 +0000</pubDate><guid>https://martinliu.cn/2009/07/15/cms-cmdb-and-discovery-tools/</guid><description>&lt;p>最近的一些 CMDB 项目和测试中都用到和测到了自动发现工具，很多用户对此的理解和看法还不是很到位。&lt;img src="http://www.re-soft.com/images/viewscreen.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**首先：“自动化配置和关系发现工具是什么？” **&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->它是 CMS 工具集当中的数据采集工具。 从产品名称上看，往外都带 DDM，它是 Discovery Dependency Mapping 的缩写。意思就是帮你发现 CI 和 CI 之间关系的工具。很多用户的各种 IT 管理工具都可以自动发现网络、服务器和应用的配置项以及之间的关系，那么为什么还需要在购买一个新的发现工具呢？其实发现工具解决的真实发现工具不统一和发现数据不统一的问题，更重要的是它可以发现配置项之间的依赖和影响关系。对于一个数据中心来说，变更会经常发生，那么一套应用运行了一段时间之后，你很难准确的说出它都连接了那些其他相关的设备，很难理解它当前的部署状态。我们希望发现工具能帮我们更好的洞察当前 IT 基础架构的构成，应用对设备的依赖，底层 IT 服务对业务的影响。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**其次：“它是如何工作的？” **&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->它的工作原理和其他所有的管理软件也没什么太大的差异。基本上讲有两种技术：无代理发现和有代理发现；三种产品形式：纯粹无代理扫描方式、纯有代理方式和混合方式。无代理采集必须依赖被采集设备的开放协议，常用的采集协议有：snmp,wmi,telnet,ssh,jmx,http 等。往往需要在被采集设备上配合一定的账号和权限。采集动作往往是定时、周期性或者触发式执行。扫描结果返回一个数据库中，准备向 CMDB 同步。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>再次：“它是 CMDB 必须的工具么？”&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->对于下面几种情况我个人认为它是一个必的工具：1）数据中心用户，服务器和应用成百上千套，变更每周都会进行，新业务系统增长快。CMDB 需要使用它来自动更新配置项信息。2）应用多是多层的复杂应用，CI 之间依赖关系复杂，物理连接图已经不足够用来做影响分析，CMDB 需要它来自动化维护配置自己的关联关系，通过它可以减少进 70%的手工工作量。从国外的一些项目经验上来看，50%的 CMDB 用户并没有使用配置自动发现工具，他们使用的配置数据多是监控管理系统中已有的，CI 间的关系靠手工维护。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>最后：“它是如何与 CMDB 同步的？”&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->有些厂商的 CMDB 是从发现工具上起家的，所以他们本来就使用的一个库，没有同步问题。有些厂商的发现工具是整合的其他产品工具或者收购的，他们自己的同步就需要一定得数据模型了。通过数据模型来解决数据字段映射的关系，一般来讲 CMDB 中会有数据模型 CDM，发现工具同步的时候就以该模型为准，把 CI 和关系经过一定的过滤条件同步到 CMDB 中。不同厂商的发现工具和 CMDB 如果需要同步的话，需要满足起码这样几点需要：CMDB 必须有标准的数据模型来做数据映射；需要有某种数据集成和同步的工具来连接两个数据库；CMDB 中需要具有强大的数据调和功能来处理发现工具带来的数据。&lt;/p></description></item><item><title>Cloud Computing Infrastructure and Architecture Guide-From SUN</title><link>https://martinliu.cn/2009/07/14/cloud-computing-infrastructure-and-architecture-guide-from-sun/</link><pubDate>Tue, 14 Jul 2009 05:34:26 +0000</pubDate><guid>https://martinliu.cn/2009/07/14/cloud-computing-infrastructure-and-architecture-guide-from-sun/</guid><description>&lt;p>&lt;img src="http://blogs.sun.com/staso/resource/question-cloud.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a class="link" href="http://cn.sun.com/offers/docs/sun_353cloudcomputing_chinese.pdf" target="_blank" rel="noopener"
>** » 下载本指南**&lt;/a> （中文版）&lt;!-- raw HTML omitted -->《云计算基础设施和体系架构指南》&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.sun.com/featured-articles/CloudComputing.pdf" target="_blank" rel="noopener"
>** » 下载本指南**&lt;/a> （英文版）&lt;!-- raw HTML omitted -->《Cloud Computing Infrastructure and Architecture Guide》&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;strong>&lt;a class="link" href="http://hk.sun.com/resources" target="_blank" rel="noopener"
> » 更多 Sun 白皮书、指南、蓝图&lt;/a>&lt;/strong> (英文版)&lt;/p></description></item><item><title>martinliu dot cn is back</title><link>https://martinliu.cn/2009/07/13/martinliu-dot-cn-is-back/</link><pubDate>Mon, 13 Jul 2009 05:13:19 +0000</pubDate><guid>https://martinliu.cn/2009/07/13/martinliu-dot-cn-is-back/</guid><description>&lt;p>After 2 crazy months, I finished the longest PoC. This is for CCB CMDB testing. We are fightting with CA,HP,IBM and Utrual Power. It has 3 rounds, took me almost 3 month to finish.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2009/07/halo-wordpress.jpg"
loading="lazy"
alt="halo-wordpress"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Today, I finally got have a chance to do something for my blog. I finally move to a new hosting and attached martinliu.cn domain name on it. Wordpress was updated to 2.8.1 with new theme.  I love this theme for three reasons: 1)自动全屏显示； 2)大气；3)自带弹性的调整 options。Now the only concern is MySQL space is only 50 MB. As far as I can tell it could be enough for my 2years blog. So, keep posting and happy blog.&lt;/p></description></item><item><title>Transformers-Revenge of the Fall-Theme Music</title><link>https://martinliu.cn/2009/07/06/transformers-revenge-of-the-fall-theme-music/</link><pubDate>Mon, 06 Jul 2009 03:43:41 +0000</pubDate><guid>https://martinliu.cn/2009/07/06/transformers-revenge-of-the-fall-theme-music/</guid><description>&lt;p>Enjoy the movie and music&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://news.kehuan.net/200808/2008081915043539914.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://pic.hsw.cn/0/10/28/15/10281535_738266.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://img4.cache.netease.com/ent/2009/6/17/200906171432513eec7.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>ByteactHosting-free hosting</title><link>https://martinliu.cn/2009/07/04/byteacthosting-free-hosting/</link><pubDate>Sat, 04 Jul 2009 14:47:23 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/byteacthosting-free-hosting/</guid><description>&lt;p>&lt;a class="link" href="http://www.byteact.com/" target="_blank" rel="noopener"
>&lt;img src="http://martinliu.byteact.com/wp-content/uploads/2009/07/snap170-300x108.jpg"
loading="lazy"
alt="snap170"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Now, I am here at ByteactHosting. My blog was moved into this free web hosting.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Free Web Hosting Plan&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;!-- raw HTML omitted -->800MB&lt;!-- raw HTML omitted --> &lt;strong>1GB (1024MB)&lt;/strong> of webspace
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>30GB&lt;/strong> of monthly transfer
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>10&lt;/strong> MySQL databases
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>10&lt;/strong> Addon domains
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>10&lt;/strong> Addon subdomains
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>10&lt;/strong> Parked domains
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>POP&lt;/strong> E-mail account (catch-all)
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>Direct FTP&lt;/strong> access
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>PHP&lt;/strong> support
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>NO FORCED ADS!&lt;/strong>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->It is close to the last one I bought from &lt;a class="link" href="http://www.paangood.com/otherhost.php" target="_blank" rel="noopener"
>http://www.paangood.com/otherhost.php&lt;/a>.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->总的来说这是一个非常好用的免费主机，Wordpress的安装只需要点3次Next就完成了。后台管理中可以安装多种开源的程序，有blog、CMS、BBS、B2B、CRM等很多流行程序。目前基本上感觉和使用国内的付费主机没太大差别。&lt;/li>
&lt;/ul></description></item><item><title>CMDB实施的几种误区</title><link>https://martinliu.cn/2009/07/04/cmdbe5ae9ee696bde79a84e587a0e7a78de8afafe58cba/</link><pubDate>Sat, 04 Jul 2009 05:44:02 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/cmdbe5ae9ee696bde79a84e587a0e7a78de8afafe58cba/</guid><description>&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/266/26670/2008/11/itilv3model.jpg"
loading="lazy"
alt="itilv3model"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面是 ITIL v3 的定义，CMDB 的定义和 v2 没有变化。可以看出 CMDB 是一个存储配置记录的数据库，非常多的用户一拍脑门“不就是一个数据库么！我们也可以自己开发一个的。”。这样的情况下，IT 组织的不同部门都可能会各自立门户，开发自己的配置管理信息库；例如：资产管理、终端分发和管理、机房管理等等。数据重复、数据不一致、配置信息不对称；无法得到跨部门和系统的报告。所以 V3 提出了 CMS 系统，它是 CMDB 系统的下一代管理系统。CMS 系统需要 具有对现有信息资料的兼容性，CMS 的建立不能忘记过去；一定要集成已有配置信息。&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.ggpht.com/_KU0istEHv9w/Sb5fe4XU89I/AAAAAAAABWA/gqfJomNUHhM/snap008.jpg" target="_blank" rel="noopener"
>&lt;img src="http://lh6.ggpht.com/_KU0istEHv9w/Sb5fe4XU89I/AAAAAAAABWA/gqfJomNUHhM/snap008.jpg"
loading="lazy"
>&lt;/a>错误一：配置信息是一个独立的配置管理系统，由专人负责数据的更新和维护，手工的管理和维护所有数据。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.ggpht.com/_KU0istEHv9w/Sb5feqLlKaI/AAAAAAAABV4/rmdsoBoBuiA/snap007.jpg" target="_blank" rel="noopener"
>&lt;img src="http://lh6.ggpht.com/_KU0istEHv9w/Sb5feqLlKaI/AAAAAAAABV4/rmdsoBoBuiA/snap007.jpg"
loading="lazy"
>&lt;/a>错误二：最配置管理就是要做的细，我要管理到机房中的每一根网线，CI 的属性需要设计的非常多，越细致越好。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.ggpht.com/_KU0istEHv9w/Sb5feHYTZVI/AAAAAAAABVw/4Ns9PAPzrJw/snap006.jpg" target="_blank" rel="noopener"
>&lt;img src="http://lh6.ggpht.com/_KU0istEHv9w/Sb5feHYTZVI/AAAAAAAABVw/4Ns9PAPzrJw/snap006.jpg"
loading="lazy"
>&lt;/a>错误三：我们自己有开发人员，我们有 CMDB 的需求，那就开始做吧，先看法着看看，不就是一个数据的增删改查么！！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->配置管理或者说 CMDB 的建设可以说是目前，国内 ITIL 用户共同的瓶颈。ITIL 项目中实施最多的三个流程是：Incident Management、Problem Management 和 Change Management。已经实施完毕以上三个流程的用户问的最多的一个问题是：一个故障单、问题单或者变更单一定要和 CI 想关联么？在解决处理的时候寻找目标 CI 或者根源 CI 是必须的么？&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果 ITIL 是一种公共语言的话，那么 Incident Management、Problem Management 和 Change Management 等所有流程都是句式或者时态。而 CI 则是主语或者宾语，您觉得没有主语或者缺少宾语的句子，会传递怎么的信息呢？&lt;/p></description></item><item><title>ITIL v3 术语表</title><link>https://martinliu.cn/2009/07/04/itil-v3-e69cafe8afade8a1a8/</link><pubDate>Sat, 04 Jul 2009 05:43:08 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/itil-v3-e69cafe8afade8a1a8/</guid><description>&lt;p>&lt;a class="link" href="http://www.best-management-practice.com/images/non_home_logo.gif" target="_blank" rel="noopener"
>&lt;img src="http://www.best-management-practice.com/images/non_home_logo.gif"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>回顾或者实施 ITILv3 时，可以去下载一下术语表，&lt;a class="link" href="http://www.get-best-practice.co.uk/glossaries.aspx" target="_blank" rel="noopener"
>http://www.get-best-practice.co.uk/glossaries.aspx &lt;/a>以上网站有原版中英文和其他语言的文档。术语表适用于对 ITIL 有一定了解的人，是受过 ITIL 培训的人或者正在实施 ITIL 的人的案头参考读物之一。我桌上有中英文打印版各一份，拳不离手，曲不离口。另外 ITIL 实施切忌本本主义和教条主义，需要注重实效和对标准的遵从。&lt;/p></description></item><item><title>德克虏伯大炮VS清红衣大炮</title><link>https://martinliu.cn/2009/07/04/e5beb7e5858be8998fe4bcafe5a4a7e782aevse6b885e7baa2e8a1a3e5a4a7e782ae/</link><pubDate>Sat, 04 Jul 2009 05:39:11 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/e5beb7e5858be8998fe4bcafe5a4a7e782aevse6b885e7baa2e8a1a3e5a4a7e782ae/</guid><description>&lt;p>&lt;a class="link" href="http://baike.baidu.com/view/2017424.html" target="_blank" rel="noopener"
>&lt;img src="http://1.bp.blogspot.com/_KU0istEHv9w/SetRVpAd34I/AAAAAAAABYA/vaFg54RdXAQ/s400/%E5%8E%A6%E9%97%A8%E8%83%A1%E9%87%8C%E5%B1%B1%E7%82%AE%E5%8F%B0&amp;#43;009.jpg"
loading="lazy"
>&lt;/a>&lt;a class="link" href="http://baike.baidu.com/view/92668.htm" target="_blank" rel="noopener"
>&lt;img src="http://1.bp.blogspot.com/_KU0istEHv9w/SetRVh-hf7I/AAAAAAAABYI/P-9GMpzHCxk/s400/%E5%8E%A6%E9%97%A8%E8%83%A1%E9%87%8C%E5%B1%B1%E7%82%AE%E5%8F%B0&amp;#43;016.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>德克虏伯大炮：特点射程远，能 360 度旋转，能把上下调整仰角，炮弹的辐射面积非常广，操作复杂，需要高技能的操作手。操作弹性大。安装部署需要时间长，对环境改造多。&lt;br>
清红衣大炮：射程短，只能朝一个方向发射，炮弹的打击面基本固定，操作简单，对操作者技术要求低。操作弹性低。 部署配置工作少。&lt;/p>
&lt;p>在 IT 管理工具的选择中，您是选择克虏伯式的超级人间大炮，还是选功能操作简洁的红衣大炮？真是一个两难的选择啊！&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="http://lh5.ggpht.com/_KU0istEHv9w/SetV1hCLcQI/AAAAAAAABYo/t1214KIeQcM/s400/collage.jpg"
loading="lazy"
>&lt;/p>
&lt;p>用户必须自己认真思考需求，却对不建议的做法：&lt;/p>
&lt;ol>
&lt;li>将“德克虏伯大炮”买回家后，发现功能太复杂，接着把它定制成，操作简单的“清红衣大炮”。李鸿章很支持“师夷长技以制夷”，同理购买国外复杂管理套件而不去学习其中的管理方式方法，反而拘泥于自己对概念简单的理解也是成问题的观念。&lt;/li>
&lt;li>把“清红衣大炮”三下五除二部署在家后，发现功能限制太多，集成几乎没有，失望的埋怨开源社区，坐观其他人的开发和参与。开源其实赋予你了无限的对开源技术应用的弹性，唯一要求就是有能力参与和进入社区的开发。&lt;/li>
&lt;/ol>
&lt;!-- raw HTML omitted --></description></item><item><title>Tomcat压力测试-挺住200并发</title><link>https://martinliu.cn/2009/07/04/tomcate58e8be58a9be6b58be8af95-e68cbae4bd8f200e5b9b6e58f91/</link><pubDate>Sat, 04 Jul 2009 05:37:57 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/tomcate58e8be58a9be6b58be8af95-e68cbae4bd8f200e5b9b6e58f91/</guid><description>&lt;p>&lt;img src="http://www.willisms.com/archives/tomcat.jpg"
loading="lazy"
alt="tomcat.jpg"
>&lt;!-- raw HTML omitted -->最近在 CCB 的测试中有一项是住系统登陆页面的压力测试。我一直就很担心是否能通过压力测试，因为一个同事告诉我上次他的结果是 80 就不行了。总结一下，我这次成功的原因主要就是两个地方：&lt;!-- raw HTML omitted -->1）设置 Tomcat 启动和最大内存使用都是 1500MB&lt;!-- raw HTML omitted -->2）修改 server.xml 中关于连接数等参数(回头贴出我的那些配置内容)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我的服务器配置如下：&lt;!-- raw HTML omitted -->Dell 2950 1C4 核，8GB 内存，单块 136GB 硬盘，Windows2003 系统，JDK1.6，Tomcat 5.5.21&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->另外，我一直以为 Loadrunner 需要真实 Lic 文件才能用，没想到的是，我随便在网上搜了一个也能用，真是神奇啊！ 不过还是反对盗版哈哈:)&lt;/p></description></item><item><title>For tomcat benchmark testing</title><link>https://martinliu.cn/2009/07/04/for-tomcat-benchmark-testing/</link><pubDate>Sat, 04 Jul 2009 05:36:03 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/for-tomcat-benchmark-testing/</guid><description>&lt;p>Tomcat Configuration 查看一下可以配置的参数&lt;img src="http://tech.tomarea.com/wp-content/uploads/2009/02/tomcat-300x261.jpg"
loading="lazy"
alt="TomCat"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>设置 JVM 的参数 Setting JVM Options for Tomcat&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Edit the /usr/locat/apache-tomcat/bin/catalina.sh file and add the JVM options to the JAVA_OPTS environment variable.JVM Option Value Description&lt;!-- raw HTML omitted -->-Xmx 4g The maximum Java heap size.&lt;!-- raw HTML omitted -->-Xms 4g The initial Java heap size.&lt;!-- raw HTML omitted -->-Xmn 1g The size of young generation.&lt;!-- raw HTML omitted -->-XX:+UseParallelGC – To use parallel garbage collection for scavenges.&lt;!-- raw HTML omitted -->-XX:PermSize 50m The initial size of permanent generation.&lt;!-- raw HTML omitted -->注释：上面两个 4g 的值，我没试过，我用 8GB 内存 windows 的机器 1.5GB 能启动，超过了 Tomcat 服务就启动不了了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>配置 Tomcat Connector Attributes&lt;/strong>&lt;!-- raw HTML omitted -->Edit the /usr/locat/apache-tomcat/conf/server.xml file and add the attributes listed in Table 3 to the Connector element.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面是个例子供参考&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Tomcat Configuration Attribute Value Description&lt;!-- raw HTML omitted -->The maximum number of request processing threads to be created by this connector, which therefore determines the maximum number of simultaneous requests that can be handled. If not specified, the default value for this attribute is 40. If an executor is associated with this connector, this attribute is ignored and the connector executes tasks using the executor rather than an internal thread pool.&lt;!-- raw HTML omitted -->maxThreads 3000&lt;!-- raw HTML omitted -->The maximum queue length for incoming connection requests when all&lt;!-- raw HTML omitted -->possible request processing threads are in use. Any requests received when&lt;!-- raw HTML omitted -->the queue is full are refused. The default value is 10.&lt;!-- raw HTML omitted -->acceptCount 2000&lt;!-- raw HTML omitted -->The number of request processing threads that are created when this connector&lt;!-- raw HTML omitted -->is first started. The connector also verifies that it has the specified number of&lt;!-- raw HTML omitted -->idle processing threads available. This attribute should be set to a value smaller&lt;!-- raw HTML omitted -->than that set for maxThreads. The default value is 4.&lt;!-- raw HTML omitted -->minSpareThreads 500&lt;!-- raw HTML omitted -->The maximum number of unused request processing threads that are allowed&lt;!-- raw HTML omitted -->to exist until the thread pool starts stopping the unnecessary threads. The&lt;!-- raw HTML omitted -->default value is 50.&lt;!-- raw HTML omitted -->maxSpareThreads 2000&lt;!-- raw HTML omitted -->Set to “true” if you want calls to request.getRemoteHost() to perform DNS&lt;!-- raw HTML omitted -->lookups in order to return the actual host name of the remote client. Set to&lt;!-- raw HTML omitted -->enableLookups false “false” to skip the DNS lookup and return the IP address in String form instead&lt;!-- raw HTML omitted -->(thereby improving performance). By default, DNS lookups are enabled.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面的值比我实际使用的大，我的 200 并发测试通过了，硬件配置见前一帖。&lt;/p></description></item><item><title>Free WordPress themes</title><link>https://martinliu.cn/2009/07/04/free-wordpress-themes/</link><pubDate>Sat, 04 Jul 2009 05:34:15 +0000</pubDate><guid>https://martinliu.cn/2009/07/04/free-wordpress-themes/</guid><description>&lt;p>&lt;img src="http://martinliu.blog.ubuntu.org.cn/files/2009/07/snap169-300x234.jpg"
loading="lazy"
alt="snap169"
>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这里的 theme 都比较干净和简洁&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.nodethirtythree.com/" target="_blank" rel="noopener"
>http://www.nodethirtythree.com/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->很可惜的是 blog.ubuntu.org.cn 不能自己更换 theme，所能使用和选择的是固定的一些，都不好看，幸亏还 WordPress 默认的皮肤还在，否则真是不确定我还能用这里的 WordPress。总之还是感谢网上有这么好的免费资源。&lt;/p></description></item><item><title>Stop to build CMDB for your IT - CMS是怎样炼成的？</title><link>https://martinliu.cn/2009/03/01/stop-to-build-cmdb-for-your-it/</link><pubDate>Sun, 01 Mar 2009 13:40:16 +0000</pubDate><guid>https://martinliu.cn/2009/03/01/stop-to-build-cmdb-for-your-it/</guid><description>&lt;p>ITIL 在国内的实施也有 8 年之久，就我看过和做过的项目中：service desk 是最多实施的工具，它包括 IM/PM；还有 Change Management；用户们还可能会常常认为，Release Management 可以和变更流程可以混在一起搞。服务台一般先上，有的变更流程先上，服务台的共同特点还有 PM 一般形同虚设。就我所见所闻的项目和用户来说，CMDB 没有那家能建的好用的好；CMDB 的建设的缺失似乎成了所有 ITIL 用户的通病，应该也是想重点突破的瓶颈。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL v3 发布后，CMDB 成了 CMS 中的一个数据库；而且，CMS 中包括不止像 CMDB 这样的配置信息数据库，其实任何保存配置信息的数据库都算在 CMS 系统内。既然是一个系统，所以它就不光包含数据还包含一套配套工具集合，通过这套工具，维护和使用配置信息。CMS 为其他所有 ITIL 流程提供基础的配置信息。它的结构如下图所示：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[caption id=&amp;ldquo;attachment_435&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;658&amp;rdquo; caption=&amp;ldquo;配置管理系统&amp;rdquo;]&lt;img src="http://www.martinliu.cn/wp-content/uploads/2009/03/cms.jpg"
loading="lazy"
alt="配置管理系统"
>[/caption]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果说上面这幅图比较还是比较抽象的话，那么请见下图：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[caption id=&amp;ldquo;attachment_436&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;714&amp;rdquo; caption=&amp;ldquo;CMS is a set of tools based on all configuration data&amp;rdquo;]&lt;img src="http://www.martinliu.cn/wp-content/uploads/2009/03/bmc-atrium1.jpg"
loading="lazy"
alt="bmc-atrium1"
>&lt;!-- raw HTML omitted -->[/caption]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->从上图中我们看到，CMS 系统一共可以分为四层。上三层是核心 CMDB 数据库和相关配套工具，最低层 Data 层则是是所有配置信息的基础来源。从 ITIL v3 的角度来说，只建设一个集中的 CMDB 数据库来存储所有的 CI 信息是不够的，CMS 系统中必须能够包含和处理所有企业已有的各个系统中的配置数据。换言之，CMDB 建设的局限性在于，它只是配置信息数据化，或者说电子化的第一步。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->当前依然有很多企业雄心勃勃的上马 CMDB 项目，不过切记在规划时，一定先好好阅读一下 ITIL v3 中和 CMS 相关的内容，适当调整项目的目标和预期总是好的，也可以规避一些项目风险。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->以上的一些是我对 CMS 建设的一些认识。如果要落地到项目上还不许经过一个痛苦的过程，那就是产品选型。选项的过程中可以注重一下几点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>可视化：配置项和之间的关系按拓扑形式展现
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>标准化：软件、硬件配置项都有完整标准的CTI信息
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>归一化：与现有各种配置管理系统核心共存同时CMS保持一份完整的户口记录，任何CI都有ID
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>集成化：CMS中的数据以图形或者裸数据等形式供其他相关消费者流程或者人员使用
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>联邦化：CMS核心数据库中不保存动态变化的配置信息（DB的最大连接数，网络设备所使用的syslog服务器地址），这些信息通过联邦管理让用户从其他相关的工具系统中查看到最新的数据。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最近可能还会接触一下CMDB的项目，其他经验总结待续。&lt;/li>
&lt;/ul></description></item><item><title>[ZT]辽宁海城大悲寺僧团实录</title><link>https://martinliu.cn/2009/02/14/zte8bebde5ae81e6b5b7e59f8ee5a4a7e682b2e5afbae583a7e59ba2e5ae9ee5bd95/</link><pubDate>Sat, 14 Feb 2009 03:16:03 +0000</pubDate><guid>https://martinliu.cn/2009/02/14/zte8bebde5ae81e6b5b7e59f8ee5a4a7e682b2e5afbae583a7e59ba2e5ae9ee5bd95/</guid><description>&lt;p>&lt;!-- raw HTML omitted -->这是一个令人赞叹的僧团&lt;!-- raw HTML omitted -->在默默中延续佛陀的慧命 天下僧人的心愿&lt;!-- raw HTML omitted -->在他们身上逐步实现&lt;!-- raw HTML omitted -->此片献给大家使我们大家进一步了解修行的道路和它深远的意义 &amp;mdash;-引自视频中&lt;/p></description></item><item><title>[網播] Born to MISrepresent 第二集：當 OpenNMS 遇上 SFLC ，催生了 Moglen Ravicher LLC</title><link>https://martinliu.cn/2009/02/04/e7b6b2e692ad-born-to-misrepresent-e7acace4ba8ce99b86efbc9ae795b6-opennms-e98187e4b88a-sflc-efbc8ce582ace7949fe4ba86-moglen-ravicher-llc/</link><pubDate>Wed, 04 Feb 2009 04:52:02 +0000</pubDate><guid>https://martinliu.cn/2009/02/04/e7b6b2e692ad-born-to-misrepresent-e7acace4ba8ce99b86efbc9ae795b6-opennms-e98187e4b88a-sflc-efbc8ce582ace7949fe4ba86-moglen-ravicher-llc/</guid><description>&lt;p>（原文於 2008-04-08 發表於 &lt;a class="link" href="http://blog.roodo.com/ystuan/archives/5830995.html" target="_blank" rel="noopener"
>http://blog.roodo.com/ystuan/archives/5830995.html&lt;/a>）&lt;/p>
&lt;p>這個音檔的授權是&lt;a class="link" href="http://creativecommons.org/licenses/by-nc-sa/2.5/tw/" target="_blank" rel="noopener"
>姓名標示-非商業性-相同方式分享 2.5 台灣&lt;/a>，跟我的網誌一樣。&lt;/p>
&lt;p>下載 ogg 格式：&lt;a class="link" href="http://www.archive.org/download/BornToMisrepresentEp2/Born_to_MISrepresent_EP2.ogg" target="_blank" rel="noopener"
>Born_to_MISrepresent_EP2.ogg&lt;/a>
下載 mp3 格式：&lt;a class="link" href="http://www.archive.org/download/BornToMisrepresentEp2/Born_to_MISrepresent_EP2.mp3" target="_blank" rel="noopener"
>Born_to_MISrepresent_EP2.mp3&lt;/a>
前往存放在 Archive.org 上的頁面：&lt;a class="link" href="http://www.archive.org/details/BornToMisrepresentEp2" target="_blank" rel="noopener"
>Born to MISrepresent EP2&lt;/a>，有更多資訊以及格式。&lt;/p>
&lt;p>內容摘要：&lt;/p>
&lt;p>OpenNMS 1.3.11 版發佈，並宣佈與 Hyperic 就雙方的產品進行合作。這項合作的推手是一個雙方的共同客戶。Hyperic 的 agent 預料將可和擁有強大平台但是拙於 agent (agent-less)的 OpenNMS 形成良好互補。（自 1.3.10 版就開始跟 Hyperic Agent 進行整合，最近 OpenNMS 版本號已跳升至 1.5.90 ） Tarus 的 blog 有更多細節：&lt;a class="link" href="http://blogs.opennms.org/?p=175" target="_blank" rel="noopener"
>The Year of Integration&lt;/a>&lt;/p>
&lt;p>Hyperic 跟 OpenNMS 的初步整合，可線上收看 &lt;a class="link" href="http://download.hyperic.com/swf/HyperCAST10/playback.html" target="_blank" rel="noopener"
>Integrating Hyperic HQ and OpenNMS&lt;/a>（瀏覽器需支援 flash 格式播放）&lt;/p>
&lt;p>當 OpenNMS 遇上 SFLC ：前一陣子 Tarus 跑去 &lt;a class="link" href="http://ask.slashdot.org/article.pl?sid=08/03/04/0023245" target="_blank" rel="noopener"
>Ask Slashdot&lt;/a> ，嚷嚷說 &lt;a class="link" href="http://www.cittio.com/" target="_blank" rel="noopener"
>Cittio Watchtower&lt;/a> 使用 OpenNMS 的程式碼當然可以，但是使用的方式違反了（程式碼採用的）GPL 授權。&lt;/p>
&lt;p>想也知道，跑去 Slashdot 一定會引來關注，他也尋求軟體自由法律中心（Software Freedom Law Center，SFLC）的協助。但是，SFLC 服務對象僅限於非營利機構，結果呢，SFLC 決定以成立一間新的律師事務所(&lt;a class="link" href="http://www.moglenravicher.com/" target="_blank" rel="noopener"
>Moglen Ravicher LLC&lt;/a>)的方式，來服務支持自由軟體的營利機構， OpenNMS Group 因此成了 Moglen Ravicher LLC 的第一個客戶。&lt;/p>
&lt;p>喔，不用猜， SFLC 的&lt;a class="link" href="http://www.softwarefreedom.org/news/2008/mar/26/moglen-ravicher/" target="_blank" rel="noopener"
>新聞稿&lt;/a>直接告訴大家，兩塊招牌底下都是同一群律師，事務所的所有利潤會回饋給 SFLC 。（嗯，其實我們也可以說 OpenNMS 有兩種，一種是 opennms.org - 社群，一種則是 opennms.com - 主要參與者所開的公司 OpenNMS Group。）&lt;/p>
&lt;p>筆者已經在 FLOSS Weekly 聽過 &lt;a class="link" href="http://twit.tv/floss13" target="_blank" rel="noopener"
>Eben Moglen 談 GPL 3.0&lt;/a> ，這次為多瞭解另一位大咖 Dan Ravicher （其實只是想搞清楚他的姓怎麼唸&amp;hellip;&amp;hellip;），找到了 Dan 談 &lt;a class="link" href="http://www.ip.qut.edu.au/2006-08-innovation-ravicher" target="_blank" rel="noopener"
>GPL 3, Patents and Other Current Issues&lt;/a> ，都很棒，推薦給大家，尤其是後者，其實 Dan 還回顧了 GPL 的誕生，解釋了 RHEL 的 subscription model 為何不違反 GPL 但又可以約束客戶（超意外收穫！解答了筆者幾百年前的疑惑）&lt;/p>
&lt;p>照例 Tarus 也在他的 blog 提到整件事：&lt;a class="link" href="http://blogs.opennms.org/?p=181" target="_blank" rel="noopener"
>OpenNMS, Eben Moglen and Cittio&lt;/a>&lt;/p></description></item><item><title>My firecrackers for beginning of the year of ox 2009</title><link>https://martinliu.cn/2009/01/27/my-firecrackers-for-beginning-of-the-year-of-ox-2009/</link><pubDate>Tue, 27 Jan 2009 10:44:29 +0000</pubDate><guid>https://martinliu.cn/2009/01/27/my-firecrackers-for-beginning-of-the-year-of-ox-2009/</guid><description>&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->In childhood, I was playing firecrackers everyday in the Spring Festival. The new year&amp;rsquo;s eve is the only chance for me to lit it again,  I felt I like a 10 years child.&lt;/p></description></item><item><title>Welcome to The Year of the Ox</title><link>https://martinliu.cn/2009/01/25/welcome-to-the-year-of-the-ox/</link><pubDate>Sun, 25 Jan 2009 17:23:30 +0000</pubDate><guid>https://martinliu.cn/2009/01/25/welcome-to-the-year-of-the-ox/</guid><description>&lt;p>&lt;img src="http://pic.nipic.com/2008-03-28/2008328104057723_2.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->It&amp;rsquo;s Chinese New Year&amp;rsquo;s Eve right now. The Chinese &lt;a class="link" href="http://dict.hjenglish.com/w/lunar" target="_blank" rel="noopener"
>lunar&lt;/a> new year came, it&amp;rsquo;s &amp;ldquo;&lt;strong>The Year of the Ox&lt;/strong>&amp;rdquo;. I think you may like the above cute little ox and fortune; I hope you all the best. There are some pics I took tonight.&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://picasaweb.google.com/liuzh66/ChineseNewYearSEve" target="_blank" rel="noopener"
>http://picasaweb.google.com/liuzh66/ChineseNewYearSEve&lt;/a>&lt;/p></description></item><item><title>gOS looks green</title><link>https://martinliu.cn/2009/01/24/gos-looks-green/</link><pubDate>Sat, 24 Jan 2009 15:50:18 +0000</pubDate><guid>https://martinliu.cn/2009/01/24/gos-looks-green/</guid><description>&lt;p>&lt;img src="http://thinkgos.com/_images/gos31home.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Today I installed gOS on my laptop; openSuSE did great work for me 3 years. I&amp;rsquo;d like to play some new things. So, check my new desktop out.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://picasaweb.google.com/liuzh66/GOS" target="_blank" rel="noopener"
>http://picasaweb.google.com/liuzh66/GOS&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If you go its wetsite &lt;a class="link" href="http://thinkgos.com/" target="_blank" rel="noopener"
>http://thinkgos.com/&lt;/a>, you will see it talks lots of cloud. It&amp;rsquo;s interesting, but it is not the reson i chose it. Ubuntu 8.04 is inside gOS. So, it time to learn a new linux system. I neve use a Derbin based system, I&amp;rsquo;m not sure it could run for me how long.&lt;/p></description></item><item><title>从云计算联想到第一代电脑系统</title><link>https://martinliu.cn/2009/01/19/e4bb8ee4ba91e8aea1e7ae97e88194e683b3e588b0e7acace4b880e4bba3e794b5e88491e7b3bbe7bb9f/</link><pubDate>Mon, 19 Jan 2009 07:32:50 +0000</pubDate><guid>https://martinliu.cn/2009/01/19/e4bb8ee4ba91e8aea1e7ae97e88194e683b3e588b0e7acace4b880e4bba3e794b5e88491e7b3bbe7bb9f/</guid><description>&lt;p>&lt;img src="http://www.cartoonstock.com/newscartoons/cartoonists/ato/lowres/aton964l.jpg"
loading="lazy"
>记得以前看过一本描写 Bill Gets 的书，他上中学的时候，在河滨中心通过一个远程终端，连接到某大学的计算机系统，输入程序代码，并且得到代码在远程电脑系统中的输出，输出好像是在屏幕上出现的，或从打印机上输出的。我基本上忘了那电脑系统的名称，不过它的特点基本上是这样的：当时电脑系统很少，可能全世界上也没有多少台功能全面的电脑；用户使用的特别像是一种计算服务，由于终端设备根本没有技术能力，当时还没有个人电脑；接入方式根本不是 tcp/ip 更不是 internet，当时还没 internet。在学习了云计算的一些概念之后，我迷惑了，这个时尚的技术，怎么越看越眼熟啊。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->IBM 的主机系统可谓是当今电脑世界的恐龙化石级产品，他是一个活化石基本的技术，在经历了开放系统时代之后，我们即将进入云计算时代，我总感觉云计算是一种技术路线的复古。主机系统和第一代电脑系统最相似，区别是可以通过 TCP/ip 网络，和开放系统通信了。最为一种新兴起的技术，我试图 follow &lt;a class="link" href="http://www.johnmwillis.com/" target="_blank" rel="noopener"
>http://www.johnmwillis.com/&lt;/a>来学习云计算，遗憾的是从 08 年初以来并没有仔细听他所有的 colud cafe；这个老兄在把 blog 改名为 IT Management and Cloud Blog，真可谓是一高产的 blogger，这哥们每天能发四五个 post，强啊。最近找时间&lt;a class="link" href="http://media.libsyn.com/media/botchagalupe/cafe27.mp3" target="_blank" rel="noopener"
>听了一段 cloud cafe&lt;/a>，我发现到目前为止还没有一个能让大多数人都认同的云计算的概念，基本上对云计算的感念方面有两道三种说法。可以看看 &lt;a class="link" href="http://en.wikipedia.org/wiki/Cloud_computing" target="_blank" rel="noopener"
>http://en.wikipedia.org/wiki/Cloud_computing&lt;/a> 参考这上面的说法也只能有一个模糊的感觉。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->看看电脑技术打发展历程：最早的电脑系统，主机系统，开放系统，群集，网格，云计算。前一段时间看过一个非常抢眼的标题“以后世界上将只有 5 台电脑”。SaaS 是一个比较火热的和云计算相关的技术，我认为它像是在 web2.0 发展到一定阶段后 Web 应用的一个发展，这方面的强者为 salesforce 之流。Google 和 Salesforce 不同的是，Google 提供网上 office 套件的同时，还开发他的平台，并提供与之配套的 SDK。Amazon 不提供应用也没有 SDK，他只提供平台，平台上包括基本的计算和存储服务。Google 和 Amazon 说起来算是基础架构作为一种服务。抛开云计算本身不谈，用户使用和访问的方式并没有发生变化，在任何一个 web 浏览器存在的地方都能使用或者管理到云计算。客户端的计算和存储能力再次此退化到零，这不能说不是计算机技术发展的返祖现象吧！哈哈～～我也快糊涂了！&lt;/p></description></item><item><title>opennms 1.6.1-1 quick start guide</title><link>https://martinliu.cn/2009/01/11/161-1-opennms-quick-install-guide/</link><pubDate>Sun, 11 Jan 2009 02:33:12 +0000</pubDate><guid>https://martinliu.cn/2009/01/11/161-1-opennms-quick-install-guide/</guid><description>&lt;p>&lt;img src="http://www.etproductions.com/images/start.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->本安装手册为纯命令版，如果有什么疑问清参考官方安装手册，或给本贴留言。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[install yum on your Linux box]&lt;!-- raw HTML omitted -->选择任意 Linux 系统，安装上 yum 工具，在命令行测试 yum -v&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[testing internet connection with those two URL]&lt;!-- raw HTML omitted -->测试是否能上网，用浏览器分别打开这两个网址&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="http://www.martinliu.cn/2007/12/13/opennms-yum-install/" target="_blank" rel="noopener"
>http://www.martinliu.cn/2007/12/13/opennms-yum-install/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://http://yum.opennms.org/repofiles/" target="_blank" rel="noopener"
>http://yum.opennms.org/repofiles/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->先别关闭这两个网页。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[Install opennms 开始安装:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum install yum-fastestmirror
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>rpm -Uvh &lt;a class="link" href="http://yum.opennms.org/repofiles/opennms-repo-snapshot-rhel4.noarch.rpm" target="_blank" rel="noopener"
>http://yum.opennms.org/repofiles/opennms-repo-snapshot-rhel4.noarch.rpm&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum list opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum install opennms
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[ post-install and config] 开始配置：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>export OPENNMS_HOME=/opt/opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>vi /var/lib/pgsql/data/pg_hba.conf&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
1. 注释掉其中所有可用的行，加入下面三行&lt;!-- raw HTML omitted -->local all all trust&lt;!-- raw HTML omitted -->host all all 127.0.0.1/32 trust&lt;!-- raw HTML omitted -->host all all ::1/128 trust
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/sbin/service postgresql restart
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/usr/java/jdk1.5.0_15/bin/java -version
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/runjava -S /usr/java/jdk1.5.0_15/bin/java
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/install -disU -l /usr/lib/jni:/usr/lib
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[ startup opennms and login ]启动登录：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/etc/init.d/opennms start
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>http://localhost:8980/opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>username and password are admin/admin
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>click Admin / Add Interface, input a ipaddress and press Add button
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK， I have get oepnnms 1.6.1-1 installed on my home pc, I hope you good luck and have fun.&lt;/li>
&lt;/ol></description></item><item><title>Top 25 OSS Projects on Jan 2009</title><link>https://martinliu.cn/2009/01/07/top-25-oss-projects-on-06-jan-2009/</link><pubDate>Wed, 07 Jan 2009 10:18:18 +0000</pubDate><guid>https://martinliu.cn/2009/01/07/top-25-oss-projects-on-06-jan-2009/</guid><description>&lt;p>This list is from SourceForge.net. You may have the question: How do we adapt open source? My answer might be you just should use them as much as you can.   The world is facing economic crisis, you have to saving your budget. How do you deal with that? It&amp;rsquo;s time to think about OSS now.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. Shine J2EE Framework 开发框架&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://j2sos.org/" target="_blank" rel="noopener"
>http://j2sos.org/&lt;/a>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/shine-app" target="_blank" rel="noopener"
>http://sourceforge.net/projects/shine-app&lt;/a>&lt;!-- raw HTML omitted -->Shine is a Java-J2EE Application Framework/JWMS(Java Web Model&lt;!-- raw HTML omitted -->Service)Framework/MVC Framework/Service Oriented Framework. Shine Includes Ajax Lib/Server API/J2EE Architecture. Shine Supported JSF/Spring/AspectJ/Struts/Hibernate/ZK-Ajax/&amp;hellip; &lt;a class="link" href="http://www.j2sos.org/" target="_blank" rel="noopener"
>www.J2SOS.org&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>7-Zip 解压缩软件&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/sevenzip7-Zip" target="_blank" rel="noopener"
>http://sourceforge.net/projects/sevenzip&lt;!-- raw HTML omitted -->7-Zip&lt;/a> is a file archiver with the high compression ratio. The program&lt;!-- raw HTML omitted -->supports 7z, ZIP, CAB, RAR, ARJ, LZH, CHM, GZIP, BZIP2, Z, TAR, CPIO, ISO,MSI, WIM, NSIS, RPM and DEB formats.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3. ADempiere ERP Business Suite 企业资源管理方案&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/adempiere" target="_blank" rel="noopener"
>http://sourceforge.net/projects/adempiere&lt;/a>&lt;!-- raw HTML omitted -->ADempiere Business Suite ERP/CRM/MFG/SCM/POS done the Bazaar way in an open and unabated fashion. Focus is on the Community that includes Subject Matter Specialists, Implementors and End-Users. We are a community fork of Compiere.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4. Notepad++ 文本编辑器，我用了一次就把其他类似的都卸载了&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/notepad-plus" target="_blank" rel="noopener"
>http://sourceforge.net/projects/notepad-plus&lt;/a>&lt;!-- raw HTML omitted -->Notepad++ is a generic source code editor (it tries to be anyway) and&lt;!-- raw HTML omitted -->Notepad replacement written in c++ with win32 API. The aim of Notepad++ is to offer a slim and efficient binary with a totally customizable GUI.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5. ffdshow tryouts 多媒体解码&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/ffdshow-tryout" target="_blank" rel="noopener"
>http://sourceforge.net/projects/ffdshow-tryout&lt;/a>&lt;!-- raw HTML omitted -->ffdshow is a DirectShow filter and VFW codec for many audio and video&lt;!-- raw HTML omitted -->formats, such as DivX, Xvid and H.264. Over 70 bugs have been fixed, codecs have been updated, and support for a few new formats has been added in the tryouts. Vista is now supported.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->6. DVDStyler 播放器&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/dvdstyler" target="_blank" rel="noopener"
>http://sourceforge.net/projects/dvdstyler&lt;/a>&lt;!-- raw HTML omitted -->DVDStyler is a cross-platform DVD authoring application that makes possible for video enthusiasts to create professional-looking DVDs.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7. PostBooks ERP, accounting, CRM by xTuple 企业应用套件&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/postbooks" target="_blank" rel="noopener"
>http://sourceforge.net/projects/postbooks&lt;/a>&lt;!-- raw HTML omitted -->Free open source ERP, accounting, CRM package for small to midsized&lt;!-- raw HTML omitted -->businesses. ERP client runs on Linux, Mac, and Windows (built with open&lt;!-- raw HTML omitted -->source Qt framework). Business logic resides in PostgreSQL database.&lt;!-- raw HTML omitted -->International ERP, accounting, and CRM tools.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->8. Zenoss Core - Enterprise IT Monitoring 企业级 IT 监控&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/zenoss" target="_blank" rel="noopener"
>http://sourceforge.net/projects/zenoss&lt;/a>&lt;!-- raw HTML omitted -->Zenoss Core is an enterprise network and systems management application&lt;!-- raw HTML omitted -->written in Python/Zope. Zenoss provides an integrated product for&lt;!-- raw HTML omitted -->monitoring availability, performance, events and configuration across&lt;!-- raw HTML omitted -->layers and across platforms.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->9. Azureus BT 下载客户端&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/azureus" target="_blank" rel="noopener"
>http://sourceforge.net/projects/azureus&lt;/a>&lt;!-- raw HTML omitted -->Azureus: Vuze is a powerful, full-featured, cross-platform bittorrent client and open content platform.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->10. ZK - Simply Ajax and Mobile&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/zk1" target="_blank" rel="noopener"
>http://sourceforge.net/projects/zk1&lt;/a>&lt;!-- raw HTML omitted -->ZK is Ajax Java framework without JavaScript. With direct RIA, 200+ Ajax&lt;!-- raw HTML omitted -->components and markup languages, developing Ajax/RIA as simple as desktop apps and HTML/XUL pages. Support JSF/JSP/JavaEE/Hibernate/.., and Ajax script in Java/Ruby/Groovy/Python/..&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->11. phpMyAdmin 数据库管理工具&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/phpmyadmin" target="_blank" rel="noopener"
>http://sourceforge.net/projects/phpmyadmin&lt;/a>&lt;!-- raw HTML omitted -->phpMyAdmin is a tool written in PHP intended to handle the administration&lt;!-- raw HTML omitted -->of MySQL over the Web. Currently it can create and drop databases,&lt;!-- raw HTML omitted -->create/drop/alter tables, delete/edit/add fields, execute any SQL&lt;!-- raw HTML omitted -->statement, manage keys on fields.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->12. MinGW - Minimalist GNU for Windows 最小的 Windows 版 GNU&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/mingw" target="_blank" rel="noopener"
>http://sourceforge.net/projects/mingw&lt;/a>&lt;!-- raw HTML omitted -->MinGW: A native Windows port of the GNU Compiler Collection (GCC), with&lt;!-- raw HTML omitted -->freely distributable import libraries and header files for building native&lt;!-- raw HTML omitted -->Windows applications; includes extensions to the MSVC runtime to support&lt;!-- raw HTML omitted -->C99 functionality.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->13. Ares Galaxy p2p 客户端&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/aresgalaxyFilesharing-Bittorrent" target="_blank" rel="noopener"
>http://sourceforge.net/projects/aresgalaxy&lt;!-- raw HTML omitted -->Filesharing-Bittorrent&lt;/a> p2p client connected to TCP supernode/leaf network&lt;!-- raw HTML omitted -->and UDP DHT network. Ares features a built-in directshow media player, a&lt;!-- raw HTML omitted -->powerful library manager, shoutcast radio support and can be used to host&lt;!-- raw HTML omitted -->p2p Chatrooms.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->14. SMPlayer 多媒体播放器&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/smplayer" target="_blank" rel="noopener"
>http://sourceforge.net/projects/smplayer&lt;/a>&lt;!-- raw HTML omitted -->SMPlayer is a complete front-end for MPlayer, from basic features like&lt;!-- raw HTML omitted -->playing videos, DVDs, VCDs to more advanced features like support for&lt;!-- raw HTML omitted -->MPlayer filters, edl lists, and more.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->15. PhpGedView 家谱管理&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/phpgedview" target="_blank" rel="noopener"
>http://sourceforge.net/projects/phpgedview&lt;/a>&lt;!-- raw HTML omitted -->PhpGedView is a revolutionary genealogy program which allows you to view and edit your genealogy on your website. It has full privacy functions, can import from GEDCOM files, and supports multimedia. It also simplifies&lt;!-- raw HTML omitted -->family collaboration.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->16. FileZilla 多协议文件下载客户端&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/filezilla" target="_blank" rel="noopener"
>http://sourceforge.net/projects/filezilla&lt;/a>&lt;!-- raw HTML omitted -->FileZilla is a cross-platform graphical FTP, FTPS and SFTP client a lot of&lt;!-- raw HTML omitted -->features, supporting Windows, Linux, Mac OS X and more. FileZilla Server is&lt;!-- raw HTML omitted -->a reliable FTP server for Windows.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->17. Hyperic HQ Enterprise Monitoring 系统监控&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/hyperic-hq" target="_blank" rel="noopener"
>http://sourceforge.net/projects/hyperic-hq&lt;/a>&lt;!-- raw HTML omitted -->Enterprise monitoring and management for web apps on Linux, Mac, Unix &amp;amp;&lt;!-- raw HTML omitted -->Windows. Auto-discovers 70+ technologies incl. hardware, networks,&lt;!-- raw HTML omitted -->virtualization, and apps. Includes: monitoring, alerts, remote diagnostics,&lt;!-- raw HTML omitted -->and control actions from web console.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->18. Audacity 音频编辑器&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/audacity" target="_blank" rel="noopener"
>http://sourceforge.net/projects/audacity&lt;/a>&lt;!-- raw HTML omitted -->A fast multi-track audio editor and recorder for Linux, BSD, Mac OS, and&lt;!-- raw HTML omitted -->Windows. Supports WAV, AIFF, Ogg, and MP3 formats.Features include envelope editing, mixing, built-in effects and plug-ins, all with unlimited undo.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->19. OrangeHRM - Human Resource Management 人力资源管理&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/orangehrm" target="_blank" rel="noopener"
>http://sourceforge.net/projects/orangehrm&lt;/a>&lt;!-- raw HTML omitted -->OrangeHRM is an Open Source Human Resource Management System that covers Personnel Information Management, Employee Self Service, Leave, Time &amp;amp; Attendance, Benefits, and Recruitment. Tags: HRM, HRMS, HCM, HRIS, EHRMS, Human Capital Management&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->20. FreeNAS 最简单易行的 NAS 设备&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/freenas" target="_blank" rel="noopener"
>http://sourceforge.net/projects/freenas&lt;/a>&lt;!-- raw HTML omitted -->NAS (Network Attached Storage) server supporting: CIFS/SMB, FTP, NFS,&lt;!-- raw HTML omitted -->RSYNC, SSH, AFP, Unison, UPnP, Webserver, iSCSI protocols, local and MS AD authentication, SoftRAID (JBOD,0,1,5), disk encryption, S.M.A.R.T, WebGUI. Requires only 32MB on DOM.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->21. Maxima &amp;ndash; GPL CAS based on DOE-MACSYMA 数学工具&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/maxima" target="_blank" rel="noopener"
>http://sourceforge.net/projects/maxima&lt;/a>&lt;!-- raw HTML omitted -->Maxima is a fairly complete computer algebra system written in lisp with an&lt;!-- raw HTML omitted -->emphasis on symbolic computation. It is based on DOE-MACSYMA and licensed under the GPL. Its abilities include symbolic integration, 3D plotting, and an ODE solver.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->22. DeSmuME 任天堂模拟器&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/desmume" target="_blank" rel="noopener"
>http://sourceforge.net/projects/desmume&lt;/a>&lt;!-- raw HTML omitted -->DeSmuME is a Nintendo DS emulator.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->23. Openbravo ERP 企业资源计划管理应用&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/openbravo" target="_blank" rel="noopener"
>http://sourceforge.net/projects/openbravo&lt;/a>&lt;!-- raw HTML omitted -->Openbravo ERP is a Web based ERP for SME, built on proven MVC &amp;amp; MDD&lt;!-- raw HTML omitted -->framework that facilitate its customization. Already in production,&lt;!-- raw HTML omitted -->Openbravo ERP encompasses a broad range of functionalities such as finance, supply chain, manufacturing &amp;amp; much more&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->24. FreeMind 构思管理工具&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/freemind" target="_blank" rel="noopener"
>http://sourceforge.net/projects/freemind&lt;/a>&lt;!-- raw HTML omitted -->A mind mapper, and at the same time an easy-to-operate hierarchical editor with strong emphasis on folding. These two are not really two different things, just two different descriptions of a single application. Often used for knowledge and content mgmt.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->25. aTunes  音乐播放和管理器&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/projects/atunes" target="_blank" rel="noopener"
>http://sourceforge.net/projects/atunes&lt;/a>&lt;!-- raw HTML omitted -->aTunes is a powerful, full-featured, cross-platform player and manager,&lt;!-- raw HTML omitted -->with audio cd rip frontend. Currently supported formats are mp3, ogg, wav,&lt;!-- raw HTML omitted -->wma, flac, mp4, ape, mpc, mac, radio streaming and podcasts.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OSS 应用的常见现象：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1）在某电信构思的招标的答疑过程中，我被问道：你们的系统能支持 Linux 么？我回答：能支持 RHEL 4，5 , SLES. 哦，那你们就说说能支持通用 UNIX 系统了，我们需要能运行在 RHEL，或者 RedFlag 上。&lt;!-- raw HTML omitted -->&lt;strong>&lt;em>&amp;raquo;越来越多的用户考虑把 IT 管理系统安装部署到 Linux 平台上，并且认为这就是一种 UNIX 系统，他们以前在商业 UNIX 系统上的管理也使用经验都能适用于 Linux 系统。&lt;/em>&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2）一次用户告诉我他们实在是不能使用 Tomcat 做为中间件，来运行我们的应用系统，他们必须用 BEA。因为他们只有 BEA 的中间件的管理员，没有 Tomcat 的管理员。如果上报一个带有 Tomcat 的系统的话，安全部门不会审批的，因为安全认证还没通过，Tomcat 从安全部门的角度讲安全性低。&lt;!-- raw HTML omitted -->&lt;strong>&lt;em>&amp;raquo;把 BEA 的管理员不当 Tomcat 的管理员是人员任用的严谨还是浪费？为什么商业应用比开源应用安全？其实用户自己人也说，这都是制度，他们也无能为力，IT 变革势力似乎种弱于工作惯性。&lt;/em>&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->对于中小企业来说，应用某个开源技术难度应该比大企业要小很多。不过大型企业在很多方面也逐渐有，主动应用开源技术的趋势。这在我以前的 post 中也提到过。从人才的角度和当今的形势看，社会上的 linux 高手，开源大师其实是越来越多，在经济不景气的当下，开源技术的应用从任何角度上看，可能企业都应该放它到议事日程上了。&lt;/li>
&lt;/ol></description></item><item><title>Training tips</title><link>https://martinliu.cn/2008/12/27/training-tips/</link><pubDate>Sat, 27 Dec 2008 08:21:11 +0000</pubDate><guid>https://martinliu.cn/2008/12/27/training-tips/</guid><description>&lt;p>&lt;img src="http://www.competencetoexcellence.co.uk/cartoon2.gif"
loading="lazy"
>上周一周都在广州，为中国最大的直销企业 Amway 做“Remedy Administration Part 2&amp;quot;的培训，这个培训是我今年第 5 次做；本周用户还给公司发来了感谢信，可见此次培训也是本年效果很好的一次。其实本月对我来说是一个培训月，第一周在新加坡接受一产品培训“BMC Configuration Automation For Network”；第二周在北京给‘中国人寿’做 ITIL v3 Foundation 的企业内训；第三周在广州，就是这个 Remedy 的培训。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL v3 培训和 Remedy 培训是两个不同类型的培训，一个是最好实践 IT 管理方法论的培训；另外一个是 Remedy 系统管理和开发的课程。一个注重理论的讲解，另外一个是注重实际操作的介绍。不过从讲师的角度来说，培训的准备和整个过程的控制都是殊途同归的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**准备篇&lt;!-- raw HTML omitted -->**对整课程内容的整体把握是至关重要的，必须对每一个 module 的内容谙熟于胸，这样才能控制整个培训课程的节奏，才能对时间做到从容地分配。特别是 4 ～ 5 天的培训，把所有的课程从头到尾贯彻为一个整体，不失课程的整体性，让学员有整体感，不觉得你教的内容没有逻辑、琐碎是非常重要的。所以需要在准备课程的时候就想好，每个 module 之间的衔接方式，要准备好 review 的问题，从这些问题中总结上一个 module，平滑的过度到下一个 module，增加课程内容直接的衔接，可以提高学员对内容的整体理解和掌握。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**领导篇&lt;!-- raw HTML omitted -->**特别是做企业内训，企业方的领导如果能至开幕词那是最好不过了，他够让学员再次明确培训目标和培训的纪律等，给学员一定的学习压力，能是整个课程进行的有利保证。总的来说领导在此时应该帮忙唱一出黑脸，下面讲师讲的红脸就可以开始演出了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**教室篇&lt;!-- raw HTML omitted -->&lt;strong>确认教室中的投影仪和其他设施都就绪。对于需要上机操作的培训来说，最好每一个都有一台电脑，电脑的硬件和软件配置都最好相同。确认硬件配置足够能跑虚拟机环境，至少 2GB 内存以上。虚拟机软件和培训用虚拟环境的部署是比较费时的一个工作，对于 15 个学员的课堂，至少需要半天时间准备。对于企业来讲，有条件最好不好在自己的办公室进行，应该到一个远离办公场所的环境进行；宾馆会议室、城外的培训中心或者度假村都是非常好的选择。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>实例篇&lt;!-- raw HTML omitted -->&lt;strong>对于 ITIL 课程的讲解来说实例的引用是至关重要的，实例可以是以前的项目经验，工具的经验，一个社会现象，甚至是一个小的故事或者笑话都可以。对于这种外国人总结的理论，人们初次学习就像是“外国人听京剧”一样。语言的 gap 是客观存在的，很难在短短几小时内，把别人总结了几年甚至十几年的经验给讲明白。客观的讲：每个讲师都只是演绎了一个自己的版本，为了保证这个版本的正确性，一定要阅读原版 ITIL v3 的出版物，把其中的实例最好能联系到中国国情，中国特色的例子。例如 ：需要讲明白&lt;/strong>KPI&lt;/strong>（Key performance indicator ）和 ** CSF&lt;/strong>（Critical Success Factors）的区别，我引用了三鹿奶粉事件的案例，蛋白质含量是一个 KPI，如果只关注这个指标，而生产出了对 BB 有害的奶粉了，那么这种质量管理是很可怕的。对于 IT 管理来说也一样，某个流程没有 KPI 是不行的，然而没有 CFS 那可是万万不行的，process owner 或者 IT 管理经理需要看到流程的 CSF 中的至少一项或多项得到实现和落实，需要两手抓，两种指标都合格。在 Remedy 培训的课程中，我改变上来就对系统的 over view 介绍，而是从一个 HelloRemedy 程序入手，保证所有人在 5 分钟之内都开发出了一个具有增删改查四种操作的应用，学员对 Remedy 的开发流程一下子就有了了解，和以前的编程经验一下就联系起来了，对课程中 lab 的兴趣一下就提高了一大截。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**辅助文档篇&lt;!-- raw HTML omitted -->**一定要高估你的学员的学习能力，大多数人都是勤奋好学的，特别是看上去相对年轻的学员。课堂的内容往往不能满足他们一周的求知欲。对于 ITIL v3 的培训，可以提供给学员最新的英文和中文的 ITIL 术语表各一份，我还给学员提供了 ITIL v3 Quick Reference Guide，这些内容可以帮助对课本内容学习和认证考试的准备。对 Remedy 的培训，我提供了 Remedy Action Request System 7.1 最新的所有产品文档，release notes，install guide 等等。能更多提供相关的文档是充实课程内容的一个辅助方式。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**课堂管理篇&lt;!-- raw HTML omitted -->**签到表的管理也是很重要的，一般需要让学员知道，最后的结果会发给他们的 HR。课堂时间的管理主要是根据课程内容的进行来自由安排，在每一个 Break 和 Lab 的时候都需要用最醒目的方式，告知开始和结束的时间。我的最佳实践是，电脑接上投影之后，使用屏幕扩展显示的方式工作，在 ppt 的演示配置中设置，把演示内容投影到第二个显示设备上。这样你就有两个可以工作的桌面，两个独立的桌面，在投影仪显示的那个桌面上，用白底黑字醒目的提示 break 或者 lab 的其实时间。原本的桌面你还可以上网或者备课用。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>工具技巧篇&lt;/strong>&lt;!-- raw HTML omitted -->基于上一个技巧，还需要强调的是：电脑接上投影之后，才可以在桌面的显示属性的设置中看到第二个显示器，并且在这时候才能启用投影作为第二个显示器，把桌面扩展到投影上。&lt;a class="link" href="http://www.blue1000.com/bkhtml/2008-11/60053.htm" target="_blank" rel="noopener"
>&lt;img src="http://www.blue1000.com/upload/2008_11/081123015491102.gif"
loading="lazy"
>&lt;/a>如果显卡支持的话，一般在投影上显示的分辨率还是可以调节的，这就避免了桌面切换和桌面与投影支持分辨率不匹配的麻烦。在得到一个扩展桌面之后，投影会显示一个你空白桌面，背景图片和你的本机相同。这样在打开 PPT 之后，你在放映设置的菜单里就能看到相关对屏幕设置的选项；重要的是两个选项：1）投影的第二个显示器；2）显示演示者试图。第二个技巧是我以前的 Manager 教给我的，这个演示者视图是一个和 ppt 内容不同的视图，如图所示。我觉得有两个好处，一是在这个视图上有计时器，能知道你讲了多长时间，二是能看到 ppt 的注释部分。另外一个工具就是带激光的翻页器。它使你能够站在任何一个你觉得舒服的地方讲解，&lt;img src="http://www.china-brand.net/files/200801/product/25/1199331118.gif"
loading="lazy"
>试着走到学员中间去讲解，是一个不错的方式，这样能让学员听的更清楚，而且也能让你容易融入到学员中。如果你也想使用这个工具的话，记得在电脑包中记得带一个没有拆封的备用电池。我的翻页器，如果使用激光指示过多的话比较费电，所以我一般都多带一节电池。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>课程考核篇&lt;/strong>&lt;!-- raw HTML omitted -->中国人都比较重视考试，考试的压力能很好的驱动学员的学习。在上两个培训中都有考核的部分，一个是 ITIL V3 的官方认证考试；另一个是考核是我设计的。为了配合 Amway 的培训考核需求需要，由于这个培训是不提供试卷考试的，我就设计了一个对 Lab 结果的评估作为考试内容。所以学员在最后一天把 lab 的结果导出成一个文件中交给我，我从课程的几个方面来评估他们的结果，给出一个具体的分数。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>反馈篇&lt;/strong>&lt;!-- raw HTML omitted -->在课程进行的过程中，可以向学员，特别是用户方培训的负责人征求反馈意见，及时了解学员的接受程度和期望。通过这些反馈信息，对后面的课程进行方式和内容做合理的调整。从而保证最终学员和用户对课程的满意。对于讲师来说，课程各个内容的质量可以看做是 KPI，而用户的反馈和最终认可就可以看做是 CSF 了。说白了作为讲师而言，咱不能让人觉得白花了钱。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上是我最近的一些培训经验总结，如果您也有类似经验和经历，欢迎交流和分享。&lt;/p></description></item><item><title>ITIL V3 Traininig For China Life</title><link>https://martinliu.cn/2008/12/14/itil-v3-traininig-for-china-life/</link><pubDate>Sun, 14 Dec 2008 11:00:42 +0000</pubDate><guid>https://martinliu.cn/2008/12/14/itil-v3-traininig-for-china-life/</guid><description>&lt;p>&lt;img src="http://www.blueloop.net/images/itil-v3.gif"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上周给“中国人寿”做了 ITIL V3 Foundation Training， 这是一个定制的企业内训，包括 3 天的理论学习，一天的‘BSM 机场模拟沙盘演练’，最后一天进行 ITIL V3 Foundation 认证考试。总的来说培训的效果还是非常不错的，学员基本上都能够理解和掌握 ITIL v3 的基本理论；在随堂的模拟考试后，能够针对一些题和我做非常深入的讨论。BSM 机场模拟沙盘演练对于这群基本上比较年轻的学员来说成了一个非常热烈的培训环节，培训教室温度和气氛都比较热，一轮游戏跑下来以后，有些人就已经是满脸通红了；可见沟通也是一件力气活 :) 从学员们填写的反馈表的结果显示，他们对我的平均满意度是 4.35；呵呵这证明经过多日来的备课准备和以前的项目积累还是比较有效的，相信下次能够比这做的更好。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->那么：什么人是需要参加 ITIL V3 培训的？我觉得 IT 部门的所有相关人员，都是有必要参加 ITIL v3 的基础培训，部分流程核心人员和管理人员需要继续参加更高级的培训。除非你认为：不需要应用 ITIL 作为 IT 服务管理的理论，而是应用的&lt;a class="link" href="http://forum.martinliu.cn/topic.php?id=8" target="_blank" rel="noopener"
>其他方法论&lt;/a>总之 ITIL 作为当今的“good practice”，通常它还是非常推荐一种武装思想的必备武器。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL 培训还应该是整个实施过程中的一部不可缺少的部分，不同规格和内容的培训需要在不同阶段提交给组织的各个层面。有时候一些组织结构或者管理方法的调整和改进，一方面需要高层领导的大力关注和重视；更重要的是保证这个改进和改革的步伐能持续不断的推进下去。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->关于 ITIL 理论的持续性学习，其实企业内部也可以自己组织，可以对当前运作的或即将实施的特定的流程，进行回顾。主要是把定制和客户化之后的流程、角色、PKI，CFI 等概念和涉及的流程工作说明做进一步深化。培训的组织可以是不举一个的，process owner 应该和 service manager 一起运作和制定这些培训，确保企业内相关流程的有效性和效率。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;8&amp;rdquo;]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->相信企业运用了更多的 ITIL 之后，还可以总结出更多自己的经验。初级阶段应该是缓慢上升的过程，当 ITSM 达到一定的成熟度后，在应用其他未实施流程，应该会更快。 今天还发现了一个不错的 ITIL Blog ，分享一下 &lt;a class="link" href="http://itservicemngmt.blogspot.com/" target="_blank" rel="noopener"
>http://itservicemngmt.blogspot.com/&lt;/a>&lt;/p></description></item><item><title>[项目更新] OCS Inventory NG 1.02 RC3 available and GLPI 0.71.2 available</title><link>https://martinliu.cn/2008/11/27/ocs-inventory-ng-102-rc3-available-and-glpi-0712-available/</link><pubDate>Thu, 27 Nov 2008 05:15:26 +0000</pubDate><guid>https://martinliu.cn/2008/11/27/ocs-inventory-ng-102-rc3-available-and-glpi-0712-available/</guid><description>&lt;p>如果你了解 OCS Inventory NG 的话，您可能会发现这个问题，在家里用 adsl 上网，可能访问不到这个项目的网站，所以要想下载这个项目的软件，可以去 sorceforge.net 下载。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->10/28/2008 OCS Inventory NG Server 1.02 RC3 发布了 Patch1，Patch1 主要是修复了一些数据库创建和更新的问题，具体的内容如下所示：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->OCS Inventory NG 在 sorceForge 的下载网址 &lt;a class="link" href="http://sourceforge.net/projects/ocsinventory/" target="_blank" rel="noopener"
>http://sourceforge.net/projects/ocsinventory/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**15 September 2008 GLPI 0.71.2 发布 **&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这也是一个 bug 修复的版本，没有新增什么功能。修复的问题如下所示。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1094" target="_blank" rel="noopener"
>#1094&lt;/a>
Auth Method Change if old one does not exists
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1109" target="_blank" rel="noopener"
>#1109&lt;/a>
Clean update for end_warranty_buy on search system
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1110" target="_blank" rel="noopener"
>#1110&lt;/a>
OEM Computer selection problem on licenses
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1111" target="_blank" rel="noopener"
>#1111&lt;/a>
Keep reminder and bookmark when author is deleted
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1112" target="_blank" rel="noopener"
>#1112&lt;/a>
Bookmark creation right problem
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1113" target="_blank" rel="noopener"
>#1113&lt;/a>
Mail formatting
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1114" target="_blank" rel="noopener"
>#1114&lt;/a>
Clean log on cartridge / consumable
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1115" target="_blank" rel="noopener"
>#1115&lt;/a>
logout with noAuto for auto logged users
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1119" target="_blank" rel="noopener"
>#1119&lt;/a>
Mailgate followup import problem due to author check
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1120" target="_blank" rel="noopener"
>#1120&lt;/a>
Cartridge restore bug
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1121" target="_blank" rel="noopener"
>#1121&lt;/a>
Clean Ignore process in software dictionnary
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1122" target="_blank" rel="noopener"
>#1122&lt;/a>
Correct stats computation
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1131" target="_blank" rel="noopener"
>#1131&lt;/a>
Search engine problem for plugin field which need group by
&lt;a class="link" href="https://dev.indepnet.net/glpi/ticket/1133" target="_blank" rel="noopener"
>#1133&lt;/a>
Bug on database connection error&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>[项目更新] OTRS project news update</title><link>https://martinliu.cn/2008/11/19/otrs-project-news-update/</link><pubDate>Wed, 19 Nov 2008 17:40:56 +0000</pubDate><guid>https://martinliu.cn/2008/11/19/otrs-project-news-update/</guid><description>&lt;p>&lt;a class="link" href="http://www.otrs.org/" target="_blank" rel="noopener"
>&lt;img src="http://www.otrs.com/uploads/pics/otrs_download_01.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>当 OTRS 遇到 OpenNMS&lt;/strong> **OTRS meets openNMS! **OTRS 和 OpenNMS 发布了新的集成手册 &lt;a class="link" href="http://www.opennms.org/index.php/OTRS_Integration" target="_blank" rel="noopener"
>http://www.opennms.org/index.php/OTRS_Integration&lt;/a> 这个 Web Service 的接口应该能做方便的集成了，没有试过，总之 OpenNMS+OTRS 应该是不错的组合，黄金搭档送给你，到~~&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**The SIRIOS 2.2 modules for OTRS 2.3 are released **SIRIOS 2.2 模块发布了。我一直以为&lt;a class="link" href="http://www.otrs.com/en/produkte/sirios/" target="_blank" rel="noopener"
>SIROS&lt;/a>是非开源的项目，今天才知道它也是开源的哦，有空试试看。这个是专门为安全管理定制的，主要是去管理企业的安全事件。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->自从 2008-08-05 **OTRS 2.3.1 (Bora Bora) **发布之后，又发布了两个版本，2.3.2  和 2.3.3，这两个版本都是 2.3.1 的 bug 修复版，功能上没有增加。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OTRS 2.3 中重大的改变如下：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># &amp;ldquo;Performance, Performance, Performance!&amp;rdquo;  系统性能提高&lt;!-- raw HTML omitted -->_ Data base- &amp;amp; code-improvements increase lead to a general performance gain of up to 20%.&lt;!-- raw HTML omitted -->_ The support of an indexed full text search has been added. The feature is disabled per default because additional disc space is needed. The expected performance gain is 50%.&lt;!-- raw HTML omitted -->_ Reduced reloads by using AJAX technology&lt;!-- raw HTML omitted -->_ Instead of an ongoing recalculating of the escalation time during the run time, it is only recalculated when it changes due to an event in OTRS. It is then being stored in the ticket object which allows a direct access of external reporting tools to the data base as well as a more efficient reporting on escalations. This will also lead into a substantial performance improvement.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># Search Functionality 搜索功能&lt;!-- raw HTML omitted -->_ Support of logical expressions: ticket-, customer- and FAQ- search supports logical expressions, utilizing the AND, OR and ! operators as well as structuring expressions with parentheses.&lt;!-- raw HTML omitted -->_ Search for ticket numbers by using the Browser OpenSearch feature (OpenSearch format).&lt;!-- raw HTML omitted -->_ Search for ticket titles in the agent ticket search form and in the generic agent.&lt;!-- raw HTML omitted -->_ Search for ticket close time in the agent ticket search form and in the generic agent.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># Ticket Zoom &amp;amp; Ticket Move 工单伸缩和移动&lt;!-- raw HTML omitted -->_ Expand/Collapse of articles: the article view can be expanded to display all articles at once. The current article will remain in focus, and the preceding, or following articles will be displayed.&lt;!-- raw HTML omitted -->_ Structured article tree - The article tree has been changed to a table.&lt;!-- raw HTML omitted -->_ Printing of articles has been realized.&lt;!-- raw HTML omitted -->_ The ticket title of linked tickets are displayed in case of a mouse over action.&lt;!-- raw HTML omitted -->_ Merged tickets are displayed crossed out.&lt;!-- raw HTML omitted -->_ Multiple files can be attached while moving a ticket using the ticket move mask.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># Ticket FreeText &amp;amp; FreeTime opportunities&lt;!-- raw HTML omitted -->_ When splitting a ticket, all FreeText and Free Time data will be copied to the new ticket.&lt;!-- raw HTML omitted -->_ Ticket Free Time fields can be declared as mandatory.&lt;!-- raw HTML omitted -->_ A URL can be configured that takes the value of a FreeText Field and displays it as an URL link in the ticket.&lt;!-- raw HTML omitted -->_ Added X-OTRS-TicketTime and X-OTRS-FollowUp-TicketTime.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># IMAP, IMAPS, POP3 &amp;amp; POP3S support 对以上协议的支持&lt;!-- raw HTML omitted -->_ With OTRS 2.3 IMAP, IMAPS, and POP3S is supported to fetch mails from your MTA.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># Security 安全方面&lt;!-- raw HTML omitted -->_ In case of a lost password, OTRS is sending an e-mail to the user with a &amp;ldquo;password reset link&amp;rdquo;. After clicking this link the new password is sent to the user in a second e-mail.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># Notifications &amp;amp; Escalations 通知和升级&lt;!-- raw HTML omitted -->_ All agents that have a read permission on a certain queue can be selected for notification.&lt;!-- raw HTML omitted -->_ An escalation view has been added that displays all tickets sorted by their remaining time to escalation.&lt;/p></description></item><item><title>[发布说明] OpenNMS 1.6.0 (Stable) Released</title><link>https://martinliu.cn/2008/11/14/e58f91e5b883e8afb4e6988e-opennms-160-stable-released/</link><pubDate>Fri, 14 Nov 2008 14:57:36 +0000</pubDate><guid>https://martinliu.cn/2008/11/14/e58f91e5b883e8afb4e6988e-opennms-160-stable-released/</guid><description>&lt;p>&lt;img src="http://www.opennms.org/images/b/b5/Banner.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/forum/forum.php?forum_id=882433" target="_blank" rel="noopener"
>OpenNMS 1.6.0 (Stable) Released&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->似乎每年的 10 月以后我就会进入一个超级繁忙的状态，很长时间没有更新 blog 了，今天姑且转载一个 OpenNMS 的发布说明吧。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS, the world&amp;rsquo;s first enterprise-grade network management platform developed as 100% free and open software, has released version 1.6.0. This is a stable, production release that incorporates nearly three years of development.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上算是 OpenNMS 的广告语大家看看就是，需要注意的是一个企业级的产品实施费用是从很低的门槛一直到企业级的花费的。和其他的企业级解决方案的实施没有区别，差异在于，一个不同的许可证类型，此为开源许可证是也。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The last production version, 1.2.0, was aimed to compete squarely with Hewlett-Packard&amp;rsquo;s OpenView Network Node Manager product. This release builds upon that work to expand the reach of OpenNMS to other parts of the OpenView family as well as to provide an open source alternative to products such as Tivoli&amp;rsquo;s Netcool.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上是 OpenNMS 的精神所在：OpenNMS 一直在叫嚣这和 OpenView, NetCool 较量；这足以说明了它的勇气，和发展方向，它的创始人 Tarus 从一个人单枪匹马开始，到现在有一般人 inhouse 开发这个产品，自己全世界出差，如果说没有实现和商业产品的抗衡的话，我个人觉得他起码实现了一个所有开源参与者的梦想“为需要自己的人工作，为自己工作”&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS 1.6.0 sports a redesigned user interface, a number of scalability improvements and increased integration with other products. OpenNMS now runs on Windows, in addition to most flavors of Linux, Solaris and Mac OS X.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面说的是新版的用户界面重新设计了，目前我还没有时间安装，回头装好了一定上图片，新版的稳定性得到提高并增加了和其他产品的集成。现在 OpenNMS 也能在 Windows 上运行了，在我看这是早晚的是，它是个纯 Java 的应用，移植不是什么难事，不过我不推荐在 windows 上完开源的产品，有点不伦不类的感觉，而且从原生态的 Linux 环境中才哪呢个够获取开源的全部优势。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->One of the major additions to the platform is the Alarms subsystem. OpenNMS can receive events from a number of sources, such as SNMP traps, syslog, TL/1, and custom scripts. A key can be configured for each event that will allow it to be turned into an alarm. Thus if a device is generating multiple, identical events, their number will be reduced into just a single alarm. This greatly reduces the amount of event &amp;ldquo;noise&amp;rdquo; that operators see.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面说告警子系统现在是增强了。OpenNMS 能收到像是 snmp trap，syslog， TL/1 和自定义脚本发来的告警事件。某种键值能被设置，让一个事件能被出发成一个警报。报警事件经过了压制和降噪处理，较少了重复报的数量。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->In addition, automated actions can be performed on alarms. For example, events that signal problem resolution, or &amp;ldquo;up&amp;rdquo; alarms, can be matched with &amp;ldquo;down&amp;rdquo; alarms to automatically clear them. Event workflow can be built into the system by using these automations to manage the alarm list, thus freeing up the operators to focus on the most important issues.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->另外，对于一个警报来说，可以和一个自动化的动作配合，例如某些 up 事件能去清除对应的 down 事件。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->While OpenNMS contains a robust automated discovery system, when managing tens of thousands of nodes it is often preferred to allow an external system to determine what OpenNMS is to monitor. Thus OpenNMS 1.6.0 contains a new &amp;ldquo;model importer&amp;rdquo; feature that allows node, interface and service information to be imported directly into the system using data in an XML format. One company uses this method to manage over 70,000 devices with a single instance of OpenNMS.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->同时 OpenNMS 现在的自动发现系统非常强大哦，档管理一万个节点的时候，OpenNMS 往往倾向于使用一个外部的系统来决定什么是需要 OpenNMS 监控的。在 1.6 中包括这样一个新功能‘模型导入’，他能把 xml 格式的节点和端口数据自己导入到 OpenNMS 系统中。曾经一个公司用这个方法管理这 7 万个节点，都在一套 OpenNMS 系统内，好家伙~~也就是说这个功能有了之后，你就可以不用一个节点的去发现了，往往有些机器发现的那会正好不在线，那就漏掉很多的机器了。&lt;!-- raw HTML omitted -->Data collection saw many improvements as well. With the proper hardware, OpenNMS is able to collect over one million data points every five minutes. This data can be from SNMP (versions 1, 2c and 3), JMX, HTTP, or NSClient. The collected data can be exported via the web user interface. Reports showing the highest and lowest values for a particular set of data points (Top N Reports) can also be created, and 1.6.0 contains a vastly improved thresholding system. Thresholds can be generated on individual data points, combinations of data points, as well as a &amp;ldquo;relative change&amp;rdquo; such as when a value shows a sudden increase or decrease.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->数据的采集方面也有很多增强。利用一个合适的硬件，OpenNMS 能够每 5 分钟把超过一百万的数据采集点采集一遍，要是采集稳定的话，这还是比较快的了。被采集的数据点可以使来自 snmp v1,2,3, JMX, http, nsclient。 采集来的数据能通过 web 界面到处了。这还是不错的功能，能有可能做一些系统之外的自定义报表了。自带的报表功能能够定制 TopN 的报表。OpenNMS 现在的阀值管理系统也得到了增强。能为某一个数据点设置，也能为一组数据采集点，同时有了对 &amp;ldquo;relative change&amp;quot;的管理，也就是某个数据忽高忽低的管理，也即是某些瞬间的异常增的很高或降的很低。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS was originally designed for network service monitoring, and that functionality has been increased as well. New monitors for such things as Windows services are now available, as well as more advanced synthetic transactions. The Page Sequence Monitor was created to monitor a complete web-based transaction, while the Mail Transport Monitor determines the full round-trip availability of a mail service.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS 天生是监控网络的。新增了很多 monitor，例如 windows 服务监控，模拟交易监控。页面序列监控器用了监控一些列的 web 交易处理行为，还能通过 Mail Transport Monitor 来确定邮件服务的可用性。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Probably the biggest change was the development of distributed monitoring. Using a small Java webstart application installed on a remote system, OpenNMS is able to monitor service availability from the point of view of the remote system. Combined with the Page Sequence Monitor one can measure the user&amp;rsquo;s experience when visiting a website from various remote locations.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最大的变更在这个版本中是‘分布式监控’，使用一个小的安装在远处的一个主机上的 Java Webstat 应用，opennms 能过过这个监控服务点看到远程的系统上采集的数据。结合页面序列监控功能，它可以实现这样的功能：在南北方，网通电信的网络中找四个点安装这个程序后，模拟从不同网络位置监控某个 web 网站上一系列功能页面的可用性。这就是所谓的模拟交易管理，是 Web 应用管理方面中当下不可缺少的环节。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->As OpenNMS was designed as a platform, there are numerous ways for external applications, both open and proprietary, to integrate with it. There is a new Trouble Ticketing API that allows for two-way communication between OpenNMS and a number of external ticketing systems such as Jira, Concursive (CentricCRM) and OTRS.&lt;!-- raw HTML omitted -->像 opennms 这样的平台，可以提供给开源或者商业外部系统的接口。通过这些 api 的双向接口，你可以把报警事件送到外部的工单管理系统(事件管理流程平台)中，例如 Jira, Concursive (CentricCRM) and OTRS.、&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->These are just a few of the new features available in 1.6.0. As always, OpenNMS is 100% free and open software. Please check it out and let us know what you think. We hope you enjoy using it as much as we enjoy creating it.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->嗯，终于读完了整篇的发布说明，你能相信，它都发布了这么久了，我只有在周五晚上抽空仔细读完么。这周简直是太忙，天天加班，还有天天处理不完的状况。今天的一个教训就是“软件系统之间的集成不是简单能搞定的，需要小心，小心在小心”&lt;/p></description></item><item><title>ITIL V3 Study Notes (2)</title><link>https://martinliu.cn/2008/11/04/itil-v3-study-notes-2/</link><pubDate>Tue, 04 Nov 2008 22:56:57 +0000</pubDate><guid>https://martinliu.cn/2008/11/04/itil-v3-study-notes-2/</guid><description>&lt;p>&lt;img src="http://www.martinliu.cn/wp-content/uploads/2008/11/itilv3model.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这就是全新的 ITIL v3 的模型个人觉得吧 ITIL 四个字母放在中间不如把 Service 放在中间，原因很简单，所有流程和原则都是围绕服务展开，V3 是一个关于服务生命周期管理的最好实践集合。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->不管你是否学过 ITIL v3，你需要了解的核心基本概念包括：Good practices, service, service management, function, roles, process, process model, RACI, generic roles。 想初步了解这些概念的话可以先看看 ITIL V3 的术语表。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上图是一个最高 level 模型，告诉了 V3 的架构，要进一步细化的话,下面的这张图是我见过的最能说清楚整体框架，并且能点到为止的模型图。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.best-management-practice.com/officialsite.asp?DI=597910&amp;amp;trackID=002192" target="_blank" rel="noopener"
>&lt;img src="http://www.best-management-practice.com/gemimage/BMP_process_model.gif"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果你觉得这个图形还是过于复杂，理解起来还有些困难的话，你需要看看下面的内容。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面是我整理的 ITIL v3 概念快速参考：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>大流程套小流程&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Service Strategy// Service strategy, demand management, service portfolio management, financial management  共 4 个流程&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Service Design// service level management, service catalogue management, availability management, information security management, supplier management, capacity management, it service continuity management 共 7 个流程&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Service Transition// change management, service asset and configuration management, release deployment management  共 3 个流程&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Service Operation// Event management, incident management, request fulfillment, problem management, assess management, [functions] service desk, technical management, it operations management, application management  共 5 个流程加 4 个职能，术语表中也吧 Function 翻译成功能，我觉得不妥，职能应该更贴切一点。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Continual service improvement// 7-step improvement  共 1 个流程&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->所以 v3 一共是 20 个流程加四个职能。比较一下 V2，V2 有 10 个流程和一个职能，内容增加了一倍。如果系统的学习的话最好还是上一个正规的培训。现在正规的 v3 培训也不贵，而且一般认证考试也不难。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->V3 和 V2 主要的不同点&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>&lt;strong>对service的重新定义&lt;!-- raw HTML omitted -->&lt;/strong>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**对Service management ****的重新定义 **
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>更强调&lt;strong>&lt;strong>processes&lt;/strong>&lt;/strong>是****闭环系统&lt;/strong>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>ITIL从此进入Good practice时代&lt;/strong>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>Generic Roles概念 ： process owner, service owner, process manager&lt;/strong>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol></description></item><item><title>Some old stuff for sharing</title><link>https://martinliu.cn/2008/10/29/some-old-stuff-for-sharing/</link><pubDate>Wed, 29 Oct 2008 03:43:35 +0000</pubDate><guid>https://martinliu.cn/2008/10/29/some-old-stuff-for-sharing/</guid><description>&lt;p>I think the following open source software resources could be helpful to you.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->本页面上是我认为可能对您有用的资源连接，目的是让您能以最小的时间和精力代价来体验开源软件。使用一个虚拟应用可能是一个比较方便的途径；有些开源应用做的非常体贴用户，软件提供 ISO 文件下载，通过这个 ISO 文件甚至能一键安装，在一个物理和虚拟的硬件上试用这个软件了。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="virtual-appliances--虚拟应用">Virtual Appliances / 虚拟应用&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Asset Management 资产管理 OCS Inventory v1.02 RC1＋ GLPI v0.70.2，&lt;a class="link" href="http://www.martinliu.cn/2008/04/28/deploy-asset-management-solution/" target="_blank" rel="noopener"
>Download , 下载地址和虚拟说明。&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>IT Service Management &amp;ndash; Help Desk &amp;ndash; Ticket tracking system, OTRS2.6.6+OTRS::ITSM 1.0.94, &lt;a class="link" href="http://www.martinliu.cn/2008/04/21/open-source-ticket-request-system-otrs-226/" target="_blank" rel="noopener"
>Download , 下载地址和虚拟应用说明。&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Network monitoring system:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>Zenoss 2 , it was made by Zenoss, not the newest version; &lt;a class="link" href="http://www.zenoss.com/download/links?nt" target="_blank" rel="noopener"
>download, 下载网址。&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>OpenNMS 1.5.91, download it from SourceForge; they like to keeping this vm appliance update. &lt;a class="link" href="http://sourceforge.net/project/showfiles.php?group_id=4141" target="_blank" rel="noopener"
>Download 下载网址。&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>ISO Appliances / ISO应用&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Cacti + Nagios + nTop = &lt;a class="link" href="http://www.martinliu.cn/2008/05/16/iso-open-source-software/" target="_blank" rel="noopener"
>CactiEZ&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>OSSIM is a open source security management suite. &lt;a class="link" href="http://www.ossim.net/download.php" target="_blank" rel="noopener"
>download, 下载网站&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Network appliance: Vyatta could be firewall, router, gateway, dhcp server, etc&amp;hellip; &lt;a class="link" href="http://www.vyatta.com/download/" target="_blank" rel="noopener"
>download, 下载网站&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Slax is a USB Linux, install in on usb key within 10 minutes, run it on any where, &lt;a class="link" href="http://www.slax.org/get_slax.php?download=iso" target="_blank" rel="noopener"
>download Slax for CD 下载&lt;!-- raw HTML omitted -->&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>FSF mail list&lt;/strong>&lt;!-- raw HTML omitted -->Welcome to the Free Software Supporter, the Free Software Foundation&amp;rsquo;s&lt;!-- raw HTML omitted -->monthly news digest and action update.&lt;/li>
&lt;/ul></description></item><item><title>八达岭森林公园-红叶岭</title><link>https://martinliu.cn/2008/10/27/e585abe8bebee5b2ade6a3aee69e97e585ace59bad-e7baa2e58fb6e5b2ad/</link><pubDate>Mon, 27 Oct 2008 13:32:49 +0000</pubDate><guid>https://martinliu.cn/2008/10/27/e585abe8bebee5b2ade6a3aee69e97e585ace59bad-e7baa2e58fb6e5b2ad/</guid><description>&lt;!-- raw HTML omitted --></description></item><item><title>M$ Windows is eating your hard driver</title><link>https://martinliu.cn/2008/10/24/ms-windows-is-eating-your-hard-driver/</link><pubDate>Fri, 24 Oct 2008 00:52:53 +0000</pubDate><guid>https://martinliu.cn/2008/10/24/ms-windows-is-eating-your-hard-driver/</guid><description>&lt;p>&lt;img src="http://lh5.ggpht.com/liuzh66/SQEZ0RBOw_I/AAAAAAAAA38/Ulq2AKwYejU/s800/Access%20is%20denied.jpg"
loading="lazy"
>No matter Bill says how friendly M$ Windows is. It is eating more and more my free disk space. Toady I figured out some tips for releasing disk space. In Windows file explore, you can not see the folder size without checking on property. So you may need a tool, something like FolderSizes. FolderSize helps me to know more about my heard diver. It shows me there is a folder &amp;lsquo;System Volume information&amp;quot;, this folder is 6.20GB big. What the hell is that??? I can not even see it in file explore. Then I check on Folder Options, here are so many hiding options for you. In order to take out that big folder, I unchecked &amp;lsquo;&amp;ldquo;Hide protected operating system files and folders&amp;rdquo;, then the folder shows up. But I can not open it sine I really wants to know what hell is been hidden in that folder. A error message box popup up&amp;quot;Assess is denied.&amp;quot; WOW this is my laptop, I am not able to access the folder. Is this a M$ asset? In FolderSize, I can go inside this folder; it has so many files. Everything in this folder looks like patch file. I have no idea where and when it went down my computer; or this dame OS made it. Now I&amp;rsquo;m deleting these files and folders in folder &amp;lsquo;System Volume information&amp;quot; from FolderSize. Another error message box popup up; it says &amp;ldquo;Cannot delete XXX000.ps1: It is being used by another person or program&amp;rdquo;. Kidding me? Does anyone share this laptop with me at this moment? Fortunately I have openSuSe, I issued rm -rf command after booted into openSuse. Now 6.2GB space was released.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Within FolderSize, one more fat folder was identified out, It is &amp;lsquo;&amp;lsquo;C:\Documents and Settings\LocalService\Local Settings\Application Data\Google&amp;rsquo;. I have Google Desktop on my laptop, but I did not use Google desktop search too much, but it take me near 2GBs space. I realized Google desktop indexed my whole hard drive anyway. I have to uninstalled Google Desktop and deleted that folder. Now I got more 2GB space.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->M$ Windows also did anther favorite for me to created a fat pagefile.sys. It is 3.5 GB; Big~~ isn&amp;rsquo;t it? My laptop have 4GBs physical RAM, but XP only use 3.5GB. As same 32bit OS, openSuSE does use all of 4GB. Since I am short of free space, pagefile.sys was changed to 1.5GB. SO, 2GB spaces was saved.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->In XP file system, there are some files can not be deleted. I bet you do have some files like that. Those files are already useless, but you can&amp;rsquo;t get rid of them. &lt;a class="link" href="http://www.threatexpert.com/files/ForceDel.exe.html" target="_blank" rel="noopener"
>ForceDel.exe&lt;/a> can delete them all. This tiny tool saved me more then 1GB space.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->6.2+2+2+1=11.2GB&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->There are more screen-shots, please check out: &lt;a class="link" href="http://picasaweb.google.com/liuzh66/Mis" target="_blank" rel="noopener"
>http://picasaweb.google.com/liuzh66/Mis&lt;/a> and comment.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ok now I&amp;rsquo;m be able to create at least two VMWare machines for my work. I hope those tips are helpful for you.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->In this week, I&amp;rsquo;m so busy on a Bladelogic product POC testing for CCB which is one of the biggest bank in China. At evening, I usually had to study on ITIL v3 stuff in order to get myself ready for a upcoming training next month. But tonight I&amp;rsquo;d like to take time off of the work.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>XP 磁盘空间节省偏方&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>OTRS FAQ 1.5.3 : you have six reasons to use it</title><link>https://martinliu.cn/2008/10/19/otrs-faq-153-you-have-six-reasons-to-use-it/</link><pubDate>Sun, 19 Oct 2008 13:01:34 +0000</pubDate><guid>https://martinliu.cn/2008/10/19/otrs-faq-153-you-have-six-reasons-to-use-it/</guid><description>&lt;p>&lt;img src="http://www.martinliu.cn/wp-content/uploads/2008/10/e785a7e78987-004-300x225.jpg"
loading="lazy"
> I have Christopher T. Kuhn Blog&amp;rsquo;s RSS feed in my blackberry. That&amp;rsquo;s the way I following with OTRS project. Christoper do the best job to explain new features and updated s. I did not try out OTRS FAQ 1.5.3 yet, but it look great from &lt;a class="link" href="http://blog.kuhn-kt.de/?p=125" target="_blank" rel="noopener"
>Chrisopher&amp;rsquo;s post&lt;/a>.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->知识库、解决方案库或者 KB 的建设往往被人们忽视，对它的选择也是见仁见智。不过可能也有标准，就像你选择你最喜欢吃的水果一样。你最喜欢吃的水果就是：一年四季你到超市见到就想买的，一年四季都想吃的，而且必须是营养丰富有益于健康的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OTRS FAQ 1.5.3 新版的 FAQ 出来后，OTRS 有了真正的 Knowoledge Base； 虽然依然是一个简单版的 KB，不过已经具备了作为一个 KB 应该具有的 6 个主要功能。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>**所见即所得的编辑方式 **创建包含图片和丰富文字和是的知识库或者FAQ条目。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**脚本导入工具 **可以导入已有的一些经验文档、操作规章手册等已有知识文档。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**关键字连接 **增加知识库的可搜秀性
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**FAQ报表 **通过一些定期的报表计算出每一个知识库条目被查看的频率
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**TOP10文章列表 **在知识库浏览界面中显示被浏览次数做多的前10篇
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>**知识审批流程 ** 你可以定义一个审批的流程，审批后的内容可以被显示在内部、外部或者公开区域。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->目前我还没有时间测试这个知识库，相信应该是个不错的东西，相关测试截屏请拭目以待。如果你已经测过也请留步，留言告诉我你的体验。&lt;/li>
&lt;/ol></description></item><item><title>ITIL V3 Study Notes (1)</title><link>https://martinliu.cn/2008/10/19/itil-v3-study-notes-1/</link><pubDate>Sun, 19 Oct 2008 11:55:10 +0000</pubDate><guid>https://martinliu.cn/2008/10/19/itil-v3-study-notes-1/</guid><description>&lt;p>关于 ITIL V3 的简单网上已经有很多，我是从 ITIL V2 Foundation 认证升级到 V3 的，由于目前做的 ITSM 的项目还都是 V2 的内容。随着公司的产品逐渐想 V3 上靠，并且很多已经通过了 V3 认证了；所以自己必须好好在看看 V3 的内容，所谓温故而知新，我也希望能尽早把 V3 的内容都消化掉。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面的一些列帖子是我最近的一些学习笔记，也本着把后书读薄的目的，希望这些笔记能帮我把思路整理好。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL V3 的核心出版物有五本。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="https://martinliu.cn/DOCUME~1/home/LOCALS~1/Temp/moz-screenshot.jpg"
loading="lazy"
>&lt;img src="http://www.bestpracticebookstore.co.uk/ekmps/shops/keyskillsilx/images/ss%5Bekm%5D61x80%5Bekm%5D.jpg"
loading="lazy"
>&lt;img src="http://www.bestpracticebookstore.co.uk/ekmps/shops/keyskillsilx/images/sd%5Bekm%5D58x80%5Bekm%5D.jpg"
loading="lazy"
>&lt;img src="http://www.bestpracticebookstore.co.uk/ekmps/shops/keyskillsilx/images/itil_service_transition%5Bekm%5D61x80%5Bekm%5D.jpg"
loading="lazy"
>&lt;img src="http://www.bestpracticebookstore.co.uk/ekmps/shops/keyskillsilx/images/so%5Bekm%5D61x80%5Bekm%5D.gif"
loading="lazy"
>&lt;img src="http://www.bestpracticebookstore.co.uk/ekmps/shops/keyskillsilx/images/cs%5Bekm%5D61x80%5Bekm%5D.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果有 ITIL v2 相关的理论或者实践经验 ，而且英文好的话建议直接从网上购买或者下载这五本书开始学习。不过过程可能会比较漫长，效果很难预测。我现在学的是一个公司的 ITIL V3 Foundation 认证培训的教材，这本书好在他其实整合了上面五本书的所有核心内容，而且通过实际用例来解释理论。它是本考试认证用书，所以上面还有考试辅导方面的内容，如考点提示之类的。对我来讲业余时间能很快把 V3 的内容过一遍，这本书应该在好不过了。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL 认证和其他 IT 认证没有什么本质区别。整个学习和认证架构是一个金字塔，在最顶端的当然是 OGC，在最下层的当然是你了。OGC 之下的是 APMG，APMG 是 OGC 官方的唯一授权认证和考试机构，它可以授权一些组织成为 ITIL 的培训机构和考试机构。所以向认证的第一步就是找一家 APMG 授权的培训机构去培训了，接下来的认证考试可以有培训组织帮助联系。如下图所示：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.iiiedu.org.tw/ites/images/champion/ITIL_V3_05_QTC.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.itil-officialsite.com/web/MultimediaFiles/ITILV3CREDITSYSTEM_LRG.GIF"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果你没有 ITIL v2 的认证的话，你就是从上图的第三个框开始你的认知之路。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://picasaweb.google.com/liuzh66/ITILV3Training1/" target="_blank" rel="noopener"
>http://picasaweb.google.com/liuzh66/ITILV3Training1/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL 和 ISO20000 的关系？&lt;!-- raw HTML omitted -->ITIL can be implemented without ISO/IEC 20000, but ISO/IEC 20000 cannot be achieved without ITIL.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->服务定义举例：&lt;!-- raw HTML omitted -->Let’s use the analogy of the difference between a supermarket and a restaurant.&lt;!-- raw HTML omitted -->Both places are visited for purchasing food. At the supermarket, clients buy a product or a set of products with which they have the capability to create a meal. They go home, they prepare the food, and they serve dinner to their guests. Conversely, at the restaurant, the clients are buying the complete Service, the capability and resources to create the meal, as well as the overall experience of dining.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Function 的定义：&lt;!-- raw HTML omitted -->It is important for us to understand the definition of function.&lt;!-- raw HTML omitted -->A function is defined as a team or group of people and the tools it uses to perform one or more processes or activities. Functions are self-contained units of organizations, with their own capabilities and resources.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->举例没有 Function 的组织结构的特点：&lt;!-- raw HTML omitted -->The challenge most IT organizations face is that they are structured with a single focus on functions.&lt;!-- raw HTML omitted -->The functional organization in IT is typically aligned to the technology, for example: Network, Mainframe, and so on. IT came by this honestly, as each technology type requires specialized resources and capabilities to manage, thus meeting the definition of a function.&lt;!-- raw HTML omitted -->However, when these same functions do not have clear understanding of their roles in processes and service delivery, it leads to “functional silos”, where work is completed without clear knowledge of the impact of this work on the quality of services.&lt;!-- raw HTML omitted -->Process models help avoid this problem with functional hierarchies. These process models improve cross-functional coordination and control. Well-defined processes can improve productivity within and across functions.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Role 举例：&lt;!-- raw HTML omitted -->As an example of roles and functions, the Technical Management department or function can perform the role of Problem Analyst when diagnosing the root cause of Incidents. This same department or function could also be expected to play several other roles at different times, such as assessing the impact of Changes, that is, the Change Management role.&lt;!-- raw HTML omitted -->The scope of the role and what triggers the role player to play that role are defined by the relevant processes and agreed by their Line Manager.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->流程的特点：&lt;!-- raw HTML omitted -->You can remember these characteristics by breaking them down into a mnemonic such as MSCR — Mary Sells Custom Rings.&lt;/p></description></item><item><title>Open Source and Cloud Computing(开源与云计算)</title><link>https://martinliu.cn/2008/10/16/open-source-and-cloud-computinge5bc80e6ba90e4b88ee4ba91e8aea1e7ae97/</link><pubDate>Thu, 16 Oct 2008 13:09:16 +0000</pubDate><guid>https://martinliu.cn/2008/10/16/open-source-and-cloud-computinge5bc80e6ba90e4b88ee4ba91e8aea1e7ae97/</guid><description>&lt;p>Link：&lt;a class="link" href="http://radar.oreilly.com.cn/blog/tim/open-source-and-cloud-computing" target="_blank" rel="noopener"
>Open Source and Cloud Computing(开源与云计算)&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->From above post:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->开源的成功有几个关键元素：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1.许可证要允许和鼓励再发布、修改乃至发展分支；&lt;!-- raw HTML omitted -->2.一个体系结构要使程序能被作为组件在任何可能的地方重用，以及可以被扩展，而不是被替换来提供新功能；&lt;!-- raw HTML omitted -->3.低门槛，让新用户轻松上手一试。&lt;!-- raw HTML omitted -->4.低门槛，让开发人员构建新的应用与大家分享。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->个人认为：使用云计算的用户并不一定是租用土地的佃户；佃户把自己的收成都给了地主，自己剩下的少的可怜。云计算的用户会愿意付出多少成本给地主是可以计算的，计算的原则就是‘保证自己的利益、安全等’。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>Welcome to my OSS forum</title><link>https://martinliu.cn/2008/10/06/welcome-to-my-oss-forum/</link><pubDate>Mon, 06 Oct 2008 08:05:07 +0000</pubDate><guid>https://martinliu.cn/2008/10/06/welcome-to-my-oss-forum/</guid><description>&lt;p>Now this forum is open for registration. Please feel free to post any of your idea or question. I hope you will have fun.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.martinliu.cn/forum" target="_blank" rel="noopener"
>http://www.martinliu.cn/forum&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->论坛开张了:) 欢迎加入我的开源论坛！&lt;/p></description></item><item><title>Should I open a forum on my site?</title><link>https://martinliu.cn/2008/09/23/should-i-open-a-forum-on-my-site/</link><pubDate>Tue, 23 Sep 2008 04:58:47 +0000</pubDate><guid>https://martinliu.cn/2008/09/23/should-i-open-a-forum-on-my-site/</guid><description>&lt;p>&lt;a class="link" href="http://bbpress.org/" target="_blank" rel="noopener"
>&lt;img src="http://bbpress.org/blog-wp-content/themes/bb/images/bbpress.png"
loading="lazy"
>&lt;/a> 这个论坛软件看似还不错，而且号称简单、快速和优雅，比较吸引我。我的 blog 后台是 Wordpress 的，所以理论上讲可以和这个软件很好的集成，这可能是最吸引我的一个地方。对于本开源软件博客而言，是否需要增加论坛这个功能呢？其实本博客还是一个多作者博客，我邀请了几个开源的朋友供稿，不过他们也应该比较忙 :) 其中的两个朋友也有自己的论坛，分别是 &lt;a class="link" href="https://www.itnms.net" target="_blank" rel="noopener"
>www.itnms.net&lt;/a> 和 &lt;a class="link" href="https://www.zenosscn.com" target="_blank" rel="noopener"
>www.zenosscn.com&lt;/a> 。对于国内的很多朋友而言，可能论坛是一个更好的沟通方式，泡论坛已经是很多朋友上班中不可缺少的内容。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->考虑一下开设论坛的利弊。好处应该是会带来更多站点交互。坏处还没有想好，目前能想到的可能是：需要花更多的时间打理本站，还有就是抵御论坛的垃圾。总之还没想好是否增设论坛功能，如果您有什么意见和看法也请告诉我。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;7&amp;rdquo;]  [poll id=&amp;ldquo;6&amp;rdquo;]&lt;/p></description></item><item><title>Do you like Chrome?</title><link>https://martinliu.cn/2008/09/05/do-you-like-chrome/</link><pubDate>Fri, 05 Sep 2008 05:10:15 +0000</pubDate><guid>https://martinliu.cn/2008/09/05/do-you-like-chrome/</guid><description>&lt;p>Peoples always love whatever Google&amp;rsquo;s invention, I am using Gmail and GTalk every day too. But I think I couldn&amp;rsquo;t say I like google anytime. That&amp;rsquo;s just because Chrome. It was installed on my laptop yesterday. I&amp;rsquo;m trying it out when I access any of my google services (Gmail, Reader, Doc, etc&amp;hellip;). There are some App shortcuts are already on my XP deskdtop.  Base on one day experience of Chrome, I&amp;rsquo;d like to talk about reasons I don&amp;rsquo;t like Chrome. I has not tested it too much at present, just few comments below:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://blogs.zdnet.com/perlow/images/chrome-constrictor.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;strong>Chrome&amp;rsquo;s Name:&lt;/strong> I still do not figure out how to pronounce this word, someone says it sounds like a man perfume; I do thinks so. But it&amp;rsquo;s ok for a name of software, I don&amp;rsquo;t care about too much what it called.  FireFox is cool name, everyone know it.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Crash Continually&lt;/strong>: It proved Chrome browser is on early stage. For me, I won&amp;rsquo;t any software on my laptop send out any piece of information which I don&amp;rsquo;t know or couldn&amp;rsquo;t understand. So, I will never  turn on crash report option for any software. It is still crashing frequently, I might will not use it any more; or install it.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**Bookmark on top: **My laptop has supper wide screen, so all of bookmarks are listing on the left side of Firefox/IE. I like to access bookmark from left side of screen. It is on the top and just below the address bar, I have to close it.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>ADs in Gmail/anywhere it could be:&lt;/strong> In Firefox, I get really few AD showed up. Nobody love ADs, but Google can not do with our AD.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Without Add-ons:&lt;/strong> It is so important for extending the usage of your browser. Add-on makes a browser to do more jobs as you wash for. I can list some add-ons of Firefox, they are very helpful and I must have all of them.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I thinks Google really good at marketing. it crashed into browser marketing, its ambition knows no limits. All in all, Chrome is not a good enough to be my default browser; Fixfox will keeping do this job for me. Chrome is a ok software, it is no offence to Googl&amp;rsquo;s fans.&lt;/p></description></item><item><title>best of open source software [InfoWold OSS AWARRDS]</title><link>https://martinliu.cn/2008/09/04/best-of-open-source-software/</link><pubDate>Thu, 04 Sep 2008 08:13:52 +0000</pubDate><guid>https://martinliu.cn/2008/09/04/best-of-open-source-software/</guid><description>&lt;p>Are you running a open source project? If so, you may wash for this awards. Have you every vote for some&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.nagios.org/images/propaganda/bossie-2008.png"
loading="lazy"
>OSS on InfoWorld? After I check out all of those lists, I realized there are some great softwares I still don&amp;rsquo;t know. For sure you are leveraging oss power, you may go with some champion projects.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/165-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source productivity apps&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center&amp;rsquo;s picks for the top free and open source productivity apps include office suite, Web browser, image &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/166-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source developer tools&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center picks the top free and open source RIA platform, Ajax framework, business rule management system, &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/167-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source storage software&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center turns up the top free and open source offering for network and online backup, network attached storage, &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/168-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source enterprise applications&lt;/a>&lt;!-- raw HTML omitted -->InfoWorld Test Center picks the best free BPM, CRM, ERP, e-commerce, business intelligence, project management, application &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/169-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source for collaboration&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center picks the best for social networking, wiki, blogging, and groupware&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/170-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source in networking&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center chooses its top picks for IP telephony, VoIP monitoring, log analysis, Wi-Fi scanning, server and &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/171-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source platforms and middleware&lt;/a>&lt;!-- raw HTML omitted -->InfoWorld Test Center picks the top free and open source operating systems, desktop and server virtualization, database, &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.infoworld.com/slideshow/2008/08/172-best_of_open_so-1.html" target="_blank" rel="noopener"
>Best of open source in security&lt;/a>&lt;!-- raw HTML omitted -->The InfoWorld Test Center picks the top free and open source firewall, IPS, network gateway, password cracker, penetration &amp;hellip;&lt;!-- raw HTML omitted --> August 4, 2008&lt;/p></description></item><item><title>Open Source Total IT management Solution</title><link>https://martinliu.cn/2008/08/23/open-source-total-it-management-solution/</link><pubDate>Sat, 23 Aug 2008 15:17:05 +0000</pubDate><guid>https://martinliu.cn/2008/08/23/open-source-total-it-management-solution/</guid><description>&lt;p>在 IT 管理领域里，商业软件厂商中有自称 Big 4 的集团：CA，HP，BMC， IBM；在开源软件项目中也好像有自称“开源 Big 4”的集团，他们是&lt;a class="link" href="http://www.vlan9.com/net-manage/soft/x103091.html" target="_blank" rel="noopener"
>Groundwork、Hyperic、Qlusters 和 Zenoss 公司。&lt;/a>商业厂商向用户推出自己的产品的时候，往往都会打着一些比较大的概念和幌子，说“我们是 IT 管理的 Total Solution”；潜台词是我们的产品非常多，可以满足您所有的需求，而且只要您选择了我们，我们能保证所有的产品模块之间是无缝集成的。事实上的确如此，商业厂商凭着后台开发团队的强大，还有本地服务商的支持，在解决方案的集成性上的确没有什么问题。对于开源软件来说，由于每个软件都在各自为政的状态下独立发展，即使是彼此之间的功能有着某种衔接和集成性，在多数的情况下也往往是各自独立发展；没有考虑到彼此的组合和集成。不过换一个角度看，既然是开源软件，人家把源代码都全开放出来了，如果你想做两个开源软件的集成的话，从技术的角度上说，没有任何障碍；对比商业的闭源软件产品来说，似乎他们又在这方面有着与生俱来的优势。&lt;/p>
&lt;p>开源的 IT 管理软件中有非常多的种类，就拿网管软件来说吧。我的 blog 上介绍了很多，其中很多的软件都是功能非常重复，而各有千秋的。要想组合一个纯开源的整体 IT 管理解决方案不是不可能的，需要的是对一些比较精华的软件系统有所了解，并且了解他们之间集成的方式和实现功能。在此基础上做出合理的组合，方能搭建出一个整体的方案。&lt;/p>
&lt;p>由于现在 ITIL 已经成为了大家耳熟能详的“GOOD PRACTICE”，这是 08 年 V3 之后的一个转变，V3 提出之后，它就以一种亲民的身份，自称自己不再是“BEST PRACTICE”了。既然是要攒一个“开源 IT 管理整体解决方案”，同时为了保持本方案具有一定的理论高度 ;) 选择 ITIL 作为理论依据当然是不会错了呵呵～～ 不好意思今天心情比较好，废话实在太多，抱歉，下面将开始方案书写了。&lt;/p>
&lt;p>本方案将兼顾 ITIL 中的两大块：IT 交付和 IT 支持。我所选取的是 OpenNMS, Hyperic HQ 和 OTRS 来分别支撑 IT 交付和 IT 支持者两个部分。OpenNMS 和 Hyperic HQ 组合来完成网络和系统监控，它们为可用性管理、性能（容量）管理和服务水平管理提供支持和实现，注意这里说的是为这几个流程提供支持的工具，这些工具本身并不是流程工具。OTRS 完成事件管理、问题管理、配置管理和服务水平管理等流程，OTRS 本身是一个工单跟踪管理系统，他现在的 ITSM 模块以及发展到 1.1 的版本了，同时自称是 ITIL 兼容的软件。&lt;/p>
&lt;p>&lt;img src="http://www.martinliu.cn/wp-content/uploads/2008/08/opeople-over-process.jpg"
loading="lazy"
alt="People over process"
>&lt;/p>
&lt;p>&lt;strong>IT Delivery&lt;/strong>&lt;/p>
&lt;p>OpenNMS 和 Hyperic HQ 的功能定位有所不同，在这里选择他们俩来作为监控网络和系统的平台由一下的一些理由。OpenNMS 是 agentless 的监控软件，它的网络自动发现功能非常好使，而且现在能支持越来越多的网络设备，对于国内的华为等厂商的设备需要做一些定制后才能监控，否则只能看到标准的 mib2 的信息。最新的版本也能支持分布式的管理功能，也就是 remote monitor 的模块。我没有让 Zenoss 入选网络监控的一个重要原因是，OpenNMS 是纯开源软件项目，它的所有功能都是可用的，而且它是 Java 程序，配置文件大多是 xml 文件。对支持非常大量的网络设备和端口，你需要有的是对 Tomcat 和 Java 应用的调优能力，和通过 OpenNMS 的邮件组来解决 bug 的能力。OpenNMS 里面有非常好的告警事件管理功能，它本身是一个非常好的事件平台，事件升级、报警、过滤等功能都有。而且现在 OpenNMS 已经能和 Hyperic HQ 做事件集成，Hyperic HQ 的报警事件能传递到 OpenNMS 中，这就意味着 OpenNMS 可以作为一个统一集成的事件管理平台，在这里对集中管理所有类型的告警事件。HQ 是一种 Agent based 的监控软件，对于系统监控而言，很多商业厂商的软件功能都无法很好的做到单一代理的技术，当然我认为 BMC 的 Patrol 是例外，它的单一代理技术是我见到最好的。HQ 的单一代理技术意味着，通过在一台服务器上部署一次代理程序后，其他的工作就都转到 web console 上了，在那里，你可以配置代理对各种资源的管理，它的代理能发现非常广泛的基础架构应用：Web， midtier, DB 等。由于 HQ 是一个商业开源的软件，所以它对商业基础架构软件的平台支持的非常好，能支持目前流行的所有基础架构软件包括各种商业的操作系统、数据库、中间件；当然它对开源的软件也能够监控。监控参数很多，配置容易，有开放的接口提供功能扩展开发。从 OpenNMS 和 HQ 的各种图形上可以很好的评价和监控和各种 IT 服务的质量。OpenNMS 中的界面中最多的就是对某个节点或者上面的某个服务可用性的计算。&lt;/p>
&lt;p>OpenNMS 和 HQ 实现和完成的功能能为 IT 交付中的：可用性管理、性能管理和服务水平管理提供实时的数据支持，OpenNMS 作为总的事件平台，同时它还监控所有的网络设备。HQ 用来监控所有重要业务服务器，那些边缘的非重要的业务服务器或者是客户端设备也可以交给 OpenNMS 来管理，它的无代理监控，对这些设备也能管理的不错。&lt;/p>
&lt;p>&lt;strong>IT Support&lt;/strong>&lt;/p>
&lt;p>OTRS 本身是一个非常不错的工单跟踪系统，它在加载了 ITSM 模块之后，就把 ITIL 的很多精髓理论做了很好的诠释和实现。对于很多大型企业用户而言可能会笑话 OTRS 的简陋，不过实施 ITIL 的过程，我觉得应该是：把当前的繁杂工作，按照 ITIL 的几个流程简化梳理的过程，每个流程完成比较单一而纯粹的目标；流程之间又能有一定的集成就可以了。对于 OTRS 的研究，我目前也处于安装和读管理员手册阶段，没时间细看。选择 OTRS 的一个最重要原因是，今年也开发了一个事件集成模块，它能通过这个模块与 Nagios，openNMS，OpenView，Tivoli 等监控产品做事件集成，也就是说告警事件能自动在 OTRS 中生成事件单，而 OTRS 的事件管理模块就负责吧入站的事件单自动化的分配给相关的技术支持人员受理解决。详情请参考 Automated System Monitoring with OTRS &lt;a class="link" href="http://www.otrs.com/fileadmin/mediafiles/News_Presse/Whitepaper/SystemMonitoring_Module_OTRS_US.pdf" target="_blank" rel="noopener"
>Download&lt;/a>这个白皮书是在 OTRS.com 的网站上下载的，我当初怀疑这个事件集成模块是否是开源的软件，所以在&lt;a class="link" href="http://blog.kuhn-kt.de/" target="_blank" rel="noopener"
>Christopher T. Kuhn&lt;/a> 的 Blog 上&lt;a class="link" href="http://blog.kuhn-kt.de/?p=87" target="_blank" rel="noopener"
>问他了一下&lt;/a>，他向我确认该模块是开源的，并提供了下载地址。从技术路线上来说 OTRS 是实现了服务台的功能，并且实现事件、问题、配置和 SLA 管理；从界面上看它对这些流程的支持是比较简洁的实现，你完全不能把它和商业的服务台软件来比较。不过实施 ITIL 的道路，我觉得应该是丰俭由人的，我相信一定会有人走简洁路线的。想想 Apple 的产品，它的设计无比的简洁，它简洁并不丑陋，而且还很 cool，很流行。&lt;/p>
&lt;p>由于这个方案攒的还是比较匆忙，而且技术上没有实际测试和验证，本文旨抛砖引玉的提出一些思路和想法，未经详细推敲，欢迎提出您的建议。&lt;/p></description></item><item><title>配置管理中几个的误区</title><link>https://martinliu.cn/2008/08/15/e9858de7bdaee7aea1e79086e4b8ade587a0e4b8aae79a84e8afafe58cba/</link><pubDate>Fri, 15 Aug 2008 14:24:25 +0000</pubDate><guid>https://martinliu.cn/2008/08/15/e9858de7bdaee7aea1e79086e4b8ade587a0e4b8aae79a84e8afafe58cba/</guid><description>&lt;p>配置管理的项目可以从 CMDB 的建设开始，也可以从配置管理的流程建设开始。我在一些配置管理的项目中发现了一些用户容易犯的错误有很多。先说说配置管理，做 ITSM 的项目，往往 CMDB 的建设，或者配置管理流程大多不会非常重视，往往作为一种辅助性的环节在项目中得到实施。例如 ITSM 项目一上来就做服务台，然后是变更管理流程和其他流程；在一些后续的资产管理的项目中 CMDB 的到重视并建设。其实配置管理流程和 CMDB 是 ITSM 项目中非常重要的一环，它建设的效果对整体效果有乘法放大的效果。CMDB 的主要功能我认为有两点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>提供唯一、精确的配置信息库，让所有IT团队的人都明确IT管理配置项范围，有了它所有人都起码能清楚“我管理的东西是什么有哪些？”。都说ITIL的语言是IT管理的共同语言，那么配置信息就是这个语言的主语和宾语；从这里可以看到，如果我们没有这样一个准确的配置信息库，我们彼此之间的沟通会出现多大的误解和迷惑。我在用户现场做项目的时间比较多，耳闻目睹很多沟通障碍；这些障碍不是沟通方式和技术造成的，而是大家没有能从一开始就说清楚“谈论的CI对象到底是什么”
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>实现一定程度上的业务影响分析。往往都是有IT部门牵头做CMDB，后期也主要是IT部门用。有效的业务影响分析能力，可以彻底提高事件管理的有效性。一般用户可能会有一个集中Event Console，从这个console中事件一般是以生成的时间先后顺序查看和处理的。最差的事件管理方式就是这种“先进先出”的处理应对方式。如果你能说清楚，发生事件的对象（配置项）对业务系统的影响程度，那么你就能够做到按照这些事件的优先级别来处理；事件的优先级就是该事件对业务系统所造成的影响的严重程度。需要做到业务影响分析，就必须做业务模型梳理。每一个业务服务和业务流程也是配置项，IT的人也需要能理解业务。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://bus.satrip.com/%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%5C%E6%99%AF%E7%82%B9%5C%E5%9B%BE%E7%89%87%5Cegypt01.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面列出一些常见错误，这些错误发生在企业做ITSM项目的前后都有可能，不过多是在实施ITSM项目之前，或者上CMDB工具之前，或者过程中。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>1）目标不明确，实施结果无法衡量      Goal&lt;!-- raw HTML omitted -->&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->所谓目标不明确，并不是说没有目标，而是说：目标定的不太合理。不合理的原因有一下几种：目标过大、目标过于模糊、过于教条、拘泥于ITIL的书本、和实际的工作联系不紧密、没有衡量和控制的方式。在一定的项目时间周期内，总结之前配置管理的问题，作出一个切实可行的配置管理数据库建立目标应该不难，主要以使用为主，不要拘泥于细节。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>2）配置项信息混乱，信息结构无序    Scope&lt;!-- raw HTML omitted -->&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这里的“信息结构”是说CMDB的CI配置项信息查看应该是立体的有结构的很直观的数据信息。在访谈的过程中，有些用户在讨论过程中认为配置项组成的信息结构应该是网状的。其实现实中的IT基础架构组件的确是以网状的形式相关联的，这种想法非常实际。不过人们都太偏重IT了，遗忘了IT部门的最终使命“为企业交付各种业务服务”。业务服务就是CMDB数据金字塔的顶端部分。从IT部门提供的业务服务开始来梳理和建立CMDB配置库是一种“自顶向下”有效方式，是IT部门做CMDB配置管理过程中，与业务部门沟通的“翻译机”。自顶向下的方式需要业务部门的配合，或者IT部门内有精通业务的强人。通过这种方式做出了的CMDB，CI之间的构成方式，从宏观上看：屏幕的投影是树根型的，立体的看是金字塔形的，业务系统模型是树根的根部，是金字塔的顶端部分。微观上看，局部可能是网状的，或者是星型的。没有业务服务作为头部，很难说出CMDB的scope究竟是多大，很难说清楚哪些CI可能会在CMDB中出现。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>3）配置信息随意堆积，纠缠于过多的CI属性     Level&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->每一个CI都可能具有非常多的属性，成功选择的标准是：够用就好，精简是王。很多用户都存在的误区就是“复杂比简单好，越复杂越放心”；大多数用户在项目初期的需求整理的时候都觉得，需求提的越全面，越好，越保险。这种心情是可以理解的，毕竟ITSM项目的周期和投入通常都是非常多的。不过对于配置管理来说却，万万不能有这种想法；否则，CMDB的维护和审计的工作量将非常巨大。一个信息量过载的CMDB，就是一个不可用的配置库。一个只有10个属性的CI和有50个属性的CI展现在你面前的时候；你找到你所关心的信息花的时间上看，前者是后者的1/5时间。属性一定要精简，特别是CMDB从零开始的用户。在设计的初期一定预留属性扩展的可能性。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>4）疏于配置信息的准确性和实时性&lt;/strong> ** update**&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->CMDB一旦建立了之后，所有用户一定要对CMDB使用起来，要为CMDB提供反馈。最终使用配置信息的人，如果发现信息不准确，需要及时报告配置经理。配置经理需要及时维护。配置经理最重要的职责是，确保每一个大小变更实施完毕之后对要对相关CI做更新。你可以没有正规的变更流程系统去跑变更单，不过我所看到的是很多企业即使没有实施ITSM项目，其实他们手工变更单的流程跑的有板有眼，一点都不差。美中不足的是，变更后的结果没有地方更新和反馈。而CMDB就是这样一个变更结果反馈和汇集的目的地。在大家都频繁使用CMDB，并且每一个大小变更都更新CMDB的完美情况下，CMDB中的信息会随之时间的流逝，愈来愈精确，愈来愈完善。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>5）拘泥于工具的功能，忽略了最终目标   Tool&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我看到的最多的工具是MS Excel，也有使用自开发系统的，可有自开发系统最终丁不住在转向商业工具的 :( 无论何种工具，假如在一个正确的事实和使用的策略下，我觉得都是可以获得CMDB建设的成功的。一个好的工具还是有必要的。在选择一个成品工具或者开发一个CMDB工具时，需要考虑工具的几个方面。工具应该参考或者借鉴某种国际标准，这里的标准是指某种通用模型标准 Common Data Model (CDM)，例如DTMF的 Common Information Model (CIM),或者WMI等。好的工具需要能和其他ITSM流程紧密结合，特别是事件管理、问题管理和配置管理者三个流程。如果这三个流程是建立在某种工具平台之上的，那么CMDB的信息最好能无缝的整合的流程的处理过程中。&lt;/li>
&lt;/ol></description></item><item><title>开源软件的能量</title><link>https://martinliu.cn/2008/08/10/e5bc80e6ba90e8bdafe4bbb6e79a84e883bde9878f/</link><pubDate>Sun, 10 Aug 2008 12:03:17 +0000</pubDate><guid>https://martinliu.cn/2008/08/10/e5bc80e6ba90e8bdafe4bbb6e79a84e883bde9878f/</guid><description>&lt;p>可惜 yo2.cn 开张的太晚了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->否则我的 blog &lt;a class="link" href="http://www.martinliu.cn" target="_blank" rel="noopener"
>http://www.martinliu.cn&lt;/a>  就可能在这里了，先注册一个好的名字 opensource.yo2.cn 先呵呵～～ 如果有需要请和我联系，不想浪费这么好的 blog 地址。&lt;/p></description></item><item><title>2008 Beijing Olympic Game introduce China to the world</title><link>https://martinliu.cn/2008/08/08/2008-beijing-olympic-game-introduce-china-to-the-world/</link><pubDate>Fri, 08 Aug 2008 15:52:40 +0000</pubDate><guid>https://martinliu.cn/2008/08/08/2008-beijing-olympic-game-introduce-china-to-the-world/</guid><description>&lt;p>中午后去超市购物；超市的人可真多啊，大家都在采购备战晚上的奥运哈哈。我也买的毫不手软啊，西瓜、王老吉、可乐、牛肉、蔬菜等等！回家后，先炖上一锅牛腩萝卜汤，昨天立秋，今天贴贴秋膘有不迟。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->准时 5 点就开始收获在电视机前。等待开幕式的开始。开幕式终于开始，虽然视觉上的冲击性不强，不过还是完美的展示了中华文化的精髓。通过四大发明的展示，以东方人含蓄和细腻的手法，把吾国浩浩汤汤 2000 多年的历史优美的展示与全球世人面前。地球村的创意我觉得非常好，最后刘欢站在最上方高歌一曲，挺好。兴致最好的时候牛腩汤经过几个小时的熬制，也香气扑鼻了，呵呵来上一碗，继续看&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->总之真个文艺演出，文化气息十足，可圈可点之处也很多；唯一担心的是怕老外们理解不了。现在终于看到中国代表队在姚明的带领下，正缓缓入场；中国体育健儿的队伍可真大啊！！！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->中国加油!!! &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.jxcn.cn/mmsource/image/2008-2-28/U1565P1T1D14341297F21DT20071120190907.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->哈哈忍不住了，我也在 blog 上喊一嗓子吧，明天奥运的战幕就缓缓拉开了，希望他们拿更多金牌为国争光。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->现在中国队走到了中场，期待圣火点燃的那一刻吧。顺便说一句，有人说中国队的服装配色有点借鉴了‘西红柿炒鸡蛋’的色彩，呵呵有点象，的确有点象，而且那时我的拿手菜:) 今年北京的天气，好的是，天公作美，真的憋住，愣是没有下雨；不好的是，桑拿的程度太高了。场内入场的所有运动员，从电视上可以看出都已经是大汗淋漓了，都在等待圣火。烟火，有事一波烟火，整个鸟巢像是个火锅一样，再次沸腾一次。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->中国画，由所有运动员参与绘制的一副巨画放到了场地中央，这幅画可谓整场的一个核心线索，这可能是老谋子的 idea 吧，和拍电影的道理一样，需要有一个线索贯穿始终，像是 ice age2 里的那颗坚果。不知道以后会把它放在那，细看这画很不错，写意，非常写意，还有点点现代气息。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->刘淇开始讲话了。不禁回想起，我在看圣火采集实况转播时候的激动心情，他在希腊的采集圣火的神殿哪里也发言了。LP 说他在这发言可谓捡了一个不小的便宜，前人种树后人乘凉啊!!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->胡锦涛主席宣布“大会开始！！” :) 呵呵，有一波强烈烟火，太 cool 了！！ 奥运会旗入场了，八人举着会旗缓缓入场，8 人都是奥运的元老人物。现在看到那些在场地周边，做分割线的 MM 们好像不用再跳跳跳的欢迎了，这些 MM 已经在入场式的时候跳了快 2 个小时了，体力不行还真去不了啊，辛苦辛苦了！哈哈！！护旗手开始升会旗，不得不说中国的护旗手世界上最 cool，赞一个！！在赞一次天工吧，到现在为止，一滴雨都没下，真给面子啊！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->张怡宁右手抓五环旗开始宣誓，她表现的很腼腆：）黄利庭代表裁判员宣誓，慷慨激扬，强！！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我看时间一定要拖到 12 点整了，不行我先把这个 post 发布一下啊，一定要讨到八月八的这个好彩头。发布 ed&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->DONE 继续，很大很强的一个烟火在鸟巢上空喷出，绚烂啊！！许海峰手持火炬入场，开幕式的最大悬念缓缓揭开了。啊！点燃了高敏的火炬～～～转给李小双，继续跑，传给第四个占旭刚，跑～～这第五个张军该是最后一个了吧，都快是最后一分钟了，我和 LP 都猜，最后一个是谁呢？刘翔？？第六位了陈中，跑～第七个了，孙晋芳，第八个该是最后一个吧？继续跑～过 0 点了。火炬在晚上看，真好看，最后一个李宁了，被吊起来到空中，很高，很高，继续升高～～ OH my god ，升到最高处，绕嘴上圈，在空中跑，创意啊！！！赞！！！画卷在他下面缓缓打开，画卷始终在他身后，缓缓打开，太强了，弓虽！！！牛啊～～～李宁依然在空中认真的跑着，要绕场一周了，看来，不知主火炬到底在哪里啊？？到了，主火炬终于出现了，点 ing。。点了一个导火索，导火索螺旋上升，圣火熊熊绽放在北京夜空～～全城烟火一起点燃，烟火到达等顶峰。一个五环的烟火呀！！我坐在家里可以听到隆隆的烟火声，家里的视野不好，无奈啥也看不到！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->刚才急奔向楼顶，想看一眼最后的绚烂，可惜到了楼顶的门口发现，门已被锁，而且上了封条了。外面的烟火声还是有，心里一个字痒啊～～～不过无奈总是难免的，我的奥运开幕式实况转播也要结束了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>动态奥运奖牌榜&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>Systems Monitoring Shootout</title><link>https://martinliu.cn/2008/08/04/systems-monitoring-shootout/</link><pubDate>Mon, 04 Aug 2008 09:26:57 +0000</pubDate><guid>https://martinliu.cn/2008/08/04/systems-monitoring-shootout/</guid><description>&lt;p>Please download it here &lt;a class="link" href="http://ols.fedoraproject.org/OLS/Reprints-2008/buytaert-reprint.pdf" target="_blank" rel="noopener"
>A paper from Open Management Consortium&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.isausa.com/img/paper-to-cd-2.jpg"
loading="lazy"
> This is a paper from &amp;ldquo;2008 Ottawa Linux Symposium&amp;rdquo;. It will give you a nice insight about some great NSM projects. It is talking about OpenNMS, Zabix, Zenoss, GroundWorks and Hyperic, those might b the hottest projects around NMS field. If you are looking for a open source network and system monitoring solution, or you are testing one of them; you should &lt;a class="link" href="http://ols.fedoraproject.org/OLS/Reprints-2008/buytaert-reprint.pdf" target="_blank" rel="noopener"
>check it out&lt;/a>. I got this paper from &lt;a class="link" href="http://www.open-management.com" target="_blank" rel="noopener"
>Open Management Consortium.&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Sometimes, people might spend too much time on testing different projects; I know this is a kind of fun. But eventually they only got lots of comments about manny project. They still did not realize the value of open source. The best way to adpat open source is that you just pick one nice project and keeping to use it for months at least. I have a net admin frind who I had since helped to setup Cacti for all of his network devices. He don&amp;rsquo;t know so many NSM projects, but he really engoy Cacti. With Cacti, he can do a easier and better job then before. So, are you going to still watching open source world? Let&amp;rsquo;s get start your real open source journey.&lt;/p></description></item><item><title>This post is too later</title><link>https://martinliu.cn/2008/08/03/this-post-is-too-later/</link><pubDate>Sun, 03 Aug 2008 07:45:41 +0000</pubDate><guid>https://martinliu.cn/2008/08/03/this-post-is-too-later/</guid><description>&lt;p>很久没有更新这个 blog 了，本来想保持每周一帖的频率，不过最近总被一些事情所耽误了。今天终于有空闲坐下来写点什么了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->昨晚无意间发现了这个叫做 UnWakeAble 的 Theme，稍微看了一下马上就更换到这个主题了。这个主题有几个地方非常吸引我：它有自己的配置选项；能配置成 2 或者 3 栏的形式；提供 3 种内置的风格可以切换，这个太空船的黑色风格太吸引我了。我想在没有时间写正经 post 的时候，用有限的时间调整一下界面风格也不错呵呵，虽然之前曾经发誓，要把主要 blog 时间都放在提交高质量项目介绍和评论上，不过通过这个 blog 做适当的娱乐还是未尝不可的呵呵:) 可能是对 Wordpress 了解的很多了，用的也越来越多了，现在觉得它也可以作为一个公司内部的知识库来使用，知识库有可以说是一种特殊的 CMS 内容管理系统，它能方便用户查询和浏览相关的知识条目。昨天看了一下 wordpress 的 roadmap，它以后可以提供更多的 api，甚至于下离线的编辑内容的功能，我想这些都可以是外部系统和它集成的很好的接口。我说的外部系统可以是：IT 管理的服务台系统，现在很多厂商的服务台都有现成的 KB 模块，不过把知识条目放到 wordpress 这样一个外部的系统中还是很有优势的。关于把 wordpress 用作 CMS 内容管理系统的一些考虑您可以看看这个&lt;a class="link" href="http://www.devlounge.net/publishing/things-to-consider-when-using-wordpress-as-a-cms" target="_blank" rel="noopener"
>post&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://news.xinhuanet.com/newscenter/2008-07/28/xin_1520705281548281136162.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->今天去西四的广济寺，途中经过了潘家园市场、虹桥市场、天坛北门、天桥、西单等。途中的景色令我可以说是非常吃惊，奥运真的把北京改变了很多。潘家园门口兜售和田玉的巴郎子（新疆人对少数民族的一种称呼，其实是维吾尔语‘小青年’的意思）没有了，随处摆的地摊也没了，随处乱扔的白色快餐饭盒没了，在路边拉黑活的黑车也没有了。虹桥市场门口的路上以前总能看到的那些专门向老外乞讨的人也没有了。天坛北门的街道两旁真是很干净啊，垃圾、墙上的办证都没了。天桥哪里更是变化巨大，以前道路两边破烂的小卖部都没了。西单更是夸张啊：过街天桥附近打扫的人真多啊，而且以前扫大街的人都是自动化了；没人在骑着老式的保时捷垃圾车，取而代之的是等自动扫街的电瓶清洁车。北京变了，北京准备好了。呵呵我也喊两句口号吧！甚至于我在考虑，开幕式那天晚上，我去哪里看焰火。我里永定门的距离不算远，听说那是放烟火的中轴线上的最南点，暂时把这作为我的 plan A 了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我也很想知道，你奥运期间如何度过呢？&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;4&amp;rdquo;] [poll id=&amp;ldquo;5&amp;rdquo;]&lt;/p></description></item><item><title>Running Linux from any machine without installation</title><link>https://martinliu.cn/2008/07/04/running-linux-from-any-machine-without-installation/</link><pubDate>Fri, 04 Jul 2008 14:31:15 +0000</pubDate><guid>https://martinliu.cn/2008/07/04/running-linux-from-any-machine-without-installation/</guid><description>&lt;h1 id="httpwwwslaxorgscreenshotphps3httpwwwslaxorgimagesslaxpnghttpwwwslaxorgscreenshotphps3slax---your-pocket-operating-system">&lt;a class="link" href="http://www.slax.org/screenshot.php?s=3" target="_blank" rel="noopener"
>&lt;img src="http://www.slax.org/images/slax.png"
loading="lazy"
alt="http://www.slax.org/screenshot.php?s=3"
>&lt;/a>Slax - your pocket operating system&lt;/h1>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>Slax How to&lt;/strong>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>What is Google Infrastructure?</title><link>https://martinliu.cn/2008/06/21/google-infrastructure/</link><pubDate>Sat, 21 Jun 2008 07:01:58 +0000</pubDate><guid>https://martinliu.cn/2008/06/21/google-infrastructure/</guid><description>&lt;p>&lt;img src="http://i.i.com.com/cnwk.1d/i/bto/20080529/Google_data_center_c2000_Jeff_Dean_400x318.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If you have no idea, you should read this post &amp;ldquo;&lt;a class="link" href="http://news.cnet.com/8301-10784_3-9955184-7.html?tag=blog.1" target="_blank" rel="noopener"
>Google spotlights data center inner workings&lt;/a>&amp;rdquo;.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->There are some notes I took as blowing.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Google Infrastructure:&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>clusters of 1,800 servers are pretty routine.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://news.cnet.com/8301-10784_3-9954972-7.html" target="_blank" rel="noopener"
>an ordinary Google search query that involves 700 to 1,000 servers&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>puts 40 servers in each rack
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://news.cnet.com/8301-10784_3-9917205-7.html" target="_blank" rel="noopener"
>Google has 36 data centers across the globe&lt;/a>; Google has more than 200,000 servers; growing every day.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Google largely builds its own technology.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>to treat each machine as expendable; Google prefers to invest its money in fault-tolerant software. NOT hardware fault-tolerant.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Google uses ordinary hardware components for its servers, it doesn&amp;rsquo;t use conventional packaging. Google required Intel to create custom circuit boards.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>As to the servers themselves, Google likes multicore chips, those with many processing engines on each slice of silicon.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>three core elements of Google&amp;rsquo;s software: &lt;a class="link" href="http://labs.google.com/papers/gfs.html" target="_blank" rel="noopener"
>GFS, the Google File System&lt;/a>, &lt;a class="link" href="http://labs.google.com/papers/bigtable.html" target="_blank" rel="noopener"
>BigTable&lt;/a>, and the &lt;a class="link" href="http://labs.google.com/papers/mapreduce.html" target="_blank" rel="noopener"
>MapReduce&lt;/a> algorithm.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Google helps with** a lot of open-source software projects** that helped the company get its start, these packages remain proprietary except in general terms.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>GFS stores each chunk of data, typically 64MB in size, on at least three machines called chunkservers; master servers are responsible for backing up data to a new area if a chunkserver failure occurs.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>The largest BigTable instance manages about 6 petabytes of data spread across thousands of machines.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>On any given day, Google runs about 100,000 MapReduce jobs; each occupies about 400 servers and takes about 5 to 10 minutes to finish.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>总结一下上面的东西：&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Google不是买的成品服务器，而是去Intel定制的芯片自己攒的，特别喜欢使用多核的cpu，由于他们的程序都适应与多线程并行计算的方式。一个群集有1800个服务器是非常平常的。Google大概有二十万个服务器，每40个放在一个机架上，分布在全球36个数据中心。Google不使用商业的服务器包括数据库等软件，一来造价太高，二来无法满足扩展性的需求。Google使用了很多的开源软件项目，事实上它们就是站在开源软件的肩膀上发家的；GFS，BitTable等都是它们常用的。广泛使用软件容错技术。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>传统商业公司和google的不同：&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>从硬件到软件基本都使用现成的商业产品。基础架构中的每个环境都是钱堆出来的。用钱来节省时间，不过google的时间和金钱的节省都是值得学习的。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>在容错技术上硬件HA技术用的最多，群集中的服务器数量不多。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>不同业务系统之间几乎是孤立的。从数据库到web到关联的网络设备都是一套独立的系统，甚至于按业务系统划分运维的团队。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>系统的扩展性比较小，对核心部件：如核心应用服务器或者核心数据库服务器的扩展，垂直扩展比较多，追求单机的多CPU，高主频，高内存。而另一方面：在这些系统上的压力测试和性能调优工作异常的痛苦。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>饱受被商业软件公司绑定之苦，如果数据库、应用服务器等出了产品的bug，厂商提供fix一般都需要一定的时间周期-时间代价比较高，原厂的现场技术支持服务金钱代价也比较贵。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>从高层看：CTO、CIO、CEO没有正视开源技术。只要预算允许，引入和采购业内流行的商业技术似乎是永恒的明智之举。开源软件技术应用的有不过很少。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>从基层看：工程师可能有足够的某项开源的技能，不过没有适当的渠道能反应到上层来提议使用该技术；如果在下面擅自使用了某种技术，非常担心出了IT事故后对后果的承担。开源技术对技术人员只是一个爱好而无法应用与自己的日常工作中。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>特别是中国用户对最新潮的IT技术永远保持着极度的热情，不管是硬件和软件买就买最先进的，数据中心的机房最后成为博物馆，新老系统很难整合资源。把基础架构的彻底改变寄希望于未来的某种技术革命，实际上技术变革已经悄悄发生了好几波了，怎么管理现状怎么就是越来越艰难，越来越花钱呢？走中国特色道路真的值得提倡一下了。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Google的这些特点真是引人入胜，任何企业都无法复制；而且也不可能复制，它毕竟是一个商业公司而不是一个开源项目。如何使用现有的技术和人员来打造出你自己的完美基础架构呢？现实中这么多的role model已经证实了很多技术都是可用的，完美的境地也不是空中楼阁。如何集思广益并多多引入开源技术和人才可能是一个需要斟酌的题目。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[poll id=&amp;ldquo;3&amp;rdquo;]&lt;/li>
&lt;/ol></description></item><item><title>盛夏严防服务器中暑</title><link>https://martinliu.cn/2008/06/15/monitoring-temperature-and-fan-speed-using-ganglia/</link><pubDate>Sun, 15 Jun 2008 15:50:31 +0000</pubDate><guid>https://martinliu.cn/2008/06/15/monitoring-temperature-and-fan-speed-using-ganglia/</guid><description>&lt;p>&lt;img src="http://www.hlj.xinhuanet.com/xw/2007-03/24/xin_190304241641921962117.jpg"
loading="lazy"
>哦不是中暑:-)而是发烧；夏天就要到了，监控服务器的主板温度和风扇是否工作正常有变的比较重要起来了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->今天发现一个文档 &lt;a class="link" href="http://www.slac.stanford.edu/gen/edu/suli2006/finaltalks_thurs/caitie.ppt" target="_blank" rel="noopener"
>Monitoring Temperature and Fan Speed Using Ganglia and Winbond Chips&lt;/a> 这个是一个不错的文档，值得参考一下。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->文章是写如何在 Ganglia 中实现对主板温度和风扇的监控。以前也有人问过我这个问题“Ganglia 的监控图上为什么没有温度也风扇的图”；相信您看后就知道怎么回事了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面是我对关于温度和风扇监控的一点想法：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>主板的芯片能提供这些数据的访问给操作系统
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>操作系统上有sensors这个命令工具用来采集这些数据
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>有合适的脚本分析上面命令的输出数据转换成能被监控工具（ganglia， cacti，nagios， opennms）采集的格式等
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>往往这两个参数并不是监控工具的默认采集数据，所以需要扩展采集工具的采集集合，收集并保存这些数据。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>在监控工具如Ganglia中显示这些数据，当然如果有自动报警功能就好了，可以及时通知管理员给服务器消暑：）
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ganglia是最好的网格或者群集的监控软件，不过当你用它的使用也要注意到下面这个问题：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->What does Ganglia not provide?&lt;!-- raw HTML omitted -->Ganglia does not attempt to address service monitoring or reporting (unlike Nagios). So far, we have not come across a single monitoring solution that addresses all of our needs effectively.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面所说的服务监控是说，它的特点不是想Nagios和OpenNMS那样对服务器系统做非常全面细致的监控，它默认的监控指标比较少不过对于监控网格或者群集这种数量巨大的对象来说这些比较经典的指标也够用了，特别是对服务器的可用性，CUP、RAM，网络资源利用率和工作负载等数据的采集也比较够用了。如果你使用它来监控数量不是很多服务器的话，你可以使用它的可扩展性加入任何想监控的KPI。我最喜欢的还是它能把服务做分组，而且垂直的方向上可以加N层的嵌套；这种组织方式能比较好的适用于业务系统众多而复杂的数据中心。&lt;/li>
&lt;/ul></description></item><item><title>zenoss opennms comparison/比较</title><link>https://martinliu.cn/2008/05/31/zenoss-opennms-comparison/</link><pubDate>Sat, 31 May 2008 05:52:22 +0000</pubDate><guid>https://martinliu.cn/2008/05/31/zenoss-opennms-comparison/</guid><description>&lt;p>&lt;img src="http://mediasrc.zenoss.com/designimages/logo_ZEN_no_tagline.gif"
loading="lazy"
>&lt;/p>
&lt;p>在我做任何比较之前还是先看看 Wiki 上对一系列网管监控软件的比较，源网页地址在 &lt;a class="link" href="http://en.wikipedia.org/wiki/Network_monitoring_comparison" target="_blank" rel="noopener"
>http://en.wikipedia.org/wiki/Network_monitoring_comparison&lt;/a>&lt;/p>
&lt;p>上面一共列出了 12 中不同的开源软件，从 13 个方面以矩阵的方式来做比较。&lt;/p>
&lt;p>&lt;a class="link" href="http://www.martinliu.cn/wp-content/uploads/2008/05/monitoring.jpg" target="_blank" rel="noopener"
>&lt;img src="http://www.martinliu.cn/wp-content/uploads/2008/05/monitoring.jpg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>Nagios 和 Cacit 都是比较老牌的开源网管软件；OpenNMS 是稍微点出现的项目，它集成了前两者的部分优点，界面是 Java 的界面，后台的自动发现机制非常的方便。Zenoss 是一个比较年轻的项目，所谓长江后浪推前浪，它是纯 python 语言编写的一个软件，架构非常的不错，而其界面做的非常好，面向对象编程的理念处处可见。从根上可以看出它们的主要编程语言各有不同，这也决定了它们的特点和发展方向的不同，这里仅以此作为一个见到的比较和总结。其实我想写一个更好的比较表，如果您感兴趣的话请留言，我们可以一起做一个更好的比较。&lt;/p></description></item><item><title>Zeuux Free software summit @Tsinghua</title><link>https://martinliu.cn/2008/05/31/zeuux-free-software-summit-tsinghua/</link><pubDate>Sat, 31 May 2008 04:59:24 +0000</pubDate><guid>https://martinliu.cn/2008/05/31/zeuux-free-software-summit-tsinghua/</guid><description>&lt;p>现在我坐在清华主教学楼里等待这个自由软件大会的开始。&lt;a class="link" href="http://www.zeuux.org/index.cn.html" target="_blank" rel="noopener"
>Zeuux 社区&lt;/a>组织在发一些免费的书籍和及时贴。我也领了几个，在笔记本上贴了三个：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1）GNU\Linux inside&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://tbn0.google.com/images?q=tbn:Dj-A1Whyu0tc0M:http://amitjames.com/pictures/linux_inside_small.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2)GNU 牛头&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://tbn0.google.com/images?q=tbn:-MPgv5LN7iFlkM:http://adele.gerwinski.de/~anja/gnuart/aurelio/GNU.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3）GNU&amp;amp;Linux the dynamic duo。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://tbn0.google.com/images?q=tbn:aP3YicGaQHswlM:http://labor-liber.org/images/gnu-linux.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这次也将会见到 Richard Stallman，听听他今天能讲点什么。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->现在会议还没有开始，已经有很多学生来此等候，好像 GPL v3 的 T 恤比较强手，很多学生都在找自己的号。为了获得 Richard 签名的人可以购买一本他的文件，附送一件这样的 T 恤，会后即可获得签名。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->发现www.gnu.org网站的速度非常慢，几乎打不开，通往自由的路其实是艰难的:P&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>写在活动之后：&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->现在已经是晚上 11 点，我坐在电脑前上网，把今天活动的收获整理一下。我做的第一件事情是把我的 blog 的标题改了，logo 随后在改。从“LiuZheng&amp;rsquo;s OSS Blog” 到 “LiuZheng&amp;rsquo;s Free Software Blog”。Richard S.的一席话对我来说可谓醍醐灌顶了。我以前把 Linux 和 open source 软件都看做就是自由软件，可谓是一叶障目不见泰山。Richard 今天把他对 GNU 所作的所有相关工作都做了一个回顾，并解释了 Linux 其实是 Gnu-Linux 的一部分而以，还介绍所谓开源软件的真实来由。这也让我能更加理解他彻底不同意 Sun 开源策略的原因。Linux 的发展和产生依赖于 Gnu 项目下的所有自由软件，Richard 认为如果 Linux 的发明人没有在当时创造出 Linux 内核的话，一个 GNU free operation system kernel 也早晚会产生。我认为 Linux 的产生也是有他的必然性，它是在软件发展历史上应运而生的；由于它站在了前人的肩膀上，能整合所有相关的自由软件，从而风靡一时，甚至声明远胜 GNU。Richard 认为开源软件是商业公司利用自由软件谋利的一种手段，open source 这个词在商业公司市场宣传的运作下，声势也掩盖了 GNU。我发现其实我的一些认识也一直受到潮流的影响，如果我是和 Richard 站在同一条战线的话，我可以说彻底的被潮流带到沟里去了。总之 Richard 给我一个清楚的自由软件的发展脉络。他几乎是一个斗士，坚定的认为：任何一个软件用户都要保护自己的自由，彻底的抵制任何私有软件；他把 MS，RealPlay，Adaobe 等商业软件批斗的非常狠。到结束时，他穿上他那标志性传道士的行头就地化身为自由软件教堂的一个圣徒，来呼唤和号召大家一起行动起来加入自由软件的行列。说实话我作为一个商业软件的从业人员，站在我个人立场上我很难说我是否要站到 Richard 的行列里，很难做到彻底的变成一个自由软件的卫道士。虽然现在可以说立场还是糊涂的，不过总算头脑边的清醒了，我应该会以这样的头脑来静静看待软件世界即将到来的变革吧！&lt;/p></description></item><item><title>Ganglia install and configure</title><link>https://martinliu.cn/2008/05/24/ganglia-install-and-configure/</link><pubDate>Sat, 24 May 2008 02:15:27 +0000</pubDate><guid>https://martinliu.cn/2008/05/24/ganglia-install-and-configure/</guid><description>&lt;p>我准备安装的版本是 ganglia-3.0.7 ， 参考的安装文档是&lt;a class="link" href="http://www.linuxsir.org/bbs/thread309837.html" target="_blank" rel="noopener"
>http://www.linuxsir.org/bbs/thread309837.html&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->rpm 的安装会比较省事。rpm 安装都会很正常，不过在 Suse 下面需要注意一下两点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>gmond和gmated的启动脚本不是rpm包中默认装上的那个，那个脚本适用于redhat linux；下载源码编译之后在gmond/ gmated/的文件夹里有后缀为 .SuSE的哪两个文件才对。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>rpm吧gmated的web界面默认安装路径是/var/www/http/ ，SuSE下的apache的路径是 /srv/www/htdoc/；安装完后copy或者连接过来
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->配置：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>gmond.conf 更具我参考的安装文档产生这个文件的命令是 gmond -t &amp;gt; /etc/gmond.conf；rpm安装包中有这个文件，如果需要恢复到默认状态可以使用这个命令。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>gmated.conf 是服务器端的主要配置文件，详细阅读一下源码包中的那个html文件对这个文件的配置会有帮助
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->安装过程中出现的问题如下：在启动gmond的时候启动失败，debug一下可以看到下面的错误。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->sles:~ # gmond &amp;ndash;debug=9&lt;!-- raw HTML omitted -->slurpfile() open() error on file /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq: No such file or directory&lt;!-- raw HTML omitted -->udp_recv_channel mcast_join=239.2.11.71 mcast_if=NULL port=8649 bind=239.2.11.71&lt;!-- raw HTML omitted -->Error creating multicast server mcast_join=239.2.11.71 port=8649 mcast_if=NULL family=&amp;lsquo;inet4&amp;rsquo;. Exiting.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在所有虚拟机（host-only 网络设置）上都遇到这个错误。一次一个NAT网络的虚机上正常&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->至今觉得这是一个网络的问题，还没有想出正确的配置和解决方法。如果您有什么好建议请留言。&lt;/li>
&lt;/ul></description></item><item><title>Enterprise cloud computing</title><link>https://martinliu.cn/2008/05/12/enterprise-cloud-computing/</link><pubDate>Mon, 12 May 2008 00:57:06 +0000</pubDate><guid>https://martinliu.cn/2008/05/12/enterprise-cloud-computing/</guid><description>&lt;p>&lt;a class="link" href="http://www.datacenterknowledge.com" target="_blank" rel="noopener"
>&lt;img src="http://www.datacenterknowledge.com/archives/images/DCK_web.jpg"
loading="lazy"
>http://www.datacenterknowledge.com/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个网站还是不错，有很多关于数据中心的知识。它应该主要是收集业内在该领域里新咨询，先收录一下，回头慢慢学习。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个 vido 我觉得也可以学习一下。&lt;a class="link" href="http://www.datacenterknowledge.com/archives/2008/May/02/ibm_google_team_on_an_enterprise_cloud.html" target="_blank" rel="noopener"
>IBM 和 Google 结成联盟开展企业云计算方面的研究&lt;/a>，可能会建立“IBM-Google cloud ” 这个云会运行在 Linux 上，使用 Xen 做系统虚拟和 Apache Hadoop。同时 Google 和 IBM 都有自己巨大的数据中心，还不知道它们将来的研究成果会运行在谁家的设备上，让我们拭目以待。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Tips：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->有些网络视频比较大，在线看如果网速比较慢的话可能不能正常浏览。很多下载视频的工具好像都是要收费注册的，否则只能下载 60％。我发现的一个方法是，把视频网址输入到这里 &lt;a class="link" href="http://www.techcrunch.com/get-youtube-movie/" target="_blank" rel="noopener"
>http://www.techcrunch.com/get-youtube-movie/&lt;/a> 它会给你生成一个 http 的下载连接，点击后一般的 http 下载工具就能下整个视频了，之后用视频浏览的软件查看，正在缓慢下载上边的视频。不知道你有什么好方法或者是工具可以推荐呢？&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://youtubedownload.altervista.org/" target="_blank" rel="noopener"
>http://youtubedownload.altervista.org/&lt;/a> 是我现在所使用的，不过下载的太慢了，不能支持多线程下载。&lt;/p></description></item><item><title>Install Oracle 10.2.01 on OpenSuSE 10.3</title><link>https://martinliu.cn/2008/05/08/install-oracle-102-on-opensuse-103/</link><pubDate>Thu, 08 May 2008 01:51:16 +0000</pubDate><guid>https://martinliu.cn/2008/05/08/install-oracle-102-on-opensuse-103/</guid><description>&lt;p>&lt;img src="http://www.railsonwave.com/assets/2007/9/5/oracle.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->A) Download 10201_database_linux32.zip from Oracle website.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->B) Download 10gR2_openSUSE102_introduction.pdf and ora.rpm from ftp ftp.novelŀcom&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->C) Install Oracle, following quick steps:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. Install openSUSE 10.2 with &amp;ldquo;C/C++ Development&amp;rdquo; selection.&lt;!-- raw HTML omitted -->2. Download and Install orarun package.&lt;!-- raw HTML omitted -->3. Enable and set password for newly created user oracle by orarun.&lt;!-- raw HTML omitted -->4. Set updated kernel parameters by executing /etc/init.d/oracle start.&lt;!-- raw HTML omitted -->5. Download and unzip Oracle 10gR2 Database SW.&lt;!-- raw HTML omitted -->Edit file database/install/oraparam.ini to add &amp;ldquo;SuSE-10&amp;rdquo; to line #39.&lt;!-- raw HTML omitted -->6. login as user oracle and run Oracle Universal Installer &amp;ldquo;database/runInstaller&amp;rdquo;.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Troubleshooting:&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1) installer error:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/database&amp;gt; ./runInstaller&lt;!-- raw HTML omitted -->Starting Oracle Universal Installer&amp;hellip;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Checking installer requirements&amp;hellip;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Checking operating system version: must be redhat-3, SuSE-9, redhat-4, UnitedLinux-1.0, asianux-1, asianux-2 or SuSE-10&lt;!-- raw HTML omitted -->Passed&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->All installer requirements met.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Preparing to launch Oracle Universal Installer from /tmp/OraInstall2008-05-08_09-11-56AM. Please wait &amp;hellip;oracle@Martin:~/database&amp;gt; java: xcb_xlib.c:52: xcb_xlib_unlock: Assertion `c-&amp;gt;xlib.lock&amp;rsquo; failed.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Solution :&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>export LIBXCB_ALLOW_SLOPPY_LOCK=1
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>run runInstaller again
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2) 在安装完成末期,需要root用户运行两个脚本，完了之后，我遇到一个错误对话框，点击过去之后好像没有发现安装失败，安装目前正常&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->More SQL scripts:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://cs-netlab-01.lynchburg.edu/courses/Oracle/SQLPlus.htm" target="_blank" rel="noopener"
>http://cs-netlab-01.lynchburg.edu/courses/Oracle/SQLPlus.htm&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SQL&amp;gt; CREATE TABLESPACE AMP&lt;!-- raw HTML omitted -->2 DATAFILE &amp;lsquo;/opt/oracle/oradata/orcl/AMP.dbf&amp;rsquo; SIZE 200M;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Tablespace created.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SQL&amp;gt; CREATE USER AMP IDENTIFIED BY ca1234&lt;!-- raw HTML omitted -->2 DEFAULT TABLESPACE AMP&lt;!-- raw HTML omitted -->3 QUOTA UNLIMITED ON AMP;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->User created.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SQL&amp;gt; GRANT CONNECT, RESOURCE TO AMP;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Grant succeeded.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SQL&amp;gt; GRANT CREATE SESSION, CREATE TABLE TO AMP;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Grant succeeded.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>How to start oracle em manully?&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->可能出现的错误如下，没有ORACLE_SID的 环境变量, 可能网络地址和环境发生变化,比如主机名修改等.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/product/10.2/db_1/bin&amp;gt; ./emctl start dbconsole&lt;!-- raw HTML omitted -->TZ set to PRC&lt;!-- raw HTML omitted -->EM Configuration issue. /opt/oracle/product/10.2/db_1/localhost_orcl not found.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/product/10.2/db_1/bin&amp;gt; ./emctl start dbconsole&lt;!-- raw HTML omitted -->TZ set to PRC&lt;!-- raw HTML omitted -->OC4J Configuration issue. /opt/oracle/product/10.2/db_1/oc4j/j2ee/OC4J_DBConsole_localhost_orcl not found.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->修正方式:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/product/10.2/db_1/oc4j/j2ee&amp;gt; cp -R OC4J_DBConsole_Martin.bmc.com_orcl OC4J_DBConsole_localhost_orcl&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/product/10.2/db_1&amp;gt; cp -R Martin.bmc.com_orcl/ localhost_orcl&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->oracle@Martin:~/product/10.2/db_1&amp;gt; bin/emctl start dbconsole&lt;!-- raw HTML omitted -->TZ set to PRC&lt;!-- raw HTML omitted -->Oracle Enterprise Manager 10g Database Control Release 10.2.0.1.0&lt;!-- raw HTML omitted -->Copyright (c) 1996, 2005 Oracle Corporation. All rights reserved.&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://Martin.bmc.com:1158/em/console/aboutApplication" target="_blank" rel="noopener"
>http://Martin.bmc.com:1158/em/console/aboutApplication&lt;/a>&lt;!-- raw HTML omitted -->Starting Oracle Enterprise Manager 10g Database Control &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. started.&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Logs are generated in directory /opt/oracle/product/10.2/db_1/localhost_orcl/sysman/log&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->启动了后访问: http://localhost:1158/em/&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>手工启动Oracle实例的方法&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1) sqlplus&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->sqlplus /nolog&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->connect sys/manager as sysdba&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->startup&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2) rcoracle&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->需要修改如下几个文件：/etc/oraInst.loc  /etc/oratab /  /etc/sysconfig/oracle /opt/oracle/product/10.2/db_1/bin/dbstart /usr/sbin/rcoracle 修改这些文件中的路径等信息知道 rcoracle start 命令不出错为止。&lt;/li>
&lt;/ul></description></item><item><title>Deploy asset management solution</title><link>https://martinliu.cn/2008/04/28/deploy-asset-management-solution/</link><pubDate>Mon, 28 Apr 2008 02:01:06 +0000</pubDate><guid>https://martinliu.cn/2008/04/28/deploy-asset-management-solution/</guid><description>&lt;p>&lt;a class="link" href="http://www.ocsinventory-ng.org/uploads/images/poster-eng.png" target="_blank" rel="noopener"
>&lt;img src="http://www.ocsinventory-ng.org/uploads/images/poster-eng.png"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>This is my second virtual appliance, it suppose to work for production. This is a 100% open source solution for inventory/asset management, it including OCS Inventory NG and GLPI. I encourage you to deploy it in your school or company.&lt;/p>
&lt;p>&lt;strong>About virtual appliance / 关于此虚拟应用&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>OpenSuSE 10.2 (root password is martinliu)&lt;/li>
&lt;li>LAMP+Perl&lt;/li>
&lt;li>OCS Inventory v1.02 RC1&lt;/li>
&lt;li>GLPI v0.70.2&lt;/li>
&lt;li>bridged network&lt;/li>
&lt;/ul>
&lt;p>You can download it from below.&lt;/p>
&lt;p>&lt;a class="link" href="http://demo.wholog.net/AssetMgmt.rar" target="_blank" rel="noopener"
>Download it 下载&lt;/a> This source is not available any longer. I will offer it by DVD. 这个地址已经无法下载，请关注我即将推出的 DVD 版虚机。&lt;/p>
&lt;p>&lt;strong>Thanks &lt;a class="link" href="http://www.bigyue.com/" target="_blank" rel="noopener"
>BigYue.com&lt;/a> for donated upload space. 感谢**&lt;/strong>&lt;a class="link" href="http://www.bigyue.com/" target="_blank" rel="noopener"
>BigYue.com&lt;/a>*&lt;strong>*的空间。&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Run Server / 运行管理服务器（&amp;gt;=2GB RAM）&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>un-zip the image on a computer which will be network with for any managed nodes to upload inventory information. This host machine should have at least 2GB RAM.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Download a wm player and install it.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Open virtual machine and power on.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>At top of boot screen, you will find the ip address of this vm I assume you have a DHCP server on network. Otherwise you have to configure network manually for this vm.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access to the home page (&lt;a class="link" href="http://IP_address_Of_vm/" target="_blank" rel="noopener"
>http://IP_address_Of_vm/&lt;/a>) which I made it for you. On this page, there are login information and entry points.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Now you have a full function asset management solution up an running. You will configure security for the whole system before you do more work with it. You should change the password for root and mysql. Mysql have a blank password. After you done this, you must re-configure database connection for both OCS Inventory NG and GLPI accordingly. Please refer to administration guide.&lt;/p>
&lt;p>&lt;strong>Deploy Agent / 安装部署代理&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>For any Unix-like system : you will manually install on each of target computer. Following the installation guide from OCS inventory NG.&lt;/li>
&lt;li>For MS windows system: You can do manually installation too. Also you could distribute agent via AD domain policy automatically, all target machines must logon the AD domain at least once in order to get agent package installed. Agent is running as a windows service if it is installed properly; inventory information will update timely to the server. The Agent package can be copied to a USB key. You can use it for collecting inventory information for off-line computers, or a computer which you wont have any piece of OSS installed on it. I&amp;rsquo;m kidding, I guess you love to run OSS on any of your computers, PS: the more the better.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Management Asset / 管理 IT 资产&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Synchronize inventory data from OCS Inventory NG to GLPI. GLPI can do it at interval that you set hourly or daily.&lt;/li>
&lt;li>Those two OSS are just easy to use. You will still read some necessary documents on their web. &lt;strong>请阅读尽可能多的使用手册&lt;/strong>&lt;/li>
&lt;li>As long as you use this virtual appliance, I can see your smile face. Don&amp;rsquo;t forget give me comment below and let me know how many nodes do you manage.&lt;/li>
&lt;li>Enjoy and have a lot of fun.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Support / 支持&lt;/strong> This virtual appliance comes with ABSOLUTELY NO SUPPORT. I will try my best to support you, but questions are not guaranteed for a quick answer. I strongly recommend you will go to open source community when you run into any error. I believe you can get support and might help others too. If you improved this virtual appliance, I am looking forward to see your share. I&amp;rsquo;d like to hear any good idea from you.&lt;/p>
&lt;p>&lt;strong>Notes:&lt;/strong>&lt;/p>
&lt;h3 id="from-wikipedia-comparison-of-open-source-configuration-management-softwarehttpenwikipediaorgwikicomparison_of_open_source_configuration_management_software">From wikipedia: &lt;a class="link" href="http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software" target="_blank" rel="noopener"
>Comparison of open source configuration management software&lt;/a>&lt;/h3></description></item><item><title>如何获得OSS支持？</title><link>https://martinliu.cn/2008/04/24/e5a682e4bd95e88eb7e5be97osse694afe68c81efbc9f/</link><pubDate>Thu, 24 Apr 2008 16:48:12 +0000</pubDate><guid>https://martinliu.cn/2008/04/24/e5a682e4bd95e88eb7e5be97osse694afe68c81efbc9f/</guid><description>&lt;p>&lt;img src="http://www.schacherer.de/frank/bilder/drawing/maurice.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这周我在繁密的出差当中，偶尔能用 Blackberry 看一眼邮件，不过完全没有可能回答读者任何问题。最近这两周有愈来愈多的博客读者给我发了邮件，问我了一堆问题，我很希望能给他们一个好的答案，不过这种可能性太小了，尤其是在这样的时间里。通过他们焦急的情绪，我忽然想到这个问题：如何获得开源软件的相关支持？其实这也是我的一个问题。于是乎我想到下面的一些东西。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**搜索 **是最主要的一个途径，你会发现很多一般问题都能获得答案，仔细选择和尝试不通的关键词&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**邮件组/论坛 **每种开源软件都有这两种或者至少一种用户支持方式，其实这是用户互助的方式，用户之间的帮助往往更快。这些就是社区的载体，有些邮件组比较活跃，有些论坛比较活跃；例如：OpenNMS 的邮件组就非常活跃，我订阅了其中的几个子项，问出问题往往能得到很快回复，其实 OpenNMS 的人每周有不人负责回答问题；Cacti 的论坛就相当好，那里也是用户直接互相同享模板的主要地点，解决问题的功能也相当好。很多国内中文论坛也非常好，推荐一个http://www.itnms.net/ 更多的还需要你自己去发现。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**线下用户团体 **我参加国 BLUG 的线下活动，感受非常深刻，当你面对很多来自不同背景不同技术特长的 OSS 认识的时候，找到合适的高手并不是困难的事。不要躲在网络后面捣鼓开源软件，走到现实世界来享用它吧。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**商业支持 **有些开源软件有两个网址 oss.org 、oss.com；往往.com 网址上有商业支持的说明，商业和开源并不矛盾，更具你的需求购买商业支持也是一个非常现实的方式。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**聪明问问题 **如果你遇到问题，首先要学会正确描述问题，问题的描述信息包括：软件版本、运行环境、出错情景，以及其它任何关键或者有用的信息。很多软件都运行在某种技术堆栈的最高层，下层的环节包括 OS、DB、Web、Php 语言等；你应该清楚如果是这些环节出错，那么你该去响应的社区求助，要问对人，不要问错人，也不要问傻问题。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**友好的交流 **每当我遇到一些开源高手的时候，幸运的是他们非常的 nice，我可以轻松的问任何问题，无论简单、还是复杂。技术思想的沟通应该是一种愉快和友好的体验，保持一种谦虚正常的心态，这是自身素质和修养的表现。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**语言 **对所有非英语人士，英文是必须要会的，英语不灵的话需要好好补习补习。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**支持我的读者 **推荐通过留下 comment 的方式问你的问题，发给我邮件我很容易忽略，而 comment 是我必须处理的。如果我有答案的话，我会在 3 内给出回应；超过 3 天的话表明，很可能我目前还没有一个合适的答案。在留下问题的同时，一定多面出击寻找答案，别在这守株待兔。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**关于此博客 **定义如下：技术型、记录型、日志型、开放型和共享型。对我自己来说，它是我记录研究开源软件的一个载体，是我向需要这方面信息的人分享的一个窗口。它不具有任何商业性，不承诺提供任何程度的支持。通过这个博客有相投兴趣的人也能相互交流。&lt;/p></description></item><item><title>Open Source Ticket Request System - OTRS 2.2.6</title><link>https://martinliu.cn/2008/04/21/open-source-ticket-request-system-otrs-226/</link><pubDate>Mon, 21 Apr 2008 02:16:20 +0000</pubDate><guid>https://martinliu.cn/2008/04/21/open-source-ticket-request-system-otrs-226/</guid><description>&lt;p>I made a OTRS 2.2.6 virtual machine for anyone who wants to test both OTRS and OTRS::ITSM. It was built on OpenSUSE 10.2, including OTRS 2.2.6 and OTRS::ITSM 1.0.94. OTRS::ITSM implements ITIL (R) focused IT service management. OTRS::ITSM 1.0.94 is still on Beta, you might have some bugs when using this virtual machine. Please download from my box.net, if you have an comment please just let me know. I&amp;rsquo;d like to invite you to improve this virtual machine if you have any good ideal.&lt;/p>
&lt;p>&lt;a class="link" href="http://demo.wholog.net/OSS.rar" target="_blank" rel="noopener"
>Download it from here&lt;/a> &lt;a class="link" href="http://demo.wholog.net/OSS.rar" target="_blank" rel="noopener"
>点此下载。 &lt;/a>&lt;a class="link" href="http://demo.wholog.net/OSS.rar" target="_blank" rel="noopener"
>This source is not available any longer. I will offer it by DVD. 这个地址已经无法下载，请关注我即将推出的 DVD 版虚机。&lt;/a>&lt;/p>
&lt;p>&lt;strong>Thanks &lt;a class="link" href="http://www.bigyue.com" target="_blank" rel="noopener"
>BigYue.com&lt;/a> for donated upload space. 感谢**&lt;/strong>&lt;a class="link" href="http://www.bigyue.com" target="_blank" rel="noopener"
>BigYue.com&lt;/a>*&lt;strong>*的空间捐助。&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Credentials 登录密码如下&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>OpenSuSE 10.2 : username / password is &amp;ldquo;root/ca1234&amp;rdquo;&lt;/li>
&lt;li>MySQL : username / password is &amp;ldquo;root/ &amp;quot;&lt;/li>
&lt;li>OTRS : admin username and password is &lt;a class="link" href="mailto:root@localhost/root" >root@localhost/root&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Run 运行压缩文件中的虚拟机&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Download and install VM Player, the machine should have 1GB RAM at least.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Un-zip OSS.rar in a partition, freespace must be 2.5+ GB.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Double MartinLiu.cn.vmx and power on this machine.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click &amp;ldquo;keep&amp;rdquo; and OK button when you get a popup box。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The network connection of virtual machine is &amp;lsquo;bridged&amp;rsquo;. You will see the ip address of this virtual machine at 5th line one the top of boot screen. NOTE: you should have DHCP server on your network.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Access 访问虚拟机&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>SSH to it.&lt;/li>
&lt;li>Agent login page: &lt;a class="link" href="http://ip_address/otrs/index.pl" target="_blank" rel="noopener"
>http://ip_address/otrs/index.pl&lt;/a>&lt;/li>
&lt;li>Customer login page: &lt;a class="link" href="http://ip_address/otrs/customer.pl" target="_blank" rel="noopener"
>http://ip_address/otrs/customer.pl&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Tips of OTRS installation 安装经验&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Apache should have perl mod, configure perl for apache before you install OTRS. 这是一个 Perl 写的程序，所以在安装之前最好吧 apache 上的 perl 配置好，确认 apache 能运行 perl 的东西&lt;/li>
&lt;li>Make sure your database accepts packages over 5 MB in size. Increase max_allowed_packet in my.cnf to 20MB. 修改 my.cnf 中的 max_allowed_packet 参数到 20MB，否则 ITSM 的包安装有问题。&lt;/li>
&lt;li>OTRS 需要一写附件的 perl 包的支持，手头最好有操作系统的安装 dvd 或者直接从网上安装。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Usage 用途&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>You can use it for any purpose, if you need any support you will contact OTRS。你可以用于任何用途，本博客不提供技术支持，请联系 OTRS 的邮件列表。&lt;/li>
&lt;li>ITIL training, OTRS::ITSM implements ITIL (R) focused IT service management. 可以用于 ITIL 的培训，它能演示：incident management, problem management, configuration management 等。&lt;/li>
&lt;li>This virtual machine comes with ABSOLUTELY NO WARRANTY. DO NOT USE it for production. 仅供测试使用，切勿用于生产环境。&lt;/li>
&lt;/ul>
&lt;p>If you like OTRS, you may try &lt;a class="link" href="http://www.bestpractical.com/rt/" target="_blank" rel="noopener"
>Request Tracer&lt;/a>&lt;/p>
&lt;p>今天一个网友告诉我另外一个开源的类似系统&lt;a class="link" href="http://www.bestpractical.com/rt/" target="_blank" rel="noopener"
>Request Tracer&lt;/a> ，有空的话回头也试试。&lt;/p></description></item><item><title>Clouds are coming</title><link>https://martinliu.cn/2008/04/18/clouds-are-coming/</link><pubDate>Fri, 18 Apr 2008 15:05:23 +0000</pubDate><guid>https://martinliu.cn/2008/04/18/clouds-are-coming/</guid><description>&lt;p>&lt;img src="http://www.swish-designs.co.uk/images/cloud_fig3.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最近两周最吸引我的 TAG 是这个词“cloud computing”。在我&lt;a class="link" href="http://www.martinliu.cn/2008/04/10/do-you-have-a-google-app-engine/" target="_blank" rel="noopener"
>前一个文章&lt;/a>中稍微展望了一下云计算的前景“云计算吧电能转化成计算能力，然后向用电一样的来使用，我们甚至不需要使用 PC 这样的个人信息话设备来管理我们的信息，所有的信息和信息的处理都在云上发生”。在了解了更多的信息之后，这些可能实现，但是这种巨变需要时间，而且可能是很长时间；清醒之后不得不佩服 Google 在这方面的宣传。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->理性认识云计算的简单方式，扫扫盲：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>阅读一下wikipedia对&lt;a class="link" href="http://en.wikipedia.org/wiki/Cloud_computing" target="_blank" rel="noopener"
>‘cloud computing’&lt;/a>的解释
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>听听John Willi的两个&lt;a class="link" href="http://www.johnmwillis.com/best-of/" target="_blank" rel="noopener"
>Podcast&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>多看看非google来源的信息：）
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>读读这个GRIDtoday的文章 &amp;ndash; &lt;a class="link" href="http://www.gridtoday.com/grid/2284608.html" target="_blank" rel="noopener"
>&amp;ldquo;Clouds are Looming and We Love It&amp;rdquo;&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->很多厂商都在参与这个热点，open source也要加油，期待开源在这个领域的发展。&lt;/li>
&lt;/ul></description></item><item><title>Using Ganglia for cluster and grid monitoring</title><link>https://martinliu.cn/2008/04/16/using-ganglia-for-cluster-and-grid-monitoring/</link><pubDate>Wed, 16 Apr 2008 09:41:06 +0000</pubDate><guid>https://martinliu.cn/2008/04/16/using-ganglia-for-cluster-and-grid-monitoring/</guid><description>&lt;p>&lt;a class="link" href="http://ganglia.info/" target="_blank" rel="noopener"
>&lt;img src="http://www.nowmicro.com/NM_Images/hpc-ganglia-logo.jpg"
loading="lazy"
>&lt;/a> Ganglia 是一个用来监控群集和网格计算环境的软件。它是可以扩展的分布式监控系统，它基于多播协议，数据存储和传输的格式都是基于开源的标准：XML/XDR/RRDTool/APR/Apache/php 等。&lt;/p>
&lt;p>应用 Ganglia 的几个理由：&lt;/p>
&lt;ul>
&lt;li>在一个点上监控包含很多服务器的群集，单个 cluster 内服务器的数量比较多，需要从整体看某个 cluster 的可用性和性能，也要能看到单独某个机器的运行情况。&lt;/li>
&lt;li>监控分布式的 cluster 环境，例如跨网段和地域的灾备的环境。&lt;/li>
&lt;li>需要监控系统能分 N 级的查看方式，以银行为例：北数据中心&amp;ndash;&amp;gt;网络银行业务&amp;ndash;&amp;gt;个人网银系统&amp;ndash;&amp;gt;web server 群集&amp;ndash;&amp;gt; WebSvr001；可以按业务逻辑和系统架构逻辑。&lt;/li>
&lt;li>需要 7&lt;em>24&lt;/em>365 的监控整个系统，能得到可用性、性能和容量等方面的报表。&lt;/li>
&lt;/ul>
&lt;p>应用 Ganglia 的几个好处：&lt;/p>
&lt;ul>
&lt;li>监控能力的无限扩展，被管理服务器数量达数千个甚至根多。&lt;/li>
&lt;li>纯 web 前端，apache 和 php 的应用页面方便定制&lt;/li>
&lt;li>强壮的系统结构，并且具备可以任意扩展采集数据 KPI 的特点&lt;/li>
&lt;li>适合高性能计算或者网格计算环境。&lt;/li>
&lt;/ul>
&lt;p>Ganglia 应用需要注意的方面：&lt;/p>
&lt;ul>
&lt;li>在每一个节点上需要部署一个代理程序，考虑到对代理配置的变更的工作量，在部署代理之前，需要彻底的分析需求，尽量减少部署过程中配置变更带来的多于调试的工作量。&lt;/li>
&lt;li>部署后期的变更工作，如果比较频繁的话将导致后台维护工作量增大，可以考虑使用一些开源的软件分发和自动化配置管理的工具。这些配置的初始化工作可以与 OS 的安装部署工作一起考虑。&lt;/li>
&lt;/ul>
&lt;p>它被很多大学和专业机构研究并使用，所以有非常多的专业文档可以参考，哪行文档多分析了 Ganglia 的系统架构和特点，多系统的原理介绍的非常细致。下面是我收集的几个关于这个软件的文档请参考。并且在它们的网站上也可以看到很多相关的资源连接，都是非常好的实施方面的详细文档。&lt;/p>
&lt;p>If you need more detail please take look those documents below.&lt;/p></description></item><item><title>DO you have a google App Engine?</title><link>https://martinliu.cn/2008/04/10/do-you-have-a-google-app-engine/</link><pubDate>Thu, 10 Apr 2008 05:23:44 +0000</pubDate><guid>https://martinliu.cn/2008/04/10/do-you-have-a-google-app-engine/</guid><description>&lt;p>There is what I got from &lt;a class="link" href="http://appengine.google.com/" target="_blank" rel="noopener"
>http://appengine.google.com/&lt;img src="http://code.google.com/appengine/images/appengine_lowres.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->I read a post last night, &lt;a class="link" href="http://googleblog.blogspot.com/2008/04/developers-start-your-engines.html" target="_blank" rel="noopener"
>Developers, start your engines &lt;/a>Even I am not a developer, I definitely look forward to sing up &lt;a class="link" href="http://appengine.google.com/" target="_blank" rel="noopener"
>appengine. &lt;/a>. But I can not have it, that&amp;rsquo;s pity. Let&amp;rsquo;s see how to create a &amp;lsquo;hello world&amp;rsquo; appp on google appengine.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Let me see your app on google. See more on &lt;a class="link" href="http://appgallery.appspot.com/" target="_blank" rel="noopener"
>http://appgallery.appspot.com/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Google App Engine 是一个开放的应用运行平台，它提供给你的应用无限的扩展性，并免费的在后台运行。记得以前和同事曾经有过一个话题“GOOGLE 的基础架构是怎么搭建的？”，google 的成功和它对基础架构资源的结构方式是密不可分的，大家都想知道这个秘密。不过现在好像你不需要模仿并拥有一个相同或者相似的了，你有可能免费访问并使用了。Google 把它定义为一种服务，和邮件服务好像没有任何区别。IT 基础架构实现和提供的是计算资源，而以后随着‘云计算’等技术的实现，使用这种资源可能会想使用电一样方便。不需要拥有发电厂，你的电灯依然会亮。&lt;/p></description></item><item><title>Get right-size of OSS</title><link>https://martinliu.cn/2008/04/05/get-right-size-of-oss/</link><pubDate>Sat, 05 Apr 2008 14:19:20 +0000</pubDate><guid>https://martinliu.cn/2008/04/05/get-right-size-of-oss/</guid><description>&lt;p>6yeas ago, I had a open source talk with my friend Tom Chen. The topic was &amp;quot; does oss suppose to work for large enterprise for mission critical business?&amp;quot; Until last week, I thought I found answer by myself; the OSS does works for bank business in China. During last week, I deployed my company&amp;rsquo;s product on CCB&amp;rsquo;s machines. Those machines are part of e-banking system, 1/4th of them are on Redhat Enterprise Linux 4 update6. As we all know CCB is one of big four bank in China, those Linux machines are running Apache for web-tier of e-banking system. A 160MB installation image was ftp to every managed nodes, untar it then ran a same install script. I felt Linux boxes took less time then other HP-UX boxes, they are similar servers I mean similar hardware. Actually CCB have many Linux servers all over the country then I touched at this time.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I had a business travel in Urumchi lat year. I met another bank customer there. When we were talking about what kind of OS they have. They impressed me very much. They said part of servers are on SuSE Enterprise Linux, they are just virus-free and lower maintenance cost then M$ Windows. They are just use those SuSE Linux to running IBM DB2 database for some bank business. They like Linux, but not use it everywhere. I didn&amp;rsquo;t tell them that is my favorite Linux distribution. Just look back 5 years, I would say more and more companies are using OSS or they are considering have more OSS for their business.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Let&amp;rsquo;s get back to my topic: what OSS could be good for you? Do you have confidence for have more OSS for your business system? I think you need to just have the right-size of OSS. You have to figure by yourself. The following are my suggestions:&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>OSS adoption might take years, you should have a plan.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Starting from one single on-going project, you could migrate all or part of a business system to OSS(Linux for OS, Tomcat for mid-tier, or what every you&amp;rsquo;d like to use)
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Monitoring the entire IT by same way by 24 hours. You must have availability and performance report for every node. Then you could analyses those history report to figure out if OSS does a good job or not. A incident report of whole IT support org is highly recommended.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Having more OSS engineers might speed up the process you move forward to OSS.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If you like my thought in this post, you would like to see this &lt;a class="link" href="http://www.martinliu.cn/2007/06/12/%e5%bb%ba%e7%ab%8b%e4%b8%80%e4%b8%aa%e5%bc%80%e6%ba%90%e4%bc%81%e4%b8%9a/" target="_blank" rel="noopener"
>old one&lt;/a>.&lt;/li>
&lt;/ul></description></item><item><title>PostgreSQL基本操作指南</title><link>https://martinliu.cn/2008/04/03/postsql-basic-admin/</link><pubDate>Thu, 03 Apr 2008 08:25:44 +0000</pubDate><guid>https://martinliu.cn/2008/04/03/postsql-basic-admin/</guid><description>&lt;p>&lt;strong>安装&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我的安装环境是虚拟机下面安装的 CentOS4.4；在安装的时候需要注意的是：在安装选择的时候 PostgreSQL 一共有十几个可选的包，把可能会用到的包都尽量选中，否则就要手工去安装了，手工解决包之间的依赖关系烦啊。从光盘上装的好处就是它自己帮你把用户和启动脚本建好了，安装后需要检查如下两个文件：1）/etc/init.d/postgresql 是否存在；2）/etc/passwd 里面有没有 postgres 用户。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>启动数据库&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第一次启动，用 root 用户登录，运行命令：[root@RBA init.d]# service postgresql start ；如果需要数据库在系统启动是就启动的话需要运行：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->检查结果&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;strong>数据库管理&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->先切到 postgres 用户 su postgres&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->新建一个数据库 createdb amp&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->新建一个超级用户，需要在 shell 下运行：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->链接到数据库之后，确认以下：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->给用户加一个密码：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;strong>其他参考信息&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>虚拟让你轻松玩开源</title><link>https://martinliu.cn/2008/04/02/vm-jumpbox-rpath-play-oss/</link><pubDate>Wed, 02 Apr 2008 06:46:29 +0000</pubDate><guid>https://martinliu.cn/2008/04/02/vm-jumpbox-rpath-play-oss/</guid><description>&lt;p>&lt;a class="link" href="http://www.martinliu.cn/wp-content/uploads/2008/04/homepage-promo.png" target="_blank" rel="noopener"
>&lt;img src="http://www.martinliu.cn/wp-content/uploads/2008/04/homepage-promo.png"
loading="lazy"
>&lt;/a>开源一般都是谁在玩？我觉得还是开发人员比较多，通常有开发背景的人才会比较轻松的去下载源代码，编译并运行。现在网上有很多能让您轻松搞定开源软件的方法，虚拟技术的发展使我们能更轻松的获取并运行开源的解决方案。向往糖果盒子中放巧克力一样容易。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最近我收到了几个&lt;a class="link" href="http://otrs.org" target="_blank" rel="noopener"
>OTRS&lt;/a>的新版发布的新闻邮件。先说说关于 OTRS 的一些新闻，2008-03-31 发布了最新的一个版本 &lt;a class="link" href="http://otrs.org/news/2008/otrs_2_2_6/" target="_blank" rel="noopener"
>OTRS 2.2.6 (Ipanema)&lt;/a>。这个版本是一个 2.2.6 的安全补丁修复版，修复了一些安全的 bug，同时有提供了另外两种语言的支持：土耳其和越南语；当然 OTRS 是能够支持简繁体的中文的。而且关于语言方面的翻译对照表也是可以自行修改的，可以把流程当中的一些术语翻译成符合你企业实用习惯的名称。OTRS 后台能支持非常多的数据库，包括 Oracle，MS SQL 等非开源数据库，它的核心程序是用 Perl 写的，这些程序运行在 Apache web 服务器上，客户端是用的纯 web 的方式，后台的管理提供 Web 和命令行两种方式。它的安装对于我来说不是很方便，安装文档中并没有写的很详细需要哪行 Perl 的包，apache 上需要安装哪行 Perl 相关的东西；不过您对 Perl 非常熟练的话相信没有这个问题。导致的问题是我在安装了 ORTS 之后，它或者它的某些程序运行不了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->总结一下体验开源软件可能的一些步骤：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>安装某个版本的Linux
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>下载开源软件的安装包或者源码，开发人员可能更多回去下载源码，编译安装
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>寻找次软件相关的安装文档和攻略，一步一步的照做。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>配置系统来满足次软件的安装和运行条件
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>管理和运行该软件需要的服务，例如MySQL，apache等
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>运行该软件
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>继续查看软件的使用文档，学更多内容，体验感兴趣的功能
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在这一个过程中可能遇到的问题有：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>痛苦与重新安装操作系统，往往系统中的一些包会缺少或者版本不符合安装需求，如果对Linux系统包管理不熟练的话这是最容易出现的问题。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>痛苦与对底层支持应用的配置和管理，底层依赖的系统服务可能有数据库、web服务器或者应用服务器等；至今记得我第一次被迫在PostgreSQL中创建数据和用户的痛苦
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>有些OSS项目文档做的非常好，有些不好，那么安装和配置OSS的过程也可能会非常麻烦；毕竟很多配置文件的修改都需要手工修改配置文件
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->应用虚拟技术可能是一个比较好的方式，目前我找到两个比较好的网站能提供 OSS 虚拟应用下载的，如下所示。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.rpath.com/conary-static//apps/mint/images/corplogo.gif"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.rpath.com/rbuilder/" target="_blank" rel="noopener"
>http://www.rpath.com/rbuilder/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://www.jumpbox.com/sites/all/themes/jumpbox/logo-white.gif"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.jumpbox.com/" target="_blank" rel="noopener"
>http://www.jumpbox.com/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这两个网站的区别是：JumpBox 是提供开源软件包下载和相关服务的，当然下载肯定是免费的；rPath 不但提供下载而且能给你空间去攒一个你自己的虚拟应用。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->当然 VWMare 的网站也能提供这些虚拟应用的下载：&lt;a class="link" href="http://www.vmware.com/appliances/" target="_blank" rel="noopener"
>http://www.vmware.com/appliances/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这里不想讨论虚拟技术的好处，不过它确实给体验和应用 OSS 带来很多方便。我第一次下载的虚拟应用是 Zenoss，下载总共花了 10 分钟，下载的过程当中我在看 Zenoss 的文档，下载的虚拟机运行起来之后，我做的第一件事情就是运行自动发现网络设备的命令了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->通过虚拟这个桥梁，更加节约了我们体验和应用 OSS 的时间。我想这应该是开源和虚拟共同给我们带来的好处，道理很简单如果你下载并且使用一份包含 Windows 操作系统的应用，而没有给 MS 交钱的话，那么你就是盗版使用 Windows 了。更没有人会给你免费安装配置一套商业应用软件。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->那么让我们从体验 OTRS 开始把，什么是 OTRS 请参考本博客中的文章。你可以从 JumpBox 下载并运行 OTRS2.2.6，下载地址是：&lt;a class="link" href="http://downloads2.jumpbox.com/otrs-1.0.1.zip" target="_blank" rel="noopener"
>http://downloads2.jumpbox.com/otrs-1.0.1.zip &lt;/a>&lt;/p></description></item><item><title>化繁为简</title><link>https://martinliu.cn/2008/04/01/simple-is-everything/</link><pubDate>Tue, 01 Apr 2008 12:27:26 +0000</pubDate><guid>https://martinliu.cn/2008/04/01/simple-is-everything/</guid><description>&lt;p>这几天我对 blog 做的做多的工作就是找一个好看的 Theme。由于受&lt;a class="link" href="http://lzheng.blogspot.com" target="_blank" rel="noopener"
>blogspot&lt;/a>的影响，所找到的都是黑色两列的；后来觉得样式还是太花哨了，花哨的外表和化繁为简的思想不相投啊。简单并不意味着丑陋，想想 Apple 就行了，看看它的产品吧，外观上无不简洁大方。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->今天对 blog 做了一些简化工作：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>对左侧模块的精简，去掉了不需要的模块，把模块标题字数减少。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>删除了所有之前下载的Theme，以后就用Wordpress默认的模板。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>删除了不用的插件，把Google sitemap插件装好。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>导入以前Blogspot里的文章
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>删除了站内不需要的文件，数据库和配置。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;img src="http://sci-toys.com/scitoys/scitoys/radio/simple_radio_schematic_2.gif"
loading="lazy"
alt="keep simple."
>wordpress默认theme是我唯一只能挑出最少毛病的模板，其他的模板总体来说还是可以的，不过总有至少一个让你不能忍受的缺陷，这也成了删除它的不二理由。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->回归wordpress默认theme让我更加关注在它本身的功能上，让我更专心在内容质量上，同时降低了以后的升级工作量。联系一下开源软件(Open Source Software)，OSS也都以简为美，简单而开放让OSS绽放了无限魅力。如果没有wordpress的简单开放，那么就没有全球这么多的bloger天天去网上淘好看的theme和插件了；就不会有这么多的开发人员了，他们的创造使得wordpress魅力绽放。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OSS基本上都是功能注重型的，开发人员都关注软件的核心功能，OSS的简单开放一定会被人们更加关注。&lt;/li>
&lt;/ol></description></item><item><title>搬家成功纪念一下</title><link>https://martinliu.cn/2008/03/29/moveback/</link><pubDate>Sat, 29 Mar 2008 05:08:28 +0000</pubDate><guid>https://martinliu.cn/2008/03/29/moveback/</guid><description>&lt;p>纪念一下吧~~~从 blogger 搬到此处，真的非了很多的周折~&lt;!-- raw HTML omitted -->&lt;img src="http://www.huanatv.com.cn/news/uploadfile/200709/20070904024609344.jpg"
loading="lazy"
>&lt;strong>本博客介绍：&lt;/strong>&lt;!-- raw HTML omitted -->我曾经有过好多个 Blog，其中最喜欢是 &lt;a class="link" href="http://lzheng.blogspot.com/" target="_blank" rel="noopener"
>http://lzheng.blogspot.com&lt;/a>。在这个 Blog 之前我曾经在 chinaunix.net 上有过两个 blog，一个 &lt;a class="link" href="http://okwiner.cublog.cn/" target="_blank" rel="noopener"
>okwiner.cublog.cn&lt;/a>,后来有专门为 OpenNMS 新开了一个 &lt;a class="link" href="http://opennms.cublog.cn/" target="_blank" rel="noopener"
>opennms.cublog.cn&lt;/a>； 其实对这两个 blog 更新的还是挺多的，特别是第一个 CUblog。不过后来，还是觉得 google 的 blog 有非常多的功能，就把以前写的好的文章都搬 去 blogspot 了。目的有二，一来是想用一个功能能强大的 blog，二来呢觉得 google 对自己的 blog 的搜索一定会更好，通过 google 可以 能带来更多读者。不过不幸的是去年两会的时候 blogspot 就被封了，期间偶尔也开放过一两。有一次我还以为真的是有恢复了，一夜没睡觉，更新了 blog 的样式准备重新开始继续更新。可是第二天就有访问不了了，其实平时在公司或者在公司的 VPN 上是可以访问的，由于是走的国外的网络；从 blog 流 量统计上可以看出，&lt;a class="link" href="http://lzheng.blogspot.com/" target="_blank" rel="noopener"
>http://lzheng.blogspot.com&lt;/a>的访问量是平均大约每天 12 个，访问者基本上都是从国外和港台地区。不过我觉得我的读者是应该面向国内的，写这个博客的目的还是向国内的中文用户提供开源的信息和技术。所以就申请了自己的域名，购买了一个虚拟机（LAMP），在虚机上安装了&lt;a class="link" href="http://wordpress%e3%80%82com/" target="_blank" rel="noopener"
>wordpress。&lt;/a>wordpress 和 blogspot 的内容是可以互相兼容的，把 blogspot 里的文章导出成 xml 文件在导入到这个站点当中，这样完成了 blog 的搬家工程。工程虽然不是很浩大，不过毕竟还是费了一番周折，目的只有一个，以前写的东西有些还是有用的舍不得丢。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以后会把我在开源方面的心得和想法都更新到这个博客上，希望能够为您提供一点点的帮助。在这里呢会对开源技术提供全景式介绍，做的力求比较全面内 容。不过我一直以来呢是做 IT 管理这个方向的，所以从我的文章分将有 70%以上是这方面的内容，30%介绍其他内容。不过您如果有其他任何相关的想法也欢 迎和我探讨。&lt;/p></description></item><item><title>Hyperic HQ 3.2 new features</title><link>https://martinliu.cn/2008/02/02/hyperic-hq-32-new-features/</link><pubDate>Sat, 02 Feb 2008 06:02:00 +0000</pubDate><guid>https://martinliu.cn/2008/02/02/hyperic-hq-32-new-features/</guid><description>&lt;p>If you&amp;rsquo;d like to check out release note, please click here. &lt;a class="link" href="http://support.hyperic.com/confluence/display/DOC/HQ&amp;#43;3.2&amp;#43;Release&amp;#43;Notes" target="_blank" rel="noopener"
>http://support.hyperic.com/confluence/display/DOC/HQ+3.2+Release+Notes&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I had a quick install on RHEL 5. For some features what I saw, I took some screenshots as bellowing. I hope this helps you to understand what&amp;rsquo;s new in 3.2 and save a little bit time for you if you do not wants to install it. I will describe in Chinese.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="new-nav-menu-新导航菜单">New Nav menu 新导航菜单&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->&lt;img src="http://lh5.google.com/liuzh66/R6QKZn2WokI/AAAAAAAAAeo/ZYObo0rO5Dc/image%5B15%5D.png"
loading="lazy"
>导航菜单的名称变成了：Dashboard &amp;ndash; Resources &amp;ndash; Analyze &amp;ndash; Administration 菜单的风格稍微有一点变化。Analyze 下面可以进入 Alert Center 去查看报警信息。我觉得 3.2 毕竟是一个小的功能增进板，添加了支持 MY SQL 的支持。增强了对 Nagios 的集成。对 Nagios 的集成对它还是很有好处的，由于它自己是 Agent Based 的监控方法，而 Nagios 是 Agentless 的监控方法；集成之后通过它的 web 界面能统一管理，还是挺好的。不过和 Nagios 具体能集成到什么程度，我还没有试过。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="currently-down-resources-当前宕机资源">Currently Down Resources 当前宕机资源&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->&lt;img src="http://lh4.google.com/liuzh66/R6QK9X2WomI/AAAAAAAAAe4/iGNp8zHxnok/image%5B19%5D.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->如果所示：各种有问题的资源安装各种分类都显示出来，同实现时什么时间出的问题，持续了多久，点击放大镜后查看相关的报警信息。上图显示的是：HQ Agent 在 w2k3vm 这一 Windows 服务器上没有启动的情况，它报告了包括 hq agent 自身以及所有相关资源的都宕机的情形。同时作为一个监控系统来说，管理员最需要看到的信息可能主要包括两种：1）有那些资源出了问题；2）当前有什么样的告警事件。这里对这两类信息提供了一个非常不错的访问入口。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="live-exec-data-实时数据获取">Live Exec Data 实时数据获取&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->&lt;img src="http://lh6.google.com/liuzh66/R6QLY32WooI/AAAAAAAAAfI/JDuTMobC7IE/image%5B24%5D.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->HQ-agent 本身只能周期性的采集 matrix，在汇报给管理服务器。实时的数据采集对排错还是非常有帮助的。此功能我觉得是 3.2 版中的最好的增强。它应该是远程的让 agent 去执行一下命令在把最终结果返回到页面上：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Cpuinfo CPU信息
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Cpuperc CPU利用率
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Df 磁盘利用率
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Ifconfig 网卡ip信息
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Netstat 网络端口信息
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Top
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Who
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这些信息的获取通过agent完成所以和平台无关，即使是Window平台也能收到相同的信息。&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;h2 id="hq-health-check-管理服务器自身检查">HQ Health Check 管理服务器自身检查&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->&lt;img src="http://lh4.google.com/liuzh66/R6QLxX2WoqI/AAAAAAAAAfY/_qW9Xr0ni6w/image%5B28%5D.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->一个真正的自监控功能最好能做到对相关指标的报警处理。能设置一些条件，在不正常情况发生的时候报告管理员说出管理服务器那里有问题了。上图可以看出，hq 已经做出了第一步，能采集并且显示很多 HQ 服务器运行的状态信息。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="summary">Summary：&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->在 3.2 的发布说明中还提到它自身的扩展性也很大的增强，这一点对 hq 来说尤为重要。由于它的结构是基于代理的，当监控的设备和资源都非常多时，hq 管理服务器自身的处理能理将会成为瓶颈，如果它的处理，存储和网络上的任何一个环节出现了问题，整个监控系统就失效了。由于事件有限，目前还留下了一些问题：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Global Alert Disable是在那里设置的？
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>报警阀值的设置是否有全局设置的地方？（例如：对所有windows机器都设置一个CPU&amp;gt;80％的阀值）
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果您对以上两个问题有些答案请回复告诉我。关于HQ的其它文章，清在本blog中搜索。&lt;/li>
&lt;/ul></description></item><item><title>Build Zenoss 2.1.2 on Redhat Enterprise Linux 5</title><link>https://martinliu.cn/2008/01/30/build-zenoss-212-on-redhat-enterprise-linux-5/</link><pubDate>Wed, 30 Jan 2008 13:22:00 +0000</pubDate><guid>https://martinliu.cn/2008/01/30/build-zenoss-212-on-redhat-enterprise-linux-5/</guid><description>&lt;p>&lt;img src="http://www.zenoss.com/images/logo.gif"
loading="lazy"
> Well, it is the first time to running a RHEL 5 for me, at same time got zenoss built successfully on it. zenoss-2.1.2 was build from source, the whole process went a while since RHEL is in one of my VMware session; CPU %sy was pretty high during building source code.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h1 id="build-zenoss-212">Build zenoss-2.1.2&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->The INSTALL.txt file is good enough, my installation how-to can be really sample:&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Read INSTALL.txt
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>add zenoss user
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>start mysql
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>upload zenoss tarball to zenoss home directory
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>login as zenoss
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>untar zenoss tarball then run the following, good luck!
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h3 id="start-daemons">Start Daemons:&lt;/h3>
&lt;p>&lt;!-- raw HTML omitted -->bash$ $ZENHOME/bin/zenoss start&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->bash$ $ZENHOME/bin/zenoss status&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Then I access to Zenoss portal, got this error.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;h3 id="http-status-404---zportdmd">HTTP Status 404 - /zport/dmd&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->I reboot the RHEL server, then start mysql and zenoss. Finally, everything goes smoothly. Let&amp;rsquo;s take this nice zenoss portal.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh4.google.com/liuzh66/R6B8iX2WoeI/AAAAAAAAAdY/HOxPPiOhDZ0/image5.png" target="_blank" rel="noopener"
>&lt;img src="http://lh4.google.com/liuzh66/R6B8iX2WoeI/AAAAAAAAAdY/HOxPPiOhDZ0/image5.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->On my RHEL, mysql, snmp and python were installed with OS; other packages might installed from zenoss source tarball. I am not sure about this, you could check above to see my install log.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Install tips:&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Package dependence should be consider before you build Zenoss source code. A full RHEL install is a lazy idea to solve this problem; but it is still the best practice if you are new to both Linux and Zenoss.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Start zenoss daemons might take one minute or more. If you access to zenoss portal immediately, you could get a HTTP Status 404 error. Before you see balance stone, please be patience.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;h1 id="auto-discovery-of-devices">Auto-Discovery of Devices&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->It&amp;rsquo;s time to read ZenossAdminGuide211.pdf; BTW that&amp;rsquo;s a good document. I will go ahead to note down what I did in my testing evn. Please turn to P47, I will go from there. For sure you have something discovered, please read the following tips:&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>The Zenoss machine should have snmp installed&lt;/strong>, including the following packages:
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->As far as I know net-snmp-utils-5.3.1-19.el5 is a necessary. Without this package, you do not have ability to snmpwalk any device via SNMP protocol; in other word you can not get enough information about that remote device.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Add a right network ID&lt;/strong>, here is a example:
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>snmpwalk at least one snmp-enable device&lt;/strong>, here is a example:
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->Let&amp;rsquo;s see what I got after done all of above.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.google.com/liuzh66/R6B8p32WogI/AAAAAAAAAds/L_RLc73gmeQ/image8.png" target="_blank" rel="noopener"
>&lt;img src="http://lh6.google.com/liuzh66/R6B8p32WogI/AAAAAAAAAds/L_RLc73gmeQ/image8.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh3.google.com/liuzh66/R6B8wH2WoiI/AAAAAAAAAd8/lzmTaSebDdw/image4.png" target="_blank" rel="noopener"
>&lt;img src="http://lh3.google.com/liuzh66/R6B8wH2WoiI/AAAAAAAAAd8/lzmTaSebDdw/image4.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Zenoss has a pretty good network map, it is a flash map; you can drag things on this map. Before I end this blog, I&amp;rsquo;d like to summary my questions blow:&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>Because my RHEL installation is big enough, I don&amp;rsquo;t know what are dependence packages for Zenoss; no time to list all of them. Does have this list?
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>I&amp;rsquo;ve no idea how to configure snmpd on Solaris. What I did was just modified /etc/snmp/conf/snmpd.conf
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>How to restart snmp daemon for Solaris?
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Do you have any good blog about zenoss?
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->I will write a Chinese blog after this one to conclusion zenoss installation. Please give a hint if you have any comment.&lt;/li>
&lt;/ol></description></item><item><title>网管系统的测试工具</title><link>https://martinliu.cn/2008/01/21/trap-tools/</link><pubDate>Mon, 21 Jan 2008 17:34:00 +0000</pubDate><guid>https://martinliu.cn/2008/01/21/trap-tools/</guid><description>&lt;p>很多网络系统管理软件都有 Trap 管理的功能，在系统的安装和配置过程中；验证系统是否能正常处理 Trap 是很麻烦的事情。原因有很多，发送 trap 的设备没有，设备上的 snmp 没有启用，或者设备都正常，到网管系统的网络可能有防火墙吧 snmp 给堵住了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->为了方便的测试和配置网络管理监控系统，需要手工生产和验证 trap 的发送和接收。最近偶然在网上发现了这样几个免费（非 OSS 软件）软件工具，可以做这件事。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下载的网站是：&lt;a class="link" href="http://www.ncomtech.com/" target="_blank" rel="noopener"
>http://www.ncomtech.com/&lt;/a> 下面吧我所下载和测试的软件做一个小结，希望对您有所帮助：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Trap Receiver&lt;/strong> &lt;a class="link" href="http://www.trapreceiver.com/" target="_blank" rel="noopener"
>http://www.trapreceiver.com/&lt;/a> 是一个Windows程序非常小，安装了之后会在windows安装一个服务。程序的启动目录是C:\Program Files\Trap Receiver\TrapRcvr.exe 程序界面非常简单，如下图所示：
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R5TXj4CljQI/AAAAAAAAAdI/FPsG9LiZrXo/image%5B12%5D.png" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R5TXj4CljQI/AAAAAAAAAdI/FPsG9LiZrXo/image%5B12%5D.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->点击configure按钮后可以做一些配置：Action －－当收到某些特定的trap是出发邮件、声音等动作；logging－－把收到的trap信息按照某种格式记录在文件中；Mibs－－导入目标设备的trap文件，让这个接收器能认识到另外的trap格式。还有其他配置信息也非常简单。&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>**TrapGen **&lt;a class="link" href="http://www.ncomtech.com/trapgen.html" target="_blank" rel="noopener"
>http://www.ncomtech.com/trapgen.html&lt;/a> 顾名思义－这就是一个手工生产和发送trap的工具，是一个命令行工具。example: trapgen -d 192.168.2.3；上图中的第一条和第三条就是用这个命令发出的trap。欲知详细帮助信息，使用&amp;quot;trapgen -h&amp;quot;
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>I/F Spy&lt;/strong> &lt;a class="link" href="http://www.ncomtech.com/ifspy.html" target="_blank" rel="noopener"
>http://www.ncomtech.com/ifspy.html&lt;/a> 是一个网络接口枚举工具，它通过snmp协议去访问目标设备的IFMIB信息，显示所有IFMIB相关信息。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>UDP Listen&lt;/strong> &lt;a class="link" href="http://www.ncomtech.com/udplisten.html" target="_blank" rel="noopener"
>http://www.ncomtech.com/udplisten.html&lt;/a> &lt;strong>UDP&lt;/strong>协议的监听程序，是命令行工具，有linux和Solaris版，能用作一个debug工具。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;strong>Thingy&lt;/strong> &lt;a class="link" href="http://www.ncomtech.com/thingy.html" target="_blank" rel="noopener"
>http://www.ncomtech.com/thingy.html&lt;/a>是一个Windows下的GUI工具，能帮你监控三个SNMP指标，采集并做大于等于和小于的逻辑判断然后显示不同的信号灯。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这几个小工具都很小，都能在windows下安装和使用对网络系统监控软件的安装、配置和排错应该有一定的帮助。如果您有什好的小工具也请回复一下本文。&lt;/li>
&lt;/ul></description></item><item><title>Hyperic HQ Engerprise 3.1.4 测试报告</title><link>https://martinliu.cn/2008/01/12/hyperic-hq-engerprise-testing/</link><pubDate>Sat, 12 Jan 2008 15:26:00 +0000</pubDate><guid>https://martinliu.cn/2008/01/12/hyperic-hq-engerprise-testing/</guid><description>&lt;h2 id="多系统跨平台支持">多系统/跨平台支持&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->如下图所示，我安装了并运行了四个代理程序。HQ 的服务器是安装在我的笔记本上的是 Windows XP 平台的。HQ 管理服务器在 windows 下的安装是非常简单的，两分钟就能完成。安装包中包括了 Jboss 和 PostgreSQL。其它三个测试的代理程序分别安装在 OpenSUSE Linux 10.3 （VM），AIX 5.3 和 Solaris 10 （5.10），代理程序的安装过程非常简单，需要注意的是保证代理和管理服务器的时钟同步。否则数据收集和显示的时间会错位。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.google.com/liuzh66/R4jdaICli_I/AAAAAAAAAXw/60GWpjl3PMA/image6.png" target="_blank" rel="noopener"
>&lt;img src="http://lh6.google.com/liuzh66/R4jdaICli_I/AAAAAAAAAXw/60GWpjl3PMA/image6.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->对不同平台的数据采集是不同的，代理能根据操作系统而已采集不同的数据指标；比如 CPU 的监控指标 windows、linux，Aix 和 Sun 都有细微差别。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="dashboard-首页仪表盘">Dashboard 首页－－仪表盘&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->HQ 登陆后的首页，第一个感觉是－专业。算是一个 Portal 门户界面。页面顶端是最新的两个报警信息，和水平导航条。右边的模块有：资源搜索、保存的资源图、可用性图和最近增加的平台等。右边的模块有：自动发现、最爱资源，最近报警、控制动作问题资源和监控指标视图等。整体来看：所有的模块都可以配置、拖拽、添加和删除；您可以按照自己的喜好设置布局。对于网管来说：最近报警、和问题资源和监控指标视图应该是非常重要的；通过这些内容可以立刻了解到所关心的资源和服务的整体状况。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="浏览资源">浏览资源&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->Platforms 平台－－四个监控对象：所显示的是所有被监控对象，HQ 主要是 Agent based 的监控方式，当然也可以通过 snmp 方式监控网络设备，不过这个我没测过它监控网络设备的能力。我安装测试的是 HQ 企业版，所以我只能监控到 4 个被监控对象；当然如果是付费用户的话就可以增加被管理目标的数量了，多话钱是肯定的了；好像 HQ 是按照被监控节点的数量收钱的。测试这个企业版的目的是，浏览一下它所有的功能，下面所说的有些功能是企业版才有的开源版本是没有的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Servers 服务器－－21 被管理服务器：HQ 的自动发现功能不仅能发现到服务器上的基础资源（CPU、文件系统和网络）；还能自动发现被监控平台上的数据库、web 和 App 服务等。这些服务有的是需要一些配置才能采集到数据的，例如对数据库的监控，MySQL 需要在 HQ 服务器上输入一个 MySQL 的用户名和密码（密码不能为空），这个用户需要有能运行 status 命令的权限。Oracle 数据库需要按照 HQ 页面上的提示在数据库实例上，用 DBA 的权限运行一个命令，也建立一个用户。代理程序是通过这个用户通过 JDBC 链接到数据库上采集监控指标的。对于 Apache 来说，是需要配置 Status 模块的。HQ 也算得上是单一代理的监控方式了，这一个特性是非常重要的；和 BMC 公司的 Patrol 产品有些相似。单一代理能很好的降低被监控服务器的额外负担。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="告警事件规则">告警事件规则&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->默认情况下所有 HQ 里没有任何一个报警规则的。不过你可在它的问题资源模块上看到 OOB 次数。OOB 是 Out Of Bound 的简称，意思是超出边界，那么边界在那？边界在 Baseline 上，baseline 会在每几天算一次，它并不是平均值，某个监控资源的实际忙闲程度水平的参考面。例如如果你的 CPU 平时都不超过 30％的话，它的基线可能是 20％，如果某次采样数据是 24％了，OOB 的数量就被加一；它表明该资源的使用异常了，需要引起你的注意了。HQ 企版可以设定固定 fix 阀值，也可以设定动态阀值。所谓让很多企业级用户梦寐以求的动态阀值，其实就是比对 BaseLine 来报警的机制。HQ 的报警规则可以是：例如 CPU 使用率超出 Baseline 的 15％；那么这样 CPU 使用率的报警范围就是动态的了。报警规则的设置可以根据不同的 platform 而定，可以给某了 platform 定义一套默认的规则级应用到所有监控对象上。还能在某个监控对象上设置特殊的报警规则。报警条件可以是多条件的逻辑判断。报警事件可以每次触发时都发出，也可以在某个时间段上持续到达多少次才发出，发出的告警信息可以发给某个人或者某组人，还能在时间内升级等。显然这就是某些用户梦想中的事件压缩、峰值抑制、事件升级等功能。HQ 的企业版还能从事件上触发 Action。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="报表中心">报表中心&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->默认的报表好像是有 7 个，可以输出成 PDF，excel，csv 和 html 格式。不得不说的是 HQ 的数据采集方式应该是从 HQ 服务器上向 Agent 发起的，取得了数据后，保存在 Postgresql 数据库中。HQ 服务器端保存了所有数据，不过如果在某个时间端，HQ 服务器不能和 agent 通信的话，这段数据就是空白的。这一点可呢功能和所有其它开源软件都一样。而 CA 的 UDPM 和 BMC 的 Patrol 是不同的，Agent 采集到的数据可以短期的保存在被管服务器端；采集数据的连续性不受网络影响。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>&lt;!-- raw HTML omitted -->HQ 企业版的功能太强大了，可以与商业软件媲美；单基于 Baseline 的动态阀值报警就是 Big four 所不能提供的。不过企业版是不能用的：虽然能使用到所有功能，不过只能监控 4 个服务器。在浏览 HQ 网站文档的时候，某个功能如果后面有一个红色的星号，那么它就是企业版的功能，需要付费使用了。不过它开源版的功能已经非常不错了，而且有这么优秀的一个框架使用；能支持二次开发和扩展。下次在提供一个开源版的测试报告。&lt;/p></description></item><item><title>Top 100网络安全工具</title><link>https://martinliu.cn/2008/01/04/top-100-security-tools/</link><pubDate>Fri, 04 Jan 2008 15:25:00 +0000</pubDate><guid>https://martinliu.cn/2008/01/04/top-100-security-tools/</guid><description>&lt;p>&lt;strong>＃１&lt;a class="link" href="http://www.nessus.org/" target="_blank" rel="noopener"
>Nessus&lt;/a> : 首要的 UNIX 弱点/漏洞评估工具&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R35TJYClhdI/AAAAAAAAALI/tqT8k5EQsMc/image3" target="_blank" rel="noopener"
>&lt;img src="http://lh6.google.com/liuzh66/R35TLoClheI/AAAAAAAAALQ/QPPwyfg47tw/s144/image_thumb1.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Nessus 是最好的网络漏洞扫描工具之一，此软件最好是运行在 UNIX 上。它被持续不断地更新，有超过 11,000 的免费插件(但是需要注册或者接受 EULA)。主要的特点包括远程和本地的执行安全检查，带有 GTK 图形用户界面的 client/server 架构，一个用来写自己的插件的内置脚本语言。从 Nessus 3 开始停止开源 &lt;a class="link" href="http://software.newsforge.com/article.pl?sid=05/10/06/1716257&amp;amp;tid=132&amp;amp;tid=78&amp;amp;tid=27" target="_blank" rel="noopener"
>now closed source&lt;/a>，但是他依然是免费的除非你想要最新的插件。查看所有的漏洞扫描器 &lt;a class="link" href="http://sectools.org/vuln-scanners.html" target="_blank" rel="noopener"
>vulnerability scanners&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>＃2 &lt;a class="link" href="http://www.wireshark.org/" target="_blank" rel="noopener"
>Wireshark&lt;/a> :附着在 Internet 上的嗅探器&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh4.google.com/liuzh66/R35TgIClhrI/AAAAAAAAAM4/wixHkZNVJWA/image7" target="_blank" rel="noopener"
>&lt;img src="http://lh4.google.com/liuzh66/R35TiIClhsI/AAAAAAAAANA/t3bdb34jO4M/s144/image_thumb3.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Wireshark (在 2006 年夏之前名为&lt;a class="link" href="http://www.ethereal.com/" target="_blank" rel="noopener"
>Ethereal&lt;/a> )是一个 Unix 和 Windows 上 fantastic 的开源网络协议分析器。它能让你分析在线的网络数据和捕获的数据文件。你能方便的浏览捕获数据，深入研究到你需要级别的数据包的细节。Wireshark 还有几个强大功能包括，包括丰富的过滤显示语言和能去查看 TCP 链接重建的过程。它能支持几百种协议和网络介质类型。一个需要注意的方面是 Ethereal 现在遭受这很多可远程利用的安全漏洞，因此保持它的更新和提防在非信任的或者敌对的网络上运行它。查看所有包嗅探器 &lt;a class="link" href="http://sectools.org/sniffers.html" target="_blank" rel="noopener"
>packet sniffers&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h1 id="heading">&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;strong>＃3 &lt;a class="link" href="http://www.snort.org/" target="_blank" rel="noopener"
>Snort&lt;/a> :所有人都喜欢的开源 IDS&lt;/strong>&lt;a class="link" href="http://lh5.google.com/liuzh66/R35T7YClh7I/AAAAAAAAAO4/uouKkrzkwnQ/image22" target="_blank" rel="noopener"
>&lt;img src="http://lh3.google.com/liuzh66/R35T84Clh8I/AAAAAAAAAPA/Yler5Ex4xys/s144/image_thumb12.png"
loading="lazy"
alt="image"
>&lt;/a> 这个轻量级网络入侵检测和阻止系统擅长于 IP 网络上的流量分析和包记录。通过协议分析，内容搜索和各种预处理，Snort 能探测上千种蠕虫, 利用漏洞企图，端口扫描和其他可疑行为。Snort 使用一个弹性的基于规则的语言去描述它应该收集或者忽略的网络通信流量，和一个模块化的检测引擎。从此链接产看更多的基本分析和安全引擎，有一个 Web 用户界面来分析 Snort 告警。开源的 Snort 被一些个人、小企业和部门用的很不错。它的母公司&lt;a class="link" href="http://www.sourcefire.com/" target="_blank" rel="noopener"
>SourceFire&lt;/a>提供了一个非常全的产品线；具有很多的企业级功能和实时规则更新。它们提供了一个免费的（需注册）的 5 天延迟的规则更新源，你还能在&lt;a class="link" href="http://www.bleedingsnort.com/" target="_blank" rel="noopener"
>Bleeding Edge Snort&lt;/a>找到很多非常好的免费规则。 查看所有入侵检测系统&lt;a class="link" href="http://sectools.org/ids.html" target="_blank" rel="noopener"
>intrusion detection systems&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>＃4 &lt;a class="link" href="http://www.vulnwatch.org/netcat/" target="_blank" rel="noopener"
>Netcat&lt;/a> :网络瑞士军刀&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R35USYCliLI/AAAAAAAAAQ4/dU0lezyQvVs/image29" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R35UVYCliMI/AAAAAAAAARA/2Hj4d6RBDGo/s144/image_thumb17.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个简单的工具通过 TCP 或者 UDP 网络链接读写数据。它被设计为一个可靠的后端工具：能被直接和通过其他程序或脚本简单地驱动执行。同时，它也是一个功能丰富的网络调试和探索工具，因为它能生成几乎所有类型的你需要的网络链接，包括接受绑定了端口的外来链接。最初版本的 Netcat &lt;a class="link" href="http://seclists.org/bugtraq/1995/Oct/0028.html" target="_blank" rel="noopener"
>released&lt;/a> 是 Hobbit 在 1995 年发布的，但是不论它是多么的流行也没有被持续。它有时候很难被找到&lt;a class="link" href="http://download.insecure.org/stf/nc110.tgz" target="_blank" rel="noopener"
>nc110.tgz&lt;/a>。利用这个工具的弹性和用途去开发了很多其他的 Netcat 的实现极大的推广了这个工具- 经常的很多现代的功能都不能在原始版本中找到。其中最有趣的是 &lt;a class="link" href="http://sectools.org/tools3.html#socat" target="_blank" rel="noopener"
>Socat&lt;/a>，扩展 Netcat 去支持很多其它 socket 类型、SSL 加密、SOCKS 代理和更多。它甚至按自己的意图扩展。还有 &lt;a class="link" href="http://sourceforge.net/projects/nmap-ncat/" target="_blank" rel="noopener"
>Chris Gibson&amp;rsquo;s Ncat&lt;/a>，提供了甚至更多功能同时能保持可移植性和简洁性。其它流行的 Netcat 包括 &lt;a class="link" href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/nc/" target="_blank" rel="noopener"
>OpenBSD&amp;rsquo;s nc&lt;/a>, &lt;a class="link" href="http://farm9.org/Cryptcat/" target="_blank" rel="noopener"
>Cryptcat&lt;/a>, &lt;a class="link" href="http://www.deepspace6.net/projects/netcat6.html" target="_blank" rel="noopener"
>Netcat6&lt;/a>, &lt;a class="link" href="http://dcs.nac.uci.edu/%7Estrombrg/pnetcat.html" target="_blank" rel="noopener"
>PNetcat&lt;/a>, &lt;a class="link" href="http://tigerteam.se/dl/sbd/" target="_blank" rel="noopener"
>SBD&lt;/a>, 和 &lt;a class="link" href="http://netcat.sourceforge.net/" target="_blank" rel="noopener"
>GNU Netcat&lt;/a>。查看所有 &lt;a class="link" href="http://sectools.org/netcats.html" target="_blank" rel="noopener"
>Netcats&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>＃5 &lt;a class="link" href="http://www.metasploit.com/" target="_blank" rel="noopener"
>Metasploit Framework&lt;/a> : Hack 星球&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R35UoYCliZI/AAAAAAAAASo/OuA6ULryO7o/image%5B5%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh6.google.com/liuzh66/R35UpoCliaI/AAAAAAAAASw/0G_VO5lpS_s/s144/image_thumb%5B2%5D.png"
loading="lazy"
alt="image"
>&lt;/a> Metasploit 在它 2004 年发布的时候给安全界带来风暴。没有其它什么工具能出现在这个列表的前 15 中， Metasploit 以第五位进入榜单，超过了很多知名的开发超过 10 年的工具。它是一个高级的开源平台。The extensible model through which payloads, encoders, no-op generators, and exploits can be integrated has made it possible to use the Metasploit Framework as an outlet for cutting-edge exploitation research. It ships with hundreds of exploits, as you can see in their &lt;a class="link" href="http://metasploit.com:55555/" target="_blank" rel="noopener"
>online exploit building demo&lt;/a>. This makes writing your own exploits easier, and it certainly beats scouring the darkest corners of the Internet for illicit shellcode of dubious quality. Similar professional exploitation tools, such as &lt;a class="link" href="http://sectools.org/tools2.html#impact" target="_blank" rel="noopener"
>Core Impact&lt;/a> and &lt;a class="link" href="http://sectools.org/tools4.html#canvas" target="_blank" rel="noopener"
>Canvas&lt;/a> already existed for wealthy users on all sides of the ethical spectrum. Metasploit simply brought this capability to the masses. 查看所有 &lt;a class="link" href="http://sectools.org/sploits.html" target="_blank" rel="noopener"
>vulnerability exploitation tools&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>如需了解全列表，请参考源列表页面：&lt;a class="link" href="http://sectools.org/" target="_blank" rel="noopener"
>http://sectools.org/&lt;/a>&lt;/strong>&lt;/p></description></item><item><title>看图学话，学ITIL(v2)系列 之1</title><link>https://martinliu.cn/2007/12/31/itilv2/</link><pubDate>Mon, 31 Dec 2007 14:13:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/31/itilv2/</guid><description>&lt;h5 id="前言">前言&lt;/h5>
&lt;p>&lt;!-- raw HTML omitted -->在 2007 年 ITILv3 推出之后，ITIL 这个概念从最佳 Best practice 实践变成最好 Good practice 实践。从此称呼的转变能够看出 ITIL 思想的普及化、平民化。ITIL v2 已经使用了快 20 多年了，看看如今的 ITIL 的用户，成熟度依旧参差不齐。有的已开始琢磨着如何完善所有 ITIL Support 流程并开展实施 ITIL Delivery 中的各个流程；有的已经在开始实施帮助台并建立事件和问题管理；有的依然处于扫描阶段。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在 ITILv3 即将普及的 2008 年，v2 对于各类用户来说还是基础，是最可实施的框架。v2 是 v3 的核心内容，为了及时的升级到 v3，熟练掌握 v2 的概念是当务之急。下个月公司有 ITILv3 升级的认证考试，本系列文章可能算是一个 v2 的复习笔记吧。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh4.google.com/liuzh66/R3j5IoClhRI/AAAAAAAAAJo/GKvNXZ7OEvQ/splash%5B4%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh4.google.com/liuzh66/R3j5IoClhRI/AAAAAAAAAJo/GKvNXZ7OEvQ/s144/splash%5B4%5D.jpg"
loading="lazy"
alt="splash"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->一图胜过千言，本系列通过对一些经典图形的回顾来复习 v2 的部分概念。由于是看图学话版，所以目标观众是 ITIL 的学龄前儿童呵呵，学习内容是 ITIL Delivery。如果您已经是小学以上水平，请忽略:)&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h5 id="itil-service-delivery-介绍">ITIL Service Delivery 介绍&lt;/h5>
&lt;p>&lt;!-- raw HTML omitted -->ITIL 的全称是 IT Infrastructure Library，开发于 1980 年；成果要素：Public domain framework 公共领域框架－放之四海皆准；Best practice framework 最佳事件框架－现在成最好事件了；De facto standard 事实上的标准－90 年 ITSM 推广； Quality approach 质量解决方案－IT 质量保障；itSMF IT 服务管理论坛。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R3j5s4ClhTI/AAAAAAAAAJ4/gPPEBI8BEHg/fig1_1%5B3%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R3j5s4ClhTI/AAAAAAAAAJ4/gPPEBI8BEHg/fig1_1%5B3%5D.gif"
loading="lazy"
alt="fig1_1"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Jigsaw diagram ～ 锯齿图 OGC 设计了这个图，用此来说明 ITIL 有 5 个主要部分组成；每个部分之间都相互接口并联系着。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R3j504ClhVI/AAAAAAAAAKI/0_2r9JBru3I/fig1_2%5B3%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R3j504ClhVI/AAAAAAAAAKI/0_2r9JBru3I/fig1_2%5B3%5D.gif"
loading="lazy"
alt="fig1_2"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Service Delivery; the coverage ～服务交付涵盖如图 5 个不同流程。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh5.google.com/liuzh66/R3j594ClhXI/AAAAAAAAAKY/mA7zH6B9Rf4/fig1_3%5B3%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R3j594ClhXI/AAAAAAAAAKY/mA7zH6B9Rf4/fig1_3%5B3%5D.gif"
loading="lazy"
alt="fig1_3"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->BS15000 Service Management processes ～ BS1 万 5 中的服务流程图示。它涵盖了 ITIL 的所有流程，以控制为中心的增强版。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h5 id="fig2_1httplh5googlecomliuzh66r3j6e4clhziaaaaaaaaakohzqpnmtdjnifig2_15b35dgifhttplh5googlecomliuzh66r3j6e4clhziaaaaaaaaakohzqpnmtdjnifig2_15b35d">&lt;a class="link" href="http://lh5.google.com/liuzh66/R3j6E4ClhZI/AAAAAAAAAKo/HzqPNMtDjnI/fig2_1%5B3%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh5.google.com/liuzh66/R3j6E4ClhZI/AAAAAAAAAKo/HzqPNMtDjnI/fig2_1%5B3%5D.gif"
loading="lazy"
alt="fig2_1"
>&lt;/a>&lt;/h5>
&lt;p>&lt;!-- raw HTML omitted -->Relationship between Change Management, Configuration Management, Capacity Management and Release Management ～变更、配置、能力和发布管理之间的关系。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh4.google.com/liuzh66/R3j6_oClhbI/AAAAAAAAAK4/U0FWq6YXMRk/fig3_1%5B4%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh4.google.com/liuzh66/R3j6_oClhbI/AAAAAAAAAK4/U0FWq6YXMRk/fig3_1%5B4%5D.gif"
loading="lazy"
alt="fig3_1"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;em>Process improvement model ～&lt;/em> 流程改进模型：发展方针和业务目标，评估、流程改变和指标追踪。&lt;/p></description></item><item><title>OTRS.ORG，it is time to check it out；不得不：）</title><link>https://martinliu.cn/2007/12/27/otrs/</link><pubDate>Thu, 27 Dec 2007 02:12:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/27/otrs/</guid><description>&lt;p>一贯喜欢按照 Google 的指引在互联网上穿梭的你，是否发现了下面的这个现象。如果你搜索 itil，无论选择所有网页、中文网页还是简体中文网页；你是否发现了在右边的赞助商连接中，OTRS.org 总是能出现在第四个。OTRS.ORG 是什么？和 ITIL 有什么关系？&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://lh6.google.com/liuzh66/R3MJ_YClhPI/AAAAAAAAAJY/q27YWv9OFMs/image%5B7%5D" target="_blank" rel="noopener"
>&lt;img src="http://lh6.google.com/liuzh66/R3MJ_YClhPI/AAAAAAAAAJY/q27YWv9OFMs/image%5B7%5D.png"
loading="lazy"
alt="image"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->热衷于开源 ITSM 的我不得不揭示这些答案。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h1 id="什么是-otrs">什么是 OTRS&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->这是一个开始于 2001 年的开源项目。OTRS 是 Open Ticket Request System 的缩写。它的老家在&lt;a class="link" href="http://www.otrs.org" target="_blank" rel="noopener"
>www.otrs.org&lt;/a>；下面是来自它首页的简介：&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://otrs.org/demo/" target="_blank" rel="noopener"
>&lt;img src="http://otrs.org/images/screen-1.1/zoom-s.gif"
loading="lazy"
alt="demo screenshot"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OTRS is an &lt;em>O_pen source _T_icket _R_equest _S_ystem (also well known as _trouble ticket system&lt;/em>) with many features to manage customer telephone calls and e-mails. The system is built to allow your support, sales, pre-sales, billing, internal IT, helpdesk, etc. department to react quickly to inbound inquiries. Do you receive many e-mails and want to answer them with a team of agents? You&amp;rsquo;re going to love the OTRS! It is distributed under the &lt;a class="link" href="http://www.gnu.org/copyleft/gpl.txt" target="_blank" rel="noopener"
>GNU General Public License (GPL)&lt;/a> and tested on Linux, Solaris, AIX, FreeBSD, OpenBSD, Mac OS 10.x and Windows. The &lt;a class="link" href="http://www.otrs.de/" target="_blank" rel="noopener"
>((otrs))&lt;/a> company provides commercial services (e.g. support, consulting, training, pre-build-systems, etc.) for the OTRS (&lt;a class="link" href="http://www.otrs.com/" target="_blank" rel="noopener"
>English&lt;/a> and &lt;a class="link" href="http://www.otrs.de/" target="_blank" rel="noopener"
>German&lt;/a>). Try our &lt;a class="link" href="http://otrs.org/demo/" target="_blank" rel="noopener"
>demo system&lt;/a> to get an impression of this kind of magic.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->从这个简介中可以看出，这就是著名的‘问题单管理系统’；用来管理用户的电话或者邮件的请求。它能帮你的很快的受理各种问题和查询。比方说很多企业的 IT 支持部门，大多数都是工作在救火队模式下；对于期待问题解决的用户来说，也只能做到把奶喂给会哭的孩子；往往 IT 支持部门分身乏术，好像天天都处于缺奶的状态。对于 IT 支持或者运维部门的挂历者来说，他们也很难说出：我的员工很忙，都忙于什么事情。显然这是一种缺乏管理，缺乏流程的状态；不过要对这种局面进行管理，提高管理往往是非常难。最难的是在跨出第一步：记录，跟踪，处理所有问题。来自 OTRS 的问题：您是不是收到很多 email（或者电话），并且希望通过一个支持团队回答？那么你将爱上 OTRS!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OTRS 是一个在 GPL 许可证下被分发的软件，被在 Linux, Solaris, AIX, FreeBSD, OpenBSD, Mac OS 10.x 和 Windows 下测设过。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.otrs.de/" target="_blank" rel="noopener"
>((otrs))&lt;/a> 公司提供 OTRS 的技术支持、咨询、培训、安装等商业服务。由于这个软件是德国人开发的，所以他们提供英语和德语的服务。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我跟踪这个项目大概有一年左右的时间，亲眼目睹了它从一个普通的问题单管理系统变为一个兼容 ITIL 的服务台工具的过程。它从 07 年 4 月的它发布了第一个 ITIL 兼容的版本 OTRS::ITSM 1.0 BETA2；这应该也是开源领域里的一个大事件吧，第一个像样的开源 ITSM 解决方案横空初始。按照它官方的声明，它做为 OTRS 的一个重要的插件（我是这么理解的，或者说是扩展模块）能支持 ITIL 中的事件管理、问题管理和配置管理/cmdb。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h1 id="otrs-有哪些功能">OTRS 有哪些功能&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->详细的功能描述在&lt;a class="link" href="http://otrs.org/feature/" target="_blank" rel="noopener"
>http://otrs.org/feature/&lt;/a>&lt;!-- raw HTML omitted -->我简单总结以下几点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>纯Web用户界面支持包括简体中文，繁体中文在内的10＋种语言，能够灵活定制界面，支持附件，支持单点登陆。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>邮件接口，支持MIME附件，能自动回复，自动根据邮件头分派邮件，自动邮件提示用户Ticket状态的变化。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Ticket功能，定义不同的受理队列，支持Ticket的锁定、回复、历史、优先级、受理时间计算、批量处理、等待等操作。支持全文检索，工作量和访问列表控制。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>系统功能，按照日历时间计算SLA，提供LDAP和SQL数据库认证用户，自定义订单号格式，数据库支持MySQL, PostgeSQL, MaxDB/SAPDB, Oracle and DB2，前端和后台都支持UTF-8字符集
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>系统架构图 &lt;a class="link" href="http://otrs.org/images/BigPicture.gif" target="_blank" rel="noopener"
>http://otrs.org/images/BigPicture.gif&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;h1 id="如何使用-otrs">如何使用 OTRS&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->下载和安装都非常简单，您可以参考它们的官方文档，文档非常详细，能看出德国人的细严谨的风格。下载网址： &lt;a class="link" href="http://otrs.org/download/" target="_blank" rel="noopener"
>http://otrs.org/download/&lt;/a> 文档： &lt;a class="link" href="http://doc.otrs.org/2.2/en/html/" target="_blank" rel="noopener"
>http://doc.otrs.org/2.2/en/html/&lt;/a> 安装说明：选择一个文档中支持的操作系统，建议 Linux；如果是新手而且对 Perl，apache 和 mysql 不熟悉，建议直接选择完全安装；下载安装包，参考文档安装，使用。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h1 id="后记">后记&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->OTRS 一个非常经典的项目，德国工艺，德国品质保证～～～ Oops 怎么听起来像是卖假木地板或者家具的广告呵呵！！个人非常喜欢此项目，相信您用了之后不会后悔；真的后悔了也别和我联系哈:-) have fun ～～&lt;/p></description></item><item><title>如何配置OpenNMS中的 Path outage －路径失效</title><link>https://martinliu.cn/2007/12/23/opennms-path-outage/</link><pubDate>Sun, 23 Dec 2007 12:20:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/23/opennms-path-outage/</guid><description>&lt;p>这个功能是是 1.3.2 之后加入的。它解决的问题是：当 OpenNMS 系统和被监控节点之间的网络路径失效了，或者网络链路 down 了，那么 OpenNMS 就需要抑制发送这个节点的告警。例如，如果一个广域网链路 down 了，所有由这个链路连接的远程站点的所有节点就都看起来 down 了。因为你将会得到一个路由器上远端链路无响应的告警，而不需要得到在这个路由器后所有节点 Down 的告警。如果当一个远程节点不响应了，OpenNMS 会测试一下那个远程路由器广域网接口的 ip，通过对这个 ip 的测试 OpenNMS 觉得是否该发出此节点 Down 的告警。OpenNMS 测试的这个节点叫做此节点的 Critical Path IP Address（关键路径 Ip 地址）。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->给一个节点配置 Path Outage&lt;!-- raw HTML omitted -->在 OpenNMS 的节点配置上，点击 Admin, 点击 Configure Path Outage，输入对于这个节点来说关键的 ip 地址。点击 Submit 按钮。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->配置基于规则的 Path outage&lt;!-- raw HTML omitted -->可以为一组节点配置一个规则。在总导航条上选中 Admin，Configure Notifications，点击 Configure Path Outages，在 Define the Critical Path 下面输入一个 Ip 地址，例如：192.168.0.1（这种格式）；在 Current Rule 下面输入地址范围，例如：IPADDR IPLIKE 192.168.0.*；可以选中 Show matching node list 后的 box，点击 Validate Rule Results 连接；在下面的页面可以查询到受那个关键 Ip 地址所影响的所有节点；最后点击 Finish 按钮完成配置。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->查看 Path Outage&lt;!-- raw HTML omitted -->在总导航条上选中 Path Outages，在页面中你可以看到你配置的所有 Path Outages 的规则。&lt;!-- raw HTML omitted -->这个文章基本上翻译的是&lt;a class="link" href="http://www.opennms.org/index.php/Path_Outage_How-To" target="_blank" rel="noopener"
>http://www.opennms.org/index.php/Path_Outage_How-To&lt;/a> 只是觉得这是个不错的功能，所以就大概翻译了一下，希望对感兴趣的朋友们有帮助。由于手头硬件环境的限制，我还没有真实测试过这个功能，如果您对此功能做了什么测试的话，也欢迎和我交流，请留言或者或发邮件给我。&lt;/p></description></item><item><title>如何使用OpenNMS中的StrafePing功能</title><link>https://martinliu.cn/2007/12/21/opennms-strafeping/</link><pubDate>Fri, 21 Dec 2007 07:14:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/21/opennms-strafeping/</guid><description>&lt;p>自从 1.3.7 之后 OpenNMS 加入了 Smokeping 功能，取名为 StrafePing。从此 OpenNMS 也成了 Smokeping 的银牌赞助商。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>安装：&lt;/em>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>StafePing 做为一个 Poller 默认被安装在 1.3.7 后的软件中，不需要单独安装和配置。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>配置：&lt;/em>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>没有单独的配置文件，相关的配置信息需要修改文件： poller-configuration.xml 中的相关部分。需要在 标记中加入需要使用的 Ip 地址范围。启用之后 StrafePing 做为一个被监控的服务显示在这个节点上。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>默认安装 OpenNMS 并不使用这个服务，是为了减小网络流量；推荐根据 OpenNMS 硬件的能力只对部分节点做这种监控。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>使用：&lt;/em>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>需要产品 StrafePing 的图形有两种方式。1）在 OpenNMS 首页上，点击右侧的 Resources Graphs，选中产看的机器，在 Response Time 下面的列表中选中需要产看的 Ip 地址，点击 Submit，即可产看到图形。2）在节点产看页面，选中 Resources Graphs，在 Response Time 下面的列表中选中需要产看的 Ip 地址，点击 Submit，即可产看到图形。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>**如何想看懂 StafePing****的图**&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>请参考我以前的 blog &lt;a class="link" href="http://lzheng.blogspot.com/2007/02/smokeping-rttround-trip-time-tcp-tcp.html" target="_blank" rel="noopener"
>http://lzheng.blogspot.com/2007/02/smokeping-rttround-trip-time-tcp-tcp.html&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>参考 Smokeping 的网站&lt;a class="link" href="http://oss.oetiker.ch/smokeping/doc/reading.en.html" target="_blank" rel="noopener"
>http://oss.oetiker.ch/smokeping/doc/reading.en.html&lt;/a>&lt;/p></description></item><item><title>发送告警短信的方法，德国工艺服了</title><link>https://martinliu.cn/2007/12/14/gsm-modem-alert-sms/</link><pubDate>Fri, 14 Dec 2007 17:15:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/14/gsm-modem-alert-sms/</guid><description>&lt;p>在 OpenNMS 的邮件组中偶然发现的这个解决方案，利用这个方案你可以用串口连接外置的 GSM modem 来发送短信。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个方案的名称叫做：SMS Server Tools 网址在－&amp;gt; &lt;a class="link" href="http://www.meinemullemaus.de/smstools/index.html" target="_blank" rel="noopener"
>http://www.meinemullemaus.de/smstools/index.html&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->工作原理 －&amp;gt; &lt;a class="link" href="http://www.meinemullemaus.de/smstools/slideshow/page1.html" target="_blank" rel="noopener"
>http://www.meinemullemaus.de/smstools/slideshow/page1.html&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->据说是可以运行在任何平台上，能支持很多设备，不过我没用试过，记录一下日后可能有用。&lt;/p></description></item><item><title>如何用通过OpenNMS监控Windows 服务器</title><link>https://martinliu.cn/2007/12/14/opennms-monitoring-ms-windows/</link><pubDate>Fri, 14 Dec 2007 11:34:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/14/opennms-monitoring-ms-windows/</guid><description>&lt;p>OpenNMS 可以监控可用性和性能参数。下面看看 OpenNMS 监控 Windows 服务器的三种情况。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第一种情况：&lt;!-- raw HTML omitted -->Windows 机器上没有安装 SNMP 服务，在自动发现了这个节点后，它会被加入节点列表，之后它被定期的轮询。如果这个节点断网了，OpenNMS 会报警；同时这个节点的可用性被计算。自动发现还会发现这个机器上的服务。ICMP 是肯定会有的，还可能有 http 等其他的服务；这些服务也会被定时的轮询，如果某个服务停了，这个节点的整个的可用性受到影响。这种情况下该节点的所有服务的响应时间会被 OpenNMS 收集并保持历史数据。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第二种情况：&lt;!-- raw HTML omitted -->安装了 SNMP 服务。先说一下 windows 服务的安全性，默认情况下 public 是默认的只读密码；为了更加安全可以配置其他的只读密码，并指定某些特定的 IP 才能访问这个节点。这个策略在 Windows 的觉策略中很容易实现，或者说建议使用域控制器来管理这个策略，比较方便。假定 OpenNMS 能访问该节点的 snmp 服务的情况下。这些数据会增加：SNMP Attributes；在选择了资源图后，可以看到 snmp 的节点数据和接口数据。进入后可以看到，其实收集 的是一个 tcp／ip 接口上基本的信息：流量，连接数，丢包，错包等。个人认为流量是个最有用的数据，特别是对于一些简单的 web/ftp 服务器也就够用了。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第三种情况：&lt;!-- raw HTML omitted -->我们需要监控到操作系统的性能数据 cpu/disk/RAM 等。就需要安装一个 snmp 代理，这个代理可以提供这些信息，opennms 才能通过 snmp 协议收集这些数据。需要到下面网址下载一个免费的 snmp 代理，当然这个产品也有收费版本：http://www.wtcs.org/informant/download.htm 这个代理很小需要在 windows 机器上安装一下。默认情况下 OpenNMS 的对 windows 采集模板中包含了对 cpu/disk/ram 等数据的采集，等到下一次 OpenNMS 在采集这个机器的时候相关数据就会被显示在节点 snmp 数据下面。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这里是通过这个免费的 snmp 代理能采集到的数据：&lt;!-- raw HTML omitted -->/Program Files/SNMP Informant/standard/mibs/informant-std-tree.txt&lt;!-- raw HTML omitted -->&amp;ndash;standard(1.3.6.1.4.1.9600.1.1)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;logicalDiskTable(1)&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash;logicalDiskEntry(1) [lDiskInstance]&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n InstanceName lDiskInstance(1)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskPercentDiskReadTime(2)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskPercentDiskTime(3)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskPercentDiskWriteTime(4)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskPercentFreeSpace(5)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskPercentIdleTime(6)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskQueueLength(7)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskReadQueueLength(8)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskWriteQueueLength(9)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskSecPerRead(10)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskSecPerTransfer(11)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskAvgDiskSecPerWrite(12)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskCurrentDiskQueueLength(13)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskBytesPerSec(14)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskReadBytesPerSec(15)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskReadsPerSec(16)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskTransfersPerSec(17)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskWriteBytesPerSec(18)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskDiskWritesPerSec(19)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskFreeMegabytes(20)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 lDiskSplitIOPerSec(21)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;memory(2)&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryAvailableBytes(1)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryAvailableKBytes(2)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryAvailableMBytes(3)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryCommittedBytes(4)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryCacheBytes(5)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryCacheBytesPeak(6)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPageFaultsPerSec(7)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPagesInputPerSec(8)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPagesOutputPerSec(9)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPagesPerSec(10)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPoolNonpagedBytes(11)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPoolPagedBytes(12)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memoryPoolPagedResidentBytes(13)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memorySystemCacheResidentBytes(14)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memorySystemCodeResidentBytes(15)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memorySystemCodeTotalBytes(16)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memorySystemDriverResidentBytes(17)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 memorySystemDriverTotalBytes(18)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;networkInterfaceTable(3)&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash;networkInterfaceEntry(1) [netInstance]&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n InstanceName netInstance(1)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netBytesReceivedPerSec(2)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netBytesSentPerSec(3)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netBytesTotalPerSec(4)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netCurrentBandwidth(5)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netOutputQueueLength(6)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsOutboundDiscarded(7)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsOutboundErrors(8)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsReceivedDiscarded(9)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsReceivedErrors(10)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsReceivedUnknown(11)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsReceivedPerSec(12)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsSentPerSec(13)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 netPacketsPerSec(14)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;objects(4)&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 objectsProcesses(1)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 objectsThreads(2)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;processorTable(5)&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash;processorEntry(1) [cpuInstance]&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n InstanceName cpuInstance(1)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuPercentDPCTime(2)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuPercentInterruptTime(3)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuPercentPrivilegedTime(4)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuPercentProcessorTime(5)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuPercentUserTime(6)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuAPCBypassesPerSec(7)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuDPCBypassesPerSec(8)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuDPCRate(9)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuDPCsQueuedPerSec(10)&lt;!-- raw HTML omitted -->| +&amp;ndash; r-n Gauge32 cpuInterruptsPerSec(11)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash;system(6)&lt;!-- raw HTML omitted -->|&lt;!-- raw HTML omitted -->+&amp;ndash; r-n Gauge32 systemSystemUpTime(1)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最后记得在看看这个许可证文件：&lt;!-- raw HTML omitted -->Program Files/SNMP Informant/standard/license.txt&lt;!-- raw HTML omitted -->LICENSE.TXT&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->FREE OF CHARGE SOFTWARE PROGRAM LICENSE AGREEMENT for&lt;!-- raw HTML omitted -->SNMP INFORMANT STANDARD EDITION (The Software)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Copyright(c) 2005, Informant Systems, Inc. (&lt;a class="link" href="https://www.informant-systems.com" target="_blank" rel="noopener"
>www.informant-systems.com&lt;/a>), and&lt;!-- raw HTML omitted -->Copyright(c) 2003-2005, Williams Technology Consulting Services (&lt;a class="link" href="https://www.wtcs.org" target="_blank" rel="noopener"
>www.wtcs.org&lt;/a>)&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->Product names used in this document are trademarks of their respective owners.&lt;!-- raw HTML omitted -->* IMPORTANT-PLEASE READ CAREFULLY BEFORE INSTALLING THE SOFTWARE.&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;!-- raw HTML omitted -->后面略&amp;hellip;.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在安装了 snmp 代理之后，我们可以看到 OpenNMS 可以帮助我们完成 windows 服务器的可用性和性能管理。&lt;/p></description></item><item><title>OpenNMS的Yum的安装方式，安装简单了很多</title><link>https://martinliu.cn/2007/12/13/opennms-yum-install/</link><pubDate>Thu, 13 Dec 2007 10:14:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/13/opennms-yum-install/</guid><description>&lt;p>OpenNMS 网站的安装文档：&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.opennms.org/index.php/Installation:Yum" target="_blank" rel="noopener"
>http://www.opennms.org/index.php/Installation:Yum&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>下面是我在一个 CentOS4 的机器上按照上面文档安装的。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>[root@jng-hkg-48-dyn3328831 ~]# yum list opennms&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Repository opennms-stable-common is listed more than once in the configuration&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Repository opennms-stable-rhel4 is listed more than once in the configuration&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Setting up repositories&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Reading repository metadata in from local files&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Available Packages&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>opennms.noarch 1.3.10-0.8030.snapshot opennms-snapshot&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Dependencies Resolved&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>=============================================================================&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Package Arch Version Repository Size&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>=============================================================================&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Installing:&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>opennms noarch 1.3.10-0.8030.snapshot opennms-snapshot-common 5.0 k&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Installing for dependencies:&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>iplike i386 1.0.6-1 opennms-snapshot-rhel4 10 k&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>jdk i586 2000:1.5.0_13-fcs opennms-snapshot-common 46 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>jicmp i386 1.0.4-1 opennms-snapshot-rhel4 43 k&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>opennms-core noarch 1.3.10-0.8030.snapshot opennms-snapshot-common 47 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>opennms-webapp-jetty noarch 1.3.10-0.8030.snapshot opennms-snapshot-common 27 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>postgresql i386 7.4.17-1.RHEL4.1 update 2.0 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>postgresql-server i386 7.4.17-1.RHEL4.1 update 3.0 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Transaction Summary&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>=============================================================================&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Install 8 Package(s)&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Update 0 Package(s)&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Remove 0 Package(s)&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Total download size: 125 M&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Is this ok [y/N]: y&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>local all all trust&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>host all all 127.0.0.1/32 trust&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>host all all ::1/128 trust&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>tcpip_socket = true&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>isten_addresses = &amp;rsquo;localhost&amp;rsquo; (这一行加入了好些数据库启动不了了，去掉就行了，不知原因)&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>破门而入Zenoss总部–Break in at Zenoss HQ</title><link>https://martinliu.cn/2007/12/07/zenoss-21-beta/</link><pubDate>Fri, 07 Dec 2007 03:01:00 +0000</pubDate><guid>https://martinliu.cn/2007/12/07/zenoss-21-beta/</guid><description>&lt;p>Zenoss 2.1 Beta 版有什么新功能，看了这部三分钟的电影您就能知道了：&lt;a class="link" href="http://content.screencast.com/media/c01d3364-2df0-4ccd-90f8-964f9268c326_ee342243-dec3-4aaf-bb9e-c82f06220438_static_0_0_Zenoss" target="_blank" rel="noopener"
>http://content.screencast.com/media/c01d3364-2df0-4ccd-90f8-964f9268c326_ee342243-dec3-4aaf-bb9e-c82f06220438_static_0_0_Zenoss&lt;/a> Beta 2&lt;em>1 Compromised.wmv 这部电影使用了碟中谍的背景音乐，和星际的片尾字幕显示。为了方便大家的观看，下面是片中部分台词&lt;!-- raw HTML omitted -->赶快进入看看能找到什么？Zenoss 在那，它在哪？就在这，打开门来看看是否有一 Zenoss2.1 bate 正在运行？快来看看这什么东西，干嘛的？这什么玩意？我不确定我能做这事！这是什么？看上去是一个地图么？Google Map，这是 Google Map 么？对啊，是 Google Map ～这些绿色的圆点是什么？来点击一下看看～看上去像是显示了一个数据中心之类的东西！Locations ～哦!你可以拖拽这些东西？是的～这看上去，好像布局是可以配置的？哦 My god！哦你可以单击来选择一个最喜欢的布局？是啊，来看看～哇哦～～看这些黄色的按钮，他们是图标还是按钮？来点击一下看看先！这就来到了事件窗口了～来看看这个网络 map 怎么样？这些玩意还真的是浮动的！！非常 cool！这个小企鹅是个啥？这个可能是个 Linux 服务器～哦，你可以告诉我 windows 服务器是啥，那个是 windows 服务器的图标？哦 My God！！！你可以点击之后看到一个小圈在上面。哇！！是在是 cool！！我喜欢它！！&lt;!-- raw HTML omitted -->在拍摄这个电影期间没有 Zenoss 的员工受伤，如需更多 zenoss Beta 2.1 的信息请联系我们&lt;a class="link" href="http://www.zenoss.com/" target="_blank" rel="noopener"
>www.zenoss.com&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**&lt;em>观后感：&lt;/em>&lt;/em>*&lt;!-- raw HTML omitted -->一个貌似比较无知比较神经质傻哥们对 Zenoes 的新特色进行了一番探索，一个开发人员尝试给他做了一个演示。从一定程度上看出 Zenoss 开发人员比较兴奋，从侧面可以看出他们比较 happy 比较喜欢他们的工作，喜欢这个产品。我想这可能是一个产品创造性的主要源泉。开源软件人的创造性大于商业软件，商业软件是金钱驱动的，是商业；我觉得商业软件的开发人员很难把自己的创作性投入产品中，起码在中国是这样。&lt;!-- raw HTML omitted -->关于 Zenoss 2.1，废话少说最快的体验方法莫过于直接使用它。一种不需要安装的方式是直接下载安装好的 VMWare 虚拟机。你只需要到 VMWare 下载一个 VMWare Player，在下载这个 Zenoss 的虚拟机压缩文件就成：&lt;a class="link" href="http://nchc.dl.sourceforge.net/sourceforge/zenoss/zenoss-2.1.1-x86.vmware.zip" target="_blank" rel="noopener"
>http://nchc.dl.sourceforge.net/sourceforge/zenoss/zenoss-2.1.1-x86.vmware.zip&lt;/a>下载并且解压缩后您就可以使用了。它是使用 DHCP 的在启动之后就能在 root 登录的 console 上看到登录的网址，请登录端口 8080 的那一个。登录密码是 admin/zenoss，have fun ～～～&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;em>&lt;strong>功能点评：&lt;/strong>&lt;/em>&lt;!-- raw HTML omitted -->先请看：&lt;a class="link" href="http://www.zenoss.com/community/code/zenoss-2.1/zenoss-core-2-1" target="_blank" rel="noopener"
>http://www.zenoss.com/community/code/zenoss-2.1/zenoss-core-2-1&lt;/a> 文中提到的电影下载自本页。我仅仅感受了一下界面并没有深入功能。就界面上讲，我觉得他们做的非常好。界面上的每一块基本上都是可以伸缩和隐藏的，好像在非 IE 的浏览器里显示的更好。主页上的 Dashboard 是可以配置的象 MSN Space 的页面一样的定制方式。Google Map 的引入使人眼前一亮，我曾经在 OpenNMS，Cacti，Unicenter 中尝试 Map 功能;Zenoss 在这个功能上创意和功能都大大超出了其他产品。他的网络地图怎一个 cool 字了得，做到这个份上对于 3 层网络拓扑图来说算是一种很高的境界了。&lt;!-- raw HTML omitted -->我准备使用的是它的自动发现功能和对 JXM 监控的功能。如果您对这个软件有什么心得的话别告诉我。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->***后记：_**&lt;!-- raw HTML omitted -->我仔细看了一下 Zenoss.com 网站，发现两年之内变化还是蛮大的。最大的方面是在它提供的技术支持和服务上。Zenoss Enterprise Edition 的 Zenoss Subscriptions 定价从 66$到150$不等，同时还提供了培训、实施和定制等服务。前一段时间看到的相关新闻中提到了 Zenoss 可以列入 10 大最赚钱的开源软件之一（网管类）。他们的 Zenoss 很 happy，他们公司也很 happy。还真是鱼和熊掌兼得。&lt;/p></description></item><item><title>GLPI资产管理系统－－功能列表</title><link>https://martinliu.cn/2007/11/08/glpi-features-list/</link><pubDate>Thu, 08 Nov 2007 14:16:00 +0000</pubDate><guid>https://martinliu.cn/2007/11/08/glpi-features-list/</guid><description>&lt;p>&lt;strong>常规&lt;/strong>&lt;!-- raw HTML omitted -->_ 多用户管理多种用户认证方式（local, LDAP, Active Directory, Pop/Imap, CAS)&lt;!-- raw HTML omitted -->_ 权限系统&lt;!-- raw HTML omitted -->_ 分页系统&lt;!-- raw HTML omitted -->_ 多语言支持（包括中文的 14 种语言支持）&lt;!-- raw HTML omitted -->_ 搜索模块显示字段列表配置&lt;!-- raw HTML omitted -->_ pdf 和 cvs 格式导出数控&lt;!-- raw HTML omitted -->_ SQL 格式保存和恢复&lt;!-- raw HTML omitted -->_ 数据 XML 格式导&lt;!-- raw HTML omitted -->_ 出可配置的下拉框系&lt;!-- raw HTML omitted -->_ 统更新检查&lt;!-- raw HTML omitted -->_ UTF8 界面&lt;!-- raw HTML omitted -->_ HTML4.0.1 兼容&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>资产清单&lt;/strong>&lt;!-- raw HTML omitted -->_ 从 OCS Inventory NG 导入资产数据&lt;!-- raw HTML omitted -->_ 计算机资产清单管理以及与设备的连接关系，TOC 总拥有成本&lt;!-- raw HTML omitted -->_ 管理显示器资产清单管理以及与计算机的关联关系&lt;!-- raw HTML omitted -->_ 网络设备资产清单管理以及和设备之间的连接(IP, Mac adresses, VLANs&amp;hellip;).&lt;!-- raw HTML omitted -->_ 打印机资产清单管理以及和计算机的连接关系，耗材，以及耗材使用的阀值报警&lt;!-- raw HTML omitted -->_ 其他外设的资产清单(scanners, graphical tables&amp;hellip;)，管理和计算机的连接关系&lt;!-- raw HTML omitted -->_ 软件资产清单管理，许可证和过期时间管理安装物理位置（房间，楼层、、）分配&lt;!-- raw HTML omitted -->_ 硬件商业和财务信息管理（采购，合同等、、）&lt;!-- raw HTML omitted -->_ 管理硬件的状态&lt;!-- raw HTML omitted -->_ 与外部其他应用的接口管理&lt;!-- raw HTML omitted -->_ 资产清单信息的更改历史管理&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>跟踪&lt;/strong>&lt;!-- raw HTML omitted -->_ 跟踪资产清单中各种组件的故障请求单&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Final user&lt;/strong>&lt;!-- raw HTML omitted -->Final user frontend for intervention demand Mail tracking of the intervention demand feature Interventions history consultation Possibility of adding comments at the request of intervention&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Technicians&lt;!-- raw HTML omitted -->&lt;/strong> Interventions demands priority management Tracking of interventions demands Mail tracking of interventions Assignment of interventions demands Opening/Closing/Re-opening of interventions Assignement of a real time of interventions Realised interventions history Displaying of the interventions to realise by a technician Displaying of the history of the interventions for a given hardware Posting of the interventions to be realized by technician Posting of the history of the interventions for a given material Management of plannings of intervention&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->统计&lt;!-- raw HTML omitted -->_ 统计报表，月报，年报&lt;!-- raw HTML omitted -->_ 全局&lt;!-- raw HTML omitted -->_ 按技术人员和企业按硬件，位置或者类型&lt;!-- raw HTML omitted -->_ 按用户&lt;!-- raw HTML omitted -->_ 按分类&lt;!-- raw HTML omitted -->_ 按优先级&lt;!-- raw HTML omitted -->_ 管理企业（制造商，供应商，物流，收货人&amp;hellip;)&lt;!-- raw HTML omitted -->_ 管理和相关的合同&lt;!-- raw HTML omitted -->_ 管理联系人&lt;!-- raw HTML omitted -->_ 管理（租赁，保险和服务等）资产相关的文档和合同&lt;!-- raw HTML omitted -->_ 文档授权类型管理&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>预约&lt;/strong>&lt;!-- raw HTML omitted -->_ 管理资产租赁的预约&lt;!-- raw HTML omitted -->_ 日历模式的预约用户界面&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>知识库&lt;/strong>&lt;!-- raw HTML omitted -->_ 管理基本系统的知识分类条目&lt;!-- raw HTML omitted -->_ 管理公共的 FAQ&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>报表&lt;/strong>&lt;!-- raw HTML omitted -->_ 报表生产可以按照设备的类型、相关的联系人和商务信息&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Translate from：&lt;a class="link" href="http://www.glpi-project.org/spip.php?article53" target="_blank" rel="noopener"
>http://www.glpi-project.org/spip.php?article53&lt;/a>&lt;/p></description></item><item><title>GLPI资产管理系统－－系统简介</title><link>https://martinliu.cn/2007/11/07/glpi-features-list2/</link><pubDate>Wed, 07 Nov 2007 15:29:00 +0000</pubDate><guid>https://martinliu.cn/2007/11/07/glpi-features-list2/</guid><description>&lt;p>GLPI 是一个信息资源管理器。你可以用它来给你公司建立一个资产清单（计算机，软件，打印机、、、）数据库。它的增强的功能可以是管理员的日常工作简单化，例如带有邮件提醒功能的工作跟踪系统等。它最首要的功能包括：1）所有技术资源精确的资产清单。资产的所有属性将被存储在同一个数据中。2）管理流程、维护工作的历史。这是一个动态的应用，它直接连把需要发出支持请求的用户和技术人员连接起来。（注：上文来自&lt;a class="link" href="http://www.glpi-project.org/spip.php?article43" target="_blank" rel="noopener"
>http://www.glpi-project.org/spip.php?article43&lt;/a>）&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在 ITpub 上发过一个非常不错的帖子，请点击：&lt;a class="link" href="http://www.itpub.net/762653.html" target="_blank" rel="noopener"
>http://www.itpub.net/762653.html&lt;/a> 这个人是今年四月在他们公司使用的总结贴，对该项目的主要功能介绍的比较全面。本人同期发布的文章：&lt;a class="link" href="http://lzheng.blogspot.com/2007/04/glpi-it.html" target="_blank" rel="noopener"
>GLPI &amp;ndash;IT 资源生命周期管理&lt;/a>&lt;/p></description></item><item><title>Zenoss 2.0 安装失败：）</title><link>https://martinliu.cn/2007/09/06/zenoss-20-install/</link><pubDate>Thu, 06 Sep 2007 09:35:00 +0000</pubDate><guid>https://martinliu.cn/2007/09/06/zenoss-20-install/</guid><description>&lt;p>今天是在没有心情搞了。快被 Zenoss 的网站给搞糊涂了。&lt;!-- raw HTML omitted -->我准备好了一个 Suse10 的机器来装 Zenoss。&lt;!-- raw HTML omitted -->首先想到的是上http://zenoss.com&lt;!-- raw HTML omitted -->在下载的页面，我有点差异了，怎么系统兼容表里命名写这有 suse10 的 rpm 包，而下载连接的列表里确只有 redhat 和 centos 的安装包，奇怪！！！！&lt;!-- raw HTML omitted -->接着看看文档把，发现新的希望：&lt;a class="link" href="http://www.zenoss.com/community/docs/install-guides/install-on-suse-10/" target="_blank" rel="noopener"
>http://www.zenoss.com/community/docs/install-guides/install-on-suse-10/ &lt;/a>&lt;!-- raw HTML omitted -->看看这文档，乍一看很不错啊，写的步骤非常清晰，大喜。没看完我有纳闷了，他明明也说 Zenoss-2.0.0-0.sles10.i386.rpm 这样一个安装文件啊。算了去 google 搜一下把，看到的帖子都来自 zenoss 的论坛啊，发现满世界的人都在找这个文件，哦，地球人都知道啊 ！&lt;!-- raw HTML omitted -->还是不死心，去 sourceforge 搜，结果一样，也没有。&lt;!-- raw HTML omitted -->我昏啊，你们明明写这支持，还有安装文档，为啥就不提供一个下载的连接呢？？？&lt;!-- raw HTML omitted -->Zenoss 的人你们都脑子进水了么！！呵呵第一次这么说开源的人，这次真的是无奈得很，以前把这种信息的搜寻和 troubleshooting 做为一个乐趣，现在真的没这样耐心了。&lt;!-- raw HTML omitted -->最终 zenoss 的安装，宣告失败！！ :-)&lt;!-- raw HTML omitted -->&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">一晃三个月都没更新这个blog了！！！～～～！！！！继续开源ing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>OCSNG 代理程序生成的清单扫描信息</title><link>https://martinliu.cn/2007/06/15/ocsng-inventory-windows-linux/</link><pubDate>Fri, 15 Jun 2007 10:17:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/15/ocsng-inventory-windows-linux/</guid><description>&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Linux
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->硬件是下面的Windows机,软件是openSuse10.2运行在VMWare中.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Windows XP
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->硬件是Dell optiplex 745&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>安装难度是中
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>使用简单
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>能支持中文和多种语言
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul></description></item><item><title>How to install OCSNG 1.0.1 on OpenSuse 10.2</title><link>https://martinliu.cn/2007/06/15/how-to-install-ocsng-101-on-opensuse-102/</link><pubDate>Fri, 15 Jun 2007 08:06:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/15/how-to-install-ocsng-101-on-opensuse-102/</guid><description>&lt;p>下面我将描述如何安装 OCSNG 服务器和客户端.服务器的安装在 openSuse Linux 中,文中将提到 Linux 和 Windows 代理的安装方法.最终能在界面中看到两个节点的清单信息,不过只有 Linux 的哪个会每天更新.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->This article is talking about how to install OCSNG 1.0.1 on a openSuSE 10.2 system.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Requirements:
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->You have to meet the following requirements.&lt;!-- raw HTML omitted --> Apache version 1.3.33 or higher / Apache version 2.0.46 or higher.&lt;!-- raw HTML omitted --> Mod_perl version 1.29 or higher.&lt;!-- raw HTML omitted --> Mod_php version 4.3.2 or higher.&lt;!-- raw HTML omitted --> PHP 4.3.2 or higher, with ZIP and GD support enabled.&lt;!-- raw HTML omitted --> PERL 5.6 or higher.&lt;!-- raw HTML omitted --> Perl module XML::Simple version 2.12 or higher.&lt;!-- raw HTML omitted --> Perl module Compress::Zlib version 1.33 or higher.&lt;!-- raw HTML omitted --> Perl module DBI version 1.40 or higher.&lt;!-- raw HTML omitted --> Perl module DBD::Mysql version 2.9004 or higher.&lt;!-- raw HTML omitted --> Perl module Apache::DBI version 0.93 or higher.&lt;!-- raw HTML omitted --> Perl module Net::IP version 1.21 or higher.&lt;!-- raw HTML omitted --> Perl module SOAP::Lite version 0.66 or higher (not mandatory)&lt;!-- raw HTML omitted --> MySQL version 4.1.0 or higher with InnoDB engine active.&lt;!-- raw HTML omitted --> Make utility like GNU make.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If you can use yast for managing package, I believe you could install all of them within 20 minutes. I won&amp;rsquo;t say more about this.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Installing Management/communication Server and Web Console
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->You must have root privileges to setup management server. Login OS as root, then do the following:&lt;!-- raw HTML omitted -->1)Download install package from &lt;a class="link" href="http://nchc.dl.sourceforge.net/sourceforge/ocsinventory/OCSNG_LINUX_SERVER_1.01.tar.gz" target="_blank" rel="noopener"
>http://nchc.dl.sourceforge.net/sourceforge/ocsinventory/OCSNG_LINUX_SERVER_1.01.tar.gz&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2)unpack it&lt;!-- raw HTML omitted -->Suse:/mnt/hgfs/win/OCSNG # cp OCSNG_LINUX_SERVER_1.01.tar.gz /root&lt;!-- raw HTML omitted -->Suse:/mnt/hgfs/win/OCSNG # cd&lt;!-- raw HTML omitted -->Suse:~ # tar zxf OCSNG_LINUX_SERVER_1.01.tar.gz&lt;!-- raw HTML omitted -->Suse:~ # cd OCSNG_LINUX_SERVER_1.01/&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_SERVER_1.01 #&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3)run installer&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_SERVER_1.01 # sh setup.sh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Welcome to OCS Inventory NG Management server setup ! |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->CAUTION: If upgrading Communication server from OCS Inventory NG 1.0 RC2 and&lt;!-- raw HTML omitted -->previous, please remove any Apache configuration for Communication Server!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Do you wish to continue ([y]/n)?y&lt;!-- raw HTML omitted -->Assuming Communication server 1.0 RC2 or previous is not installed&lt;!-- raw HTML omitted -->on this computer.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Starting OCS Inventory NG Management server setup from folder /root/OCSNG_LINUX_SERVER_1.01&lt;!-- raw HTML omitted -->Storing log in file /root/OCSNG_LINUX_SERVER_1.01/ocs_server_setup.log&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for database server properties&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Your MySQL client seems to be part of MySQL version 5.0.&lt;!-- raw HTML omitted -->Your computer seems to be running MySQL 4.1 or higher, good ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Which host is running database server [localhost] ?&lt;!-- raw HTML omitted -->OK, database server is running on host localhost ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->On which port is running database server [3306] ?&lt;!-- raw HTML omitted -->OK, database server is running on port 3306 ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache web server daemon&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->which: no httpd in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)&lt;!-- raw HTML omitted -->which: no apache in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)&lt;!-- raw HTML omitted -->which: no apache2 in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)&lt;!-- raw HTML omitted -->Where is Apache daemon binary [] ?/usr/sbin/httpd2&lt;!-- raw HTML omitted -->OK, using Apache daemon /usr/sbin/httpd2 ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache main configuration file&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Where is Apache main configuration file [/srv/www//etc/apache2/httpd.conf] ?/etc/apache2/httpd.conf&lt;!-- raw HTML omitted -->OK, using Apache main configuration file /etc/apache2/httpd.conf ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache user account&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Which user account is running Apache web server [] ?wwwrun&lt;!-- raw HTML omitted -->OK, Apache is running under user account wwwrun ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache group&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Which user group is running Apache web server [wwwrun] ?www&lt;!-- raw HTML omitted -->OK, Apache is running under users group www ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for PERL Interpreter&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Found PERL Intrepreter at ;-)&lt;!-- raw HTML omitted -->Where is PERL Intrepreter binary [/usr/bin/perl] ?/usr/bin/perl&lt;!-- raw HTML omitted -->OK, using PERL Intrepreter /usr/bin/perl ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Do you wish to setup Communication server on this computer ([y]/n)?y&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Make utility&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, Make utility found at ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache Include configuration directory&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Setup has found Apache Include configuration directory in&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->If you are not using Include directive, please enter &amp;rsquo;no&amp;rsquo;.&lt;!-- raw HTML omitted -->Where is Apache Include configuration directory [] ?/etc/apache2/conf.d&lt;!-- raw HTML omitted -->OK, Apache Include configuration directory /etc/apache2/conf.d found ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache mod_perl version&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Checking for Apache mod_perl version 1.99_22 or higher&lt;!-- raw HTML omitted -->Found that mod_perl version 1.99_22 or higher is available.&lt;!-- raw HTML omitted -->OK, Apache is using mod_perl version 1.99_22 or higher ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Communication server log directory&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Communication server can create detailled logs. This logs can be enabled&lt;!-- raw HTML omitted -->by setting interger value of LOGLEVEL to 1 in Administration console&lt;!-- raw HTML omitted -->menu Configuration.&lt;!-- raw HTML omitted -->Where to put Communication server log directory [/var/log/ocsinventory-NG] ?&lt;!-- raw HTML omitted -->OK, Communication server will put logs into directory /var/log/ocsinventory-NG ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for required Perl Modules&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Checking for DBI PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module DBI is available.&lt;!-- raw HTML omitted -->Checking for Apache::DBI PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module Apache::DBI is available.&lt;!-- raw HTML omitted -->Checking for DBD::mysql PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module DBD::mysql is available.&lt;!-- raw HTML omitted -->Checking for Compress::Zlib PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module Compress::Zlib is available.&lt;!-- raw HTML omitted -->Checking for XML::Simple PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module XML::Simple is available.&lt;!-- raw HTML omitted -->Checking for Net::IP PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module Net::IP is available.&lt;!-- raw HTML omitted -->Checking for SOAP::Lite PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module SOAP::Lite is available.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, looks good ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Configuring Communication server Perl modules&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->WARNING: INSTALLSITESCRIPT is not a known parameter.&lt;!-- raw HTML omitted -->Checking if your kit is complete&amp;hellip;&lt;!-- raw HTML omitted -->Looks good&lt;!-- raw HTML omitted -->&amp;lsquo;INSTALLSITESCRIPT&amp;rsquo; is not a known MakeMaker parameter name.&lt;!-- raw HTML omitted -->Writing Makefile for Apache::Ocsinventory&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, looks good ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Preparing Communication server Perl modules&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, prepare finshed ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Installing Communication server Perl modules&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, Communication server Perl modules install finished;-)|&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Creating Communication server log directory&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating Communication server log directory /var/log/ocsinventory-NG.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Fixing Communication server log directory files permissions.&lt;!-- raw HTML omitted -->Configuring logrotate for Communication server.&lt;!-- raw HTML omitted -->Writing communication server logrotate to file /etc/logrotate.d/ocsinventory-NG&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, Communication server log directory created ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Now configuring Apache web server&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Writing communication server configuration to file /etc/apache2/conf.d/ocsinvent&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, Communication server setup sucessfully finished ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Please, review /etc/apache2/conf.d/ocsinventory.conf&lt;!-- raw HTML omitted -->| to ensure all is good. Then restart Apache daemon. |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Do you wish to setup Administration server (web administration console)&lt;!-- raw HTML omitted -->on this computer ([y]/n)?y&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Apache root document directory&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Where is Apache root document directory [] ?/srv/www/htdocs&lt;!-- raw HTML omitted -->OK, Apache root document directory is /srv/www/htdocs ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for required Perl Modules&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Checking for DBI PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module DBI is available.&lt;!-- raw HTML omitted -->Checking for DBD::mysql PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module DBD::mysql is available.&lt;!-- raw HTML omitted -->Checking for XML::Simple PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module XML::Simple is available.&lt;!-- raw HTML omitted -->Checking for Net::IP PERL module&amp;hellip;&lt;!-- raw HTML omitted -->Found that PERL module Net::IP is available.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Installing files for Administration server&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating directory /srv/www/htdocs/download.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating directory /srv/www/htdocs/ocsreports.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Copying files to /srv/www/htdocs/ocsreports.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Fixing directories and files permissions.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Configuring IPDISCOVER-UTIL Perl script.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Installing IPDISCOVER-UTIL Perl script.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Fixing permissions on IPDISCOVER-UTIL Perl script.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| OK, Administration server installation finished ;-) |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Point your browser to http://server/ocsreports to |&lt;!-- raw HTML omitted -->| configure database server and create/update schema. |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Setup has created a log file /root/OCSNG_LINUX_SERVER_1.01/ocs_server_setup.log. Please, save this file.&lt;!-- raw HTML omitted -->If you encounter error while running OCS Inventory NG Management server,&lt;!-- raw HTML omitted -->we can ask you to show us his content !&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->DON&amp;rsquo;T FORGET TO RESTART APACHE DAEMON !&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Enjoy OCS Inventory NG ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_SERVER_1.01 #&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_SERVER_1.01 # /etc/init.d/apache2 restart&lt;!-- raw HTML omitted -->Syntax OK&lt;!-- raw HTML omitted -->Shutting down httpd2 (waiting for all children to terminate) done&lt;!-- raw HTML omitted -->Starting httpd2 (prefork) done&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_SERVER_1.01 #&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->As we can see the installation is successful. If you are running a different Linux, you should input other settings.&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Configuring Management Server
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The following is a post-install setup for management server. Y will go through it from a web browser. Open FireFox it is my current favorite browser and point it on URL http://Ip_address/ocsreports&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The first warning message should be this.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>WARNING: You will not be able to build any auto deployment package with size greater than 2M.&lt;!-- raw HTML omitted -->You must raise both post_max_size and upload_max_filesize in your php.ini to correct this.&lt;/strong>&lt;!-- raw HTML omitted -->Do the following to fix it:&lt;!-- raw HTML omitted --># vi php.ini&lt;!-- raw HTML omitted -->The default post_max_size is 8M, we are going to increase upload_max_filesize to 12M&lt;!-- raw HTML omitted -->; Maximum allowed size for uploaded files.&lt;!-- raw HTML omitted -->upload_max_filesize = 12MWe should restart apache to take it effect&lt;!-- raw HTML omitted -->Run this command:&lt;!-- raw HTML omitted --> /etc/init.d/apache2 restart&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Press F5 to refresh the first web page, this warning is still there. Let&amp;rsquo;s just go ahead to input the mysql &amp;gt;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Setting up Agents on openSuse and a Windows Xp client.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Download agent packages from internet.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Installing a Linux agent:&lt;!-- raw HTML omitted -->Suse:~ # tar zxf OCSNG_LINUX_AGENT_1.01.tar.gz&lt;!-- raw HTML omitted -->Suse:~ # cd OCSNG_LINUX_AGENT_1.01/&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_AGENT_1.01 # sh setup.sh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->| Welcome to OCS Inventory NG Agent setup ! |&lt;!-- raw HTML omitted -->| |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->Writing log to file /root/OCSNG_LINUX_AGENT_1.01/ocs_agent_setup.log&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for previous installation&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Previous installation of OCS Inventory NG agent not found&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for supplied parameters&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->No parameter found&lt;!-- raw HTML omitted -->OCS Inventory NG Agent setup running in user interactive mode&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for OCS Inventory NG Agent running method&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OCS Inventory NG Agent can be run through 2 methods:&lt;!-- raw HTML omitted -->- local: inventory will be generated locally to a file, without&lt;!-- raw HTML omitted -->interacting with Communication Server. Inventory results&lt;!-- raw HTML omitted -->must then be imported manually into the server through&lt;!-- raw HTML omitted -->Administration Console.&lt;!-- raw HTML omitted -->- http: Agent can connect to Communication Server and will interact&lt;!-- raw HTML omitted -->with it to know what is has to do (inventory, ipdiscover,&lt;!-- raw HTML omitted -->deployment&amp;hellip;)&lt;!-- raw HTML omitted -->Which method will you use to generate the inventory ([http]/local) ?&lt;!-- raw HTML omitted -->OK, OCS Inventory NG agent will be running in mode ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for OCS Inventory NG Communication Server&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Which host is running OCS Inventory NG Communication Server [] ?localhost&lt;!-- raw HTML omitted -->On which port is running OCS Inventory NG Communication Server [80] ?&lt;!-- raw HTML omitted -->OK, OCS Inventory NG Communication Server is running on host&lt;!-- raw HTML omitted --> and port &amp;lt;80&amp;gt; ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for TAG administrative information value&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->What is the value of TAG ([]) ?LiuZheng&lt;!-- raw HTML omitted -->OK, OCS Inventory NG agent will use&lt;!-- raw HTML omitted --> as ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for PERL Interpreter&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL Intrepreter found at ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for C/C++ Compiler&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, C/C++ Compiler found at ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Make utility&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, Make utility found at ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for dmidecode binaries&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Found dmidecode binaries version &amp;lt;2.8&amp;gt; at ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Compress::Zlib PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module Compress::Zlib is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for XML::Simple PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module XML::Simple is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Net::IP PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module Net::IP is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for LWP::UserAgent PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module LWP::UserAgent is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Digest::MD5 PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module Digest::MD5 is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Checking for Net::SSLeay PERL module&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, PERL module Net::SSLeay is available ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Installing IPDISCOVER binary&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Building IPDISCOVER version 3&lt;!-- raw HTML omitted -->Installing IPDISCOVER version 3 into /usr/sbin&lt;!-- raw HTML omitted -->OK, IPDISCOVER version 3 setup successfully ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Installing OCS Inventory NG Agent&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Configuring OCS Inventory NG Agent&lt;!-- raw HTML omitted -->Building OCS Inventory NG Agent&lt;!-- raw HTML omitted -->Installing OCS Inventory NG Agent&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent symbolic link&lt;!-- raw HTML omitted -->OK, OCS Inventory NG Agent setup successfully ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Creating OCS Inventory NG Agent log directory&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent log directory .&lt;!-- raw HTML omitted -->Configuring logrotate for OCS Inventory NG Agent.&lt;!-- raw HTML omitted -->Writing OCS Inventory NG Agent logrotate to file&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Installing OCS Inventory NG Agent configuration files&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent configuration file&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent configuration directory&lt;!-- raw HTML omitted -->Writing OCS Inventory NG Agent configuration file&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent configuration file&lt;!-- raw HTML omitted -->Writing OCS Inventory NG Agent configuration file&lt;!-- raw HTML omitted -->OK, OCS Inventory NG Agent configuration files setup successfully ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Installing OCS Inventory NG Agent cron configuration&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Creating OCS Inventory NG Agent cron configuration file&lt;!-- raw HTML omitted -->Writing OCS Inventory NG Agent cron configuration file&lt;!-- raw HTML omitted -->OK, OCS Inventory NG Agent cron configuration file setup successfully ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->| Lauching OCS Inventory NG Agent&amp;hellip; |&lt;!-- raw HTML omitted -->+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK, OCS Inventory NG Agent runs successfully ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Setup has created a log file /root/OCSNG_LINUX_AGENT_1.01/ocs_agent_setup.log. Please, save this file.&lt;!-- raw HTML omitted -->If you encounter error while running OCS Inventory NG Agent,&lt;!-- raw HTML omitted -->we can ask you to show us his content !&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Enjoy OCS Inventory NG ;-)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Suse:~/OCSNG_LINUX_AGENT_1.01 #&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The installer will install agent and a cron job on target Linux system. The job will launch OCS Inventory NG Agent once a day under root account, that means a update will get into database every day. Now you will see one single node in the web console.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->-&amp;gt;Installing a Windows Agent&lt;!-- raw HTML omitted -->OCSNG 1.01 does not support Vista yet, so I tested it on Windows Xp/2K/2K3 and it works very well.&lt;!-- raw HTML omitted -->You will donwload OCSNG_WIN32_AGENT_1.01_repack.zip&lt;!-- raw HTML omitted -->Unzip it and run ocsagent.exe. I&amp;rsquo;d like to test a standalone version agent, it is not a service version agent.&lt;!-- raw HTML omitted -->Double click ocsagent.exe, then you will get a new folder C:\ocs-ng&lt;!-- raw HTML omitted -->Create a batch file in this folder.&lt;!-- raw HTML omitted -->My scan.bat file as below:&lt;!-- raw HTML omitted -->&lt;em>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;!-- raw HTML omitted -->OCSInventory.exe /server:Ip_Address_of_server /np /tag:&amp;ldquo;LiuZheng&amp;rdquo; /hkcu /force&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/em>&lt;!-- raw HTML omitted -->In order to get inventory scan into database, you will double click scan.bat file. Now, you will get one more node in web console. It is a good idea to copy c:\ocs-ng folder on a USB key. Then you are able to run inventory scan on other Windows machines. If you are going to get update inventory from Windows machines, you have to install OcsAgentSetup.exe agent on them.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->If you have any issue please add a comment blow or send me a email. I could help you later if I might have any idea.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OCSNG现在还没有中文的界面,它的代理和服务器端是支持中文的.如果你在一些中文的操作系统上做了清单扫描,扫描的某些信息在Webconsole中查看的结果可能是乱码.这时候,你可以进入浏览器的内码设置,设置成中文后,你会看到正常的中文显示.这说明它是可以支持多语言的.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->为了在做资产管理的时候对于用户比较方便,我们可以是用gpli项目. GPLI有中文界面,而且能提供流程支持.GPLI的安装和配置手册待续.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个安装手册用英文写,如果给您带了了不便请谅解,您有什么问题的话欢迎给我留言,谢谢观看!&lt;/li>
&lt;/ul></description></item><item><title>开源IT管理工具大全之All in one虚拟机</title><link>https://martinliu.cn/2007/06/15/e5bc80e6ba90ite7aea1e79086e5b7a5e585b7e5a4a7e585a8e4b98ball-in-onee8999ae68b9fe69cba/</link><pubDate>Fri, 15 Jun 2007 07:24:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/15/e5bc80e6ba90ite7aea1e79086e5b7a5e585b7e5a4a7e585a8e4b98ball-in-onee8999ae68b9fe69cba/</guid><description>&lt;p>我做开源工具测试时,90%以上是在 VMWare 虚拟机中实现的,本人比较懒一直没有学习 Xen 虚拟机的用法,等下次吧,一等要彻底开源是我的一个梦想呵呵!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->说说这个 All in One 虚拟机的想法,我只是想把所有的我熟悉的工具都安装和配置在一个虚拟机里,这样当有人需要给做 Demo 的时候,我可以很快的做一个分享.如果有朋友感兴趣的话,我可以刻盘他.总的来讲希望能分享一下我的学习成果给大家.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第一步:安装虚拟机&lt;!-- raw HTML omitted -->这个虚拟机我不像使用很多的 Snapshoot,我以前是这么做的,从一个基础的 OS 发出许多分支到不同的工具;这样做的缺点有二:1)特别占磁盘空间;2)不能同时访问多个系统.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我选择的 Linux 是 Open Suse Linux 10.2;Suse 的包管理对我来说真的很方便,从安装 DVD 上用 Yast 可以方便安装各种软件,无须考虑包之间的依赖性问题.&lt;!-- raw HTML omitted -->我选择的是最小图形化系统安装,安装完之后,vmdk 文件的大小好像是 2GB 多.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->接下来安装的是所有的必须的包,大致如下:Apache,Perl,MySQL,PostgreSQL,rddtool,net-snmp,php,gcc,Kernel-source(for vmware tools)&amp;hellip;等安装完之后用 chkconfig on 命令设置需要自动启动的服务;然后把 apache 等服务逐个启动一下验证是否工作正常.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->然后安装的是 VMWare tools,这个好像也不是必须,不过还是装上比较好,方便虚拟机和 host 机共享文件.我的虚拟机的版本是 5.5.3workstation 版本.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->第二步:安装各种开源软件&lt;!-- raw HTML omitted -->下面可能会是一个很长的 change log&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. 安装 OpenNMS 1.3.2 &lt;a class="link" href="http://lzheng.blogspot.com/2007/05/install-opennms-132-on-opensuse-102.html" target="_blank" rel="noopener"
>安装方法&lt;/a> 设置了 opennms 的自动启动,还没有设置 tomcat5.5.23 的自动启动.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2.安装 Cacti **0.8.6j **&lt;a class="link" href="http://lzheng.blogspot.com/2007/06/how-to-install-cacti-on-opensuse-102.html" target="_blank" rel="noopener"
>安装方法&lt;/a>, 使用的 poller.php,尝试安装 cactid,安装失败,原因可能是 OpenSuse10.2 好像没有 net-snmp lib 包. 暂时不安装 cactid&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.安装 OCSNG 1.0.1 &lt;a class="link" href="http://lzheng.blogspot.com/2007/06/how-to-install-ocsng-101-on-opensuse.html" target="_blank" rel="noopener"
>安装方法&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4.安装 hyperic-hq 3.0.4-389 &lt;a class="link" href="http://lzheng.blogspot.com/2007/06/how-to-install-hyperic-hq-on-opensuse.html" target="_blank" rel="noopener"
>安装方法&lt;/a>, 2007-6-21th&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.安装 OTRS 2.2.1-1 安装方法很简单，执行 rpm 安装既可, 2007-7-28th&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>建立一个开源企业</title><link>https://martinliu.cn/2007/06/12/e5bbbae7ab8be4b880e4b8aae5bc80e6ba90e4bc81e4b89a/</link><pubDate>Tue, 12 Jun 2007 09:18:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/12/e5bbbae7ab8be4b880e4b8aae5bc80e6ba90e4bc81e4b89a/</guid><description>&lt;p>需求分析&lt;!-- raw HTML omitted -->如果你开一个公司的话，如果你的公司需要提供人们某些在线服务的话，如果有的 office 需要 200 人同时上网工作的话，如果您在在线业务需要三层结构的话，如果您的服务器需要 7×24 小时监控的话，如果您的 ITsupport 工程是需要同时 照顾 50 个服务器和 200 个最终用户的话，如果您的企业随时收到黑客的攻击的话、、、、、、挑战&lt;!-- raw HTML omitted -->如果您是公司的总裁或者 CTO 的话，试想您将如何为公司节约成本？如果建立一个可管理的基础架构？如果保证 IT 满足业务的需求？如果相应各种 IT 维护需求？如果降低企业的运行维护成本？、、、、、、&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->开源领域里的可选组件如下&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->外界链接设备&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Vyatta路由器，可运行于低端PC，能实现DHCP，DNS，Firewall，NAT，DMZ以及多种路由协议 &lt;a class="link" href="http://www.vyatta.com/" target="_blank" rel="noopener"
>http://www.vyatta.com/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Asterisk PBX交换机，可以实现VoIP，语音菜单和信箱，软分机，IP电话 &lt;a class="link" href="http://www.asterisk.org/" target="_blank" rel="noopener"
>http://www.asterisk.org/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>OpenVPN 是一个全功能的SSL VPN解决方案 &lt;a class="link" href="http://openvpn.net/" target="_blank" rel="noopener"
>http://openvpn.net/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->应用服务器&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Linux 多种版本可供选择和免费使用
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Apache、Tomcat、JBoss、Perl，PHP可以建立多层的Web企业
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Mysql，PostgreSQL 比较稳定和流行的数据库，能支持双机等功能
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->桌面机&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Ubuntu
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>SuSE
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->帮助台&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>ORTS ITIL 兼容的ITsupport服务管理工具，比较好的支持对内部IT支持的流程 &lt;a class="link" href="http://otrs.org/" target="_blank" rel="noopener"
>http://otrs.org/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>SugarCRM 能和SalesForce抗衡的CRM系统，能管理客户信息，销售活动和售后支持活动 &lt;a class="link" href="http://www.sugarcrm.com/" target="_blank" rel="noopener"
>http://www.sugarcrm.com/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->IT监控管理软件&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>OpenNMS，Nagios，Cacti、、、网络系统监控，我的blog上还有很多可选项
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>GLPI ＋ OCSNG IT资源生命周期管理，您需要知道您都有那些设备和资产
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Nmap网络扫描，SNORT网络入侵检测，&lt;a class="link" href="http://www.ossim.net/" target="_blank" rel="noopener"
>OSSIM&lt;/a>等工具帮助网络安全管理
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->不知道有没有人愿意建立这样一个开源企业？呵呵！！&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果您有什么新的想法和补充请一定分享给我。&lt;/li>
&lt;/ul></description></item><item><title>Go Open Source,GO! Vyatta开源软件挺进网络硬件领域</title><link>https://martinliu.cn/2007/06/09/go-open-sourcego-vyatta-network/</link><pubDate>Sat, 09 Jun 2007 08:56:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/09/go-open-sourcego-vyatta-network/</guid><description>&lt;p>&lt;a class="link" href="http://www.vyatta.com/images/masthead.jpg" target="_blank" rel="noopener"
>&lt;img src="http://www.vyatta.com/images/masthead.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->这是一个比较新的产品，提供开源的软件路由的解决方案；他们的目标直指 Cisco 这些大牌网络硬件厂商。它能简单的安装和运行在 32bit 的普通计算机硬件上，实现路由器的几乎所有功能；能支持的硬件平台和路由协议还真不少，请查看 &lt;a class="link" href="http://www.vyatta.com/products/vyatta_software_datasheet.pdf" target="_blank" rel="noopener"
>Datasheet&lt;/a>；下载&lt;a class="link" href="http://www.vyatta.com/download/" target="_blank" rel="noopener"
> 网址&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在 VMWare 中安装了一下发现它可以完全满足我需求：&lt;!-- raw HTML omitted -->1）在公司中办公网络建立一个隔离的测试网。&lt;!-- raw HTML omitted -->2）测试网中提供 DHCP,DNS 服务&lt;!-- raw HTML omitted -->3）提供 NAT,Firewall&lt;!-- raw HTML omitted -->4）安装简单，硬件需求低&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->准备在公司实际环境中安装测试，安装和配置信息待续。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->现在我正在 Vyatta Router 后面的小网内更新这个 Blog。&lt;!-- raw HTML omitted -->上午的安装过程如下：&lt;!-- raw HTML omitted -->（硬件准备）&lt;!-- raw HTML omitted -->测试机一台 Dell Gx620，主板上带 Intel 的内置网卡一块 TP-LINK TG-3269C，网线若干&lt;!-- raw HTML omitted -->（网络环境）&lt;!-- raw HTML omitted -->在一台办公网的机器上，寻找一个未使用的 IP 地址，这个地址会分配给 Router 的 Internet 网卡上；然后运行 ipconfig /all 记录下默认网关、默认 DNS 和子网掩码，这些信息会配置到 Router 上。&lt;!-- raw HTML omitted -->（安装过程）&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>下载Vyatta的试用手册 &lt;a class="link" href="http://www.vyatta.com/documentation/vyatta_evalguide.pdf" target="_blank" rel="noopener"
>Quick Eval Guide - Boot, Configure &amp;amp; Test the Vyatta software&lt;/a>翻到手册的第三页，重新标准出你的网络信息，注意后面的配置跟这里的信息有关。为了简单起见，我就改了对外链接的哪个网卡的IP地址，至于内网么，有什么ip地址范围都无所谓了呵呵
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>下载刻录Vyatta软件 &lt;a class="link" href="http://www.vyatta.com/download/ofr.php" target="_blank" rel="noopener"
>Vyatta Community Edition 2 - CD-ROM Image&lt;/a> 刻录到一张空白CD上
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>把可好的CD放入机器中，从CDROM启动，这其实是一个livecd。启动过程可以无需关心，看似是一个Linux PE的CD，启动之后用root进入操作系统，root的密码是vyatta。进入后可以查看一下 vi /var/log/dmesg 主要看看你的两个网卡它是否能真确识别。我的测试机是Intel CPU的，不知道AMD的机器是否呢个装，没试过。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>其它的配置过程文档中说的非常详细，不用我在多说。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->安装之后的小节：&lt;!-- raw HTML omitted -->Router有两个网卡，在对外的网卡上做了，NAT，firewall，在对内的网卡上做了DHCP,DNS，现在我的笔记本在Router后的小网里，运行ipconfig /all的结果如下&lt;!-- raw HTML omitted -->Ethernet adapter Local Area Connection:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Connection-specific DNS Suffix . : mycompany.com&lt;!-- raw HTML omitted -->Description . . . . . . . . . . . : Broadcom 570x Gigabit Integrated Con&lt;!-- raw HTML omitted -->troller&lt;!-- raw HTML omitted -->Physical Address. . . . . . . . . : 00-0F-1F-BB-B2-92&lt;!-- raw HTML omitted -->Dhcp Enabled. . . . . . . . . . . : Yes&lt;!-- raw HTML omitted -->Autoconfiguration Enabled . . . . : Yes&lt;!-- raw HTML omitted -->IP Address. . . . . . . . . . . . : 10.0.0.150&lt;!-- raw HTML omitted -->Subnet Mask . . . . . . . . . . . : 255.255.255.0&lt;!-- raw HTML omitted -->Default Gateway . . . . . . . . . : 10.0.0.1&lt;!-- raw HTML omitted -->DHCP Server . . . . . . . . . . . : 10.0.0.1&lt;!-- raw HTML omitted -->DNS Servers . . . . . . . . . . . : 192.168.172.200&lt;!-- raw HTML omitted -->10.100.112.27&lt;!-- raw HTML omitted -->Lease Obtained. . . . . . . . . . : 2007年6月12日 11:57:30&lt;!-- raw HTML omitted -->Lease Expires . . . . . . . . . . : 2007年6月13日 11:57:30&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->总之这是一个非常成功的测试，这个产品真的非常Coooooool！！！！！它让我看到了OpenSource的东西不仅可以在纯软件领域和商业产品有所比较，它还能在硬件领域有所作为。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol></description></item><item><title>谁来关心核心业务系统</title><link>https://martinliu.cn/2007/06/07/core-business-hp-ibm/</link><pubDate>Thu, 07 Jun 2007 09:44:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/07/core-business-hp-ibm/</guid><description>&lt;p>注:本文是我的处女作呵呵,发布在&amp;quot;&lt;a class="link" href="http://www.netadmin.com.cn/magazine/kt_magazine_search.php" target="_blank" rel="noopener"
>网管员世界&lt;/a>&amp;quot; 三月 B 刊上,原文如下:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>谁来关心核心业务系统&lt;!-- raw HTML omitted -->——简要比较 IBM Tivoli 与 HP OpenView&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>导语：随着 IT 的快速发展，中国用户对先进技术的追逐和应用正日益高涨。回想我们已经建立的这些业务系统。我们不得不用如下几个词来形容：复杂、动态、故障多和管理难。在繁琐的日常运维工作中，来自各个部门的人，似乎又在默契地担负和实现着这样的同一个使命：保持关键核心业务系统正常运转。网络系统监控软件是用来帮助 IT 运维人员，缩短故障解决时间和提高工作效率的有力工具。选购网络系统监控软件的技巧在于对自己的 IT 系统深刻的理解和对管理需求深刻的理解。假设您的用户是通过这样的一个访问路径来查看客户信息：浏览器 àInternetàWeb 服务器 à 中间件服务器 à 数据库；首先标出在这个路径中的每个点上，开发、测试和运行维护等各部门人员是怎样分布的。假设在每一点都有这样的一个自底向上的技术堆栈：网络 à 服务器操作系统 à 数据库 à 中间件 àWeb 服务器 à 客户端。再让各部门的每个相关的人员标出在哪些区间所消耗的时间和遇到的故障是最多的；这些故障是什么？记住把这些信息记录下来，并打印出来，无论如何这样的原始数据都是 IT 管理优化非常好的参照。在得到这样一个管理需求的分布图后，接下来就可以按图索骥来挑选相关的管理平台以及相应管理模块。一个好的监控管理系统并不一定试图监控和管理到技术堆栈中的所有对象，而是在您最需要帮助的核心部分提供有利的支持，为您清晰呈现 IT 系统的这样几个关键因素：可用性、性能和故障状况。记录和分析核心业务系统在这些方面的变化情况是 IT 监控管理软件的主要功能。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IBM Tivoli 和 HP OpenView 是主流 IT 监控管理套件中的两个重量级角色。它们是两个著名的市场品牌，旗下丰富的管理模块组成了非常全的产品线。选择标准如何确定呢？管理工具提供的管理功能永远超过其它因素，做单纯产品线长短的比较是没有意义的。一个清晰的管理需求定义可以使您能够非常轻松的考察和比较不同品牌的管理产品。由于它们都属于管理平台型产品，管理功能都非常的丰富和全面。本文对这两个产品的介绍和分析，无法面面俱到，所以只能对它们的工作方式、特性和原理等方面做粗略的比较；旨在抛砖引玉，引起读者注意，给您提供若干提示和思路。下面就网络管理和应用系统故障管理（操作系统、数据库、Web 应用等）这两方面来做一个简要的分析和比较。这也是对核心业务系统监控管理的最基本内容。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>**&lt;em>网络管理方面：&lt;/em>**IBM NetView 和 HP OpenView Network Node Manager 都是很好的产品，有很多可选的功能模块。众所周知 NetView 产品是当年 IBM 从 HP 购买的，NetView 和 OpenView NNM 算是一对孪生兄弟。后来，它们在各自的家庭里慢慢的长大，成为个性不同的两个产品。如今的 OpenView NNM 在下面的一些方面可能比 NetView 做的更为出色一些：1）很好的支持多种行业标准的管理协议：多个版本的 SNMP、ROMON、Netflow、Ipv6、OSPF、HRSP、CDP 等；2）提供全面的网络管理视图，包括二层和三层的网络拓补图；以及 VLAN 和其它协议视图；3）有效的内嵌事件关联引擎和事件管理配置工具，对用户处理事件和相关事件非常有帮助。OpenView NNM 毕竟是具历史悠久的成熟产品，不过在 IBM 收购了 Micromuse 后；今后可能在网络管理方面,IBM 和 HP 也可以不相伯仲了。网络管理的特殊性在于：只能通过行业标准的管理协议来从这些硬件设备上获得所需要的信息。网络监控系统一般作为网络设备的数据收集器和网络设备 SNMP Trap 的目的地。在多厂商设备的网络环境中，监控系统需要的是对各种硬件设备的兼容性；从实际环境出发，选择更能反映真实运行环境，更易于理解，而且容易使用的产品。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**&lt;em>应用系统故障管理：&lt;/em>**这个管理范畴中包含最多的管理功能和管理模块，它管理操作系统和操作系统之上运行的一切对象：各种数据库、Web 应用、中间件、Web 服务、邮件服务和标准商业应用等。它与实际业务应用系统同时运行在同一个网络环境当中，是它肩负着对核心业务系统的监控。由于这部分的功能最多最复杂，它往往被看作是管理监控的平台或者框架，是监控系统的核心部分。所有管理对象的故障告警事件都汇聚到里，其它各个功能模块都以它作为通讯平台和数据存储中心。Tivoli Monitoring 和 OpenView Operations 就是这样的核心模块产品；它们都有很多其它相关的管理模块，这些模块大多数需要加载到这个核心框架上运行；部分模块是可以独立运行，同时和它们做故障事件集成。用户使用界面、管理策略定制、管理对象轮询、故障事件报警和管理报表等功能都关联到这里。下面将从四个不同角度简单比较一下 Tivoli Monitoring 和 OpenView Operations 的各种特性。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>1&lt;/em>**&lt;/strong>&lt;em>、监控代理的差异&lt;/em>** 在监控主机上安装监控代理是各个厂商的相同做法，代理程序运行在被监控主机上和管理服务器通讯；执行各种数据收集任务和管理策略。操作系统代理是最基础的模块；有的厂商可以通过操作系统监控代理程序来实现对数据库、Web 应用、中间件、Web 服务和邮件服务等的监控，有些需要安装和配置多个代理监控程序。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IBM Tivoli Monitoring&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>2&lt;/em>**&lt;/strong>&lt;em>、告警机制的差异&lt;/em>** 代理程序在采集和整理实时和历史的监控数据时，需要随时检查各种报警条件是否满足。监控最好能在故障状况发之前，将各种迹象以不同级别的事件精确地、及时地汇总到管理服务器端，以邮件，短信等方式通知到相关工作人员。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IBM Tivoli Monitoring&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>在监控对象阈值设置上可以实现复杂的逻辑。对于某个采集点在某时间点或者时间段上的数值，可以设置它和另外一个数值的几乎所有算术关系的比较；还可以逻辑上和其它采集点的状况做关联。告警条件的定义可扩展到：在给定的时间内、多资源、多阈值的情况。告警条件的判断是在代理程序端完成，最终发送告警事件到管理服务器。能定义在临界值到达时的自动触发处理动作。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>HP OpenView Operations&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>告警条件的设置可以对于某个采集点在某时间点上的数值，能提供大于和小于的比较条件；其它的情况可以通过 VB、Perl 脚本来实现复杂条件判断。能设置尖峰持续时长，对有本地重复事件报警抑制功能；代理程序可以在临界值的到来、持续和结束三个不同阶段，定义和发出不同的事件提示；执行不同的故障修复动作。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>3&lt;/em>**&lt;/strong>&lt;em>、用户使用界面的差异&lt;/em>** 图形化用户界面是产品选型的重要因素之一，易用性高的用户使用界面可以降低软件的复杂度。IT 管理软件功能的复杂性是很多用户望而却步的一个主要因素。中国用户对报表的需求是比较特殊和苛刻的，往往需要定制和开发特定的管理报表，所以需要详细考察预定义报表和相关开发接口。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IBM Tivoli Monitoring&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>窗口用户界面和 Web 界面保持高度的一致性，用户可以通过 Java 客户端和 Web 浏览器连接到相同的工作区上。Tivoli 用户界面非常像是一个报表分析系统。在工作区中有很多预定义的窗口，能方便的开始系统状态的查看和监控策略的定制。管理平台内置的基于权限和角色的管理也由用户界面得到了实现；分权和分区域管理是很多大型企业环境的必要需求。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>HP OpenView Operations&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>图形用户界面能提供业务管理的业务视图，管理员进行面向业务的管理，实现故障定位、分析、跟踪和解决等相关管理工作。用户界面还包括各种预定义的策略模版、工具和报表。多种不同层面的中文管理报表，可以满足客户对网络性能、故障、配置等各方面的管理要求。Web 用户界面和窗口用户界面稍有不同。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>4&lt;/em>**&lt;/strong>&lt;em>、体系架构的差异&lt;/em>** 根据企业环境和管理需要的不同，监控系统有时候需要能够跨地域全网监控；有时候也只限于监控某个 IT 中心的核心系统。监控系统有时候和生产系统在同一个网络，有时候又只能部分运行于生产环境。在完成所有监控任务的同时，还要能被用户方便的访问；对网络的适应和防火墙的友好性是必不可少的。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IBM Tivoli Monitoring&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>它的三层管理结构可以实现分布式多级系统管理。内置了基于角色和权限分工的安全机制，所有的权限定义在管理平台中实现。IP.PIPE 协议可以满足跨火墙地址转换的管理需要。同时，IP.PIPE 也对防火墙端口的设置有最小的要求，以适应企业越来越严格的安全规范。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>HP OpenView Operations&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>能支持灵活的分布式管理模式；能实现包括对等中心、向阳式和互为备份管理中心等多种方式。用这些架构特点可以保证跨地域和跨广域网统一集中管理的实现。两层的管理结构使得管理架构相对简捷和易于部署。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>上述四点是应用系统故障管理的几个关键部分。其中的技术细节和实现方式和运行细节往往比较复杂。其实任何一个具体的 IT 环境对监控产品都是非常具有挑战性；监控产品也可能在某些环境中无法工作；也可以对系统造负面影响。然而，深刻理解监控管理需求和实际 IT 环境的您则只需要做好对产品功能和架构特性的考察即可；同时将所有其他影响都降低到最小化的可以接受的范围。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>IT 监控管理系统的复杂性和企业对业务应用系统管理需求的动态性，使我们很难简单的总结出一个管理秘笈或者产品技术宝典。IT 管理工作的开展除了选择好用的管理监控工具外，还一定要遵循：“二分工具，八分流程”的二八管理原则。如果您机房中的电缆正像蜘蛛网一样蔓延；您的 IT 运维人员天天都在抱怨的电话中度过；您的硬件维护开支在漫无边际的增长；这是您可能需要学习借鉴一下 ITIL 最佳管理实践模型，对 IT 管理的优化和改革不仅需要各种监控工具的帮助，也需要通过改造管理流程来提高工作效率。总之：核心业务系统不仅需要好的 IT 监控管理工具，也需要 CIO/CTO 来设计和驾驭优良的管理流程。&lt;/p></description></item><item><title>[转]10大优秀开源网络管理工具</title><link>https://martinliu.cn/2007/06/01/top-10-nsm-tools/</link><pubDate>Fri, 01 Jun 2007 01:47:00 +0000</pubDate><guid>https://martinliu.cn/2007/06/01/top-10-nsm-tools/</guid><description>&lt;p>&lt;a class="link" href="http://www.itmanagement.com/images/logo-itmanagement2.gif" target="_blank" rel="noopener"
>&lt;img src="http://www.itmanagement.com/images/logo-itmanagement2.gif"
loading="lazy"
>&lt;/a>转载 ITmanagement 的一个文章；全文的部分翻译。&lt;a class="link" href="http://www.itmanagement.com/images/logo-itmanagement2.gif" target="_blank" rel="noopener"
>&lt;/a>个人以为这个文章的把网管的开源工具做了一个小结，英文好的同志请直接访问原文地址：&lt;a class="link" href="http://www.itmanagement.com/features/10-open-source-network-tools-052407" target="_blank" rel="noopener"
>click Here &lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>“最高评分的管理管理工具不会使人不得不花未来的钱。来考虑一下这些自由且低成本的开源软件吧。”&lt;!-- raw HTML omitted -->Leslie T. O’Neill May 24th, 2007&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->如果您的公司排名在 Fortune 1000 强和中小企业之间，那么您网络管理的选择形势看似比较严酷。你既不能在小市场上收集一堆拙劣的玩意来组成一个解决方案；你也不能花很多钱买一些真正不需要的高科技产品。这里有一个很好的选择：试用可一个开源的网络管理方案，加专业服务，包括开发和技术支持。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>**Open Source = Flexible ****开源＝灵活性**&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>一个开源的解决方案对厂商来说也是非常灵活性的，他们很快地增加新技术的支持，比改进一个私有系统更快。例如：当 Ubuntu 7.04 “Fiesty Fawn”四月份发布之后, Hyperic HQ 在发布的第二天就宣布了对其提供技术支持。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->当谈到开源的网络管理方案时，公司最需要也用的最多的技术莫过与监控功能。不过监控技术在很大程度上已经变成了日用品。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->通常的，专业化版本的开源 IT 管理软件平台集成多个其他开源项目在一个框架中，象 Nagios 网络监控等；并且加入统一的网络界面；并且提供技术支持服务。另外，他们都想通过强大的社区来提高和改进代码，跟踪 bug 等。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;strong>六个企业级平台&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>下面的六个开源 IT 管理都可能用作 HP, IBM, CA 和 BMC 大型管理套件的替代品。每一个都能提供低价的专业服务和免费软件下载。它们的不同支持在与所提供的功能和支持的操作系统&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.quest.com/bigbrother/" target="_blank" rel="noopener"
>Quest Big Brother&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这个 Web-based 系统和网络监控产品能支持 Windows, Unix 和 Linux 等操系统, 还有一个通过用户投稿形成的脚本知识库，利用它能容易地定制 Big Brother 取管理你的网络。它的 GUI 是一个不错的特色，使用相同的颜色代码；红色代表不好，绿色代表好。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.groundworkopensource.com/downloads/full_download.html" target="_blank" rel="noopener"
>GroundWork Open Source Monitor Professional&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>2004 年发布，它是最早的企业级网络管理产品之一。它集成了超过 100 种最好的开源项目，包括 Nagios, Apache 和 NMap, 在这个框架之上有添加了很多特有功能，例如 Web-based 用户界面等。Monitor 提供了集中化的监控和管理，管理和监控你的企业网络，包括 Linux, Unix 和 Windows 服务器, 应用, 数据库和网络设备。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.hyperic.com/downloads/" target="_blank" rel="noopener"
>Hyperic HQ Enterprise&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>瞄准的是一个数据中心，Hyperic 被设计为去监控和管理 Web 应用的所有层次， 包括硬件、中间件、虚拟化、Web 和开放式应用。它还提供基线和趋势分析。它支持 Apache, JBoss, Linux 和更多应用。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.opennms.com/site/index.php?option=com_frontpage&amp;amp;Itemid=1" target="_blank" rel="noopener"
>OpenNMS&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这个 Java-based 网络管理工具专注于网络服务轮询，数据采集和事件/告警管理。它目前支持多种开放式操作系统，包括 Linux, Mandrake 和 Solaris,还有 Mac OS X; Windows 系统的支持计划在 OpenNMS 2.0 中实现。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.openqrm.org/" target="_blank" rel="noopener"
>OpenQRM&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>也瞄准了数据中心的管理，OpenQRM 不仅能管理数以千计的 Linux 和 Windows 服务器，还能跟踪计量你的数据中心的使用率和效率。 他还能做自动化基于策略的 provisioning。它也集成了 Nagios 作为监控功能。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.zenoss.com/product/" target="_blank" rel="noopener"
>Zenoss Core&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>基本上都是 Python 写的，这个管理平台提供了服务器、网络设备、OS 和应用的事件管理、可用管理、和性能管理。Zenoss 能运行于 Linux, FreeBSD 和 Mac OS X；它也可以作为一个 Zenoss 虚拟应用运行在 VMplayer 里。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>四个无支持的项目&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这四个项目位于 TOP10 开源网络管理工具中。不象那六个产品，它们不提供商业的服务和企业级的增强功能。但是它们是绝对的 free，而且你可以拥有所有需要的网络健康性检查功能。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.nagios.org/" target="_blank" rel="noopener"
>Nagios&lt;/a>&lt;/strong>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>这是一个开源的运行在 Linux 操作系统上的主机、服务和网络监控程序。&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.jffnms.org/" target="_blank" rel="noopener"
>&lt;!-- raw HTML omitted -->&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.jffnms.org/" target="_blank" rel="noopener"
>Just For Fun Network Management System (JFFNMS)&lt;/a>&lt;/strong>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>JFFNMS 能监控标准的 SNMP (Simple Network Management Protocol) 网络设备，服务器、路由器和 TCP 端口。它工作在 Linux, FreeBSD 和 Windows 2000/XP。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->****&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://www.bigsister.ch/" target="_blank" rel="noopener"
>Big Sister System and Network Monitor&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这个项目包括了 real-time system 和 network health monitor, 一个 Web 应用框架和一个系统管理应用。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;a class="link" href="http://netdisco.org/" target="_blank" rel="noopener"
>Netdisco&lt;/a>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这个 Web-based 应用被设计为管理中道大型网络和其中的 SNMP 网络设备。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;hr>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>相关文章:&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>· &lt;a class="link" href="http://www.itmanagement.com/news/hyperic-interview-part-one-081006/" target="_blank" rel="noopener"
>Interview with Hyperic&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>· &lt;a class="link" href="http://www.itmanagement.com/news/5-up-and-coming-monitoring-vendors/" target="_blank" rel="noopener"
>Top 5 Upstart Monitoring Companies&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>· &lt;a class="link" href="http://www.itmanagement.com/whitepaper/editorials/advantages-open-source-management/" target="_blank" rel="noopener"
>The Advantages of Open Source Management&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>· &lt;a class="link" href="http://www.itmanagement.com/features/10-steps-green-datacenter/" target="_blank" rel="noopener"
>10 Simple Steps to a Green Datacenter&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;hr>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>Hyperic HQ小测手记</title><link>https://martinliu.cn/2007/05/30/hyperic-hq-testing/</link><pubDate>Wed, 30 May 2007 04:28:00 +0000</pubDate><guid>https://martinliu.cn/2007/05/30/hyperic-hq-testing/</guid><description>&lt;p>&lt;a class="link" href="http://bp2.blogger.com/_KU0istEHv9w/Rlz-qwD97uI/AAAAAAAAADk/j3tVzwajvC4/s1600-h/logo.JPG" target="_blank" rel="noopener"
>&lt;img src="http://bp2.blogger.com/_KU0istEHv9w/Rlz-qwD97uI/AAAAAAAAADk/j3tVzwajvC4/s320/logo.JPG"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->HQ 的网站是一个显的非常商业化的网站；看上去制作的比较精良也比较专业。从 HQ 的官方文档（好像没找到 pdf 手册）中看出它能监控的东西还真的非常多，无论是商业的软件还是开源的都有一大串的 matrix；他们在被监控的及其上是需要安装和运行代理的。所以从这一点上讲和商业软件也没有什么区别，总之看的数据多应该比较好，不过数据收集的多有时候会给监控对象代理太重的 workload。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如何安装&lt;!-- raw HTML omitted -->下载 HQ\hyperic-hq-installer-3.0.4-389-x86-linux 从 HQ 的网站。这个压缩文件包含：安装程序，服务器端程序（好像包括一个内嵌的 PostgreSQL 数据库），代理程序，服务期端 shell 程序，JRE。&lt;!-- raw HTML omitted -->BTW:服务器端和代理都是 Java 程序，如果自己配置好 JRE 的话可以下载不包含 JRE 的安装包。Windows 上的代理包是一个 zip 文件，为了方便我都下载的含有 JRE 的安装包。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->由于是纯 Java 的应用所以服务器端和代理端看似好像都没有任何依赖性要求，只是需要在服务器端安装 xorg-x11-libs 包，否则不能正常绘图，看不到图形。&lt;!-- raw HTML omitted -->在 Linux 下的安装过程大致如下。&lt;!-- raw HTML omitted -->mkdir /opt/hq&lt;!-- raw HTML omitted -->useradd hq -G root -d /opt/hq&lt;!-- raw HTML omitted -->su hq&lt;!-- raw HTML omitted -->tar zxvf hq.tgz&lt;!-- raw HTML omitted -->cd hyperic-hq-installer/&lt;!-- raw HTML omitted -->./setup.sh&lt;!-- raw HTML omitted -->/opt/hq/server-3.0.4/bin/hq-server.sh start&lt;!-- raw HTML omitted -->注意最好建立一个新的用户为 HQ，服务期端本身需要被非 root 用户安装和启动。另外代理和服务器端都需要特殊的两个端口通信，所以安装完之后必须停止或者配置防火墙；否则不能访问服务器，服务器也不能和代理通信。启动代理之前需要配置好防火墙。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->试用：&lt;!-- raw HTML omitted -->总体说 HQ 的安装和配置都是非常简单的，不过他的 Web 界面更是简洁。当代理启动了之后，会自动出现在 Auto-Discovery 下面，点击 Add Resource 按钮将它变成一个正式的监控对象。默认的情况下，代理会收集一定数量的监控指标；大概是可收集数量的 20%左右。当在某个监控对象上（例如 Memory Used）设置了收集间隔之后，服务器端就开始了定时的数据收集，所收集的数据默认情况下用折线图的形式展示。可以根据某个指标建立一个告警，告警的逻辑也相当的完整：逻辑判断，巅峰判断，升级处理；看似能想到的都有了。由于是第一次使用展示没有看的如何建立一个告警规则应用于所有监控对象的。我用 HQ 对我的一个服务器（iis,MS Sql,.net）做了监控，从数据收集和展现效果上来说，真的堪称可与商业软件媲美。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->使用结论：&lt;!-- raw HTML omitted -->安装简单方便，在 Linux 下代理端完全无需关照包依赖性。代理配置的安装配置需要一定量的工作，必须配置服务器地址，通信端口等。&lt;!-- raw HTML omitted -->代理程序对服务器的工作负担还是比较大的，特别是在启动的那几分钟内。代理进程对 CPU 的使用率可以达到 50 ～ 80%，之后就比较低了。对内存的利用一般是 30MB 左右，当然这应该是可以通过降低收集数的数量和频率来降低的。&lt;!-- raw HTML omitted -->用户界面的使用还真的是很方便，还支持告警信息的 RSS 访问。总之 HQ 是一个开源软件中的重量级选手：功能强，复杂性高，代理程序负担较重。其他使用小结，待续。&lt;/p></description></item><item><title>ZABBIX特点介绍，转自它们的网站</title><link>https://martinliu.cn/2007/05/22/zabbix-key-features/</link><pubDate>Tue, 22 May 2007 14:53:00 +0000</pubDate><guid>https://martinliu.cn/2007/05/22/zabbix-key-features/</guid><description>&lt;p>&lt;a class="link" href="http://www.zabbix.com/img/screenshots/v1.1/view.screens.2.png" target="_blank" rel="noopener"
>&lt;img src="http://www.zabbix.com/img/screenshots/v1.1/view.screens.2.png"
loading="lazy"
>&lt;/a>FROM：&lt;a class="link" href="http://www.zabbix.com/features.php" target="_blank" rel="noopener"
>http://www.zabbix.com/features.php&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX offers functionality that will make your IT resources look more transparent, and it will also help to easily identify performance and availability problems. ZABBIX greatly increases the productivity of system administrators by providing simple-to-use monitoring system.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Key features&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>开源的方案Open Source solution
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>能编译运行在多种OS：AIX, FreeBSD, HP-UX, Linux, MacOS X, NetBSD, OpenBSD, Solaris, Tru64/OSF
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>SQL database存储配置、性能等各种信息
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Web interface 简单易用的访问
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>提供实时和历史的监控分析数据
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Data 可视化和影射
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>高性能的监控代理 (UNIX, Win32)
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>监控 &amp;ldquo;agentless&amp;rdquo; 环境
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>维护和监控SLA of IT Services
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>监控 SNMP (v1,v2,v3) devices
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>IT Services 提供IT基础架构（组建/服务/硬件）等和业务逻辑的联系和对应&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX&amp;rsquo;s unique technology allows you to relate your applications and underlying servers or network to a IT Service such as application, location, server, network device, region, etc. This technology allows you to correlate your business to your IT infrastructure and identify the impact of your IT infrastructure to the delivery of business service to your customers.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Data visualisation&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX provides excellent visualisation of statistical and real-time information, ranging from simple graphs to complex views containing graphs, maps and text information. All graphical information is accessible from WEB interface. The wealth of information available such as the trend analysis (days to threshold), the historical graphs and histograms allow you to make informed decisions about the weaknesses and performance of your IT infrastructure.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Application monitoring 应用监控&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Enterprise applications such as Oracle, WebSphere, WebLogic, Exchange, Apache, etc. can be monitored using SNMP. In many cases, agentless technology can be used, cutting down on the deployment and management costs.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX agents can be easily extended to perform monitoring of any aspect of your applications. It is matter of writing a shell script which would return required data back to the agent.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Server monitoring 服务器监控&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Virtually all server platforms are supported including but not limited to UNIX, Win32 and Novell Netware. ZABBIX native agents take care of CPU utilisation, memory utilisation, disk usage, network I/O, temperature of CPUs and mainboards, status of processes, etc. All real-time performance data is immediately available by WEB interface.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Network monitoring 网络设备监控&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX supports monitoring of Cisco, Juniper, 3Com, Nortel, Foundry and other routers as well as firewalls from Netscreen, Fortinet, Cisco or Checkpoint. Any network devices (routers, hubs, printers, etc) having SNMP support can be easily monitored by ZABBIX.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ZABBIX makes possible creation of network maps which give very clear representation of monitored network infrastructure. The maps show network devices, connections, statuses of the devices, and reasons if a device is not available or has any problems.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Integration of Fault and Performance Management集成化的故障和性能监控&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The need to effectively integrate fault and performance management is becoming increasingly apparent to IT organizations seeking to ensure quality delivery of business services. ZABBIX generates real-time notification of threshold violations based on scheduled performance tests.&lt;/li>
&lt;/ul></description></item><item><title>What is ZABBIX?</title><link>https://martinliu.cn/2007/05/22/what-is-zabbix/</link><pubDate>Tue, 22 May 2007 13:51:00 +0000</pubDate><guid>https://martinliu.cn/2007/05/22/what-is-zabbix/</guid><description>&lt;p>&lt;a class="link" href="http://www.zabbix.com/img/zabbix1.png" target="_blank" rel="noopener"
>&lt;img src="http://www.zabbix.com/img/zabbix1.png"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->第一次看到这个软件是在 OpenNMS 的邮件讨论组中，他们计划做一个 vmware 的 image 放到&lt;a class="link" href="http://www.vmware.com/vmtn/appliances/index.html" target="_blank" rel="noopener"
>VMTN 上&lt;/a> 。我在 VMTN 里哪里点击了一下监控管理这一类，一个叫&lt;a class="link" href="http://www.vmware.com/vmtn/appliances/directory/124" target="_blank" rel="noopener"
>OpenESM 的项目&lt;/a>进入了我的视线。它能引起我的注意是因为，它在项目的描述中说:我们理解 ITSM、、、、&lt;a class="link" href="http://www.openesm.com/s1/" target="_blank" rel="noopener"
>Check it out&lt;/a>! 大致浏览了一下他们的网站，发现他们的目的是在 Zabbix 的基础上作一下优化和开发，加入若干特色：GSM modem 发短信、新报表、SLA 监控等。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->现在很多项目都有迅速实施的解决方案。对于很多开源项目来说，它们对于新手的相同门槛就是安装。安装上了，不会配置；配置好了，不会用；用上了解决不了问题。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->我先下载了&lt;a class="link" href="http://www.vmware.com/vmtn/appliances/directory/124" target="_blank" rel="noopener"
>OpenESM&lt;/a> ，一个不算太大的文件 1.3GB。解压缩之后用 VMWare 打开运行，猜出 root 的用户名是 openesm，登陆之后发现它是一个 Fedora 的虚拟机。登陆 OpenESM 的控制台， http://ip/ 接下来就需要去www.openesm.com上下载手册了，否则无法继续下去。照着手册安装代理，在我的两个Windows的机器上。安装需要先下子代理安装包，允许安装命令的时候需要制定自己的主机名和服务器的主机名。在控制台中加入这两个安装了代理的机器，由于是初次使用没用玩自动发现之类的功能。收集了一阵子数据之后，很快发现了很多有趣的数据。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最终总结如下&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>这是我安装的第一个有代理程序的开源监控软件，感觉在Windows下代理的安装还是比较方便的。比我想象的简单，安装文件只有一个exe文件，装完之后形成一个服务。我记得在查阅文档的时候看到了一文档，上面列出了所有代理程序能收集的数据的表格，说明了什么数据在什么操作系统中支持，那些不支持。它能在多种操作系统上安装，他的安装时说从代码编译安装，windows上不需要，在非windows上就以为这需要安装编译器什么的。这好像并不是特别好。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>可用性和性能的数据都能收集。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>事件管理功能，能触发action，还没有试过，能触发邮件和GSM短信等。没有试过。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>没有试的还挺多，还需要进一步研究。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul></description></item><item><title>OpenNMS网络和系统管理简介</title><link>https://martinliu.cn/2007/05/08/what-is-opennms/</link><pubDate>Tue, 08 May 2007 04:41:00 +0000</pubDate><guid>https://martinliu.cn/2007/05/08/what-is-opennms/</guid><description>&lt;h2 id="11-概述">1.1 概述&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;p>Opennms 能够帮助 IT 管理部门持续的监控分布式的异构系统和网络设备的运行状态，它可以支持 SNMP 网络管理协议确保管理的扩展性，并且提供非常灵活的定制功能从而有利于管理范围的伸缩。它内置的故障事件管理以提供故障事件的记录和分析的能力，快速隔离非根源事件并迅速发现故障原因。Opennms 良好的设计可以快速部署实施，简单友好的图形界面能够使得用户迅速掌握，从而降低操作的复杂度，提高 IT 管理效率。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="12-体系架构">1.2 体系架构&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;p>作为一个通用的网络系统故障监控平台，其体系架构应如下图所示：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="http://blog.chinaunix.net/u/2632/photo/060204205615.jpg"
loading="lazy"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 1. ** **Opennms****体系架构**&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>我们从下至上对 Opnnms 体系架构作一一的介绍：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 被管理对象层，SNMP 代理程序是数据采集和动作执行层。对应网络设备来讲，该层对应与网络设备本身的网络管理功能，不需要在设备上单独部署功能模块；对计算机来讲，该层是运行在目标计算机上的 SNMP 服务，负责采集该系统运行状况、性能等数据，并向管理层汇报。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u Opennms 监控引擎是实现网络和系统可用性、故障管理的业务逻辑和策略的处理层。他利用特定的轮询策略：从代理程序层收集数据、更新和维护被管理对象状态、执行相关的报警事件通知。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 管理对象数据库是网络和系统管理的数据存储层。其中以面向对象的方式保存着网络和系统资源的模型，记录着他们的配置、描述和状态等信息。这些模型和信息是通过 Opennms 网络扫描模块自动建立起来的，并由管理者层自动维护。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 图形用户界面是网络和系统管理的数据表示层。他以各种直观、生动的用户界面向用户展示网络和系统中各种对象的关系、配置、状态和故障情况，是优秀的用户接口。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>针对某企业简称 user short name 的环境，其 IT 故障监控子系统的管理框架为：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 被管理对象层——启动核心路由器和交换机的 SNMP 网管协议，作为网络设备故障的数据提供源；在所有需要管理的服务器上运行 SNMP 服务，作为监控操作系统故障的数据提供源。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u Opennms 网络监控服务器——新增一台服务器，部署 Opennms 的监控引擎模块，由该模块对被管理对象层的数据源进行自动的数据采集和翻译采集的结果。并实时发送报警信息。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 对象存储库——在和 Opennms 监控引擎安装的机器上安装 PostgreSQL，作为 Opennms 监控模块的对象存储库。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 图形用户界面——某企业简称 user short name 管理员可使用任何的 WWW 浏览器连接 Opennms 网络监控服务器的用户界面，使用合适的用户名，在某种适当的权限下查看和浏览网络监控信息、状态信息、可用性报表和性能报表。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="13-功能介绍">1.3 功能介绍&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;h3 id="131-网络节点自动发现">1.3.1 网络节点自动发现&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>对象存储库中的信息并不是靠管理员手工输入和维护的，而是由 Opennms 网络监控引擎－自动扫描模块自动从用户的计算机系统中搜索发现出来的。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 2. ** &lt;strong>网络节点自动发现&lt;/strong>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="132-图形用户管理界面">1.3.2 图形用户管理界面&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>在某企业简称 user short name 这 样的网络和系统中，需要一些友好的监控视图。目的是使得管理员能够通过直观的界面，迅速发现故障，从而在最短的时间内解决故障。该用户界面视图可使得管理 员通过管理工具看到现实世界对象的真实反映，而不是抽象的符号。使用户能够监控整个系统的概貌，系统的大体分布和总体运行状况等。并且决策适当的故障排除 方案，各种界面视图可通过 Intranet 进行浏览查看。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 3. ** &lt;strong>网络管理员管理主页&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>该用户界面的最左边是：Nodes with Outages，表格中列出了最近发生故障状况的 12 个节点，这些节点可能是网络故障，或者是某些网络服务出错等。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>用户界面的中间是：各种网络服务的服务水平报告。它列出了最近 24 小时之内各种网络服务的服务质量水平；其中的网络服务可能包括：网络接口的 UP 时间、Web 服务、DNS 和 DHCP 服务和数据库服务等。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>最右侧的是一些比较常用的功能选项：报警提示信息、节点的性能报表、节点网络服务相应时间报表和自定义的性能报表。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="133-故障监控">1.3.3 故障监控&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>被管理对象的数据采集和状态维护是由 Opennms 的监控引擎模块实现的。每个所管理的所有对象存储在数据库中。可以管理的对象包括：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 支持 SNMP 网管的网络设备&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 部署了 SNMP 服务的服务器上的操作系统&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Opennms 采取统一的通讯方式从这些管理对象上采集可用性和故障信息，信息的采集有两种方式：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u Opennms 主动地通过 SNMP 协议定期查询被管理对象状态&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u Opennms 被动接收被管理对象发来的 SNMP Trap&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Opennms 得到被管理对象的轮询或 Trap 信息后，根据收到的信息类型、对象原来的状态和网络系统管理的策略和逻辑判断对象的状态是否发生变化。如果发生了变化，则可以按照管理策略采取若干更新操作。&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="134-故障事件管理">1.3.4 故障事件管理&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>当 被管理对象的运行状态发生变化时，就会产生事件。如果该事件是由正常变为故障，则会产生故障报警。事件管理是通过收集、确认事件，对事件进行分类和过滤， 关联不同来源的事件完成对事件的处理和响应。通过事件管理，系统管理人员可以方便、迅速、及时掌握系统运行的故障和警报，及时进行处理，保障系统的正常、 稳定运行。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>IT 系统管理人员所关注的问题，如系统资源出现短缺、数据库连接失败、网络通信中断、主机文件系统溢出等等都会以事件的形式表现出来。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 4. ** &lt;strong>事件管理控制台&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="135-操作系统监控">1.3.5 操作系统监控&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>Opennms 对各种计算机操作系统的可用性、运行状况和故障的集中监控是通过本身的 SNMP 服务程序完成的。这些 SNMP 代理程序是 SNMP 服务的组成部分。在本次建议的方案中，在所有的被监控服务器上其监控的主要内容包括：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u CPU 利用率，显示系统、用户、空闲时间的百分比；&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 虚拟内存(Virtual memory)利用率；&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 文件系统使用情况，显示磁盘空间使用情况；&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 监视文件系统的使用率，当使用率超过特定阈值时向系统管理员报警；&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 监控网络端口的输入、输出、错包，以及端口是否被停用或者删除；&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u UNIX 系统还可以监控&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>² Load Average：服务器平均处理量&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>² 共享内存&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="136-网络节点配置信息管理">1.3.6 网络节点配置信息管理&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>被监控对象节点在数据中的配置信息是 IT 设备的资产信息，每个网络节点都是一个特定的 IT 资产设备。每个节点在数据库中有很多属性字段供选择填写，主要有三类属性信息：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;ol>
&lt;li>
&lt;pre>&lt;code> 配置种类信息：配置分类、告警分类、轮询属性和阈值分类。
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;!-- raw HTML omitted -->
&lt;ol start="2">
&lt;li>
&lt;pre>&lt;code> 标识信息：资产描述、厂商、型号、资产编号、操作系统等
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;!-- raw HTML omitted -->
&lt;ol start="3">
&lt;li>
&lt;pre>&lt;code> 位置信息：负责人、部门、楼层、房间、机架编号等
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 5. ** &lt;strong>节点资产信息&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h3 id="137-全面的节点监控">1.3.7 全面的节点监控&lt;/h3>
&lt;!-- raw HTML omitted -->
&lt;p>每个被监控的节点都能被细致的记录和监控。当查看某节点的信息时，有这样几类信息：状态信息、各种网络服务总的可用性、SNMP 属性、各个接口熟悉、最近发生的 5 个事件和最近的故障事件。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>**附图 6. ** &lt;strong>节点监控视图&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>在查看某个节点是，界面上的信息分为三类：网络服务可用性报表、当前状态和监控事件信息。在菜单栏还能有很多功能选项：查看故障事件、资产信息、响应时间报表、SNMP 性能报表、重新扫描、节点管理和更新 SNMP 信息。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="14-特点和优势">1.4 特点和优势&lt;/h2>
&lt;!-- raw HTML omitted -->
&lt;p>Opennms 在网络和系统管理方面，有非常广泛的用户，特别是中小企业用户，Opennms 具有很多极好的特点：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 方便易用的用户管理界面——Opennms 可以提供故障事件视图、节点视图、相应时间视图、性能视图等各种管理视图。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 基于 Open Source 协议开发——用户可以按照自己的需求，通过修改软件本身或者软件的源代码来定制。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 跨平台管理——Opennms 支持任何能运行标准 SNMP 协议服务的操作系统系统，并且可以从一个单一的用户界面分别管理其局域网（LAN）。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 切实可行的事件管理系统——Opennms 通过方便易用的交互式控制台，为 IT 管理员显示关键事件，提供自动的事件响应，可以以电子邮件方式发出事件通知。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 方便的集成——Opennms 可以与第三方产品集成。例如 Opennms 可以方便的与 Dell、HP、IBM 等厂商的服务器自带的 SNMP 故障管理软件集成。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>u 2005 Linux World 推荐管理产品 ——Opennms 获得 2005 年 Linux 世界大会的“最佳网络系统管理软件”的荣誉。已经被认定开源软件世界中的最佳网络系统管理软件。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>版权所有，如果转载请著名出处。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>曾被&lt;a class="link" href="http://www.vshj.com/" target="_blank" rel="noopener"
>www.vshj.com&lt;/a>转载：&lt;a class="link" href="http://www.vshj.com/Article/2006/200607/Article_97842.htm" target="_blank" rel="noopener"
>http://www.vshj.com/Article/2006/200607/Article_97842.htm&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a class="link" href="http://picasaweb.google.com/liuzh66/OpenNMS" target="_blank" rel="noopener"
>文章中所提到的图片请参阅我的相册。 &lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>OpenNMS常问问题All-in-One</title><link>https://martinliu.cn/2007/05/08/opennms-faqs/</link><pubDate>Tue, 08 May 2007 04:35:00 +0000</pubDate><guid>https://martinliu.cn/2007/05/08/opennms-faqs/</guid><description>&lt;p>**问：OpenNMS 是什么？&lt;!-- raw HTML omitted -->**答： OpenNMS 是第一个开发在开源模式下的企业级网络管理平台应用。OpenNMS 的目标是成为一个真真的分布式、可升级的网络管理平台，尽管它看似一个 FCAPS 网络管理模型，使之可用于开放源码和商业领域。目前：OpenNMS 专注与以下三个方面：服务轮询 － 检查应用服务的可用性，产生可用性报表。数据收集 － 收集、保存和报表网络信息数据，并设定和触发门限值。事件和提示管理 － 接受事件系统内部的和外部的事件，将源事件提供给强大的故障告警和故障升级系统。OpenNMS Group 是开发和支持 OpenNMS 应用的一个商业性的实体。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>问：为什么要开源？&lt;/strong>&lt;!-- raw HTML omitted -->答： 我们坚信真真的创新不会来自规模巨大的企业。我们还相信网络管理软件领域比 Linux 操作系统更适合开源模式。不像 Linux，网络管理要去监视和控制来 自不同厂商的很多的技术。考虑到每年都有很多新的网络设备面世。商业软件公司并不希望追赶这种更新产品的工作负荷，相反它们只能依赖与它们的通用管理技术 （最小化的通用性）。相反，对于一个开源项目中的每一个人－－厂商、用户或者技术顾问－－都能对项目做出自己的共享，从而保障了这个项目成功的几率。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**问：OpenNMS 是用什么语言写的？&lt;!-- raw HTML omitted -->**答： OpenNMS 主要是用 Java 语言写的。OpenNMS2.0 的目标是：让它成为一个以一堆.jar 文件形式来安装的产品。还有一些非 Java 的部分： icmpd-Java1.4 API 不能理解 ICMP。因为 ICMP 回答请求（ping）是一个最简单的来测试基于 Ip 的网络设备是否可以服务的方法，没有那个网络管理应用程序不用的 它的。将 ICMP 功能分离为一个独立的守护进程的目标是，如果系统中有 ICMP 的功能那么 OpenNMS 就用，如果没有 OpenNMS 就率略它。 OpenNMS 不需要 ICMP 来监控网络设备。数据库－OpenNMS 现在使用 PostgreSQL 作为它的地层数据库，PostgreSQL 是用 C 写 的。OpenNMS2.0 会使用几个能通过 Hibernate 适配器访问到的数据库。rrdtool－OpenNMS 当前的版本实时的选择使用 RRDtool 或 jRobin（Java 会使用 RRDtool）。最终这个选项的默认使用 jRobin，也可以选择使用 RRDtool。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->**问：OpenNMS 有图形的显示么？&lt;!-- raw HTML omitted -->**答： 这可能是一个对于 OpenNMS 新人来说最常问的问题：OpenNMS 的图形监控界面在那？简单的问答是我们没有一个这样的地图，如果你想听听我们的解释 请继续往下看。OpenNMS 是被一些经验丰富的网络管理技术顾问开发出来的。HP 的 Openvew NNM 是一个很流行的商业软件，它能生产一个可定制化的网络监控图形。OpenNMS Screenshot&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>GLPI –IT资源生命周期管理</title><link>https://martinliu.cn/2007/04/30/glpi-it-asset-mgmt/</link><pubDate>Mon, 30 Apr 2007 03:49:00 +0000</pubDate><guid>https://martinliu.cn/2007/04/30/glpi-it-asset-mgmt/</guid><description>&lt;p>&lt;a class="link" href="http://bp2.blogger.com/_KU0istEHv9w/RjVt3XwKBiI/AAAAAAAAADU/8AXj0w-tXTg/s1600-h/computer.JPG" target="_blank" rel="noopener"
>&lt;img src="http://bp2.blogger.com/_KU0istEHv9w/RjVt3XwKBiI/AAAAAAAAADU/8AXj0w-tXTg/s400/computer.JPG"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://bp2.blogger.com/_KU0istEHv9w/RjVt3XwKBjI/AAAAAAAAADc/94EbtEVA1_I/s1600-h/logo-glpi.png" target="_blank" rel="noopener"
>&lt;img src="http://bp2.blogger.com/_KU0istEHv9w/RjVt3XwKBjI/AAAAAAAAADc/94EbtEVA1_I/s400/logo-glpi.png"
loading="lazy"
>&lt;/a> GLPI 是一个法国的开源项目，之所会了解到这个项目，是由于 OCSNG 的原因。当我安装并使用了一下它之后立刻产生了以下问题：1）它仅仅是一个对现有设备 Inventory 的工具，对新设备的采购和计划无法实现。2）它仅仅是一个技术工具，能提供 CMDB 相关的配置信息数据，相关的流程如何实现：计划，采购，使用，变更和报废。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->没想到在安装试用了 GLPI 之后着一切都疑问都散去了。那就先讲讲安装过程。环境准备，我的测是环境如下：Dell Inspiron 600M 笔记本（70GB HD, 1GB RAM），由于硬件资源实在有限，所以我喜欢使用 VMWare 作为测试环境。在 VMWere 中安装 SuSE 10.1，最小安装；安装 apache,perl,php,mysql 和其它相关的包，由于 Yast 的包管理实在好用，所以为整个安装过程带来了很多方便。如果您也想测试的这个软件系统的话，最简单的方式则是：找一个物理的机器做 SuSE 10.1 的全安装，这样的安装过程绝对不会有找不到那些依赖组建的问题。软件安装：OCSNG / GLPI 的安装模式都是相同的基本相似的比较简单；再次就不多话了；我猜您可能会碰到的问题有：GLPI 的登陆用户名和密码的问题。所有可以利用的相关文档里好像没用提到这个信息，昏！可能是我的运气不好，的确没找到，不过最终被我猜到：）[登录密码在安装向导的导数第二个页面上]&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OCSNG 需要安装 Agent，Agent 会在目标设备上做清单扫描，上传 Inventory 信息；它的三层结构可能会是企业级用户的好消息，它还能方便的通过 Windows 域的组策略部署代理，也就是说只要用户登陆域，代理就能顺利安装部署。OCSNG 趋向做全面的客户端管理：inventory、license 管理等方面。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->从上面的 GPLI 的 screenshot 可以看出和一个笔记本电脑相关的一切。先讲讲它的来由，GPLI 解决的是 OCSNG 的上层问题：计划，购买，部署，跟踪，变更，维护，退休。它管理的是所有业务和流程层面的东西。GPLI 的数据来自 OSCNG 的数据库，它能自动从 OSCNG 中定期更新 inventory 信息。截屏中的电脑是我在我的笔记本上安装了 OSCNG 后，做的首次扫描后的结果，在 GPLI 中配置了和 OSCNG 的集成后，它就变成了一个 GPLI 中的管理数据。可以看到，和一个电脑资产相关的所有硬件信息，软件信息，help desk 请求，文档，链接，注释和变更历史记录等。GPLI 中有对外的 HelpDesk 模块，这能方便最终用户对设备维护的请求。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->GPLI 和 OSCNG 很好的结合可能做到“IT 资源生命周期管理”，参考文档：&lt;a class="link" href="http://glpi-project.org/wiki/doku.php?id=en:cyclevie" target="_blank" rel="noopener"
>http://glpi-project.org/wiki/doku.php?id=en:cyclevie&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->如果对把它们所实现的功能和 ITIL 框架对应一下，或许 IT 服务财务管理，能力管理，配置管理和发布管理等流程能与之能有某些联系。&lt;/p></description></item><item><title>OCSNG － IT资产管理软件</title><link>https://martinliu.cn/2007/04/29/ocsng-it-asset-management/</link><pubDate>Sun, 29 Apr 2007 09:26:00 +0000</pubDate><guid>https://martinliu.cn/2007/04/29/ocsng-it-asset-management/</guid><description>&lt;p>&lt;a class="link" href="http://www.ocsinventory-ng.org/uploads/images/logo-ocs.gif" target="_blank" rel="noopener"
>&lt;img src="http://www.ocsinventory-ng.org/uploads/images/logo-ocs.gif"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最近在网上又发现了一个不错的开源软件，这就是 OCSNG 资产管理软件。他能提供非常好的 Inventory 功能，发现并、更新计算机系统上的软硬件清单信息。下面是从他们的网站上找到特色介绍的信息：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=features" target="_blank" rel="noopener"
>Relevant inventory&lt;/a> 资产清单管理.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=package-deployment" target="_blank" rel="noopener"
>Powerfull deployment system&lt;/a> 强大的部署系统，代理程序软件部署方便宜用。.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=screenshots" target="_blank" rel="noopener"
>Web Administration Console&lt;/a> 基于Web的管理控制界面.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=Supported_OS" target="_blank" rel="noopener"
>Multiple operating systems support&lt;/a>,多操作系统支持 Microsoft Windows, Linux, *BSD, Sun Solaris, IBM AIX, HP-UX, MacOS X.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Lightweight bandwith usage: 轻量网络带宽使用，Windows系统的全部清单信息大约5 KB .
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>High performance: 高性能，1 000 000 电脑每天做清单扫描，使用的服务器是bi-Xeon 3 GHz /4 GB RAM.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=architecture" target="_blank" rel="noopener"
>3-Tier architecture&lt;/a> 三层架构设计，支持http/https/xml等协议河标准.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>基于有名的开源产品实现， &lt;a class="link" href="http://httpd.apache.org/" target="_blank" rel="noopener"
>Apache&lt;/a> web 服务器, &lt;a class="link" href="http://www.mysql.com/" target="_blank" rel="noopener"
>MySQL&lt;/a> 数据库服务器, &lt;a class="link" href="http://www.php.net/" target="_blank" rel="noopener"
>PHP&lt;/a> 和 &lt;a class="link" href="http://www.perl.org/" target="_blank" rel="noopener"
>PERL&lt;/a> 脚本语言.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=Development" target="_blank" rel="noopener"
>Web service&lt;/a> 提供 SOAP 接口的Web服务访问.
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://www.ocsinventory-ng.org/index.php?page=Development" target="_blank" rel="noopener"
>Plugins support&lt;/a> 通过API提供插件支持.
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Used with a IT and Asset Management Software such as open source tool &lt;strong>&lt;a class="link" href="http://www.glpi-project.org/spip.php?lang=en" target="_blank" rel="noopener"
>&lt;strong>GLPI&lt;/strong>&lt;/a>&lt;/strong>, you will have a powerfull inventory and asset management software with automatic updates of computer configuration, license management, help desk and more.&lt;/strong>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->根据ITIL的定义，CMDB是配置管理的主要数据库；其它相关的流程也非常依赖配置数据库；CMDB不一定是一个物理的数据库，它可以是一套数据库的集合。OCSNG能为CMDB提供有效的数据信息。&lt;/li>
&lt;/ul></description></item><item><title>Nmap — Network Mapper(网络映射器)</title><link>https://martinliu.cn/2007/04/28/nmap-network-mappe/</link><pubDate>Sat, 28 Apr 2007 11:43:00 +0000</pubDate><guid>https://martinliu.cn/2007/04/28/nmap-network-mappe/</guid><description>&lt;p>&lt;a class="link" href="http://images.insecure.org/nmap/images/nmap_bnr_euroboy.jpg" target="_blank" rel="noopener"
>&lt;img src="http://images.insecure.org/nmap/images/nmap_bnr_euroboy.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Nmap (“Network Mapper(网络映射器)”) 是一款开放源代码的 网络探测和安全审核的工具。它的设计目标是快速地扫描大型网络，当然用它扫描单个 主机也没有问题。Nmap 以新颖的方式使用原始 IP 报文来发现网络上有哪些主机，那些 主机提供什么服务(应用程序名和版本)，那些服务运行在什么操作系统(包括版本信息)， 它们使用什么类型的报文过滤器/防火墙，以及一堆其它功能。虽然 Nmap 通常用于安全审核， 许多系统管理员和网络管理员也用它来做一些日常的工作，比如查看整个网络的信息， 管理服务升级计划，以及监视主机和服务的运行。&lt;!-- raw HTML omitted -->Nmap 输出的是扫描目标的列表，以及每个目标的补充信息，至于是哪些信息则依赖于所使用的选项。 “所感兴趣的端口表格”是其中的关键。那张表列出端口号，协议，服务名称和状态。状态可能是 open(开放的)，filtered(被过滤的)， closed(关闭的)，或者 unfiltered(未被过滤的)。 Open(开放的)意味着目标机器上的应用程序正在该端口监听连接/报文。 filtered(被过滤的) 意味着防火墙，过滤器或者其它网络障碍阻止了该端口被访问，Nmap 无法得知 它是 open(开放的) 还是 closed(关闭的)。 closed(关闭的) 端口没有应用程序在它上面监听，但是他们随时可能开放。 当端口对 Nmap 的探测做出响应，但是 Nmap 无法确定它们是关闭还是开放时，这些端口就被认为是 unfiltered(未被过滤的) 如果 Nmap 报告状态组合 openfiltered 和 closedfiltered 时，那说明 Nmap 无法确定该端口处于两个状态中的哪一个状态。 当要求进行版本探测时，端口表也可以包含软件的版本信息。当要求进行 IP 协议扫描时 (-sO)，Nmap 提供关于所支持的 IP 协议而不是正在监听的端口的信息。&lt;!-- raw HTML omitted -->除了所感兴趣的端口表，Nmap 还能提供关于目标机的进一步信息，包括反向域名，操作系统猜测，设备类型，和 MAC 地址。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->摘自：&lt;a class="link" href="http://insecure.org/nmap/man/zh/" target="_blank" rel="noopener"
>nmap 中文文档&lt;/a> &lt;a class="link" href="http://insecure.org/nmap/index.html" target="_blank" rel="noopener"
>nmap 首页&lt;/a>&lt;/p></description></item><item><title>OpenNMS 安装说明－精简版</title><link>https://martinliu.cn/2007/04/26/opennms-install-sample/</link><pubDate>Thu, 26 Apr 2007 10:47:00 +0000</pubDate><guid>https://martinliu.cn/2007/04/26/opennms-install-sample/</guid><description>&lt;p>&lt;strong>Per-install Checklist:&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>SuSE 10.1 Linux install CD
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>OpenNMS rpm packages for SuSE Linux
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>JDK 1.5 package
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Tomcat 5.5.20 package
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>Here we go:&lt;/strong>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Insert install CD into Cd/Dvd rom
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Do SuSE Linux mini install
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Logon in OS, run &amp;lsquo;yast firewall&amp;rsquo; to open 8080 tcp port on firewall
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>upload all packages to /opt
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>untar JDK
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>untar Tomcat
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>install postgresql through yast; run &amp;lsquo;rcpostgresql start&amp;rsquo;
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Export some variables
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;em>export JAVA_HOME=/opt/jdk1.5.0_09&lt;!-- raw HTML omitted -->export OPENNMS_HOME=/opt/opennms&lt;!-- raw HTML omitted -->export CATALINA_HOME=/opt/apache-tomcat-5.5.20&lt;!-- raw HTML omitted -->export PATH=$PATH:$JAVA_HOME/bin&lt;/em>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Test Java and Tomcat
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;em>java -version&lt;!-- raw HTML omitted -->$CATALINA_HOME/bin/startup.sh&lt;/em>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Modify this file, vi /var/lib/pgsql/data/pg_hba.conf , then run &amp;lsquo;rcpostgresql restart&amp;rsquo;
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;em>#local all all ident sameuser&lt;!-- raw HTML omitted -->local all all trus&lt;!-- raw HTML omitted -->thost all all 127.0.0.1 255.255.255.255 trust&lt;!-- raw HTML omitted -->host all all ::1 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff trust&lt;/em>&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>install OpenNMS rpm packages; rpm -ivh xxx.rpm
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/runjava -s
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/install -dis
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/install -y -w $CATALINA_HOME/conf/Catalina/localhost
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>restart Tomcat
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>start OpenNMS; $OPENNMS_HOME/bin/opennms start
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Check opennms status; $OPENNMS_HOME/bin/opennms -v status
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>login web console
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上仅仅是我一个偷懒的方法，可以比较快的部署运行OpenNMS。这种方式的好处如下：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>Mini安装可以是最快的安装，总共只有几百MB就得到一个Linux操作系统
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>SuSE的包管理比较好用，配合一张安装DVD，几乎所有软件招之即来，不需要下载任何东西
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>Java和Tomcat的安装包是从以前的机器上直接把安装目录tar出来的，这也直接解压来用速度比较快。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->这个安装方式的缺点：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>并不是最优的安装，没用设置服务的自动重启
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>没用优化PostgreSQL
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>没用优化Java和Tomcat；ONMS是java应用，性能可能会是个问题
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>没用对ONMS做任何配置
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;strong>Post-install Checklist:&lt;/strong>&lt;!-- raw HTML omitted -->&lt;em>Change Admin password for ONMS&lt;!-- raw HTML omitted -->customize ONMS per your requirements&lt;!-- raw HTML omitted -->optimize Tomcat/Postgresql/ONMS configuration&lt;/em>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul></description></item><item><title>OTRS的第一个ITIL兼容版本</title><link>https://martinliu.cn/2007/04/23/otrs-itil-compatible/</link><pubDate>Mon, 23 Apr 2007 10:51:00 +0000</pubDate><guid>https://martinliu.cn/2007/04/23/otrs-itil-compatible/</guid><description>&lt;p>从来没用这么期待过一个软件的问世，虽然工具和技术不能画等号，不过它应该是第一个主动与 ITIL 看起，并且靠拢的开源软件。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1 下载安装&lt;!-- raw HTML omitted -->需要下载的软件是 OTRS 2.2.0 BETA2 和 OTRS:ITIL 1.0；后者只是一个压缩包，它包含了所有 ITIL 相关的软件包。此次安装并不顺利，归咎于很多 Apach 上 perl 的配置；安装之后的问题多是其它依赖的软件包不全造成的。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2 CMDB&lt;!-- raw HTML omitted -->说不上它是一个很好的 CMDB，不过用起来到是很方便。在 Admin 里把所有 CI 的类都建立出来后，相关的工作人员就能登陆上来，把相关的 CI 添加尽量。你需要从车轮开始做起，在这里可以说是非常适用，它不想商业软件内置了一堆的预定义的东西。CI 直接的联系关系也可以得到表达。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3 其它功能试用中待续&lt;/p></description></item><item><title>[转] 十问ITIL</title><link>https://martinliu.cn/2007/03/31/itil-faqs/</link><pubDate>Sat, 31 Mar 2007 08:56:00 +0000</pubDate><guid>https://martinliu.cn/2007/03/31/itil-faqs/</guid><description>&lt;p>想实现 IT 与业务融合的目标吗？&lt;!-- raw HTML omitted -->想让 IT 部门踏上自我管理之路吗？&lt;!-- raw HTML omitted -->想在 IT 规范的丛林里找到清晰的管理思路吗？&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在 IT 与业务战略融合的过程之中，ITIL（IT 基础设施库）和 ITSM（IT 服务管理）规范将为企业用户提供实现诸多 IT 与业务管理目标的真实路径。1989 年，英国政府商务部在发现企业对 IT 提供服务和自我管理的方式存在混乱认识的问题后，发布了长达 44 卷的 ITIL 规范。目前所实行的第二版于 2001 年发布，容量减至 9 卷。而最新的消息显示，ITIL 第三版本有望于 2007 年 4 月正式发布。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在 ITIL 诞生并成长的 10 余年间，ITIL 及 ITSM 理念都经历了巨大的变化和发展，并有望在 ISO 20000 中成为全球标准。目前的 ITIL 既是一个词汇库，也是一系列旨在概括性描述 IT 最佳实践的概念性流程。对企业而言，要使 IT 更有效地实现自我组织和自我管理，兑现 ITIL 对于管理的承诺，是一项足以用“浩大”二字形容的工程。所以，您需要先确定一个起点，并了解目前与 ITIL 有关的 10 项核心内容。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->** 1. 我能够通过 ITIL 实现哪些过去无法实现的目标吗？&lt;strong>&lt;!-- raw HTML omitted -->如果实施得当，ITIL 可以提高客户满意度、减少 IT 部门中的浪费，并降低运营成本。下面是两个简单的案例：&lt;!-- raw HTML omitted -->● 在 2000 年，Caterpillar 公司的 IT 部门解决 Web 事件的目标响应时间是 30 分钟，但是该部门达到这一目标的几率只有 30%。实施 ITIL 后，其 IT 供应商达到该响应目标时间的几率提升至 90%，而 Caterpillar 在过去 5 年实现了业务的几何级增长，IT 预算只上升了 1%。&lt;!-- raw HTML omitted -->● 两年前，Liberty Mutual 的 IT 管理员只有在用户打投诉电话后才能发现某个关键网络应用已停止工作。部署 ITIL 后，管理员可以在故障发生前对应用的运行速度和异常活动进行监视，并且通常可在用户感觉到异样之前解决问题。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>2. 是否需要通读 ITIL 全部 9 卷的内容，哪些是重点章节？&lt;/strong>&lt;!-- raw HTML omitted -->《服务支持》和《服务交付》这两卷包含了 ITIL 的核心知识，其他几卷都是补充性的。《服务支持》卷介绍了 5 个关键流程：即事件管理、问题管理、变更管理、发布管理和配置管理。尽管服务桌面被认为是一项功能，而非流程，但它仍被包含其中，并且被认为是 IT 服务的客户报告事件、发出请求和与 IT 基础设施与业务部门进行沟通的重要接触点。&lt;!-- raw HTML omitted -->事件管理的主要内容是，在发生事件（例如服务器崩溃）后尽可能快速地恢复正常的业务运营。问题管理将注意力集中在查找和消除事件的根源，防止其死灰复燃。&lt;!-- raw HTML omitted -->ITIL 的独特能力是它可以将“事件”与“问题”隔离开来。通常，支持人员在查找事件的根源时，IT 部门的支持服务就会暂时处于停顿状态。ITIL 优先考虑的是为业务部门提供服务，其次才是在后台修复问题的根源。&lt;!-- raw HTML omitted -->变更管理是协调和控制 IT 基础设施自身变化的过程。ITIL 将其视作实现适当批准、授权和质量保证步骤的一项协调工作。&lt;!-- raw HTML omitted -->发布管理指的是 IT 变更的实际实施，包括人员、流程、技术、培训、推广、沟通和业务领域活动，以及设计的建立、测试和变更发布等内容。对大多数 IT 运营活动而言，将各种变更打包为发布单元，可以有效地降低业务所受到的影响。&lt;!-- raw HTML omitted -->配置管理包括日志记录、跟踪、控制和验证基础设施信息的过程，这些信息用于描述 IT 基础设施中的每一个组件，以及各个组件之间的关系。这一过程的重点是这些项目，即所谓的 CI（配置项）之间的相互关系。所有这些信息都保存在一个逻辑 CMDB（配置管理数据库）中。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>3. CMDB 到底有多重要？&lt;/strong>&lt;!-- raw HTML omitted -->CMDB 是建设整个 IT 基础设施的蓝图，它描述各个配置项（CI），包括硬件、软件、事件、协议、服务水平、文档等之间的相互关系，同时还用于描述整个元系统（metasystem）的工作情况。CMDB 已经成为迅速查找 IT 基础设施信息的基础，同时也是实现有效管理决策的基础。在理想条件下，每个 CI 都有各自的可配置属性。如果可能，CMDB 应该能够自动发现 CI 的相关信息，并在发生变化时对其进行跟踪，从而将维护配置项所需要的管理工作量降至最低。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>4.《服务交付》卷关注哪些内容，重要性如何？&lt;/strong>&lt;!-- raw HTML omitted -->《服务交付》卷关注的是 IT 服务的交付和增强方式，该卷重点强调了 5 个关键的流程：即服务水平管理、可用性管理、容量管理、IT 服务连续性管理和 IT 财务管理。&lt;!-- raw HTML omitted -->服务水平管理涉及 SLA（服务水平协议）的规划、协调、监视和报告。它会以连续的方式对服务进行评估，确保这些服务能够以高性价比的方式交付，同时还要满足用户的服务目标。&lt;!-- raw HTML omitted -->可用性管理负责协调、设计、测量和管理 IT 基础设施的可用性，并会综合考虑基础设施和支持机构的各方面情况。它可以协调和集成各个松散结合的“孤岛”，确保 IT 能够按照必要的水平和成本提供所需的服务。这一过程会将一些关键原则结合在一起，其中包括每种服务的可靠性、可服务性、可管理性、安全性和响应性。&lt;!-- raw HTML omitted -->容量管理考虑的是适应业务工作量和业务目标的 IT 容量、性能和吞吐量。从历史上看，大多数 IT 部门都会根据 IT 资源的使用方式来管理容量。ITIL 则要求 IT 部门首先了解容量的业务驱动需求，并在将其实施到 IT 基础设施之前，通过建模和预测发展将其转化为服务工作量。&lt;!-- raw HTML omitted -->IT 服务连续性管理可以确保 IT 服务能够在发生重大灾难时得到恢复。它引入了关键业务功能概念，迫使 IT 部门将注意力放在服务的恢复上，不再仅仅关注技术的修复。&lt;!-- raw HTML omitted -->IT 财务管理可以提供 IT 成本和支出管理所需的预算、会计和收费服务。IT 部门通常不了解其提供 IT 服务所发生的成本，这也是其总被公司董事会质疑的原因之一。IT 部门必须开发出一种能力，来明确说明 IT 服务成本以及 IT 部门的贡献，IT 财务管理将赋予他们这样的能力。 ITIL 强调其参与业务活动的具体方法，这方面，服务台意义重大。在典型的业务部门中，业务用户和客户每天都会与服务台建立联系，而且这已经成为服务支持工作流程的一个必要组成部分。同时，行政和管理部门也需要与服务水平管理过程建立接口，从而实现新服务的部署，并调查服务提供工作流程所使用的服务质量。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>5. 其他 7 卷的作用和意义？&lt;/strong>&lt;!-- raw HTML omitted -->在理解了基本概念后，您会对其余的 7 卷有更多的了解。例如，《ITIL 简介》介绍了构成 ITIL 服务管理的基本概念；《实施 ITIL 服务的规划》解释了某个部门通过 ITIL 获得帮助的一些必要步骤；《ICT 基础设施管理》涉及了一些关键问题，比如网络服务管理、运营管理、计算机安装和验收等；《应用管理》重点讨论了软件开发和支持周期，对要求和 IT 服务的测试进行了定义。 《业务展望》卷事实上是两本书，一本面向 IT 人员，另外一本适用于商业经理。这两本书讨论了业务连续性管理、伙伴关系、外包、生存几率、以及剧烈变化过程中随机应变的业务实践。《安全管理》以 ITIL 的视角对各项安全规范和标准进行了讨论。最后一本是《软件资产管理》，它提供了管理软件和软件授权的最佳实践。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/strong> 6. 为什么在美国的部署远远落后于欧洲？&lt;strong>&lt;!-- raw HTML omitted -->美国在 IT 基础设施管理的规范化方面一直落后于欧洲。最近美国开始重视 ITIL 的原因之一是，许多在美国经营的欧洲和亚洲企业都在呼吁：在更大范围内让 IT 运营符合 ITIL 的要求。另外，很多美国企业发现，有超过 2/3 的 IT 预算被全新的、不可任意支配的运营成本所吞噬，而它们对此根本没有任何控制能力。 ITIL 将改变这一现状，它可以针对具体的商业目标实施连续的小型项目，而且所有结果都是可测量的。典型的目标包括缩减 IT 成本、减少服务中断、为重大 IT 计划或商业变化做好准备，比方说企业兼并、搬迁或收购。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/strong> 7. 除大型企业外，还有哪些企业需要 ITIL？小型企业或个人是否也可使用 ITIL？&lt;strong>&lt;!-- raw HTML omitted -->任何为企业提供 IT 服务的部门和/或为企业客户提供服务的部门都能从 ITIL 中受益。 例如，一家小型企业面临着网络经常中断的困扰，那么这家企业可以使用 ITIL 的问题管理流程来改善其网络环境。如果一家中型企业的 IT 基础设施非常复杂，那么这家企业就可以利用 ITIL 的配置管理解决方案，针对各类变更和新应用进行优化与评估，并为其实施绘制蓝图。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>8. 在对 ITIL 有了充分了解的前提下，该如何启动 ITIL 呢?&lt;/strong>&lt;!-- raw HTML omitted -->首先要接受培训并获得认证。几乎所有的大型硬件/软件厂商和一些中小型企业都可以提供 ITIL 培训。您可以在网上搜索相关的 ITIL 培训机构。完成培训后，您需要利用书本、网络研讨会、图书馆材料和在线资源填补您的知识空白。比较好的 ITIL 资源包括：IT Service Success（itServiceSuccess.com）、服务水平管理（slminfo.org）和 ITSM Watch（itsmwatch.com），以及美国 IT 服务管理论坛中主要的用户组站点（itsmfusa.org）。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>9. 是否应该聘用一些人员做 ITIL 实施？&lt;/strong>&lt;!-- raw HTML omitted -->许多公司都提供 ITIL 咨询和实施服务，但这只是采用曲线中最初级的部分。目前的市场中尚不存在所谓的领导型企业。您可以根据他人的经验来选择适当的服务商。 ITIL 告诉了我们“要做什么”，但有关“怎么做”的问题却涉及较少。目前，ITIL 被称为“IT 部门的 ERP”，它需要结合企业自身情况将人员、流程和工具相互融合。因此，ITIL 要在企业成功实施首先需要领导的积极推动，同时必须在企业中结合角色设置流程经理来落实设计的流程。在推动的过程中，企业应当考虑聘用顾问协助实施，让企业员工对 ITIL 有更为深刻的理解和认识，这对整个项目的成功帮助极大。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/strong> 10. ISO 20000 与 ITIL 的关系是什么？ **&lt;!-- raw HTML omitted -->ITIL 主要是一些流程，它并不提供任何衡量标准。而最近发布的 ISO 20000 是评测 IT 服务管理和改善 IT 服务的基础。它定义了针对服务商的要求，并且帮助您确定自己的工作是否符合可接受的 IT 服务管理标准。ISO 20000 可以提供具体、可测量的标准，能够用于对范围、定义条款、规划和实施服务管理、管理系统要求、全新或变更服务规划及实施、服务提供过程、关系过程、控制过程、决议过程和发布过程等领域进行审查。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ITIL 资源站点&lt;!-- raw HTML omitted -->■ 国外站点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ul>
&lt;li>Pink Elephant (&lt;a class="link" href="https://www.pinkelephant.com" target="_blank" rel="noopener"
>www.pinkelephant.com&lt;/a>) 澳大利亚ITSM/ITIL权威研究咨询机构
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>NAI (&lt;a class="link" href="https://www.nouriassociates.com" target="_blank" rel="noopener"
>www.nouriassociates.com&lt;/a>) 美国ITSM/ITIL
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>HDI (&lt;a class="link" href="https://www.thinkhdi.com" target="_blank" rel="noopener"
>www.thinkhdi.com&lt;/a>) 美国帮助台协会官方网站
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>ITSMF (www.itsmf) ITIL推广专业协会itSMF组织网站
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>ITIL官方网站 (&lt;a class="link" href="http://www.itil.co.uk" target="_blank" rel="noopener"
>www.itil.co.uk&lt;/a>)
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>ITSM门户网站 en.itsmportal.net
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->■ 国内网站：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>ITSM/ITIL专业论坛 &lt;a class="link" href="http://www.simaone.org/" target="_blank" rel="noopener"
>www.simaone.org&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ul></description></item><item><title>ntop ~ Web-based network traffic monitor</title><link>https://martinliu.cn/2007/03/21/ntop-web-based-network-traffic-monitor/</link><pubDate>Wed, 21 Mar 2007 04:09:00 +0000</pubDate><guid>https://martinliu.cn/2007/03/21/ntop-web-based-network-traffic-monitor/</guid><description>&lt;p>&lt;a class="link" href="http://www.ntop.org/ntop1.jpg" target="_blank" rel="noopener"
>&lt;img src="http://www.ntop.org/ntop1.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>安装方法：&lt;/strong>&lt;!-- raw HTML omitted -->最简单的安装方法应该是从 Linux 的安装光盘中安装，因为它比较小只有 2 ～ 3MB；很多 Linux 都包含这个软件。在 SuSE Linux 10.1 中可以找到 ntop-3.2-17。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>配置使用：&lt;/strong>&lt;!-- raw HTML omitted -->安装之后参考说明文档做首次初始化运行，如果是通过 rpm 从 Linux 光盘中安装；相关的系统服务也已经帮你安装。在 SuSE 里运行 rcntop start 就可以启动后台进程。访问 ntop 的界面&lt;a class="link" href="http://myserver:3000/" target="_blank" rel="noopener"
>http://myserver:3000/&lt;/a>。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Tips：&lt;!-- raw HTML omitted -->ntop 会吃掉比较多的内存资源，不建议在生产机上安装。它工作在第二层，采用实时抓包的方式；ntop 像是网络探针来捕获和分析网络活动，产生一些分析报表，部署时需要考虑它的部署位置。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>于其它系统的集成：&lt;/strong>&lt;!-- raw HTML omitted -->该系统界面的访问比较的直接，没有用户认证过程。所有报表和分析结果的按两个方式保存和呈现：host 和协议。它通过 rdd 存储数据，通过 web 页面展示图片；本身不需要依赖 web server。准备尝试把它集成到 Nagios 和 OpenNMS 中。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;strong>ntop 的英文说明&lt;/strong>&lt;!-- raw HTML omitted -->From: &lt;a class="link" href="http://www.ntop.org/Monitoring.html" target="_blank" rel="noopener"
>http://www.ntop.org/Monitoring.html&lt;/a>&lt;!-- raw HTML omitted -->NTOP is helpful as an &amp;ldquo;emergency&amp;rdquo; tool. When you are experiencing response time delays or you suspect that something is wrong with your network, NTOP allows you to easily monitor the protocols running on your LAN and to determine the utilization of each.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->NTOP comes very well when suspicious behavior is found on your network. Suppose you have a set of local clients accessing a database on your LAN. They claim that time response is very poor. You embark on a search to determine who or what is to blame. You generally have 2 options: the application or the network. You ask the application engineer(s) to determine that the application is OK. They determine that it is. You move on to the network engineers who come to find out that you have a very high retransmission packet rate caused by the server&amp;rsquo;s faulty network card (a problem to be detected by the sysadmin using standard linux/unix commands). In a situation like this, it is likely that they were able to determine this by using a tool like NTOP. Without the help of NTOP and similar tools, finding the cause of the problem could have been extremely tedious.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Some very useful sections of NTOP include:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;lsquo;Active TCP Sessions&amp;quot; - shows what is taking place on your network at that specific moment. For example:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Client Server Data Sent Data Rcvd Active Since Last Seen Duration&lt;!-- raw HTML omitted -->123.231.213.1 mail_server 3.6 MB 3.8 MB 12/08/99 19:40:01 12/20/99 20:47:31 12 day(s) 1:07:02&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->All this information can be accessed using any standard web browser. To have enough information to work on, you may wish to run NTOP for at least a couple of days (non-stop) in a production environment. (This may vary depending on the size of your network. For a medium departmental LAN, a couple of days should be fine).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&amp;lsquo;Connection Matrix&amp;rsquo; - shows which station is talking to what&lt;!-- raw HTML omitted -->server and the amount of traffic being exchanged&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Monitoring of the most intensive bandwidth senders and receivers - Heavy traffic is not only caused by physical media but also by other system intensive actions (e.g. users downloading large files). This can cause severe bottlenecks to your LAN.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The NTOP data presentation is impressive. Bar and Pie charts are used to demonstrate protocol utilization and packet size distribution. Data gathered from the monitoring can be logged in a file for posterior plotting using any spreadsheet application such as Sun&amp;rsquo;s Star Office. If you want to keep all of the information stored for future structured retrieval, NTOP gives you the option to store it in a SQL database.&lt;/p></description></item><item><title>GroundWork rpm 安装会导致原系统的一些改变</title><link>https://martinliu.cn/2007/02/28/groundwork-rpm-error/</link><pubDate>Wed, 28 Feb 2007 09:14:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/28/groundwork-rpm-error/</guid><description>&lt;p>GroundWork rpm 安装对系统造成的改变有：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>/etc/init.d/apache2 被改名为 apache2-save 导致，以前的Apache不能启动
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>会在/etc/ld.so.conf中加入一行/usr/local/groundwork/lib ；不知道为什么这会导致一下系统的服务不能正常运行，如：PostgreSQL和snmpd。修复方法是注释掉这一行，然后运ldconfig命令。还不知道GroundWork在没有这一行的情况下有什么问题，注释掉之后好像它还是能正常运行的。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol></description></item><item><title>GroundWork和OTRS系统的集成问题</title><link>https://martinliu.cn/2007/02/27/groundwork-and-otrs/</link><pubDate>Tue, 27 Feb 2007 09:40:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/27/groundwork-and-otrs/</guid><description>&lt;p>为了节省服务器，我们可能不得不把所有的监控以及相关的系统都安装到一个物理的机器上。如果是从原代码安装，我相信一定有很多选项能避免它们之间的冲突。假如你是后安装的 GroundWork，它会更改系统默认的 Apache2 的配置，导致以前安装的所有的 Web 应用都不能用。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->在我的测试机上，先安装的 OTRS，rpm 安装，后安装的 GroundWork，也是 rpm 安装。GroundWork 安装之后，OTRS 不能登陆。根据 GroundWork 的一些文档我做了，如下的修复步骤。&lt;!-- raw HTML omitted -->1）vi /etc/apache2/conf.d/otrs.conf 可以看到如下 OTRS 的 web 配置信息。&lt;!-- raw HTML omitted --># &amp;ndash;# added for OTRS (&lt;a class="link" href="http://otrs.org/" target="_blank" rel="noopener"
>http://otrs.org/&lt;/a>)# &amp;ndash;# agent, admin and customer frontendScriptAlias /otrs/ &amp;ldquo;/opt/otrs/bin/cgi-bin/&amp;ldquo;Alias /otrs-web/ &amp;ldquo;/opt/otrs/var/httpd/htdocs/&amp;rdquo;# load all otrs modulesPerlrequire /opt/otrs/scripts/apache2-perl-startup.pl# Apache::Reload - Reload Perl Modules when Changed on DiskPerlModule Apache2::ReloadPerlInitHandler Apache2::ReloadPerlModule Apache2::RequestRec# set mod_perl2 options# ErrorDocument 403 /otrs/customer.pl ErrorDocument 403 /otrs/index.pl SetHandler perl-script PerlResponseHandler ModPerl::Registry Options +ExecCGI PerlOptions +ParseHeaders PerlOptions +SetupEnv Order allow,deny Allow from all# directory settings AllowOverride None Options +ExecCGI -Includes Order allow,deny Allow from all AllowOverride None Order allow,deny Allow from all# MaxRequestsPerChild (so no apache child will be to big!)MaxRequestsPerChild 400&lt;!-- raw HTML omitted -->2）在 GroundWork 的主目录下其实也有一个 Apache 目录，它是原系统 Apache 的替代品。进入这个目录。&lt;!-- raw HTML omitted -->3）vi conf/httpd.conf 把 otrs.conf 文件中所有的内容都粘贴到这个文件中&lt;!-- raw HTML omitted -->4）GroundWork 的 apache 好像没用用到 perl 模块，需要加入 perl 模块的支持；找到有很多“LoadModule”的地方加入下面这一行&lt;!-- raw HTML omitted -->LoadModule perl_module modules/mod_perl.so&lt;!-- raw HTML omitted -->5）Copy 系统中的 mod_perl.so 文件到/usr/local/groundwork/apache2/modules&lt;!-- raw HTML omitted -->6）重新启动 gwhttpd 服务，也就是 GroundWork 系统的 web 服务&lt;!-- raw HTML omitted -->7）访问 OTRS 系统 &lt;a class="link" href="http://ip/otrs/customer.pl" target="_blank" rel="noopener"
>http://ip/otrs/customer.pl&lt;/a> 成功。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下面需要做的是把 OTRS 的登陆也集成到 GroundWork 的单点登陆当中；如果在能把 GroundWork 的报警也自动的集成到 OTRS 那就是完美了，欲知后事如何，且听下回分解。：）&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></description></item><item><title>OTRS::ITSM期待中的开源ITIL工具</title><link>https://martinliu.cn/2007/02/26/otrsitsm-itil/</link><pubDate>Mon, 26 Feb 2007 07:19:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/26/otrsitsm-itil/</guid><description>&lt;p>&lt;a class="link" href="http://www.otrs.com/otrs-web/images/Standard//name.jpg" target="_blank" rel="noopener"
>&lt;img src="http://www.otrs.com/otrs-web/images/Standard//name.jpg"
loading="lazy"
>&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->下个月就 OTRS::ITSM 1.0 Beta1 就发布了。OTRS 是一不错的开源的帮助台程序。之所以说它还不错是由于以下几点：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>能支持平台非常广。操作系统有Linux、Unix还有Windows；数据库有MySQL，PostgreSQL，Oracle和SQL Server。这些东西里多一个东西，多于商业软件来讲测试的工作量起码就要乘二。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>安装和配置是相当的简单。我用的是SuSE Linux，是用RPM包安装，整个安装配置过程只需要10分钟。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>支持多语言，目前能支持的语言有10几种，包括简繁体中文。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>纯Web操作界面，Web界面可以定制；很好的邮件系统集成。有问题单生成接口，能够将第三方网络系统监控的故障告警变成问题单，再自动分配到相关的维护组。
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->从它的名字可以看出，他是一个“开放式问题单系统”或者说是“帮助台”“Help Desk” “工单跟踪系统”。一个单纯的问题单系统本身到没有什么特殊，不过能做到像OTRS这样像ITIL靠拢，试图做成一个遵从ITIL的开源IT服务管理解决方案的，可真的是不容易了。在看看其它的Help Desk的开源项目，都是在简单的在实现“问题管理”这个功能而已。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OTRS现在最新的版本是otrs-2.1.5-01，等2.2正式发布后，OTRS::ITSM 1.0 就作为其中的一个模块也发布了。其实做到一个真真ITIL兼容的帮助台还真的不容易，我将期待它的CMDB，变更管理，以及各个流程之间的衔接。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->登陆这个OTRS的Demo系统来看看它到底怎么样，Check it out！！&lt;!-- raw HTML omitted -->Agent/Admin Interface:&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://demo.otrs.org/" target="_blank" rel="noopener"
>http://demo.otrs.org/&lt;/a>&lt;!-- raw HTML omitted -->Customer Interface:&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://customer.otrs.org/" target="_blank" rel="noopener"
>http://customer.otrs.org/&lt;/a>&lt;!-- raw HTML omitted -->FAQ Public Interface:&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://faq.otrs.org/" target="_blank" rel="noopener"
>http://faq.otrs.org/&lt;/a>&lt;!-- raw HTML omitted -->Email:&lt;!-- raw HTML omitted -->&lt;a class="link" href="mailto:demo@otrs.org" >demo@otrs.org&lt;/a>&lt;!-- raw HTML omitted -->System:&lt;!-- raw HTML omitted -->Intel(R) Celeron(R) CPU (2 GHz) with 256 MB RAM and an IDE harddrive (current tickets ~55.000 - 2005-05-02)&lt;/li>
&lt;/ol></description></item><item><title>Nagios华丽的外衣NagVis</title><link>https://martinliu.cn/2007/02/25/nagios-nagvis/</link><pubDate>Sun, 25 Feb 2007 03:09:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/25/nagios-nagvis/</guid><description>&lt;p>如果你用过 Nagios 的话，它的 2D、3D Map 一定会给你留下一些印象；2D Map 的确能比较试用一点，不过看上去还是挺难看的。NagVis 就是看到了这一点，它力求能让各种状态信息表达的更炫，更好看；它可以说是 Nagios 的一个不错的插件，直接 copy 到 Nagios 的相关目录下，配置一下就行了。它的效果如下图所示：&lt;img src="http://www.nagvis.org/lib/exe/fetch.php?w=250&amp;amp;h=&amp;amp;cache=cache&amp;amp;media=nagvis_mail_service.png"
loading="lazy"
>&lt;!-- raw HTML omitted -->说的在玄虚一点它可以是一个“业务流程管理视图”[CA Unicenter 中的名词，OpenView 里也有类似的概念]。其实就是把原子的监控对象：被监控节点和节点上的服务；和业务系统或者 IT 的逻辑关系相结合起来。例如：我的业务系统 A 的其中一个数据库服务器的数据库进程停了，这个可以影响到所有物理包含或者逻辑包含它的对象的状态。NagVis 试图用漂亮的图标来表达这些状态和关系，是管理者能看的更加直观。&lt;/p></description></item><item><title>如何看懂Smokeping图表</title><link>https://martinliu.cn/2007/02/15/smokeping-chart/</link><pubDate>Thu, 15 Feb 2007 08:45:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/15/smokeping-chart/</guid><description>&lt;p>&lt;img src="http://docs.google.com/File?id=dgt3878v_6z3dfsf"
loading="lazy"
>&lt;/p>
&lt;p>&lt;strong>_RTT(Round-Trip Time) _&lt;/strong>&lt;/p>
&lt;p>简单说它是一个数据报在网络上两点中间往返一次的时间。是影响 TCP 性能和表征网络运行状况的重要参数。在网络中实时、准确地测量大量 TCP 设备和系统的 RTT 参数是网络管的重要环节之一。Smokeping 就是这样的自动测试系统，它向目标设备和系统发送各种类型的测试数据包，测量、记录和展示 RTT。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>_Median RTT _**&lt;/strong>&lt;em>中间数&lt;/em>**&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>它是中间数并不是平均值。Smokeping 有多种类型的探针，探针在默认的设置下，每 300 秒向目标设备发送 20 测探测数据包。假如这 20 个数据包都返回的话，它就记录下了 20 个 RTT，那么 Median RTT 就是第十个包的 RTT；如果有 5 个包丢失的话，那么 Median RTT 就是第八个返回的包的 RTT 值。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>_Avg RTT _**&lt;/strong>&lt;em>评价值&lt;/em>**&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>它是每一个测试回合中所有 RTT 的算术评价值。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>&lt;em>Avg pkt loss&lt;/em>&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>它是丢包率。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>上图中测试的三个服务器，是用默认的 FPing 探针探测该服务器是否在线。Smokeping 就装在 OpenNMS 上，可以看出它的 RTT 最小；奇怪的是它的丢包率却是最大。其它的，一个是美国的一个 Web 服务器，另一个是美国的 Exchange 邮件服务器。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="http://docs.google.com/File?id=dgt3878v_7fs5j82"
loading="lazy"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;em>Last 3 Hours&lt;/em> 最近的 3 小时&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>*Median Ping RTT （__506.2 ms avg）*中间数的平均值是 5.6.2 毫秒。如果是绿色的短横线，说明一个 300 秒的周期内所有的包都返回都有 RTT 的时间记录下来；如果是蓝色的短横线则说明有 2 个包丢失。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>*Packet Loss：*丢包率。从上图中我们看出全都是绿线，所以丢包率当然是 0。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;em>Probe：__10 HTTP pings using echoping(1) every 300 seconds&lt;/em>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>这张图是 2007-1-11 12:00:05 生成的。每一个绿色的短横线都是一个测试回合 300 秒内用 echoping 测试 HTTP 协议 10 次。绿色画出的是中间数的位置，一个回合中的其它值都在它附近被以灰度的形式被刻画；灰度的范围越小越好，灰色的范围像是烟雾一样笼罩在中间数附近。在中间数附近的烟越小越好，说明网络很平稳。RTT 曲线的起伏还显示了网络的负载情况。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>点击这里看一个&lt;a class="link" href="http://oss.oetiker.ch/smokeping-demo/?target=Customers.OP" target="_blank" rel="noopener"
>网上的 Demo&lt;/a>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>update : 2008-1-18&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>现在 OpenNMS 把 smokeping 集成了，你可以在 OpenNMS 中配置使用这个功能。&lt;/p></description></item><item><title>翻译[opennms-discuss]邮件组里的一个讨论“Nagios转变”</title><link>https://martinliu.cn/2007/02/01/opennms-discuss-nagios/</link><pubDate>Thu, 01 Feb 2007 14:51:00 +0000</pubDate><guid>https://martinliu.cn/2007/02/01/opennms-discuss-nagios/</guid><description>&lt;p>全文在＝》&lt;a class="link" href="http://opennms.blogspot.com/2007/01/opennms.html" target="_blank" rel="noopener"
>China OpenNMS&lt;/a>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://www.opennms.org/images/thumb/a/a3/Untitled.PNG/800px-Untitled.PNG" target="_blank" rel="noopener"
>&lt;img src="http://www.opennms.org/images/thumb/a/a3/Untitled.PNG/800px-Untitled.PNG"
loading="lazy"
>&lt;/a> &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->我们已经在一个中等规模的企业实施了 Nagios，用来监控一堆 Cisco 设备：交换机、路由器、防火墙，还有各种类型的服务器&lt;!-- raw HTML omitted -->（Windows,Linux 和 Unix）。对我们来说 Nagios 工作的非常好。我们现在看 OpenNMS，是由于她有好看的用户界面和集成的服务资源&lt;!-- raw HTML omitted -->图。我喜欢 Nagios 是由于它的模块化。我能很容易的写一个插件来完成任何相关的事情。&lt;!-- raw HTML omitted -->我看到 OpenNMS 有 NRPE 和 NSCLIENT 的能力，但是有一些邮件和资源图不能彻底的采集到。有人正打算用 OpenNMS 作为 Nagios 或者其他&lt;!-- raw HTML omitted -->软件的替代品？我的答案是非常确定的，可是我也非常想听到一些关于 OpenNMS 的成功或者不很成功的故事。我正在测试环境中使用&lt;!-- raw HTML omitted -->的是 OpenNMS1.3.2。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Thanks!&lt;!-- raw HTML omitted -->Jon Christensen&lt;!-- raw HTML omitted -->&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;&lt;!-- raw HTML omitted -->我们也有一个和你类似的环境（路由器、交换机、各种服务器），目前有大约 250 个节点。&lt;!-- raw HTML omitted -->使用一个 CentOS4 的服务器，我们已经在上面安装了 OpenNMS1.2.9，Syslog-NG，Swatch, Logtool(&lt;a class="link" href="http://xjack.org/logtool/" target="_blank" rel="noopener"
>http://xjack.org/logtool/&lt;/a>)，&lt;!-- raw HTML omitted -->在 Windows 上用 Informant MIB，在几乎所有 Linux/Unix 上的是 NET-SNMP，和它们一起的还有很多在客户端的自定义脚本；它们中的&lt;!-- raw HTML omitted -->大多数都使用 send-event.pl 或者和它无关。&lt;!-- raw HTML omitted -->应为所有这些，我们已经能完全替代了 HP OpenView，虽然这是我的一面之词：这个架构是如此的模块化，以致于我们能做的比我们&lt;!-- raw HTML omitted -->使用 OpenView 的还要多，因种种理由。&lt;!-- raw HTML omitted -->Tim Selivanow&lt;!-- raw HTML omitted -->NOC Technician&lt;!-- raw HTML omitted -->EasyStreet Online Services, Inc.&lt;!-- raw HTML omitted -->&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>__&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;!-- raw HTML omitted -->我的个人观点：&lt;!-- raw HTML omitted -->从 Nagios 转到 OpenNMS 上，其实不太容易。由于一下因素：&lt;!-- raw HTML omitted -->1）Nagios 非常模块化，架构让人决定非常稳定可靠；它没有用到 Java。&lt;!-- raw HTML omitted -->2）它的文档非常好，包括它官方的使用手册和用户上传的文档；从文档可以看出这个欧洲 Base 的项目非常踏实，风格严谨。开发 ONMS 的那帮老米显得比较自作聪明一点。&lt;!-- raw HTML omitted -->3）Nagios 的论坛很好，有很多人可以互相帮助。&lt;/p></description></item><item><title>Cisco网络设备如何配置SNMP代理</title><link>https://martinliu.cn/2007/01/28/cisco-network-configure/</link><pubDate>Sun, 28 Jan 2007 13:31:00 +0000</pubDate><guid>https://martinliu.cn/2007/01/28/cisco-network-configure/</guid><description>&lt;p>Cisco 是网络设备的老大，它的设备以稳定、成熟和高性能著称。很多用户都以自己的网络设备是 99％的 Cisco 设备而自豪。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->对于任何一个网络设备如果没有配置 SNMP 代理，就不能被任何管理工具管理。下面的这个连接就是关于如何配置 Cisco 的 SNMP 服务：&lt;a class="link" href="http://www.cisco.com/univercd/cc/td/doc/product/software/ios122/122cgcr/ffun_c/fcfprt3/fcf014.htm" target="_blank" rel="noopener"
>http://www.cisco.com/univercd/cc/td/doc/product/software/ios122/122cgcr/ffun_c/fcfprt3/fcf014.htm&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->可网管网络设备都内置有 SNMP 代理，很多网管不喜欢配置、enable SNMP 服务的理由如下：不希望 SNMP 服务占用 CPU、内存等资源；不信任 SNMP 服务的安全性；不认确认 SNMP 管理协议的价值。我个人认为：通过 SNMP 协议对网络设备管理的价值将远远高于它对设备造成的消耗和带来的风险。如果你同时面对和管理 30 台以上的网络设备，试想把它们的运行状况做一遍检查，您需要花的时间是多长。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->网络管理系统和网络设备的互动如下：&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>网管系统主动定时读取MIB的值，存储和分析得到的数值，产生报表和报警事件。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>网管系统被动作为网络设备发送Trap的目的地，网管系统需要能翻译各种网络设备的Trap信息的意义。
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;/ol></description></item><item><title>链接</title><link>https://martinliu.cn/%E9%93%BE%E6%8E%A5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://martinliu.cn/%E9%93%BE%E6%8E%A5/</guid><description>&lt;img src="https://martinliu.cn/img/cyberspace-gc5b941535_640.jpg" alt="Featured image of post 链接" /></description></item><item><title>搜索</title><link>https://martinliu.cn/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://martinliu.cn/search/</guid><description/></item></channel></rss>
<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>用Minikube体验单节点K8S - Martin Liu's Blog</title><meta property="og:title" content="用Minikube体验单节点K8S"><meta name=twitter:title content="用Minikube体验单节点K8S"><meta name=description content="minikube上手指南"><meta property="og:description" content="minikube上手指南"><meta name=twitter:description content="minikube上手指南"><meta name=author content="刘征 Martin Liu"><link href=https://martinliu.cn/favicon.ico rel=icon type=image/x-icon><meta name=msvalidate.01 content="12F570013342D1F8B60A455D09221C1D"><meta name=yandex-verification content="7e9acc85531b0f35"><meta name=google-site-verification content="4oSwNTpy1vzip3_lt6XhkhMfImCD_DZlvL3K1k-M8qk"><meta name=baidu-site-verification content="Z7d1tYkxzQ"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-TL37V8G');</script><meta property="og:image" content="https://res.cloudinary.com/martinliu/image/upload/q_auto:eco/avatar.jpg"><meta name=twitter:image content="https://res.cloudinary.com/martinliu/image/upload/q_auto:eco/avatar.jpg"><meta name=twitter:card content="summary"><meta name=twitter:site content="@martinliu"><meta name=twitter:creator content="@martinliu"><meta property="og:url" content="https://martinliu.cn/posts/install-minikube-k8s/"><meta property="og:type" content="website"><meta property="og:site_name" content="Martin's Blog"><meta name=keywords content><meta name=generator content="Hugo 0.80.0"><link rel=canonical href=https://martinliu.cn/posts/install-minikube-k8s/><link rel=alternate href=https://martinliu.cn/index.xml type=application/rss+xml title="Martin's Blog"><script src=https://res.cloudinary.com/martinliu/raw/upload/static/jquery-1.12.4.min.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css integrity=sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0 crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://martinliu.cn/css/main.css><link rel=stylesheet href=https://martinliu.cn/css/search.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://martinliu.cn/css/prism.css><script data-ad-client=ca-pub-4545355461463255 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin=anonymous><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-749876-6','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>切换导航</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://martinliu.cn/>Martin's Blog</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=首页 href=https://martinliu.cn/>首页</a></li><li><a title=标签 href=https://martinliu.cn/tags>标签</a></li><li><a title=关于 href=https://martinliu.cn/about>关于</a></li><li><a title=书籍 href=https://martinliu.cn/book>书籍</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Martin's Blog" href=https://martinliu.cn/><img class=avatar-img src=https://res.cloudinary.com/martinliu/image/upload/q_auto:eco/avatar.jpg alt="Martin's Blog"></a></div></div></div></nav><div id=header-big-imgs data-num-img=1 data-img-src-1=https://martinliu.cn/images/abstract-1.jpg></div><header class="header-section has-img"><div class="intro-header big-img"><div class=container><div class=row><div class="col-lg-12 col-md-12 col-md-offset-0"><div class=post-heading><h1>用Minikube体验单节点K8S</h1><hr class=small><span class=post-subheading>minikube上手指南</span>
<span class=post-meta></span></div></div></div></div><span class=img-desc style=display:inline></span></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div><h5 id=wc>字数：600 |大约阅读时间 2 分钟</h5><h5 id=tags>标签:
<a href=https://martinliu.cn//tags/devops>DevOps</a> &nbsp;
<a href=https://martinliu.cn//tags/docker>Docker</a> &nbsp;</h5></div><article role=main class=blog-post><p><img src=https://martinliu.cn/images/minikube-logo.png alt=year-map></p><p>Usage:
minikube [command]</p><p>Available Commands:
addons Modify minikube&rsquo;s kubernetes addons
completion Outputs minikube shell completion for the given shell (bash)
config Modify minikube config
dashboard Opens/displays the kubernetes dashboard URL for your local cluster
delete Deletes a local kubernetes cluster
docker-env Sets up docker env variables; similar to &lsquo;$(docker-machine env)&rsquo;
get-k8s-versions Gets the list of available kubernetes versions available for minikube
ip Retrieves the IP address of the running cluster
logs Gets the logs of the running localkube instance, used for debugging minikube, not user code
mount Mounts the specified directory into minikube
profile Profile sets the current minikube profile
service Gets the kubernetes URL(s) for the specified service in your local cluster
ssh Log into or run a command on a machine with SSH; similar to &lsquo;docker-machine ssh&rsquo;
ssh-key Retrieve the ssh identity key path of the specified cluster
start Starts a local kubernetes cluster
status Gets the status of a local kubernetes cluster
stop Stops a running local kubernetes cluster
update-context Verify the IP address of the running cluster in kubeconfig.
version Print the version of minikube</p><p>Flags:
&ndash;alsologtostderr log to standard error as well as files
-b, &ndash;bootstrapper string The name of the cluster bootstrapper that will set up the kubernetes cluster. (default &ldquo;localkube&rdquo;)
-h, &ndash;help help for minikube
&ndash;log_backtrace_at traceLocation when logging hits line file:N, emit a stack trace (default :0)
&ndash;log_dir string If non-empty, write log files in this directory
&ndash;loglevel int Log level (0 = DEBUG, 5 = FATAL) (default 1)
&ndash;logtostderr log to standard error instead of files
-p, &ndash;profile string The name of the minikube VM being used.
This can be modified to allow for multiple minikube instances to be run independently (default &ldquo;minikube&rdquo;)
&ndash;stderrthreshold severity logs at or above this threshold go to stderr (default 2)
-v, &ndash;v Level log level for V logs
&ndash;vmodule moduleSpec comma-separated list of pattern=N settings for file-filtered logging</p><p>Use &ldquo;minikube [command] &ndash;help&rdquo; for more information about a command.</p><p>Starting local Kubernetes v1.7.5 cluster&mldr;
Starting VM&mldr;
Getting VM IP address&mldr;
Moving files into cluster&mldr;
Setting up certs&mldr;
Connecting to cluster&mldr;
Setting up kubeconfig&mldr;
Starting cluster components&mldr;
Kubectl is now configured to use the cluster.</p><h1 id=we-have-now-launched-an-echoserver-pod-but-we-have-to-wait-until-the-pod-is-up-before-curlingaccessing-it>We have now launched an echoserver pod but we have to wait until the pod is up before curling/accessing it</h1><h1 id=via-the-exposed-service>via the exposed service.</h1><h1 id=to-check-whether-the-pod-is-up-and-running-we-can-use-the-following>To check whether the pod is up and running we can use the following:</h1><p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 ContainerCreating 0 3s</p><h1 id=we-can-see-that-the-pod-is-still-being-created-from-the-containercreating-status>We can see that the pod is still being created from the ContainerCreating status</h1><p>$ kubectl get pod
NAME READY STATUS RESTARTS AGE
hello-minikube-3383150820-vctvh 1/1 Running 0 13s</p><h1 id=we-can-see-that-the-pod-is-now-running-and-we-will-now-be-able-to-curl-it>We can see that the pod is now Running and we will now be able to curl it:</h1><p>$ curl $(minikube service hello-minikube &ndash;url)
CLIENT VALUES:
client_address=172.17.0.2
command=GET
real path=/
query=nil
request_version=1.1
request_uri=http://192.168.99.100:8080/</p><p>SERVER VALUES:
server_version=nginx: 1.10.0 - lua: 10001</p><p>HEADERS RECEIVED:
accept=<em>/</em>
host=192.168.99.100:31721
user-agent=curl/7.54.0
BODY:
-no body in request-%</p><p>$ APISERVER=$(kubectl config view | grep https | cut -f 2- -d &ldquo;:&rdquo; | tr -d " &ldquo;)</p><p>$ curl $APISERVER &ndash;header &ldquo;Authorization: Bearer $TOKEN&rdquo; &ndash;insecure
{
&ldquo;paths&rdquo;: [
&ldquo;/api&rdquo;,
&ldquo;/api/v1&rdquo;,
&ldquo;/apis&rdquo;,
&ldquo;/apis/&rdquo;,
&ldquo;/apis/admissionregistration.k8s.io&rdquo;,
&ldquo;/apis/admissionregistration.k8s.io/v1alpha1&rdquo;,
&ldquo;/apis/apiextensions.k8s.io&rdquo;,
&ldquo;/apis/apiextensions.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/apiregistration.k8s.io&rdquo;,
&ldquo;/apis/apiregistration.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/apps&rdquo;,
&ldquo;/apis/apps/v1beta1&rdquo;,
&ldquo;/apis/authentication.k8s.io&rdquo;,
&ldquo;/apis/authentication.k8s.io/v1&rdquo;,
&ldquo;/apis/authentication.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/authorization.k8s.io&rdquo;,
&ldquo;/apis/authorization.k8s.io/v1&rdquo;,
&ldquo;/apis/authorization.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/autoscaling&rdquo;,
&ldquo;/apis/autoscaling/v1&rdquo;,
&ldquo;/apis/autoscaling/v2alpha1&rdquo;,
&ldquo;/apis/batch&rdquo;,
&ldquo;/apis/batch/v1&rdquo;,
&ldquo;/apis/batch/v2alpha1&rdquo;,
&ldquo;/apis/certificates.k8s.io&rdquo;,
&ldquo;/apis/certificates.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/extensions&rdquo;,
&ldquo;/apis/extensions/v1beta1&rdquo;,
&ldquo;/apis/networking.k8s.io&rdquo;,
&ldquo;/apis/networking.k8s.io/v1&rdquo;,
&ldquo;/apis/policy&rdquo;,
&ldquo;/apis/policy/v1beta1&rdquo;,
&ldquo;/apis/rbac.authorization.k8s.io&rdquo;,
&ldquo;/apis/rbac.authorization.k8s.io/v1alpha1&rdquo;,
&ldquo;/apis/rbac.authorization.k8s.io/v1beta1&rdquo;,
&ldquo;/apis/settings.k8s.io&rdquo;,
&ldquo;/apis/settings.k8s.io/v1alpha1&rdquo;,
&ldquo;/apis/storage.k8s.io&rdquo;,
&ldquo;/apis/storage.k8s.io/v1&rdquo;,
&ldquo;/apis/storage.k8s.io/v1beta1&rdquo;,
&ldquo;/healthz&rdquo;,
&ldquo;/healthz/autoregister-completion&rdquo;,
&ldquo;/healthz/ping&rdquo;,
&ldquo;/healthz/poststarthook/apiservice-registration-controller&rdquo;,
&ldquo;/healthz/poststarthook/apiservice-status-available-controller&rdquo;,
&ldquo;/healthz/poststarthook/bootstrap-controller&rdquo;,
&ldquo;/healthz/poststarthook/ca-registration&rdquo;,
&ldquo;/healthz/poststarthook/extensions/third-party-resources&rdquo;,
&ldquo;/healthz/poststarthook/generic-apiserver-start-informers&rdquo;,
&ldquo;/healthz/poststarthook/kube-apiserver-autoregistration&rdquo;,
&ldquo;/healthz/poststarthook/start-apiextensions-controllers&rdquo;,
&ldquo;/healthz/poststarthook/start-apiextensions-informers&rdquo;,
&ldquo;/healthz/poststarthook/start-kube-aggregator-informers&rdquo;,
&ldquo;/healthz/poststarthook/start-kube-apiserver-informers&rdquo;,
&ldquo;/logs&rdquo;,
&ldquo;/metrics&rdquo;,
&ldquo;/swagger-2.0.0.json&rdquo;,
&ldquo;/swagger-2.0.0.pb-v1&rdquo;,
&ldquo;/swagger-2.0.0.pb-v1.gz&rdquo;,
&ldquo;/swagger.json&rdquo;,
&ldquo;/swaggerapi&rdquo;,
&ldquo;/ui&rdquo;,
&ldquo;/ui/&rdquo;,
&ldquo;/version&rdquo;
]
}%</p><p></p><p><img src=https://martinliu.cn/images/Overview---Kubernetes-Dashboard.jpg alt=year-map></p><a href=https://mp.weixin.qq.com/s/elRqbNlidJzmKCejBwtsAg target=_blank><img src=https://martinliu.cn/images/sref-zs.jpg alt="SRE Foundation 招生简章"></a></article><ul class="pager blog-pager"><li class=previous><a href=https://martinliu.cn/posts/running-on-xian-city-wall/ data-toggle=tooltip data-placement=top title=奔跑在西安的城墙上>&larr; 前一篇</a></li><li class=next><a href=https://martinliu.cn/posts/welcome-to-ghost/ data-toggle=tooltip data-placement=top title=切换到Ghost+七牛>后一篇 &rarr;</a></li></ul><div><h2>See Also</h2><ul><li><a href=https://martinliu.cn/posts/state-devops-adoption-trends-2017/>2017DevOps采用和趋势现状-信息图</a></li><li><a href=https://martinliu.cn/2017/01/07/devops-glossary/>DevOps术语表</a></li><li><a href=https://martinliu.cn/2017/01/07/nutanix-resource-sites/>Nutanix资源站点清单</a></li><li><a href=https://martinliu.cn/2017/01/03/devops-booklist/>DevOps书单</a></li><li><a href=https://martinliu.cn/2016/11/07/exin-devops-master-e8aea4e8af81e88083e8af95/>EXIN DevOps Master 认证考试</a></li></ul></div></div></div></section></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:liuzh66@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/martinliu title=GitHub><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/martinliu title=GitLab><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/martinliu title=Twitter><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/liuzheng title=LinkedIn><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">&copy;2017-2018
刘征 Martin Liu
&nbsp;&bull;&nbsp;
<a href=https://martinliu.cn/>Martin's Blog</a></p><p class="credits theme-by text-muted">由 <a href=http://gohugo.io>Hugo v0.80.0</a> 强力驱动 &nbsp;&bull;&nbsp; 主题 <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> 移植自 <a href=http://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://res.cloudinary.com/martinliu/raw/upload/static/bootstrap.min.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/photoswipe-ui-default.min.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/photoswipe.min.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/auto-render.min.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/main.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/prism.js></script><script src=https://res.cloudinary.com/martinliu/raw/upload/static/katex.min.js></script><script>renderMathInElement(document.body);</script></body></html>
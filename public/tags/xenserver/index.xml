<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>xenserver on DevOps &amp; SRE Blog</title>
    <link>https://martinliu.cn/tags/xenserver/</link>
    <description>Recent content in xenserver on DevOps &amp; SRE Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Mon, 25 Nov 2013 10:39:00 +0000</lastBuildDate><atom:link href="https://martinliu.cn/tags/xenserver/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>XenServer 添加硬盘做本地存储</title>
      <link>https://martinliu.cn/2013/11/25/xenservere6b7bbe58aa0e7a1ace79b98e5819ae69cace59cb0e5ad98e582a8/</link>
      <pubDate>Mon, 25 Nov 2013 10:39:00 +0000</pubDate>
      
      <guid>https://martinliu.cn/2013/11/25/xenservere6b7bbe58aa0e7a1ace79b98e5819ae69cace59cb0e5ad98e582a8/</guid>
      <description>当您的 XenServer 测试机需要增加硬盘的时候，你需要通过简单的几条指令把新硬盘添加为本地存储。
下面的实例情况是：
  测试机有两块硬盘
  OCZ SSD硬盘一块
  SATA 不通硬盘一块
  还有一个U盘插在系统上
    SATA的硬盘是我需要加载的新硬盘
  这个新的硬盘希望被处理成XenServer本地的SR
  添加过程中主要需要使用这样几条指令：
  查看当前系统上的检查出来并且挂载中的分区： cat /proc/partitions
  详细查看这些存储和设备对应的情况： ls -l /dev/disk/by-id/
  创建新的本地SR: xe sr-create content-type=user device-config:device=/dev/disk/by-id/scsi-SATA_ST9320325ASG_5VD7G964 host-uuid=3850317b-d23a-4ed0-87f9-2b27854319e5 name-label=&amp;ldquo;SATA320&amp;rdquo; shared=false type=lvm
  [bash] [root@XS62 ~]# cat /proc/partitions major minor #blocks name
7 0 52378 loop0 8 0 250059096 sda 8 1 4193297 sda1 8 2 4193297 sda2 8 3 241669447 sda3 8 16 312571224 sdb 8 17 204800 sdb1 8 18 312235312 sdb2 8 32 4137984 sdc 8 36 4137856 sdc4 252 0 241655808 dm-0</description>
    </item>
    
    <item>
      <title>解决XenServer tools not installed</title>
      <link>https://martinliu.cn/2013/04/07/xenserver-tools-not-installed/</link>
      <pubDate>Sun, 07 Apr 2013 10:27:38 +0000</pubDate>
      
      <guid>https://martinliu.cn/2013/04/07/xenserver-tools-not-installed/</guid>
      <description>[box color=&amp;ldquo;orange&amp;rdquo; icon=&amp;ldquo;flag&amp;rdquo;] 鸣谢：Michael Zhang的经验分享，有需要的请收藏备用。 [/box]
刚刚搞定了POC环境中一个很诡异的问题。把过程写出来以供大家参考。建议可以把这个设置放到POC的实施手册中。 刚开始做POC时，我们安装了XP的模板，并且安装了同版本的XenTools，此时XenCenter面板上显示虚机的IP地址没有问题。但是跑了一段时间后发现，所有的虚机的IP地址都显示不出来了，并且XenCenter面板上显示XenServer tools not installed，虚机的内存信息，Disk IO等信息，都没有显示： 

后来重装了模板，重新发布了虚机，一切就OK了，此时我认为是原先的模板有问题，所以导致了这个issue。 但是后来跑了几天，某台虚机又出现了类似的症状，此时我意识到应该不是模板的问题了。然后我就检查了这台虚机的Service，发现：

这个Service就是XenTool的Service，因为没有启动，所以导致了上述的问题。 但是当我用手工试图重启该Service的时候，系统报改Service启动时停止，没有给出任何原因。Windows Event Log里也没看到任何报错。 后来上网查了下，原来是Windows Event Log的Application类的log满了以后，会导致该Service启动异常。 看了下XP的Windows Event Log的Application类日志的属性，默认只有64K：

我把上面的日志文件大小阀值改成了1024K，清空Application类的log，重启上面的Service, 成功，问题解决。
 

上述类似的问题我记得也有兄弟曾经遇到过，发邮件出来问过，当时怀疑是XenServer跟VDA的时间不同步造成，现在感觉也许跟这个原因有关。
[box color=&amp;ldquo;gray&amp;rdquo; icon=&amp;ldquo;order-check&amp;rdquo;] 欢迎投稿，请发邮件到： liuzh66@gmail.com [/box]</description>
    </item>
    
  </channel>
</rss>

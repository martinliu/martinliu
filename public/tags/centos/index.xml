<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>centos on 刘征的博客</title>
    <link>https://martinliu.cn/tags/centos/</link>
    <description>Recent content in centos on 刘征的博客</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sun, 12 Jul 2015 11:16:44 +0000</lastBuildDate><atom:link href="https://martinliu.cn/tags/centos/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Ovirt 服务器虚拟化测试</title>
      <link>https://martinliu.cn/2015/07/12/ovirt-e69c8de58aa1e599a8e8999ae68b9fe58c96e6b58be8af95/</link>
      <pubDate>Sun, 12 Jul 2015 11:16:44 +0000</pubDate>
      
      <guid>https://martinliu.cn/2015/07/12/ovirt-e69c8de58aa1e599a8e8999ae68b9fe58c96e6b58be8af95/</guid>
      <description>本文安装和测试的软件是Ovirt+KVM的服务器虚拟化，这两个项目是红帽RHEVM+KVM服务器虚拟化的上游社区产品。可以通过这个文档清晰的了解到红帽服务器虚拟化产品的大体功能，基本特点。本测试文档使用的是Centos7+社区yum 源；因此是最新的ovirt和kvm的功能。如果是正式的企业级需求测试，请使用光纤或者传统存储，从而达到和vmware等商业产品最好的类比测试。尽量避免使用嵌套kvm虚拟化的方式，除非您很熟悉Linux，使用两个笔记本是最简单的测试环境。
下图是Ovirt服务器的详细架构图。其中的ovirt-engine是本文安装和部署的部分，是用一个centos7的虚拟机安装的。Host1也是用一个centos7的虚拟机安装的。半年之前我也配置过一次嵌套kvm，根本是一头雾水，而且还没有成功，不过这次的配置过程却这么简单容易，就正常工作了。希望简单一点的人，可以把Host1用物理机来安装，也会节省很多时间。
[caption id=&amp;ldquo;attachment_53901&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;512&amp;rdquo;]ovirt 架构图[/caption]
KVM嵌套虚拟化准备 在测试KVM服务器虚拟化的过程中，如果您能有独立的物理机跑Hypervisor，那么您可以忽略本节。至今进入ovirt的安装。 下面的测试的物理机是 Lenovo T440s 笔记本，运行的 Fedora 22 操作系统，使用 KVM manager 做虚拟机的管理工具。本次测试用到两个虚拟机：
  ovirt: 运行服务器虚拟化的管理机ovirt，这个程序类似于vmware 的 vcenter。
  ovirt-host : 用来被ovirt管理的hypervisor；使用 kvm 嵌套 kvm 的方式，来跑虚拟机。
  确认本机的服务器虚拟机CPU Bios配置正常。
[bash]
egrep -c &amp;lsquo;(vmx|svm)&amp;rsquo; /proc/cpuinfo 4
[/bash]
本机是i5的CPU，双核开启超线程，显示为4。还没有启用嵌套KVM的虚拟机，需要新建下面这个配置文件，操作系统不同，可能稍微不同，下面是以 Fedora 22 为例。
vi /etc/modprobe.d/kvm-nested.conf 编辑以上文件，增加下面这行参数即可 options kvm_intel nested=1
运行下面的命令，为操作系统内核加載此功能。
[bash]
modprobe -r kvm_intel # unload modprobe kvm_intel # reload again
cat /sys/module/kvm_intel/parameters/nested Y</description>
    </item>
    
    <item>
      <title>在CentOS 7上安装部署Katello2.2</title>
      <link>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</link>
      <pubDate>Sun, 07 Jun 2015 16:35:05 +0000</pubDate>
      
      <guid>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</guid>
      <description>Katello的系统架构如下图：
Katell系统是一个复合型开源项目，是Pulp, Candlepin 和 Foreman的组合。Foreman默认使用Puppet作配置管理。
它的安装文档见官方手册：http://www.katello.org/docs/2.2/installation/index.html
为了简化安装，请下在本站提供的CentOS7完美安装模板。使用它来创建一个虚拟机，6GB内存，2VCPU；网络上为了方便，请在virt-manger中新建如下所示的网络。
虚拟机启动之后，确保host能正常联网。启动刚才创建的虚拟机，配置好IP，ping 外网网站，确保它能正常联网即可。其它安装命令如下：
[bash]
yum -y localinstall http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm yum -y localinstall http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm yum -y localinstall http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm yum -y localinstall http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm yum -y install foreman-release-scl
yum -y install katello
katello-installer -v
&amp;ndash;foreman-admin-username admin
&amp;ndash;foreman-admin-password smartvm
&amp;ndash;capsule-dns true
&amp;ndash;capsule-dns-interface eth0
&amp;ndash;capsule-dns-zone xenlab.com
&amp;ndash;capsule-dns-forwarders 192.168.10.1
&amp;ndash;capsule-dns-reverse 10.168.192.in-addr.arpa
&amp;ndash;capsule-dhcp true
&amp;ndash;capsule-dhcp-interface eth0
&amp;ndash;capsule-dhcp-range &amp;ldquo;192.168.10.100 192.168.10.240&amp;rdquo;
&amp;ndash;capsule-dhcp-gateway 192.168.10.1
&amp;ndash;capsule-dhcp-nameservers 192.168.10.10
&amp;ndash;capsule-tftp true
&amp;ndash;capsule-tftp-servername $(hostname)
&amp;ndash;capsule-puppet true
&amp;ndash;capsule-puppetca true
[/bash]</description>
    </item>
    
    <item>
      <title>安装完美 CentOS7 虚拟机模板</title>
      <link>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</link>
      <pubDate>Fri, 05 Jun 2015 15:44:52 +0000</pubDate>
      
      <guid>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</guid>
      <description>初始化安装 下载最新版CentOS7 DVD 选择mini安装。
网络配置 安装过程中设置了静态网络地址，如下：
[bash]
[root@centos7-tmp ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0 TYPE=Ethernet BOOTPROTO=none DEFROUTE=yes IPV4_FAILURE_FATAL=no IPV6INIT=no NAME=eth0 DEVICE=eth0 ONBOOT=yes DNS1=192.168.10.1 DOMAIN=xenlab.com IPADDR=192.168.10.8 PREFIX=24 GATEWAY=192.168.10.1 UUID=5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03
[/bash]
软件包 Change log:
   yum install wget telnet perl perl-devel net-tools kernel-devel
  yum install vim-enhanced.x86_64
  yum -y install git
  yum install acpid
  yum install tree
  yum install ntp
  yum install unzip</description>
    </item>
    
    <item>
      <title>如何参与 Project Atomic</title>
      <link>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</link>
      <pubDate>Thu, 19 Mar 2015 03:23:37 +0000</pubDate>
      
      <guid>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</guid>
      <description>关于 Project Atomic 项目 
Project Atomic 项目相关的开源技术组件如下：
[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]
  linux kernel
  systemd
  OSTree and rpm-ostree
  Docker
  kubernetes
  Fedora and CentOS
  [/wm_list]
该项目的网站在： http://www.projectatomic.io/
加入 Project Atomic 邮件列表 项目一般性讨论： https://lists.projectatomic.io/mailman/listinfo/atomic
项目开发者：https://lists.projectatomic.io/mailman/listinfo/atomic-devel
项目版本发布更新：https://lists.projectatomic.io/mailman/listinfo/atomic-announce
填写自己的邮箱后，别忘了在邮箱里收信，并且确认。如下图所示：

问 Project Atomic 问题和讨论 http://ask.projectatomic.io/en/questions/ 这里是项目的论坛可以在这里提问和帮助其他人。
了解 Project Atomic 代码 https://github.com/projectatomic/ 项目的代码在Github网站上可以看到，如果你watch这个项目的话，可以收到所有开发者对该项目的所有代码更新等活动。</description>
    </item>
    
    <item>
      <title>既要开源，也要环保</title>
      <link>https://martinliu.cn/2011/03/24/usb-linux/</link>
      <pubDate>Thu, 24 Mar 2011 13:12:58 +0000</pubDate>
      
      <guid>https://martinliu.cn/2011/03/24/usb-linux/</guid>
      <description>今天看到了我保存的一摞Linux光盘，这基本上也记录了我所关注和安装过的所有Linux的种类。品种繁多。如下：
  CentOS 4.4
  Ubuntu 8.4 server
  Ubuntu 8.4 desktop
  Opensolaris
  Debian 4.0
  SuSe Enterprise 10.1
  Redhat Enterprise Server 3
  SuSe Linux 10
  Mandriva 2008
  CentOS 4.2
  SuSe 10.0 Eval DVD
  Mandrake 10.0
  Redhat 7.1
  Derbain 3.0
  FreeBSD 5.2
  Suse 9</description>
    </item>
    
  </channel>
</rss>
